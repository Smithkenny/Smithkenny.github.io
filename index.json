[{"categories":["æ•°æ®åº“"],"content":"oracleç‰ˆæœ¬å·æŸ¥çœ‹ ä½¿ç”¨sqlè¯­å¥æŸ¥è¯¢ï¼š select * from V$VERSION ","date":"2024-01-09","objectID":"/oracle%E7%89%88%E6%9C%AC%E5%8F%B7%E6%9F%A5%E7%9C%8B/:1:0","tags":["oracle"],"title":"","uri":"/oracle%E7%89%88%E6%9C%AC%E5%8F%B7%E6%9F%A5%E7%9C%8B/"},{"categories":["ç½‘ç«™"],"content":"ä¹‹å‰å†™æ–‡ç« çš„æµç¨‹ï¼š è¿›å…¥ç¬”è®°æœ¬ä¸­åšå®¢æºç çš„æ–‡ä»¶å¤¹ å³é”®æ‰“å¼€git bashï¼Œä½¿ç”¨â€™git pull origin masterâ€™ å°†æœ¬åœ°ä¸çº¿ä¸Šè¿›è¡ŒåŒæ­¥ã€‚ åˆ›å»ºæ–°æ–‡ç« ï¼ˆhugo new posts/æ–°æ–‡ç« .mdï¼‰ æ‰‹åŠ¨æ›´æ”¹æ–‡ç« åˆ†ç±» å†™æ–‡ç« å†…å®¹ ä¸Šä¼ æ–‡ç« ï¼ˆgit add .. \\ git commit -m â€œâ€\\ git push origin masterï¼‰ æœ€åä½¿ç”¨github actionè‡ªåŠ¨å‘å¸ƒåˆ°ä¸»é¡µ ç”±äºhugoæ²¡æœ‰webé¡µé¢ï¼Œæ‰€ä»¥æ¯æ¬¡å†™æ–‡ç« éƒ½è¦ç»è¿‡ä»¥ä¸Šè¿‡ç¨‹ï¼Œéå¸¸çš„ç¹çã€‚æœ€è¿‘çœ‹åˆ°æœ‰äººæ¨èä¸€æ¬¾å¼€æºçš„åšå®¢webï¼Œäºæ˜¯å¼€å§‹æœé›†ç›¸å…³èµ„æ–™è‡ªå·±åŠ¨æ‰‹æ­å»ºäº†ä¸€ä¸ªã€‚å¥½å¤„æ˜¯ä»£ç å¼€æºè€Œä¸”çº¿ä¸Šå¸ƒç½²ï¼Œå†ä¹Ÿæ²¡æœ‰å¤æ‚çš„åˆ›å»ºè¿‡ç¨‹ï¼Œæ–‡ç« å†™å¥½åç‚¹å‡»ä¸Šä¼ æŒ‰é’®ä¸€é”®ä¸Šä¼ ï¼Œå¤§å¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚ ","date":"2024-01-01","objectID":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/:0:0","tags":["åšå®¢åå°"],"title":"ç»™åšå®¢åŠ ä¸ªåå°","uri":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/"},{"categories":["ç½‘ç«™"],"content":"é¡¹ç›®åœ°å€ https://github.com/Qexo/Qexo ","date":"2024-01-01","objectID":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/:0:1","tags":["åšå®¢åå°"],"title":"ç»™åšå®¢åŠ ä¸ªåå°","uri":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/"},{"categories":["ç½‘ç«™"],"content":"ç‰¹è‰²åŠŸèƒ½ è‡ªå®šä¹‰å›¾åºŠä¸Šä¼ å›¾ç‰‡ åœ¨çº¿é…ç½®ç¼–è¾‘ åœ¨çº¿é¡µé¢ç®¡ç† å¼€æ”¾API è‡ªåŠ¨æ£€æŸ¥æ›´æ–° åœ¨çº¿ä¸€é”®æ›´æ–° å¿«é€Ÿæ¥å…¥å‹æƒ…é“¾æ¥ ç®€å•çš„è¯´è¯´çŸ­æ–‡ å­—æ•°ç»Ÿè®¡ è‡ªåŠ¨å¡«å……æ–‡ç« æ¨¡æ¿ ","date":"2024-01-01","objectID":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/:0:2","tags":["åšå®¢åå°"],"title":"ç»™åšå®¢åŠ ä¸ªåå°","uri":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/"},{"categories":["ç½‘ç«™"],"content":"éƒ¨ç½² ç”³è¯·mongodb æ³¨å†Œmongodbè´¦å· ï¼Œå¹¶ç™»å½•ã€‚ æ–°å»ºmongodbæ•°æ®åº“ï¼š Build a Databaseâ€”\u003eCreate(Free)â€”\u003eCreate Cluster[åœ°åŒºé€‰æ‹©**AWS / N. Virginia (us-east-1)**]â€”\u003eé…ç½®æ•°æ®åº“ï¼šæ·»åŠ ç”¨æˆ·ã€å…è®¸æ‰€æœ‰IPè®¿é—®(0.0.0.0/0)â€”\u003eFinsh and Close æ•°æ®åº“è¿æ¥ä¿¡æ¯ åœ¨ Databasé¡µé¢ç‚¹å‡» Connect--\u003eConnect with the MonggoDB Shell ä¸€é”®éƒ¨ç½² https://vercel.com/new/clone?repository-url=https://github.com/am-abudu/Qexo é¦–æ¬¡éƒ¨ç½²ä¼šæŠ¥é”™ï¼Œè¯·æ— è§†å¹¶é‡æ–°è¿›å…¥é¡¹ç›®ï¼Œåœ¨é¡¹ç›®è®¾ç½®ç•Œé¢æ·»åŠ ç¯å¢ƒå˜é‡ï¼š åˆ°Dashboard â€“ Vercel æ‰¾åˆ°åˆšåˆšéƒ¨ç½²çš„é¡¹ç›®ç‚¹å‡»è¿›å…¥ï¼Œè¿›å…¥ Settingâ€”\u003eEnvironment Variablesæ·»åŠ ç¯å¢ƒå˜é‡ã€‚ åç§°ï¼ˆkeyï¼‰ ç¤ºä¾‹(value) æ„ä¹‰ MONGODB_HOST mongodb+srv://cluster0.xxxx.mongodb.net MongoDB æ•°æ®åº“è¿æ¥åœ°å€ MONGODB_PORT 27017 MongoDB æ•°æ®åº“é€šä¿¡ç«¯å£ é»˜è®¤åº”å¡«å†™ 27017 MONGODB_USER abudu MongoDB æ•°æ®åº“ç”¨æˆ·å MONGODB_DB Cluster0 MongoDB æ•°æ®åº“å MONGODB_PASS JWo0xxxxxxxx MongoDB æ•°æ®åº“å¯†ç  åœ¨ Deployments ç‚¹å‡» Redeploy å¼€å§‹éƒ¨ç½² è‹¥æ²¡æœ‰ Error ä¿¡æ¯å³å¯æ‰“å¼€åŸŸåè¿›å…¥åˆå§‹åŒ–å¼•å¯¼ï¼Œå›½å†…å¯èƒ½æ— æ³•ä½¿ç”¨é»˜è®¤åŸŸåè¿›å…¥ï¼Œæˆ‘ä»¬è¦è§£æä¸€ä¸ªè‡ªå·±çš„åŸŸåï¼š è¿›å…¥ Projectâ€”\u003eView Domainsï¼Œè¾“å…¥å¾…è§£æçš„åŸŸåç‚¹å‡» Addï¼ŒæŒ‰è¦æ±‚æ·»åŠ è§£æè®°å½•ç„¶ååˆ·æ–°ã€‚ æˆ‘æ˜¯ç”¨ cloudflareä½œä¸ºcndæ¥åŠ é€Ÿç½‘ç«™è®¿é—®çš„ã€‚é¦–å…ˆç™»å½•cloudflare æ ¹æ®vercelä¸­ä½ çš„é¡¹ç›®â€“\u003esettings-\u003edomainsä¸­è¾“å…¥ä½ çš„ç½‘å€ï¼ˆæˆ‘è¿™é‡Œçš„æ˜¯qexo.haipengv.comï¼‰ç‚¹å‡» addã€‚å†å›åˆ°cloudflare ï¼Œæ·»åŠ  CNAMEï¼Œå°†æ‰€æœ‰æµé‡æŒ‡å‘ vercelé¡¹ç›®ã€‚ ","date":"2024-01-01","objectID":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/:0:3","tags":["åšå®¢åå°"],"title":"ç»™åšå®¢åŠ ä¸ªåå°","uri":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/"},{"categories":["ç½‘ç«™"],"content":"é…ç½® github/gitlab ä»“åº“ æ‚¨çš„ hugo æºä»£ç æ‰€åœ¨çš„ä»“åº“ï¼ˆä¸æ˜¯å‘å¸ƒåçš„webé¡µé¢ï¼‰ username/repo é¡¹ç›®åˆ†æ”¯ æ‚¨çš„hegoè‡ªåŠ¨åŒ–éƒ¨ç½²æ‰€åœ¨ä»“åº“çš„åˆ†æ”¯ master GitHub/Gitlabå¯†é’¥ï¼ˆtokenï¼‰ åœ¨ Github è®¾ç½® / Gitlab è®¾ç½® ç”Ÿæˆçš„ Token éœ€è¦ Repo ä¸‹çš„è‡³å°‘è¯»å–å’Œå†™å…¥æƒé™ä¸å»ºè®®ç»™å‡ºæ‰€æœ‰æƒé™ã€‚ GitHub Settingsï¼ˆå³ä¸Šè§’å¤´åƒï¼‰â€”\u003eDeveloper settingsâ€”\u003ePersonal access tokensâ€”\u003eTokens(classic)ï¼š ä»“åº“è·¯å¾„ hugoè‡ªåŠ¨åŒ–éƒ¨ç½²æ‰€åœ¨ä»“åº“çš„è·¯å¾„ï¼Œè‹¥ä¸ºç›®å½•è¯·ç•™ç©º path/ Vercel_token æ‚¨çš„Vercel è´¦æˆ·å¯†é’¥åœ¨æ­¤å¤„ ç”Ÿæˆ Project_ID æ‚¨çš„qexoéƒ¨ç½²æ‰€åœ¨é¡¹ç›®çš„IDä½äº Project Settings â€”\u003e General â€”\u003e Project ID prj_xxxxxxx æœ‰äº†åšå®¢åå°åï¼Œç°åœ¨å†™æ–‡ç« æµç¨‹ï¼š æ‰“å¼€åšå®¢åå°web ç‚¹å‡»æ–‡ç« å³è¾¹åŠ å·æ–°å¢æ–‡ç«  å³ä¾§æ·»åŠ æ ‡é¢˜ã€å‘å¸ƒæ—¶é—´ã€æ ‡ç­¾ã€åˆ†ç±» ç¼–å†™æ–‡ç« å†…å®¹ ä¿å­˜ã€å‘å¸ƒï¼ˆä½¿ç”¨github actionè‡ªåŠ¨å‘å¸ƒåˆ°ä¸»é¡µï¼‰ æ­å»ºå…¨è¿‡ç¨‹å‚è€ƒ ","date":"2024-01-01","objectID":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/:0:4","tags":["åšå®¢åå°"],"title":"ç»™åšå®¢åŠ ä¸ªåå°","uri":"/%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%8A%A0%E4%B8%AA%E5%90%8E%E5%8F%B0/"},{"categories":[2024],"content":"æ»¡å¤©æ˜Ÿ ç‚¹æˆ‘! ","date":"2024-01-01","objectID":"/%E7%83%9F%E8%8A%B12024/:1:0","tags":["æ»¡å¤©æ˜Ÿ"],"title":"çƒŸèŠ±2024","uri":"/%E7%83%9F%E8%8A%B12024/"},{"categories":["2024"],"content":"2024æ–°å¹´å¿«ä¹ğŸŒ¹ğŸŒ¹ ç‚¹æˆ‘çœ‹çƒŸèŠ± ï¼ï¼ ","date":"2024-01-01","objectID":"/2024%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90/:0:0","tags":["2024"],"title":"2024æ–°å¹´å¿«ä¹","uri":"/2024%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90/"},{"categories":["ç¼–ç¨‹"],"content":"æ¸…åé•œåƒ https://mirrors.tuna.tsinghua.edu.cn/Adoptium/ ","date":"2023-12-29","objectID":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/:1:0","tags":["jdké•œåƒæº"],"title":"JDKå›½å†…é•œåƒä¸‹è½½ï¼Œå…ç™»å½•","uri":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/"},{"categories":["ç¼–ç¨‹"],"content":"ç¼–ç¨‹å®åº“ http://www.codebaoku.com/jdk/jdk-index.html è¿™ä¸ªé•œåƒç«™ï¼ŒåŒ…å«Oracle JDK,ã€OpenJDKã€AdoptOpenJDKã€é˜¿é‡Œçš„OpenJDKï¼ˆ Dragonwellï¼‰å’Œåä¸ºçš„OpenJDKï¼ˆæ¯•æ˜‡ JDK ï¼‰ï¼Œç›®å‰æ˜¯å›½å†…æœ€å…¨çš„Java JDKé•œåƒå¯¼èˆªç«™ã€‚ ","date":"2023-12-29","objectID":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/:2:0","tags":["jdké•œåƒæº"],"title":"JDKå›½å†…é•œåƒä¸‹è½½ï¼Œå…ç™»å½•","uri":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/"},{"categories":["ç¼–ç¨‹"],"content":"åä¸ºé•œåƒ https://repo.huaweicloud.com/java/jdk/ ","date":"2023-12-29","objectID":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/:3:0","tags":["jdké•œåƒæº"],"title":"JDKå›½å†…é•œåƒä¸‹è½½ï¼Œå…ç™»å½•","uri":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/"},{"categories":["ç¼–ç¨‹"],"content":"injdk(ä¸ªäººç«™ç‚¹) https://www.injdk.cn/ ","date":"2023-12-29","objectID":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/:4:0","tags":["jdké•œåƒæº"],"title":"JDKå›½å†…é•œåƒä¸‹è½½ï¼Œå…ç™»å½•","uri":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/"},{"categories":["ç¼–ç¨‹"],"content":"Archived OpenJDK General-Availability Releases https://jdk.java.net/archive/ ","date":"2023-12-29","objectID":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/:5:0","tags":["jdké•œåƒæº"],"title":"JDKå›½å†…é•œåƒä¸‹è½½ï¼Œå…ç™»å½•","uri":"/jdk%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E5%85%8D%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"dockeré•œåƒåŠ é€Ÿ åˆ›å»º/etc/docker/daemon.jsonæ–‡ä»¶ sudo mkdir -p /etc/docker sudo tee /etc/docker/daemon.json \u003c\u003c-'EOF' { \"registry-mirrors\": [ \"https://dockerproxy.com\", \"https://docker.mirrors.ustc.edu.cn\", \"https://docker.nju.edu.cn\" ] } EOF sudo systemctl daemon-reload sudo systemctl restart docker ","date":"2023-12-29","objectID":"/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/:1:0","tags":["docker"],"title":"Dockeré•œåƒåŠ é€Ÿ","uri":"/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/"},{"categories":["å·¥å…·"],"content":"docker hub å›½å†…é•œåƒåŠ é€Ÿåˆ—è¡¨ é•œåƒåŠ é€Ÿå™¨ é•œåƒåŠ é€Ÿå™¨åœ°å€ ä¸“å±åŠ é€Ÿå™¨ï¼Ÿ å…¶å®ƒåŠ é€Ÿï¼Ÿ DaoCloud é•œåƒç«™ https://docker.m.daocloud.io Docker Hubã€GCRã€K8Sã€GHCRã€Quayã€NVCR ç­‰ Azure ä¸­å›½é•œåƒ https://dockerhub.azk8s.cn ä»…ä¾›å†…éƒ¨è®¿é—® Docker Hubã€GCRã€Quay ç§‘å¤§é•œåƒç«™ https://docker.mirrors.ustc.edu.cn ä»…ä¾›å†…éƒ¨è®¿é—® Docker Hubã€GCRã€Quay é˜¿é‡Œäº‘ https://\u003cyour_code\u003e.mirror.aliyuncs.com éœ€ç™»å½•ï¼Œç³»ç»Ÿåˆ†é… Docker Hub ç½‘æ˜“äº‘ https://hub-mirror.c.163.com Docker Hub è…¾è®¯äº‘ https://mirror.ccs.tencentyun.com ä»…ä¾›å†…éƒ¨è®¿é—® Docker Hub Docker é•œåƒä»£ç† https://dockerproxy.com Docker Hubã€GCRã€K8Sã€GHCR ç™¾åº¦äº‘ https://mirror.baidubce.com Docker Hub å—äº¬å¤§å­¦é•œåƒç«™ https://docker.nju.edu.cn Docker Hubã€GCRã€GHCRã€Quayã€NVCR ç­‰ ä¸Šæµ·äº¤å¤§é•œåƒç«™ https://docker.mirrors.sjtug.sjtu.edu.cn Docker Hubã€GCR ç­‰ ä¸­ç§‘é™¢è½¯ä»¶æ‰€é•œåƒç«™ https://mirror.iscas.ac.cn Docker Hub ","date":"2023-12-29","objectID":"/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/:2:0","tags":["docker"],"title":"Dockeré•œåƒåŠ é€Ÿ","uri":"/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/"},{"categories":["å·¥å…·"],"content":"æ£€æŸ¥åŠ é€Ÿæ˜¯å¦ç”Ÿæ•ˆ æ‰§è¡Œdocker info,å¦‚æœä»ç»“æœä¸­çœ‹åˆ°äº†å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚ Registry Mirrors: [...] https://docker.m.daocloud.io ","date":"2023-12-29","objectID":"/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/:3:0","tags":["docker"],"title":"Dockeré•œåƒåŠ é€Ÿ","uri":"/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/"},{"categories":["å·¥å…·"],"content":"docker é•œåƒæµ‹é€Ÿ ä½¿ç”¨é•œåƒå‰åï¼Œå¯ä½¿ç”¨ time ç»Ÿè®¡æ‰€èŠ±è´¹çš„æ€»æ—¶é—´ã€‚æµ‹é€Ÿå‰å…ˆç§»é™¤æœ¬åœ°çš„é•œåƒï¼ $ docker rmi node:latest $ time docker pull node:latest Pulling repository node [...] real 1m14.078s user 0m0.176s sys 0m0.120s å‚è€ƒ ","date":"2023-12-29","objectID":"/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/:4:0","tags":["docker"],"title":"Dockeré•œåƒåŠ é€Ÿ","uri":"/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/"},{"categories":["linux"],"content":"å®‰è£…ç¯å¢ƒ centos7.9 mysql8.0 è¯¦ç»†æ­¥éª¤ ","date":"2023-12-26","objectID":"/centos7.9%E5%AE%89%E8%A3%85msyql8.0/:1:0","tags":["mysql8.0"],"title":"Centos7.9å®‰è£…msyql8.0","uri":"/centos7.9%E5%AE%89%E8%A3%85msyql8.0/"},{"categories":["æ•™ç¨‹"],"content":"mysql8.0å®‰è£…è¿‡ç¨‹ è¿‡ç¨‹ ","date":"2023-12-25","objectID":"/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/:1:0","tags":["mysql_python3"],"title":"Windowsä¸‹mysqlå’Œpython3å®‰è£…è¿‡ç¨‹","uri":"/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/"},{"categories":["æ•™ç¨‹"],"content":"å¼€å¯è¿œç¨‹è®¿é—® use mysql; update user set host = '%' where host = 'localhost' and user = 'root'; flush privileges; # ä¿®æ”¹å¯†ç  ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root'; flush privileges; #è®¾ç½®å…è®¸è¿œç¨‹è®¿é—® GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'WITH GRANT OPTION; flush privileges; ","date":"2023-12-25","objectID":"/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/:2:0","tags":["mysql_python3"],"title":"Windowsä¸‹mysqlå’Œpython3å®‰è£…è¿‡ç¨‹","uri":"/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/"},{"categories":["æ•™ç¨‹"],"content":"python3 å®‰è£…å‚è€ƒ å‚è€ƒ ","date":"2023-12-25","objectID":"/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/:3:0","tags":["mysql_python3"],"title":"Windowsä¸‹mysqlå’Œpython3å®‰è£…è¿‡ç¨‹","uri":"/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/"},{"categories":["æ•™ç¨‹"],"content":"pipæ›´æ¢æ¸…åæº æ¸…åæº ","date":"2023-12-25","objectID":"/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/:4:0","tags":["mysql_python3"],"title":"Windowsä¸‹mysqlå’Œpython3å®‰è£…è¿‡ç¨‹","uri":"/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å¶ç„¶çœ‹è§ä¸€æ¬¾å¼€æºçš„webæœåŠ¡å™¨æ­å»ºè½¯ä»¶ï¼ŒåŸºäºgo è¯­è¨€çš„ï¼Œå¾ˆå¥½ç”¨ï¼Œè®°å½•ä¸€ä¸‹ã€‚ è¯¦ç»†ä»‹ç»ï¼šé“¾æ¥ ","date":"2023-12-19","objectID":"/caddy%E5%BC%80%E6%BA%90web%E6%9C%8D%E5%8A%A1%E5%99%A8/:0:1","tags":["caddy"],"title":"Caddyå¼€æºwebæœåŠ¡å™¨","uri":"/caddy%E5%BC%80%E6%BA%90web%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"ç›´æ¥æ‹‰å–é•œåƒé€Ÿåº¦å¾ˆæ…¢ï¼Œç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªåŠ é€Ÿæ–¹æ³•å¾ˆå¥½ç”¨ï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚ docker pull ghcr.io/home-assistant/home-assistant:stable # è¿™é‡Œçš„ghcr.ioæ˜¯githubçš„dockeré•œåƒåœ°å€ åŠ é€Ÿæ–¹æ³•ï¼šå°†ghcr.ioæ›¿æ¢ä¸ºghcr.nju.edu.cnã€‚ docker pull ghcr.nju.edu.cn/home-assistant/home-assistant:stable åŸæ–‡ç«  ","date":"2023-12-01","objectID":"/ghcr%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E6%96%B9%E5%BC%8F/:0:0","tags":["ghrcé•œåƒåŠ é€Ÿ"],"title":"Ghcré•œåƒåŠ é€Ÿæ–¹å¼","uri":"/ghcr%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E6%96%B9%E5%BC%8F/"},{"categories":["å·¥å…·"],"content":"ç½‘ä¸Šçœ‹åˆ°çš„é€‚åˆæ–°æ‰‹çš„éƒ¨ç½²æ•™ç¨‹ï¼Œç‰¹æ­¤è®°å½•ä¸‹ã€‚ æ•™ç¨‹ ","date":"2023-11-30","objectID":"/apache%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AEseatunnel%E5%8F%8Aweb%E6%90%AD%E5%BB%BA/:0:0","tags":["seatunnel"],"title":"Apacheå¼€æºé¡¹ç›®seatunnelåŠwebæ­å»º","uri":"/apache%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AEseatunnel%E5%8F%8Aweb%E6%90%AD%E5%BB%BA/"},{"categories":["å·¥å…·"],"content":"é‡åˆ°çš„é—®é¢˜ 1.å¯åŠ¨webè¿›ç¨‹åï¼Œæµè§ˆå™¨è®¿é—®404ã€‚ 1.1 ä¸€å®šè¦åœ¨binçš„ä¸Šçº§ç›®å½•æ‰§è¡Œå¯åŠ¨è„šæœ¬ã€‚ æ¯”å¦‚ï¼šwebé¡¹ç›®çš„å¯åŠ¨è„šæœ¬ç›®å½•æ˜¯ï¼š/appdata/apache-seatunnel-web-1.0.0/bin,éœ€è¦åœ¨ä»–çš„ä¸Šçº§ç›®å½•å†…æ‰§è¡Œ/appdata/apache-seatunnel-web-1.0.0ï¼Œæ‰èƒ½è®¿é—®ã€‚ 1.2 è§£å‹åçš„webåŒ…åç§°éœ€è¦é‡æ–°å‘½å å®˜ç½‘ä¸‹è½½çš„æºç åŒ…apache-seatunnel-2.3.3-bin.tar.gz è§£å‹åé‡æ–°å‘½åä¸ºï¼šapache-seatunnel-2.3.3 2.web é¡¹ç›®æ•°æ®åº“åˆå§‹åŒ–æŠ¥é”™ ä½¿ç”¨è„šæœ¬åˆå§‹åŒ–webé¡¹ç›®ï¼Œmysqlç‰ˆæœ¬æ˜¯5.5æ—¶ä¼šå‡ºç°æ—¥æœŸå­—æ®µä»¥åŠå­—ç¬¦é›†æŠ¥é”™ã€‚æ›´æ”¹åçš„å®Œæ•´sqlå¦‚ä¸‹: seatunnel_server_mysql.sql /* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the \"License\"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an \"AS IS\" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */ CREATE DATABASE IF NOT EXISTS seatunnel; use seatunnel; SET NAMES utf8; SET FOREIGN_KEY_CHECKS = 0; -- ---------------------------- -- Table structure for role -- ---------------------------- DROP TABLE IF EXISTS `role`; CREATE TABLE `role` ( `id` int(20) NOT NULL AUTO_INCREMENT, `type` int(2) NOT NULL, `role_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, `description` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, `create_time` timestamp DEFAULT NOW(), `update_time` datetime, PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic; -- ---------------------------- -- Records of role -- ---------------------------- INSERT INTO `seatunnel`.`role`(`type`,`role_name`,`description`) values (0, 'ADMIN_ROLE', 'Admin User'); INSERT INTO `seatunnel`.`role`(`type`,`role_name`,`description`) values (1, 'NORMAL_ROLE', 'Normal User'); -- ---------------------------- -- Table structure for role_user_relation -- ---------------------------- DROP TABLE IF EXISTS `role_user_relation`; CREATE TABLE `role_user_relation` ( `id` int(20) NOT NULL AUTO_INCREMENT, `role_id` int(20) NOT NULL, `user_id` int(20) NOT NULL, `create_time` timestamp DEFAULT NOW(), `update_time` datetime, PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic; -- ---------------------------- -- Table structure for t_st_datasource -- ---------------------------- DROP TABLE IF EXISTS `t_st_datasource`; CREATE TABLE `t_st_datasource` ( `id` bigint(20) NOT NULL, `datasource_name` varchar(63) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL, `plugin_name` varchar(63) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL, `plugin_version` varchar(63) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT '1.0.0', `datasource_config` varchar(1023) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL, `description` varchar(63) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL, `create_user_id` int(11) NOT NULL, `update_user_id` int(11) NOT NULL, `create_time` timestamp DEFAULT NOW(), `update_time` datetime, PRIMARY KEY (`id`) USING BTREE, UNIQUE INDEX `t_st_datasource_datasource_name_uindex`(`datasource_name`) USING BTREE ) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic; -- ---------------------------- -- Table structure for t_st_job_definition -- ---------------------------- DROP TABLE IF EXISTS `t_st_job_definition`; CREATE TABLE `t_st_job_definition` ( `id` bigint(20) NOT NULL, `name` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL, `description` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL, `job_type` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL, `create_user_id` int(11) NOT NULL, `update_user_id` ","date":"2023-11-30","objectID":"/apache%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AEseatunnel%E5%8F%8Aweb%E6%90%AD%E5%BB%BA/:0:1","tags":["seatunnel"],"title":"Apacheå¼€æºé¡¹ç›®seatunnelåŠwebæ­å»º","uri":"/apache%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AEseatunnel%E5%8F%8Aweb%E6%90%AD%E5%BB%BA/"},{"categories":["æ•°æ®åº“"],"content":"ä¸€ã€ä»€ä¹ˆæ˜¯ClickHouseï¼Ÿ ClickHouseæ˜¯ä¸€ä¸ªç”¨äºè”æœºåˆ†æ(OLAP)çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)ã€‚å®˜æ–¹ä»‹ç»å¦‚ä¸‹é“¾æ¥ ã€‚ ","date":"2023-11-27","objectID":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/:1:0","tags":["clickhouse"],"title":"Clickhouseæ­å»ºåŠä½¿ç”¨","uri":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"},{"categories":["æ•°æ®åº“"],"content":"äºŒã€æ­å»ºè¿‡ç¨‹ ","date":"2023-11-27","objectID":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/:2:0","tags":["clickhouse"],"title":"Clickhouseæ­å»ºåŠä½¿ç”¨","uri":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"},{"categories":["æ•°æ®åº“"],"content":"1.ä½¿ç”¨dockeréƒ¨ç½²ã€‚ å®˜æ–¹é•œåƒ ç¬¬ä¸‰æ–¹é•œåƒ 1.1éƒ¨ç½²ç¬¬ä¸‰æ–¹é•œåƒ 1.1.1 é•œåƒæ‹‰å– docker pull yandex/clickhouse-server docker pull yandex/clickhouse-client 1.1.2 å¯åŠ¨serverç«¯ æ–¹å¼ä¸€ï¼š docker run -d -p 8123:8123 -p 9000:9000 --name clickhouse yandex/clickhouse-server æ–¹å¼äºŒï¼š # é»˜è®¤ç›´æ¥å¯åŠ¨å³å¯ docker run -d --name [å¯åŠ¨ä¹‹åçš„åç§°] --ulimit nofile=262144:262144 yandex/clickhouse-server # å¦‚æœæƒ³æŒ‡å®šç›®å½•å¯åŠ¨ï¼Œè¿™é‡Œä»¥clickhouse-test-serverå‘½ä»¤ä¸ºä¾‹ï¼Œå¯ä»¥éšæ„å†™ mkdir /work/clickhouse/clickhouse-test-db ## åˆ›å»ºæ•°æ®æ–‡ä»¶ç›®å½• # ä½¿ç”¨ä»¥ä¸‹è·¯å¾„å¯åŠ¨ï¼Œåœ¨å¤–åªèƒ½è®¿é—®clickhouseæä¾›çš„é»˜è®¤9000ç«¯å£ï¼Œåªèƒ½é€šè¿‡clickhouse-clientè¿æ¥server docker run -d --name clickhouse-test-server --ulimit nofile=262144:262144 --volume=/work/clickhouse/clickhouse_test_db:/var/lib/clickhouse yandex/clickhouse-server 1.1.3 å¯åŠ¨clientç«¯ docker run -it --rm --link clickhouse-test-server:clickhouse-server yandex/clickhouse-client --host clickhouse-client ","date":"2023-11-27","objectID":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/:2:1","tags":["clickhouse"],"title":"Clickhouseæ­å»ºåŠä½¿ç”¨","uri":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"},{"categories":["æ•°æ®åº“"],"content":"2.ä½¿ç”¨rpmæ–¹å¼éƒ¨ç½² 2.1 æ‰€éœ€rpm åŒ… clickhouse-server-23.10.5.20.x86_64.rpm clickhouse-common-static-23.10.5.20.x86_64.rpm clickhouse-client-23.10.5.20.x86_64.rpm 2.2 å®‰è£…é¡ºåº common-static-\u003eserver-\u003eclient 2.3 å¼€æ”¾è¿œç¨‹æƒé™ vi /etc/clickhouse-server/config.xml 220 è¡Œæ³¨é‡Šå»æ‰ 220 \u003clisten_host\u003e::\u003c/listen_host\u003e 2.4 å¯åŠ¨ systemctl start clickhouse-server.service ","date":"2023-11-27","objectID":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/:2:2","tags":["clickhouse"],"title":"Clickhouseæ­å»ºåŠä½¿ç”¨","uri":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"},{"categories":["æ•°æ®åº“"],"content":"ä¸‰ã€ä½¿ç”¨ ","date":"2023-11-27","objectID":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/:3:0","tags":["clickhouse"],"title":"Clickhouseæ­å»ºåŠä½¿ç”¨","uri":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"},{"categories":["æ•°æ®åº“"],"content":"1.ä½¿ç”¨dbeaverè¿æ¥æµ‹è¯• é€‰æ‹©clickhouseç±»å‹æ•°æ®åº“ æ•°æ®åº“/æ¨¡å¼ï¼šdefault ç”¨æˆ·åï¼šdefault å¯†ç ï¼šç©º ç‚¹å‡»è¿æ¥æµ‹è¯•ä¼šè‡ªåŠ¨ä¸‹è½½æ‰€éœ€è¦çš„é©±åŠ¨ã€‚æœ€åç‚¹å‡»å®Œæˆã€‚ ","date":"2023-11-27","objectID":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/:3:1","tags":["clickhouse"],"title":"Clickhouseæ­å»ºåŠä½¿ç”¨","uri":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"},{"categories":["æ•°æ®åº“"],"content":"2.å»ºè¡¨æµ‹è¯• 2.1 ä½¿ç”¨MergeTreeå¼•æ“åˆ›å»ºè¡¨ã€‚ CREATE TABLE `default`.test ( id UInt64, type UInt8, create_time DateTime ) ENGINE = MergeTree() PARTITION BY toYYYYMMDD(create_time) ORDER BY (id) SETTINGS index_granularity = 4; è§£é‡Šï¼š testè¡¨åŒ…æ‹¬idã€typeã€createç­‰ä¸‰ä¸ªå­—æ®µï¼Œå…¶ä¸­ä»¥create_timeæ—¥æœŸå­—æ®µä½œä¸ºåˆ†åŒºé”®ï¼Œå¹¶å°†æ—¥æœŸæ ¼å¼è½¬åŒ–ä¸ºYYYYMMDDã€‚æŒ‰ç…§idå­—æ®µè¿›è¡Œæ’åºã€‚ç”±äºæ²¡æœ‰æ˜¾å¼è®¾ç½®ä¸»é”®ï¼Œæ‰€ä»¥å¼•æ“é»˜è®¤ä½¿ç”¨ORDER BYè®¾ç½®çš„idåˆ—ä½œä¸ºç´¢å¼•å­—æ®µï¼Œå¹¶ç”Ÿæˆç´¢å¼•æ–‡ä»¶ã€‚index_granularityè®¾ç½®ä¸º4ï¼Œæ„å‘³ç€æ¯4æ¡æ•°æ®äº§ç”Ÿä¸€æ¡ç´¢å¼•æ•°æ®ã€‚ 2.2 æ’å…¥ä¸€æ¡æµ‹è¯•æ•°æ® insert into test.test(id, type, create_time) VALUES (1, 1, toDateTime('2021-03-01 00:00:00')); 2.3 æŸ¥çœ‹è¡¨ä¿¡æ¯åŒ…æ‹¬æ•°æ®ç‰©ç†è·¯å¾„ SELECT database, table, partition, partition_id, name, active, path FROM system.parts WHERE table = 'test' æ³¨æ„ï¼špathå­—æ®µä¿¡æ¯ä¸º/var/lib/clickhouse/store/ced/cedde1b3-016f-472c-a651-14a5e3ce0cbb/20231127_1_1_0/ç¡¬ç›˜å­˜å‚¨çš„ç‰©ç†è·¯å¾„ã€‚ è¯¦ç»†ä¿¡æ¯è§ ","date":"2023-11-27","objectID":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/:3:2","tags":["clickhouse"],"title":"Clickhouseæ­å»ºåŠä½¿ç”¨","uri":"/clickhouse%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"},{"categories":["linux"],"content":"grep/sed/awkå‘½ä»¤æŸ¥çœ‹æŒ‡å®šæ—¶é—´æ®µçš„æ—¥å¿— ä¾‹å¦‚æŸ¥è¯¢2020-02-19 14:10åˆ°2020-02-19 14:15åŒºé—´çš„æ—¥å¿— grep \"2020-02-19 14:1[0-5]\" dubbo-elastic-job.log ","date":"2023-11-10","objectID":"/%E5%A6%82%E4%BD%95%E7%AD%9B%E9%80%89%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5%E5%86%85%E7%9A%84%E6%97%A5%E5%BF%97/:1:0","tags":["æ—¥å¿—ç­›é€‰"],"title":"å¦‚ä½•ç­›é€‰æŒ‡å®šæ—¶é—´æ®µå†…çš„æ—¥å¿—","uri":"/%E5%A6%82%E4%BD%95%E7%AD%9B%E9%80%89%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5%E5%86%85%E7%9A%84%E6%97%A5%E5%BF%97/"},{"categories":["linux"],"content":"å‚è€ƒ rpm -qi basesystem | grep -i \"install date\" ","date":"2023-11-08","objectID":"/%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%97%B6%E9%97%B4/:0:0","tags":["ç³»ç»Ÿå®‰è£…æ—¶é—´"],"title":"æŸ¥çœ‹ç³»ç»Ÿå®‰è£…æ—¶é—´","uri":"/%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%97%B6%E9%97%B4/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•åŒºåˆ†å¯¹è±¡æ˜¯å¦æœ‰è¿”å›å€¼ï¼Ÿ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:1:0","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"1.æœ‰è¿”å›å€¼ éœ€è¦æŒ‡å®šè¿”å›å€¼ç±»å‹ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæ¯•åç”¨return å°†ç»“æœè¿”å›ç»™è°ƒç”¨è€…ã€‚ # ç±»å‹double public double area(){ return height * weight } ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:1:1","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"2.æ— è¿”å›å€¼ ç”¨void å®šä¹‰ã€‚ä¸éœ€è¦è¿”å›ç»“æœã€‚ ç‰¹ç‚¹ï¼šå®šä¹‰çš„æ–¹æ³•ä¸­æ²¡æœ‰return è¯­å¥æˆ–è€…return è¯­å¥åæ²¡æœ‰è¡¨è¾¾å¼ã€‚ # ç±»å‹ï¼švoid public void info(String name){ System.out.println(name); } åœ¨å†³å®šæ˜¯å¦å®šä¹‰ä¸€ä¸ªå…·æœ‰è¿”å›å€¼çš„æ–¹æ³•æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªå› ç´ ï¼š æ²¡æœ‰è¿”å›å€¼çš„æ–¹æ³•åªèƒ½æ‰§è¡Œä¸€ä¸ªå›ºå®šçš„åŠŸèƒ½ã€‚ æœ‰è¿”å›å€¼çš„æ–¹æ³•è¿˜å¯ä»¥å°†æœ‰ç”¨çš„æ•°æ®ä½œä¸ºè¿”å›å€¼ä¾›å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚ å¦‚ä½•é€‰ç”¨ï¼šå¦‚æœåªæ˜¯å®Œæˆä¸€ä¸ªåŠŸèƒ½ï¼Œå°±ç›´æ¥ç”¨æ²¡æœ‰è¿”å›å€¼çš„æ–¹æ³•ï¼Œå¦åˆ™ç”¨æœ‰è¿”å›å€¼çš„æ–¹æ³•ã€‚ éœ€è¦è¿”å›ç»“æœï¼šå¦‚æœä½ éœ€è¦ä»æ–¹æ³•ä¸­è·å–æŸç§è®¡ç®—ç»“æœæˆ–æ•°æ®ï¼Œé‚£ä¹ˆå°±éœ€è¦å®šä¹‰ä¸€ä¸ªå…·æœ‰è¿”å›å€¼çš„æ–¹æ³•ã€‚è¿”å›å€¼å¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ï¼ˆå¦‚intã€doubleç­‰ï¼‰æˆ–å¼•ç”¨ç±»å‹ï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰ã€‚ æ–¹æ³•æ‰§è¡Œçš„ç›®çš„ï¼šå¦‚æœæ–¹æ³•çš„ä¸»è¦ç›®çš„æ˜¯æ‰§è¡Œä¸€äº›æ“ä½œæˆ–ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ï¼Œè€Œä¸éœ€è¦è¿”å›ç»“æœï¼Œé‚£ä¹ˆå¯ä»¥å®šä¹‰ä¸€ä¸ªæ— è¿”å›å€¼çš„æ–¹æ³•ï¼ˆè¿”å›ç±»å‹ä¸ºvoidï¼‰ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:1:2","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ–¹æ³•é‡è½½çš„ç†è§£ï¼ˆoverloadï¼‰ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:2:0","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å®šä¹‰ï¼š åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå…è®¸å­˜åœ¨ä¸€ä¸ªä»¥ä¸Šçš„åŒåæ–¹æ³•ï¼Œåªè¦ä»–ä»¬çš„å‚æ•°åˆ—è¡¨ä¸åŒå³å¯ã€‚ æ»¡è¶³è¿™æ ·ç‰¹å¾çš„å¤šä¸ªæ–¹æ³•ï¼Œå½¼æ­¤ä¹‹é—´æ„æˆæ–¹æ³•çš„é‡è½½ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:2:1","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ€»ç»“ä¸ºï¼š â€œä¸¤åŒä¸€ä¸åŒâ€ **ä¸¤åŒï¼š**åŒä¸€ä¸ªç±»ã€ç›¸åŒçš„æ–¹æ³•å **ä¸€ä¸åŒï¼š**å‚æ•°åˆ—è¡¨ä¸åŒã€‚â‘ å‚æ•°ä¸ªæ•°ä¸åŒ â‘¡å‚æ•°ç±»å‹ä¸åŒ æ³¨æ„ï¼šæ–¹æ³•çš„é‡è½½ä¸å½¢å‚çš„åã€æƒé™ä¿®é¥°ç¬¦ã€è¿”å›å€¼ç±»å‹éƒ½æ²¡æœ‰å…³ç³» ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:2:2","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªæ–¹æ³•æ˜¯ç›¸åŒçš„å‘¢ï¼Ÿ æ–¹æ³•åç›¸åŒï¼Œä¸”å½¢å‚åˆ—è¡¨ç›¸åŒã€‚ï¼ˆå½¢å‚åˆ—è¡¨ç›¸åŒæŒ‡çš„æ˜¯å‚æ•°ä¸ªæ•°å’Œç±»å‹ç›¸åŒï¼Œä¸å½¢å‚åæ— å…³ã€‚ï¼‰ è¦æ±‚ï¼šåœ¨ä¸€ä¸ªç±»ä¸­ï¼Œå…è®¸å­˜åœ¨å¤šä¸ªç›¸åŒåå­—çš„æ–¹æ³•ï¼Œåªè¦ä»–ä»¬çš„å½¢å‚åˆ—è¡¨ä¸åŒå³å¯ã€‚ ç¼–è¯‘å™¨æ˜¯å¦‚ä½•ç¡®å®šè°ƒç”¨çš„æŸä¸ªå…·ä½“çš„æ–¹æ³•å‘¢ï¼Ÿ å…ˆé€šè¿‡æ–¹æ³•åç¡®å®šäº†ä¸€æ³¢é‡è½½çš„æ–¹æ³•ï¼Œè¿›è€Œé€šè¿‡ä¸åŒçš„å½¢å‚åˆ—è¡¨ï¼Œç¡®å®šå…·ä½“çš„æ–¹æ³•ã€‚ Javaå…è®¸åœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ªåç§°ç›¸åŒçš„æ–¹æ³•ï¼Œä½†æ˜¯å‚æ•°çš„ç±»å‹æˆ–ä¸ªæ•°å¿…é¡»ä¸åŒï¼Œè¿™å°±æ˜¯æ–¹æ³•çš„é‡è½½ã€‚ ç‰¹ç‚¹ï¼š æ–¹æ³•åä¸€å®šç›¸åŒ å‚æ•°ç±»å‹æˆ–è€…å‚æ•°ä¸ªæ•°ä¸€å®šä¸åŒ ä¸€å®šåœ¨åŒä¸€ä¸ªç±»ä¸­ ä¸¾ä¾‹ï¼š å‚æ•°ä¸ªæ•°ä¸åŒï¼šå¦‚method(int x)ä¸method(int x,int y)ä¸åŒã€‚ å‚æ•°ç±»å‹ä¸åŒï¼šå¦‚method(int x)ä¸method(double x)ä¸åŒã€‚ å‚æ•°é¡ºåºä¸åŒï¼šå¦‚method(int x,double y)ä¸method(double x,int y)ä¸åŒã€‚ é‡è½½åªä¸æ–¹æ³•åä¸å‚æ•°ç±»å‹ç›¸å…³ä¸è¿”å›å€¼æ— å…³ å¦‚void method(int x)ä¸int method(int y)ä¸æ˜¯æ–¹æ³•é‡è½½ï¼Œä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚ é‡è½½ä¸å…·ä½“çš„å˜é‡æ ‡è¯†ç¬¦æ— å…³ å¦‚method(int x)ä¸method(int y)ä¸æ˜¯æ–¹æ³•é‡è½½ï¼Œä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:2:3","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ä»£ç ä¸¾ä¾‹ public class ArgsTest { public static void main(String[] args) { ArgsTest test = new ArgsTest(); test.print(); test.print(1); test.print(1,2); } public void print(int ...nums){ System.out.println(\"1111\"); for (int i = 0; i \u003c nums.length; i++) { System.out.println(nums[i]); } } public void print(int i){ System.out.println(\"2222\"); } public void print(int i,int j){ System.out.println(\"3333\"); } } ä¸‰ä¸ªprint()æ–¹æ³•äº’ä¸ºé‡è½½ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:2:4","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"é¢å‘å¯¹è±¡å®Œæˆå…·ä½“åŠŸèƒ½çš„æ“ä½œçš„ä¸‰æ­¥æµç¨‹ï¼ˆéå¸¸é‡è¦ï¼‰ åˆ›å»ºç±»ï¼Œå¹¶è®¾è®¡ç±»çš„å†…éƒ¨æˆå‘˜ï¼ˆå±æ€§ã€æ–¹æ³•ï¼‰ åˆ›å»ºç±»çš„å¯¹è±¡ã€‚æ¯”å¦‚ï¼šPhone p1 = new Phone(); é€šè¿‡å¯¹è±¡ï¼Œè°ƒç”¨å…¶å†…éƒ¨å£°æ˜çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå®Œæˆç›¸å…³çš„åŠŸèƒ½ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:3:0","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ç±»çš„æˆå‘˜ä¹‹ä¸€ï¼š å±æ€§ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:4:0","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å˜é‡çš„åˆ†ç±»ï¼š è§’åº¦ä¸€ï¼šæŒ‰ç…§æ•°æ®ç±»å‹æ¥åˆ†ï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ8ç§ï¼‰ã€å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆæ•°ç»„ã€ç±»ã€æ¥å£ã€æšä¸¾ã€æ³¨è§£ã€è®°å½•ï¼‰ è§’åº¦äºŒï¼šæŒ‰ç…§å˜é‡åœ¨ç±»ä¸­å£°æ˜çš„ä½ç½®ä¸åŒï¼šæˆå‘˜å˜é‡ï¼ˆæˆ–å±æ€§ï¼‰ã€å±€éƒ¨å˜é‡ï¼ˆæ–¹æ³•å†…ã€æ–¹æ³•å½¢å‚ã€æ„é€ å™¨å†…ã€æ„é€ å™¨å¤–ï¼‰ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:4:1","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å±æ€§çš„å‡ ä¸ªç§°è°“ï¼š æˆå‘˜å˜é‡ã€å±æ€§ã€fieldï¼ˆå­—æ®µã€åŸŸï¼‰ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:4:2","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"åŒºåˆ†æˆå‘˜å˜é‡ vs å±€éƒ¨å˜é‡ ç›¸åŒç‚¹ï¼š å˜é‡å£°æ˜æ ¼å¼ç›¸åŒï¼š æ•°æ®ç±»å‹ å˜é‡å = å˜é‡å€¼ å˜é‡éƒ½æœ‰å…¶æœ‰æ•ˆçš„ä½œç”¨åŸŸã€‚å‡ºäº†ä½œç”¨åŸŸï¼Œå°±å¤±æ•ˆäº†ã€‚ å˜é‡å¿…é¡»å…ˆå£°æ˜ï¼Œåèµ‹å€¼ï¼Œå†ä½¿ç”¨ã€‚ ä¸åŒç‚¹ ç±»ä¸­å£°æ˜ä½ç½®ä¸åŒï¼š å±æ€§ï¼šå£°æ˜ç±»å†…ï¼Œæ–¹æ³•å¤–çš„å˜é‡ å±€éƒ¨å˜é‡ï¼š å£°æ˜æ–¹æ³•ã€æ„é€ å™¨å†…éƒ¨çš„å˜é‡ åœ¨å†…å­˜ä¸­åˆ†é…çš„ä½ç½®ä¸åŒï¼ˆéš¾ï¼‰ å±æ€§ï¼šéšç€å¯¹è±¡çš„åˆ›å»ºï¼Œå­˜å‚¨åœ¨å †ç©ºé—´ä¸­ å±€éƒ¨å˜é‡ï¼šå­˜å‚¨åœ¨æ ˆç©ºé—´ä¸­ ç”Ÿå‘½å‘¨æœŸï¼š å±æ€§ï¼šéšç€å¯¹è±¡çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œéšç€å¯¹è±¡çš„æ¶ˆäº¡è€Œæ¶ˆäº¡ã€‚ å±€éƒ¨å˜é‡ï¼šéšç€æ–¹æ³•å¯¹åº”çš„æ ˆå¸§å…¥æ ˆï¼Œå±€éƒ¨å˜é‡ä¼šåœ¨æ ˆä¸­åˆ†é…ï¼›éšç€æ–¹æ³•å¯¹åº”çš„æ ˆå¸§å‡ºæ ˆï¼Œå±€éƒ¨å˜é‡æ¶ˆäº¡ã€‚ ä½œç”¨åŸŸ: å±æ€§ï¼š åœ¨æ•´ä¸ªç±»çš„å†…éƒ¨éƒ½æ˜¯æœ‰æ•ˆçš„ å±€éƒ¨å˜é‡ï¼šä»…é™äºå£°æ˜æ­¤å˜é‡æ‰€åœ¨çš„æ–¹æ³•ï¼ˆæˆ–æ„é€ å™¨ã€ä»£ç å—ï¼‰ä¸­ æ˜¯å¦æœ‰æƒé™ä¿®é¥°ç¬¦è¿›è¡Œä¿®é¥°ï¼š éƒ½æœ‰å“ªäº›æƒé™ä¿®é¥°ç¬¦ï¼špublic ã€protectedã€ç¼ºçœã€privateï¼ˆç”¨äºè¡¨æ˜æ‰€ä¿®é¥°çš„ç»“æ„å¯è°ƒç”¨çš„èŒƒå›´çš„å¤§å°ï¼‰ å±æ€§ï¼šæ˜¯å¯ä»¥ä½¿ç”¨æƒé™ä¿®é¥°ç¬¦çš„ã€‚è€Œå±€éƒ¨å˜é‡ï¼Œä¸èƒ½è¿›è¡Œä»»ä½•æƒé™ä¿®é¥°ç¬¦è¿›è¡Œä¿®é¥°ã€‚ ä¾‹å­1ï¼š public class MyMethod { // å±æ€§ï¼ˆæˆå‘˜å˜é‡ï¼‰ String name; // public String name; å¯ä»¥ä½¿ç”¨æƒé™ä¿®é¥°ç¬¦ä¿®é¥° int age; public void eat(){ System.out.println(\"æ­£åœ¨åƒé¥­...\"); } public String play(String name){ int age1 = 20; // å±€éƒ¨å˜é‡ï¼ˆåªå¯æ–¹æ³•å†…ä½¿ç”¨ï¼‰ // public int age1; // é”™è¯¯ã€‚å±€éƒ¨å˜é‡ä¸èƒ½ä»»ä½•æƒé™ä¿®é¥°ç¬¦ä¿®é¥°ã€‚ return name; } } æ˜¯å¦æœ‰é»˜è®¤å€¼ï¼ˆé‡ç‚¹ï¼‰ï¼š å±æ€§ï¼š éƒ½æœ‰é»˜è®¤åˆå§‹åŒ–å€¼ æ„å‘³ç€ï¼Œå¦‚æœæ²¡æœ‰ç»™å±æ€§è¿›è¡Œæ˜¾å¼åˆå§‹åŒ–èµ‹å€¼ï¼Œåˆ™ä¼šæœ‰é»˜è®¤åˆå§‹åŒ–å€¼ã€‚ å±€éƒ¨å˜é‡ï¼šéƒ½æ²¡æœ‰é»˜è®¤åˆå§‹åŒ–å€¼ æ„å‘³ç€ï¼Œåœ¨ä½¿ç”¨å±€éƒ¨å˜é‡ä¹‹å‰ï¼Œå¿…é¡»è¦æ˜¾å¼èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™ã€‚ æ³¨æ„ï¼šå¯¹äºæ–¹æ³•çš„å½¢å‚è€Œè¨€ï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œç»™å½¢å‚èµ‹å€¼å³å¯ã€‚ ä¾‹å­1ä¸­æ–¹æ³•ã€å±æ€§çš„è°ƒç”¨ public class MymethodTest { public static void main(String[] args) { MyMethod myMethod = new MyMethod(); System.out.println(myMethod.age); System.out.println(myMethod.play(\"ç¯®çƒ\")); } } # ç»“æœ 0 ç¯®çƒ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:4:3","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ç±»æˆå‘˜ä¹‹äºŒï¼š æ–¹æ³•ï¼ˆmethodï¼‰ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:5:0","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨æ–¹æ³•çš„å¥½å¤„ æ–¹æ³•çš„ç†è§£ï¼š æ–¹æ³• æ˜¯ç±»æˆ–å¯¹è±¡è¡Œä¸ºç‰¹å¾çš„æŠ½è±¡ï¼Œç”¨æ¥å®ŒæˆæŸä¸ªåŠŸèƒ½æ“ä½œã€‚ æ–¹æ³•çš„å¥½å¤„ï¼šå®ç°ä»£ç é‡ç”¨ï¼Œå‡å°‘å†—ä½™ï¼Œç®€åŒ–ä»£ç ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:5:1","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨ä¸¾ä¾‹ Math.random()çš„ randomæ–¹æ³• Math.sqrt(x)çš„sqrt(x)æ–¹æ³• System.out.println(x)çš„println(x)æ–¹æ³• new Scanner(System.in).nextInt()çš„nextInt()æ–¹æ³• Arraysç±»ä¸­çš„binarySearch()æ–¹æ³•ã€sort()æ–¹æ³•ã€equals()æ–¹æ³• ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:5:2","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å£°æ˜ä¸¾ä¾‹ public void eat() public void sleep(int hour) public String interests(String hobby) public int getAge() ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:5:3","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ–¹æ³•å£°æ˜çš„æ ¼å¼ï¼ˆé‡è¦ï¼‰ æƒé™ä¿®é¥°ç¬¦ [å…¶ä»–ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å½¢å‚åˆ—è¡¨) [throws å¼‚å¸¸ç±»å‹] { // æ–¹æ³•å¤´ // æ–¹æ³•ä½“ } æƒé™ä¿®é¥°ç¬¦ Javaä¸­è§„å®šäº†é‚£äº›æƒé™ä¿®é¥°ç¬¦å‘¢ï¼Ÿ æœ‰å››ç§ï¼šprivateã€ç¼ºçœã€protectedã€public è¿”å›å€¼ç±»å‹ï¼šæè¿°å½“è°ƒç”¨å®Œæ­¤æ–¹æ³•æ—¶ï¼Œæ˜¯å¦éœ€è¦è¿”å›ä¸€ä¸ªç»“æœã€‚ åˆ†ç±»ï¼š æ— è¿”å›å€¼ç±»å‹ï¼šä½¿ç”¨voidè¡¨ç¤ºå³å¯ã€‚æ¯”å¦‚System.out.println(x) çš„println(x) æ–¹æ³•ã€Arraysçš„sort()æ–¹æ³•ã€‚ æœ‰å…·ä½“çš„è¿”å›å€¼ç±»å‹ï¼šéœ€è¦æŒ‡æ˜è¿”å›çš„æ•°æ®çš„ç±»å‹ã€‚å¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨æ•°æ®ç±»å‹ã€‚ éœ€è¦åœ¨æ–¹æ³•å†…éƒ¨é…åˆä½¿ç”¨â€œreturn + è¿”å›å€¼ç±»å‹çš„å˜é‡æˆ–å¸¸é‡â€ æ¯”å¦‚ï¼šMath.random() ã€new Scanner(System.in).netxInt()ç­‰ ã€ç»éªŒã€‘æˆ‘ä»¬åœ¨å£°æ˜æ–¹æ³•æ—¶ï¼Œè¦ä¸è¦æä¾›è¿”å›å€¼ç±»å‹å‘¢ï¼Ÿ æ ¹æ®æ–¹æ³•å…·ä½“å®ç°çš„åŠŸèƒ½æ¥å†³å®šã€‚æ¢å¥è¯è¯´ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æ æ ¹æ®é¢˜ç›®è¦æ±‚ æ–¹æ³•åï¼š å±äºæ ‡è¯†ç¬¦ã€‚éœ€è¦æ»¡è¶³æ ‡è¯†ç¬¦çš„è§„å®šå’Œè§„èŒƒã€‚â€œè§åçŸ¥æ„â€ã€‚ å½¢å‚åˆ—è¡¨ï¼š å½¢å‚ï¼Œå±äºå±€éƒ¨å˜é‡ï¼Œä¸”å¯ä»¥å£°æ˜å¤šä¸ªã€‚ æ ¼å¼ï¼š å½¢å‚ç±»å‹1 å½¢å‚1,å½¢å‚ç±»å‹2 å½¢å‚2,â€¦.ï¼‰ åˆ†ç±»ï¼š æ— å½¢å‚åˆ—è¡¨ã€æœ‰å½¢å‚åˆ—è¡¨ æ— å½¢å‚åˆ—è¡¨ï¼šä¸èƒ½çœç•¥ä¸€å¯¹()ã€‚æ¯”å¦‚ï¼šMath.random()ã€new Scanner(System.in).nextIn(); æœ‰å½¢å‚åˆ—è¡¨ï¼šæ ¹æ®æ–¹æ³•è°ƒç”¨æ—¶ï¼Œéœ€è¦çš„ä¸ç¡®å®šçš„å˜é‡çš„ç±»å‹å’Œä¸ªæ•°ï¼Œç¡®å®šå½¢å‚çš„ç±»å‹å’Œä¸ªæ•°ã€‚ æ¯”å¦‚ï¼šArrayç±»ä¸­çš„binarySearch()æ–¹æ³•ã€sort()æ–¹æ³•ã€equals()æ–¹æ³•ã€‚ ã€ç»éªŒã€‘æˆ‘ä»¬åœ¨å£°æ˜æ–¹æ³•æ—¶ï¼Œè¦ä¸è¦å½¢å‚åˆ—è¡¨å‘¢ï¼Ÿ æ ¹æ®æ–¹æ³•å…·ä½“å®ç°çš„åŠŸèƒ½æ¥å†³å®šã€‚æ¢å¥è¯è¯´ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æ æ ¹æ®é¢˜ç›®è¦æ±‚ æ–¹æ³•ä½“ï¼š å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ã€‚çœŸæ­£æ‰§è¡Œçš„ä»£ç ã€‚ä½“ç°äº†æ­¤æ–¹æ³•çš„åŠŸèƒ½ã€‚ æ³¨æ„ç‚¹ï¼š Javaé‡Œçš„æ–¹æ³•ä¸èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œæ‰€æœ‰çš„æ–¹æ³•å¿…é¡»å®šä¹‰åœ¨ç±»é‡Œã€‚ Javaä¸­çš„æ–¹æ³•ä¸è°ƒç”¨ï¼Œä¸æ‰§è¡Œã€‚æ¯è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰§è¡Œä¸€æ¬¡ã€‚ æ–¹æ³•å†…å¯ä»¥è°ƒç”¨æœ¬ç±»ä¸­çš„ï¼ˆå…¶ä»–ï¼‰æ–¹æ³•æˆ–å±æ€§ã€‚ æ–¹æ³•å†…ä¸èƒ½å®šä¹‰æ–¹æ³• å…³é”®å­—ï¼š return returnçš„ä½œç”¨ ç»“æŸä¸€ä¸ªæ–¹æ³• ç»“æŸä¸€ä¸ªæ–¹æ³•çš„åŒæ—¶ï¼Œå¯ä»¥è¿”å›æ•°æ®ç»™æ–¹æ³•çš„è°ƒç”¨è€…ï¼ˆæ–¹æ³•å£°æ˜ä¸­å¦‚æœæœ‰è¿”å›å€¼ç±»å‹ï¼Œåˆ™æ–¹æ³•å†…éœ€è¦æ­é…returnä½¿ç”¨ï¼‰ ä½¿ç”¨æ³¨æ„ç‚¹ï¼š returnåé¢ä¸èƒ½å£°æ˜æ‰§è¡Œè¯­å¥ã€‚ ä»£ç ç†è§£ï¼š public class MethodTest { public static void main(String[] args) { Person p1 = new Person(); p1.eat(); p1.info(); } } class Person{ // å±æ€§ String name; int age; public void eat(){ System.out.println(\"äººåƒé¥­\"); sleep(8); System.out.println(\"name= \" + name); } public void sleep(int hours){ System.out.println(\"äººæ¯å¤©è‡³å°‘éœ€è¦ç¡\" + hours + \"å°æ—¶ã€‚\"); } public String interests(String hobby){ String info = \"æˆ‘çš„çˆ±å¥½æ˜¯\" + hobby; System.out.println(info); return info; } public int getAge(){ return age; } public void info(){ System.out.println(\"Person info()\"); // info(); // è‡ªå·±è°ƒç”¨è‡ªå·±å‘ç”Ÿæ ˆæº¢å‡ºã€‚StackOverflowErrorã€‚ // æ–¹æ³•å†…ä¸èƒ½å®šä¹‰æ–¹æ³• // public void show(){ // // } } public void printNumber(int targetNUmber){ for(int i = 1;i\u003c=targetNUmber;i++){ if( i == 4){ return; //ç”¨äºç»“æŸæ–¹æ³•ã€‚ // return åé¢ä¸èƒ½å£°æ˜æ‰§è¡Œè¯­å¥ // System.out.println(\"666\"); } System.out.println(i); } } } ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:5:4","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å¯¹è±¡æ•°ç»„ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:6:0","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ä½•ä¸ºå¯¹è±¡æ•°ç»„ï¼Ÿå¦‚ä½•ç†è§£ï¼Ÿ æ•°ç»„çš„å…ƒç´ å¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ã€‚å½“å…ƒç´ æ˜¯å¼•ç”¨æ•°æ®ç±»å‹æ—¶ï¼Œæˆ‘ä»¬ç§°ä¸ºå¯¹è±¡æ•°ç»„ã€‚ ä¸¾ä¾‹ï¼š String[]ã€Person[]ã€Student[]ã€Customer[]ç­‰ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:6:1","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ¡ˆä¾‹ï¼š å®šä¹‰ç±»Studentï¼ŒåŒ…å«ä¸‰ä¸ªå±æ€§ï¼šå­¦å·number(int)ï¼Œå¹´çº§state(int)ï¼Œæˆç»©score(int)ã€‚ åˆ›å»º20ä¸ªå­¦ç”Ÿå¯¹è±¡ï¼Œ å­¦å·ä¸º1åˆ°20ï¼Œå¹´çº§å’Œæˆç»©éƒ½ç”±éšæœºæ•°ç¡®å®šã€‚ é—®é¢˜ä¸€ï¼šæ‰“å°å‡º3å¹´çº§(stateå€¼ä¸º3ï¼‰çš„å­¦ç”Ÿä¿¡æ¯ã€‚ é—®é¢˜äºŒï¼šä½¿ç”¨å†’æ³¡æ’åºæŒ‰å­¦ç”Ÿæˆç»©æ’åºï¼Œå¹¶éå†æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ æç¤ºï¼š 1) ç”Ÿæˆéšæœºæ•°ï¼šMath.random()ï¼Œè¿”å›å€¼ç±»å‹double; 2) å››èˆäº”å…¥å–æ•´ï¼šMath.round(double d)ï¼Œè¿”å›å€¼ç±»å‹longã€‚ åˆ›å»ºç±»ï¼šStudent.java package Project1.MyMethod; /** * ClassName: Student * Package: Project1.MyMethod * Description: * * @Author LHP * @Create 2023/10/30 21:41 * @Version 1.0 */ public class Student { int number; int state; int score; public String show(){ return \"number = \" + number + \",state = \" + state + \",score = \" + score; } } å°†éœ€æ±‚å°è£…æˆæ–¹æ³•æ–¹ä¾¿è°ƒç”¨StudentTools.java package Project1.MyMethod; /** * ClassName: StudentTools * Package: Project1.MyMethod * Description: * * @Author LHP * @Create 2023/10/30 21:42 * @Version 1.0 */ public class StudentTools { /** * æ‰“å°å‡ºæŒ‡å®šå¹´çº§çš„å­¦ç”Ÿä¿¡æ¯ */ public void printStudentWithState(Student[] students,int state){ for (int i = 0; i \u003c students.length; i++) { if(state == students[i].state){ Student stu = students[i]; System.out.println(stu.show()); } } } /** * éå†æŒ‡å®šå­¦ç”Ÿæ•°ç»„ */ public void printStudents(Student[] students){ for (int i = 0; i \u003c students.length; i++) { System.out.println(students[i].show()); } } /** * é’ˆå¯¹å­¦ç”Ÿæ•°ç»„ï¼ŒæŒ‰ç…§scoreå±æ€§ä»ä½åˆ°é«˜æ’åˆ—ï¼ˆå†’æ³¡æ’åºï¼‰ * forå¾ªç¯: å¤–å±‚iæ§åˆ¶éå†æ¬¡æ•°ï¼Œå†…å±‚jæ§åˆ¶ç›¸é‚»å…ƒç´ çš„æ¯”è¾ƒå’Œäº¤æ¢ã€‚ * æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªæˆç»©çš„å¤§å°ï¼Œå¦‚æœå‰ä¸€ä¸ªæˆç»©å¤§äºåä¸€ä¸ªæˆç»©ï¼Œè§¦å‘äº¤æ¢æœºåˆ¶ã€‚ * äº¤æ¢çš„æ˜¯å†…å­˜åœ°å€ã€‚ */ public void sortStudents(Student[] students){ for (int i = 0; i \u003c students.length -1; i++) { for (int j = 0; j \u003c students.length -1 -i; j++) { if(students[j].score \u003e students[j + 1].score){ Student temp = students[j]; students[j] = students[j + 1]; students[j + 1] = temp; } } } } } åˆ›å»ºæµ‹è¯•ç±»ï¼Œæ–¹ä¾¿æµ‹è¯•åŠŸèƒ½ã€‚StudentTest.java package Project1.MyMethod; /** * ClassName: StudentTest * Package: Project1.MyMethod * Description: * * @Author LHP * @Create 2023/10/30 21:41 * @Version 1.0 */ public class StudentTest { public static void main(String[] args) { // åˆ›å»ºstudent[] Student[] students = new Student[20]; // ä½¿ç”¨å¾ªç¯ç»™æ•°ç»„å…ƒç´ èµ‹å€¼ã€‚ for (int i = 0; i \u003c students.length ; i++) { students[i] = new Student(); // ç»™æ¯ä¸€ä¸ªå­¦ç”Ÿå¯¹è±¡çš„numberã€stateã€scoreå±æ€§èµ‹å€¼ã€‚ students[i].number = i + 1; students[i].state = (int)(Math.random() * 6 + 1); students[i].score = (int)(Math.random() * 101); } // éœ€æ±‚1ï¼š æ‰“å°å‡º3å¹´çº§ï¼ˆstate ä¸º 3ï¼‰ çš„å­¦ç”Ÿä¿¡æ¯ StudentTools studentTools = new StudentTools(); studentTools.printStudentWithState(students,3); System.out.println(\"******************************************\"); // éœ€æ±‚2ï¼šä½¿ç”¨å†’æ³¡æ’åºæŒ‰å­¦ç”Ÿæˆç»©æ’åºï¼Œå¹¶éå†æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ã€‚ // æ’åºå‰éå† studentTools.printStudents(students); System.out.println(\"**************************************\"); System.out.println(\"å¼€å§‹æ’åº...\"); studentTools.sortStudents(students); System.out.println(\"******************\"); // æ’åºåéå† studentTools.printStudents(students); } } ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:6:2","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å¯å˜ä¸ªæ•°å½¢å‚çš„æ–¹æ³•ï¼ˆjdk5.0ï¼‰ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:7:0","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨åœºæ™¯ åœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ–¹æ³•å½¢å‚çš„ç±»å‹æ˜¯ç¡®å®šçš„ï¼Œä½†æ˜¯å‚æ•°çš„ä¸ªæ•°ä¸ç¡®å®šã€‚æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¯å˜ä¸ªæ•°å½¢å‚çš„æ–¹æ³•ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:7:1","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ ¼å¼ (å‚æ•°ç±»å‹ ...å‚æ•°å) ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:7:2","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"è¯´æ˜ å¯å˜ä¸ªæ•°å½¢å‚çš„æ–¹æ³•åœ¨è°ƒç”¨æ—¶ï¼Œé’ˆå¯¹äºå¯å˜çš„å‚æ•°èµ‹çš„å®å‚ä¸ªæ•°å¯ä»¥ä¸ºï¼š0ä¸ªã€1ä¸ªæˆ–å¤šä¸ªã€‚ å¯å˜ä¸ªæ•°å½¢å‚çš„æ–¹æ³•ä¸åŒä¸€ä¸ªç±»ä¸­ï¼ŒåŒåçš„å¤šä¸ªæ–¹æ³•ä¹‹é—´å¯ä»¥æ„æˆé‡è½½ã€‚ ç‰¹ä¾‹ï¼šå¯å˜ä¸ªæ•°å½¢å‚çš„æ–¹æ³•ä¸åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•åç›¸åŒï¼Œä¸”ä¸å¯å˜ä¸ªæ•°å½¢å‚çš„ç±»å‹ç›¸åŒçš„æ•°ç»„å‚æ•°ä¸æ„æˆé‡è½½ã€‚ å¯å˜ä¸ªæ•°çš„å½¢å‚å¿…é¡»å£°æ˜åœ¨å½¢å‚åˆ—è¡¨çš„æœ€åã€‚ å¯å˜ä¸ªæ•°çš„å½¢å‚æœ€å¤šå†ä¸€ä¸ªæ–¹æ³•çš„å½¢å‚åˆ—è¡¨ä¸­å‡ºç°ä¸€æ¬¡ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:7:3","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸¾ä¾‹ public class ArgsTest { public static void main(String[] args) { ArgsTest test = new ArgsTest(); test.print(); test.print(1); test.print(1,2); } public void print(int ...nums){ System.out.println(\"1111\"); for (int i = 0; i \u003c nums.length; i++) { System.out.println(nums[i]); } } public void print(int i){ System.out.println(\"2222\"); } public void print(int i,int j){ System.out.println(\"3333\"); } } ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:7:4","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ–¹æ³•çš„å€¼ä¼ é€’æœºåˆ¶ å¯¹äºæ–¹æ³•å†…å£°æ˜çš„å±€éƒ¨å˜é‡æ¥è¯´ï¼Œå¦‚æœå‡ºç°èµ‹å€¼æ“ä½œ å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œåˆ™å°†æ­¤å˜é‡ä¿å­˜çš„æ•°æ®å€¼ä¼ é€’å‡ºå»ã€‚ å¦‚æœæ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ï¼Œåˆ™å°†æ­¤å˜é‡ä¿å­˜çš„åœ°å€å€¼ä¼ é€’å‡ºå»ã€‚ å½¢å‚ï¼šåœ¨å®šä¹‰æ–¹æ³•æ—¶ï¼Œæ–¹æ³•ååé¢æ‹¬å·ï¼ˆï¼‰ä¸­å£°æ˜çš„å˜é‡æˆä¸ºå½¢å¼å‚æ•°ï¼Œç®€ç§°å½¢å‚ã€‚ å®å‚ï¼šåœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæ–¹æ³•ååé¢æ‹¬å·ï¼ˆï¼‰ä¸­ä½¿ç”¨çš„å€¼/å˜é‡/è¡¨è¾¾å¼æˆä¸ºå®é™…å‚æ•°ï¼Œç®€ç§°å®å‚ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:8:0","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"è§„åˆ™ï¼š å®å‚ç»™å½¢å‚èµ‹å€¼çš„è¿‡ç¨‹ å¦‚æœå½¢å‚æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œåˆ™å°†å®å‚ä¿å­˜çš„æ•°æ®å€¼èµ‹ç»™å½¢å‚ã€‚ å¦‚æœå½¢å‚æ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ï¼Œåˆ™å°†å®å‚ä¿å­˜çš„åœ°å€å€¼èµ‹ç»™å½¢å‚ã€‚ Javaä¸­çš„å‚æ•°ä¼ é€’æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿå€¼ä¼ é€’ï¼ˆä¸æ˜¯å¼•ç”¨ä¼ é€’ï¼‰ã€‚ ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:8:1","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸¾ä¾‹ï¼š public class ValueTransferTest { public static void main(String[] args) { // 1.åŸºæœ¬æ•°æ®ç±»å‹çš„å±€éƒ¨å˜é‡ int m = 10; int n = m; System.out.println(\"m = \" + m + \" n = \" + n); // m =10 n =10 m++; System.out.println(\"m = \" + m + \" n = \" + n); // m = 11 n = 10 // 2.å¼•ç”¨æ•°æ®ç±»å‹çš„å±€éƒ¨å˜é‡ // 2.1 æ•°ç»„ç±»å‹ int[] arr1 = new int[]{1,2,3,4,5}; int[] arr2 = arr1; arr2[0] = 10; System.out.println(arr1[0]); //10 // 2.2 å¯¹è±¡ç±»å‹ Order order1 = new Order(); order1.orderId = 1001; Order order2 = order1; order2.orderId = 1002; System.out.println(order1.orderId);//1002 } } class Order{ int orderId; } ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:8:2","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["ç¼–ç¨‹"],"content":"äº¤æ¢ä¸¾ä¾‹ï¼š public class ValueTransferTest3 { public static void main(String[] args) { ValueTransferTest3 test = new ValueTransferTest3(); Data data = new Data(); data.m = 10; data.n = 20; System.out.println(\"äº¤æ¢å‰ï¼š\" + \"m = \" + data.m + \",n = \" + data.n); test.swap(data); System.out.println(\"äº¤æ¢åï¼š\" + \"m = \" + data.m + \",n = \" + data.n); } public void swap(Data data) { int temp = data.m; data.m = data.n; data.n = temp; } } class Data{ int m; int n; } ","date":"2023-10-26","objectID":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/:8:3","tags":["java"],"title":"JavaçŸ¥è¯†ç‚¹ç†è§£","uri":"/java%E7%9F%A5%E8%AF%86%E7%82%B9%E7%90%86%E8%A7%A3/"},{"categories":["linux"],"content":"1.æ ¹æ®è¡Œæ•°åˆ‡å‰² å¦‚ä¸‹ä»¥ä¸€ä¸ª372Må¤§å°çš„æ—¥å¿—æ–‡ä»¶åšåˆ‡å‰²æ¼”ç¤ºï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶æŒ‰ç…§50000è¡Œåšåˆ‡å‰²ï¼ŒæŒ‡å®šæ–‡ä»¶åä¸ºsplit-lineï¼Œ-då‚æ•°ä»¥æ•°å­—çš„æ–¹å¼æ˜¾ç¤ºã€‚ #æºæ–‡ä»¶å¤§å° [root@localhost /tmpdisk/test]$ ls -lh æ€»ç”¨é‡ 372M -rw-------. 1 root root 372M 10æœˆ 26 09:08 messages #æŒ‰è¡Œåˆ‡å‰² [root@localhost /tmpdisk/test]$ split -l 50000 -d --verbose messages split-line #æŸ¥çœ‹å¤§å° [root@localhost /tmpdisk/test]$ ls -lh æ€»ç”¨é‡ 743M -rw-------. 1 root root 372M 10æœˆ 26 09:08 messages -rw-r--r--. 1 root root 4.5M 10æœˆ 26 09:21 split-line00 -rw-r--r--. 1 root root 4.2M 10æœˆ 26 09:21 split-line01 -rw-r--r--. 1 root root 7.7M 10æœˆ 26 09:22 split-line02 -rw-r--r--. 1 root root 4.2M 10æœˆ 26 09:22 split-line03 -rw-r--r--. 1 root root 4.2M 10æœˆ 26 09:22 split-line04 -rw-r--r--. 1 root root 4.2M 10æœˆ 26 09:22 split-line05 -rw-r--r--. 1 root root 4.2M 10æœˆ 26 09:22 split-line06 -rw-r--r--. 1 root root 4.2M 10æœˆ 26 09:22 split-line07 -rw-r--r--. 1 root root 4.2M 10æœˆ 26 09:22 split-line08 -rw-r--r--. 1 root root 4.2M 10æœˆ 26 09:22 split-line09 -rw-r--r--. 1 root root 4.3M 10æœˆ 26 09:22 split-line10 ","date":"2023-10-26","objectID":"/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/:1:0","tags":["linux"],"title":"Linuxæ—¥å¿—å¤§æ–‡ä»¶åˆ‡å‰²","uri":"/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/"},{"categories":["linux"],"content":"2.æ ¹æ®å¤§å°åˆ‡å‰² é™¤äº†æŒ‰ç…§è¡Œæ•°åˆ‡å‰²ä¹‹å¤–ï¼Œsplitè¿˜æ”¯æŒé€šè¿‡æ–‡ä»¶å¤§å°è¿›è¡Œåˆ‡å‰²ï¼Œé€šè¿‡æŒ‡å®š-bå‚æ•°æŒ‡å®šæ–‡ä»¶å¤§å°è¿›è¡Œåˆ‡å‰²ï¼Œæ–‡ä»¶å¤§å°å•ä½æ”¯æŒK, M, G, T, P, E, Zï¼Œå¦‚ä¸‹ä»¥åˆ‡å‰²ä¸º50Mæ¼”ç¤ºæ–‡ä»¶åˆ‡å‰²è¿‡ç¨‹ã€‚ [root@localhost /tmpdisk/test]$ split -b 50M -d --verbose messages split-size æ­£åœ¨åˆ›å»ºæ–‡ä»¶\"split-size00\" æ­£åœ¨åˆ›å»ºæ–‡ä»¶\"split-size01\" æ­£åœ¨åˆ›å»ºæ–‡ä»¶\"split-size02\" æ­£åœ¨åˆ›å»ºæ–‡ä»¶\"split-size03\" æ­£åœ¨åˆ›å»ºæ–‡ä»¶\"split-size04\" æ­£åœ¨åˆ›å»ºæ–‡ä»¶\"split-size05\" æ­£åœ¨åˆ›å»ºæ–‡ä»¶\"split-size06\" æ­£åœ¨åˆ›å»ºæ–‡ä»¶\"split-size07\" [root@localhost /tmpdisk/test]$ ls -lh æ€»ç”¨é‡ 743M -rw-------. 1 root root 372M 10æœˆ 26 09:08 messages -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size00 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size01 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size02 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size03 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size04 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size05 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size06 -rw-r--r--. 1 root root 22M 10æœˆ 26 09:25 split-size07 ","date":"2023-10-26","objectID":"/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/:2:0","tags":["linux"],"title":"Linuxæ—¥å¿—å¤§æ–‡ä»¶åˆ‡å‰²","uri":"/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/"},{"categories":["linux"],"content":"3.å¤šæ–‡ä»¶åˆå¹¶ splitæ˜¯ç”¨æˆ·å°†å¤§æ–‡ä»¶åˆ‡å‰²ä¸ºå¤šä¸ªå°æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦å°†å¤šä¸ªå°æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨æ–‡ä»¶é‡å®šå‘æ–¹å¼å®ç°ï¼Œå¦‚ä¸‹æ¼”ç¤ºä¸¤ä¸ªå°æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚ [root@localhost /tmpdisk/test]$ cat split-size00 split-size01 \u003e messages1 [root@localhost /tmpdisk/test]$ ls messages messages1 split-size00 split-size01 split-size02 split-size03 split-size04 split-size05 split-size06 split-size07 [root@localhost /tmpdisk/test]$ ls -lh æ€»ç”¨é‡ 843M -rw-------. 1 root root 372M 10æœˆ 26 09:08 messages -rw-r--r--. 1 root root 100M 10æœˆ 26 09:27 messages1 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size00 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size01 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size02 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size03 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size04 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size05 -rw-r--r--. 1 root root 50M 10æœˆ 26 09:25 split-size06 -rw-r--r--. 1 root root 22M 10æœˆ 26 09:25 split-size07 åˆå¹¶æ–¹å¼é€šè¿‡è¯»å–æ–‡ä»¶çš„æ–¹å¼+è¾“å‡ºé‡å®šå‘ï¼Œå¯¹äºå¤§æ–‡ä»¶ä¸€æ ·ä¼šå­˜åœ¨æ€§èƒ½çš„é—®é¢˜ï¼Œå»ºè®®æ ¹æ®éœ€è¦ä½¿ç”¨ã€‚ ","date":"2023-10-26","objectID":"/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/:3:0","tags":["linux"],"title":"Linuxæ—¥å¿—å¤§æ–‡ä»¶åˆ‡å‰²","uri":"/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/"},{"categories":["linux"],"content":"4.å¤šæ–‡ä»¶åŒä¸€å…³é”®å­—ç­›é€‰ [root@localhost /tmpdisk/test]$ grep faild split-size* split-size01:2023-09-07T10:54:01.447068+08:00 localhost jman[691]: init mysql default password faild split-size01:2023-10-07T13:27:47.356650+08:00 localhost jman[695]: init mysql default password faild [å‚è€ƒ](å¾®ä¿¡å…¬ä¼—å¹³å° (qq.com) ) ","date":"2023-10-26","objectID":"/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/:4:0","tags":["linux"],"title":"Linuxæ—¥å¿—å¤§æ–‡ä»¶åˆ‡å‰²","uri":"/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/"},{"categories":["æ•°æ®åº“"],"content":"GPè°ƒæ•´çš„å‚æ•°å¦‚ä¸‹ï¼š (1)å…¨å±€æ­»é”æ£€æµ‹å¼€å…³ åœ¨Greenplum 6ä¸­å…¶é»˜è®¤å…³é—­ï¼Œéœ€è¦æ‰“å¼€å®ƒæ‰å¯ä»¥æ”¯æŒå¹¶å‘æ›´æ–°/åˆ é™¤æ“ä½œï¼› gpconfig -c gp_enable_global_deadlock_detector -v on (2) ç¦ç”¨GPORCAä¼˜åŒ–å™¨ï¼ˆæ®è¯´GPDB6é»˜è®¤çš„ä¼˜åŒ–å™¨ä¸ºï¼šGPORCAï¼‰ gpconfig -c optimizer -v off (3)å…³é—­æ—¥å¿— æ­¤GUCå‡å°‘ä¸å¿…è¦çš„æ—¥å¿—ï¼Œé¿å…æ—¥å¿—è¾“å‡ºå¯¹I/Oæ€§èƒ½çš„å¹²æ‰°ã€‚ gpconfig -c log_statement -v none æ³¨æ„ï¼šå‚æ•°é…ç½®ä¿®æ”¹åï¼Œæˆ‘ä½¿ç”¨gpstop -ué‡æ–°åŠ è½½é…ç½®ï¼Œå¹¶ç”¨gpconfig -sæ£€æŸ¥äº†å„ä¸ªå‚æ•°ç¡®ä¸ºä¿®æ”¹æˆåŠŸ æ³¨æ„ï¼šå¦‚æœå‘½ä»¤æ— æ³•ä½¿ç”¨å¯ä»¥åœ¨postgresql.confé…ç½®æ–‡ä»¶ä¸­è¿½åŠ å‚æ•°,å¹¶ä½¿ç”¨gpstop -ué‡æ–°åŠ è½½é…ç½®ã€‚ optimizer=off gp_enable_global_deadlock_detector=on log_statement=none ç™»å½•åº“ï¼š [gpadmin@mdw gpseg-1]$ psql -Ugpadmin -d postgres psql (12.12) Type \"help\" for help. postgres=# \\d List of relations Schema | Name | Type | Owner | Storage --------+------------------------+----------+---------+--------- public | company | table | gpadmin | heap public | customer | table | gpadmin | heap public | customer_id_sequenct | sequence | gpadmin | public | demo01 | table | gpadmin | heap public | demo01_demo01_id_seq | sequence | gpadmin | public | demo02 | table | gpadmin | heap public | demo02_id_seq | sequence | gpadmin | public | jtsec_db_change_01 | table | gpadmin | heap public | jtsec_db_change_02 | table | gpadmin | heap public | jtsec_db_change_046 | table | gpadmin | heap public | jtsec_dep_sequence_01 | sequence | gpadmin | public | jtsec_dep_sequence_02 | sequence | gpadmin | public | jtsec_dep_sequence_046 | sequence | gpadmin | public | product | table | gpadmin | heap public | product_code_seq | sequence | gpadmin | (15 rows) postgres=# show log_statement; log_statement --------------- none (1 row) postgres=# \\q å‚è€ƒ ","date":"2023-10-12","objectID":"/greenplumdb7%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96/:0:0","tags":["greenplum7"],"title":"Greenplumdb7æ•°æ®å…¥åº“é€Ÿåº¦ä¼˜åŒ–","uri":"/greenplumdb7%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96/"},{"categories":["æ•°æ®åº“"],"content":"ä¸€ã€å®‰è£…ç¯å¢ƒ æå‰å®‰è£…ä»»æ„ç‰ˆæœ¬docker å®¿ä¸»æœºç³»ç»Ÿç¯å¢ƒï¼šcentos7.7 ","date":"2023-10-11","objectID":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/:1:0","tags":["greenplum7"],"title":"Greenplum-Db7å®¹å™¨æ–¹å¼å®‰è£…","uri":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"},{"categories":["æ•°æ®åº“"],"content":"äºŒã€dockerå®‰è£… å®‰è£…è¿‡ç¨‹ ","date":"2023-10-11","objectID":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/:2:0","tags":["greenplum7"],"title":"Greenplum-Db7å®¹å™¨æ–¹å¼å®‰è£…","uri":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"},{"categories":["æ•°æ®åº“"],"content":"ä¸‰ã€å®‰è£…è„šæœ¬ build.sh Dockerfile entrypoint.sh install.sh test.sh build.shè„šæœ¬å†…å®¹ï¼š #!/bin/bash ############################################ # Function : Dockeré•œåƒåˆ¶ä½œè„šæœ¬ # Author : tang # Date : 2021-07-04 # # Usage: sh build.sh # ############################################ docker build -t inrgihc/greenplum:7.0.0 . Dockerfileè„šæœ¬å†…å®¹ï¼š FROM rockylinux:9.2 # Greenplumçš„æ•°æ®å­˜æ”¾ç›®å½• ENV DATADIR=/data # æ–‡ä»¶å‡†å¤‡ COPY install.sh /tmp/install.sh COPY entrypoint.sh /entrypoint.sh # é…ç½®Aliyunçš„ä»“åº“(ä»¥å®‰è£…libcgroup) RUN yum install -y wget \u0026\u0026 wget -O /etc/yum.repos.d/Aliyun-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo # æ‰§è¡Œå®‰è£… RUN yum -y install passwd openssl openssh-server openssh-clients \u0026\u0026\\ mkdir /var/run/sshd/ \u0026\u0026 sed -i 's?#HostKey?HostKey?' /etc/ssh/sshd_config \u0026\u0026 \\ ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key -N '' \u0026\u0026 \\ echo -e '#!/bin/bash\\n/usr/sbin/sshd -D \u0026' \u003e /var/run/sshd/sshd_start.sh \u0026\u0026 \\ chmod u+x /var/run/sshd/sshd_start.sh RUN /var/run/sshd/sshd_start.sh \u0026\u0026 \\ sleep 10s \u0026\u0026 cd /tmp \u0026\u0026 sh /tmp/install.sh \u0026\u0026 \\ rm -rf /tmp/install.sh \u0026\u0026 rm -rf /tmp/files # æš´éœ²ç«¯å£ EXPOSE 5432 22 USER root CMD [ \"sh\" , \"/entrypoint.sh\"] entrypoint.sh è„šæœ¬å†…å®¹ï¼š #!/bin/bash ############################################ # Function : EntryPointå…¥å£ # Author : tang # Date : 2020-12-09 # # Usage: sh entrypoint.sh # ############################################ # å¯åŠ¨sshæœåŠ¡ /var/run/sshd/sshd_start.sh \u0026\u0026 sleep 5s # è®¾ç½®gpadminè´¦å·çš„ç¯å¢ƒå˜é‡ su - gpadmin -l -c \"echo -e 'source /usr/local/greenplum-db/greenplum_path.sh' \u003e\u003e ~/.bashrc\" su - gpadmin -l -c \"echo -e 'export COORDINATOR_DATA_DIRECTORY=$DATADIR/coordinator/gpseg-1/' \u003e\u003e ~/.bashrc\" su - gpadmin -l -c \"echo -e 'export PGPORT=5432' \u003e\u003e ~/.bashrc\" su - gpadmin -l -c \"echo -e 'export PGUSER=gpadmin' \u003e\u003e ~/.bashrc\" su - gpadmin -l -c \"echo -e 'export PGDATABASE=postgres' \u003e\u003e ~/.bashrc\" if [ \"`ls -A $DATADIR`\" = \"\" ]; then # åˆ›å»ºæ•°æ®åº“å­˜æ”¾ç›®å½• mkdir -p $DATADIR/coordinator mkdir -p $DATADIR/primary chown -R gpadmin:gpadmin $DATADIR # å¯åŠ¨æ•°æ®åº“é›†ç¾¤ su - gpadmin -l -c \"source ~/.bashrc;gpinitsystem -a -D -c /home/gpadmin/gpinitsystem_config_singlenode -h /home/gpadmin/gp_hosts_list\" sleep 10s RET=`netstat -tuln | grep 5432 | wc -l` echo \"!!!!!!Check server start:$RET\" su - gpadmin -l -c \"source ~/.bashrc;psql -d postgres -U gpadmin -f /home/gpadmin/initdb_gpdb.sql\" su - gpadmin -l -c \"source ~/.bashrc;gpconfig -c log_statement -v none\" su - gpadmin -l -c \"source ~/.bashrc;gpconfig -c gp_enable_global_deadlock_detector -v on\" su - gpadmin -l -c \"echo \\\"host all all 0.0.0.0/0 password\\\" \u003e\u003e $DATADIR/coordinator/gpseg-1/pg_hba.conf\" su - gpadmin -l -c \"source ~/.bashrc \u0026\u0026 sleep 5s \u0026\u0026 gpstop -u \u0026\u0026 tail -f gpAdminLogs/*.log\" else su - gpadmin -l -c \"source ~/.bashrc \u0026\u0026 gpstart -a \u0026\u0026 tail -f gpAdminLogs/*.log\" fi install.shè„šæœ¬å†…å®¹ï¼š #!/bin/bash ############################################ # Function : Greenplumå•æœºä¸€é”®å®‰è£…è„šæœ¬ # Author : tang # Date : 2020-12-09 # # Usage: sh install.sh # ############################################ # GPDBçš„RPMåŒ…ç‰ˆæœ¬ GPDBVER=7.0.0 # è´¦å·å¯†ç  PASSWORD=greenplum # æ—¥å¿—ç­‰çº§ ERROR_MSG=\"[ERROR] \" INFO_MSG=\"[INFO] \" # æ—¥å¿—å‡½æ•° function log() { TIME=$(date +\"%Y-%m-%d %H:%M:%S\") echo \"$TIME $1\" } # åˆ©ç”¨yumå®‰è£…ä¾èµ–åŒ…å‡½æ•° function package_install() { log \"$INFO_MSG check command package : [ $1 ]\" if ! rpm -qa | grep -q \"^$1\"; then yum install -y $1 package_check_ok else log \"$INFO_MSG command [ $1 ] already installed.\" fi } # æ£€æŸ¥å‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸ function package_check_ok() { ret=$? if [ $ret != 0 ]; then log \"$ERROR_MSG Install failed, error code is $ret, Check the error log.\" exit 1 fi } function gpdb_install(){ log \"$INFO_MSG Start to install greenplum for single node.\" # å®‰è£…ä¾èµ–åŒ… package=(wget iputils net-tools) for p in ${package[@]}; do package_install $p done # å®‰è£…readline(pgsqlä¾èµ–) yum install -y readline-devel ln -s /usr/lib64/libreadline.so.8.1 /lib64/libreadline.so.7 # é…ç½®pingå‘½ä»¤æ‰§è¡Œæƒé™ chmod u+s /bin/ping # åˆ›å»ºç”¨æˆ·ä¸ç”¨æˆ·ç»„ /usr/sbin/groupadd gpadmin /usr/sbin/useradd gpadmin -g gpadmin usermod -G gpadmin gpadmin echo \"${PASSWORD}\" | passwd --stdin gpadmin # sshé…ç½® sed -i 's/#PermitRoo","date":"2023-10-11","objectID":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/:3:0","tags":["greenplum7"],"title":"Greenplum-Db7å®¹å™¨æ–¹å¼å®‰è£…","uri":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"},{"categories":["æ•°æ®åº“"],"content":"å››ã€éƒ¨ç½²è¿‡ç¨‹ ","date":"2023-10-11","objectID":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/:4:0","tags":["greenplum7"],"title":"Greenplum-Db7å®¹å™¨æ–¹å¼å®‰è£…","uri":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"},{"categories":["æ•°æ®åº“"],"content":"1.é•œåƒåˆ¶ä½œ mkdir -p /tmpdisk/greendb7 cd /tmpdisk/greendb7 sh build.sh ","date":"2023-10-11","objectID":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/:4:1","tags":["greenplum7"],"title":"Greenplum-Db7å®¹å™¨æ–¹å¼å®‰è£…","uri":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"},{"categories":["æ•°æ®åº“"],"content":"2.é•œåƒæµ‹è¯• cd /tmpdisk/greendb7 sh test.sh ","date":"2023-10-11","objectID":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/:4:2","tags":["greenplum7"],"title":"Greenplum-Db7å®¹å™¨æ–¹å¼å®‰è£…","uri":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"},{"categories":["æ•°æ®åº“"],"content":"3.ä½¿ç”¨ mkdir /tmpdisk/greendb7-data/gpdb docker run -d --name greenplum -p 15432:5432 -v /tmpdisk/greendb7-data/gpdb:/data inrgihc/greenplum:7.0.0 ","date":"2023-10-11","objectID":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/:4:3","tags":["greenplum7"],"title":"Greenplum-Db7å®¹å™¨æ–¹å¼å®‰è£…","uri":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"},{"categories":["æ•°æ®åº“"],"content":"4.å‚æ•°è§£é‡Š è¯´æ˜ï¼šé¦–æ¬¡å¯åŠ¨é•œåƒæ—¶ä¼šåˆå§‹åŒ–é›†ç¾¤ï¼Œéœ€è¦è€å¿ƒç­‰å¾…10~60ç§’å·¦å³ï¼Œç„¶åæ–¹å¯ç”¨å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“ã€‚ å‚æ•°åç§° å–å€¼ å¤‡æ³¨è¯´æ˜ è½¯ä»¶å®‰è£…è·¯å¾„ /usr/local/greenplum-db greenplumç¨‹åºè½¯ä»¶å®‰è£…æ‰€åœ¨ç›®å½•ï¼Œç›®å‰æ— æ³•å®šåˆ¶é…ç½® æ•°æ®æ‰€åœ¨è·¯å¾„ /data greenplumæ•°æ®åº“æ•°æ®å®‰è£…æ‰€åœ¨ç›®å½•, è¯¥å‚æ•°å¯åœ¨æ‰“åŒ…æ—¶å®šåˆ¶é…ç½® Greenplumè¶…ç®¡è´¦å· gpadmin ç™»å½•Greenplumæ•°æ®åº“çš„è¶…çº§ç®¡ç†å‘˜è´¦å·ä¸ºgpadmin Greenplumè¶…ç®¡å¯†ç  greenplum ç™»å½•Greenplumæ•°æ®åº“çš„è¶…çº§ç®¡ç†å‘˜gpadminçš„å¯†ç  æ•°æ®åº“è¿æ¥ç«¯å£ 5432 greenplumæ•°æ®åº“masterçš„è¿æ¥ç«¯å£å· å‚è€ƒï¼šé“¾æ¥ ","date":"2023-10-11","objectID":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/:4:4","tags":["greenplum7"],"title":"Greenplum-Db7å®¹å™¨æ–¹å¼å®‰è£…","uri":"/greenplum-db7%E5%AE%B9%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"},{"categories":["æ•°æ®åº“"],"content":"ä¸€ã€å®‰è£…ç¯å¢ƒ ç³»ç»Ÿï¼šRocky8.8 æ•°æ®åº“ç‰ˆæœ¬ï¼šgreenplum-db7.0.0-beta5 æ³¨æ„ï¼šgreenplumæ•°æ®åº“åªèƒ½ç”¨æ™®é€šç”¨æˆ·è¿è¡Œï¼Œä¸å¯ç”¨rootç®¡ç†å‘˜ç›´æ¥è¿è¡Œï¼ï¼ï¼ï¼ ","date":"2023-09-08","objectID":"/greenplum-db7%E5%8D%95%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E/:1:0","tags":["greenplum7"],"title":"Greenplum Db7å•èŠ‚ç‚¹å®‰è£…è¯´æ˜","uri":"/greenplum-db7%E5%8D%95%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E/"},{"categories":["æ•°æ®åº“"],"content":"äºŒã€å®‰è£…è¿‡ç¨‹ 1.Rocky8.8 ç³»ç»Ÿæ›´æ–° yum update -y 2.å…³é—­é˜²ç«å¢™ sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config systemctl stop firewalld systemctl disable firewalld setenforce 0 reboot 3.å®‰è£…ä¾èµ– yum install -y gcc gcc-c++ make readline-devel zlib-devel flex bison python-devel openssl-devel pam-devel æ¨èå°†å®˜æ–¹ ä¾èµ–ä¹Ÿå®‰è£…ä¸Š. Rhel-Rocky.bash install needed packages. Please add to this list if you discover additional prerequisites sudo yum group install -y \"Development Tools\" INSTALL_PKGS=\"apr-devel bison bzip2-devel cmake3 epel-release flex gcc gcc-c++ krb5-devel libcurl-devel libevent-devel libkadm5 libxml2-devel libzstd-devel openssl-devel python39 python39-devel python39-psutil python3-pip perl-ExtUtils-MakeMaker.noarch perl-ExtUtils-Embed.noarch readline-devel rsync xerces-c-devel zlib-devel python3-psutil python3-pyyaml\" for i in $INSTALL_PKGS; do sudo yum install -y $i done sudo yum install -y postgresql sudo yum install -y postgresql-devel sudo yum install -y python3-psycopg2 pip3.9 install -r python-dependencies.txt #Remove the python3 softlink because on Rocky8 its pointing to python3.6 by default. We need python3.9 for gpdb7. sudo rm -rf /usr/bin/python3 sudo ln -s /usr/bin/python3.9 /usr/bin/python3 #For all Greenplum Database host systems running RHEL, CentOs or Rocky8, SELinux must either be Disabled or configured to allow unconfined access to Greenplum processes, directories, and the gpadmin user. setenforce 0 sudo tee -a /etc/selinux/config \u003c\u003c EOF SELINUX=disabled EOF #To prevent SELinux-related SSH authentication denials that could occur even with SELinux deactivated sudo tee -a /etc/sssd/sssd.conf \u003c\u003c EOF selinux_provider=none EOF sudo systemctl stop firewalld.service #Configure kernel settings so the system is optimized for Greenplum Database. sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003c\u003c EOF kernel.msgmax = 65536 kernel.msgmnb = 65536 kernel.msgmni = 2048 kernel.sem = 500 2048000 200 8192 kernel.shmmni = 1024 kernel.core_uses_pid = 1 kernel.core_pattern=/var/core/core.%h.%t kernel.sysrq = 1 net.core.netdev_max_backlog = 2000 net.core.rmem_max = 4194304 net.core.wmem_max = 4194304 net.core.rmem_default = 4194304 net.core.wmem_default = 4194304 net.ipv4.tcp_rmem = 4096 4224000 16777216 net.ipv4.tcp_wmem = 4096 4224000 16777216 net.core.optmem_max = 4194304 net.core.somaxconn = 10000 net.ipv4.ip_forward = 0 net.ipv4.tcp_congestion_control = cubic net.ipv4.tcp_tw_recycle = 0 net.core.default_qdisc = fq_codel net.ipv4.tcp_mtu_probing = 0 net.ipv4.conf.all.arp_filter = 1 net.ipv4.conf.default.accept_source_route = 0 net.ipv4.ip_local_port_range = 10000 65535 net.ipv4.tcp_max_syn_backlog = 4096 net.ipv4.tcp_syncookies = 1 net.ipv4.ipfrag_high_thresh = 41943040 net.ipv4.ipfrag_low_thresh = 31457280 net.ipv4.ipfrag_time = 60 net.ipv4.ip_local_reserved_ports=65330 vm.overcommit_memory = 2 vm.overcommit_ratio = 95 vm.swappiness = 10 vm.dirty_expire_centisecs = 500 vm.dirty_writeback_centisecs = 100 vm.zone_reclaim_mode = 0 EOF RAM_IN_KB=`cat /proc/meminfo | grep MemTotal | awk '{print $2}'` RAM_IN_BYTES=$(($RAM_IN_KB*1024)) echo \"vm.min_free_kbytes = $(($RAM_IN_BYTES*3/100/1024))\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null echo \"kernel.shmall = $(($RAM_IN_BYTES/2/4096))\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null echo \"kernel.shmmax = $(($RAM_IN_BYTES/2))\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null if [ $RAM_IN_BYTES -le $((64*1024*1024*1024)) ]; then echo \"vm.dirty_background_ratio = 3\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null echo \"vm.dirty_ratio = 10\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null else echo \"vm.dirty_background_ratio = 0\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null echo \"vm.dirty_ratio = 0\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null echo \"vm.dirty_background_bytes = 1610612736 # 1.5GB\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null echo \"vm.dirty_bytes = 4294967296 # 4GB\" | sudo tee -a /etc/sysctl.d/10-gpdb.conf \u003e /dev/null fi sudo sysctl -p sudo t","date":"2023-09-08","objectID":"/greenplum-db7%E5%8D%95%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E/:2:0","tags":["greenplum7"],"title":"Greenplum Db7å•èŠ‚ç‚¹å®‰è£…è¯´æ˜","uri":"/greenplum-db7%E5%8D%95%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"ä¸€ã€è¯ä¹¦ Ubuntu server 20.04.3 ç»™apache2åˆ›å»ºè‡ªç­¾åè¯ä¹¦ ä»‹ç» TLSï¼ˆä¼ è¾“å±‚å®‰å…¨ï¼‰åŠå…¶å‰èº«SSLæ˜¯ç”¨äºå°†æ­£å¸¸æµé‡åŒ…è£…åœ¨å—ä¿æŠ¤çš„åŠ å¯†åŒ…è£…å™¨ä¸­çš„åè®®ã€‚ä½¿ç”¨è¿™é¡¹æŠ€æœ¯ï¼ŒæœåŠ¡å™¨å¯ä»¥å®‰å…¨åœ°å‘å…¶å®¢æˆ·ç«¯å‘é€ä¿¡æ¯ï¼Œè€Œä¸ä¼šè¢«å¤–ç•Œæ‹¦æˆªæˆ–è¯»å–å…¶æ¶ˆæ¯ã€‚ æ³¨æ„ï¼šè‡ªç­¾åè¯ä¹¦å°†åŠ å¯†æ‚¨çš„æœåŠ¡å™¨å’Œä»»ä½•å®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒä¸æ˜¯ç”± Web æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿä¸­åŒ…å«çš„ä»»ä½•å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ç­¾ç½²çš„ï¼Œå› æ­¤ç”¨æˆ·æ— æ³•ä½¿ç”¨è¯¥è¯ä¹¦æ¥è‡ªåŠ¨éªŒè¯æ‚¨çš„æœåŠ¡å™¨çš„èº«ä»½ã€‚å› æ­¤ï¼Œæ‚¨çš„ç”¨æˆ·åœ¨è®¿é—®æ‚¨çš„ç½‘ç«™æ—¶ä¼šçœ‹åˆ°å®‰å…¨é”™è¯¯ã€‚ ç”±äºæ­¤é™åˆ¶ï¼Œè‡ªç­¾åè¯ä¹¦ä¸é€‚ç”¨äºä¸ºå…¬ä¼—æœåŠ¡çš„ç”Ÿäº§ç¯å¢ƒã€‚å®ƒä»¬é€šå¸¸ç”¨äºæµ‹è¯•æˆ–ä¿æŠ¤å•ä¸ªç”¨æˆ·æˆ–ä¸€å°ç¾¤ç”¨æˆ·ä½¿ç”¨çš„éå…³é”®æœåŠ¡ï¼Œè¿™äº›ç”¨æˆ·å¯ä»¥é€šè¿‡å¤‡ç”¨é€šä¿¡æ¸ é“å»ºç«‹å¯¹è¯ä¹¦æœ‰æ•ˆæ€§çš„ä¿¡ä»»ã€‚å¦‚éœ€æ›´é€‚åˆç”Ÿäº§çš„è¯ä¹¦è§£å†³æ–¹æ¡ˆï¼Œè¯·æŸ¥çœ‹Letâ€™s Encrypt ï¼Œä¸€ä¸ªå…è´¹çš„è¯ä¹¦é¢å‘æœºæ„ã€‚ å…ˆå†³æ¡ä»¶ ä½¿ç”¨éroot ç”¨æˆ·ã€å¯ç”¨ sudo çš„ç”¨æˆ·è®¿é—® Ubuntu 20.04 æœåŠ¡å™¨ã€‚æˆ‘ä»¬çš„Ubuntu 20.04 åˆå§‹æœåŠ¡å™¨è®¾ç½® æŒ‡å—å¯ä»¥å‘æ‚¨å±•ç¤ºå¦‚ä½•åˆ›å»ºæ­¤å¸æˆ·ã€‚ æ‚¨è¿˜éœ€è¦å®‰è£… Apacheã€‚ sudo apt update ç„¶åï¼Œå®‰è£…apache2è½¯ä»¶åŒ…ï¼š sudo apt install apache2 æœ€åï¼Œå¦‚æœæ‚¨ufwè®¾ç½®äº†é˜²ç«å¢™ï¼Œè¯·æ‰“å¼€httpå’Œhttpsç«¯å£ï¼š sudo ufw allow \"Apache Full\" æ­¥éª¤1ï¼šå¯ç”¨mod_ssl åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•SSL è¯ä¹¦ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»å¯ç”¨mod_sslApache æ¨¡å—ï¼Œå®ƒæä¾›å¯¹ SSL åŠ å¯†çš„æ”¯æŒã€‚ mod_sslä½¿ç”¨ä»¥ä¸‹a2enmodå‘½ä»¤å¯ç”¨ï¼š sudo a2enmod ssl é‡å¯Apacheæ¿€æ´»æ¨¡å—ï¼š sudo systemctl restart apache2 è¯¥mod_sslæ¨¡å—ç°å·²å¯ç”¨å¹¶å¯ä»¥ä½¿ç”¨ã€‚ æ­¥éª¤2ï¼šåˆ›å»ºsslè¯ä¹¦ ç°åœ¨ Apache å·²å‡†å¤‡å¥½ä½¿ç”¨åŠ å¯†ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ç”Ÿæˆæ–°çš„ SSL è¯ä¹¦ã€‚è¯¥è¯ä¹¦å°†å­˜å‚¨æœ‰å…³æ‚¨ç«™ç‚¹çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œå¹¶é™„å¸¦ä¸€ä¸ªå…è®¸æœåŠ¡å™¨å®‰å…¨å¤„ç†åŠ å¯†æ•°æ®çš„å¯†é’¥æ–‡ä»¶ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹opensslå‘½ä»¤åˆ›å»º SSL å¯†é’¥å’Œè¯ä¹¦æ–‡ä»¶ï¼š sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/apache-selfsigned.key -out /etc/ssl/certs/apache-selfsigned.crt å‚æ•°è¯¦è§£ï¼š opensslï¼šè¿™æ˜¯ç”¨äºåˆ›å»ºå’Œç®¡ç† OpenSSL è¯ä¹¦ã€å¯†é’¥å’Œå…¶ä»–æ–‡ä»¶çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ req -x509ï¼šè¿™æŒ‡å®šæˆ‘ä»¬è¦ä½¿ç”¨ X.509 è¯ä¹¦ç­¾åè¯·æ±‚ (CSR) ç®¡ç†ã€‚X.509 æ˜¯ SSL å’Œ TLS éµå®ˆçš„ç”¨äºå¯†é’¥å’Œè¯ä¹¦ç®¡ç†çš„å…¬é’¥åŸºç¡€ç»“æ„æ ‡å‡†ã€‚ -nodesï¼šè¿™å‘Šè¯‰ OpenSSL è·³è¿‡ä½¿ç”¨å¯†ç ä¿æŠ¤æˆ‘ä»¬çš„è¯ä¹¦çš„é€‰é¡¹ã€‚å½“æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ Apache èƒ½å¤Ÿåœ¨æ²¡æœ‰ç”¨æˆ·å¹²é¢„çš„æƒ…å†µä¸‹è¯»å–æ–‡ä»¶ã€‚å¯†ç å¯ä»¥é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»åœ¨æ¯æ¬¡é‡æ–°å¯åŠ¨åè¾“å…¥å®ƒã€‚ -days 365ï¼šæ­¤é€‰é¡¹è®¾ç½®è¯ä¹¦è¢«è§†ä¸ºæœ‰æ•ˆçš„æ—¶é—´é•¿åº¦ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œè®¾ç½®äº†ä¸€å¹´ã€‚è®¸å¤šç°ä»£æµè§ˆå™¨ä¼šæ‹’ç»ä»»ä½•æœ‰æ•ˆæœŸè¶…è¿‡ä¸€å¹´çš„è¯ä¹¦ã€‚ -newkey rsa:2048ï¼šè¿™æŒ‡å®šæˆ‘ä»¬è¦åŒæ—¶ç”Ÿæˆæ–°è¯ä¹¦å’Œæ–°å¯†é’¥ã€‚æˆ‘ä»¬æ²¡æœ‰åœ¨ä¸Šä¸€æ­¥ä¸­åˆ›å»ºç­¾ç½²è¯ä¹¦æ‰€éœ€çš„å¯†é’¥ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†å…¶ä¸è¯ä¹¦ä¸€èµ·åˆ›å»ºã€‚è¯¥rsa:2048éƒ¨åˆ†å‘Šè¯‰å®ƒåˆ¶ä½œä¸€ä¸ª 2048 ä½é•¿çš„ RSA å¯†é’¥ã€‚ -keyoutï¼šè¿™ä¸€è¡Œå‘Šè¯‰ OpenSSL åœ¨å“ªé‡Œæ”¾ç½®æˆ‘ä»¬æ­£åœ¨åˆ›å»ºçš„ç”Ÿæˆçš„ç§é’¥æ–‡ä»¶ã€‚ -outï¼šè¿™å‘Šè¯‰ OpenSSL åœ¨å“ªé‡Œæ”¾ç½®æˆ‘ä»¬æ­£åœ¨åˆ›å»ºçš„è¯ä¹¦ã€‚ æœ€é‡è¦çš„ä¸€è¡Œæ˜¯è¯·æ±‚Common Name. æ‚¨éœ€è¦è¾“å…¥ç”¨äºè®¿é—®æœåŠ¡å™¨çš„ä¸»æœºåæˆ–æœåŠ¡å™¨çš„å…¬å…± IPã€‚é‡è¦çš„æ˜¯ï¼Œæ­¤å­—æ®µä¸æ‚¨å°†æ”¾å…¥æµè§ˆå™¨åœ°å€æ ä¸­ä»¥è®¿é—®è¯¥ç«™ç‚¹çš„ä»»ä½•å†…å®¹ç›¸åŒ¹é…ï¼Œå› ä¸ºä¸åŒ¹é…ä¼šå¯¼è‡´æ›´å¤šçš„å®‰å…¨é”™è¯¯ã€‚ å®Œæ•´çš„æç¤ºåˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š Country Name (2 letter code) [XX]:US State or Province Name (full name) []:Example Locality Name (eg, city) [Default City]:Example Organization Name (eg, company) [Default Company Ltd]:Example Inc Organizational Unit Name (eg, section) []:Example Dept Common Name (eg, your name or your server's hostname) []:your_domain_or_ip Email Address []:webmaster@example.com æ‚¨åˆ›å»ºçš„ä¸¤ä¸ªæ–‡ä»¶éƒ½å°†æ”¾ç½®åœ¨/etc/ssl. æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ›´æ–°æˆ‘ä»¬çš„ Apache é…ç½®ä»¥ä½¿ç”¨æ–°çš„è¯ä¹¦å’Œå¯†é’¥ã€‚ æ­¥éª¤3ï¼šé…ç½®apacheä½¿ç”¨ssl ç°åœ¨æˆ‘ä»¬æœ‰äº†è‡ªç­¾åè¯ä¹¦å’Œå¯†é’¥ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°æˆ‘ä»¬çš„ Apache é…ç½®ä»¥ä½¿ç”¨å®ƒä»¬ã€‚åœ¨ Ubuntu ä¸Šï¼Œæ‚¨å¯ä»¥å°†æ–°çš„ Apache é…ç½®æ–‡ä»¶ï¼ˆå®ƒä»¬å¿…é¡»ä»¥ ç»“å°¾.confï¼‰æ”¾å…¥/etc/apache2/sites-available/ï¼Œå®ƒä»¬å°†åœ¨ä¸‹æ¬¡é‡æ–°åŠ è½½æˆ–é‡æ–°å¯åŠ¨ Apache è¿›ç¨‹æ—¶åŠ è½½ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„æœ€å°é…ç½®æ–‡ä»¶ã€‚ï¼ˆå¦‚æœæ‚¨å·²ç»\u003cVirtualhost\u003eè®¾ç½®äº†Apacheå¹¶ä¸”åªéœ€è¦å‘å…¶ä¸­æ·»åŠ  SSLï¼Œæ‚¨å¯èƒ½éœ€è¦å¤åˆ¶ä»¥ å¼€å¤´çš„é…ç½®è¡ŒSSLï¼Œå¹¶å°†VirtualHostç«¯å£ä»åˆ‡æ¢80åˆ°443ã€‚æˆ‘ä»¬å°†80åœ¨ä¸‹ä¸€æ­¥ä¸­å¤„ç†ç«¯å£ã€‚ ) åœ¨ /etc/apache2/sites-available ç›®å½•ä¸­æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶ï¼š sudo nano /etc/apache2/sites-available/your_domain_or_ip.conf ç²˜è´´ä»¥ä¸‹æœ€å°çš„ VirtualHost é…ç½®ï¼š /etc/apache2/sites-available/your_domain_or_ip.conf \u003cVirtualHost *:443\u003e ServerName your_domain_or_ip DocumentRoot /var/www/your_domain_or_ip SSLEngine on SSLCertificateFile /etc/ssl/certs/apache-selfsigned.crt SSLCertificateKeyFile /etc/ssl/private/apache-selfsigned.key \u003c/VirtualHost\u003e è¯·åŠ¡å¿…å°†ServerNameè¡Œæ›´æ–°ä¸ºæ‚¨æ‰“ç®—å¯»å€æœåŠ¡å™¨çš„ä»»ä½•æ–¹å¼ã€‚è¿™å¯ä»¥æ˜¯ä¸»æœºåã€å®Œæ•´åŸŸåæˆ– IP åœ°å€ã€‚ç¡®ä¿æ‚¨é€‰æ‹©çš„ä»»ä½•å†…å®¹ä¸Common Nameæ‚¨åœ¨åˆ¶ä½œè¯ä¹¦æ—¶é€‰æ‹©çš„å†…å®¹ç›¸åŒ¹é…ã€‚ å‰©ä¸‹çš„å‡ è¡ŒæŒ‡å®šä¸€ä¸ªDocumentRootç›®å½•æ¥æä¾›æ–‡ä»¶ï¼Œä»¥åŠå°† Apache æŒ‡å‘æˆ‘ä»¬æ–°åˆ›å»ºçš„è¯ä¹¦å’Œå¯†é’¥æ‰€éœ€çš„ SSL é€‰é¡¹ã€‚ ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬DocumentRootçš„ HTML æ–‡ä»¶å¹¶å°†å…¶æ”¾å…¥å…¶ä¸­ï¼Œä»…ç”¨äºæµ‹è¯•ç›®çš„ï¼š sudo mkdir /var/www/your_domain_or_ip index.htmlä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶ï¼š sudo nano /var/www/your_domain_or_ip/index.html å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°ç©ºç™½æ–‡ä»¶ä¸­ï¼š /var/www/your_domain_or_ip/index.html \u003ch1\u003eit worked!\u003c/h1\u003e å½“ç„¶ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ HTML æ–‡ä»¶ï¼Œä½†æµè§ˆå™¨å¾ˆå®½æ¾ï¼Œè¶³ä»¥éªŒè¯æˆ‘ä»¬çš„é…ç½®ã€‚ ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨a2ensiteå·¥å…·å¯ç”¨é…ç½®æ–‡ä»¶ï¼š sudo a2ensite your_domain_or_ip.conf æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹é…ç½®é”™è¯¯ï¼š sudo apache2ctl configtest å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å°†å¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„ç»“æœï¼š OutputAH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1. Set the 'ServerName' directive globally to suppress this messageSyntax OK ç¬¬ä¸€è¡Œæ˜¯ä¸€æ¡æ¶ˆæ¯ï¼Œå‘Šè¯‰æ‚¨è¯¥ServerNameæŒ‡ä»¤æœªå…¨å±€è®¾ç½®ã€‚å¦‚æœä½ æƒ³æ‘†è„±é‚£æ¡æ¶ˆæ¯ï¼Œä½ å¯ä»¥ServerNameåœ¨/etc/apache2/apache2.conf. è¿™æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºè¯¥æ¶ˆæ¯ä¸ä¼šé€ æˆä¼¤å®³ã€‚ å¦‚æœæ‚¨çš„è¾“å‡ºåŒ…å«Syntax OKåœ¨å…¶ä¸­ï¼Œåˆ™æ‚¨çš„é…ç½®æ–‡ä»¶æ²¡æœ‰è¯­æ³•é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°é‡æ–°åŠ è½½ Apache ä»¥å®ç°æˆ‘ä»¬çš„æ›´æ”¹ï¼š sudo systemctl reload apache2 ç°åœ¨åœ¨æµè§ˆå™¨ä¸­åŠ è½½æ‚¨çš„ç«™ç‚¹ï¼Œç¡®ä¿https://åœ¨å¼€å§‹æ—¶ä½¿ç”¨ã€‚ æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªé”™è¯¯ã€‚è¿™å¯¹äºè‡ªç­¾åè¯ä¹¦æ¥è¯´æ˜¯æ­£å¸¸çš„ï¼æµè§ˆå™¨è­¦å‘Šæ‚¨å®ƒæ— æ³•éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå› ä¸ºæˆ‘ä»¬çš„è¯ä¹¦æ²¡æœ‰ç”±ä»»ä½•å·²çŸ¥çš„è¯ä¹¦é¢å‘æœºæ„ç­¾ç½²ã€‚å¯¹äºæµ‹è¯•ç›®çš„å’Œä¸ªäººä½¿ç”¨ï¼Œè¿™å¯ä»¥å¾ˆå¥½ã€‚æ‚¨åº”è¯¥èƒ½å¤Ÿç‚¹å‡»è¿›å…¥é«˜çº§ä¿¡æ¯æˆ–æ›´å¤šä¿¡æ¯ï¼Œç„¶åé€‰æ‹©ç»§ç»­ã€‚ æ‰§è¡Œæ­¤æ“ä½œåï¼Œæ‚¨çš„æµè§ˆå™¨å°†åŠ è½½è¯¥it worked!æ¶ˆæ¯ã€‚ æ³¨æ„ï¼šå¦‚æœæ‚¨çš„æµè§ˆå™¨æ ¹æœ¬æ²¡æœ‰è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè¯·ç¡®ä¿æ‚¨çš„è¿æ¥æ²¡æœ‰è¢«é˜²ç«å¢™é˜»æ­¢ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ufwï¼Œä»¥ä¸‹å‘½ä»¤å°†æ‰“å¼€ç«¯å£80å’Œ443ï¼šsudo ufw allow \"Apache Full\" å¤åˆ¶ æ¥ä¸‹æ¥ï¼Œ","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:1","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"äºŒã€å®¹å™¨ LXD LXDï¼ˆå‘éŸ³ä¸º lex-deeï¼‰æ˜¯æ›´è½»çš„ç®¡ç†ç¨‹åºï¼Œæˆ–è½»é‡çº§å®¹å™¨ç®¡ç†ç¨‹åºã€‚LXC (lex-see) æ˜¯ä¸€ä¸ªåœ¨æœ¬åœ°ç³»ç»Ÿä¸Šåˆ›å»ºå’Œç®¡ç†â€œå®¹å™¨â€çš„ç¨‹åºã€‚å®ƒè¿˜æä¾›äº†ä¸€ä¸ª API ä»¥å…è®¸æ›´é«˜çº§åˆ«çš„ç®¡ç†å™¨ï¼ˆä¾‹å¦‚ LXDï¼‰ç®¡ç†å®¹å™¨ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå¯ä»¥å°† LXC ä¸ QEMU è¿›è¡Œæ¯”è¾ƒï¼ŒåŒæ—¶å°† LXD ä¸ libvirt è¿›è¡Œæ¯”è¾ƒã€‚ LXC API å¤„ç†â€œå®¹å™¨â€ã€‚LXD API å¤„ç†â€œè¿œç¨‹â€ï¼Œå®ƒæä¾›å›¾åƒå’Œå®¹å™¨ã€‚è¿™é€šè¿‡ç½‘ç»œæ‰©å±•äº† LXC åŠŸèƒ½ï¼Œå¹¶å…è®¸å¯¹å®¹å™¨è¿ç§»å’Œå®¹å™¨æ˜ åƒå‘å¸ƒç­‰ä»»åŠ¡è¿›è¡Œç®€æ´çš„ç®¡ç†ã€‚ LXD åœ¨å¹•åä½¿ç”¨ LXC æ¥å®Œæˆä¸€äº›å®¹å™¨ç®¡ç†ä»»åŠ¡ã€‚ä½†æ˜¯ï¼Œå®ƒä¿ç•™è‡ªå·±çš„å®¹å™¨é…ç½®ä¿¡æ¯å¹¶æœ‰è‡ªå·±çš„çº¦å®šï¼Œå› æ­¤æœ€å¥½ä¸è¦å°†ç»å…¸çš„ LXC å‘½ä»¤ä¸ LXD å®¹å™¨ä¸€èµ·ä½¿ç”¨. ubuntu server é¢„è£…LXDã€‚å…¶ä»–ç³»ç»Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… lxd åŒ… sudo snap install lxd é…ç½® lxd åˆå§‹åŒ–ï¼ˆå¿…é¡»ä»¥rootèº«ä»½è¿è¡Œï¼‰ sudo lxd init è¯¦ç»†å‚æ•°ï¼š LXD Clusteringï¼šä¸éœ€è¦ New storage poolï¼šéœ€è¦åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ±  Name of storage poolï¼šç»™å­˜å‚¨æ± å‘½å storage backendï¼šå­˜å‚¨åç«¯ï¼Œä½¿ç”¨ ZFS Create a new ZFS poolï¼šéœ€è¦åˆ›å»ºä¸€ä¸ª ZFS æ±  Use an existing block deviceï¼šYes Path to block deviceï¼šä½¿ç”¨å·²æœ‰çš„ç£ç›˜åˆ†åŒºç”¨äº ZFS çš„å­˜å‚¨åç«¯ MAAS server?ï¼šä¸çŸ¥é“æ˜¯å•¥ï¼Œä¸éœ€è¦ New local network bridge?ï¼šéœ€è¦ï¼Œæˆ‘åªéœ€è¦ä½¿ç”¨ LXD é»˜è®¤çš„ç½‘æ¡¥å³å¯ New bridge be calledï¼šç»™ç½‘æ¡¥å‘½å IPv4ï¼šé»˜è®¤ auto IPv6ï¼šé»˜è®¤ auto LXD available over the networkï¼Ÿï¼šé»˜è®¤ no Stale cachedï¼Ÿï¼šé»˜è®¤ yes YAML printedï¼Ÿï¼šæ‰“å°ä¿¡æ¯ï¼Œyes/no éƒ½è¡Œ å¦‚æœä¸èƒ½ç”¨rootç”¨æˆ·ï¼Œæ™®é€šç”¨æˆ·å¦‚lhp éœ€è¦åŠ å…¥lxdç”¨æˆ·ç»„ã€‚ adduser lhp lxd æŸ¥çœ‹lxdé…ç½®ä¿¡æ¯ sudo lxc info æŸ¥çœ‹é»˜è®¤å®¹å™¨é…ç½® sudo lxc profile show default æŸ¥çœ‹å®¹å™¨åˆ—è¡¨ sudo lxc list åˆ›å»ºå®¹å™¨æ¨¡æ¿ é…ç½®æ¸…åé•œåƒæº https://mirrors.tuna.tsinghua.edu.cn/help/lxc-images/ LXD/LXC 2.0åŠä»¥ä¸Šç‰ˆæœ¬ä½¿ç”¨é•œåƒåŠ é€Ÿçš„æ–¹æ³•: åˆ›å»ºä¸€ä¸ªremoteé“¾æ¥ï¼ŒæŒ‡å‘é•œåƒç«™å³å¯ï¼Œæˆ–æ›¿æ¢æ‰é»˜è®¤çš„imagesé“¾æ¥ã€‚ # lxc remote add tuna-images https://mirrors.tuna.tsinghua.edu.cn/lxc-images/ --protocol=simplestreams --public # lxc image list tuna-images: æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼Œå¯»æ‰¾åˆé€‚çš„é•œåƒçš„FINGERPRINTï¼Œç”¨äºä¸‹è½½(æ³¨æ„é€‰æ‹©x86_64æ¶æ„) sudo lxc image list tuna-images: root@lhp-server:~/snap/lxd/common/config# lxc image list tuna-images:ubuntu | grep x86_64 | ubuntu/16.04 (7 more) | 4f34b9f8a490 | yes | Ubuntu xenial amd64 (20210924_07:42) | x86_64 | VIRTUAL-MACHINE | 204.25MB | Sep 24, 2021 at 12:00am (UTC) | | ubuntu/16.04 (7 more) | 10c1476cf890 | yes | Ubuntu xenial amd64 (20210924_07:42) | x86_64 | CONTAINER | 84.59MB | Sep 24, 2021 at 12:00am (UTC) | | ubuntu/16.04/cloud (3 more) | 31a69e3218ef | yes | Ubuntu xenial amd64 (20210924_07:42) | x86_64 | CONTAINER | 103.50MB | Sep 24, 2021 at 12:00am (UTC) | | ubuntu/16.04/cloud (3 more) | b3637c07e450 | yes | Ubuntu xenial amd64 (20210924_07:42) | x86_64 | VIRTUAL-MACHINE | 233.88MB | Sep 24, 2021 at 12:00am (UTC) | | ubuntu/18.04 (7 more) | 89e249e9c85d | yes | Ubuntu bionic amd64 (20210924_07:42) | x86_64 | CONTAINER | 100.45MB | Sep 24, 2021 at 12:00am (UTC) | FINGERPRINTæ˜¯é•œåƒçš„æŒ‡çº¹ï¼Œåœ¨ä¸Šæ¡å‘½ä»¤ä¸‹æŸ¥æ‰¾ï¼ŒContainerTemplateNameä¸ºå®¹å™¨æ¨¡æ¿åç§°ï¼Œè‡ªå·±å®šä¹‰ sudo lxc launch tuna-images:\u003cFINGERPRINT\u003e \u003cContainerTemplateName\u003e ä¸¾ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºubuntuçš„å®¹å™¨ã€‚åœ¨lxcæ¸…åæºä¸­10c1476cf890æ˜¯Ubuntu16.04çš„fingerprint sudo lxc launch tuna-images:10c1476cf890 ubuntu è¿›è¡Œå®¹å™¨åˆ—è¡¨æŸ¥çœ‹ sudo lxc list +--------+---------+----------------------+-----------------------------------------------+-----------+-----------+ | NAME | STATE | IPV4 | IPV6 | TYPE | SNAPSHOTS | +--------+---------+----------------------+-----------------------------------------------+-----------+-----------+ | ubuntu | RUNNING | 10.235.54.209 (eth0) | fd42:1082:67cd:27dd:216:3eff:fec0:6ed1 (eth0) | CONTAINER | 0 | +--------+---------+----------------------+-----------------------------------------------+-----------+-----------+ å¯è¿›å…¥å®¹å™¨çš„ root ç”¨æˆ·ä¸‹ bash sudo lxc exec \u003cContainerTemplateName\u003e bash ç”¨æˆ·åˆ‡æ¢ sudo susu ubuntu é…ç½®å…±äº«ç›®å½• è®¾ç½®å…±äº«ç›®å½•æ¥å®ç°å®¿ä¸»æœºä¸å®¹å™¨ä¹‹é—´çš„æ–‡ä»¶ä¼ è¾“ è®¾ç½®é”®å€¼ sudo lxc config set \u003cContainerTemplateName\u003e security.privileged true è®¾ç½®å…±äº«ç›®å½•ï¼Œå…¶ä¸­shareNameä¸ºè™šæ‹Ÿçš„è®¾å¤‡åç§°ï¼Œlxdä¼šè™šæ‹Ÿå‡ºè¯¥è®¾å¤‡å¹¶å¯¼é€šæ¥é€šä¸¤è€…å…±äº«ç›®å½•ï¼Œpath1ä¸ºå®¿ä¸»æœºä¸‹å…±äº«ç›®å½•è·¯å¾„ï¼Œpath2ä¸ºå®¹å™¨ä¸‹å…±äº«ç›®å½•è·¯å¾„ sudo lxc config device add \u003cContainerTemplateName\u003e \u003cshareName\u003e disk source=\u003cpath1\u003e path=\u003cpath2\u003e å®ä¾‹ï¼š oot@lhp-server:~# lxc config set ubuntu security.privileged true root@lhp-server:~# lxc config device add ubuntu share disk source=/share path=/media Device share added to ubuntu å¯ä»¥åœ¨å®¿ä¸»æœº/mediaä¸­åˆ›å»ºæ–‡ä»¶æµ‹è¯•ï¼Œå®¹å™¨/shareä¸­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚ è®¾ç½®ç”¨æˆ·åå¯†ç ï¼š sudo lxc exec \u003cContainerTemplateName\u003e bashpasswd å®¹å™¨å…‹éš† å…‹éš†å®¹å™¨ å‚æ•°ä¸€ä¸ºæ¨¡æ¿å®¹å™¨åç§°ï¼Œå‚æ•°äºŒä¸ºç›®æ ‡å®¹å™¨åç§° sudo lxc copy \u003cContainerTemplateName\u003e \u003cnewContainerName\u003e è¿è¡Œæ–°å®¹å™¨ sudo lxc start \u003cnewContainerName\u003e è¿›å…¥æ–°å®¹å™¨bash sudo lxc exec \u003cnewContainerName\u003e bash æ³¨æ„ï¼Œæ­¤æ­¥éª¤åéœ€è¦ä¿®æ”¹Frpçš„ç«¯å£ï¼Œé‡æ–°å»ºç«‹å†…å¤–ç½‘ç©¿é€ï¼Œå»ºè®®ä¿®æ”¹åä½¿ç”¨snapshotå¿«ç…§å¤‡ä»½sudo lxc snapshot \u003cContainerName\u003eã€‚ å®ä¾‹ï¼š root@lhp-server:~# lxc list +---------+---------+----------------------+-------------------------------------","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:2","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"ä¸‰ã€æ•°æ®åº“ PostgreSQL PostgreSQL æ˜¯ä¸€ä¸ªå¯¹è±¡å…³ç³»æ•°æ®åº“ç³»ç»Ÿï¼Œå®ƒå…·æœ‰ä¼ ç»Ÿå•†ä¸šæ•°æ®åº“ç³»ç»Ÿçš„ç‰¹æ€§ï¼Œå¹¶åœ¨ä¸‹ä¸€ä»£ DBMS ç³»ç»Ÿä¸­è¿›è¡Œäº†å¢å¼ºã€‚ å®‰è£… sudo apt install postgresql é…ç½® è¦ä½¿å…¶ä»–è®¡ç®—æœºèƒ½å¤Ÿè¿æ¥åˆ°æ‚¨çš„ PostgreSQL æœåŠ¡å™¨ï¼Œè¯·ç¼–è¾‘æ–‡ä»¶ /etc/postgresql/12/main/postgresql.conf æ‰¾åˆ°*#listen_addresses = â€™localhostâ€™ è¡Œ*å¹¶å°†å…¶æ›´æ”¹ä¸ºï¼š listen_addresses = '*' ç¬”è®° è¦åŒæ—¶å…è®¸ IPv4 å’Œ IPv6 è¿æ¥ï¼Œè¯·å°† â€™localhostâ€™ æ›¿æ¢ä¸º â€˜::â€™ ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿æ¥åˆ°æˆ‘ä»¬çš„ PostgreSQL æœåŠ¡å™¨ï¼Œä¸‹ä¸€æ­¥æ˜¯ä¸ºpostgresç”¨æˆ·è®¾ç½®å¯†ç ã€‚åœ¨ç»ˆç«¯æç¤ºç¬¦ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥è¿æ¥åˆ°é»˜è®¤çš„ PostgreSQL æ¨¡æ¿æ•°æ®åº“ï¼š sudo -u postgres psql template1 ä¸Šé¢çš„å‘½ä»¤ä»¥ç”¨æˆ·postgresè¿æ¥åˆ° PostgreSQL æ•°æ®åº“template1ã€‚è¿æ¥åˆ° PostgreSQL æœåŠ¡å™¨åï¼Œæ‚¨å°†çœ‹åˆ° SQL æç¤ºç¬¦ã€‚æ‚¨å¯ä»¥åœ¨ psql æç¤ºç¬¦ä¸‹è¿è¡Œä»¥ä¸‹ SQL å‘½ä»¤æ¥é…ç½®ç”¨æˆ·postgresçš„å¯†ç ã€‚ ALTER USER postgres with encrypted password 'your_password'; é…ç½®å¯†ç åï¼Œç¼–è¾‘æ–‡ä»¶/etc/postgresql/12/main/pg_hba.confä»¥å¯¹postgresç”¨æˆ·ä½¿ç”¨MD5èº«ä»½éªŒè¯ï¼š local all postgres md5 æœ€åï¼Œæ‚¨åº”è¯¥é‡æ–°å¯åŠ¨ PostgreSQL æœåŠ¡ä»¥åˆå§‹åŒ–æ–°é…ç½®ã€‚ä»ç»ˆç«¯æç¤ºè¾“å…¥ä»¥ä¸‹å†…å®¹ä»¥é‡æ–°å¯åŠ¨ PostgreSQLï¼š sudo systemctl restart postgresql.service è­¦å‘Š ä»¥ä¸Šé…ç½®æ— è®ºå¦‚ä½•éƒ½ä¸å®Œæ•´ã€‚æ›´å¤šå‚æ•°è¯·å‚è€ƒã€ŠPostgreSQL ç®¡ç†å‘˜æŒ‡å—ã€‹ ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ PostgreSQL å®¢æˆ·ç«¯æµ‹è¯•æ¥è‡ªå…¶ä»–æœºå™¨çš„æœåŠ¡å™¨è¿æ¥ã€‚ sudo apt install postgresql-client psql -h postgres.example.com -U postgres -W ç¬”è®° å°†åŸŸåæ›¿æ¢ä¸ºæ‚¨çš„å®é™…æœåŠ¡å™¨åŸŸåã€‚ å‚è€ƒï¼šhttps://ubuntu.com/server/docs/databases-postgresql ","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:3","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"å››ã€ç›‘æ§ é›†ç¾¤ç›‘æ§è½¯ä»¶ Prometheus Prometheus Alertmanager Grafana Telegraf æ‰€éœ€ç«¯å£ Prometheus monitor:9090 Alertmanager monitor:9093 Grafana monitor:3000 Telegraf workload:9273 nagios å®‰è£… https://www.osradar.com/how-to-install-nagios-on-ubuntu-20-04/#:~:text=How%20To%20Install%20Nagios%20on%20Ubuntu%2020.04%201,pre-checks%20are%20okay.%20...%209%20Access%20Web%20Dashboard ","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:4","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"äº”ã€å¤‡ä»½ å¤‡ä»½è½¯ä»¶ï¼š æ–¹æ¡ˆ1ï¼šbacula æ–¹æ¡ˆ2ï¼šNFS+shell script + crontab åœºæ™¯ï¼šnfs server ï¼š10.4.7.141 å…±äº«ç›®å½•ï¼š /mnt/backup â€‹ nfs client : 10.4.7.142 æ–°å»ºç›®å½•/opt/example éœ€è¦ä¸ 10.4.7.141çš„/mnt/backup ç›®å½•åšç»‘å®šã€‚ serverï¼š sudo apt install nfs-kernel-server sudo systemctl start nfs-kernel-server.service é…ç½®ï¼š vim /etc/exports /mnt/backup *(ro,sync,subtree_check) å¦‚æœ/mnt/backup ä¸å­˜åœ¨å…ˆåˆ›å»ºè¯¥ç›®å½•ã€‚ mkdir -p /mnt/backup é…ç½®ç”Ÿæ•ˆ sudo exportfs -a client: å®‰è£…nfså®¢æˆ·ç«¯ sudo apt install nfs-common åˆ›å»ºç›®å½• sudo mkdir /opt/example sudo mount 10.4.7.141:/mnt/backup /opt/example æœ€åéœ€è¦é…ç½®fstab vim /etc/fstab 10.4.7.141:/mnt/backup /opt/example nfs rsize=8192,wsize=8192,timeo=14,intr å¤‡ä»½è„šæœ¬ç¼–å†™ åœºæ™¯ï¼šå®šæ—¶å°†clientä¸­ /home /var/spool/mail /etc /opt ä¸­æ–‡ä»¶å¤‡ä»½åˆ°server çš„/mnt/backup ä¸­ã€‚æ¯å¤©å‡Œæ™¨12ï¼š00 å¤‡ä»½ä¸€æ¬¡ã€‚ backup.sh #!/bin/bash #################################### # # Backup to NFS mount script. # #################################### # What to backup. backup_files=\"/home /var/spool/mail /etc /opt\" # Where to backup to. dest=\"/mnt/backup\" # Create archive filename. day=$(date +%A) hostname=$(hostname -s) archive_file=\"$hostname-$day.tgz\" # Print start status message. echo \"Backing up $backup_files to $dest/$archive_file\" date echo # Backup the files using tar. tar czf $dest/$archive_file $backup_files # Print end status message. echo echo \"Backup finished\" date # Long listing of files in $dest to check file sizes. ls -lh $dest crontab 0 0 * * * bash /usr/local/bin/backup.sh ä»å¤‡ä»½ä¸­æ¢å¤ æŸ¥çœ‹å­˜æ¡£å†…å®¹çš„åˆ—è¡¨ã€‚ä»ç»ˆç«¯æç¤ºè¾“å…¥ï¼š tar -tzvf /mnt/backup/host-Monday.tgz è¦å°†æ–‡ä»¶ä»å­˜æ¡£æ¢å¤åˆ°ä¸åŒçš„ç›®å½•ï¼Œè¯·è¾“å…¥ï¼š tar -xzvf /mnt/backup/host-Monday.tgz -C /tmp etc/hosts tarçš„*-C*é€‰é¡¹å°†æå–çš„æ–‡ä»¶é‡å®šå‘åˆ°æŒ‡å®šçš„ç›®å½•ã€‚ä¸Šé¢çš„ä¾‹å­å°†/etc/hostsæ–‡ä»¶è§£å‹åˆ°/tmp/etc/hosts. tar é‡æ–°åˆ›å»ºå®ƒåŒ…å«çš„ç›®å½•ç»“æ„ã€‚ å¦å¤–ï¼Œè¯·æ³¨æ„å‰å¯¼*â€œ/â€*ä¸åœ¨è¦æ¢å¤çš„æ–‡ä»¶è·¯å¾„ä¹‹å¤–ã€‚ è¦æ¢å¤å­˜æ¡£ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè¯·è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š cd /sudo tar -xzvf /mnt/backup/host-Monday.tgz ç¬”è®° è¿™å°†è¦†ç›–å½“å‰æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚ ","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:5","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"å…­ã€é‚®ä»¶æœåŠ¡ dovecot postfix ","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:6","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"ä¸ƒã€webæœåŠ¡ çŠ¶æ€ç  1xx : Informational - æ”¶åˆ°è¯·æ±‚ï¼Œç»§ç»­å¤„ç† 2xx : æˆåŠŸ- åŠ¨ä½œè¢«æˆåŠŸæ¥æ”¶ã€ç†è§£å’Œæ¥å— 3xx : é‡å®šå‘- å¿…é¡»é‡‡å–è¿›ä¸€æ­¥è¡ŒåŠ¨æ‰èƒ½å®Œæˆè¯·æ±‚ 4xx : å®¢æˆ·ç«¯é”™è¯¯- è¯·æ±‚åŒ…å«é”™è¯¯çš„è¯­æ³•æˆ–æ— æ³•å®Œæˆ 5xxï¼š æœåŠ¡å™¨é”™è¯¯- æœåŠ¡å™¨æœªèƒ½æ»¡è¶³æ˜æ˜¾æœ‰æ•ˆçš„è¯·æ±‚ é™æ€ Web æœåŠ¡å™¨ï¼šæœåŠ¡å™¨å“åº”çš„å†…å®¹å°†æ˜¯æ‰˜ç®¡æ–‡ä»¶â€œåŸæ ·â€ã€‚ åŠ¨æ€ Web æœåŠ¡å™¨ï¼šç”±ä¸€ä¸ª Web æœåŠ¡å™¨å’Œä¸€ä¸ªé¢å¤–çš„è½¯ä»¶ç»„æˆï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨å’Œä¸€ä¸ªæ•°æ®åº“ã€‚ä¾‹å¦‚ï¼Œè¦ç”Ÿæˆæ‚¨åœ¨ Web æµè§ˆå™¨ä¸­çœ‹åˆ°çš„ Web é¡µé¢ï¼Œåº”ç”¨ç¨‹åºæœåŠ¡å™¨å¯èƒ½ä¼šç”¨æ•°æ®åº“ä¸­çš„å†…å®¹å¡«å…… HTML æ¨¡æ¿ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¯´æœåŠ¡å™¨å“åº”çš„å†…å®¹æ˜¯åŠ¨æ€ç”Ÿæˆçš„ã€‚ apache2 Apache æ˜¯ Linux ç³»ç»Ÿä¸Šæœ€å¸¸ç”¨çš„ Web æœåŠ¡å™¨ã€‚Web æœåŠ¡å™¨ç”¨äºä¸ºå®¢æˆ·ç«¯è®¡ç®—æœºè¯·æ±‚çš„ç½‘é¡µæä¾›æœåŠ¡ã€‚å®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨ Firefoxã€Operaã€Chromium æˆ– Internet Explorer ç­‰ Web æµè§ˆå™¨åº”ç”¨ç¨‹åºè¯·æ±‚å’ŒæŸ¥çœ‹ç½‘é¡µ. ç”¨äºä¼ è¾“ç½‘é¡µçš„æœ€å¸¸ç”¨åè®®æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®® (HTTP)ã€‚è¿˜æ”¯æŒè¯¸å¦‚åŸºäºå®‰å…¨å¥—æ¥å­—å±‚çš„è¶…æ–‡æœ¬ä¼ è¾“åè®® (HTTPS) å’Œæ–‡ä»¶ä¼ è¾“åè®® (FTP)ï¼ˆç”¨äºä¸Šä¼ å’Œä¸‹è½½æ–‡ä»¶çš„åè®®ï¼‰ç­‰åè®®ã€‚ Apache Web æœåŠ¡å™¨é€šå¸¸ä¸ MySQL æ•°æ®åº“å¼•æ“ã€è¶…æ–‡æœ¬é¢„å¤„ç†å™¨ (PHP) è„šæœ¬è¯­è¨€å’Œå…¶ä»–æµè¡Œçš„è„šæœ¬è¯­è¨€ï¼ˆå¦‚ Python å’Œ Perlï¼‰ç»“åˆä½¿ç”¨ã€‚è¿™ç§é…ç½®è¢«ç§°ä¸º LAMPï¼ˆLinuxã€Apacheã€MySQL å’Œ Perl/Python/PHPï¼‰ï¼Œå®ƒä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºçš„å¼€å‘å’Œéƒ¨ç½²å½¢æˆäº†ä¸€ä¸ªå¼ºå¤§è€Œå¥å£®çš„å¹³å°ã€‚ å®‰è£… åœ¨ç»ˆç«¯æç¤ºç¬¦ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š sudo apt install apache2 é…ç½® Apache2 æ˜¯é€šè¿‡åœ¨çº¯æ–‡æœ¬é…ç½®æ–‡ä»¶ä¸­æ”¾ç½®æŒ‡ä»¤æ¥é…ç½®çš„ã€‚è¿™äº›æŒ‡ä»¤åœ¨ä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ä¹‹é—´åˆ†å¼€ï¼š apache2.confï¼šApache2 çš„ä¸»è¦é…ç½®æ–‡ä»¶ã€‚åŒ…å«å¯¹ Apache2å…¨å±€çš„è®¾ç½®ã€‚ httpd.confï¼šå†å²ä¸Šä¸»è¦çš„ Apache2 é…ç½®æ–‡ä»¶ï¼Œä»¥ httpd å®ˆæŠ¤è¿›ç¨‹å‘½åã€‚åœ¨å…¶ä»–å‘è¡Œç‰ˆï¼ˆæˆ–æ—§ç‰ˆæœ¬çš„ Ubuntuï¼‰ä¸­ï¼Œè¯¥æ–‡ä»¶å¯èƒ½å­˜åœ¨ã€‚åœ¨ Ubuntu ä¸­ï¼Œæ‰€æœ‰é…ç½®é€‰é¡¹å·²ç§»è‡³apache2.confåŠä»¥ä¸‹å¼•ç”¨ç›®å½•ï¼Œè¯¥æ–‡ä»¶ä¸å†å­˜åœ¨ã€‚ conf-availableï¼šè¯¥ç›®å½•åŒ…å«å¯ç”¨çš„é…ç½®æ–‡ä»¶ã€‚ä»¥å‰åœ¨çš„æ‰€æœ‰æ–‡ä»¶/etc/apache2/conf.déƒ½åº”ç§»åŠ¨åˆ°/etc/apache2/conf-available. conf-enabledï¼šæŒæœ‰ç¬¦å·é“¾æ¥*åˆ°æ–‡ä»¶/etc/apache2/conf-availableã€‚å½“é…ç½®æ–‡ä»¶è¢«ç¬¦å·é“¾æ¥æ—¶ï¼Œå®ƒå°†åœ¨ä¸‹æ¬¡é‡æ–°å¯åŠ¨ apache2 æ—¶å¯ç”¨ã€‚ envvarsï¼šè®¾ç½®Apache2ç¯å¢ƒå˜é‡çš„æ–‡ä»¶ã€‚ mods-availableï¼šæ­¤ç›®å½•åŒ…å«åŠ è½½æ¨¡å—å’Œé…ç½®å®ƒä»¬çš„é…ç½®æ–‡ä»¶ã€‚ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰æ¨¡å—éƒ½æœ‰ç‰¹å®šçš„é…ç½®æ–‡ä»¶ã€‚ mods-enabledï¼šæŒæœ‰ç¬¦å·é“¾æ¥åˆ°æ–‡ä»¶/etc/apache2/mods-availableã€‚å½“æ¨¡å—é…ç½®æ–‡ä»¶è¢«ç¬¦å·é“¾æ¥æ—¶ï¼Œå®ƒå°†åœ¨ä¸‹æ¬¡é‡æ–°å¯åŠ¨ apache2 æ—¶å¯ç”¨ã€‚ ports.confï¼šåŒ…å«ç¡®å®š Apache2 æ­£åœ¨ä¾¦å¬çš„ TCP ç«¯å£çš„æŒ‡ä»¤ã€‚ sites-available: æ­¤ç›®å½•åŒ…å« Apache2è™šæ‹Ÿä¸»æœºçš„é…ç½®æ–‡ä»¶ã€‚è™šæ‹Ÿä¸»æœºå…è®¸ä¸ºå…·æœ‰å•ç‹¬é…ç½®çš„å¤šä¸ªç«™ç‚¹é…ç½® Apache2ã€‚ sites-enabledï¼šä¸mods-enabledä¸€æ ·ï¼Œsites-enabledåŒ…å«æŒ‡å‘/etc/apache2/sites-availableç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚ç±»ä¼¼åœ°ï¼Œå½“sites-available ä¸­çš„é…ç½®æ–‡ä»¶è¢«ç¬¦å·é“¾æ¥æ—¶ï¼Œä¸€æ—¦Apache2 é‡æ–°å¯åŠ¨ï¼Œç”±å®ƒé…ç½®çš„ç«™ç‚¹å°†å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ magicï¼šæ ¹æ®æ–‡ä»¶çš„å‰å‡ ä¸ªå­—èŠ‚ç¡®å®š MIME ç±»å‹çš„è¯´æ˜ã€‚ æ–°å»ºç«™ç‚¹æˆ–è™šæ‹Ÿä¸»æœº sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/mynewsite.conf æœ€ç»ˆè¦è®¿é—®çš„åŸŸåæˆ–IPå’Œ/etc/apache2/sites-available/ä¸­.confæ–‡ä»¶åŒå æ›´æ”¹é»˜è®¤ç›‘å¬ç«¯å£åœ¨ï¼š /etc/apache2/ports.conf æ‚¨å¯èƒ½è¿˜å¸Œæœ›æ‚¨çš„ç«™ç‚¹å“åº”www.mynewsite.comï¼Œå› ä¸ºè®¸å¤šç”¨æˆ·ä¼šè®¤ä¸º www å‰ç¼€æ˜¯åˆé€‚çš„ã€‚ä¸ºæ­¤ä½¿ç”¨ServerAliasæŒ‡ä»¤ã€‚æ‚¨è¿˜å¯ä»¥åœ¨ ServerAlias æŒ‡ä»¤ä¸­ä½¿ç”¨é€šé…ç¬¦ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹é…ç½®å°†ä½¿æ‚¨çš„ç«™ç‚¹å“åº”ä»»ä½•ä»¥.mynewsite.comç»“å°¾çš„åŸŸè¯·æ±‚ã€‚ ServerAlias *.mynewsite.com é»˜è®¤ç«™ç‚¹ä½ç½®ï¼š /var/www/html ç¤ºä¾‹ï¼šå°†80ç«¯å£é‡å®šå‘åˆ°443ç«¯å£ /etc/apache2/sites-available/10.4.7.142.conf \u003cVirtualHost *:443\u003e ServerName 10.4.7.142 DocumentRoot /var/www/10.4.7.142 SSLEngine on SSLCertificateFile /etc/ssl/certs/apache-selfsigned.crt SSLCertificateKeyFile /etc/ssl/private/apache-selfsigned.key \u003c/VirtualHost\u003e \u003cVirtualHost *:80\u003e ServerName 10.4.7.142 Redirect / https://10.4.7.142/ \u003c/VirtualHost\u003e ç«™ç‚¹ä¸»é¡µï¼š /var/www/10.4.7.142/index.html \u003ch1\u003eit worked!\u003c/h1\u003e è‡ªç­¾åè¯ä¹¦éœ€è¦è‡ªè¡Œåˆ›å»ºï¼š /etc/ssl/certs/apache-selfsigned.crt å’Œ/etc/ssl/private/apache-selfsigned.key å¼€å¯åº”ç”¨é…ç½®ï¼š sudo a2ensite l0.4.7.142 sudo systemctl restart apache2.service ç¦ç”¨ç«™ç‚¹é…ç½®ï¼š sudo a2dissite 10.4.7.142 sudo systemctl restart apache2.service å¯åŠ¨sslæ¨¡å— sudo a2enmod ssl æ‚¨å¯ä»¥é€šè¿‡https://your_hostname/url/åœ¨æµè§ˆå™¨åœ°å€æ ä¸­é”®å…¥æ¥è®¿é—®å®‰å…¨æœåŠ¡å™¨é¡µé¢ã€‚ ","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:7","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"å…«ã€å¯†ç ç®¡ç† rootå¯†ç å¿˜è®°é‡ç½® é‡å¯ç³»ç»Ÿ æŒ‰F1è¿›å…¥ã€‚ é‡å¯Ubuntu åœ¨å¯åŠ¨ç•Œé¢é€‰æ‹© ï¼ˆé«˜çº§ï¼‰-ã€‹ é€‰æ‹© recovery mode-ã€‹ é¦–å…ˆé‡å»ºGRUBå¼•å¯¼ï¼Œå¦åˆ™æ”¹å¯†ç å¯èƒ½ä¼šå‡ºç° Authentication token manipulation error é”™è¯¯-ã€‹ å®Œæˆåå›è½¦ï¼Œç»§ç»­é€‰æ‹©rootï¼Œæ¥ä¸‹æ¥æŒ‰ç…§æç¤ºä¿®æ”¹å¯†ç å°±å¯ä»¥ã€‚ passwd root ä¿®æ”¹å®Œæˆåï¼Œé‡å¯æœåŠ¡å™¨ reboot ","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:8","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"ä¹ã€ubuntu20.04 è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ å¯åŠ¨æ—¶ç¦ç”¨GUI sudo systemctl set-default multi-user é‡æ–°å¯åŠ¨æˆ–é€€å‡ºå½“å‰ä¼šè¯ä»¥é€€å‡ºGUI: gnome-session-quit æ¢å¤å›¾å½¢æ¨¡å¼ sudo systemctl set-default graphical ","date":"2023-08-14","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/:0:9","tags":["ubuntu"],"title":"Ubuntuä½¿ç”¨ä¸‹ç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/"},{"categories":["ç½‘ç«™"],"content":"ä¸€ã€éœ€æ±‚ ç”±äºæ–‡ç« ä¸­å›¾ç‰‡æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è¿«åˆ‡éœ€è¦å°†åŸå›¾ç‰‡å‹ç¼©ä½†è´¨é‡åˆä¸ä¼šä¸¢å¤±å¤ªå¤šã€‚googleå‘ç°å¯ä»¥å°†pngã€jpegç­‰æ ¼å¼çš„å›¾ç‰‡è½¬æ¢æˆwebpæ ¼å¼ã€‚ä½“ç§¯ç¼©å°çš„åŒæ—¶åˆä¸å¤±çœŸã€‚ å·¥å…·å®˜ç½‘ ã€‚ æˆ‘çš„ç¯å¢ƒæ˜¯windows,ä¸‹è½½ï¼šlibwebp-1.3.1-windows-x64.zipã€‚è§£å‹åæ·»åŠ ç¯å¢ƒå˜é‡ã€‚ æˆ‘çš„ç”µè„‘-\u003eå±æ€§-\u003eé«˜çº§-\u003eç¯å¢ƒå˜é‡-\u003eç³»ç»Ÿå˜é‡ä¸­æ‰¾åˆ°path-\u003eæ–°å¢cwebpç¨‹åºè·¯å¾„ï¼šC:\\Users\\1\\Downloads\\libwebp-1.3.1-windows-x64\\binã€‚ è¿™æ ·å¯ä»¥åœ¨ä»»ä½•æ–‡ä»¶å¤¹å†…éƒ½å¯ä»¥ä½¿ç”¨cwebpå‘½ä»¤å‹ç¼©å›¾ç‰‡ã€‚ ","date":"2023-08-12","objectID":"/%E6%96%87%E7%AB%A0%E4%B8%AD%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/:0:1","tags":["cwebp"],"title":"æ–‡ç« ä¸­å›¾ç‰‡ä¼˜åŒ–","uri":"/%E6%96%87%E7%AB%A0%E4%B8%AD%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/"},{"categories":["ç½‘ç«™"],"content":"äºŒã€å›¾ç‰‡å‹ç¼©å‘½ä»¤ é¦–å…ˆè¿›å…¥éœ€è¦å‹ç¼©çš„å›¾ç‰‡æ–‡ä»¶å¤¹å†…ï¼Œåœ¨å½“å‰æ–‡ä»¶å¤¹å†…è¾“å…¥cmdå‘½ä»¤æ‰“å¼€dosçª—å£ã€‚ä¾‹å¦‚æˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰pngã€jpgæ ¼å¼çš„å›¾ç‰‡è½¬æ¢æˆwebpæ ¼å¼ã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤: for %f in (*.jpg *.png) do cwebp -q 80 \"%f\" -o \"%~nf.webp\" ç„¶åå°†è½¬æ¢å®Œæˆåçš„å›¾ç‰‡è½¬ç§»åˆ°æˆ‘ä»¬é¡¹ç›®çš„å›¾ç‰‡è·¯å¾„ä¸­ï¼ˆæˆ‘è¿™é‡Œæ˜¯/postimagesï¼‰ï¼Œæœ€ååœ¨æ–‡ç« ä¸­å¼•å…¥å›¾ç‰‡è·¯å¾„å°±å®Œæˆäº†ã€‚ ","date":"2023-08-12","objectID":"/%E6%96%87%E7%AB%A0%E4%B8%AD%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/:0:2","tags":["cwebp"],"title":"æ–‡ç« ä¸­å›¾ç‰‡ä¼˜åŒ–","uri":"/%E6%96%87%E7%AB%A0%E4%B8%AD%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/"},{"categories":["ç½‘ç«™"],"content":"ä¸€ã€ä½¿ç”¨zeaburå¹³å°æ­å»ºumami zeaburå®˜æ–¹éƒ¨ç½²è¯´æ˜ æ ¹æ®å®˜æ–¹è¯´æ˜ï¼Œé¦–å…ˆéœ€è¦éƒ¨ç½²PostageSQLæ•°æ®åº“ï¼Œç”¨æ¥å­˜å‚¨umamiçš„æ•°æ®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œéƒ¨ç½²å¥½æ•°æ®åº“åéœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªåç§°ä¸ºumamiçš„æ•°æ®åº“ã€‚ç”±äºå¹³å°æ²¡æœ‰ç”¨äºè¿æ¥æ•°æ®åº“çš„ç»ˆç«¯ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä½¿ç”¨DBeaverè¿æ¥æ•°æ®åº“ã€‚ ","date":"2023-08-12","objectID":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/:1:0","tags":["umami"],"title":"ç½‘ç«™è®¿å®¢ç»Ÿè®¡æ­å»º","uri":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/"},{"categories":["ç½‘ç«™"],"content":"1.è¿æ¥æ•°æ®åº“ æŸ¥çœ‹PostageSQLæ•°æ®åº“ä¸­è¿æ¥ä¿¡æ¯ åˆ›å»ºè¿æ¥ï¼Œç¬¬ä¸€æ¬¡è¿æ¥éœ€è¦ä¸‹è½½é©±åŠ¨ã€‚ ","date":"2023-08-12","objectID":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/:1:1","tags":["umami"],"title":"ç½‘ç«™è®¿å®¢ç»Ÿè®¡æ­å»º","uri":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/"},{"categories":["ç½‘ç«™"],"content":"2.åˆ›å»ºæ•°æ®åº“ ","date":"2023-08-12","objectID":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/:1:2","tags":["umami"],"title":"ç½‘ç«™è®¿å®¢ç»Ÿè®¡æ­å»º","uri":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/"},{"categories":["ç½‘ç«™"],"content":"äºŒã€åˆ›å»ºumamié¡¹ç›® è¿™é‡Œå¯ä»¥æ ¹æ®å¹³å°æ–‡æ¡£æ¥åˆ›å»ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåˆ›å»ºå®Œæ¯•åï¼Œéœ€è¦å°†åˆšåˆšåˆ›å»ºçš„PostageSQLæ•°æ®åº“çš„ç”¨æˆ·åã€å¯†ç ã€ç«¯å£ä¿¡æ¯åº”ç”¨åˆ°umamié¡¹ç›®ä¸­ã€‚æœ€åé‡å¯ç­‰å¾…éƒ¨ç½²å®Œæ¯•ã€‚ ","date":"2023-08-12","objectID":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/:2:0","tags":["umami"],"title":"ç½‘ç«™è®¿å®¢ç»Ÿè®¡æ­å»º","uri":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/"},{"categories":["ç½‘ç«™"],"content":"ä¸‰ã€è‡ªå®šä¹‰åŸŸå å°†è‡ªå®šä¹‰çš„åŸŸåï¼ˆumami.haipengv.comï¼‰æŒ‡å‘åå¹³å°é»˜è®¤åŸŸå(æˆ‘è¿™é‡Œæ˜¯myumami.zeabur.app),æ³¨æ„å‹¾é€‰Redirect to another domainé€‰é¡¹ã€‚ ","date":"2023-08-12","objectID":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/:3:0","tags":["umami"],"title":"ç½‘ç«™è®¿å®¢ç»Ÿè®¡æ­å»º","uri":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/"},{"categories":["ç½‘ç«™"],"content":"å››ã€åŸŸåæ˜ å°„ æœ€åéœ€è¦åœ¨cloudflareä¸­æ–°å¢ä¸€æ¡Aè®°å½•ï¼Œå°†umami.haipengv.comå’Œipç»‘å®šã€‚è¿™é‡Œçš„IPå¯ä»¥é€šè¿‡pingå¹³å°é»˜è®¤åŸŸåï¼ˆmyumami.zeabur.appï¼‰æ¥å¾—åˆ°ã€‚ DNS-\u003eæ·»åŠ è®°å½•-\u003eç±»å‹é€‰æ‹©â€™Aâ€™ã€‚ æœ€åå¯ä»¥é€šè¿‡è®¿é—®æˆ‘ä»¬è‡ªå®šä¹‰çš„åŸŸå ï¼Œæ¥æŸ¥çœ‹è®¿å®¢è®°å½•äº†ã€‚ umamié»˜è®¤çš„ç”¨æˆ·åæ˜¯ï¼šadmin,å¯†ç æ˜¯ï¼šumamiã€‚ å®˜æ–¹é¡¹ç›®åœ°å€ ","date":"2023-08-12","objectID":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/:4:0","tags":["umami"],"title":"ç½‘ç«™è®¿å®¢ç»Ÿè®¡æ­å»º","uri":"/%E7%BD%91%E7%AB%99%E8%AE%BF%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%90%AD%E5%BB%BA/"},{"categories":["å·¥å…·"],"content":"shellæ‰§è¡Œè„šæœ¬æŠ¥é”™å¦‚ä¸‹(ç¯å¢ƒcentos7) [: ==: unexpected operator è„šæœ¬å¦‚ä¸‹ï¼š #!/bin/sh if [ $1 == \"hello\" ]; then echo \"Well done!\" fi è¿™æ˜¯å› ä¸º shell è„šæœ¬å¼€å¤´ä½¿ç”¨ #!/bin/shï¼Œè€Œä¸æ˜¯ #!/bin/bashã€‚è€Œ /bin/sh ä½¿ç”¨çš„æ˜¯ dashï¼Œdash ä¸­é»˜è®¤çš„åˆ¤æ–­è¯­å¥æ˜¯ =ï¼Œè€Œä¸æ˜¯ bash ä½¿ç”¨çš„ ==ã€‚ å°†#!/bin/shæ”¹ä¸º#!/bin/bashåï¼Œæ‰§è¡ŒæˆåŠŸã€‚ ","date":"2023-08-04","objectID":"/crontab%E6%89%A7%E8%A1%8Cshell%E8%84%9A%E6%9C%AC%E6%8A%A5%E9%94%99/:0:0","tags":["crontab"],"title":"Crontabæ‰§è¡Œshellè„šæœ¬æŠ¥é”™","uri":"/crontab%E6%89%A7%E8%A1%8Cshell%E8%84%9A%E6%9C%AC%E6%8A%A5%E9%94%99/"},{"categories":["å·¥å…·"],"content":"Linux Crontabå®šæ—¶æ‰§è¡Œè„šæœ¬å‡ºé”™ï¼Œä½†æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬æ­£å¸¸åŸå› åŠè§£å†³æ–¹æ¡ˆ æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬å¯ä»¥æ‰§è¡ŒæˆåŠŸï¼Œä½†ç”¨å®šæ—¶ä»»åŠ¡åå´æ‰§è¡Œä¸æˆåŠŸã€‚æŸ¥çœ‹æ—¥å¿—tail -f /var/log/cron æ˜¾ç¤ºæ‰§è¡ŒæˆåŠŸäº†ã€‚ 2023-07-31T16:06:01.624003+08:00 localhost CROND[7853]: (root) CMD (/root/pidcheck.sh) åŸå› å°±åœ¨äºï¼Œcrontabæ²¡æœ‰å»è¯»ç¯å¢ƒå˜é‡ï¼Œéœ€è¦å†è„šæœ¬ä¸­æ‰‹åŠ¨å¼•å…¥ç¯å¢ƒå˜é‡ã€‚ #ï¼bin/bash source /etc/profile source ~/.bash_profile ... å†æ‰§è¡Œæ—¶ï¼Œé—®é¢˜è§£å†³ã€‚ åŸæ¥å°±æ˜¯å› ä¸ºcrontabåœ¨æ‰§è¡Œè„šæœ¬æ—¶æ²¡æœ‰è¯»å–ç¯å¢ƒå˜é‡ï¼Œå¯¼è‡´æ‰§è¡Œè„šæœ¬å¤±è´¥ã€‚ ","date":"2023-07-31","objectID":"/crontab%E8%B8%A9%E5%9D%91%E8%AE%B0/:1:0","tags":["crontab"],"title":"Crontabè¸©å‘è®°","uri":"/crontab%E8%B8%A9%E5%9D%91%E8%AE%B0/"},{"categories":["secretpost"],"content":"Linuxå‘½ä»¤è‹±æ–‡å…¨ç§° cat: Concatenate ä¸²è” uname: Unix name ç³»ç»Ÿåç§° df: Disk free ç©ºä½™ç¡¬ç›˜ du: Disk usage ç¡¬ç›˜ä½¿ç”¨ç‡ chown: Change owner æ”¹å˜æ‰€æœ‰è€… chgrp: Change group æ”¹å˜ç”¨æˆ·ç»„ psï¼šProcess Status è¿›ç¨‹çŠ¶æ€ tarï¼šTape archive è§£å‹æ–‡ä»¶ chmod: Change mode æ”¹å˜æ¨¡å¼ umount: Unmount å¸è½½ lddï¼šList dynamic dependencies åˆ—å‡ºåŠ¨æ€ç›¸ä¾ insmodï¼šInstall module å®‰è£…æ¨¡å— rmmodï¼šRemove module åˆ é™¤æ¨¡å— lsmodï¼šList module åˆ—è¡¨æ¨¡å— alias :Create your own name for a command bash :GNU Bourne-Again Shell linuxå†…æ ¸ grep:global regular expression print httpd :Start Apache ipcalc :Calculate IP information for a host ping :Send ICMP ECHO_Request to network hosts reboot: Restart your computer sudo:Superuser do /bin = BINaries /dev = DEVices /etc = ETCetera /lib = LIBrary /proc = PROCesses /sbin = Superuser BINaries /tmp = TeMPorary /usr = Unix Shared Resources /var = VARiable ? FIFO = First In, First Out GRUB = GRand Unified Bootloader IFS = Internal Field Seperators LILO = LInux LOader PS = Prompt String Perl = \"Pratical Extraction and Report Language\" = \"Pathologically Eclectic Rubbish Lister\" Tcl = Tool Command Language Tk = ToolKit VT = Video Terminal YaST = Yet Another Setup Tool apt = Advanced Packaging Tool ar = archiver as = assembler bash = Bourne Again SHell bc = Basic (Better) Calculator bg = BackGround cal = CALendar cat = CATenate cd = Change Directory chgrp = CHange GRouP chmod = CHange MODe chown = CHange OWNer chsh = CHange SHell cmp = compare cobra = Common Object Request Broker Architecture comm = common cp = CoPy cpio = CoPy In and Out cpp = C Pre Processor cups = Common Unix Printing System cvs = Current Version System dc = Desk Calculator dd = Disk Dump df = Disk Free diff = DIFFerence dmesg = diagnostic message du = Disk Usage ed = editor egrep = Extended GREP elf = Extensible Linking Format elm = ELectronic Mail emacs = Editor MACroS eval = EVALuate ex = EXtended exec = EXECute fd = file descriptors fg = ForeGround fgrep = Fixed GREP fmt = format fsck = File System ChecK fstab = FileSystem TABle fvwm = F*** Virtual Window Manager gawk = GNU AWK gpg = GNU Privacy Guard groff = GNU troff hal = Hardware Abstraction Layer joe = Joe's Own Editor ksh = Korn SHell lame = Lame Ain't an MP3 Encoder lex = LEXical analyser lisp = LISt Processing = Lots of Irritating Superfluous Parentheses ln = LiNk lpr = Line PRint ls = list lsof = LiSt Open Files m4 = Macro processor Version 4 man = MANual pages mawk = Mike Brennan's AWK mc = Midnight Commander mkfs = MaKe FileSystem mknod = MaKe NODe motd = Message of The Day mozilla = MOsaic GodZILLa mtab = Mount TABle mv = MoVe nano = Nano's ANOther editor nawk = New AWK nl = Number of Lines nm = names nohup = No HangUP nroff = New ROFF od = Octal Dump passwd = PASSWorD pg = pager pico = PIne's message COmposition editor pine = \"Program for Internet News \u0026 Email\" = \"Pine is not Elm\" ping = Packet InterNet Grouper pirntcap = PRINTer CAPability popd = POP Directory pr = pre printf = PRINT Formatted ps = Processes Status pty = pseudo tty pushd = PUSH Directory pwd = Print Working Directory rc = runcom = run command, shell rev = REVerse rm = ReMove rn = Read News roff = RunOFF rpm = RPM Package Manager = RedHat Package Manager rsh, rlogin, = Remote rxvt = ouR XVT sed = Stream EDitor seq = SEQuence shar = SHell ARchive slrn = S-Lang rn ssh = Secure SHell ssl = Secure Sockets Layer stty = Set TTY su = Substitute User svn = SubVersioN tar = Tape ARchive tcsh = TENEX C shell telnet = TEminaL over Network termcap = terminal capability terminfo = terminal information tr = traslate troff = Typesetter new ROFF tsort = Topological SORT tty = TeleTypewriter twm = Tom's Window Manager tz = TimeZone udev = Userspace DEV ulimit = User's LIMIT umask = User's MASK uniq = UNIQue vi = VIsual = Very Inconvenient vim = Vi IMproved wall = write all wc = Word Count wine = WINE Is Not an Emulator xargs = eXtended ARGuments xdm = X Display Manager xlfd = X Logical Font Description xmms = X Multimedia System xrdb = X Resources DataBase xwd = X Window Dump yacc = yet another compiler compiler ","date":"2023-07-22","objectID":"/secret/:0:1","tags":["secret"],"title":"Secret","uri":"/secret/"},{"categories":null,"content":"æµ‹è¯•åŠŸèƒ½ Peng \"One World, One Dream.\" ","date":"2023-07-22","objectID":"/friends/:0:1","tags":null,"title":"å‹é“¾å¢™","uri":"/friends/"},{"categories":null,"content":"blogç¾åŒ– é›¨ä¸´Lewis \"ä¸æƒ³å½“å†™æ‰‹çš„ç å†œä¸æ˜¯å¥½å’¸é±¼_(xĞ·ã€âˆ )_\" ","date":"2023-07-22","objectID":"/friends/:0:2","tags":null,"title":"å‹é“¾å¢™","uri":"/friends/"},{"categories":null,"content":"æ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢ï¼Œè¿™é‡Œä¸»è¦åˆ†äº«æˆ‘çš„ä¸€äº›ç»éªŒã€æƒ³æ³•å’Œä½œå“ã€‚ ä½ å¯ä»¥é€šè¿‡ [RSS ] çš„æ–¹å¼æŒç»­å…³æ³¨æˆ‘çš„åšå®¢æ›´æ–°ã€‚ ","date":"2023-07-21","objectID":"/about/:0:0","tags":null,"title":"About","uri":"/about/"},{"categories":["å·¥å…·"],"content":"nvmç®¡ç†node.js ","date":"2023-05-11","objectID":"/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/:1:0","tags":["nvm"],"title":"å‰ç«¯æ¡†æ¶","uri":"/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"},{"categories":["å·¥å…·"],"content":"ç¯å¢ƒï¼š centos 7.9 ","date":"2023-05-11","objectID":"/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/:1:1","tags":["nvm"],"title":"å‰ç«¯æ¡†æ¶","uri":"/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"},{"categories":["å·¥å…·"],"content":"nvm å®‰è£… æ–°åˆ›å»ºä¸€ä¸ªåä¸ºmyappçš„æ¡¥æ¥ç½‘å¡ cd /root wget https://github.com/nvm-sh/nvm/archive/refs/tags/v0.39.3.tar.gz mkdir -p /root/.nvm tar -zxvf nvm-0.39.3.tar.gz -C /root/.nvm é…ç½®ç¯å¢ƒ vim ~/.bashrc åœ¨~/.bashrcçš„æœ«å°¾ï¼Œæ·»åŠ å¦‚ä¸‹è¯­å¥ï¼š export NVM_DIR=\"$HOME/.nvm/nvm-0.39.3\" [ -s \"$NVM_DIR/nvm.sh\" ] \u0026\u0026 \\. \"$NVM_DIR/nvm.sh\" # This loads nvm [ -s \"$NVM_DIR/bash_completion\" ] \u0026\u0026 \\. \"$NVM_DIR/bash_completion\" # This loads nvm bash_completion å¯ç”¨ç¯å¢ƒ source ~/.bashrc å®‰è£…node.jsï¼Œæµ‹è¯• nvm install 8.16.0 åˆ‡æ¢ç‰ˆæœ¬ nvm use 8.16.0 æŸ¥çœ‹å·²å®‰è£…çš„ç‰ˆæœ¬ nvm ls ","date":"2023-05-11","objectID":"/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/:1:2","tags":["nvm"],"title":"å‰ç«¯æ¡†æ¶","uri":"/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"},{"categories":["å·¥å…·"],"content":"dockeråˆ›å»ºä¸“æœ‰ç½‘å¡ ","date":"2023-02-22","objectID":"/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/:1:0","tags":["docker"],"title":"dockeråˆ›å»ºä¸“æœ‰ç½‘å¡","uri":"/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/"},{"categories":["å·¥å…·"],"content":"éœ€æ±‚ï¼š tomcatå®¹å™¨éœ€è¦é€šè¿‡jdbcæ¨¡å—è¿æ¥æ•°æ®åº“mysqlï¼Œé…ç½®æ–‡ä»¶å¦‚æœæŒ‡å®šIPåœ°å€ï¼Œmysqlå®¹å™¨ä¸€æ—¦æŸåï¼ŒIPåœ°å€å°±ä¼šæ›´æ”¹ï¼Œéœ€è¦å°†mysqlå®¹å™¨çš„IPå›ºå®šã€‚è¿™æ ·å°±ä¸ç”¨æ¯æ¬¡æ›´æ”¹tomcaté…ç½®æ–‡ä»¶äº†ã€‚ ","date":"2023-02-22","objectID":"/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/:1:1","tags":["docker"],"title":"dockeråˆ›å»ºä¸“æœ‰ç½‘å¡","uri":"/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/"},{"categories":["å·¥å…·"],"content":"ä¸“æœ‰ç½‘å¡åˆ›å»º æ–°åˆ›å»ºä¸€ä¸ªåä¸ºmyappçš„æ¡¥æ¥ç½‘å¡ docker network create myapp ä½¿ç”¨--network-aliaså‚æ•°ç»™ç½‘å¡èµ·åˆ«åï¼Œå¯åŠ¨MySQLå®¹å™¨ã€‚ docker run -d \\ --network myapp --network-alias mysql1 \\ --name=mysql57-test \\ -p 33306:3306 \\ -v /tmpdisk/test2:/var/lib/mysql \\ -v /etc/localtime:/etc/localtime:ro \\ -e MYSQL_ROOT_PASSWORD=123456 \\ -e MYSQL_DATABASE=todos \\ mysql:5.7 æ³¨æ„ï¼šè¿™é‡Œåˆ›å»ºçš„mysqlå®¹å™¨ä½¿ç”¨myapp ç½‘å¡ï¼Œåˆ†é…çš„IPè‡ªåŠ¨å’Œmysql1 ç½‘å¡åˆ«åç»‘å®šï¼Œåé¢åˆ›å»ºçš„å®¹å™¨åªè¦ä½¿ç”¨åŒä¸€ä¸ªç½‘å¡åˆ›å»ºçš„ï¼Œéƒ½å¯ä»¥å’Œmysqlå®¹å™¨äº’é€šã€‚ å¦‚ä½•è¯æ˜å‘¢ï¼Ÿ ä½¿ç”¨nicolaka/netshooté•œåƒåˆ›å»ºä¸€ä¸ªæµ‹è¯•å®¹å™¨ docker run -it --name test --network myapp nicolaka/netshoot å¯ä»¥ç›´æ¥å’Œmysqlå®¹å™¨é€šä¿¡ 62337a7ad7f1# ping mysql1 PING mysql1 (172.20.0.5) 56(84) bytes of data. 64 bytes from mysql57-test.myapp (172.20.0.5): icmp_seq=1 ttl=64 time=0.042 ms 64 bytes from mysql57-test.myapp (172.20.0.5): icmp_seq=2 ttl=64 time=0.020 ms æŸ¥çœ‹è§£æï¼Œå‘ç°ä¸€æ¡Aè®°å½•ã€‚æ­£æ˜¯è¿™æ¡è®°å½•å°†myappç½‘å¡è‡ªåŠ¨åˆ†é…çš„ipå’Œç½‘å¡åˆ«åmysql1ç»‘å®šã€‚ 62337a7ad7f1# dig mysql1 ; \u003c\u003c\u003e\u003e DiG 9.18.11 \u003c\u003c\u003e\u003e mysql1 ;; global options: +cmd ;; Got answer: ;; -\u003e\u003eHEADER\u003c\u003c- opcode: QUERY, status: NOERROR, id: 10768 ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0 ;; QUESTION SECTION: ;mysql1. IN A ;; ANSWER SECTION: mysql1. 600 IN A 172.20.0.5 ;; Query time: 0 msec ;; SERVER: 127.0.0.11#53(127.0.0.11) (UDP) ;; WHEN: Wed Feb 22 01:36:59 UTC 2023 ;; MSG SIZE rcvd: 46 åˆ›å»ºtomcatå®¹å™¨ docker run -itd \\ -p 28080:8080 \\ --restart=always \\ --name tomcat-test \\ --network myapp \\ -v /tmpdisk/tomcat-test2/webapps:/usr/local/tomcat/webapps \\ -v /etc/localtime:/etc/localtime:ro \\ tomcat:9.0.56 æ›´æ”¹jdbcè¿æ¥é…ç½®ï¼Œå°†localhostæ”¹æˆmysql1 æ—§ï¼š jdbc:mysql://localhost:3306/jt_ow_dbsync_src?useUnicode=true\u0026amp;characterEncoding=UTF-8\u0026amp;useSSL=false æ–°ï¼š jdbc:mysql://mysql1:3306/jt_ow_dbsync_src?useUnicode=true\u0026amp;characterEncoding=UTF-8\u0026amp;useSSL=false ","date":"2023-02-22","objectID":"/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/:1:2","tags":["docker"],"title":"dockeråˆ›å»ºä¸“æœ‰ç½‘å¡","uri":"/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/"},{"categories":["å·¥å…·"],"content":"æµ‹è¯• æµ‹è¯•å†…å®¹ï¼šmysqlå®¹å™¨IPæ›´æ”¹åï¼Œä¼šä¸ä¼šå½±å“ä¸šåŠ¡è®¿é—®ã€‚ **æŸ¥çœ‹å½“å‰mysql å®¹å™¨IP** [root@HZ ~]$ docker inspect mysql57-test | grep -i ipaddress \"SecondaryIPAddresses\": null, \"IPAddress\": \"\", \"IPAddress\": \"172.20.0.5\", åˆ é™¤å®¹å™¨ docker rm -f mysql57-test é‡æ–°åˆ›å»ºæ–°å®¹å™¨ docker run -itd --name test2 --network myapp busybox å†åˆ›å»ºmysqlå®¹å™¨ docker run -d \\ --network myapp --network-alias mysql1 \\ --name=mysql57-test \\ -p 33306:3306 \\ -v /tmpdisk/test2:/var/lib/mysql \\ -v /etc/localtime:/etc/localtime:ro \\ -e MYSQL_ROOT_PASSWORD=123456 \\ -e MYSQL_DATABASE=todos \\ mysql:5.7 å†æ¬¡æŸ¥çœ‹mysqlå®¹å™¨IP [root@HZ ~]$ docker inspect mysql57-test | grep -i ipaddress \"SecondaryIPAddresses\": null, \"IPAddress\": \"\", \"IPAddress\": \"172.20.0.6\", è®¿é—®ä¸šåŠ¡ï¼Œå‘ç°ä¸šåŠ¡è®¿é—®æ­£å¸¸ã€‚æ‰€ä»¥å®Œç¾å®ç°äº†mysqlå®¹å™¨å†…éƒ¨IPå˜æ›´åä¸ä¼šå½±å“ä¸šåŠ¡ã€‚ ","date":"2023-02-22","objectID":"/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/:1:3","tags":["docker"],"title":"dockeråˆ›å»ºä¸“æœ‰ç½‘å¡","uri":"/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/"},{"categories":["å·¥å…·"],"content":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤ ","date":"2023-02-21","objectID":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/:1:0","tags":["docker"],"title":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤","uri":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"On RHEL-based systems dnf install bash-completion -y yum install bash-completion -y ","date":"2023-02-21","objectID":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/:1:1","tags":["docker"],"title":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤","uri":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"On Debian-based systems apt-get install bash-completion -y ","date":"2023-02-21","objectID":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/:1:2","tags":["docker"],"title":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤","uri":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"ä¸‹è½½å‘½ä»¤è¡¥å…¨æ–‡ä»¶ curl https://raw.githubusercontent.com/docker/docker-ce/master/components/cli/contrib/completion/bash/docker -o /etc/bash_completion.d/docker.sh ","date":"2023-02-21","objectID":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/:1:3","tags":["docker"],"title":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤","uri":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"å¦‚æœä¸‹è½½å¤±è´¥æœ€åé™„ä¸Šæ–‡ä»¶å†…å®¹ã€‚ ","date":"2023-02-21","objectID":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/:1:4","tags":["docker"],"title":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤","uri":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"é‡æ–°ç™»å½•ç»ˆç«¯ ","date":"2023-02-21","objectID":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/:1:5","tags":["docker"],"title":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤","uri":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"æµ‹è¯•å‘½ä»¤è¡¥å…¨ docker p ä¸¤æ¬¡tab ,å‘½ä»¤è‡ªåŠ¨è¡¥å…¨ pause plugin port ps pull push ","date":"2023-02-21","objectID":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/:1:6","tags":["docker"],"title":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤","uri":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"æ•´ç† å…ˆå®‰è£…è¡¥å…¨è½¯ä»¶bash-completionï¼Œç„¶ååœ¨/etc/bash_completion.dç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œå†™å…¥è¡¥å…¨å‘½ä»¤ï¼Œé‡æ–°ç™»å½•ç»ˆç«¯ï¼Œè‡ªåŠ¨ç”Ÿæ•ˆã€‚ docker.shæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š #!/usr/bin/env bash # shellcheck disable=SC2016,SC2119,SC2155,SC2206,SC2207,SC2254 # # Shellcheck ignore list: # - SC2016: Expressions don't expand in single quotes, use double quotes for that. # - SC2119: Use foo \"$@\" if function's $1 should mean script's $1. # - SC2155: Declare and assign separately to avoid masking return values. # - SC2206: Quote to prevent word splitting, or split robustly with mapfile or read -a. # - SC2207: Prefer mapfile or read -a to split command output (or quote to avoid splitting). # - SC2254: Quote expansions in case patterns to match literally rather than as a glob. # # You can find more details for each warning at the following page: # https://github.com/koalaman/shellcheck/wiki/\u003cSCXXXX\u003e # # bash completion file for core docker commands # # This script provides completion of: # - commands and their options # - container ids and names # - image repos and tags # - filepaths # # To enable the completions either: # - place this file in /etc/bash_completion.d # or # - copy this file to e.g. ~/.docker-completion.sh and add the line # below to your .bashrc after bash completion features are loaded # . ~/.docker-completion.sh # # Configuration: # # For several commands, the amount of completions can be configured by # setting environment variables. # # DOCKER_COMPLETION_SHOW_CONFIG_IDS # DOCKER_COMPLETION_SHOW_CONTAINER_IDS # DOCKER_COMPLETION_SHOW_NETWORK_IDS # DOCKER_COMPLETION_SHOW_NODE_IDS # DOCKER_COMPLETION_SHOW_PLUGIN_IDS # DOCKER_COMPLETION_SHOW_SECRET_IDS # DOCKER_COMPLETION_SHOW_SERVICE_IDS # \"no\" - Show names only (default) # \"yes\" - Show names and ids # # You can tailor completion for the \"events\", \"history\", \"inspect\", \"run\", # \"rmi\" and \"save\" commands by settings the following environment # variables: # # DOCKER_COMPLETION_SHOW_IMAGE_IDS # \"none\" - Show names only (default) # \"non-intermediate\" - Show names and ids, but omit intermediate image IDs # \"all\" - Show names and ids, including intermediate image IDs # # DOCKER_COMPLETION_SHOW_TAGS # \"yes\" - include tags in completion options (default) # \"no\" - don't include tags in completion options # # Note: # Currently, the completions will not work if the docker daemon is not # bound to the default communication port/socket # If the docker daemon is using a unix socket for communication your user # must have access to the socket for the completions to function correctly # # Note for developers: # Please arrange options sorted alphabetically by long name with the short # options immediately following their corresponding long form. # This order should be applied to lists, alternatives and code blocks. __docker_previous_extglob_setting=$(shopt -p extglob) shopt -s extglob __docker_q() { docker ${host:+--host \"$host\"} ${config:+--config \"$config\"} ${context:+--context \"$context\"} 2\u003e/dev/null \"$@\" } # __docker_configs returns a list of configs. Additional options to # `docker config ls` may be specified in order to filter the list, e.g. # `__docker_configs --filter label=stage=production`. # By default, only names are returned. # Set DOCKER_COMPLETION_SHOW_CONFIG_IDS=yes to also complete IDs. # An optional first option `--id|--name` may be used to limit the # output to the IDs or names of matching items. This setting takes # precedence over the environment setting. __docker_configs() { local format if [ \"$1\" = \"--id\" ] ; then format='{{.ID}}' shift elif [ \"$1\" = \"--name\" ] ; then format='{{.Name}}' shift elif [ \"$DOCKER_COMPLETION_SHOW_CONFIG_IDS\" = yes ] ; then format='{{.ID}} {{.Name}}' else format='{{.Name}}' fi __docker_q config ls --format \"$format\" \"$@\" } # __docker_complete_configs applies completion of configs based on the current value # of `$cur` or the value of the optional first option `--cur`, if given. __docker_complete_configs() { local current=\"$cur\" if [ \"$1\" = \"--cur\" ] ; then current=\"$2\" shift 2 fi COMPREPLY=( $(compgen -W \"$(__dock","date":"2023-02-21","objectID":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/:1:7","tags":["docker"],"title":"dockerä½¿ç”¨tabè‡ªåŠ¨è¡¥å…¨å‘½ä»¤","uri":"/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨ ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:0","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"é¡¹ç›®åœ°å€ https://github.com/huashengdun/webssh/releases/tag/v1.6.1 åœ¨è¿™é‡Œæˆ‘é€‰åœ¨ä¸‹è½½çš„ç‰ˆæœ¬æ˜¯ï¼šv1.6.1 ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:1","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"å¼€å§‹å®‰è£… ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:2","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"åˆ›å»ºè§£å‹ç›®å½• mkdir -p /tmpdisk/webssh ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:3","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"è§£å‹ç¦»çº¿websshå®‰è£…åŒ… cd /tmpdisk/webssh unzip webssh-1.6.1.zip . ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:4","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"è¿›å…¥è§£å‹ç›®å½• cd webssh-1.6.1 ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:5","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨docker-composeä¸€é”®å¯åŠ¨ docker-compose up ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:6","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"å®‰è£…docker-compose wget https://github.com/docker/compose/releases/download/1.24.0/docker-compose-Linux-x86_64 ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:7","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"èµ‹äºˆæ–‡ä»¶æ‰§è¡Œæƒé™ chmod +x docker-compose-Linux-x86_64 ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:8","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"æ‹·è´åˆ°ç›®å½• cp docker-compose-Linux-x86_64 /usr/local/bin/docker-compose ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:9","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"æ·»åŠ è½¯é“¾æ¥ ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:10","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"æœ€åæŸ¥çœ‹ç‰ˆæœ¬ docker-compose --version ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:11","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["å·¥å…·"],"content":"websshä½¿ç”¨ ä½¿ç”¨docker-compose å¯åŠ¨åé»˜è®¤å°†å®¹å™¨å†…çš„8888 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœº8888.é€šè¿‡è®¿é—®å®¿ä¸»æœºçš„8888ç«¯å£ï¼Œæ‰“å¼€websshé¡µé¢ï¼Œç™»å½•LinuxæœåŠ¡å™¨ã€‚ ","date":"2023-02-20","objectID":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:12","tags":["webssh"],"title":"ä½¿ç”¨æµè§ˆå™¨ç™»å½•linuxæœåŠ¡å™¨","uri":"/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["linux"],"content":"ç¦»çº¿å®‰è£… [root@HZ ~]$ uname -a Linux HZ 3.10.0-514.el7.centos.x86_64 #1 SMP Fri Jan 13 15:16:57 CST 2017 x86_64 x86_64 x86_64 GNU/Linux CentOS Linux release 7.3.1611 (Core) ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:0","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"ç¦»çº¿åŒ…ä¸‹è½½ https://download.docker.com/linux/static/stable/x86_64/ åœ¨è¿™é‡Œæˆ‘é€‰åœ¨ä¸‹è½½çš„ç‰ˆæœ¬æ˜¯ï¼šdocker-20.10.9.tgz ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:1","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"å¼€å§‹å®‰è£… åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•ï¼Œå¦‚æœä¸åˆ›å»ºé»˜è®¤æ˜¯/var/lib/docker mkdir -p /tmpdisk/docker ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:2","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"åˆ›å»ºè§£å‹ç›®å½• mkdir -p /tmpdisk/docker20.10.9 ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:3","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"è§£å‹ç¦»çº¿dockerå®‰è£…åŒ… tar -zxvf docker-20.10.9.tgz -C /tmpdisk/docker20.10.9 ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:4","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"è¿›å…¥è§£å‹ç›®å½• cd /tmpdisk/docker20.10.9/docker/bin cp * /usr/bin ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:5","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"åˆ›å»ºå¼€æœºè‡ªå¯æ–‡ä»¶ vi /etc/systemd/system/docker.service ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:6","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"è¾“å…¥ä»¥ä¸‹å†…å®¹ [Unit] Description=Docker Application Container Engine Documentation=https://docs.docker.com After=network-online.target firewalld.service Wants=network-online.target [Service] Type=notify ExecStart=/usr/bin/dockerd --selinux-enabled=false --insecure-registry=127.0.0.1 ExecReload=/bin/kill -s HUP $MAINPID LimitNOFILE=infinity LimitNPROC=infinity LimitCORE=infinity TimeoutStartSec=0 Delegate=yes KillMode=process Restart=on-failure StartLimitBurst=3 StartLimitInterval=60s [Install] WantedBy=multi-user.target ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:7","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"èµ‹äºˆæ–‡ä»¶æ‰§è¡Œæƒé™ chmod +x /etc/systemd/system/docker.service ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:8","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"é‡æ–°åŠ è½½é…ç½® systemctl daemon-reload ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:9","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"è®¾ä¸ºå¼€æœºå¯åŠ¨ systemctl enable docker.service ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:10","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"å¯åŠ¨docker systemctl start docker.service ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:11","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"æ›´æ”¹dockeré»˜è®¤å­˜å‚¨è·¯å¾„ï¼Œæ–°å»ºæ–‡ä»¶daemon.json vi /etc/docker/daemon.json { \"storage-driver\": \"vfs\", \"graph\": \"/tmpdisk/docker\" } ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:12","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"èµ‹äºˆæƒé™ chmod 755 /etc/docker/daemon.json é‡å¯dockeræœåŠ¡,å¦‚æœå¤šæ¬¡å¯åŠ¨å¤±è´¥ï¼Œæ£€æŸ¥daemon.jsoné…ç½®æ–‡ä»¶æ˜¯å¦æœ‰å¤šä½™å­—ç¬¦ã€‚å¯ä»¥ä½¿ç”¨systemctl reset-failed docker.serviceé‡ç½®å¤±è´¥ã€‚ ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:1:13","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"é”™è¯¯æ’æŸ¥ ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:2:0","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"å®‰è£…mysql57å®¹å™¨ docker pull mysql:5.7 docker run -itd --name mysql2 --restart=always -p 13306:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /etc/localtime:/etc/localtime:ro -v /tmpdisk/mysqldata:/var/lib/mysql mysql:5.7 ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:2:1","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"å¯åŠ¨æ—¶æŠ¥é”™ failed to register layer: ApplyLayer exit status 1 stdout: stderr: open /etc/.pwd.lock: no such device or address æ›´æ”¹å­˜å‚¨é©±åŠ¨,é‡å¯docker vi /etc/docker/daemon.json { \"storage-driver\": \"vfs\" } æŠ¥é”™2 write /var/lib/docker/vfs/dir/3bf1a7e9505dff94e1c4ba0293a90e1d17c1b5b4318ec7a355f74185f421c240/usr/sbin/mysqld: no space left on device æ›´æ”¹dockeré»˜è®¤å­˜å‚¨è·¯å¾„ vi /etc/docker/daemon.json { \"storage-driver\": \"vfs\", \"graph\": \"/tmpdisk/mysql5.7\" } ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:2:2","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"å®‰è£…tomcat9.0å®¹å™¨ åˆ›å»ºé¡¹ç›®è·¯å¾„ï¼Œå°†å®¹å™¨å†…éƒ¨è·¯å¾„æ˜ å°„è¿›æ¥ã€‚ docker pull tomcat9.0 docker run -itd -p 18080:8080 --restart=always --name tomcat04 -v /tmpdisk/tomcat9.0.56/webapps:/usr/local/tomcat/webapps -v /etc/localtime:/etc/localtime:ro tomcat:9.0.56 è¿›å…¥å®¹å™¨ï¼Œå¯åŠ¨é¡¹ç›®æ—¶æŠ¥é”™ # Cannot create worker GC thread. Out of system resources. # An error report file with more information is saved as: # /usr/local/tomcat/bin/hs_err_pid46.log NOTE: Picked up JDK_JAVA_OPTIONS: --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED [0.002s][warning][os,thread] Failed to start thread \"GC Thread#0\" - pthread_create failed (EPERM) for attributes: stacksize: 1024k, guardsize: 4k, detached. # # There is insufficient memory for the Java Runtime Environment to continue. # Cannot create worker GC thread. Out of system resources. # An error report file with more information is saved as: # /usr/local/tomcat/bin/hs_err_pid68.log è§£å†³æ–¹æ³•ï¼Œæ›´æ¢tomcaté•œåƒã€‚ docker pull tomcat9.0.56 é‡æ–°åˆ›å»ºå®¹å™¨ docker run -itd -p 18080:8080 --name tomcat05 -v /tmpdisk/tomcat9.0.56/webapps:/usr/local/tomcat/webapps tomcat:9.0.56 åç»­å¯ä»¥æ·»åŠ tomcaté¡¹ç›®çš„waråŒ…åˆ°å®¿ä¸»æœºç›®å½•ä¸‹ï¼ŒåŒ…ä¼šè‡ªåŠ¨åŠ è½½ã€‚ ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:2:3","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"æ•´ä½“è®¿é—®æµç¨‹ tomcaté¡¹ç›®è®¿é—®mysqlæ•°æ®åº“ ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:3:0","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"å®¹å™¨å†…æ—¶åŒºåŒæ­¥ å¯åŠ¨å®¹å™¨æ—¶æ·»åŠ ä»¥ä¸‹å‚æ•°ï¼Œä¼šå’Œå®¿ä¸»æœºä¿æŒä¸€è‡´ã€‚ -v /etc/localtime:/etc/localtime:ro æŸ¥çœ‹æ‰€æœ‰åœ¨çº¿çš„å®¹å™¨IP docker inspect -f='{{.Name}} {{.NetworkSettings.IPAddress}} {{.HostConfig.PortBindings}}' $(docker ps -aq) ","date":"2023-02-17","objectID":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/:4:0","tags":["centos7"],"title":"centos7.3ç¦»çº¿å®‰è£…docker","uri":"/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/"},{"categories":["linux"],"content":"å®‰è£…ç¯å¢ƒ centos7.9 postfix2.10.1 dovecot2.2.36 foxmail(windowsç‰ˆ) ","date":"2023-02-10","objectID":"/centos%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/:0:1","tags":["centos7"],"title":"centosæ­å»ºå†…ç½‘é‚®ä»¶æœåŠ¡","uri":"/centos%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["linux"],"content":"åŠŸèƒ½æ¦‚æ‹¬ ä½¿ç”¨foxmailè½¯ä»¶ç™»å½•é‚®ä»¶æœåŠ¡å™¨ï¼ˆ192.168.1.89ï¼‰èƒ½å¤ŸæˆåŠŸå‘é€å’Œæ¥æ”¶é‚®ä»¶ã€‚ ","date":"2023-02-10","objectID":"/centos%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/:0:2","tags":["centos7"],"title":"centosæ­å»ºå†…ç½‘é‚®ä»¶æœåŠ¡","uri":"/centos%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["linux"],"content":"å…·ä½“å®ç°é…ç½®æ­¥éª¤ æ­å»ºé‚®ä»¶æœåŠ¡å™¨ é…ç½®æœåŠ¡å™¨ä¸»æœºåç§°ï¼ŒæœåŠ¡å™¨ä¸»æœºåç§°ä¸å‘ä¿¡åŸŸåè¦ä¸€è‡´ã€‚ [root@mail ~]# vi /etc/hostname mail.lee.com [root@mail ~]# hostname mail.lee.com é…ç½®postfixæœåŠ¡ yum install postfix å¦‚æœç³»ç»Ÿè‡ªå¸¦postfixï¼Œå»ºè®®å…ˆå¸è½½æ—§ç¨‹åºï¼Œç„¶åå†å®‰è£…æ–°ç¨‹åºã€‚ rpm -e postfix ç¼–è¾‘postfix ç¨‹åºä¸»é…ç½®æ–‡ä»¶/etc/postfix/main.cf 75 myhostname = mail.lee.com 83 mydomain = lee.com 99 myorigin = $mydomain 113 inet_interfaces = all 119 inet_protocols = ipv4 164 mydestination = $myhostname, $mydomain 264 mynetworks = 192.168.1.0/24, 127.0.0.0/8 å¯åŠ¨postfixå¹¶åŠ å…¥å¼€æœºè‡ªå¯ systemctl restart postfix systemctl enable postfix é…ç½®dovecotæœåŠ¡ç¨‹åº yum install dovecot é…ç½®dovecotä¸»é…ç½®æ–‡ä»¶/etc/dovecot/dovecot.conf vi /etc/dovecot/dovecot.conf 24 protocols = pop3 lmtp imap 48 login_trusted_networks = 192.168.1.0/24 é…ç½®é‚®ä»¶æ ¼å¼ä¸å­˜å‚¨è·¯å¾„ vi /etc/dovecot/conf.d/10-mail.conf mail_location = mbox:~/mail:INBOX=/var/mail/%u é‡å¯dovecotæœåŠ¡å¹¶å¼€æœºå¯åŠ¨ systemctl restart dovecot systemctl enable dovecot åˆ›å»ºç”µå­é‚®ä»¶ç³»ç»Ÿçš„ç™»å½•è´¦æˆ·ï¼ˆæœ¬åœ°ç³»ç»Ÿçš„è´¦æˆ·å’Œå¯†ç ï¼Œå› æ­¤åœ¨æœ¬åœ°ç³»ç»Ÿåˆ›å»ºå¸¸è§„è´¦æˆ·å³å¯ï¼‰ 1.å‘é€é‚®ä»¶ç”¨æˆ· useradd test passwd test 2.æ¥æ”¶æ–‡ä»¶ç”¨æˆ· useradd recv passwd test **å…³é”®ï¼ï¼ï¼ï¼**åˆ†åˆ«è¿›å…¥test ç”¨æˆ·å’Œ recvç”¨æˆ·ï¼Œé»˜è®¤å®¶ç›®å½•åœ¨/home/test å’Œ/home/recvä¸‹ã€‚åˆ›å»ºç”¨äºä¿å­˜é‚®ä»¶çš„ç›®å½• [test@mail ~]$ mkdir -p mail/.imap/INBOX [recv@mail ~]$ mkdir -p mail/.imap/INBOX æœ€åé‡å¯postfixå’ŒdovacotæœåŠ¡ systemctl restart postfix systemctl restart dovacot é‚®ä»¶å‘é€å’Œæ¥æ”¶æµ‹è¯• windows ä¸Šå®‰è£…foxmailã€‚ 1ã€å‘é€ç”¨æˆ·é…ç½® é‚®ä»¶ç±»å‹ï¼špop3 è´¦å·ï¼štest@lee.com æ”¶ä»¶æœåŠ¡å™¨ï¼š 192.168.1.89 ç«¯å£110 sslä¸å‹¾é€‰ å‘é€æœåŠ¡å™¨ï¼š 192.168.1.89 ç«¯å£25 sslä¸å‹¾é€‰ 2.æ¥æ”¶ç”¨æˆ·é…ç½® é‚®ä»¶ç±»å‹ï¼špop3 è´¦å·ï¼šrecv@lee.com æ”¶ä»¶æœåŠ¡å™¨ï¼š 192.168.1.89 ç«¯å£110 sslä¸å‹¾é€‰ å‘é€æœåŠ¡å™¨ï¼š 192.168.1.89 ç«¯å£25 sslä¸å‹¾é€‰ æœ€åä½¿ç”¨test ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œç”¨recvç”¨æˆ·æ¥æ”¶é‚®ä»¶ã€‚ ","date":"2023-02-10","objectID":"/centos%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/:0:3","tags":["centos7"],"title":"centosæ­å»ºå†…ç½‘é‚®ä»¶æœåŠ¡","uri":"/centos%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["ç½‘ç«™"],"content":"äºŒçº§åŸŸååˆ›å»ºä¸éƒ¨ç½² ","date":"2023-01-24","objectID":"/%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%83%A8%E7%BD%B2/:1:0","tags":["åŸŸå"],"title":"äºŒçº§åŸŸååˆ›å»ºä¸éƒ¨ç½²","uri":"/%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%83%A8%E7%BD%B2/"},{"categories":["ç½‘ç«™"],"content":"é¦–å…ˆä½ éœ€è¦æ‹¥æœ‰ä¸€ä¸ªé¡¶çº§åŸŸå æˆ‘æ˜¯åœ¨namesoli è´­ä¹°çš„åŸŸåã€‚å¯ä»¥æŸ¥çœ‹è¯¥é¡¶çº§åŸŸåèƒ½å¤Ÿåˆ›å»ºäºŒçº§åŸŸåæœ€å¤§æ•°é‡ã€‚ ç™»å½•è´¦æˆ·ï¼Œç‚¹å‡»account Domainsã€‚ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è´­ä¹°çš„åŸŸåï¼Œç„¶åç‚¹å‡»åŸŸåï¼Œè¿›å…¥åŸŸåæ§åˆ¶å°ã€‚ å¯ä»¥çœ‹åˆ°å­åŸŸåè½¬å‘é€‰é¡¹ï¼Œç‚¹å‡»å®ƒã€‚è¿›å…¥å­åŸŸåé…ç½®ç•Œé¢ã€‚ ç‚¹å‡»helpæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æˆ‘ä»¬è´­ä¹°çš„é¡¶çº§åŸŸåæœ€å¤šèƒ½å¤Ÿåˆ›å»º50ä¸ªå­åŸŸåã€‚ äºŒçº§åŸŸåï¼ˆå­åŸŸåï¼‰çš„æ ¼å¼ æ¯”å¦‚æˆ‘çš„ç½‘ç«™æ˜¯www.haipengv.com,å¯ä»¥é€šè¿‡è®¿é—®blog.haipengv.comæŸ¥çœ‹æˆ‘çš„åšå®¢ã€‚åœ¨haipengv.comå‰é¢ç”¨.éš”å¼€åŠ ä»»æ„å­—ç¬¦å°±æ˜¯äºŒçº§åŸŸåçš„æ ¼å¼ã€‚ ","date":"2023-01-24","objectID":"/%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%83%A8%E7%BD%B2/:1:1","tags":["åŸŸå"],"title":"äºŒçº§åŸŸååˆ›å»ºä¸éƒ¨ç½²","uri":"/%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%83%A8%E7%BD%B2/"},{"categories":["ç½‘ç«™"],"content":"éƒ¨ç½²çƒŸèŠ±ç½‘ç«™ é¦–å…ˆåœ¨githubä¸Šéƒ¨ç½²é¡¹ç›® ç™»å½•github ï¼Œåˆ›å»ºä¸€ä¸ªå…¬å¼€çš„æ–°ä»“åº“ã€‚ å¤åˆ¶ä»“åº“çš„sshåœ°å€ï¼Œä¸€ä¼šè¿æ¥åº“æ—¶éœ€è¦ã€‚ å‡†å¤‡ä¸Šä¼ çƒŸèŠ±ä»£ç ï¼Œåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹E:\\fireworkshowã€‚éœ€è¦ç¡®ä¿æœ¬åœ°å·²ç»æ­å»ºå¥½gitç¯å¢ƒã€‚å°†çƒŸèŠ±ä»£ç å¤åˆ¶åˆ°E:\\fireworkshowå†…ã€‚åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹testå¹¶è¿›å…¥testæ–‡ä»¶å¤¹ã€‚æ­¤æ—¶æ‰€åœ¨ä½ç½®E:\\fireworkshow\\testã€‚ å°†ä»“åº“ä»£ç åŒæ­¥åˆ°æœ¬åœ°testç›®å½•å†… git clone git@github.com:Smithkenny/fireworkshow.git å°†E:\\fireworkshow\\test\\fireworkshowæ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°E:\\fireworkshowã€‚ç„¶ååˆ é™¤ç©ºæ–‡ä»¶å¤¹testå’Œfireworkshowã€‚ è¿è¡Œä»¥ä¸‹å‘½ä»¤ git add . git commit -m \"ä¸Šä¼ ä»£ç æµ‹è¯•\" git push origin main è¿™é‡Œæ³¨æ„æˆ‘ä»¬é»˜è®¤åˆ›å»ºçš„ä»“åº“ä¸»åˆ†æ”¯æ˜¯mainã€‚ ä»£ç ä¸Šä¼ å®Œæ¯•åï¼Œæ­¤æ—¶è¿˜ä¸èƒ½è®¿é—®ã€‚ æˆ‘è¿™é‡Œä½¿ç”¨cloudflareåšä¸€æ¡åŸŸåè§£æã€‚ ç™»å½•cloudflare ï¼Œæ‰¾åˆ°DNSé€‰é¡¹ï¼Œæ·»åŠ ä¸€æ¡Aè®°å½•ã€‚æŒ‡å‘ä¸€ä¸ªipv4åœ°å€ã€‚è¿™é‡Œçš„åœ°å€æ˜¯ping ä»“åº“åŸŸåå¾—æ¥çš„ã€‚ 2023.haipengv.comâ€“\u003eipv4åœ°å€ æ·»åŠ å¥½Aè®°å½•åï¼Œå›åˆ°ä»“åº“ï¼Œç‚¹å‡»settingsï¼Œæ‰¾åˆ°pagesé€‰é¡¹ï¼Œé…ç½®æˆ‘ä»¬äºŒçº§åŸŸåã€‚ç¨ç­‰ååˆ†é’Ÿå·¦å³ï¼Œå°±å¯ä»¥é€šè¿‡äºŒçº§åŸŸå2023.haipengv.comè®¿é—®æˆ‘ä»¬çš„ç½‘ç«™äº†ã€‚ é‡åˆ°çš„é—®é¢˜ ç½‘ç«™ä¸­éŸ³ä¹æ–‡ä»¶å¾ˆå¤§ï¼Œè¶…è¿‡2Mï¼ŒéŸ³ä¹åŠ è½½è¶…æ—¶ï¼Œå¦‚ä½•æå‡åŠ è½½é€Ÿåº¦ï¼Ÿ è§£å†³åŠæ³• å°†å¤§æ–‡ä»¶ä¸Šä¼ åˆ°ç½‘ç›˜ï¼Œå¤åˆ¶ç½‘ç›˜å¯¹åº”çš„æ–‡ä»¶è·¯å¾„ï¼Œå°†è¯¥è·¯å¾„æ·»åŠ åˆ°index.htmlæ–‡ä»¶ä¸­ã€‚æˆ‘è¿™é‡Œç”¨çš„æ˜¯æ°¸ç¡•ç½‘ç›˜ ã€‚ æœ€åè®¿é—®2023.haipengv.comæ¬£èµçƒŸèŠ±å§ï¼ ç›¸å…³å‚è€ƒ https://blog.wangriyu.wang/2018/01-githubpage.html ","date":"2023-01-24","objectID":"/%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%83%A8%E7%BD%B2/:1:2","tags":["åŸŸå"],"title":"äºŒçº§åŸŸååˆ›å»ºä¸éƒ¨ç½²","uri":"/%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%83%A8%E7%BD%B2/"},{"categories":["linux"],"content":"centos7ä½¿ç”¨systemdç®¡ç†ç¨‹åº systemdçš„é…ç½®æ–‡ä»¶ä¸»è¦æ”¾åœ¨/usr/lib/systemd/systemç›®å½•ï¼Œä¹Ÿå¯èƒ½åœ¨/etc/systemd/systemç›®å½•ã€‚ å­¦ä¹ ä¸‹sshdçš„ç³»ç»Ÿé…ç½®æ–‡ä»¶å†™æ³•ï¼š $cat sshd.service [Unit] Description=OpenSSH server daemon Documentation=man:sshd(8) man:sshd_config(5) After=network.target sshd-keygen.service Wants=sshd-keygen.service [Service] Type=forking PIDFile=/var/run/sshd.pid EnvironmentFile=/etc/sysconfig/sshd ExecStart=/usr/sbin/sshd $OPTIONS ExecReload=/bin/kill -HUP $MAINPID KillMode=process Restart=on-failure RestartSec=42s [Install] WantedBy=multi-user.target ç®€å•è§£é‡Šä¸‹ï¼š [Unit] åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»ã€‚ Descriptionï¼šå½“å‰é…ç½®æ–‡ä»¶çš„æè¿°ä¿¡æ¯ã€‚ Documentationï¼šå¸®åŠ©ä¿¡æ¯ã€‚ Afterï¼šè¡¨ç¤ºå½“å‰æœåŠ¡æ˜¯åœ¨é‚£ä¸ªæœåŠ¡åé¢å¯åŠ¨ï¼Œä¸€èˆ¬å®šä¹‰ä¸ºç½‘ç»œæœåŠ¡å¯åŠ¨åå¯åŠ¨ Wantsï¼šè¡¨ç¤º sshd.service ä¸ sshd-keygen.service ä¹‹é—´å­˜åœ¨â€ å¼±ä¾èµ–â€ å…³ç³»ï¼Œå³å¦‚æœâ€sshd-keygen.serviceâ€ å¯åŠ¨å¤±è´¥æˆ–åœæ­¢è¿è¡Œï¼Œä¸å½±å“ sshd.service ç»§ç»­æ‰§è¡Œã€‚ [Service] åŒºå—ï¼šå¯åŠ¨è¡Œä¸º Typeï¼šå®šä¹‰å¯åŠ¨ç±»å‹ã€‚è¯¦ç»†äº†è§£ç‚¹æ­¤ ã€‚ PIDFileï¼šæœåŠ¡çš„ pid æ–‡ä»¶è·¯å¾„ã€‚ EnvironmentFileï¼šæŒ‡å®šå½“å‰æœåŠ¡ä¾èµ–çš„ç¯å¢ƒå‚æ•°æ–‡ä»¶ã€‚ ExecStartï¼šå®šä¹‰å¯åŠ¨è¿›ç¨‹æ—¶æ‰§è¡Œçš„å‘½ä»¤ã€‚ ExecReloadï¼šé‡å¯æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤ KillModeï¼šå®šä¹‰ Systemd å¦‚ä½•åœæ­¢ sshd æœåŠ¡ã€‚ Restartï¼šå®šä¹‰äº† sshd é€€å‡ºåï¼ŒSystemd çš„é‡å¯æ–¹å¼ã€‚ RestartSecï¼šè¡¨ç¤º Systemd é‡å¯æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦ç­‰å¾…çš„ç§’æ•°ã€‚ä¸Šé¢çš„ä¾‹å­è®¾ä¸ºç­‰å¾… 42 ç§’ã€‚ [Install] åŒºå—ï¼šå®šä¹‰å¦‚ä½•å®‰è£…è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå³æ€æ ·åšåˆ°å¼€æœºå¯åŠ¨ã€‚ WantedByï¼šè¡¨ç¤ºè¯¥æœåŠ¡æ‰€åœ¨çš„ Targetã€‚multi-user.target è¡¨æ˜å½“ç³»ç»Ÿä»¥å¤šç”¨æˆ·æ–¹å¼ï¼ˆé»˜è®¤çš„è¿è¡Œçº§åˆ«ï¼‰å¯åŠ¨æ—¶ï¼Œè¿™ä¸ªæœåŠ¡éœ€è¦è¢«è‡ªåŠ¨è¿è¡Œã€‚ é…ç½®ä¸€ä¸ªè‡ªå·±çš„ç³»ç»ŸæœåŠ¡ æ—¥å¸¸å¯åŠ¨ç¨‹åºæ–¹å¼ï¼š ./etc/test/sipholeWatchDog/sipholeWatchDog ç°åœ¨æ·»åŠ é…ç½®é€šè¿‡systemdæ¥ç®¡ç† vi /usr/lib/systemd/system/sipholeWatchDog.service æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š [Unit] Description=sipholeWatchDog After= syslog.target network.target jtsec-firstrun.service [Service] Type=forking ExecStart=/etc/test/sipholeWatchDog/sipholeWatchDog UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target åŠ è½½å•å…ƒ systemctl daemon-reload å¯åŠ¨æœåŠ¡å¹¶æŸ¥çœ‹æœåŠ¡çŠ¶æ€ systemctl start sipholeWatchDog systemctl status sipholeWatchDog â— sipholeWatchDog.service - sipholeWatchDog Loaded: loaded (/usr/lib/systemd/system/sipholeWatchDog.service; enabled; vendor preset: disabled) Active: active (running) since äºŒ 2023-01-03 11:10:57 CST; 14min ago Main PID: 22088 (sipholeWatchDog) CGroup: /system.slice/sipholeWatchDog.service â”œâ”€22088 /etc/test/sipholeWatchDog/sipholeWatchDog â”œâ”€22269 /etc/siphole/siphole_back -c /etc/siphole/siphole_back_5.conf â””â”€22281 journalctl _PID=22269 -f 1æœˆ 03 11:24:59 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:RUN: MESSAGE: CmdType: RecordInfo Devices: 3301...001389 1æœˆ 03 11:25:03 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:Find Route ... 1æœˆ 03 11:25:03 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:RUN: MESSAGE: CmdType: RecordInfo Devices: 3301...001389 1æœˆ 03 11:25:11 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:Find Route ... 1æœˆ 03 11:25:11 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:RUN: MESSAGE: CmdType: RecordInfo Devices: 3301...001391 1æœˆ 03 11:25:12 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:Find Route ... 1æœˆ 03 11:25:12 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:RUN: MESSAGE: CmdType: RecordInfo Devices: 3301...001391 1æœˆ 03 11:25:13 video_back siphole_back[22269]: RUN:plugin/p28181.c 636:videoSrvId:00:Total devices flow: 20 bytes. 0 medias. 1æœˆ 03 11:25:14 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:Find Route ... 1æœˆ 03 11:25:14 video_back siphole_back[22269]: msp-P28181: 0:videoSrvId:00:RUN: MESSAGE: CmdType: RecordInfo Devices: 3301...001391 Hint: Some lines were ellipsized, use -l to show in full. å¯ä»¥åŠ å…¥å¼€æœºå¯åŠ¨ systemctl enable sipholeWatchDog systemctlå‘½ä»¤æ•´ç† æ˜¾ç¤ºæ‰€æœ‰å•å…ƒçŠ¶æ€ systemctl æˆ– systemctl list-units åªæ˜¾ç¤ºæœåŠ¡å•å…ƒçš„çŠ¶æ€ systemctl --type=service éªŒè¯ sshd æœåŠ¡å½“å‰æ˜¯å¦æ´»åŠ¨ systemctl is-active sshd å¯åŠ¨ï¼Œåœæ­¢å’Œé‡å¯ sshd æœåŠ¡ systemctl start sshd.service systemctl stop sshd.service systemctl restart sshd.service é‡æ–°åŠ è½½é…ç½® systemctl reload sshd.service åˆ—å‡ºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰æœåŠ¡å•å…ƒ systemctl list-units --type=service åˆ—å‡ºæ‰€æœ‰æœåŠ¡å•å…ƒ systemctl list-units --type=service --all æŸ¥çœ‹æ‰€æœ‰çš„æœåŠ¡å•å…ƒæ˜¯å¦ä¸ºå¼€æœºè‡ªå¯ systemctl list-unit-files --type=service åˆ—å‡ºä¾èµ–çš„å•å…ƒ systemctl list-dependencies sshd éªŒè¯ sshd æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨ systemctl is-enabled sshd å…³é—­å¼€æœºè‡ªå¯ systemctl disable network å¯ç”¨ network å¼€æœºè‡ªå¯ã€‚ systemctl enable network systemdæ—¥å¿—ç®¡ç† systemd æä¾›äº†è‡ªå·±æ—¥å¿—ç³»ç»Ÿï¼ˆlogging systemï¼‰ï¼Œç§°ä¸º journal. ä½¿ç”¨ systemd æ—¥å¿—ï¼Œæ— éœ€é¢å¤–å®‰è£…æ—¥å¿—æœåŠ¡ï¼ˆsyslogï¼‰ã€‚è¯»å–æ—¥","date":"2023-01-03","objectID":"/centos7%E4%BD%BF%E7%94%A8systemd%E7%AE%A1%E7%90%86%E7%A8%8B%E5%BA%8F/:1:0","tags":["centos7"],"title":"centos7ä½¿ç”¨systemdç®¡ç†ç¨‹åº","uri":"/centos7%E4%BD%BF%E7%94%A8systemd%E7%AE%A1%E7%90%86%E7%A8%8B%E5%BA%8F/"},{"categories":["é—®é¢˜"],"content":"linuxæ ¹åˆ†åŒºæ»¡äº†å¤„ç†æ–¹æ³• ä½¿ç”¨duå‘½ä»¤æŸ¥æ‰¾å ç”¨ç©ºé—´è¾ƒå¤šçš„æ–‡ä»¶æˆ–ç›®å½•ï¼š du -sh /* å¦‚æœ/ç›®å½•ä¸‹æœ‰å¾ˆå¤šå­ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨findå‘½ä»¤ç»“åˆduæ¥æŸ¥æ‰¾å ç”¨ç©ºé—´è¾ƒå¤šçš„ç›®å½•ï¼š find / -type d -exec du -sh {} \\; | sort -hr å¦‚æœä¸Šè¿°æ–¹æ³•ä»ç„¶æ²¡æœ‰æ‰¾åˆ°å ç”¨ç©ºé—´è¾ƒå¤§çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯èƒ½æ˜¯å› ä¸ºæŸäº›æ–‡ä»¶è¢«åˆ é™¤ï¼Œä½†æ˜¯ä»ç„¶è¢«è¿›ç¨‹å ç”¨ç€ã€‚å¯ä»¥ä½¿ç”¨lsofå‘½ä»¤æ¥æŸ¥çœ‹è¢«æ‰“å¼€çš„è¢«åˆ é™¤çš„æ–‡ä»¶: lsof +L1 / ","date":"2022-12-28","objectID":"/linux%E6%A0%B9%E5%88%86%E5%8C%BA%E6%BB%A1%E4%BA%86%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/:1:0","tags":["linux"],"title":"linuxæ ¹åˆ†åŒºæ»¡äº†å¤„ç†æ–¹æ³•","uri":"/linux%E6%A0%B9%E5%88%86%E5%8C%BA%E6%BB%A1%E4%BA%86%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/"},{"categories":["å·¥å…·"],"content":"æ­å»ºrssè®¢é˜…å™¨ mkdir -p /data/freshrss docker run -d --name=freshrss -e PUID=1000 -e PGID=1000 -e TZ=Asia/Shanghai -p 8000:80 -v /data/freshrss:/config --restart unless-stopped freshrss/freshrss:latest ","date":"2022-12-02","objectID":"/%E6%90%AD%E5%BB%BArss%E8%AE%A2%E9%98%85%E5%99%A8/:1:0","tags":["docker"],"title":"æ­å»ºrssè®¢é˜…å™¨","uri":"/%E6%90%AD%E5%BB%BArss%E8%AE%A2%E9%98%85%E5%99%A8/"},{"categories":["é—®é¢˜"],"content":"dmesgæ—¶é—´æ˜¾ç¤ºé—®é¢˜ é»˜è®¤æ˜¾ç¤ºæ—¶é—´æˆ³ # dmesg [24241362.110367] rmlog.sh (14746): drop_caches: 1 [24241362.120529] rmlog.sh (14746): drop_caches: 2 [24241362.218306] rmlog.sh (14746): drop_caches: 3 [24846165.362560] rmlog.sh (7364): drop_caches: 1 [24846165.371097] rmlog.sh (7364): drop_caches: 2 [24846165.463682] rmlog.sh (7364): drop_caches: 3 æ·»åŠ  -Tå‚æ•°ï¼Œæ˜¾ç¤ºäººç±»å¯ä»¥è¯»æ‡‚çš„æ—¶é—´æˆ³ã€‚ # dmesg -T [å›› 10æœˆ 20 00:01:10 2022] rmlog.sh (14746): drop_caches: 1 [å›› 10æœˆ 20 00:01:10 2022] rmlog.sh (14746): drop_caches: 2 [å›› 10æœˆ 20 00:01:10 2022] rmlog.sh (14746): drop_caches: 3 [å›› 10æœˆ 27 00:01:13 2022] rmlog.sh (7364): drop_caches: 1 [å›› 10æœˆ 27 00:01:13 2022] rmlog.sh (7364): drop_caches: 2 [å›› 10æœˆ 27 00:01:13 2022] rmlog.sh (7364): drop_caches: 3 ","date":"2022-12-02","objectID":"/dmesg%E6%97%B6%E9%97%B4%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/:1:0","tags":["dmesg"],"title":"dmesgå‘½ä»¤æ—¶é—´æ˜¾ç¤ºé—®é¢˜","uri":"/dmesg%E6%97%B6%E9%97%B4%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/"},{"categories":["é—®é¢˜"],"content":"å‰è¨€ æœåŠ¡å™¨å®‰è£…pveåå‘ç°cpuå ç”¨ç‡è¿‡é«˜æœ‰ç‚¹ä¸æ­£å¸¸ï¼Œäºæ˜¯æŸ¥å…¶åŸå› ã€‚ å‚è€ƒè¿™ä¸ªåšä¸»çš„æ–‡ç« ã€‚å‘ç°ç°è±¡ä¸€è‡´ã€‚ https://blog.csdn.net/jzz601264258/article/details/105850816 topæŸ¥çœ‹cpuå ç”¨ç‡ root@www:~# top top - 09:58:10 up 35 min, 2 users, load average: 8.00, 8.00, 7.09 Tasks: 220 total, 1 running, 219 sleeping, 0 stopped, 0 zombie %Cpu(s): 99.2 us, 0.8 sy, 0.0 ni, 0.0 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st MiB Mem : 15651.4 total, 8695.9 free, 6572.6 used, 382.9 buff/cache MiB Swap: 8192.0 total, 8192.0 free, 0.0 used. 8748.4 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 1334 root 20 0 3375880 5092 4 S 800.0 0.0 255:49.67 kswapd0 1 root 20 0 166460 10756 7720 S 0.0 0.1 0:01.27 systemd å‘ç°kswapd0è¿›ç¨‹cpuä½¿ç”¨ç‡é«˜è¾¾800%ã€‚æˆ‘çš„æœåŠ¡å™¨é…ç½®æ˜¯8æ ¸16Gã€‚ è¯¦ç»†æŸ¥çœ‹è¯¥è¿›ç¨‹ä¸‹çš„æ‰€æœ‰çº¿ç¨‹ root@www:~# top -Hp 1334 top - 09:58:39 up 35 min, 2 users, load average: 8.05, 8.01, 7.13 Threads: 14 total, 8 running, 6 sleeping, 0 stopped, 0 zombie %Cpu(s): 99.6 us, 0.4 sy, 0.0 ni, 0.0 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st MiB Mem : 15651.4 total, 8697.7 free, 6570.8 used, 382.9 buff/cache MiB Swap: 8192.0 total, 8192.0 free, 0.0 used. 8750.2 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 1431 root 20 0 3375880 5092 4 R 99.9 0.0 32:23.46 kswapd0 1429 root 20 0 3375880 5092 4 R 99.7 0.0 32:21.50 kswapd0 1433 root 20 0 3375880 5092 4 R 99.7 0.0 32:23.20 kswapd0 1434 root 20 0 3375880 5092 4 R 99.7 0.0 32:22.80 kswapd0 1432 root 20 0 3375880 5092 4 R 99.3 0.0 32:22.95 kswapd0 1430 root 20 0 3375880 5092 4 R 99.0 0.0 32:21.44 kswapd0 1435 root 20 0 3375880 5092 4 R 99.0 0.0 32:23.55 kswapd0 1436 root 20 0 3375880 5092 4 R 99.0 0.0 32:23.23 kswapd0 1334 root 20 0 3375880 5092 4 S 0.0 0.0 0:00.15 kswapd0 1335 root 20 0 3375880 5092 4 S 0.0 0.0 0:00.84 kswapd0 1336 root 20 0 3375880 5092 4 S 0.0 0.0 0:00.00 kswapd0 1337 root 20 0 3375880 5092 4 S 0.0 0.0 0:00.00 kswapd0 1338 root 20 0 3375880 5092 4 S 0.0 0.0 0:00.00 kswapd0 1339 root 20 0 3375880 5092 4 S 0.0 0.0 0:00.00 kswapd0 äºæ˜¯æŸ¥çœ‹ç³»ç»Ÿå¤–éƒ¨é“¾æ¥ root@www:~# netstat -aplt Active Internet connections (servers and established) Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp 0 0 0.0.0.0:sunrpc 0.0.0.0:* LISTEN 1/init tcp 0 0 0.0.0.0:ssh 0.0.0.0:* LISTEN 1273/sshd: /usr/sbi tcp 0 0 localhost.localdom:smtp 0.0.0.0:* LISTEN 1129/master tcp 0 0 localhost.localdomai:85 0.0.0.0:* LISTEN 1280/pvedaemon tcp 0 1 www.pve.com:34882 45.9.148.99:https SYN_SENT 1305/rsync tcp 0 280 www.pve.com:ssh 192.168.1.110:49909 ESTABLISHED 2629/sshd: root@pts tcp 0 0 www.pve.com:54690 45.9.148.125:http ESTABLISHED 1334/./kswapd0 tcp 0 0 www.pve.com:ssh 192.168.1.182:3219 ESTABLISHED 1314/sshd: root@pts tcp6 0 0 [::]:sunrpc [::]:* LISTEN 1/init tcp6 0 0 [::]:ssh [::]:* LISTEN 1273/sshd: /usr/sbi tcp6 0 0 [::]:3128 [::]:* LISTEN 1295/spiceproxy tcp6 0 0 ip6-localhost:smtp [::]:* LISTEN 1129/master tcp6 0 0 [::]:8006 [::]:* LISTEN 1284/pveproxy å‘ç°æœ‰ä¸¤ä¸ªå¤–éƒ¨IPæ­£åœ¨å’Œæœ¬æœºé€šä¿¡ã€‚ ä½¿ç”¨www.ip138.comæŸ¥çœ‹45.9.148.125 ã€45.9.148.99IPï¼Œå½’å±åœ°æ˜¯è·å…°ã€‚å¦‚æ­¤ä¾¿ç¡®å®šäº†æ˜¯æŒ–çŸ¿ç¨‹åºã€‚ æŸ¥çœ‹kswapd0 å’Œ rsync è¿›ç¨‹å¯¹åº”çš„æ–‡ä»¶è·¯å¾„ã€‚ root@www:~# ls -l /proc/1334/exe lrwxrwxrwx 1 root root 0 Nov 16 10:00 /proc/1334/exe -\u003e /root/.configrc/a/kswapd0 root@www:~# ls -l /proc/1305/exe lrwxrwxrwx 1 root root 0 Nov 16 10:01 /proc/1305/exe -\u003e /usr/bin/perl å…ˆæŠŠ/root/.configrc é‡å‘½åä¸º/root/configrc,å¹¶å‹ç¼©ä¸€ä»½æ‹·è´åˆ°æœ¬æœºã€‚ç„¶ååˆ é™¤è¯¥æ–‡ä»¶å¤¹ã€‚ mv /root/.configrc /root/configrc tar -zcvf /root/configrc.tgz /root/configrc rm -rf /root/configrc å‘ç°æœ‰å®šæ—¶ä»»åŠ¡å®šæœŸæ‰§è¡Œè¯¥ç¨‹åºï¼Œå³æ—¶æœåŠ¡å™¨é‡å¯ä¹Ÿä¼šç«‹å³æ‰§è¡Œå¯¹åº”è„šæœ¬ã€‚ root@www:~# crontab -l 1 1 */2 * * /root/.configrc/a/upd\u003e/dev/null 2\u003e\u00261 @reboot /root/.configrc/a/upd\u003e/dev/null 2\u003e\u00261 5 8 * * 0 /root/.configrc/b/sync\u003e/dev/null 2\u003e\u00261 @reboot /root/.configrc/b/sync\u003e/dev/null 2\u003e\u00261 0 0 */3 * * /tmp/.X25-unix/.rsync/c/aptitude\u003e/dev/null 2\u003e\u00261 æ¸…é™¤å®šæ—¶ä»»åŠ¡ã€‚ å›æƒ³ç°è±¡å‘ç”Ÿçš„åŸå› ï¼š rootå¯†ç è®¾ç½®è¿‡äºç®€å• å‚è€ƒäº†ä¸€ç¯‡æ–‡ç« https://www.cpci.dev/pve-cloud-init-and-cloud-image/ä¸‹è½½äº†ç½‘ä¸Šçš„äº‘é•œåƒè™šæ‹Ÿæœºæ¨¡æ¿ç„¶åå°±ä¸­æ‹›äº†ã€‚ å¤„ç†æ–¹å¼ï¼š è®¾ç½®è¾ƒå¤æ‚çš„rootå¯†ç ï¼Œè¿½è¸ªåˆ°æŒ–çŸ¿è¿›ç¨‹å¯¹åº”çš„é…ç½®æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œåˆ é™¤æ‰ã€‚é‡å¯æœåŠ¡å™¨ã€‚ ","date":"2022-11-16","objectID":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%94%B1%E4%BA%8Ekswapd0%E8%BF%9B%E7%A8%8B%E5%AF%BC%E8%87%B4%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8/:1:0","tags":["cpuçˆ†æ»¡"],"title":"è®°ä¸€æ¬¡ç”±äºkswapd0è¿›ç¨‹å¯¼è‡´cpuå æ»¡","uri":"/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%94%B1%E4%BA%8Ekswapd0%E8%BF%9B%E7%A8%8B%E5%AF%BC%E8%87%B4%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8/"},{"categories":["pve"],"content":"pveä¼˜åŒ– ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:1","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["pve"],"content":"1.Proxmox VE(PVE)ç³»ç»Ÿç§»é™¤ã€Šæ— æœ‰æ•ˆè®¢é˜…ã€‹å¼¹çª—æç¤ºé€šçŸ¥ Proxmox VE(PVE)ç³»ç»Ÿå®‰è£…å®Œæˆåï¼Œè¾“å…¥è´¦å·å¯†ç ç™»å½•ç³»ç»Ÿåä¼šæœ‰æç¤ºï¼šæ— æœ‰æ•ˆè®¢é˜…ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•å»é™¤æ­¤å¼¹çª—æç¤ºã€‚ æç¤ºï¼šæ— æœ‰æ•ˆè®¢é˜… You do not have a valid subscription for this server. Please visit www.proxmox.com to get a list of available options. å½¢æˆæ­¤é—®é¢˜çš„ä¸»è¦åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…è´¹ç‰ˆProxmox VEç³»ç»Ÿï¼Œæ‰€ä»¥æ¯æ¬¡ç™»å½•åéƒ½ä¼šæç¤ºè¿™ä¸ªã€Šæ— æœ‰æ•ˆè®¢é˜…ã€‹å¼¹çª—ã€‚ æ­¤æ•™ç¨‹æ¼”ç¤ºç³»ç»Ÿç¯å¢ƒä¸ºï¼šProxmox Virtual Environment 7.2 ï¼Œæ›´æ–°æ—¥æœŸä¸ºï¼š2022å¹´11æœˆ10æ—¥ï¼Œå…¶ä»–ç‰ˆæœ¬è¯·å‚è€ƒæœ¬æ•™ç¨‹. éœ€è¦ä¿®æ”¹æ–‡ä»¶è·¯å¾„ä¸ºï¼š/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js ä¿®æ”¹ä¹‹å‰è¯·åšå¥½æ–‡ä»¶å¤‡ä»½ï¼Œé˜²æ­¢è¯¯æ“ä½œé€ æˆä¸å¯é¢„çŸ¥çš„é”™è¯¯ã€‚ è§£å†³æ–¹æ³• æœç´¢å…³é”®è¯ï¼šExt.Msg.show å°†ï¼šExt.Msg.show({ä¿®æ”¹ä¸ºï¼šExt.Msg.noshow({ æ–‡ä»¶ä¿®æ”¹åä¿å­˜ä¸Šä¼ ï¼Œæ‰§è¡Œ systemctl restart pveproxy å‘½ä»¤é‡å¯ç½‘é¡µæœåŠ¡ root@pve:~# systemctl restart pveproxy æ³¨é”€åç™»é™†ï¼Œä½¿ç”¨ CTRL+F5 å¿«æ·é”®å¼ºåˆ¶é‡æ–°åŠ è½½ç½‘é¡µé¡µé¢ï¼Œæˆ–æ¸…ç†æµè§ˆå™¨ç¼“å­˜ï¼ˆå¾ˆå¤šä¿®æ”¹åæ²¡æœ‰ååº”çš„ç«¥å­¦è®°å¾—æ¸…ç¼“å­˜ï¼‰ å†æ¬¡æ‰“å¼€ç™»é™† Proxmox VEç³»ç»Ÿæ§åˆ¶å°ä¸»ç•Œé¢ï¼Œå°±æ²¡æœ‰å¼¹çª—æç¤ºäº†ã€‚ æ³¨æ„ï¼šæ­¤æ–¹æ³•å¯èƒ½åœ¨å‡çº§ pve åå¤±æ•ˆï¼Œå¤±æ•ˆåå†ä¿®æ”¹å³å¯ã€‚ ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:2","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["pve"],"content":"2.Proxmox VEæ›´æ¢aptæºå¹¶æ›´æ–°è½¯ä»¶åŒ…æ•°æ®åº“ 1ã€æŸ¥çœ‹å½“å‰é•œåƒæºé…ç½® cat /etc/apt/sources.list 2ã€æŸ¥çœ‹å½“å‰pveç‰ˆæœ¬ pveversion -v 3ã€æ³¨é‡Šé»˜è®¤é…ç½®ï¼Œä¿®æ”¹ä¸ºä¸­ç§‘å¤§é•œåƒæº nano /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/debian bullseye main contrib deb https://mirrors.ustc.edu.cn/debian bullseye-updates main contrib deb https://mirrors.ustc.edu.cn/debian-security bullseye-security main contrib 4ã€æ³¨é‡Šproxmoxä¼ä¸šç‰ˆæ›´æ–°æº å› ä¸ºæˆ‘ä»¬å®‰è£…çš„æ˜¯ç¤¾åŒºç‰ˆï¼Œæ²¡æœ‰è®¢é˜…ä¼ä¸šç‰ˆçš„æœåŠ¡ï¼Œè¿™ä¸ªé»˜è®¤å¯ç”¨ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ï¼Œä½¿ç”¨æ—¶æˆ‘ä»¬å¯ä»¥æ³¨é‡Šæ‰å®ƒã€‚ nano /etc/apt/sources.list.d/pve-enterprise.list 5ã€è¿è¡Œ apt update æ›´æ–°ç´¢å¼•ä»¥ç”Ÿæ•ˆ 6ã€æŸ¥çœ‹å¯ä»¥æ›´æ–°çš„åŒ… apt list --upgradable 7ã€æ‰§è¡Œè½¯ä»¶åŒ…æ•°æ®åº“æ›´æ–° apt update \u0026\u0026 apt upgrade -y 8ã€ä¹Ÿå¯ä»¥åœ¨é¡µé¢æ›´æ–° pve-æ›´æ–°-åˆ·æ–° ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:3","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["pve"],"content":"3.PVEæ›´æ”¹å®‰è£…æ—¶ç»‘å®šçš„ç½‘å¡ å½“æœåŠ¡å™¨æœ‰å¤šä¸ªç½‘å¡æ—¶ï¼Œå®‰è£…pveåï¼Œç»‘å®šçš„ç½‘å¡éç®¡ç†å£ç½‘å¡å¯¼è‡´å±€åŸŸç½‘ä¸­æœºå™¨æ— æ³•è¿æ¥pveã€‚æ­¤æ—¶éœ€è¦æ›´æ”¹pveå®‰è£…æ—¶ç»‘å®šçš„ç½‘å¡ã€‚ root@www:~# ip a 1: lo: \u003cLOOPBACK,UP,LOWER_UP\u003e mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: eno1: \u003cBROADCAST,MULTICAST\u003e mtu 1500 qdisc noop state DOWN group default qlen 1000 link/ether 3c:ec:ef:90:ea:96 brd ff:ff:ff:ff:ff:ff altname enp181s0f0 3: enp101s0f0: \u003cBROADCAST,MULTICAST\u003e mtu 1500 qdisc noop state DOWN group default qlen 1000 link/ether 58:53:c0:64:19:94 brd ff:ff:ff:ff:ff:ff 4: eno2: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1500 qdisc mq master vmbr0 state UP group default qlen 1000 link/ether 3c:ec:ef:90:ea:97 brd ff:ff:ff:ff:ff:ff altname enp181s0f1 5: enp23s0f0: \u003cBROADCAST,MULTICAST\u003e mtu 1500 qdisc noop state DOWN group default qlen 1000 link/ether 68:91:d0:6a:66:a6 brd ff:ff:ff:ff:ff:ff 6: enp101s0f1: \u003cBROADCAST,MULTICAST\u003e mtu 1500 qdisc noop state DOWN group default qlen 1000 link/ether 58:53:c0:64:19:95 brd ff:ff:ff:ff:ff:ff 7: enp23s0f1: \u003cBROADCAST,MULTICAST\u003e mtu 1500 qdisc noop state DOWN group default qlen 1000 link/ether 68:91:d0:6a:66:a7 brd ff:ff:ff:ff:ff:ff 8: enp182s0f0: \u003cBROADCAST,MULTICAST\u003e mtu 1500 qdisc noop state DOWN group default qlen 1000 link/ether 68:91:d0:6a:66:a0 brd ff:ff:ff:ff:ff:ff 9: enp182s0f1: \u003cBROADCAST,MULTICAST\u003e mtu 1500 qdisc noop state DOWN group default qlen 1000 link/ether 68:91:d0:6a:66:a1 brd ff:ff:ff:ff:ff:ff 10: vmbr0: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1500 qdisc noqueue state UP group default qlen 1000 link/ether 3c:ec:ef:90:ea:97 brd ff:ff:ff:ff:ff:ff inet 192.168.1.191/24 scope global vmbr0 valid_lft forever preferred_lft forever inet6 fe80::3eec:efff:fe90:ea97/64 scope link valid_lft forever preferred_lft forever 12: tap100i0: \u003cBROADCAST,MULTICAST,PROMISC,UP,LOWER_UP\u003e mtu 1500 qdisc pfifo_fast master vmbr0 state UNKNOWN group default qlen 1000 link/ether 2e:dd:9f:18:5d:41 brd ff:ff:ff:ff:ff:ff ç”±ä»¥ä¸Šä¿¡æ¯å¯çŸ¥pveçš„è™šæ‹Ÿç½‘å¡vmbr0æ˜¯æ¡¥æ¥åˆ°macä¸º3c:ec:ef:90:ea:97çš„ç½‘å¡å³eno2ä¸Šï¼Œéœ€è¦å°†vmbr0æ›´æ”¹æ¡¥æ¥åˆ°eno1ä¸Šã€‚ nano /etc/network/interfaces åŸå†…å®¹ auto lo iface lo inet loopback iface eno2 inet manual auto vmbr0 iface vmbr0 inet static address 192.168.1.191/24 gateway 192.168.1.254 bridge-ports eno2 bridge-stp off bridge-fd 0 iface enp101s0f0 inet manual iface enp101s0f1 inet manual iface enp23s0f0 inet manual iface enp23s0f1 inet manual iface eno2 inet manual iface enp182s0f0 inet manual iface enp182s0f1 inet manual éœ€è¦æ›´æ”¹ä¸º auto lo iface lo inet loopback iface eno1 inet manual auto vmbr0 iface vmbr0 inet static address 192.168.1.191/24 gateway 192.168.1.254 bridge-ports eno1 bridge-stp off bridge-fd 0 iface enp101s0f0 inet manual iface enp101s0f1 inet manual iface enp23s0f0 inet manual iface enp23s0f1 inet manual iface eno2 inet manual iface enp182s0f0 inet manual iface enp182s0f1 inet manual é‡å¯æœºå™¨ ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:4","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["pve"],"content":"4.pveä¸­è™šæ‹Ÿæœºæ— æ³•å…³é—­ï¼Œè§£å†³æ–¹æ³•ã€‚ åˆ é™¤è™šæ‹ŸæœºIDå¯¹åº”çš„é…ç½®æ–‡ä»¶ rm /var/lock/qemu-server/lock-102.confÂ #102æ˜¯ä½ çš„è™šæ‹Ÿæœºç¼–å· ç„¶åå…³é—­è™šæ‹Ÿæœº qm stop 102 ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:5","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["pve"],"content":"5.centos7.9å¸¸ç”¨å·¥å…·ä¸€é”®å®‰è£… yum -y install wget gcc gcc-c++ pcre pcre-devel zlib zlib-devel ruby openssl openssl-devel patch lsof unzip zip lrzsz bash-completion net-tools nmap-ncat ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:6","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["pve"],"content":"6.Proxmox VE 7.2 iso é•œåƒé‡ç½® pve rootå¯†ç  uç›˜å¼•å¯¼è¿›å…¥pveå®‰è£…ç•Œé¢ï¼Œé€‰æ‹©Advanced Optionsã€‚ é€‰æ‹© Debug mode è¿›å…¥åå‘ç°é»˜è®¤åœ¨/è·¯å¾„ä¸‹ï¼Œç»§ç»­æŒ‰CTRL Dï¼Œè¿›å…¥root@proxmox:/ éªŒè¯LVMå¹¶æŒ‚è½½ #æŸ¥çœ‹VGï¼Œè¾“å‡ºåº”è¯¥æ˜¯æœ‰VG PVE vgs #æŸ¥çœ‹LVï¼Œå¯ä»¥çœ‹åˆ° data root lvs æ¿€æ´»VG vgchange -a y æŒ‚è½½lvm mount /dev/mapper/pve-root /mnt chroot chroot /mnt ä¿®æ”¹rootå¯†ç ï¼Œæ›´æ”¹å®Œæˆå¯†ç é‡å¯æœåŠ¡å™¨ passwd root ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:7","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["pve"],"content":"7.Proxmoxé›†ç¾¤éƒ¨åˆ†èŠ‚ç‚¹å‡ºç°é—®å· å†³å®špveä¸ŠçŠ¶æ€çš„æœåŠ¡æ˜¯pvestat daemonï¼Œä¹Ÿå°±æ˜¯pvestatdï¼Œå› æ­¤æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶å†µï¼Œæœç„¶æœ‰é—®é¢˜ï¼ root@www:~# service pvestatd status â— pvestatd.service - PVE Status Daemon Loaded: loaded (/lib/systemd/system/pvestatd.service; enabled; vendor preset: enabled) Active: failed (Result: signal) since Wed 2022-11-16 09:23:04 CST; 10min ago Process: 1146 ExecStart=/usr/bin/pvestatd start (code=killed, signal=KILL) CPU: 286ms Nov 16 09:23:03 www systemd[1]: Starting PVE Status Daemon... Nov 16 09:23:04 www systemd[1]: pvestatd.service: Control process exited, code=killed, status=9/KILL Nov 16 09:23:04 www systemd[1]: pvestatd.service: Failed with result 'signal'. Nov 16 09:23:04 www systemd[1]: Failed to start PVE Status Daemon. é‡å¯è¯¥æœåŠ¡çŠ¶æ€æ¢å¤æ­£å¸¸ root@www:~# service pvestatd restart root@www:~# service pvestatd status â— pvestatd.service - PVE Status Daemon Loaded: loaded (/lib/systemd/system/pvestatd.service; enabled; vendor preset: enabled) Active: active (running) since Wed 2022-11-16 09:34:06 CST; 1s ago Process: 1510 ExecStart=/usr/bin/pvestatd start (code=exited, status=0/SUCCESS) Main PID: 1511 (pvestatd) Tasks: 1 (limit: 18701) Memory: 79.2M CPU: 851ms CGroup: /system.slice/pvestatd.service â””â”€1511 pvestatd Nov 16 09:34:05 www systemd[1]: Starting PVE Status Daemon... Nov 16 09:34:06 www pvestatd[1511]: starting server Nov 16 09:34:06 www systemd[1]: Started PVE Status Daemon. ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:8","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["pve"],"content":"8.è§£å†³pveåˆ›å»ºçš„è™šæ‹Ÿæœºæ— æ³•å¤åˆ¶ç²˜è´´ é…ç½®xterm.js PVEåˆ›å»ºè™šæ‹Ÿæœºåé»˜è®¤åªæœ‰novncæ–¹æ³•è¿æ¥è™šæ‹Ÿæœºï¼Œæ— æ³•å¤åˆ¶ç²˜è´´ï¼Œå¾ˆä¸æ–¹ä¾¿ï¼Œå› æ­¤å¯ä»¥æ‰“å¼€xterm.jsçš„æ–¹å¼å¼¥è¡¥æ­¤ç¼ºé™·ã€‚ å…³é—­ VMï¼Œå¹¶ä¸”æ–°å¢ serial port ç»™ VM åœ¨PVE Host ä¸­ç”¨ qm å‘½ä»¤å»ºç«‹ serial portï¼Œå‡è®¾æˆ‘çš„ VM ID æ˜¯ 100 qm set 100 -serial0 socket é‡æ–°å¼€å¯ VMï¼Œç”¨ dmesg éªŒè¯æ˜¯å¦æœ‰ ttyS å‡ºç°ã€‚ dmesg | grep ttyS å¦‚æœå‡ºç°å¦‚ä¸‹ä»£è¡¨æœ‰äº† [ 3.521757] 00:04: ttyS0 at I/O 0x3f8 (irq = 4, base_baud = 115200) is a 16550A æ¥ä¸‹æ¥é…ç½®VMçš„grubï¼Œè¿›å…¥VMçš„ssh cd /etc/default/ vi grub ä¿®æ”¹grubä¸­çš„GRUB_CMDLINE_LINUXå€¼ GRUB_CMDLINE_LINUX=\"quiet console=tty0 console=ttyS0,115200â€ æ›´æ–°grub debian based update-grub redhat based grub2-mkconfig --output=/boot/grub2/grub.cfg åœ¨è™šæ‹Ÿæœºæ·»åŠ  /etc/init/ttyS0.conf å¹¶æ·»åŠ å¦‚ä¸‹ # ttyS0 - getty # # This service maintains a getty on ttyS0 from the point the system is # started until it is shut down again. start on stopped rc RUNLEVEL=[12345] stop on runlevel [!12345] respawn exec /sbin/getty -L 115200 ttyS0 vt102 è®¾ç½®è‡ªå¯åŠ¨ systemctl enable serial-getty@ttyS0.service systemctl start serial-getty@ttyS0.service é‡å¯VMï¼Œæµ‹è¯•xtermï¼Œå·²ç»å¯ä»¥ç”¨ã€‚ å®˜æ–¹æ–‡æ¡£å¦‚ä¸‹ï¼šhttps://pve.proxmox.com/wiki/Serial_Terminal ","date":"2022-11-11","objectID":"/pve%E4%BC%98%E5%8C%96/:0:9","tags":["pve"],"title":"pveä¼˜åŒ–","uri":"/pve%E4%BC%98%E5%8C%96/"},{"categories":["linux"],"content":"centos7.9æ¢å¤æ—§ç½‘å¡åç§°æ˜¾ç¤ºåŠç½‘å£ä¹±åºè§£å†³æ–¹æ³• æ¢å›æ—§ç‰ˆç½‘å¡åç§° grubby --update-kernel=ALL --args=\"net.ifnames=0 biosdevname=0\" ä¿®æ”¹/etc/sysconfig/network-scripts/ä¸­çš„ç½‘å¡é…ç½®æ–‡ä»¶ [root@QZ network-scripts]# cat ifcfg-lan0 TYPE=\"Ethernet\" BOOTPROTO=\"static\" DEFROUTE=\"yes\" NAME=\"lan0\" DEVICE=\"lan0\" ONBOOT=\"yes\" IPADDR=192.168.242.130 NETWORK=255.255.255.0 GATEWAY=192.168.242.1 [root@QZ network-scripts]# cat ifcfg-lan1 TYPE=\"Ethernet\" BOOTPROTO=\"static\" DEFROUTE=\"yes\" NAME=\"lan1\" DEVICE=\"lan1\" ONBOOT=\"yes\" IPADDR=192.168.35.130 NETWORK=255.255.255.0 GATEWAY=192.168.35.2 DNS1=192.168.35.2 [root@QZ network-scripts]# cat ifcfg-lan2 TYPE=\"Ethernet\" BOOTPROTO=\"static\" DEFROUTE=\"yes\" NAME=\"lan2\" DEVICE=\"lan2\" ONBOOT=\"yes\" IPADDR=192.168.242.131 NETWORK=255.255.255.0 é‡å¯è®¾å¤‡ reboot å¸¦æœ‰å…‰å£çš„ç‰©ç†æœåŠ¡å™¨ç»å¸¸ä¼šé‡åˆ°ç½‘å£ä¹±åºç°è±¡ã€‚è§£å†³æ–¹æ³•ï¼š vi /etc/systemd/network/10-lan0.link [Match] MACAddress=00:0c:29:36:a6:c7 [Link] Name=lan0 vi /etc/systemd/network/11-lan1.link [Match] MACAddress=00:0c:29:36:a6:b3 [Link] Name=lan1 [Match] MACAddress=00:0c:29:36:a6:bd vi /etc/systemd/network/12-lan2.link [Link] Name=lan2 æœ€ååˆ›å»ºå¯¹åº”åç§°çš„ç½‘å¡é…ç½®æ–‡ä»¶ï¼Œé‡å¯è®¾å¤‡ã€‚ ","date":"2022-11-01","objectID":"/centos7.9%E6%9B%B4%E6%8D%A2%E7%BD%91%E5%8D%A1%E5%90%8D%E7%A7%B0/:0:0","tags":["centos7"],"title":"centos7.9æ›´æ¢ç½‘å¡åç§°","uri":"/centos7.9%E6%9B%B4%E6%8D%A2%E7%BD%91%E5%8D%A1%E5%90%8D%E7%A7%B0/"},{"categories":["linux"],"content":"å°†centos7ç½‘å¡æ”¹å›eth0æ˜¾ç¤º grubby --update-kernel=ALL --args=\"net.ifnames=0 biosdevname=0\" å®éªŒç¯å¢ƒâ€“\u003enet.ifnames=0 ç‰©ç†ç¯å¢ƒdellâ€”\u003ebiosdevname=0 net.ifnames=0 äº‘ç¯å¢ƒâ€”â€”\u003e é»˜è®¤éƒ½æ˜¯eth0 eth1 ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶çš„åç§° mv /etc/sysconfig/network-scripts/ifcfg-ens32 /etc/sysconfig/network-scripts/ifcfg-eth0 ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶ä¸­è®¾å¤‡çš„åå­— sed -i 's#ens32#eth0#g' /etc/sysconfig/network-scripts/ifcfg-eth0 é‡å¯è®¾å¤‡ ç½‘å¡é…ç½®å®ä¾‹ NAME=eth0 DEVICE=eth0 ONBOOT=yes BOOTPROTO=static IPADDR=192.168.1.192 NETMASK=255.255.255.0 GATEWAY=192.168.1.254 DNS1=114.114.114.114 TYPE=Ethernet æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ cat /proc/net/dev ","date":"2022-10-26","objectID":"/centos7%E7%BD%91%E5%8D%A1%E6%94%B9%E5%9B%9Eeth0%E6%98%BE%E7%A4%BA/:1:0","tags":["centos7"],"title":"centos7ç½‘å¡æ”¹å›eth0æ˜¾ç¤º","uri":"/centos7%E7%BD%91%E5%8D%A1%E6%94%B9%E5%9B%9Eeth0%E6%98%BE%E7%A4%BA/"},{"categories":["å·¥å…·"],"content":"rsyslogæ—¥å¿—æœåŠ¡å™¨æ­å»º rsyslogå®¢æˆ·ç«¯ï¼šè´Ÿè´£å‘é€æ—¥å¿—åˆ°è¿œç¨‹æ—¥å¿—æœåŠ¡å™¨ï¼Œæ”¯æŒudp,tcp,relpåè®®ã€‚ rsyslogæœåŠ¡ç«¯ï¼šè´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„æ—¥å¿—å¹¶å­˜å‚¨åœ¨æœ¬åœ°ï¼Œæ”¯æŒæ–‡ä»¶å­˜å‚¨å’Œæ•°æ®åº“å­˜å‚¨æ–¹å¼ã€‚ ä¿å­˜æ—¥å¿—çš„è·¯å¾„æ ¼å¼ä¸ºï¼šæºIPåœ°å€/è®¾æ–½åï¼ˆæ—¥å¿—ç±»åˆ«ï¼‰/å¹´æœˆ.logã€‚ å®‰è£…rsyslogè½¯ä»¶ yum install rsyslog -y é…ç½®rsyslog.confæ–‡ä»¶ å¼€æ”¾514 tcp å’Œ udp ç›‘å¬ # Provides UDP syslog reception $ModLoad imudp $UDPServerRun 514 # Provides TCP syslog reception $ModLoad imtcp $InputTCPServerRun 514 æœåŠ¡ç«¯æ ¸å¿ƒé…ç½® #### GLOBAL DIRECTIVES #### # Where to place auxiliary files $WorkDirectory /var/lib/rsyslog # Use default timestamp format $ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat ##è¿™é‡Œæ˜¯æœåŠ¡ç«¯æ·»åŠ çš„é…ç½® begin # ä½¿ç”¨ RemoteLogs æ¨¡æ¿æ¥æ”¶å®¢æˆ·ç«¯çš„æ—¥å¿—ï¼Œä¿å­˜åˆ°æœ¬åœ°çš„/var/log/remoteç›®å½•ä¸‹ï¼Œæ¯å°å®¢æˆ·ç«¯çš„ip_å¹´ä»½_æœˆä»½_æ—¥æœŸçš„log $template RemoteLogs,\"/var/log/remote/%fromhost-ip%/%fromhost-ip%_%$YEAR%-%$MONTH%-%$DAY%.log\" # æ‰€æœ‰æœåŠ¡æ‰€æœ‰çº§åˆ«çš„æ—¥å¿—éƒ½è®°å½• *.* ?RemoteLogs #æœåŠ¡ç«¯æœ¬æœºçš„æ—¥å¿—ä¸è®°å½• :fromhost-ip, !isequal, \"127.0.0.1\" ?Remote #æŒ‡ç¤ºrsyslogåœ¨å°†æ¶ˆæ¯å†™å…¥æ–‡ä»¶ååœæ­¢å¤„ç†æ¶ˆæ¯ï¼Œå¦‚æœä¸åŒ…å«\"\u0026 ~\",åˆ™æ¶ˆæ¯å°†è¢«å†™å…¥æœ¬åœ°æ–‡ä»¶ï¼Œå¯¼è‡´æ¶ˆæ¯è¢«è®°å½•2æ¬¡ã€‚ \u0026 ~ ## è¿™é‡Œæ˜¯æœåŠ¡ç«¯æ·»åŠ çš„é…ç½® end é‡å¯rsyslogæœåŠ¡ systemctl restart rsyslog æœ€ååˆ°é…ç½®ç›®å½•ä¸‹æŸ¥çœ‹æ˜¯å¦æœ‰æ—¥å¿—ç”Ÿæˆ [root@localhost 127.0.0.1]# ll total 4 -rw------- 1 root root 1639 Oct 25 10:01 127.0.0.1_2022-10-25.log [root@localhost 127.0.0.1]# pwd /var/log/remote/127.0.0.1 rsyslogå®¢æˆ·ç«¯é…ç½® è¡¨ç¤ºå°†ç”¨æˆ·ç™»å½•æ—¥å¿—å’Œå®šæ—¶ä»»åŠ¡æ—¥å¿—å‘é€åˆ°192.168.1.74çš„514ç«¯å£ï¼Œé»˜è®¤é‡‡ç”¨TCPè¿›è¡Œå‘é€ã€‚ vi /etc/rsyslog.conf ###rule for 192.168.1.74 ### auth.*;authpriv.*;cron.* @@192.168.1.74:514 ","date":"2022-10-25","objectID":"/rsyslog%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/:1:0","tags":["rsyslog"],"title":"rsyslogæ—¥å¿—æœåŠ¡å™¨æ­å»º","uri":"/rsyslog%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/"},{"categories":["å·¥å…·"],"content":"å®‰è£…inxi $ sudo apt-get install inxi [On Debian/Ubuntu/Linux Mint] $ sudo yum install inxi [On CentOs/RHEL/Fedora] $ sudo dnf install inxi [On Fedora 22+] æŸ¥çœ‹ Inxi æ‰€æœ‰ä¾èµ–å’Œæ¨èçš„åº”ç”¨ï¼Œä»¥åŠå„ç§ç›®å½•ï¼Œå¹¶æ˜¾ç¤ºéœ€è¦å®‰è£…å“ªäº›åŒ…æ¥æ”¯æŒç»™å®šçš„åŠŸèƒ½ã€‚ $ inxi --recommends è¾“å‡ºå¦‚ä¸‹ inxi will now begin checking for the programs it needs to operate. Check inxi --help or the man page (man inxi) to see what options are available. ------------------------------------------------------------------------------ Test: core tools: Perl version: 5.016003 Current shell: Default shell: bash sh links to: /usr/bin/bash Package manager: rpm ------------------------------------------------------------------------------ Test: required system directories: /proc: ........................................................... Present /sys: ............................................................ Present All required system directories are present ------------------------------------------------------------------------------ Test: recommended system programs: Note: IPMI sensors are generally only found on servers. To access that data, you only need one of the ipmi items. blockdev: --admin -p/-P (filesystem blocksize).................... Present bt-adapter: -E bluetooth data (if no hciconfig)................... Missing dig: -i wlan IP................................................... Present dmidecode: -M if no sys machine data; -m.......................... Present doas: -Dx hddtemp-user; -o file-user (alt for sudo)............... Missing fdisk: -D partition scheme (fallback)............................. Present file: -o unmounted file system (if no lsblk)...................... Present fruid_print: -M machine data, Elbrus only......................... Missing hciconfig: -E bluetooth data (deprecated, good report)............ Present hddtemp: -Dx show hdd temp, if no drivetemp module................ Present ifconfig: -i ip LAN (deprecated).................................. Present ip: -i ip LAN..................................................... Present ipmitool: -s IPMI sensors (servers)............................... Present ipmi-sensors: -s IPMI sensors (servers)........................... Present lsblk: -L LUKS/bcache; -o unmounted file system (best option)..... Present lsusb: -A usb audio; -J (optional); -N usb networking............. Present lvs: -L LVM data.................................................. Missing mdadm: -Ra advanced mdraid data................................... Missing modinfo: Ax; -Nx module version................................... Present runlevel: -I fallback to Perl..................................... Present sensors: -s sensors output........................................ Present smartctl: -Da advanced data....................................... Missing strings: -I sysvinit version...................................... Present sudo: -Dx hddtemp-user; -o file-user (try doas!).................. Present tree: --debugger 20,21 /sys tree.................................. Missing upower: -sx attached device battery info.......................... Present uptime: -I uptime................................................. Present The following recommended system programs are missing: Program: bt-adapter ~ Install package: bluez-tools Program: doas ~ Install package: doas Program: fruid_print ~ Install package: N/A Program: lvs ~ Install package: lvm2 Program: mdadm ~ Install package: mdadm Program: smartctl ~ Install package: smartmontools Program: tree ~ Install package: tree ------------------------------------------------------------------------------ Test: recommended display information programs: glxinfo: -G (X) glx info.......................................... Present wmctrl: -S active window manager (fallback)....................... Present xdpyinfo: -G (X) Screen resolution, dpi; -Ga Screen size.......... Present xprop: -S (X) desktop data........................................ Present xrandr: -G (X) monitors(s) resolution; -Ga monitor data........... Present All recom","date":"2022-10-21","objectID":"/%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E5%B7%A5%E5%85%B7-inxi/:1:0","tags":["ç¡¬ä»¶ä¿¡æ¯è·å–å·¥å…·inxi"],"title":"åŠŸèƒ½å¼ºå¤§çš„ç¡¬ä»¶ä¿¡æ¯è·å–å·¥å…·-inxi","uri":"/%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E5%B7%A5%E5%85%B7-inxi/"},{"categories":["å·¥å…·"],"content":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™ ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:0:1","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"å®‰è£…ç¯‡ æ“ä½œç³»ç»Ÿç¯å¢ƒ centos 7.9 mini å®‰è£…vsftpæœåŠ¡ yum install â€“y vsftpd ftp â€“å®‰è£… systemctl start vsftpd.service â€“å¯åŠ¨ systemctl enable vsftpd.service â€“å¼€æœºè‡ªå¯ vi /etc/selinux/conf SELINUX=enforce æ”¹æˆ SELINUX=disabled getenforce - æŸ¥çœ‹æ˜¯å¦ä¸ºDisabled ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:1:0","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"å®ç°ç¯‡ ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:0","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"1.è¦å®ç°çš„åŠŸèƒ½ admin_rootï¼š/home/download/ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹åŠæ–‡ä»¶å…·æœ‰ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤æƒé™ admin_001ï¼š/home/download/admin_001/ä¸‹çš„æ–‡ä»¶å…·æœ‰ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤æƒé™ download_rootï¼š/home/download/ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹åŠæ–‡ä»¶å…·æœ‰ä¸‹è½½æƒé™ download_001ï¼š/home/download/admin_001/ä¸‹çš„æ–‡ä»¶å…·æœ‰ä¸‹è½½æƒé™ ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:1","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"2.é¦–å…ˆåˆ›å»ºä¸€ä¸ªæœ¬åœ°ç³»ç»Ÿç”¨æˆ·abcdeå¹¶æŒ‡å®šå…¶å®¶ç›®å½•ï¼Œå¹¶å»ºç«‹ç›¸åº”çš„å­ç›®å½• useradd -d /home/download abcde -s /sbin/nologin mkdir -p /home/download/admin_001 chown -R abcde: /home/download chmod 755 /home/download chmod 755 /home/download/* ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:2","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"3.åˆ›å»ºç”¨æˆ·æ•°æ®æ–‡ä»¶ï¼šï¼ˆä¸€è¡Œè´¦å·ä¸€è¡Œå¯†ç ï¼Œä¸è¦æœ‰ç©ºè¡Œï¼Œä¸è¦æœ‰ç©ºæ ¼ï¼‰ æ‰€æœ‰å¯†ç æ­¤å¤„ç¤ºä¾‹è®¾ä¸º123456ã€‚ vim /etc/vsftpd/userlist.txt admin_root 123456 admin_001 123456 download_root 123456 download_001 123456 ç„¶åç”Ÿæˆæ•°æ®æ–‡ä»¶ db_loadï¼šä¸€èˆ¬ç³»ç»Ÿéƒ½æœ‰å®‰è£…ï¼Œdb4ï¼Œdb4-develï¼Œdb4-utils ï¼Œå¦‚æœæ²¡æœ‰çš„è¯å¯ä»¥å®‰è£…ï¼š yum -y install db4* db_load -T -t hash -f /etc/vsftpd/userlist.txt /etc/vsftpd/userlist.db 4ã€ä¿®æ”¹pamé…ç½® vim /etc/pam.d/vsftpd å°†åŸæ¥çš„å…¨éƒ¨æ³¨é‡Šæ‰ï¼ŒåŠ å…¥ auth sufficient /lib64/security/pam_userdb.so db=/etc/vsftpd/userlist account sufficient /lib64/security/pam_userdb.so db=/etc/vsftpd/userlist æ³¨æ„ï¼šdb=/etc/vsftpd/userlist åé¢çš„.dbå¿…é¡»å»æ‰ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åŒ¹é…*.dbæ–‡ä»¶ï¼Œ è¿™é‡Œåªéœ€è¦ç»™æ•°æ®æ–‡ä»¶åï¼Œå°±è¡Œäº†ã€‚ 64ä½æœºéœ€è¦ä½¿ç”¨lib64ï¼ˆè¿™é‡ŒæŠ˜è…¾äº†å¥½ä¹…ï¼Œæœ‰çš„æ˜¯libæœ‰çš„æ˜¯lib64ï¼‰; ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:3","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"5ã€åˆ›å»ºæœ¬åœ°ç³»ç»Ÿç”¨æˆ·abcdeå¯¹åº”çš„è™šæ‹Ÿè´¦æˆ· è™šæ‹Ÿç”¨æˆ·éœ€è¦é€šè¿‡æœ¬åœ°ç³»ç»Ÿç”¨æˆ·æ¥å®ç°å„ç§æ“ä½œ,å› æ­¤è¦æ”¾åœ¨ç³»ç»Ÿç”¨æˆ·çš„åŒåæ–‡ä»¶å¤¹ä¸‹ã€‚ mkdir -p /etc/vfstpd/abcde cd /etc/vfstpd/abcde æ¯ä¸€ä¸ªè™šæ‹Ÿç”¨æˆ·éƒ½è¦æœ‰ä¸€ä¸ªåŒåçš„æ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œè®°è½½å…¶æƒé™ä»¥åŠå¯æ“ä½œçš„ç›®å½•ï¼› æœ¬ä¾‹å¦‚ä¸‹æ‰§è¡Œï¼Œä¸¤ä¸ªÂ»å’ŒÂ«ä¹‹é—´ä¸è¦æœ‰ç©ºæ ¼ åˆ›å»ºæœ‰ä¸Šä¼ ä¸‹è½½æƒé™çš„ç”¨æˆ· cat \u003e\u003eadmin_root\u003c\u003cEOF anon_world_readable_only=NO write_enable=YES anon_mkdir_write_enable=YES anon_upload_enable=YES anon_other_write_enable=YES local_root=/home/download EOF cat \u003e\u003eadmin_001\u003c\u003cEOF anon_world_readable_only=NO write_enable=YES anon_mkdir_write_enable=YES anon_upload_enable=YES anon_other_write_enable=YES local_root=/home/download/admin_001 EOF åˆ›å»ºåªæœ‰ä¸‹è½½æƒé™çš„ç”¨æˆ· cat \u003e\u003edownload_root\u003c\u003cEOF anon_world_readable_only=NO local_root=/home/download EOF cat \u003e\u003edownload_001\u003c\u003cEOF anon_world_readable_only=NO local_root=/home/download/admin_001 EOF ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:4","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"6ã€è®¾ç½®é…ç½®æ–‡ä»¶vsftpd.conf vim /etc/vsftpd/vsftpd.conf ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š listen=YES connect_from_port_20=YES anonymous_enable=NO local_enable=YES write_enable=NO anon_upload_enable=NO anon_mkdir_write_enable=NO anon_other_write_enable=NO chroot_local_user=YES chroot_list_enable=YES chroot_list_file=/etc/vsftpd/chroot_list guest_enable=YES guest_username=abcde virtual_use_local_privs=YES allow_writeable_chroot=YES pam_service_name=vsftpd user_config_dir=/etc/vsftpd/abcde local_umask=022 xferlog_enable=YES xferlog_file=/var/log/vsftpd.log pasv_promiscuous=YES touch /etc/vsftp/chroot_list é‡Œé¢å•¥ä¹Ÿä¸å†™ã€‚ ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:5","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"7ã€é‡æ–°å¯åŠ¨vsftpd service vsftpd restart ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:6","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"8.æµ‹è¯• æ‰€æœ‰ç”¨æˆ·åªèƒ½è¿›å…¥è‡ªå·±å®¶ç›®å½•ä¸èƒ½è¿›å…¥ä¸Šä¸€çº§ç›®å½•ï¼› admin_rootå¯¹äº/home/downloadä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹å…·æœ‰ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤æƒé™ï¼› admin_001å¯¹äº/home/download/ä¸‹çš„åŒåæ–‡ä»¶å¤¹å…·æœ‰ä¸Šä¼ ã€åˆ é™¤æƒé™ï¼Œæ— å…¶ä»–æƒé™ï¼› download_rootå¯¹äº/home/downloadä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹å…·æœ‰ä¸‹è½½æƒé™ï¼Œä¸èƒ½ä¸Šä¼ æˆ–åˆ é™¤ä»»ä½•å†…å®¹ï¼Œä¸èƒ½å¯¹å…¶ä»–ä»»ä½•æ–‡ä»¶å¤¹æ“ä½œï¼› download_001å¯¹äº/home/download/ä¸‹çš„admin_001æ–‡ä»¶å¤¹åˆ†åˆ«å…·æœ‰ä¸‹è½½æƒé™ï¼Œä¸èƒ½ä¸Šä¼ æˆ–åˆ é™¤ä»»ä½•å†…å®¹ï¼Œä¸èƒ½å¯¹å…¶ä»–ä»»ä½•æ–‡ä»¶å¤¹æ“ä½œã€‚ ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:7","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"9.æ—¥å¸¸ç»´æŠ¤ ï¼ˆ1ï¼‰æ›´æ–°å¸å·ï¼Œå…ˆä¿®æ”¹userlist.txtï¼Œå†æ‰§è¡Œdb_load db_load -T -t hash -f /etc/vsftpd/userlist.txt /etc/vsftpd/userlist.db ï¼ˆ2ï¼‰æ›´æ–°/etc/vsftpd/abcde/ä¸‹ä¸åŒç”¨æˆ·å¯¹åº”çš„æƒé™ ï¼ˆ3ï¼‰é‡å¯vsftpd systemctl start vsftpd.service ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:8","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"10.åŠ å¯†è¿æ¥ ç”Ÿæˆè¯ä¹¦ openssl req -x509 -nodes -days 365 -newkey rsa:1024 \\ -keyout /etc/vsftpd/vsftpd.pem \\ -out /etc/vsftpd/vsftpd.pem å…¶ä¸­\"-days 365\"å£°æ˜è¯ä¹¦çš„æœ‰æ•ˆæœŸæ˜¯ä¸€å¹´ã€‚ æ¥ä¸‹æ¥çš„è¿‡ç¨‹éœ€è¦ä½ è¾“å…¥ä¸€äº›ç›¸å…³çš„å›½å®¶ï¼Œåœ°åŒºï¼Œä½ç½®ï¼Œç»„ç»‡åç§°ï¼Œcommon nameç­‰ä¿¡æ¯ã€‚ å›ç­”è¿™äº›ä¿¡æ¯ä»¥åç³»ç»Ÿä¼šå°†ç”Ÿæˆå®Œçš„è¯ä¹¦vsftpd.pemæ–‡ä»¶ä¿å­˜åœ¨/etc/vsftpdç›®å½•ä¸‹ã€‚ ä¿®æ”¹/etc/vsftpd/vsftpd.confæ–‡ä»¶,å¢åŠ ä»¥ä¸‹å†…å®¹ ssl_enable=YES allow_anon_ssl=NO force_local_data_ssl=NO force_local_logins_ssl=NO ssl_tlsv1=YES ssl_sslv2=NO ssl_sslv3=NO rsa_cert_file=/etc/vsftpd/vsftpd.pem å¦‚æœè®¾ç½®force_local_logins_ssl=YESï¼Œé‚£ä¹ˆä¼šå¼ºåˆ¶ç”¨æˆ·ç™»å½•æ—¶é‡‡ç”¨æ”¯æŒTLS/SSLè®¤è¯çš„ftpå®¢æˆ·ç«¯ã€‚å¦‚æœè®¾ç½®ä¸ºNOçš„è¯ï¼Œåˆ™ç”¨æˆ·å¯ä»¥é€‰æ‹©ä½¿ç”¨sslåŠ å¯†æˆ–è€…ä¸åŠ å¯†ã€‚ æ­¤æ—¶é€‰æ‹©ä¸åŠ å¯†ç™»å½•ä¼šæœ‰å¤±è´¥æç¤º Non-anonymous sessions must use encryption. é‡å¯æœåŠ¡ systemctl restart vsftpd ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£ listen_port=10021 ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:9","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["å·¥å…·"],"content":"vsftpd 425 Security: Bad IP connectingè§£å†³æ–¹æ³• é—®é¢˜åˆ†æ: FTPå®¢æˆ·ç«¯è½¯ä»¶è¿æ¥vsftpdæœåŠ¡æŠ¥æ­¤é”™è¯¯ï¼Œå¤§æ¦‚åŸå› æ˜¯åœ¨è¿æ¥ä¸­å˜æ¢äº†IPåœ°å€ã€‚ é—®é¢˜è§£å†³ æœåŠ¡ç«¯æ·»åŠ ï¼š vi /etc/vsftpd/vsftpd.conf pasv_promiscuous=YES é‡å¯æœåŠ¡ systemctl restart vsftpd pasv_promiscuousé€‰é¡¹å‚æ•°è¯´æ˜ æ­¤é€‰é¡¹æ¿€æ´»æ—¶ï¼Œå°†å…³é—­PASVæ¨¡å¼çš„å®‰å…¨æ£€æŸ¥ã€‚è¯¥æ£€æŸ¥ç¡®ä¿æ•°æ®è¿æ¥å’Œæ§åˆ¶è¿æ¥æ˜¯æ¥è‡ªåŒä¸€ä¸ªIPåœ°å€ã€‚å°å¿ƒæ‰“å¼€æ­¤é€‰é¡¹ã€‚æ­¤é€‰é¡¹å”¯ä¸€åˆç†çš„ç”¨æ³•æ˜¯å­˜åœ¨äºç”±å®‰å…¨éš§é“æ–¹æ¡ˆæ„æˆçš„ç»„ç»‡ä¸­ã€‚é»˜è®¤å€¼ä¸ºNOã€‚ åˆç†çš„ç”¨æ³•æ˜¯ï¼šåœ¨ä¸€äº›å®‰å…¨éš§é“é…ç½®ç¯å¢ƒä¸‹ï¼Œæˆ–è€…æ›´å¥½åœ°æ”¯æŒFXPæ—¶(æ‰å¯ç”¨å®ƒ)ã€‚ FTPæ¨¡å¼ä¸æ•°æ®ç«¯å£ FTP åˆ†ä¸ºä¸¤ç±»ï¼ŒPORT FTPå’ŒPASV FTPï¼ŒPORT FTPæ˜¯ä¸€èˆ¬å½¢å¼çš„FTPã€‚è¿™ä¸¤ç§FTPåœ¨å»ºç«‹æ§åˆ¶è¿æ¥æ—¶æ“ä½œæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ç”±å®¢æˆ·ç«¯é¦–å…ˆå’ŒFTPæœåŠ¡å™¨çš„æ§åˆ¶ç«¯å£(é»˜è®¤å€¼ä¸º21)å»ºç«‹æ§åˆ¶é“¾æ¥ï¼Œå¹¶é€šè¿‡æ­¤é“¾æ¥è¿›è¡Œä¼ è¾“æ“ä½œæŒ‡ä»¤ã€‚å®ƒä»¬çš„åŒºåˆ«åœ¨äºä½¿ç”¨æ•°æ®ä¼ è¾“ç«¯å£(ftp- data)çš„æ–¹å¼ã€‚PORT FTPç”±FTPæœåŠ¡å™¨æŒ‡å®šæ•°æ®ä¼ è¾“æ‰€ä½¿ç”¨çš„ç«¯å£ï¼Œé»˜è®¤å€¼ä¸º20ã€‚PASV FTPç”±FTPå®¢æˆ·ç«¯å†³å®šæ•°æ®ä¼ è¾“çš„ç«¯å£ã€‚ PASV FTPè¿™ç§åšæ³•ï¼Œä¸»è¦æ˜¯è€ƒè™‘åˆ°å­˜åœ¨é˜²ç«å¢™çš„ç¯å¢ƒä¸‹ï¼Œç”±å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨è¿›è¡Œæ²Ÿé€š(å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºæ•°æ®ä¼ è¾“è¯·æ±‚ä¸­åŒ…å«äº†æ•°æ®ä¼ è¾“ç«¯å£)ï¼Œå†³å®šä¸¤è€…ä¹‹é—´çš„æ•°æ®ä¼ è¾“ç«¯å£æ›´ä¸ºæ–¹ä¾¿ä¸€äº›ã€‚ ","date":"2022-10-15","objectID":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/:2:10","tags":["vsftp"],"title":"VSFTPä¸åŒç”¨æˆ·æ‹¥æœ‰ä¸åŒæƒé™","uri":"/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/"},{"categories":["linux"],"content":"Linuxå°æŠ€å·§æ±‡æ€» ","date":"2022-10-08","objectID":"/linux%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB/:0:1","tags":["linuxå°æŠ€å·§"],"title":"linuxå°æŠ€å·§æ±‡æ€»","uri":"/linux%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB/"},{"categories":["linux"],"content":"1.è¶…æ—¶ä¸æ“ä½œè‡ªåŠ¨é€€å‡ºç™»å½•TMOUT vi /etc/profile æœ€åä¸€è¡ŒåŠ ä¸Š TMOUT=90 é€€å‡ºå½“å‰ç”¨æˆ·ä½¿é…ç½®ç”Ÿæ•ˆ exit é‡æ–°ç™»å½• æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ set | grep -i tmout TMOUT=90 ç”Ÿæ•ˆäº†ï¼ï¼ï¼ä¸æ“ä½œç­‰å¾…90sä¼šè‡ªåŠ¨é€€å‡ºå½“å‰ç”¨æˆ·ï¼ï¼ å¦‚ä½•å–æ¶ˆå‘¢ï¼Ÿ åªè¦å°†/etc/profileæ–‡ä»¶ä¸­TMOUT=90åˆ é™¤ï¼Œç„¶åé€€å‡ºä½¿ä¹‹ç”Ÿæ•ˆã€‚å†æ¬¡æµ‹è¯•å³å¯ã€‚ ","date":"2022-10-08","objectID":"/linux%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB/:0:2","tags":["linuxå°æŠ€å·§"],"title":"linuxå°æŠ€å·§æ±‡æ€»","uri":"/linux%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB/"},{"categories":["å·¥å…·"],"content":"å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼ ","date":"2022-09-15","objectID":"/%E4%BD%BF%E7%94%A8sed%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E7%BD%91%E5%9D%80/:0:1","tags":["sed"],"title":"ä½¿ç”¨sedæ‰¹é‡ä¿®æ”¹ç½‘å€","uri":"/%E4%BD%BF%E7%94%A8sed%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E7%BD%91%E5%9D%80/"},{"categories":["å·¥å…·"],"content":"æ–‡æœ¬å¦‚ä¸‹ https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article1.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article2.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article3.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article4.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article5.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article6.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article7.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article8.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article9.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article10.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article11.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article12.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/article13.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/animal.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/blue.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/cat.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/coffee.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/finch.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/lighthouse.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/nature.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/soda-water.jpg https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img/swan.jpg å°†https://fastly.jsdelivr.netéƒ½ä¿®æ”¹ä¸ºhttps://qq.com sed -i -e \"s/https:\\/\\/fastly.jsdelivr.net/https:\\/\\/qq.com/\" img.txt ç»“æœå¦‚ä¸‹ï¼š https://qq.com/gh/Smithkenny/Myimage/img/article1.jpg https://qq.com/gh/Smithkenny/Myimage/img/article2.jpg https://qq.com/gh/Smithkenny/Myimage/img/article3.jpg https://qq.com/gh/Smithkenny/Myimage/img/article4.jpg https://qq.com/gh/Smithkenny/Myimage/img/article5.jpg https://qq.com/gh/Smithkenny/Myimage/img/article6.jpg https://qq.com/gh/Smithkenny/Myimage/img/article7.jpg https://qq.com/gh/Smithkenny/Myimage/img/article8.jpg https://qq.com/gh/Smithkenny/Myimage/img/article9.jpg https://qq.com/gh/Smithkenny/Myimage/img/article10.jpg https://qq.com/gh/Smithkenny/Myimage/img/article11.jpg https://qq.com/gh/Smithkenny/Myimage/img/article12.jpg https://qq.com/gh/Smithkenny/Myimage/img/article13.jpg https://qq.com/gh/Smithkenny/Myimage/img/animal.jpg https://qq.com/gh/Smithkenny/Myimage/img/blue.jpg https://qq.com/gh/Smithkenny/Myimage/img/cat.jpg https://qq.com/gh/Smithkenny/Myimage/img/coffee.jpg https://qq.com/gh/Smithkenny/Myimage/img/finch.jpg https://qq.com/gh/Smithkenny/Myimage/img/lighthouse.jpg https://qq.com/gh/Smithkenny/Myimage/img/nature.jpg https://qq.com/gh/Smithkenny/Myimage/img/soda-water.jpg https://qq.com/gh/Smithkenny/Myimage/img/swan.jpg ","date":"2022-09-15","objectID":"/%E4%BD%BF%E7%94%A8sed%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E7%BD%91%E5%9D%80/:0:2","tags":["sed"],"title":"ä½¿ç”¨sedæ‰¹é‡ä¿®æ”¹ç½‘å€","uri":"/%E4%BD%BF%E7%94%A8sed%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E7%BD%91%E5%9D%80/"},{"categories":["ç¼–ç¨‹"],"content":"å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼ import time print(time.time()) # ç”Ÿæˆå½“å‰æ—¥æœŸçš„æ—¶é—´æˆ³ 1662602249.6098158 print(time.actime(1662602249.6098158)) #å°†æ—¶é—´æˆ³è½¬æ¢æˆæŒ‡å®šæ ¼å¼æ˜¾ç¤º ","date":"2022-09-08","objectID":"/%E4%BD%BF%E7%94%A8python%E5%AE%9E%E7%8E%B0unix%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2/:0:1","tags":["python"],"title":"ä½¿ç”¨pythonå®ç°unixæ—¶é—´æˆ³è½¬æ¢","uri":"/%E4%BD%BF%E7%94%A8python%E5%AE%9E%E7%8E%B0unix%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2/"},{"categories":["ç¼–ç¨‹"],"content":"å…¶ä»–è½¬æ¢å‚è€ƒ https://www.cnblogs.com/pal-duan/p/10568829.html ","date":"2022-09-08","objectID":"/%E4%BD%BF%E7%94%A8python%E5%AE%9E%E7%8E%B0unix%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2/:0:2","tags":["python"],"title":"ä½¿ç”¨pythonå®ç°unixæ—¶é—´æˆ³è½¬æ¢","uri":"/%E4%BD%BF%E7%94%A8python%E5%AE%9E%E7%8E%B0unix%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2/"},{"categories":["linux"],"content":"å‡†å¤‡å·¥ä½œ k8sä¸»æœºå IPåœ°å€ ç³»ç»Ÿç‰ˆæœ¬å· k8sç»„ä»¶ç‰ˆæœ¬ CKS-master 10.4.7.180 ubuntu 20.04 1.24.4 CKS-node1 10.4.7.181 ubuntu 20.04 1.24.4 CKS-node2 10.4.7.182 ubuntu 20.04 1.24.4 ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:0:1","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"é…ç½®å‰å‡†å¤‡ # å¼€rootç”¨æˆ·è®¾ç½®å¯†ç  sudo passwd root # åˆ‡æ¢rootç”¨æˆ· su - root # æ›´æ–° apt update # å®‰è£…ssh apt install ssh -y # å…è®¸rootç”¨æˆ·è¿œç¨‹ç™»å½• PermitRootLogin yes UseDNS no # é‡å¯ systemctl restart ssh ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:0:2","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"é…ç½®åŸŸå # éœ€è¦å¯¹åº”çš„æœºå™¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ hostnamectl set-hostname CKS-master hostnamectl set-hostname CKS-node1 hostnamectl set-hostname CKS-node2 ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:0:3","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"åŸŸåè§£æ echo -e \"10.4.7.180 CKS-master\\n10.4.7.181 CKS-node1\\n10.4.7.182 CKS-node2\" \u003e\u003e /etc/hosts # æ‹·è´åˆ°è¿œç¨‹é›†ç¾¤æœºå™¨ scp /etc/hosts root@10.4.7.181:/etc/ scp /etc/hosts root@10.4.7.182:/etc/ ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:0:4","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"åˆå§‹åŒ–éƒ¨åˆ† # å…³é—­é˜²ç«å¢™ systemctl stop ufw.service \u0026\u0026 systemctl disable ufw.service iptables -F iptables-save # å…³é—­swap swapoff -a sed -ri 's/.*swap.*/#\u0026/' /etc/fstab ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:0:5","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"vncæœåŠ¡æ­å»ºï¼ˆé€‰åšï¼‰ # å®‰è£…vncè¿œç¨‹æœåŠ¡ apt install xfce4 xfce4-goodies -y # é€‰lightdm apt install tightvncserver -y # è®¾ç½®è¿œç¨‹å¯†ç  123qwe. # å¼€å¯è¿œç¨‹å‘ç°ç©ºç™½ vncserver # æ›´æ”¹é…ç½®æ–‡ä»¶ mv .vnc/xstartup .vnc/xstartup.bak nano .vnc/xstartup #!/bin/bash xrdb $HOME/.Xresources startxfce4 \u0026 # ç»™æƒé™ chmod +x .vnc/xstartup # æ€è¿›ç¨‹ vncserver -kill :2 # å†æ¬¡å¯åŠ¨è¿œç¨‹ vncserver # æµ‹è¯•ï¼šç”¨vncviewè¿æ¥ ip:2 ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:0:6","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"å®‰è£…containerd ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:0","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"è¿è¡Œæ—¶Runcå®‰è£… # ä¸‹è½½äºŒè¿›åˆ¶åŒ… https://github.com/opencontainers/runc/releases/download/ wget https://github.com/opencontainers/runc/releases/download/v1.1.3/runc.amd64 # æ‰§è¡ŒPathå’Œæƒé™è®¾ç½® mv runc.amd64 /usr/local/sbin/runc chmod +x /usr/local/sbin/runc ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:1","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"å®‰è£…å‰å‡†å¤‡ # æ·»åŠ åŠ è½½å†…æ ¸æ¨¡å— cat \u003c\u003c EOF | sudo tee /etc/modules-load.d/containerd.conf overlay br_netfilter EOF # åŠ è½½å†…æ ¸æ¨¡å— modprobe overlay modprobe br_netfilter #è®¾ç½®å†…æ ¸å‚æ•° cat \u003c\u003c EOF | sudo tee /etc/sysctl.d/99-kubernetes-cri.conf net.bridge.bridge-nf-call-iptables = 1 net.ipv4.ip_forward = 1 net.bridge.bridge-nf-call-ip6tables = 1 EOF # åº”ç”¨å†…æ ¸å‚æ•° sysctl --system ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:2","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"å¼€å§‹å®‰è£… # ä¸‹è½½äºŒè¿›åˆ¶åŒ… https://github.com/containerd/containerd/releases/ wget https://github.com/containerd/containerd/releases/download/v1.6.8/containerd-1.6.8-linux-amd64.tar.gz # è§£å‹ tar -zxvf containerd-1.6.8-linux-amd64.tar.gz # æ‰§è¡Œæ–‡ä»¶æ”¾ç½®ç³»ç»ŸPath mv ./bin/* /usr/local/bin/ # systemd æœåŠ¡å¯åŠ¨è„šæœ¬æ–‡ä»¶é…ç½® cat \u003e /lib/systemd/system/containerd.service \u003c\u003c EOF # Copyright The containerd Authors. # # Licensed under the Apache License, Version 2.0 (the \"License\"); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an \"AS IS\" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. [Unit] Description=containerd container runtime Documentation=https://containerd.io After=network.target local-fs.target [Service] ExecStartPre=-/sbin/modprobe overlay ExecStart=/usr/local/bin/containerd Type=notify Delegate=yes KillMode=process Restart=always RestartSec=5 # Having non-zero Limit*s causes performance problems due to accounting overhead # in the kernel. We recommend using cgroups to do container-local accounting. LimitNPROC=infinity LimitCORE=infinity LimitNOFILE=infinity # Comment TasksMax if your systemd version does not supports it. # Only systemd 226 and above support this version. TasksMax=infinity OOMScoreAdjust=-999 [Install] WantedBy=multi-user.target EOF ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:3","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"æ£€æµ‹ç‰ˆæœ¬ runc -v ctr -v ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:4","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"å¯åŠ¨ã€å…³é—­æœåŠ¡åŠæŸ¥çœ‹æœåŠ¡çŠ¶æ€ systemctl start containerd systemctl restart containerd systemctl status containerd systemctl enable containerd ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:5","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"æ›´æ¢å›½å†…é•œåƒä»“åº“ mkdir -p /etc/containerd/ containerd config default | sudo tee /etc/containerd/config.toml å°† sandbox_image = \"k8s.gcr.io/pause:3.6\" æ”¹ä¸º sandbox_image = \"registry.aliyuncs.com/google_containers/pause:3.6\" å°† systemd_cgroup = false æ”¹ä¸º systemd_cgroup = true é‡å¯containerd systemctl restart containerd ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:6","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"å®‰è£…cniæ’ä»¶(é€‰åš) wget https://github.com/containernetworking/plugins/releases/download/v1.1.1/cni-plugins-linux-amd64-v1.1.1.tgz mkdir -p /opt/cni/bin tar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.1.1.tgz ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:7","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"å®‰è£…ä¸‰ä»¶å¥—kubectl kubelet kubeadm apt-get update \u0026\u0026 apt-get install -y apt-transport-https curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - cat \u003c\u003cEOF \u003e/etc/apt/sources.list.d/kubernetes.list deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main EOF apt-get update # æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬ apt-cache madison kubelet apt-get install -y kubelet kubeadm kubectl systemctl enable kubelet # tabè¡¥å…¨ apt-get install bash-completion source \u003c(kubectl completion bash) source \u003c(kubeadm completion bash) # åŠ åˆ°.bashrc é‡Œ nano .bashrc source \u003c(kubeadm completion bash) source \u003c(kubectl completion bash) # ç»™crictlæ·»åŠ tabè¡¥å…¨ source \u003c(crictl completion bash) # åŠ åˆ°.bashrc é‡Œ nano .bashrc source \u003c(crictl completion bash) ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:0","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"è¿è¡Œcrictl images æ—¶æŠ¥é”™ WARN[0000] image connect using default endpoints: [unix:///var/run/dockershim.sock unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]. As the default settings are now deprecated, you should set the endpoint instead. ERRO[0000] unable to determine image API version: rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing dial unix /var/run/dockershim.sock: connect: no such file or directory\" E0820 17:31:44.920882 5408 remote_image.go:121] \"ListImages with filter from image service failed\" err=\"rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.ImageService\" filter=\"\u0026ImageFilter{Image:\u0026ImageSpec{Image:,Annotations:map[string]string{},},}\" FATA[0000] listing images: rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.ImageService ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:1","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"æ’é”™ ll /run/containerd/ srw-rw---- 1 root root 0 Aug 20 17:20 containerd.sock= crictl config runtime-endpoint unix:///run/containerd/containerd.sock # æ›´æ”¹é…ç½® nano /etc/crictl.yaml runtime-endpoint: \"unix:///run/containerd/containerd.sock\" image-endpoint: \"unix:///run/containerd/containerd.sock\" timeout: 10 # é‡æ–°åŠ è½½ systemctl daemon-reload # å‘ç°è¿˜æ˜¯æŠ¥é”™ E0820 17:37:56.265740 5708 remote_image.go:121] \"ListImages with filter from image service failed\" err=\"rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.ImageService\" filter=\"\u0026ImageFilter{Image:\u0026ImageSpec{Image:,Annotations:map[string]string{},},}\" FATA[0000] listing images: rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.ImageService # è¿™æ˜¯å› ä¸ºè¿˜éœ€è¦æ‰‹åŠ¨è®¾ç½®runtime_type nano /etc/containerd/config.toml [plugins.\"io.containerd.grpc.v1.cri\".containerd.default_runtime] ä¸‹çš„ runtime_type = \"\" æ”¹æˆ runtime_type = \"io.containerd.runtime.v1.linux\" # é‡å¯containerd systemctl daemon-reload systemctl restart containerd # æ­£å¸¸äº† root@cks-master:~# crictl images IMAGE TAG IMAGE ID SIZE ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:2","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"é›†ç¾¤åˆå§‹åŒ–ï¼ˆcks-masterä¸Šæ“ä½œï¼‰ kubeadm config print init-defaults \u003e init.yaml nano init.yaml advertiseAddress: 10.4.7.180 name: cks-master imageRepository: registry.aliyuncs.com/google_containers kubernetesVersion: 1.24.4 kubeadm init --config=init.yaml å„ä¸ªèŠ‚ç‚¹åŠ å…¥é›†ç¾¤ kubeadm join 10.4.7.180:6443 --token abcdef.0123456789abcdef \\ --discovery-token-ca-cert-hash sha256:96f4398d1e19fbaed92c0401a2d38031f89470dc1faf84669306c6d85ba8cc45 master èŠ‚ç‚¹ä¸Šè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œç”¨kubectl æ§åˆ¶é›†ç¾¤ã€‚ mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config å®‰è£…cniæ’ä»¶ï¼ˆcalicoï¼‰ https://projectcalico.docs.tigera.io/getting-started/kubernetes/self-managed-onprem/onpremises # å°äº50ä¸ªnodeç”¨è¿™ä¸ªè¿æ¥ curl https://raw.githubusercontent.com/projectcalico/calico/v3.24.0/manifests/calico.yaml -O æ›´æ”¹calico.yaml æ–‡ä»¶ nano ç”¨ctrl+ wæœç´¢ã€‚ - name: CALICO_IPV4POOL_CIDR value: \"10.96.0.0/12\" å¼€å§‹åˆ›å»º kubectl apply -f calico.yaml ç­‰å¾…æ…¢æ…¢åˆ›å»ºpod kubectl get po -A éƒ½runningåé›†ç¾¤æ­å»ºæˆåŠŸ root@cks-master:~# kubectl get po -A -w NAMESPACE NAME READY STATUS RESTARTS AGE kube-system calico-kube-controllers-5b97f5d8cf-glx5x 1/1 Running 0 15m kube-system calico-node-87vt9 1/1 Running 0 15m kube-system calico-node-dd8nk 1/1 Running 0 15m kube-system calico-node-jgmfk 1/1 Running 0 15m kube-system coredns-74586cf9b6-46xtt 1/1 Running 0 27m kube-system coredns-74586cf9b6-7jkkd 1/1 Running 0 27m kube-system etcd-cks-master 1/1 Running 0 27m kube-system kube-apiserver-cks-master 1/1 Running 0 27m kube-system kube-controller-manager-cks-master 1/1 Running 0 27m kube-system kube-proxy-dhgbc 1/1 Running 0 24m kube-system kube-proxy-pvkgx 1/1 Running 0 27m kube-system kube-proxy-zckg5 1/1 Running 0 24m kube-system kube-scheduler-cks-master 1/1 Running 0 27m ç”±äºcorednséƒ½åœ¨è¢«åˆ†é…åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ²¡å†—ä½™ï¼Œéœ€è¦é‡æ–°åˆ†é…åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šã€‚ root@cks-master:~# kubectl get po -A -owide | grep coredns kube-system coredns-74586cf9b6-46xtt 1/1 Running 0 30m 10.106.109.130 cks-node2 \u003cnone\u003e \u003cnone\u003e kube-system coredns-74586cf9b6-7jkkd 1/1 Running 0 30m 10.106.109.131 cks-node2 \u003cnone\u003e \u003cnone\u003e é‡æ–°åˆ†é…coredns root@cks-master:~# kubectl -n kube-system rollout restart deployment coredns root@cks-master:~# kubectl get po -A -owide -w | grep coredns kube-system coredns-75ffbc4979-gjxjn 1/1 Running 0 2m37s 10.106.109.132 cks-node2 \u003cnone\u003e \u003cnone\u003e kube-system coredns-75ffbc4979-pbfmt 1/1 Running 0 2m37s 10.104.127.129 cks-node1 \u003cnone\u003e \u003cnone\u003e å»¶é•¿è¯ä¹¦æœ‰æ•ˆæœŸ è¯ä¹¦é»˜è®¤1å¹´åå°±ä¼šè¿‡æœŸã€‚å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ä¿®æ”¹ä¸º10å¹´ã€‚ $ cd /etc/kubernetes/pki # æŸ¥çœ‹å½“å‰è¯ä¹¦æœ‰æ•ˆæœŸ $ for i in $(ls *.crt); do echo \"===== $i =====\"; openssl x509 -in $i -text -noout | grep -A 3 'Validity' ; done $ mkdir backup_key; cp -rp ./* backup_key/ $ git clone https://github.com/yuyicai/update-kube-cert.git $ cd update-kube-cert/ $ bash update-kubeadm-cert.sh all # é‡å»ºç®¡ç†æœåŠ¡ $ kubectl -n kube-system delete po kube-apiserver-k8s-master kube-controller-manager-k8s-master kube-scheduler-k8s-master ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:3","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"éƒ¨ç½²dashboardï¼ˆk8s å¯è§†åŒ–é¡µé¢ï¼‰ githubä¸Šæœç´¢dashboard https://github.com/kubernetes/dashboard/blob/master/docs/user/installation.md ä¸‹è½½é»˜è®¤é…ç½®æ–‡ä»¶ https://raw.githubusercontent.com/kubernetes/dashboard/v2.6.1/aio/deploy/recommended.yaml ä¸ç”¨æ›´æ”¹é…ç½®ç›´æ¥éƒ¨ç½²,ç­‰å¾…éƒ¨ç½²å®Œæˆã€‚ kubectl apply -f recommended.yaml é»˜è®¤éƒ¨ç½²ådashboardæ˜¯ClusterIP ç±»å‹ï¼Œåªå…è®¸é›†ç¾¤å†…éƒ¨è®¿é—®ã€‚ root@cks-master:~# kubectl -n kubernetes-dashboard get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE dashboard-metrics-scraper ClusterIP 10.96.205.151 \u003cnone\u003e 8000/TCP 14m kubernetes-dashboard ClusterIP 10.110.3.32 \u003cnone\u003e 443/TCP 14m æ›´æ”¹ç±»å‹ä¸ºNodePortï¼Œæš´éœ²ç«¯å£ï¼Œå¯ä»¥åœ¨é›†ç¾¤å¤–éƒ¨è®¿é—®ã€‚ root@cks-master:~# kubectl -n kubernetes-dashboard edit svc kubernetes-dashboard ports: - port: 443 protocol: TCP targetPort: 8443 nodePort: 30003 selector: k8s-app: kubernetes-dashboard sessionAffinity: None type: Nodeport ä¿å­˜é€€å‡ºä¼šè‡ªåŠ¨é‡å¯pod æ­¤æ—¶å¯ä»¥ç”¨ip+ç«¯å£å·å½¢å¼è®¿é—®dashboard. root@cks-master:~# kubectl -n kubernetes-dashboard get svc -w NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE dashboard-metrics-scraper ClusterIP 10.96.205.151 \u003cnone\u003e 8000/TCP 46m kubernetes-dashboard NodePort 10.110.3.32 \u003cnone\u003e 443:30003/TCP 46m https://10.4.7.180:30003 ç„¶åä½¿ç”¨tokenæ¥ç™»å½• ç™»å½•å‰æ ¹æ®å®˜æ–¹æ–‡æ¡£è¦å…ˆåˆ›å»ºç”¨æˆ· å®˜ç½‘è¯´æ˜ https://github.com/kubernetes/dashboard/blob/master/docs/user/access-control/creating-sample-user.md admin.yaml apiVersion: v1 kind: ServiceAccount metadata: name: admin-user namespace: kubernetes-dashboard --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: admin-user roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: admin-user namespace: kubernetes-dashboard åˆ›å»ºç”¨æˆ· kubectl apply -f admin.yaml æŸ¥çœ‹ root@cks-master:~# kubectl -n kubernetes-dashboard get sa NAME SECRETS AGE admin-user 0 66s default 0 56m kubernetes-dashboard 0 56m # 1.24ç‰ˆæœ¬å·²ç»é»˜è®¤ä¸æ”¯æŒè‡ªåŠ¨åˆ›å»ºtokenï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»º root@cks-master:~# kubectl -n kubernetes-dashboard describe sa admin-user Name: admin-user Namespace: kubernetes-dashboard Labels: \u003cnone\u003e Annotations: \u003cnone\u003e Image pull secrets: \u003cnone\u003e Mountable secrets: \u003cnone\u003e Tokens: \u003cnone\u003e Events: \u003cnone\u003e æ‰‹åŠ¨åˆ›å»ºtoken root@cks-master:~# kubectl -n kubernetes-dashboard create token admin-user eyJhbGciOiJSUzI1NiIsImtpZCI6ImVlLTUwa0JWcm5seXlfemJ2Ui15MnpuTXJQVXctLXVPWFBsc3IzQl92dTAifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNjYxMDA4NzkzLCJpYXQiOjE2NjEwMDUxOTMsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiNmE3YWU1ODAtNDhiNi00NGVmLWFmNzUtNjY2MTQzOGUzMTcyIn19LCJuYmYiOjE2NjEwMDUxOTMsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.kvcfZmYX_CbX6_qaV1GQrT6Z7FCjGwOvG40OZ1cMEUhNQdV9G5XuCjSMJ4FrnKsiNOcSLv6_wdwWMZpWIgvbWYbBJQQ7Q-0Djie_iPzbGbJKbEvEsaNMLqIb7liiM52nKl0TJJweQpIoUHHWf0oRiGDjSkms5QVqDmlddnr5i8z2NotwW7FyIfml1E_OZFCQ-vHnVlo8ONGflkJyAutqGxRghBOBMuInMKSXfpk3AaXf6cjtButHRVqp_jDgErVVkKqtRJrqSHoDwMBV7NRn__fqdrfCGiEVKYlucMdv78TgKPsK2313OE3Arbrf0q_prP3Cs6VAILHETGdmhNHFlA ä½¿ç”¨tokenç™»å½•dashboard æ¯æ¬¡ç™»å½•éƒ½éœ€è¦é‡æ–°åˆ›å»ºtoken k8s ä¸èƒ½å¹²ä»€ä¹ˆï¼Ÿ ä¿®æ”¹å†…æ ¸çš„åº”ç”¨ ä¸å»ºè®®éƒ¨ç½²æ•°æ®åº“,å¾ˆå®¹æ˜“ä¸¢æ•°æ®ã€‚ ","date":"2022-08-22","objectID":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:4","tags":["cks"],"title":"CKSåˆå§‹ç¯å¢ƒæ­å»º","uri":"/cks%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"pythonå¤šçº¿ç¨‹ä½¿ç”¨ åˆ›å»ºçº¿ç¨‹ï¼Œå…¥å£å‡½æ•°å¸¦å‚æ•° import threading import time print(\"*******ä¸»çº¿ç¨‹å¼€å§‹**********\") def f1(s): print(\"***********f1start***********\") time.sleep(s) print(\"***********f1end***********\") def f2(s): print(\"***********f2start***********\") time.sleep(s) print(\"***********f2end***********\") #åˆ›å»ºçº¿ç¨‹ # target æŒ‡å®šè¿™ä¸ªå…ˆä¹˜æ‰§è¡Œé‚£ä¸ªå‡½æ•°ä¸­çš„ä»£ç ï¼Œåªå†™å‡½æ•°åå³å¯ï¼Œä¸è¦å†™æ‹¬å·ã€‚ # args åé¢æŒ‡å®šçš„æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œ th1 = threading.Thread(target=f1, args=(2,)) th2 = threading.Thread(target=f2, args=(3,)) th1.start() th2.start() print(\"*******ä¸»çº¿ç¨‹ç»“æŸ**********\") å¦å¤–ä¸€ç§å¼•å…¥åŒ…çš„æ–¹å¼ from threading import Thread import time print(\"*******ä¸»çº¿ç¨‹å¼€å§‹**********\") def f1(s): print(\"***********f1start***********\") time.sleep(s) print(\"***********f1end***********\") def f2(s): print(\"***********f2start***********\") time.sleep(s) print(\"***********f2end***********\") #åˆ›å»ºçº¿ç¨‹ # target æŒ‡å®šè¿™ä¸ªå…ˆä¹˜æ‰§è¡Œé‚£ä¸ªå‡½æ•°ä¸­çš„ä»£ç ï¼Œåªå†™å‡½æ•°åå³å¯ï¼Œä¸è¦å†™æ‹¬å·ã€‚ # args åé¢æŒ‡å®šçš„æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œ th1 = Thread(target=f1, args=(2,)) th2 = Thread(target=f2, args=(3,)) th1.start() th2.start() print(\"*******ä¸»çº¿ç¨‹ç»“æŸ**********\") è®¾ç½®ç­‰å¾… # è®¾ç½®ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸä¹‹ååœ¨æ‰§è¡Œ from threading import Thread import time print(\"*******ä¸»çº¿ç¨‹å¼€å§‹**********\") def f1(s): print(\"***********f1start***********\") time.sleep(s) print(\"***********f1end***********\") def f2(s): print(\"***********f2start***********\") time.sleep(s) print(\"***********f2end***********\") #åˆ›å»ºçº¿ç¨‹ # target æŒ‡å®šè¿™ä¸ªå…ˆä¹˜æ‰§è¡Œé‚£ä¸ªå‡½æ•°ä¸­çš„ä»£ç ï¼Œåªå†™å‡½æ•°åå³å¯ï¼Œä¸è¦å†™æ‹¬å·ã€‚ # args åé¢æŒ‡å®šçš„æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œ th1 = Thread(target=f1, args=(2,)) th2 = Thread(target=f2, args=(3,)) th1.start() th2.start() # è®¾ç½®ç­‰å¾… th1.join() th2.join() print(\"*******ä¸»çº¿ç¨‹ç»“æŸ**********\") å…±äº«å†…å­˜ ç»™çº¿ç¨‹ä¸Šé”ã€‚ éœ€æ±‚:ç”¨æˆ·zhangsanæ‰“è½¦ä½¿ç”¨æ”¯ä»˜å®ä»˜é’±ï¼Œå¸æœºzhangsanæ”¶åˆ°é’±ã€‚ åˆ†æï¼šç”¨æˆ·zhangsanä»˜é’±æ—¶ï¼Œçº¿ç¨‹ä¸Šé”ï¼Œä»˜å®Œé’±è§£é”ã€‚å¸æœºzhangsanè´¦æˆ·çº¿ç¨‹ä¸Šé”ï¼Œæ”¶åˆ°å‰åè§£é”ã€‚ from threading import Thread, Lock from time import sleep # å­˜å‚¨æ”¯ä»˜å®ä½™é¢è´¦å· zhifubao = { 'zhangsan': 10000, 'liming': 5000, 'wanghong': 3000, 'zhaolei': 5000 } # ç”³è¯·ä¸€æŠŠé” zhifu_lock = Lock() # çº¿ç¨‹1 ï¼šå˜€å˜€æ‰“è½¦å¤„ç†ï¼Œå‚æ•°æ˜¯ç”¨æˆ·è´¦æˆ·å’Œæ‰£æ¬¾é‡‘é¢ def thread1_didi_pay(account, amount): print('* t1: å³å°†å¼€å§‹æ“ä½œ') # ä¸Šé” zhifu_lock.acquire() balance = zhifubao[account] # ä¸‹é¢çš„sleep(2)è¡¨ç¤ºä¸€äº›å¤„ç†è¿‡ç¨‹éœ€è¦èŠ±ä¸Š2ç§’é’Ÿ print('* t1: å®Œæˆäº¤æ˜“éœ€è¦2sé’Ÿ') sleep(2) print('* t1: deduct') zhifubao[account] = balance - amount # é‡Šæ”¾é” zhifu_lock.release() # çº¿ç¨‹2ï¼š ä½™é¢å®å¯ä»¥ä¸“åŒºåˆ©æ¯ï¼Œå‚æ•°æ˜¯ç”¨æˆ·è´¦æˆ·å’Œæ‰£æ¬¾é‡‘é¢ def thread2_yue_pay(account,amount): print('* t2: å³å°†å¼€å§‹æ“ä½œ') # ä¸Šé” zhifu_lock.acquire() balance = zhifubao[account] # ä¸‹é¢çš„sleep(2)è¡¨ç¤ºä¸€äº›å¤„ç†è¿‡ç¨‹éœ€è¦èŠ±ä¸Š2ç§’é’Ÿ print('* t2: å®Œæˆäº¤æ˜“éœ€è¦2sé’Ÿ') sleep(2) print('* t2: deduct') zhifubao[account] = balance + amount # é‡Šæ”¾é” zhifu_lock.release() # åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ t1 = Thread(target=thread1_didi_pay, args=('zhangsan', 2000)) t2 = Thread(target=thread2_yue_pay, args=('zhangsan', 2000)) # å¼€å§‹çº¿ç¨‹ t1.start() t2.start() # è®¾ç½®ç­‰å¾… t1.join() t2.join() # è¾“å‡ºè´¦æˆ·ä½™é¢ print(\"__________________________\") print(zhifubao[\"zhangsan\"]) ","date":"2022-08-21","objectID":"/python%E5%A4%9A%E7%BA%BF%E7%A8%8B/:1:0","tags":["python"],"title":"pythonå¤šçº¿ç¨‹","uri":"/python%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"categories":["linux"],"content":"linuxä¸­çš„éš”ç¦»æŠ€æœ¯ éš”ç¦»çš„æ„ä¹‰åœ¨äºå¤„äºä¸åŒå‘½åç©ºé—´ä¸‹çš„è¿›ç¨‹ä¸èƒ½çœ‹åˆ°å¯¹æ–¹çš„ä¿¡æ¯ã€‚å‘½åç©ºé—´åœ¨Liunxå†…æ ¸ä¸­ï¼Œä¸æ˜¯ä¸€å—åˆ†é…ï¼Œä½ å¯ä»¥å®šåˆ¶éš”ç¦»ç¨‹åº¦ï¼Œæ¯”å¦‚åªéš”ç¦»ç½‘ç»œï¼Œä½†ä¸éš”ç¦»è¿›ç¨‹IDç©ºé—´ã€‚ä¸‹é¢æ˜¯å‘½åç©ºé—´å¯ä»¥éš”ç¦»çš„ä¸ƒç§ç±»å‹ã€‚ åç§° å†…æ ¸ç‰ˆæœ¬ éš”ç¦»å†…å®¹ UTS 3.0 ä¸»æœºåå’ŒåŸŸå MNT 3.8 æŒ‚è½½ç‚¹ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰ IPC 3.0 ä¿¡å·é‡ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œå…±äº«å†…å­˜ PID 3.8 è¿›ç¨‹ç¼–å· NET 3.0 ç½‘ç»œè®¾å¤‡ã€ç½‘ç»œæ ˆã€ç«¯å£ç­‰ USER 3.8 ç”¨æˆ·å’Œç”¨æˆ·ç»„ Cgroup 4.6 ä»¥æ ¹çš„å½¢å¼å‘ˆç°å‡ºæ¥ 3.10.0å†…æ ¸æ”¯æŒ6ç§ç±»å‹çš„namespace [root@localhost ~]# ll /proc/$$/ns total 0 lrwxrwxrwx 1 root root 0 Oct 16 12:50 ipc -\u003e ipc:[4026531839] lrwxrwxrwx 1 root root 0 Oct 16 12:50 mnt -\u003e mnt:[4026531840] lrwxrwxrwx 1 root root 0 Oct 16 12:50 net -\u003e net:[4026531956] lrwxrwxrwx 1 root root 0 Oct 16 12:50 pid -\u003e pid:[4026531836] lrwxrwxrwx 1 root root 0 Oct 16 12:50 user -\u003e user:[4026531837] lrwxrwxrwx 1 root root 0 Oct 16 12:50 uts -\u003e uts:[4026531838] $$ä»£è¡¨Shellæœ¬èº«çš„PIDï¼ˆProcessIDï¼‰ï¼Œå³å½“å‰è¿›ç¨‹çš„PIDã€‚ è€Œubuntu 5.4.0å†…æ ¸çš„æ”¯æŒ7ç§ç±»å‹çš„namespace lrwxrwxrwx 1 root root 0 Oct 16 13:03 cgroup -\u003e 'cgroup:[4026531835]' lrwxrwxrwx 1 root root 0 Oct 16 13:03 ipc -\u003e 'ipc:[4026531839]' lrwxrwxrwx 1 root root 0 Oct 16 13:03 mnt -\u003e 'mnt:[4026531840]' lrwxrwxrwx 1 root root 0 Oct 16 13:03 net -\u003e 'net:[4026531992]' lrwxrwxrwx 1 root root 0 Oct 16 13:03 pid -\u003e 'pid:[4026531836]' lrwxrwxrwx 1 root root 0 Oct 16 13:51 pid_for_children -\u003e 'pid:[4026531836]' lrwxrwxrwx 1 root root 0 Oct 16 13:03 user -\u003e 'user:[4026531837]' lrwxrwxrwx 1 root root 0 Oct 16 13:03 uts -\u003e 'uts:[4026531838]' ä¸Šè¿°å…­ä¸ªæ–‡ä»¶åˆ†åˆ«ä»£è¡¨å¯¹åº”namespaceçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¸­æ‹¬å·å†…å¯¹åº”å…¶inode number å¦‚æœä¸¤ä¸ªè¿›ç¨‹çš„inode numberä¸€è‡´ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªè¿›ç¨‹å±äºåŒä¸€ä¸ªnamespace å¦‚ä½•åˆ›å»ºä¸€ä¸ªPID namespace # --mount-proc å¦‚ä½•ä¸å¸¦è¿™ä¸ªå‚æ•°ï¼Œps aux ä¾ç„¶ä¼šè¯»å–ä¸»æœºå…¶ä»–è¿›ç¨‹ # -f --fork è®©/bin/bashå‘½ä»¤æˆä¸ºunshareçš„å­è¿›ç¨‹ # -p --pid ä»£è¡¨pidå‘½åç©ºé—´ [root@bogon ~]# unshare --mount-proc -fp /bin/bash [root@bogon ~]# ps aux USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.0 115544 1992 pts/1 S 06:59 0:00 /bin/bash root 10 0.0 0.0 155472 1844 pts/1 R+ 06:59 0:00 ps aux REF https://blog.csdn.net/chenleiking/article/details/87915185 ","date":"2022-08-11","objectID":"/linux%E4%B8%AD%E7%9A%84%E9%9A%94%E7%A6%BB/:0:0","tags":["linuxéš”ç¦»"],"title":"linuxä¸­çš„éš”ç¦»æŠ€æœ¯","uri":"/linux%E4%B8%AD%E7%9A%84%E9%9A%94%E7%A6%BB/"},{"categories":["å·¥å…·"],"content":"shellä¸­çš„EOFç”¨æ³• EOF Shellä¸­é€šå¸¸å°†EOFä¸Â«ç»“åˆä½¿ç”¨ï¼Œè¡¨ç¤ºåç»­çš„è¾“å…¥ä½œä¸ºå­å‘½ä»¤æˆ–å­shellçš„è¾“å…¥,ç›´åˆ°é‡åˆ°EOFä¸ºæ­¢ï¼Œå†è¿”å›åˆ°ä¸»shellã€‚å¯ä»¥æŠŠEOFæ¢æˆå…¶ä»–ä¸œè¥¿ï¼Œæ„æ€æ˜¯æŠŠå†…å®¹å½“ä½œæ ‡å‡†è¾“å…¥ä¼ ç»™ç¨‹åºã€‚ å½“shellçœ‹åˆ°Â«çš„æ—¶å€™ï¼Œä»–å°±ä¼šçŸ¥é“ä¸‹ä¸€ä¸ªè¯æ˜¯ä¸€ä¸ªèŠ¬å§ç¬¦ã€‚åœ¨è¯¥åˆ†ç•Œç¬¦ä»¥åçš„å†…å®¹éƒ½ä¼šè¢«å½“ä½œè¾“å…¥ï¼Œç›´åˆ°shellåˆçœ‹åˆ°è¯¥åˆ†ç•Œç¬¦ï¼ˆä½äºå•ç‹¬çš„ä¸€è¡Œï¼‰ã€‚è¿™ä¸ªåˆ†ç•Œç¬¦å¯ä»¥æ˜¯ä½ æ‰€å®šä¹‰çš„ä»»ä½•å­—ç¬¦ä¸²ã€‚ ä¾‹å­ï¼šè‡ªåŠ¨ç™»å½•mysql,æŸ¥è¯¢mysqlåº“ä¸­userè¡¨çš„æ‰€æœ‰å†…å®¹ã€‚ mysql -uroot -p1qaz9ol. \u003c\u003cEoF use mysql; select * from user \\G; exit EOF ç‰¹æ®Šç”¨æ³•ï¼š :\u003c\u003cCOMMENTBLOCK shell è„šæœ¬ä»£ç æ®µ COMMENTBLOCK ç”¨æ¥æ³¨é‡Šæ•´æ®µè„šæœ¬ä»£ç ã€‚:æ˜¯shellä¸­çš„ç©ºè¯­å¥ã€‚å…¶ä¸­COMMENTBLOCK å¯ä»¥æ¢æˆä»»ä½•å­—ç¬¦ã€‚ å®ä¾‹ï¼š #!/bin/bash echo start :\u003c\u003cCOMMENTBLOCK echo echo \"this is a test\" echo COMMENTBLOCK echo end æ‰§è¡Œç»“æœï¼Œä¸­é—´éƒ¨åˆ†ä¸ä¼šæ‰§è¡Œã€‚ start end cat å’Œeofç»“åˆä½¿ç”¨å…·æœ‰è¿½åŠ åŠŸèƒ½ ä½¿ç”¨cat å’ŒEOFå¤šè¡Œè¾“å…¥ cat \u003e\u003e /root/test.txt \u003c\u003cEOF 123123123 hello world! EOF ä»¥ä¸Šçš„è„šæœ¬å‘½ä»¤æ˜¯ï¼Œåœ¨test.txtæ–‡ä»¶åé¢åŠ ä¸Šä¸‰è¡Œä»£ç ã€‚ ","date":"2022-08-11","objectID":"/shell%E4%B8%AD%E7%9A%84eof%E7%94%A8%E6%B3%95/:0:0","tags":["shell"],"title":"shellä¸­çš„EOFç”¨æ³•","uri":"/shell%E4%B8%AD%E7%9A%84eof%E7%94%A8%E6%B3%95/"},{"categories":["linux"],"content":"linuxä¸­ç¯å¢ƒå˜é‡ é’ˆå¯¹å½“å‰ä¼šè¯ï¼ˆé‡å¯å¤±æ•ˆï¼‰ PATH=$PATH:/home/test/mysql/bin echo $PATH é’ˆå¯¹å½“å‰ç”¨æˆ·æœ‰æ•ˆï¼ˆé‡å¯å¤±æ•ˆï¼‰ vim ~/.bash_profile #æ›´æ”¹ï¼ŒåŸè¡Œ PATH=$PATH:$HOME/binï¼Œ æ”¹ä¸ºä¸‹é¢çš„ PATH=$PATH:$HOME/bin:/home/test/mysql/bin #ä¿å­˜é€€å‡º source ~/.bash_profile #æˆ–è€… . ~/.bash_profile #ä½¿ä¹‹ç”Ÿæ•ˆ /etc/profile/(æ°¸ä¹…ç”Ÿæ•ˆ) vim /etc/profile #åœ¨æ–‡æ¡£æœ€åæ–°å¢ MYSQL_HOME=/home/test/mysql export PATH=$PATH:$MYSQL_HOME/bin #ä¿å­˜é€€å‡º source ~/.bash_profile #æˆ–è€… . ~/.bash_profile #ä½¿ä¹‹ç”Ÿæ•ˆ /etc/profile.d/ (æ°¸ä¹…ç”Ÿæ•ˆ)(æ¨è) vim /etc/profile.d/mysql.sh #æ·»åŠ å¦‚ä¸‹å†…å®¹ MYSQL_HOME=/home/test/mysql export PATH=$PATH:$MYSQL_HOME/bin #ä¿å­˜é€€å‡º source /etc/profile #æˆ–è€… . /etc/profile #ä½¿ä¹‹ç”Ÿæ•ˆ Tips: æ¨èåŸå› ï¼šåªéœ€è¦æ›´æ”¹è‡ªå·±çš„è„šæœ¬ï¼Œå¢åŠ æˆ–åˆ é™¤å°±å¯ä»¥ä½¿ç¯å¢ƒå˜é‡å‘ç”Ÿæ”¹å˜ï¼Œä¸å½±å“ç³»ç»Ÿæ–‡ä»¶ã€‚ ","date":"2022-08-10","objectID":"/linux%E4%B8%AD%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/:0:0","tags":["ç¯å¢ƒå˜é‡"],"title":"linuxä¸­ç¯å¢ƒå˜é‡","uri":"/linux%E4%B8%AD%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"},{"categories":["å·¥å…·"],"content":"shellå°ç»ƒä¹  job1:æ£€ç´¢æœ¬æœºçš„IPã€NETMASKã€MACåœ°å€ã€å¹¿æ’­åœ°å€ IP: 172.20.10.3 NetMask: 255.255.255.240 Broadcast: 172.20.10.15 MAC Address: 00:0c:29:8d:49:ea job2:å°†ç³»ç»Ÿä¸­æ‰€æœ‰æ™®é€šç”¨æˆ·çš„ç”¨æˆ·åã€å¯†ç å’Œé»˜è®¤shellä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚ç”¨æˆ·åå¯†ç å’Œé»˜è®¤shellä¹‹é—´ç”¨tabåˆ†éš” ayitula x /bin/bash job3: è™šæ‹Ÿæœºä¸­æ·»åŠ ä¸€å—ç¡¬ç›˜ï¼Œç›˜å·ä¸ºsdbã€‚ä¸»åˆ†åŒºsdb3ï¼Œ543Mï¼Œext4æ ¼å¼ã€‚å…¶ä»–ç©ºé—´éƒ½åˆ†ç»™æ‹“å±•åˆ†åŒºsdb4ã€‚é€»è¾‘åˆ†åŒºsdb5ï¼Œ2Gï¼Œé€»è¾‘åˆ†åŒºsdb6ï¼Œ3Gã€‚ åˆ›å»ºä¸€ä¸ªå·ç»„ï¼ŒPEä¸º16Mï¼Œåˆ›å»ºé€»è¾‘å·å¤§å°ä¸º2.5Gï¼Œæ ¼å¼ä¸ºxfsã€‚ ä¸»åˆ†åŒºsdb3è‡ªåŠ¨æŒ‚è½½åˆ°/data/data1ä¸Šï¼Œé€»è¾‘å·æŒ‚è½½åˆ°/data/data2ä¸Šã€‚ æœ€ååˆ†åˆ«éªŒè¯å¹¶è¾“å‡ºæŒ‚è½½ç»“æœã€‚ job4:ç¼–å†™è„šæœ¬ï¼Œæ¸…ç©ºjob3å†…çš„æ‰€æœ‰é…ç½®ï¼ŒåŒ…æ‹¬è¿˜åŸ/etc/fstabæ–‡ä»¶ã€‚ job5:æ¨¡æ‹Ÿç™»å½•ç³»ç»Ÿã€‚è¾“å…¥ç”¨æˆ·åã€å¯†ç ç™»å½•ç³»ç»Ÿã€‚ ç»ˆç«¯æç¤ºä¿¡æ¯ï¼š Centos Linux 8 (Core) Kernal 5.4.0-113-generic on an x86_64 588c34fafcd5 login: smith Password: job6ï¼š å†…å­˜ä½¿ç”¨ç‡ç»Ÿè®¡ï¼Œè¦æ±‚æ‰“å°å†…å­˜ä½¿ç”¨ç‡ã€‚ å†…å­˜ä½¿ç”¨ç‡å…¬å¼ï¼š ä½¿ç”¨é‡/æ€»é‡*100% job7: å®ç°ä¸€ä¸ªå››åˆ™è¿ç®—è®¡ç®—å™¨ã€‚è¦æ±‚ç”¨æˆ·ä¼ è¾“ä¸‰ä¸ªå‚æ•°ï¼Œnum1 ç®—æ•°è¿ç®—ç¬¦ num2 ã€‚è¿ç®—è¾“å‡ºç»“æœã€‚ job8: å†™ä¸€ä¸ªç›‘æ§CPU å¹³å‡è´Ÿè½½å€¼çš„è„šæœ¬ã€‚æ”¶é›†cpu load å¹³å‡è´Ÿè½½å€¼åˆ°æ•°ç»„ï¼Œæ‰“å°è¾“å‡ºå¯¹åº”çš„è´Ÿè½½å€¼ã€‚ è¾“å‡ºæ ·å¼ CPU 1minå¹³å‡è´Ÿè½½ä¸º: 0.10 CPU 5minå¹³å‡è´Ÿè½½ä¸º: 0.16 CPU 15minå¹³å‡è´Ÿè½½ä¸º: 0.08 ","date":"2022-08-09","objectID":"/shell%E5%B0%8F%E7%BB%83%E4%B9%A0/:0:0","tags":["shell"],"title":"shellå°ç»ƒä¹ ","uri":"/shell%E5%B0%8F%E7%BB%83%E4%B9%A0/"},{"categories":["å·¥å…·"],"content":"shellå°ç»ƒä¹ ç­”æ¡ˆ job1:æ£€ç´¢æœ¬æœºçš„IPã€NETMASKã€MACåœ°å€ã€å¹¿æ’­åœ°å€ IP: 172.20.10.3 NetMask: 255.255.255.240 Broadcast: 172.20.10.15 MAC Address: 00:0c:29:8d:49:ea ifconfig eth0 | grep inet | tr -s \" \" | cut -d \" \" -f 3 | xargs echo \"IP: \" ifconfig eth0 | grep inet | tr -s \" \" | cut -d \" \" -f 5 | xargs echo \"NetMask: \" ifconfig eth0 | grep inet | tr -s \" \" | cut -d \" \" -f 7 | xargs echo \"Broadcast: \" ifconfig eth0 | grep ether | tr -s \" \" | cut -d \" \" -f 3 | xargs echo \"MAC Address: \" job2:å°†ç³»ç»Ÿä¸­æ‰€æœ‰æ™®é€šç”¨æˆ·çš„ç”¨æˆ·åã€å¯†ç å’Œé»˜è®¤shellä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚ç”¨æˆ·åå¯†ç å’Œé»˜è®¤shellä¹‹é—´ç”¨tabåˆ†éš” ayitula x /bin/bash cat 1.txt | grep -i bash | grep -v \"root\" | cut -d \":\" -f 1,2,7 | tr -s \":\" \"\\t\" \u003e res # 1.txt æ–‡æœ¬ rootâŒ0:0:root:/root:/bin/bash binâŒ1:1:bin:/bin:/sbin/nologin daemonâŒ2:2:daemon:/sbin:/sbin/nologin admâŒ3:4:adm:/var/adm:/sbin/nologin lpâŒ4:7:lp:/var/spool/lpd:/sbin/nologin syncâŒ5:0:sync:/sbin:/bin/sync shutdownâŒ6:0:shutdown:/sbin:/sbin/shutdown haltâŒ7:0:halt:/sbin:/sbin/halt mailâŒ8:12:mail:/var/spool/mail:/sbin/nologin operatorâŒ11:0:operator:/root:/sbin/nologin gamesâŒ12ğŸ’¯games:/usr/games:/sbin/nologin ftpâŒ14:50:FTP User:/var/ftp:/sbin/nologin nobodyâŒ65534:65534:Kernel Overflow User:/:/sbin/nologin dbusâŒ81:81:System message bus:/:/sbin/nologin systemd-coredumpâŒ999:997:systemd Core Dumper:/:/sbin/nologin systemd-resolveâŒ193:193:systemd Resolver:/:/sbin/nologin helloâŒ1500:1000:this is a test user:/home/hello:/bin/bash job3 disk_partition.sh #!/bin/bash fdisk /dev/sdb \u003c\u003cEOF n p 3 +543M n e 4 n l +2G n l +3G w EOF #2ã€åˆ›å»ºé€»è¾‘å· #2.1 åˆ›å»ºç‰©ç†å· pvcreate /dev/sdb5 /dev/sdb6 #2.2 åˆ›å»ºå·ç»„ vgcreate -s 16M vg100 /dev/sdb{5..6} \u003c\u003cEOF y EOF #2.3 åˆ›å»ºé€»è¾‘å· lvcreate -L 2.5G -n lv100 vg100 \u003c\u003cEOF y EOF #3ã€æ ¼å¼åŒ– mkfs.ext4 /dev/sdb3 mkfs.xfs /dev/vg100/lv100 #4ã€ä¿®æ”¹/etc/fstab,å®ç°è‡ªåŠ¨æŒ‚è½½ echo \"/dev/sdb3 /data/data1 ext4 defaults 0 0\" \u003e\u003e /etc/fstab echo \"/dev/vg100/lv100 /data/data2 xfs defaults 0 0\" \u003e\u003e /etc/fstab #5ã€æŒ‚è½½åˆ†åŒº mkdir -p /data/data{1..2} mount -a #6ã€éªŒè¯å¹¶è¾“å‡ºæŒ‚è½½ç»“æœ mount |grep \"/dev/sdb3\" test $? -eq 0\u0026\u0026echo \"/dev/sdb3 æŒ‚è½½æˆåŠŸ\" || echo \"/dev/sdb3æŒ‚è½½å¤±è´¥\" ##æ³¨æ„æ£€ç´¢çš„æ—¶å€™ï¼Œmountè¾“å‡ºä¸­LVçš„è¡¨ç¤ºæ–¹å¼ï¼Œæˆ–è€…ç›´æ¥æ£€ç´¢æŒ‚è½½ç‚¹/data/data2ä¹Ÿå¯ä»¥ã€‚ mount |grep \"vg100-lv100\" test $? -eq 0\u0026\u0026echo \"/dev/vg100/lv100 æŒ‚è½½æˆåŠŸ\" || echo \"/dev/vg100/lv100æŒ‚è½½å¤±è´¥\" job4 back_init.sh #!/bin/bash umount /data/data1 umount /data/data2 vgremove vg100 \u003c\u003cEOF y y EOF pvremove /dev/sdb5 pvremove /dev/sdb6 fdisk /dev/sdb \u003c\u003cEOF d d d d w EOF sed -i '/^\\/dev\\/sdb3/'d /etc/fstab sed -i '/^\\/dev\\/vg100/'d /etc/fstab Tips: ä½¿ç”¨EOF ,è¡¨ç¤ºåç»­çš„è¾“å…¥ä½œä¸ºå­å‘½ä»¤æˆ–å­shellçš„è¾“å…¥ï¼Œç›´åˆ°é‡åˆ°EOFä¸ºæ­¢ã€‚å†è¿”å›åˆ°ä¸»shellã€‚ job5å°ç»ƒä¹ ç­”æ¡ˆï¼š #!/bin/bash # #Author: Mr.Lee #Description: ä»¿çœŸç™»é™† IP=`ifconfig eth0 | egrep -w \"inet\"| awk '{print $2}'` #æ¸…å± clear #è¾“å‡ºæç¤ºä¿¡æ¯ echo \"Centos Linux 8 (Core)\" echo -e \"Kernal `uname -r` on an `uname -m`\" echo -e \"Web console: https://localhost:9000/ or https://$IP:9090/ \\n\" #äº¤äº’è¾“å…¥ç™»å½•å echo -n \"$HOSTNAME login: \" read account #äº¤äº’è¾“å…¥å¯†ç  read -s -t30 -p \"Password: \" pw echo job6: åˆ†æï¼š 1.è·å–å†…å­˜æ€»é‡ 2.è·å–å†…å­˜ä½¿ç”¨é‡ 3.è¿ç®—è¾“å‡ºç»“æœ #!/bin/bash #Author: Mr.lee #Release #Description: å†…å­˜ä½¿ç”¨ç‡è®¡ç®—è„šæœ¬ #è·å–å†…å­˜æ€»é‡ Mem_total=`free -m | grep Mem | awk '{print $2}'` #è·å–å†…å­˜ä½¿ç”¨çš„é‡ Mem_used=`free -m | grep Mem | awk '{print $3}'` #è®¡ç®—è¾“å‡º #æµ®ç‚¹è¿ç®—ä¸­ï¼šåŒä¼˜å…ˆçº§çš„æƒ…å†µä¸‹ï¼Œå¤§æ•°é™¤ä»¥å°æ•° å°½å¯èƒ½ä¿è¯ç²¾ç¡®ã€‚å…ˆä¹˜åé™¤ã€‚ echo \"å†…å­˜ä½¿ç”¨ç‡: `echo \"scale=2;$Mem_used*100/$Mem_total\"|bc`%\" job7 : #!/bin/bash #Author: Mr.lee #Release #Description: å››åˆ™è¿ç®—è®¡ç®—å™¨ echo \"$1 $2 $3\" |bc job8 åŸºæœ¬æ€è·¯ï¼šæˆªå–uptimeå‘½ä»¤è¾“å‡ºç»“æœä¸­æœ€å3ä¸ªæ•°å­—ï¼Œåˆ†åˆ«ä»£è¡¨1minã€5minã€15min cpuçš„è´Ÿè½½ã€‚ æ™®é€šæ–¹æ³•å®ç° #!/bin/bash #Author: Mr.Lee #Release: #Description: æ‰“å°cpu 1min 5min 15minçš„è´Ÿè½½å€¼ one_min=`uptime | tr -s \" \" | cut -d \",\" -f4 | cut -d \":\" -f2` five_min=`uptime | tr -s \" \" | cut -d \",\" -f5` fiveteen_min=`uptime | tr -s \" \" | cut -d \",\" -f6` echo -ne \"CPU 1minå¹³å‡è´Ÿè½½ä¸º: \"$one_min echo -ne \"\\nCPU 5minå¹³å‡è´Ÿè½½ä¸º: \"$five_min echo -ne \"\\nCPU 15minå¹³å‡è´Ÿè½½ä¸º: \"$fiveteen_min echo ä½¿ç”¨æ•°ç»„å®ç° #!/bin/bash #Author: Mr.Lee #Release: #Description: æ‰“å°cpu 1min 5min 15minçš„è´Ÿè½½å€¼ cpu_load=(`uptime | tr -s \" \"| cut -d \" \" -f11-13| tr \",\" \" \"`) echo \"CPU 1minå¹³å‡è´Ÿè½½: ${cpu_load[0]}\" echo \"CPU 5minå¹³å‡è´Ÿè½½: ${cpu_load[1]}\" echo \"CPU 15minå¹³å‡è´Ÿè½½: ${cpu_load[2]}\" ","date":"2022-08-09","objectID":"/shell%E5%B0%8F%E7%BB%83%E4%B9%A0%E7%AD%94%E6%A1%88/:0:0","tags":["shell"],"title":"shellå°ç»ƒä¹ ç­”æ¡ˆ","uri":"/shell%E5%B0%8F%E7%BB%83%E4%B9%A0%E7%AD%94%E6%A1%88/"},{"categories":["linux"],"content":"CentOS8é…ç½®yumæº å°†æºæ–‡ä»¶å¤‡ä»½ cd /etc/yum.repos.d/ \u0026\u0026 mkdir backup \u0026\u0026 mv *repo backup/ ä¸‹è½½yumæºæ–‡ä»¶ curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-8.repo ä¿®æ”¹yumæºé‡Œé¢çš„åœ°å€ sed -i -e \"s|mirrors.cloud.aliyuncs.com|mirrors.aliyun.com|g \" /etc/yum.repos.d/CentOS-* sed -i -e \"s|releasever|releasever-stream|g\" /etc/yum.repos.d/CentOS-* é‡æ–°ç”Ÿæˆç¼“å­˜ yum clean all \u0026\u0026 yum makecache ","date":"2022-08-08","objectID":"/centos8%E9%85%8D%E7%BD%AEyum%E6%BA%90/:0:0","tags":["centos8"],"title":"CentOS8é…ç½®yumæº","uri":"/centos8%E9%85%8D%E7%BD%AEyum%E6%BA%90/"},{"categories":["ç¼–ç¨‹"],"content":"è±†ç“£å±•ç¤ºé¡µ ","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:0","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"æ–°å»ºflaské¡¹ç›® ä½¿ç”¨pycharmæ–°å»ºflaské¡¹ç›®ï¼Œé¡¹ç›®åä¸ºï¼šdouban_flaskã€‚ å°†ä¹‹å‰çš„çˆ¬å–çš„movie.dbæ–‡ä»¶æ”¾åˆ°è¯¥é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚å‡†å¤‡å‰ç«¯é¡µé¢ä»£ç ï¼ˆå¯ä»¥åˆ°æ¨¡æ¿ä¹‹å®¶ä¸‹è½½[http://www.cssmoban.com/cssthemes/9296.shtml]ï¼‰ ","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:1","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"å‰ç«¯ä»£ç  ä¸‹è½½åè§£å‹ç¼©æ”¾åˆ°staticç›®å½•ä¸‹.staticç›®å½•ç”¨äºå­˜æ”¾ç½‘é¡µç›¸å…³ä»£ç ã€‚ ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š douban_flask - static - assets - css - img - js - vendor - templates - test echarts.min.js index.html movie.html score.html team.html temp.html word.html - venv app.py movie.db testCloud.py æ–°å»ºæ¨¡æ¿ç›®å½•templatesï¼Œåœ¨æ­¤ç›®å½•ä¸‹æ–°å»ºä¸»é¡µæ–‡ä»¶index.html.å¯ä»¥æŠŠtemp.htmlä¸­çš„å†…å®¹å¤åˆ¶ä¸€ä»½åˆ°index.htmlã€‚ ","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:2","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"flaskè·¯ç”± å¼€å§‹å†™è·¯ç”±app.py Tips:ä½¿ç”¨flaskä¸‹render_templateæ¨¡å—å¯ä»¥æ‰¾åˆ°templatesç›®å½•å†…çš„htmlé¡µé¢ã€‚ from flask import Flask, render_template import sqlite3 app = Flask(__name__) @app.route('/') def index(): return render_template(\"index.html\") @app.route('/index') def home(): # return render_template(\"index.html\") return index() @app.route('/movie') def movie(): datalist = [] con = sqlite3.connect(\"movie.db\") cur = con.cursor() sql = \"select * from movie250\" data = cur.execute(sql) for item in data: datalist.append(item) cur.close() con.close() return render_template(\"movie.html\", movies = datalist) # return render_template(\"movie.html\") @app.route('/score') def score(): score = [] # è¯„åˆ† num = [] # æ¯ä¸ªè¯„åˆ†æ‰€ç»Ÿè®¡å‡ºçš„ç”µå½±æ•°é‡ con = sqlite3.connect(\"movie.db\") cur = con.cursor() sql = \"select score,count(score) from movie250 group by score\" data = cur.execute(sql) for item in data: score.append(str(item[0])) num.append(item[1]) cur.close() con.close() return render_template(\"score.html\", score=score, num=num) @app.route('/word') def word(): return render_template(\"word.html\") @app.route('/team') def team(): return render_template(\"team.html\") if __name__ == '__main__': app.run() å¼€å§‹è¿è¡Œflask(å¯ä»¥å¼€å¯Debugæ¨¡å¼ï¼Œå¥½å¤„æ˜¯ä¿®æ”¹çš„ä»£ç ä¼šå®æ—¶æ›´æ–°ã€‚å…³é—­åˆ™éœ€è¦é‡å¯è¿è¡Œåæ›´æ”¹çš„ä»£ç æ‰ä¼šç”Ÿæ•ˆã€‚) æ³¨æ„ï¼š å¦‚æœé¡µé¢åªæ˜¾ç¤ºæ–‡å­—ï¼Œæ²¡æœ‰cssæ•ˆæœä¹Ÿä¸æ˜¾ç¤ºå›¾ç‰‡ï¼ŒæŸ¥çœ‹é¡µé¢æºä»£ç ã€‚(è°·æ­Œæµè§ˆå™¨ï¼šå³é”®-\u003eæ£€æŸ¥)æŸ¥çœ‹cssæ ·å¼ è·¯å¾„å’Œå›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚è·¯å¾„åº”è¯¥å’Œæˆ‘ä»¬çš„é¡¹ç›®douban_flaskç›®å½•ç»“æ„ä¸€è‡´ã€‚æ›´æ”¹åï¼Œåˆ·æ–°æµè§ˆå™¨å†æ¬¡æŸ¥çœ‹æ•ˆæœã€‚ æ˜¾ç¤ºæ­£å¸¸åï¼Œæˆ‘ä»¬éœ€è¦å±•ç¤º5ä¸ªé¡µé¢ï¼Œåˆ†åˆ«æ˜¯é¦–é¡µã€ç”µå½±ã€è¯„åˆ†ã€è¯äº‘ã€å›¢é˜Ÿã€‚æ‰€ä»¥å°†index.htmlå¤åˆ¶4ä»½ï¼Œåˆ†åˆ«ä¿®æ”¹é‡Œé¢çš„å†…å®¹ï¼Œå±•ç¤ºå¯¹åº”çš„æ•°æ®ã€‚å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š é¦–é¡µ ç”µå½± è¯„åˆ† è¯äº‘ å›¢é˜Ÿ index.html movie.html score.html word.html team.html ","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:3","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"index å…ˆåšä¸»é¡µindex.htmlï¼Œä»”ç»†è§‚å¯Ÿæºç å‘ç°ç½‘é¡µçš„æ¯ä¸€éƒ¨åˆ†éƒ½æœ‰æ³¨é‡Šè¯¥æ¨¡å—çš„åŠŸèƒ½ã€‚ç”±äºä»£ç å¤ªå¤šï¼Œå¯ä»¥å°†åŒä¸€ç§åŠŸèƒ½çš„ä»£ç æŠ˜å èµ·æ¥ï¼Œä½¿ç”¨çš„åŠŸèƒ½ä¿ç•™ï¼Œä¸ç”¨çš„åŠŸèƒ½å¯ä»¥åˆ é™¤ã€‚æœ€ç»ˆindex.htmlä¸­ä»£ç å¦‚ä¸‹ï¼š \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003cmeta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"\u003e \u003ctitle\u003eè±†ç“£top250æ•°æ®å¯è§†åŒ–\u003c/title\u003e \u003cmeta content=\"\" name=\"descriptison\"\u003e \u003cmeta content=\"\" name=\"keywords\"\u003e \u003c!-- Favicons --\u003e \u003clink href=\"static/assets/img/favicon.png\" rel=\"icon\"\u003e \u003clink href=\"static/assets/img/apple-touch-icon.png\" rel=\"apple-touch-icon\"\u003e \u003c!-- Google Fonts --\u003e \u003clink href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i,900\" rel=\"stylesheet\"\u003e \u003c!-- Vendor CSS Files --\u003e \u003clink href=\"static/assets/vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/icofont/icofont.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/boxicons/css/boxicons.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/animate.css/animate.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/venobox/venobox.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/aos/aos.css\" rel=\"stylesheet\"\u003e \u003c!-- Template Main CSS File --\u003e \u003clink href=\"static/assets/css/style.css\" rel=\"stylesheet\"\u003e \u003c/head\u003e \u003cbody\u003e \u003c!-- ======= Top Bar ======= --\u003e \u003c!-- ======= Header ======= --\u003e \u003cheader id=\"header\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"logo float-left\"\u003e \u003ch1 class=\"text-light\"\u003e\u003ca href=\"index\"\u003e\u003cspan\u003eè±†ç“£ç”µå½±\u003c/span\u003e\u003c/a\u003e\u003c/h1\u003e \u003c!-- Uncomment below if you prefer to use an image logo --\u003e \u003c!-- \u003ca href=\"temp.html\"\u003e\u003cimg src=\"static/assets/img/logo.png\" alt=\"\" class=\"img-fluid\"\u003e\u003c/a\u003e--\u003e \u003c/div\u003e \u003cnav class=\"nav-menu float-right d-none d-lg-block\"\u003e \u003cul\u003e \u003cli class=\"active\"\u003e\u003ca href=\"/index\"\u003eé¦–é¡µ \u003ci class=\"la la-angle-down\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/movie\"\u003eç”µå½±\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/score\"\u003eè¯„åˆ†\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/word\"\u003eè¯äº‘\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/team\"\u003eå›¢é˜Ÿ\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e \u003c/nav\u003e\u003c!-- .nav-menu --\u003e \u003c/div\u003e \u003c/header\u003e\u003c!-- End Header --\u003e \u003c!-- ======= Our Team Section ======= --\u003e \u003csection id=\"team\" class=\"team\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"section-title\"\u003e \u003ch2\u003eè±†ç“£ç”µå½±top250æ•°æ®åˆ†æ\u003c/h2\u003e \u003cp\u003eåº”ç”¨Pythonçˆ¬è™«Flaskæ¡†æ¶ã€Echartsã€WordCloudç­‰æŠ€æœ¯å®ç°\u003c/p\u003e \u003c/div\u003e \u003c!-- ======= Counts Section ======= --\u003e \u003csection class=\"counts section-bg\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"row\"\u003e \u003cdiv class=\"col-lg-3 col-md-6 text-center\" data-aos=\"fade-up\"\u003e \u003ca href= \"/movie\"\u003e \u003cdiv class=\"count-box\"\u003e \u003ci class=\"icofont-simple-smile\" style=\"color: #20b38e;\"\u003e\u003c/i\u003e \u003cspan data-toggle=\"counter-up\"\u003e250\u003c/span\u003e \u003cp\u003eç»å…¸ç”µå½±\u003c/p\u003e \u003c/div\u003e \u003c/a\u003e \u003c/div\u003e \u003cdiv class=\"col-lg-3 col-md-6 text-center\" data-aos=\"fade-up\" data-aos-delay=\"200\"\u003e \u003ca href= \"/score\"\u003e \u003cdiv class=\"count-box\"\u003e \u003ci class=\"icofont-document-folder\" style=\"color: #c042ff;\"\u003e\u003c/i\u003e \u003cspan data-toggle=\"counter-up\"\u003e1\u003c/span\u003e \u003cp\u003eè¯„åˆ†ç»Ÿè®¡\u003c/p\u003e \u003c/div\u003e \u003c/a\u003e \u003c/div\u003e \u003cdiv class=\"col-lg-3 col-md-6 text-center\" data-aos=\"fade-up\" data-aos-delay=\"400\"\u003e \u003ca href= \"/word\"\u003e \u003cdiv class=\"count-box\"\u003e \u003ci class=\"icofont-live-support\" style=\"color: #46d1ff;\"\u003e\u003c/i\u003e \u003cspan data-toggle=\"counter-up\"\u003e5693\u003c/span\u003e \u003cp\u003eè¯æ±‡ç»Ÿè®¡\u003c/p\u003e \u003c/div\u003e \u003c/a\u003e \u003c/div\u003e \u003cdiv class=\"col-lg-3 col-md-6 text-center\" data-aos=\"fade-up\" data-aos-delay=\"600\"\u003e \u003ca href= \"/team\"\u003e \u003cdiv class=\"count-box\"\u003e \u003ci class=\"icofont-users-alt-5\" style=\"color: #ffb459;\"\u003e\u003c/i\u003e \u003cspan data-toggle=\"counter-up\"\u003e4\u003c/span\u003e \u003cp\u003eå›¢é˜Ÿæˆå‘˜\u003c/p\u003e \u003c/div\u003e \u003c/a\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/section\u003e\u003c!-- End Counts Section --\u003e \u003c/div\u003e \u003c/section\u003e\u003c!-- End Our Team Section --\u003e \u003c!-- ======= Footer ======= --\u003e \u003cfooter id=\"footer\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"copyright\"\u003e \u0026copy; Copyright \u003cstrong\u003e\u003cspan\u003eMr.Lee\u003c/span\u003e\u003c/strong\u003e. All Rights Reserved \u003c/div\u003e \u003cdiv class=\"credits\"\u003e \u003c/div\u003e \u003c/div\u003e \u003c/footer\u003e\u003c!-- End Footer --\u003e \u003ca href=\"#\" class=\"back-to-top\"\u003e\u003ci class=\"icofont-simple-up\"\u003e\u003c/i\u003e\u003c/a\u003e \u003c!-- Vendor JS Files --\u003e \u003cscript src=\"static/assets/vendor/jquery/jquery.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/jquery.easing/jquery.easing.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:4","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"movie movie.htmlç”µå½±é¡µé¢éœ€è¦è¿æ¥ä¹‹å‰å‡†å¤‡å¥½çš„æ•°æ®åº“movie.dbï¼Œè¯»å–é‡Œé¢çš„sqlè¯­å¥ï¼Œå¹¶ä»¥è¡¨æ ¼çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ è¿™é‡Œä½¿ç”¨sqlite3æ¨¡å—æ¥è¿æ¥æ•°æ®åº“ã€‚ å®ç°åŠŸèƒ½ä»£ç è§app.pyä¸­movie()å‡½æ•° movie.htmlç½‘é¡µæºç å¦‚ä¸‹ï¼š \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003cmeta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"\u003e \u003ctitle\u003eè±†ç“£top250æ•°æ®å¯è§†åŒ–\u003c/title\u003e \u003cmeta content=\"\" name=\"descriptison\"\u003e \u003cmeta content=\"\" name=\"keywords\"\u003e \u003c!-- Favicons --\u003e \u003clink href=\"static/assets/img/favicon.png\" rel=\"icon\"\u003e \u003clink href=\"static/assets/img/apple-touch-icon.png\" rel=\"apple-touch-icon\"\u003e \u003c!-- Google Fonts --\u003e \u003clink href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i,900\" rel=\"stylesheet\"\u003e \u003c!-- Vendor CSS Files --\u003e \u003clink href=\"static/assets/vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/icofont/icofont.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/boxicons/css/boxicons.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/animate.css/animate.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/venobox/venobox.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/aos/aos.css\" rel=\"stylesheet\"\u003e \u003c!-- Template Main CSS File --\u003e \u003clink href=\"static/assets/css/style.css\" rel=\"stylesheet\"\u003e \u003c/head\u003e \u003cbody\u003e \u003c!-- ======= Top Bar ======= --\u003e \u003c!-- ======= Header ======= --\u003e \u003cheader id=\"header\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"logo float-left\"\u003e \u003ch1 class=\"text-light\"\u003e\u003ca href=\"index\"\u003e\u003cspan\u003eè±†ç“£ç”µå½±\u003c/span\u003e\u003c/a\u003e\u003c/h1\u003e \u003c!-- Uncomment below if you prefer to use an image logo --\u003e \u003c!-- \u003ca href=\"temp.html\"\u003e\u003cimg src=\"static/assets/img/logo.png\" alt=\"\" class=\"img-fluid\"\u003e\u003c/a\u003e--\u003e \u003c/div\u003e \u003cnav class=\"nav-menu float-right d-none d-lg-block\"\u003e \u003cul\u003e \u003cli class=\"active\"\u003e\u003ca href=\"/index\"\u003eé¦–é¡µ \u003ci class=\"la la-angle-down\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/movie\"\u003eç”µå½±\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/score\"\u003eè¯„åˆ†\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/word\"\u003eè¯äº‘\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/team\"\u003eå›¢é˜Ÿ\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e \u003c/nav\u003e\u003c!-- .nav-menu --\u003e \u003c/div\u003e \u003c/header\u003e\u003c!-- End Header --\u003e \u003c!-- ======= Our Team Section ======= --\u003e \u003csection id=\"team\" class=\"team\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"section-title\"\u003e \u003ch2\u003eè±†ç“£ç”µå½±top250ç”µå½±\u003c/h2\u003e \u003c/div\u003e \u003c!-- ======= Counts Section ======= --\u003e \u003csection class=\"counts section-bg\"\u003e \u003cdiv class=\"container\"\u003e \u003ctable class=\"table table-striped\"\u003e \u003ctr\u003e \u003ctd\u003eæ’å\u003c/td\u003e \u003ctd\u003eç”µå½±åç§°\u003c/td\u003e \u003ctd\u003eå¤–å›½åç§°\u003c/td\u003e \u003ctd\u003eè¯„åˆ†\u003c/td\u003e \u003ctd\u003eè¯„ä»·äººæ•°\u003c/td\u003e \u003ctd\u003eä¸€å¥è¯æè¿°\u003c/td\u003e \u003ctd\u003eå…¶ä»–ä¿¡æ¯\u003c/td\u003e \u003c/tr\u003e {% for movie in movies %} \u003ctr\u003e \u003ctd\u003e{{ movie[0] }}\u003c/td\u003e \u003ctd\u003e \u003ca href=\"{{ movie[1] }}\"\u003e {{movie[3]}} \u003c/a\u003e \u003c/td\u003e \u003ctd\u003e{{ movie[4] }}\u003c/td\u003e \u003ctd\u003e{{ movie[5] }}\u003c/td\u003e \u003ctd\u003e{{ movie[6] }}\u003c/td\u003e \u003ctd\u003e{{ movie[7] }}\u003c/td\u003e \u003ctd\u003e{{ movie[8] }}\u003c/td\u003e \u003c/tr\u003e {% endfor %} \u003c/table\u003e \u003c/div\u003e \u003c/section\u003e\u003c!-- End Counts Section --\u003e \u003c/div\u003e \u003c/section\u003e\u003c!-- End Our Team Section --\u003e \u003c!-- ======= Footer ======= --\u003e \u003cfooter id=\"footer\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"copyright\"\u003e \u0026copy; Copyright \u003cstrong\u003e\u003cspan\u003eMr.Lee\u003c/span\u003e\u003c/strong\u003e. All Rights Reserved \u003c/div\u003e \u003cdiv class=\"credits\"\u003e \u003c/div\u003e \u003c/div\u003e \u003c/footer\u003e\u003c!-- End Footer --\u003e \u003ca href=\"#\" class=\"back-to-top\"\u003e\u003ci class=\"icofont-simple-up\"\u003e\u003c/i\u003e\u003c/a\u003e \u003c!-- Vendor JS Files --\u003e \u003cscript src=\"static/assets/vendor/jquery/jquery.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/jquery.easing/jquery.easing.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/php-email-form/validate.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/jquery-sticky/jquery.sticky.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/venobox/venobox.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/waypoints/jquery.waypoints.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/counterup/counterup.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/isotope-layout/isotope.pkgd.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/aos/aos.js\"\u003e\u003c/script\u003e \u003c!-- Template Main JS File --\u003e \u003cscript src=\"static/assets/js/main.js\"\u003e\u003c/script\u003e \u003c/body\u003e \u003c/html\u003e ","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:5","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"score score.htmlè¯„åˆ†ï¼Œè¿™é‡Œè·å–æ•°æ®å’Œç”µå½±é¡µé¢ç±»ä¼¼ï¼Œä¹Ÿæ˜¯éœ€è¦è¯»å–æ•°æ®åº“ï¼Œä¸è¿‡æœ€ç»ˆæ˜¯ä»¥æŸ±å½¢å›¾çš„å½¢å¼å±•ç¤ºå‡ºæ¥ã€‚ä½¿ç”¨EchartsæŠ€æœ¯æ¥å®ç°ã€‚ å®ç°åŠŸèƒ½ä»£ç è§app.pyä¸­score()å‡½æ•° score.htmlæºç å¦‚ä¸‹ï¼š \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003cmeta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"\u003e \u003cscript src=\"static/assets/js/echarts.min.js\"\u003e\u003c/script\u003e \u003ctitle\u003eè±†ç“£top250æ•°æ®å¯è§†åŒ–\u003c/title\u003e \u003cmeta content=\"\" name=\"descriptison\"\u003e \u003cmeta content=\"\" name=\"keywords\"\u003e \u003c!-- Favicons --\u003e \u003clink href=\"static/assets/img/favicon.png\" rel=\"icon\"\u003e \u003clink href=\"static/assets/img/apple-touch-icon.png\" rel=\"apple-touch-icon\"\u003e \u003c!-- Google Fonts --\u003e \u003clink href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i,900\" rel=\"stylesheet\"\u003e \u003c!-- Vendor CSS Files --\u003e \u003clink href=\"static/assets/vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/icofont/icofont.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/boxicons/css/boxicons.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/animate.css/animate.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/venobox/venobox.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/aos/aos.css\" rel=\"stylesheet\"\u003e \u003c!-- Template Main CSS File --\u003e \u003clink href=\"static/assets/css/style.css\" rel=\"stylesheet\"\u003e \u003c/head\u003e \u003cbody\u003e \u003c!-- ======= Top Bar ======= --\u003e \u003c!-- ======= Header ======= --\u003e \u003cheader id=\"header\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"logo float-left\"\u003e \u003ch1 class=\"text-light\"\u003e\u003ca href=\"index\"\u003e\u003cspan\u003eè±†ç“£ç”µå½±\u003c/span\u003e\u003c/a\u003e\u003c/h1\u003e \u003c!-- Uncomment below if you prefer to use an image logo --\u003e \u003c!-- \u003ca href=\"temp.html\"\u003e\u003cimg src=\"static/assets/img/logo.png\" alt=\"\" class=\"img-fluid\"\u003e\u003c/a\u003e--\u003e \u003c/div\u003e \u003cnav class=\"nav-menu float-right d-none d-lg-block\"\u003e \u003cul\u003e \u003cli class=\"active\"\u003e\u003ca href=\"/index\"\u003eé¦–é¡µ \u003ci class=\"la la-angle-down\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/movie\"\u003eç”µå½±\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/score\"\u003eè¯„åˆ†\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/word\"\u003eè¯äº‘\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/team\"\u003eå›¢é˜Ÿ\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e \u003c/nav\u003e\u003c!-- .nav-menu --\u003e \u003c/div\u003e \u003c/header\u003e\u003c!-- End Header --\u003e \u003c!-- ======= Our Team Section ======= --\u003e \u003csection id=\"team\" class=\"team\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"section-title\"\u003e \u003ch2\u003eè±†ç“£ç”µå½±top250è¯„åˆ†åˆ†å¸ƒå›¾\u003c/h2\u003e \u003cp\u003eåº”ç”¨Pythonçˆ¬è™«Flaskæ¡†æ¶ã€Echartsã€WordCloudç­‰æŠ€æœ¯å®ç°\u003c/p\u003e \u003c/div\u003e \u003c!-- ======= Counts Section ======= --\u003e \u003csection class=\"counts section-bg\"\u003e \u003cdiv class=\"container\"\u003e \u003c!-- ä¸º ECharts å‡†å¤‡ä¸€ä¸ªå®šä¹‰äº†å®½é«˜çš„ DOM --\u003e \u003cdiv id=\"main\" style=\"width: 100%;height: 300px;\"\u003e\u003c/div\u003e \u003c/div\u003e \u003c/section\u003e\u003c!-- End Counts Section --\u003e \u003c/div\u003e \u003c/section\u003e\u003c!-- End Our Team Section --\u003e \u003c!-----Echarts-----------\u003e \u003cscript type=\"text/javascript\"\u003e var dom = document.getElementById('main'); var myChart = echarts.init(dom, null, { renderer: 'canvas', useDirtyRect: false }); var app = {}; var option; option = { title:{ text:'ç”µå½±è¯„åˆ†è¡¨' }, color:['#3398DB'], tooltip: { trigger:'axis', axisPointer:{ type:'shadow' } }, grid:{ left:'3%', right:'4%', bottom:'3%', containLabel:true }, xAxis: { type: 'category', data: {{ score|tojson }} \u003c!----['mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun','999']-----\u003e }, yAxis: { type: 'value' }, series: [ { data: {{ num }}, \u003c!---[120, 20, 150, 80, 70, 110, 130,200],-----\u003e barWidth:'60%', type: 'bar' } ] }; if (option \u0026\u0026 typeof option === 'object') { myChart.setOption(option); } window.addEventListener('resize', myChart.resize); \u003c/script\u003e \u003c!-- ======= Footer ======= --\u003e \u003ca href=\"#\" class=\"back-to-top\"\u003e\u003ci class=\"icofont-simple-up\"\u003e\u003c/i\u003e\u003c/a\u003e \u003c!-- Vendor JS Files --\u003e \u003cscript src=\"static/assets/vendor/jquery/jquery.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/jquery.easing/jquery.easing.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/php-email-form/validate.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/jquery-sticky/jquery.sticky.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/venobox/venobox.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/waypoints/jquery.waypoints.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/co","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:6","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"word word.htmlè¯äº‘ã€‚ä½¿ç”¨WordCloudæŠ€æœ¯ï¼Œç”Ÿæˆä¸€å¼ å¸¦æœ‰å‡ºç°é¢‘ç‡è¾ƒé«˜çš„è¯æ±‡çš„å›¾ç‰‡ã€‚åŸå›¾ç‰‡æ˜¯ç™½åº•çš„æ ‘ï¼Œæ ¹æ®å®ƒæ¥ç”Ÿæˆè¯æ±‡æ ‘ã€‚ word.htmlæºç å¦‚ä¸‹ï¼š \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003cmeta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"\u003e \u003ctitle\u003eè±†ç“£top250æ•°æ®å¯è§†åŒ–\u003c/title\u003e \u003cmeta content=\"\" name=\"descriptison\"\u003e \u003cmeta content=\"\" name=\"keywords\"\u003e \u003c!-- Favicons --\u003e \u003clink href=\"static/assets/img/favicon.png\" rel=\"icon\"\u003e \u003clink href=\"static/assets/img/apple-touch-icon.png\" rel=\"apple-touch-icon\"\u003e \u003c!-- Google Fonts --\u003e \u003clink href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i,900\" rel=\"stylesheet\"\u003e \u003c!-- Vendor CSS Files --\u003e \u003clink href=\"static/assets/vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/icofont/icofont.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/boxicons/css/boxicons.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/animate.css/animate.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/venobox/venobox.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/aos/aos.css\" rel=\"stylesheet\"\u003e \u003c!-- Template Main CSS File --\u003e \u003clink href=\"static/assets/css/style.css\" rel=\"stylesheet\"\u003e \u003c/head\u003e \u003cbody\u003e \u003c!-- ======= Header ======= --\u003e \u003cheader id=\"header\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"logo float-left\"\u003e \u003ch1 class=\"text-light\"\u003e\u003ca href=\"index\"\u003e\u003cspan\u003eè±†ç“£ç”µå½±\u003c/span\u003e\u003c/a\u003e\u003c/h1\u003e \u003c!-- Uncomment below if you prefer to use an image logo --\u003e \u003c!-- \u003ca href=\"temp.html\"\u003e\u003cimg src=\"static/assets/img/logo.png\" alt=\"\" class=\"img-fluid\"\u003e\u003c/a\u003e--\u003e \u003c/div\u003e \u003cnav class=\"nav-menu float-right d-none d-lg-block\"\u003e \u003cul\u003e \u003cli class=\"active\"\u003e\u003ca href=\"/index\"\u003eé¦–é¡µ \u003ci class=\"la la-angle-down\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/movie\"\u003eç”µå½±\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/score\"\u003eè¯„åˆ†\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/word\"\u003eè¯äº‘\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/team\"\u003eå›¢é˜Ÿ\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e \u003c/nav\u003e\u003c!-- .nav-menu --\u003e \u003c/div\u003e \u003c/header\u003e\u003c!-- End Header --\u003e \u003c!-- ======= About Us Section ======= --\u003e \u003csection id=\"about\" class=\"about\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"row no-gutters\"\u003e \u003cdiv class=\"col-lg-6 video-box\"\u003e \u003cimg src=\"static/assets/img/word.png\" class=\"img-fluid\" alt=\"\"\u003e \u003c/div\u003e \u003cdiv class=\"col-lg-6 d-flex flex-column justify-content-center about-content\"\u003e \u003cdiv class=\"section-title\"\u003e \u003ch2\u003eè¯é¢‘ç»Ÿè®¡\u003c/h2\u003e \u003cp\u003eæ ¹æ®250éƒ¨ç”µå½±çš„ä¸€å¥è¯æè¿°ï¼Œæç‚¼å‡ºè¯äº‘æ ‘ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´åŠ æ¸…æ™°çš„äº†è§£äººä»¬å¯¹äºç»å…¸ç”µå½±çš„ç†è§£\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"icon-box\" data-aos=\"fade-up\" data-aos-delay=\"100\"\u003e \u003cdiv class=\"icon\"\u003e\u003ci class=\"bx bx-gift\"\u003e\u003c/i\u003e\u003c/div\u003e \u003ch4 class=\"title\"\u003e\u003ca href=\"\"\u003eå…³äºç”µå½±\u003c/a\u003e\u003c/h4\u003e \u003cp class=\"description\"\u003eä¸çŸ¥é“ä½ ä»ä¸­é¢†æ‚Ÿåˆ°äº†ä»€ä¹ˆ\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/section\u003e\u003c!-- End About Us Section --\u003e \u003ca href=\"#\" class=\"back-to-top\"\u003e\u003ci class=\"icofont-simple-up\"\u003e\u003c/i\u003e\u003c/a\u003e \u003c!-- Vendor JS Files --\u003e \u003cscript src=\"static/assets/vendor/jquery/jquery.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/jquery.easing/jquery.easing.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/php-email-form/validate.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/jquery-sticky/jquery.sticky.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/venobox/venobox.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/waypoints/jquery.waypoints.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/counterup/counterup.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/isotope-layout/isotope.pkgd.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"static/assets/vendor/aos/aos.js\"\u003e\u003c/script\u003e \u003c!-- Template Main JS File --\u003e \u003cscript src=\"static/assets/js/main.js\"\u003e\u003c/script\u003e \u003c/body\u003e \u003c/html\u003e ","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:7","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"team team.htmlå›¢é˜Ÿã€‚ä»‹ç»å›¢é˜Ÿæˆå‘˜ã€‚ team.htmlæºç å¦‚ä¸‹ï¼š \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003cmeta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"\u003e \u003ctitle\u003eè±†ç“£top250æ•°æ®å¯è§†åŒ–\u003c/title\u003e \u003cmeta content=\"\" name=\"descriptison\"\u003e \u003cmeta content=\"\" name=\"keywords\"\u003e \u003c!-- Favicons --\u003e \u003clink href=\"static/assets/img/favicon.png\" rel=\"icon\"\u003e \u003clink href=\"static/assets/img/apple-touch-icon.png\" rel=\"apple-touch-icon\"\u003e \u003c!-- Google Fonts --\u003e \u003clink href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i,900\" rel=\"stylesheet\"\u003e \u003c!-- Vendor CSS Files --\u003e \u003clink href=\"static/assets/vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/icofont/icofont.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/boxicons/css/boxicons.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/animate.css/animate.min.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/venobox/venobox.css\" rel=\"stylesheet\"\u003e \u003clink href=\"static/assets/vendor/aos/aos.css\" rel=\"stylesheet\"\u003e \u003c!-- Template Main CSS File --\u003e \u003clink href=\"static/assets/css/style.css\" rel=\"stylesheet\"\u003e \u003c/head\u003e \u003cbody\u003e \u003c!-- ======= Top Bar ======= --\u003e \u003c!-- ======= Header ======= --\u003e \u003cheader id=\"header\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"logo float-left\"\u003e \u003ch1 class=\"text-light\"\u003e\u003ca href=\"index\"\u003e\u003cspan\u003eè±†ç“£ç”µå½±\u003c/span\u003e\u003c/a\u003e\u003c/h1\u003e \u003c!-- Uncomment below if you prefer to use an image logo --\u003e \u003c!-- \u003ca href=\"temp.html\"\u003e\u003cimg src=\"static/assets/img/logo.png\" alt=\"\" class=\"img-fluid\"\u003e\u003c/a\u003e--\u003e \u003c/div\u003e \u003cnav class=\"nav-menu float-right d-none d-lg-block\"\u003e \u003cul\u003e \u003cli class=\"active\"\u003e\u003ca href=\"/index\"\u003eé¦–é¡µ \u003ci class=\"la la-angle-down\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/movie\"\u003eç”µå½±\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/score\"\u003eè¯„åˆ†\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/word\"\u003eè¯äº‘\u003c/a\u003e\u003c/li\u003e \u003cli\u003e\u003ca href=\"/team\"\u003eå›¢é˜Ÿ\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e \u003c/nav\u003e\u003c!-- .nav-menu --\u003e \u003c/div\u003e \u003c/header\u003e\u003c!-- End Header --\u003e \u003c!-- ======= Our Team Section ======= --\u003e \u003csection id=\"team\" class=\"team\"\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"section-title\"\u003e \u003ch2\u003eOur Team\u003c/h2\u003e \u003cp\u003eMagnam dolores commodi suscipit. Necessitatibus eius consequatur ex aliquid fuga eum quidem.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"row\"\u003e \u003cdiv class=\"col-xl-3 col-lg-4 col-md-6\" data-aos=\"fade-up\"\u003e \u003cdiv class=\"member\"\u003e \u003cdiv class=\"pic\"\u003e\u003cimg src=\"static/assets/img/team/team-1.jpg\" class=\"img-fluid\" alt=\"\"\u003e\u003c/div\u003e \u003cdiv class=\"member-info\"\u003e \u003ch4\u003eWalter White\u003c/h4\u003e \u003cspan\u003eChief Executive Officer\u003c/span\u003e \u003cdiv class=\"social\"\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-twitter\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-facebook\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-instagram\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-linkedin\"\u003e\u003c/i\u003e\u003c/a\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"col-xl-3 col-lg-4 col-md-6\" data-aos=\"fade-up\" data-aos-delay=\"100\"\u003e \u003cdiv class=\"member\"\u003e \u003cdiv class=\"pic\"\u003e\u003cimg src=\"static/assets/img/team/team-2.jpg\" class=\"img-fluid\" alt=\"\"\u003e\u003c/div\u003e \u003cdiv class=\"member-info\"\u003e \u003ch4\u003eSarah Jhonson\u003c/h4\u003e \u003cspan\u003eProduct Manager\u003c/span\u003e \u003cdiv class=\"social\"\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-twitter\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-facebook\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-instagram\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-linkedin\"\u003e\u003c/i\u003e\u003c/a\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"col-xl-3 col-lg-4 col-md-6\" data-aos=\"fade-up\" data-aos-delay=\"200\"\u003e \u003cdiv class=\"member\"\u003e \u003cdiv class=\"pic\"\u003e\u003cimg src=\"static/assets/img/team/team-3.jpg\" class=\"img-fluid\" alt=\"\"\u003e\u003c/div\u003e \u003cdiv class=\"member-info\"\u003e \u003ch4\u003eWilliam Anderson\u003c/h4\u003e \u003cspan\u003eCTO\u003c/span\u003e \u003cdiv class=\"social\"\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-twitter\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-facebook\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-instagram\"\u003e\u003c/i\u003e\u003c/a\u003e \u003ca href=\"\"\u003e\u003ci class=\"icofont-linkedin\"\u003e\u003c/i\u003e\u003c/a\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"col-xl-3 col-lg-4 col-md-6\" data-aos=\"fade-up\" data-aos-delay=\"300\"\u003e \u003cdiv class=\"member\"\u003e \u003cdiv class=\"pic\"\u003e\u003cimg src=\"static/assets/img/team/team-4.jpg\" class=\"img-fluid\" alt=\"\"\u003e\u003c/div\u003e \u003cdiv class=\"member-info\"\u003e \u003ch4\u003eAmanda Jepson\u003c/h4\u003e \u003cspan\u003eAccountant\u003c/span\u003e \u003cdiv class=\"social\"\u003e \u003ca href=\"\"\u003e\u003c","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:8","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"å…³äºEcharts ä½¿ç”¨å‰å…ˆä¸‹è½½æºç  åœ°å€ åªéœ€è¦è¿™ä¸€ä¸ªæ–‡ä»¶ï¼ˆecharts.min.jsï¼‰ å°†æ–‡ä»¶(echarts.min.js)å¤åˆ¶åˆ°é¡¹ç›®testç›®å½•å†… Echartså®˜æ–¹ç½‘ç«™: https://echarts.apache.org/examples/zh/index.html#chart-type-line å¯ä»¥æ ¹æ®å®˜æ–¹ç¤ºä¾‹æ›´æ”¹ä»£ç å®ç°æƒ³è¦çš„ç»“æœï¼Œæœ€åå¯ä»¥ä¸‹è½½ç¤ºä¾‹ã€‚ ç¤ºä¾‹ç½‘å€[https://echarts.apache.org/examples/zh/editor.html?c=bar-background] ä¸‹è½½åå°†ä»£ç å¤åˆ¶ä¸€ä»½åˆ°score.htmlä¸­ã€‚ ","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:9","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"å…³äºwordcloud åœ¨é¡¹ç›®æ ¹ç›®å½•å†…åˆ›å»ºæ–‡ä»¶testCloud.pyæ–‡ä»¶ï¼Œå®ç°è¯äº‘é¡µé¢æ‰€éœ€è¦çš„è¯äº‘æ ‘ã€‚ éœ€è¦å®‰è£…å‡ ä¸ªç¬¬ä¸‰æ–¹çš„åº“ jieba: åˆ†è¯ matplotlibï¼š ç»˜å›¾ã€æ•°æ®å¯è§†åŒ– wordcloudï¼šè¯äº‘ numpyï¼šçŸ©é˜µè¿ç®— sqlite3ï¼šæ•°æ®åº“ PILï¼šå›¾å½¢å¤„ç†åº“ ä»£ç å¦‚ä¸‹ï¼š from tkinter import Image import jieba # åˆ†è¯ from matplotlib import pyplot as plt # ç»˜å›¾ï¼Œæ•°æ®å¯è§†åŒ– from wordcloud import WordCloud # è¯äº‘ import numpy as np # çŸ©é˜µè¿ç®— import sqlite3 # æ•°æ®åº“ from PIL import Image # å‡†å¤‡è¯äº‘æ‰€éœ€çš„æ–‡å­—ï¼ˆè¯ï¼‰ con = sqlite3.connect('douban_flask\\movie.db') cur = con.cursor() sql = 'select instroduction from movie250' data = cur.execute(sql) text = \"\" for item in data: text = text + item[0] # print(item[0]) # print(text) cur.close() con.close() # åˆ†è¯ cut = jieba.cut(text) string = ' '.join(cut) print(len(string)) img = Image.open(r'D:\\code2022\\auto-work\\douban_flask\\static\\assets\\img\\tree.png') # æ‰“å¼€é®ç½©å›¾ç‰‡ img_array = np.array(img) wc = WordCloud( background_color = 'white', mask = img_array, font_path = \"msyh.ttc\" # C:\\Windows\\Fonts å­—ä½“æ‰€åœ¨ä½ç½®ã€‚ ) wc.generate_from_text(string) # ç»˜åˆ¶å›¾ç‰‡ fig = plt.figure(1) plt.imshow(wc) plt.axis('off') # æ˜¯å¦æ˜¾ç¤ºåæ ‡è½´ # plt.show() # æ˜¾ç¤ºç”Ÿæˆçš„è¯äº‘å›¾ç‰‡ # è¾“å‡ºè¯äº‘å›¾ç‰‡åˆ°æ–‡ä»¶ plt.savefig(r'D:\\code2022\\auto-work\\douban_flask\\static\\assets\\img\\word.png',dpi=500) ","date":"2022-08-07","objectID":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/:1:10","tags":["python"],"title":"è±†ç“£ç”µå½±top250å±•ç¤ºé¡µ","uri":"/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/"},{"categories":["ç¼–ç¨‹"],"content":"æ•°æ®å¯è§†åŒ– ","date":"2022-07-21","objectID":"/flask%E5%85%A5%E9%97%A8/:1:0","tags":["flask"],"title":"Flaskå…¥é—¨","uri":"/flask%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å…³äºFlask Flaskä½œä¸ºwebæ¡†æ¶ï¼Œå®ƒçš„ä½œç”¨ä¸»è¦æ˜¯å¼€å‘webåº”ç”¨ç¨‹åºã€‚ ","date":"2022-07-21","objectID":"/flask%E5%85%A5%E9%97%A8/:1:1","tags":["flask"],"title":"Flaskå…¥é—¨","uri":"/flask%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"FlaskåŸºç¡€çš„æ“ä½œ æµè§ˆå™¨æ‰“å°hello world! from flask import Flask # flaskç±»æ¥æ”¶ä¸€ä¸ªå‚æ•°__name__ app = Flask(__name__) # è·¯ç”±è§£æï¼Œé€šè¿‡ç”¨æˆ·èŒƒæ–‡çš„è·¯å¾„ï¼ŒåŒ¹é…ç›¸åº”çš„å‡½æ•°ã€‚ @app.route('/') def hello_world(): return 'hello world!' # debugæ¨¡å¼å¼€å¯,æ›´æ”¹ä»£ç åï¼Œæµè§ˆå™¨å®æ—¶æ˜¾ç¤ºã€‚ # Flaskåº”ç”¨ç¨‹åºå®ä¾‹çš„runæ–¹æ³•å¯åŠ¨webæœåŠ¡å™¨ if __name__ == '__main__': app.run() è¿è¡Œä»£ç  è®¿é—®ç½‘å€ï¼šhttp://127.0.0.1:5000å±å¹•æ‰“å°hello world! FLASK_APP = app.py FLASK_ENV = development FLASK_DEBUG = 0 In folder D:/code2022/auto-work/demo D:\\pccharmcode\\venv\\Scripts\\python.exe -m flask run * Running on http://127.0.0.1:5000 (Press CTRL+C to quit) * Serving Flask app 'app.py' (lazy loading) * Environment: development * Debug mode: off è®¿é—®/indexè·¯å¾„ from flask import Flask # flaskç±»æ¥æ”¶ä¸€ä¸ªå‚æ•°__name__ app = Flask(__name__) # è·¯ç”±è§£æï¼Œé€šè¿‡ç”¨æˆ·èŒƒæ–‡çš„è·¯å¾„ï¼ŒåŒ¹é…ç›¸åº”çš„å‡½æ•°ã€‚ # è£…é¥°èµ·çš„ä½œç”¨æ˜¯å°†è·¯ç”±æ˜ å°„åˆ°è§†å›¾å‡½æ•°hello @app.route(\"/index\") def hello(): return \"ä½ å¥½\" # debugæ¨¡å¼å¼€å¯,æ›´æ”¹ä»£ç åï¼Œæµè§ˆå™¨å®æ—¶æ˜¾ç¤ºã€‚ # Flaskåº”ç”¨ç¨‹åºå®ä¾‹çš„runæ–¹æ³•å¯åŠ¨webæœåŠ¡å™¨ if __name__ == '__main__': app.run() é€šè¿‡è®¿é—®è·¯å¾„ï¼Œè·å–ç”¨æˆ·çš„å­—ç¬¦ä¸²å‚æ•° from flask import Flask # flaskç±»æ¥æ”¶ä¸€ä¸ªå‚æ•°__name__ app = Flask(__name__) # è·¯ç”±è§£æï¼Œé€šè¿‡ç”¨æˆ·èŒƒæ–‡çš„è·¯å¾„ï¼ŒåŒ¹é…ç›¸åº”çš„å‡½æ•°ã€‚ @app.route(\"/user/\u003cname\u003e\") def welcom(name): return \"ä½ å¥½,%s\"% name # debugæ¨¡å¼å¼€å¯,æ›´æ”¹ä»£ç åï¼Œæµè§ˆå™¨å®æ—¶æ˜¾ç¤ºã€‚ # Flaskåº”ç”¨ç¨‹åºå®ä¾‹çš„runæ–¹æ³•å¯åŠ¨webæœåŠ¡å™¨ if __name__ == '__main__': app.run() é€šè¿‡è®¿é—®è·¯å¾„ï¼Œè·å–ç”¨æˆ·çš„æ•´å½¢å‚æ•° from flask import Flask # flaskç±»æ¥æ”¶ä¸€ä¸ªå‚æ•°__name__ app = Flask(__name__) # è·¯ç”±è§£æï¼Œé€šè¿‡ç”¨æˆ·èŒƒæ–‡çš„è·¯å¾„ï¼ŒåŒ¹é…ç›¸åº”çš„å‡½æ•°ã€‚ @app.route(\"/user/\u003cint:id\u003e\") def welcom2(id): return \"ä½ å¥½,%d å·çš„ä¼šå‘˜\"% id # debugæ¨¡å¼å¼€å¯,æ›´æ”¹ä»£ç åï¼Œæµè§ˆå™¨å®æ—¶æ˜¾ç¤ºã€‚ # Flaskåº”ç”¨ç¨‹åºå®ä¾‹çš„runæ–¹æ³•å¯åŠ¨webæœåŠ¡å™¨ if __name__ == '__main__': app.run() # è·¯ç”±è·¯å¾„ä¸èƒ½é‡å¤ï¼Œç”¨æˆ·é€šè¿‡å”¯ä¸€è·¯å¾„æ¥è®¿é—®ç‰¹å®šçš„å‡½æ•°ã€‚ è¿”å›ç”¨æˆ·æ¸²æŸ“åçš„ç½‘é¡µæ–‡ä»¶ from flask import Flask, render_template, request # flaskç±»æ¥æ”¶ä¸€ä¸ªå‚æ•°__name__ app = Flask(__name__) # è·¯ç”±è§£æï¼Œé€šè¿‡ç”¨æˆ·èŒƒæ–‡çš„è·¯å¾„ï¼ŒåŒ¹é…ç›¸åº”çš„å‡½æ•°ã€‚ @app.route(\"/\") def index2(): return render_template(\"index.html\") # debugæ¨¡å¼å¼€å¯,æ›´æ”¹ä»£ç åï¼Œæµè§ˆå™¨å®æ—¶æ˜¾ç¤ºã€‚ # Flaskåº”ç”¨ç¨‹åºå®ä¾‹çš„runæ–¹æ³•å¯åŠ¨webæœåŠ¡å™¨ if __name__ == '__main__': app.run() # è·¯ç”±è·¯å¾„ä¸èƒ½é‡å¤ï¼Œç”¨æˆ·é€šè¿‡å”¯ä¸€è·¯å¾„æ¥è®¿é—®ç‰¹å®šçš„å‡½æ•°ã€‚ å‘é¡µé¢ä¼ é€’ä¸€äº›å˜é‡ from flask import Flask, render_template, request import datetime # flaskç±»æ¥æ”¶ä¸€ä¸ªå‚æ•°__name__ app = Flask(__name__) # è·¯ç”±è§£æï¼Œé€šè¿‡ç”¨æˆ·èŒƒæ–‡çš„è·¯å¾„ï¼ŒåŒ¹é…ç›¸åº”çš„å‡½æ•°ã€‚ @app.route(\"/\") def index2(): time = datetime.date.today() # æ™®é€šå˜é‡ name = [\"å°å¼ \", \"å°ç‹\", \"å°èµµ\"] # åˆ—è¡¨ç±»å‹ task = {\"ä»»åŠ¡\": \"æ‰“æ‰«å«ç”Ÿ\", \"æ—¶é—´\": \"3å°æ—¶\"} # å­—å…¸ç±»å‹ return render_template(\"index.html\", var = time, list = name, task = task) # debugæ¨¡å¼å¼€å¯,æ›´æ”¹ä»£ç åï¼Œæµè§ˆå™¨å®æ—¶æ˜¾ç¤ºã€‚ # Flaskåº”ç”¨ç¨‹åºå®ä¾‹çš„runæ–¹æ³•å¯åŠ¨webæœåŠ¡å™¨ if __name__ == '__main__': app.run() # è·¯ç”±è·¯å¾„ä¸èƒ½é‡å¤ï¼Œç”¨æˆ·é€šè¿‡å”¯ä¸€è·¯å¾„æ¥è®¿é—®ç‰¹å®šçš„å‡½æ•°ã€‚ è¡¨å•æäº¤ è‡³å°‘éœ€è¦2ä¸ªé¡µé¢ï¼Œæäº¤ç•Œé¢å’Œç»“æœç•Œé¢ã€‚ from flask import Flask, render_template, request import datetime # flaskç±»æ¥æ”¶ä¸€ä¸ªå‚æ•°__name__ app = Flask(__name__) # è·¯ç”±è§£æï¼Œé€šè¿‡ç”¨æˆ·èŒƒæ–‡çš„è·¯å¾„ï¼ŒåŒ¹é…ç›¸åº”çš„å‡½æ•°ã€‚ @app.route('/test/register') def register(): return render_template(\"test/register.html\") # debugæ¨¡å¼å¼€å¯,æ›´æ”¹ä»£ç åï¼Œæµè§ˆå™¨å®æ—¶æ˜¾ç¤ºã€‚ # Flaskåº”ç”¨ç¨‹åºå®ä¾‹çš„runæ–¹æ³•å¯åŠ¨webæœåŠ¡å™¨ if __name__ == '__main__': app.run() # è·¯ç”±è·¯å¾„ä¸èƒ½é‡å¤ï¼Œç”¨æˆ·é€šè¿‡å”¯ä¸€è·¯å¾„æ¥è®¿é—®ç‰¹å®šçš„å‡½æ•°ã€‚ æ¥æ”¶è¡¨å•æäº¤çš„è·¯ç”±ï¼Œéœ€è¦æŒ‡å®šmethodsä¸ºpost from flask import Flask, render_template, request import datetime # flaskç±»æ¥æ”¶ä¸€ä¸ªå‚æ•°__name__ app = Flask(__name__) # è·¯ç”±è§£æï¼Œé€šè¿‡ç”¨æˆ·èŒƒæ–‡çš„è·¯å¾„ï¼ŒåŒ¹é…ç›¸åº”çš„å‡½æ•°ã€‚ @app.route('/result', methods=['POST','GET']) def result(): if request.method == 'POST': result = request.form return render_template(\"test/result.html\", result=result) # debugæ¨¡å¼å¼€å¯,æ›´æ”¹ä»£ç åï¼Œæµè§ˆå™¨å®æ—¶æ˜¾ç¤ºã€‚ # Flaskåº”ç”¨ç¨‹åºå®ä¾‹çš„runæ–¹æ³•å¯åŠ¨webæœåŠ¡å™¨ if __name__ == '__main__': app.run() # è·¯ç”±è·¯å¾„ä¸èƒ½é‡å¤ï¼Œç”¨æˆ·é€šè¿‡å”¯ä¸€è·¯å¾„æ¥è®¿é—®ç‰¹å®šçš„å‡½æ•°ã€‚ ","date":"2022-07-21","objectID":"/flask%E5%85%A5%E9%97%A8/:1:2","tags":["flask"],"title":"Flaskå…¥é—¨","uri":"/flask%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"sqlite3ä½¿ç”¨ è¿æ¥æ•°æ®åº“ import sqlite3 conn = sqlite3.connect(\"test.db\") # æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ print(\"Opened database successfully\") c = conn.cursor() # è·å–æ¸¸æ ‡ sql = \"\" c.execute(sql) # æ‰§è¡Œsqlè¯­å¥ conn.commit() # æäº¤æ•°æ®åº“æ“ä½œ conn.close() # å…³é—­æ•°æ®åº“è¿æ¥ print(\"ok\") åˆ›å»ºæ•°æ®è¡¨ import sqlite3 conn = sqlite3.connect(\"test.db\") # æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ print(\"æˆåŠŸæ‰“å¼€æ•°æ®\") c = conn.cursor() # è·å–æ¸¸æ ‡ sql = ''' create table company (id int primary key not null, name text not null, age int not null, address char(50), salary real ); ''' c.execute(sql) # æ‰§è¡Œsqlè¯­å¥ conn.commit() # æäº¤æ•°æ®åº“æ“ä½œ conn.close() # å…³é—­æ•°æ®åº“è¿æ¥ print(\"å»ºè¡¨æˆåŠŸ\") ä½¿ç”¨pycharmè¿æ¥æ•°æ®åº“ è§ æ’å…¥æ•°æ® import sqlite3 conn = sqlite3.connect(\"test.db\") # æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ print(\"æˆåŠŸæ‰“å¼€æ•°æ®\") c = conn.cursor() # è·å–æ¸¸æ ‡ sql1 = ''' insert into company(id, name,age,address, salary) values(1,'å¼ ä¸‰',32,\"æˆéƒ½\",8000); ''' sql2 = ''' insert into company(id, name,age,address, salary) values(2,'æå››',30,\"é‡åº†\",15000); ''' c.execute(sql1) # æ‰§è¡Œsqlè¯­å¥ c.execute(sql2) # æ‰§è¡Œsqlè¯­å¥ conn.commit() # æäº¤æ•°æ®åº“æ“ä½œ conn.close() # å…³é—­æ•°æ®åº“è¿æ¥ print(\"æ’å…¥æ•°æ®å®Œæ¯•\") æŸ¥è¯¢æ•°æ® import sqlite3 conn = sqlite3.connect(\"test.db\") # æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ print(\"æˆåŠŸæ‰“å¼€æ•°æ®\") c = conn.cursor() # è·å–æ¸¸æ ‡ sql = \"select id, name, address, salary from company\" cursor = c.execute(sql) # æ‰§è¡Œsqlè¯­å¥ for row in cursor: print(\"id = \", row[0]) print(\"name = \", row[1]) print(\"address = \", row[2]) print(\"salary = \", row[3], \"\\n\") conn.close() # å…³é—­æ•°æ®åº“è¿æ¥ print(\"æŸ¥è¯¢å®Œæ¯•\") ","date":"2022-07-20","objectID":"/sqlite3%E4%BD%BF%E7%94%A8/:1:0","tags":["sqlite3"],"title":"sqlite3ä½¿ç”¨","uri":"/sqlite3%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"BeautifulSoup4å°†å¤æ‚çš„HTMLæ–‡æ¡£è½¬æ¢æˆä¸€ä¸ªå¤æ‚çš„æ ‘å½¢ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯Pythonå¯¹è±¡ï¼Œæ‰€æœ‰å¯¹è±¡å¯ä»¥å½’çº³ä¸º4ç§ Tag NavigableString BeautifulSoup Comment ","date":"2022-07-17","objectID":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/:0:0","tags":["python"],"title":"Bs4-æ­£åˆ™è¡¨è¾¾å¼-Reæ¨¡å—","uri":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"å…¨å±€ä»£ç  from bs4 import BeautifulSoup file = open(r\"D:\\code2022\\auto-work\\douban\\test\\baidu.html\",\"rb\") html = file.read().decode('utf-8') bs = BeautifulSoup(html,\"html.parser\") print(bs.title) # \u003ctitle\u003eç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“\u003c/title\u003e print(bs.a) print(bs.head) print(type(bs.head)) # \u003cclass 'bs4.element.Tag'\u003e ","date":"2022-07-17","objectID":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/:0:1","tags":["python"],"title":"Bs4-æ­£åˆ™è¡¨è¾¾å¼-Reæ¨¡å—","uri":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"Tag æ ‡ç­¾åŠå…¶å†…å®¹ æ‹¿åˆ°å®ƒæ‰€æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå†…å®¹ NavigableString æ ‡ç­¾é‡Œçš„å†…å®¹ï¼ˆå­—ç¬¦ä¸²ï¼‰ print(bs.title.string) # ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“ print(type(bs.title.string)) # \u003cclass 'bs4.element.NavigableString'\u003e BeautifulSoup è¡¨ç¤ºæ•´ä¸ªæ–‡æ¡£ print(bs.a.attrs) print(type(bs)) # \u003cclass 'bs4.BeautifulSoup'\u003e Comment æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„NavigableStringï¼Œè¾“å‡ºçš„å†…å®¹ä¸åŒ…å«æ³¨é‡Šç¬¦å·ã€‚ print(bs.name) # [document] print(bs) print(bs.a.string) print(type(bs.a.string)) æ–‡æ¡£çš„éå†,éå†æ–‡æ¡£æ ‘ã€‚ print(bs.head.contents) print(bs.head.contents[1]) # æ›´å¤šå†…å®¹ï¼Œæœç´¢æ–‡æ¡£ã€‚ ","date":"2022-07-17","objectID":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/:0:2","tags":["python"],"title":"Bs4-æ­£åˆ™è¡¨è¾¾å¼-Reæ¨¡å—","uri":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ–‡æ¡£çš„æœç´¢ find_all() # å­—ç¬¦ä¸²è¿‡æ»¤ï¼šä¼šæŸ¥æ‰¾ä¸å­—ç¬¦ä¸²å®Œå…¨åŒ¹é…çš„å†…å®¹ t_list = bs.find_all(\"a\") import re # æ­£åˆ™è¡¨è¾¾å¼æœç´¢ï¼šä½¿ç”¨search() æ–¹æ³•æ¥åŒ¹é…å†…å®¹ t_list = bs.find_all(re.compile(\"a\")) # æ–¹æ³•ï¼š ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ï¼Œæ ¹æ®å‡½æ•°çš„è¦æ±‚æ¥æœç´¢(äº†è§£) def name_is_exits(tag): return tag.has_attr(\"name\") t_list = bs.find_all(name_is_exits) for item in t_list: print(item) print(t_list) kwargs å‚æ•° t_list = bs.find_all(id=\"head\") t_list = bs.find_all(href=\"http://news.baidu.com\") t_list = bs.find_all(class_=True) for item in t_list: print(item) textå‚æ•° t_list = bs.find_all(text= \"hao123\") t_list = bs.find_all(text=[\"hao123\",\"åœ°å›¾\",\"è´´å§\"]) t_list = bs.find_all(text=re.compile(\"\\d\")) # åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æŸ¥æ‰¾åŒ…å«ç‰¹å®šæ–‡æœ¬çš„å†…å®¹ï¼ˆæ ‡ç­¾é‡Œçš„å­—ç¬¦ä¸²ï¼‰ limit å‚æ•° t_list = bs.find_all(\"a\",limit=3) for item in t_list: print(item) css é€‰æ‹©å™¨ t_list = bs.select('title') # é€šè¿‡æ ‡ç­¾æ¥æŸ¥æ‰¾ for item in t_list: print(item) t_list = bs.select(\".mnav\") # é€šè¿‡ç±»åæŸ¥æ‰¾ for item in t_list: print(item) t_list = bs.select(\"#u1\") # é€šè¿‡idæŸ¥æ‰¾ for item in t_list: print(item) t_list = bs.select(\"a[class='guide-info']\") # é€šè¿‡å±æ€§æ¥æŸ¥æ‰¾ for item in t_list: print(item) t_list = bs.select(\"head \u003e title\") # é€šè¿‡å­æ ‡ç­¾æ¥æŸ¥æ‰¾ for item in t_list: print(item) t_list = bs.select(\".mnav ~ .bri\") # æŸ¥æ‰¾mnavä¸‹çš„briæ ‡ç­¾ print(t_list[0].get_text()) ","date":"2022-07-17","objectID":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/:0:3","tags":["python"],"title":"Bs4-æ­£åˆ™è¡¨è¾¾å¼-Reæ¨¡å—","uri":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ­£åˆ™è¡¨è¾¾å¼ä¸Reåº“ ","date":"2022-07-17","objectID":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/:1:0","tags":["python"],"title":"Bs4-æ­£åˆ™è¡¨è¾¾å¼-Reæ¨¡å—","uri":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨æ“ä½œç¬¦ï¼ˆ1ï¼‰ æ“ä½œç¬¦ è¯´æ˜ å®ä¾‹ . è¡¨ç¤ºä»»ä½•å•ä¸ªå­—ç¬¦ [ ] å­—ç¬¦é›†ï¼Œå¯¹å•ä¸ªå­—ç¬¦ç»™å‡ºå–å€¼èŒƒå›´ [abc]è¡¨ç¤ºaã€bã€c,[a-z]è¡¨ç¤ºaåˆ°zå•ä¸ªå­—ç¬¦ [^ ] éå­—ç¬¦é›†ï¼Œå¯¹å•ä¸ªå­—ç¬¦ç»™å‡ºæ’é™¤èŒƒå›´ [^abc]è¡¨ç¤ºéaæˆ–bæˆ–cçš„å•ä¸ªå­—ç¬¦ * å‰ä¸€ä¸ªå­—ç¬¦0æ¬¡æˆ–æ— é™æ¬¡æ‰©å±• abc* è¡¨ç¤º abã€abcã€abccã€abcccç­‰ + å‰ä¸€ä¸ªå­—ç¬¦1æ¬¡æˆ–æ— é™æ¬¡æ‰©å±• abc+ è¡¨ç¤º abcã€abccã€abcccç­‰ ï¼Ÿ å‰ä¸€ä¸ªå­—ç¬¦0æ¬¡æˆ–1æ¬¡æ‰©å±• abc? è¡¨ç¤º abã€abc | å·¦å³è¡¨è¾¾å¼ä»»æ„ä¸€ä¸ª abc | def è¡¨ç¤º abcã€ def ","date":"2022-07-17","objectID":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/:1:1","tags":["python"],"title":"Bs4-æ­£åˆ™è¡¨è¾¾å¼-Reæ¨¡å—","uri":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨æ“ä½œç¬¦ï¼ˆ2ï¼‰ æ“ä½œç¬¦ è¯´æ˜ å®ä¾‹ {m} æ‰©å±•å‰ä¸€ä¸ªå­—ç¬¦mæ¬¡ ab{2}cè¡¨ç¤ºabbc {m,n} æ‰©å±•å‰ä¸€ä¸ªå­—ç¬¦mè‡³næ¬¡ï¼ˆå«nï¼‰ ab{1,2}cè¡¨ç¤ºabcã€abbc ^ åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´ ^abc è¡¨ç¤ºabcä¸”åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´ $ åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾ abc$è¡¨ç¤ºabcä¸”åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æœ«å°¾ () åˆ†ç»„æ ‡è®°ï¼Œå†…éƒ¨åªèƒ½ä½¿ç”¨ | æ“ä½œç¬¦ (abc)è¡¨ç¤ºabcï¼Œ(abc|def)è¡¨ç¤ºabcã€def \\d æ•°å­—ï¼Œç­‰ä»·äº[0-9] \\w å•è¯å­—ç¬¦ï¼Œç­‰ä»·äº[A-Za-z0-9_] ","date":"2022-07-17","objectID":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/:1:2","tags":["python"],"title":"Bs4-æ­£åˆ™è¡¨è¾¾å¼-Reæ¨¡å—","uri":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"Reåº“ä¸»è¦åŠŸèƒ½å‡½æ•° å‡½æ•° è¯´æ˜ re.search() åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœç´¢åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œè¿”å›matchå¯¹è±¡ re.match() ä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®èµ·åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿”å›matchå¯¹è±¡ re.findall() æœç´¢å­—ç¬¦ä¸²ï¼Œä»¥åˆ—è¡¨ç±»å‹è¿”å›å…¨éƒ¨èƒ½åŒ¹é…çš„å­ä¸² re.split() å°†ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç»“æœè¿›è¡Œåˆ†å‰²ï¼Œè¿”å›åˆ—è¡¨ç±»å‹ re.finditer() æœç´¢å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªåŒ¹é…ç»“æœçš„è¿­ä»£ç±»å‹ï¼Œæ¯ä¸ªè¿­ä»£å…ƒç´ æ˜¯matchå¯¹è±¡ re.sub() åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ›¿æ¢æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­—ä¸²ï¼Œè¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²ã€‚ æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒ…å«ä¸€äº›å¯é€‰æ ‡å¿—ä¿®é¥°ç¬¦æ¥æ§åˆ¶åŒ¹é…çš„æ¨¡å¼ã€‚ä¿®é¥°ç¬¦è¢«æŒ‡å®šä¸ºä¸€ä¸ªå¯é€‰çš„æ ‡å¿—ã€‚å¤šä¸ªæ ‡å¿—å¯ä»¥é€šè¿‡æŒ‰ä½OR(|)å®ƒä»¬æ¥æŒ‡å®šã€‚å¦‚re.l|re.Mè¢«è®¾ç½®æˆ|å’ŒMæ ‡å¿—ã€‚ ä¿®é¥°ç¬¦ æè¿° re.l ä½¿åŒ¹é…å¯¹å¤§å°å†™ä¸æ•æ„Ÿ re.L åšæœ¬åœ°åŒ–è¯†åˆ«ï¼ˆlocal-awareï¼‰ re.M å¤šè¡ŒåŒ¹é…ï¼Œå½±å“^å’Œ$ re.S ä½¿.åŒ¹é…åŒ…æ‹¬æ¢è¡Œåœ¨å†…çš„æ‰€æœ‰å­—ç¬¦ re.U æ ¹æ®Unicodeå­—ç¬¦é›†è§£æå­—ç¬¦ã€‚è¿™ä¸ªæ ‡å¿—å½±å“\\w ï¼Œ\\Wï¼Œ \\bï¼Œ \\B re.X è¯¥æ ‡å¿—é€šè¿‡ç»™ä¸ä½ æ›´çµæ´»çš„æ ¼å¼ä»¥ä¾¿ä½ å°†æ­£åˆ™è¡¨è¾¾å¼å†™çš„æ›´æ˜“äºç†è§£ã€‚ æ­£åˆ™è¡¨è¾¾å¼ï¼šå­—ç¬¦ä¸²æ¨¡å¼ï¼ˆåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆä¸€å®šçš„æ ‡å‡†ï¼‰ import re # åˆ›å»ºæ¨¡å¼å¯¹è±¡ pat = re.compile(\"AA\") # æ­¤å¤„çš„AA æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æ¥å»éªŒè¯å…¶ä»–å­—ç¬¦ä¸² m = pat.search(\"CBA\") # search å­—ç¬¦ä¸²è¢«æ ¡éªŒçš„å†…å®¹ m = pat.search(\"ABCAA\") print(m) # \u003cre.Match object; span=(3, 5), match='AA'\u003e m = pat.search(\"ABCAADDCCAAA\") # search æ–¹æ³•è¿›è¡Œæ¯”å¯¹æŸ¥æ‰¾ print(m) # \u003cre.Match object; span=(3, 5), match='AA'\u003e # æ²¡æœ‰æ¨¡å¼å¯¹è±¡ m = re.search(\"asd\",\"Aasd\") # å‰é¢çš„å­—ç¬¦ä¸²æ˜¯è§„åˆ™ï¼ˆæ¨¡æ¿ï¼‰ï¼Œåé¢çš„å­—ç¬¦ä¸²æ˜¯è¢«æ ¡éªŒçš„å¯¹è±¡ã€‚ print(m) # \u003cre.Match object; span=(1, 4), match='asd'\u003e print(re.findall(\"a\",\"ASDaDFGAa\")) # ['a', 'a'] å‰é¢å­—ç¬¦ä¸²æ˜¯è§„åˆ™ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼Œåé¢å­—ç¬¦ä¸²æ˜¯è¢«æ ¡éªŒçš„å­—ç¬¦ä¸² print(re.findall(\"[A-Z]\",\"ASDaDFGAa\")) # ['A', 'S', 'D', 'D', 'F', 'G', 'A'] print(re.findall(\"[A-Z]+\",\"ASDaDFGAa\")) # ['ASD', 'DFGA'] # sub print(re.sub(\"a\",\"A\",\"abcdcasd\")) # æ‰¾åˆ°aç”¨Aæ›¿æ¢ï¼Œåœ¨ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²ç§æŸ¥æ‰¾ # å»ºè®®ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œè¢«æ¯”è¾ƒçš„å­—ç¬¦ä¸²å‰é¢åŠ ä¸Šrï¼Œä¸ç”¨æ‹…å¿ƒè½¬ä¹‰å­—ç¬¦çš„é—®é¢˜ã€‚ a = r\"\\aabd-\\'\" print(a) # \\aabd-\\' ","date":"2022-07-17","objectID":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/:1:3","tags":["python"],"title":"Bs4-æ­£åˆ™è¡¨è¾¾å¼-Reæ¨¡å—","uri":"/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"ç½‘é¡µå„ç§æµ‹è¯• http://httpbin.org è·å–ä¸€ä¸ªgetè¯·æ±‚ import urllib.request res = urllib.request.urlopen(\"http://www.baidu.com\") print(res.read().decode('utf-8')) # å¯¹è·å–åˆ°çš„ç½‘é¡µæºç è¿›è¡Œutf-8è§£ç  è·å–ä¸€ä¸ªpostè¯·æ±‚.ï¼ˆæ¨¡æ‹Ÿç”¨æˆ·ç™»å½•ï¼‰ import urllib.parse # å¼•å…¥è§£æåº“ data = bytes(urllib.parse.urlencode({\"hello\":\"world\"}),encoding='utf-8') res1 = urllib.request.urlopen(\"http://httpbin.org/post\",data=data) print(res1.read().decode(\"utf-8\")) è¶…æ—¶å¤„ç† try: res1 = urllib.request.urlopen(\"http://httpbin.org/get\",timeout=0.01) print(res1.read().decode('utf-8')) except urllib.error.URLError as e: print(\"time out!\") è·å–åŸºæœ¬ä¿¡æ¯ res2 = urllib.request.urlopen(\"http://baidu.com\") print(res2.status) # è·å–çŠ¶æ€ç  print(res2.getheaders()) # è·å–å¤´éƒ¨ä¿¡æ¯ print(res2.getheader(\"Server\")) # Apache ç›´æ¥è¯·æ±‚è±†ç“£ç½‘å€ url = \"https://douban.com\" req = urllib.request.Request(url=url) response = urllib.request.urlopen(req) print(response.read().decode(\"utf-8\")) æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼šï¼ˆè¯´æ˜è±†ç“£å·²ç»è¯†åˆ«åˆ°æ˜¯çˆ¬è™«çš„è¯·æ±‚ï¼‰ raise HTTPError(req.full_url, code, msg, hdrs, fp) urllib.error.HTTPError: HTTP Error 418 å¦‚ä½•ä¼ªè£…æˆæµè§ˆå™¨æ¥è¯·æ±‚å‘¢ï¼Ÿè¿™æ—¶å€™éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ user-agentã€‚user-agentå¦‚ä½•è·å–ï¼Ÿæµè§ˆå™¨F12-ã€‹NETWORK-\u003eç‚¹å‡»å·¦ä¾§å¸¦æœ‰getè¯·æ±‚çš„ç½‘å€ï¼Œå³ä¾§æ‹‰åˆ°æœ€ä¸‹è¾¹å¤åˆ¶user-agentçš„å€¼ã€‚ æ„å»ºä»£ç åå†æ¬¡è¯·æ±‚ï¼Œæ”¶åˆ°è¿”å›çš„æ•°æ®äº†ã€‚ url = \"https://douban.com\" headers = { \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36\" } req = urllib.request.Request(url=url,headers=headers) response = urllib.request.urlopen(req) print(response.read().decode(\"utf-8\")) ","date":"2022-07-17","objectID":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:0:1","tags":["urllibåº“"],"title":"urllibåº“çš„åŸºæœ¬ä½¿ç”¨","uri":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"UAä¼ªè£… æ–¹å¼ä¸€ å°†å¸¸è§çš„UserAgentç”¨åˆ—è¡¨ä¿å­˜èµ·æ¥ ua_list = [ \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)\", \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)\", \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\", \"Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\", \"Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; en) Presto/2.8.131 Version/11.11\", \"Opera/9.80 (Windows NT 6.1; U; en) Presto/2.8.131 Version/11.11\", \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_0) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Maxthon 2.0)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; TencentTraveler 4.0)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; The World)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SE 2.X MetaSr 1.0; SE 2.X MetaSr 1.0; .NET CLR 2.0.50727; SE 2.X MetaSr 1.0)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; 360SE)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Avant Browser)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)\", \"Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5\", \"Mozilla/5.0 (iPod; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5\", \"Mozilla/5.0 (iPad; U; CPU OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5\", \"Mozilla/5.0 (Linux; U; Android 2.3.7; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\", \"MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22; CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\", \"Opera/9.80 (Android 2.3.4; Linux; Opera Mobi/build-1107180945; U; en-GB) Presto/2.8.149 Version/11.10\", \"Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13\", \"Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; en) AppleWebKit/534.1+ (KHTML, like Gecko) Version/6.0.0.337 Mobile Safari/534.1+\", \"Mozilla/5.0 (hp-tablet; Linux; hpwOS/3.0.0; U; en-US) AppleWebKit/534.6 (KHTML, like Gecko) wOSBrowser/233.70 Safari/534.6 TouchPad/1.0\", \"Mozilla/5.0 (SymbianOS/9.4; Series60/5.0 NokiaN97-1/20.0.019; Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebKit/525 (KHTML, like Gecko) BrowserNG/7.1.18124\", \"Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0; HTC; Titan)\" ] ä»£ç æ¼”ç¤º import random from urllib.request import urlopen, Request url = \"http://httpbin.org/get\" ua_list = [ \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)\", \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)\", \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\", \"Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1\", \"Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; en) Presto/2.8.131 Version/11.11\", \"Opera/9.80 (Windows NT 6.1; U; en) Presto/2.8.131 Version/11.11\", \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_0) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Maxthon 2.0)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; TencentTraveler 4.0)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; The World)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SE 2.X MetaSr 1.0; SE 2.X MetaSr 1.0; .NET CLR 2.0.50727; SE 2.X MetaSr 1.0)\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; 360SE)\", \"Mozilla/4.0 (compatible; MSIE 7.0; ","date":"2022-07-17","objectID":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:1:0","tags":["urllibåº“"],"title":"urllibåº“çš„åŸºæœ¬ä½¿ç”¨","uri":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨ä»£ç† ","date":"2022-07-17","objectID":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:2:0","tags":["urllibåº“"],"title":"urllibåº“çš„åŸºæœ¬ä½¿ç”¨","uri":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¸¸ç”¨çš„handlerå¯¹è±¡ HTTPHandler: æ™®é€šçš„HTTPå¤„ç†å™¨ ProxyHandler: ä»£ç†IPå¤„ç†å™¨ HTTPCookieProcessor: cookieå¤„ç†å™¨ ","date":"2022-07-17","objectID":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:2:1","tags":["urllibåº“"],"title":"urllibåº“çš„åŸºæœ¬ä½¿ç”¨","uri":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ä»£ç æ¼”ç¤º HTTPHandler # -*- coding:utf-8 -*- from fake_useragent import UserAgent from urllib.request import Request, urlopen, build_opener, HTTPHandler def download(url): headers = { \"User-Agent\": UserAgent().random } req = Request(url, headers=headers) # åˆ›å»ºhttpå¤„ç†å™¨å¯¹è±¡,debuglevelæ‰“å¼€è°ƒè¯• handler = HTTPHandler(debuglevel=2) opener = build_opener(handler) resp = opener.open(req) print(resp.read().decode('utf-8')) if __name__ == '__main__': url = \"http://httpbin.org/get\" download(url) è¾“å‡ºå¦‚ä¸‹ send: b'GET /get HTTP/1.1\\r\\nAccept-Encoding: identity\\r\\nHost: httpbin.org\\r\\nUser-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1985.67 Safari/537.36\\r\\nConnection: close\\r\\n\\r\\n' reply: 'HTTP/1.1 200 OK\\r\\n' header: Date: Wed, 20 Jul 2022 08:06:06 GMT header: Content-Type: application/json header: Content-Length: 359 header: Connection: close header: Server: gunicorn/19.9.0 header: Access-Control-Allow-Origin: * header: Access-Control-Allow-Credentials: true { \"args\": {}, \"headers\": { \"Accept-Encoding\": \"identity\", \"Host\": \"httpbin.org\", \"User-Agent\": \"Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1985.67 Safari/537.36\", \"X-Amzn-Trace-Id\": \"Root=1-62d7b76e-4c99f8712c1292a55b601fa4\" }, \"origin\": \"è®¿é—®çš„ip\", \"url\": \"http://httpbin.org/get\" } ProxyHandler # -*- coding:utf-8 -*- from fake_useragent import UserAgent from urllib.request import Request, build_opener, ProxyHandler def proxy_handler(url): headers = { \"User-Agent\": UserAgent().random } req = Request(url, headers=headers) # ProxyHandler({\"http\": \"ip:port\"}) handler = ProxyHandler({\"http\": \"58.20.235.180:9091\"}) opener = build_opener(handler) resp = opener.open(req) # print(resp.info()) print(resp.read().decode()) if __name__ == '__main__': url = \"http://httpbin.org/get\" proxy_handler(url) è¾“å‡ºå¦‚ä¸‹ { \"args\": {}, \"headers\": { \"Host\": \"httpbin.org\", \"User-Agent\": \"Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.93 Safari/537.36\", \"X-Amzn-Trace-Id\": \"Root=1-62d7b7ea-05098b4c34bab12d7cc0dfe7\" }, \"origin\": \"58.20.235.180\", \"url\": \"http://httpbin.org/get\" } å‘ç°ä½¿ç”¨äº†ä»£ç†IPè¯·æ±‚çš„ç½‘é¡µã€‚ ç™»å½•cookieå¤„ç†è§ ","date":"2022-07-17","objectID":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/:2:2","tags":["urllibåº“"],"title":"urllibåº“çš„åŸºæœ¬ä½¿ç”¨","uri":"/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"çˆ¬è™«åˆ†ææ­¥éª¤ å‡†å¤‡å·¥ä½œ è·å–æ•°æ® è§£æå†…å®¹ ä¿å­˜æ•°æ® ","date":"2022-07-17","objectID":"/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/:1:0","tags":["python"],"title":"è±†ç“£ç”µå½±æ•°æ®åˆ†æ","uri":"/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/"},{"categories":["ç¼–ç¨‹"],"content":"urlåˆ†æ é¡µé¢åŒ…æ‹¬250æ¡ç”µå½±æ•°æ®ï¼Œåˆ†10é¡µï¼Œæ¯é¡µ25æ¡ã€‚æ¯é¡µçš„urlçš„ä¸åŒä¹‹å¤„ï¼šæœ€åçš„æ•°å€¼= ï¼ˆé¡µæ•°-1ï¼‰*25 # ç¬¬ä¸€é¡µç¬¬ä¸€æ¡ https://movie.douban.com/top250?start=0 æœåŠ¡å™¨é€šè¿‡headersé‰´å®šå®¢æˆ·ç«¯ä¿¡æ¯ã€‚ ","date":"2022-07-17","objectID":"/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/:1:1","tags":["python"],"title":"è±†ç“£ç”µå½±æ•°æ®åˆ†æ","uri":"/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/"},{"categories":["ç¼–ç¨‹"],"content":"ä¿å­˜åˆ°excelè¡¨æ ¼ä¸­ï¼Œä»£ç å¦‚ä¸‹ æ³¨æ„ï¼šå¦‚æœipè¢«é™åˆ¶å¯ä»¥å¸¦cookieè¯·æ±‚ï¼Œè¿™æ ·æœåŠ¡å™¨ä¼šè®¤ä¸ºæ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚ã€‚ æˆ–è€…ä½¿ç”¨ä»£ç†IPæ¥è®¿é—®ã€‚ ä»£ç†IPç½‘ç«™ from bs4 import BeautifulSoup # ç½‘é¡µè§£æï¼Œè·å–æ•°æ® import re # æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿›è¡Œæ–‡å­—åŒ¹é… import urllib.request, urllib.error # æŒ‡å®šurlï¼Œè·å–ç½‘é¡µæ•°æ® from urllib.error import URLError import xlwt # è¿›è¡Œexeclæ“ä½œ import sqlite3 # è¿›è¡Œsqlite æ•°æ®åº“æ“ä½œ from fake_useragent import UserAgent # å¼•å…¥åŠ¨æ€éšæœºUserAgent from urllib.request import build_opener, ProxyHandler # ååçˆ¬ï¼Œä½¿ç”¨ä»£ç†IPï¼Œé˜²æ­¢è¢«æœåŠ¡å™¨å°æ‰ã€‚ def main(): baseurl = \"https://movie.douban.com/top250?start=\" # 1.çˆ¬å–ç½‘é¡µ datalist = getData(baseurl) savepath = \".\\\\è±†ç“£ç”µå½±top250.xls\" # 3.ä¿å­˜æ•°æ® saveData(datalist,savepath) # askURL(\"https://movie.douban.com/top250?start=0\") # å½±ç‰‡è¯¦æƒ…çš„è§„åˆ™ findLink = re.compile(r'\u003ca href=\"(.*?)\"\u003e') # åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œè¡¨ç¤ºè§„åˆ™ï¼ˆå­—ç¬¦ä¸²çš„æ¨¡å¼ï¼‰ # å½±ç‰‡å›¾ç‰‡ findImgSrc = re.compile(r'\u003cimg.*src=\"(.*?)\"',re.S) # re.S è®©æ¢è¡Œç¬¦åŒ…å«åœ¨å­—ç¬¦ä¸­ # å½±ç‰‡ç‰‡å findTitle = re.compile(r'\u003cspan class=\"title\"\u003e(.*)\u003c/span\u003e') # å½±ç‰‡è¯„åˆ† findRating = re.compile(r'\u003cspan class=\"rating_num\" property=\"v:average\"\u003e(.*)\u003c/span\u003e') # æ‰¾åˆ°è¯„ä»·äººæ•° findJudge = re.compile(r'\u003cspan\u003e(\\d*)äººè¯„ä»·\u003c/span\u003e') # æ‰¾åˆ°æ¦‚å†µ findInq = re.compile(r'\u003cspan class=\"inq\"\u003e(.*)\u003c/span\u003e') # æ‰¾åˆ°å½±ç‰‡çš„ç›¸å…³å†…å®¹ findBd =re.compile(r'\u003cp class=\"\"\u003e(.*?)\u003c/p\u003e',re.S) # çˆ¬å–ç½‘é¡µ def getData(baseurl): datalist = [] for i in range(0,10): # è°ƒç”¨è·å–é¡µé¢ä¿¡æ¯çš„å‡½æ•°,10æ¬¡,æ­£å¥½10é¡µå†…å®¹250æ¡ã€‚ url = baseurl + str(i*25) askURL(url) html = askURL(url) # ä¿å­˜è·å–åˆ°çš„ç½‘é¡µæºç  # 2.é€ä¸€è§£ææ•°æ® soup = BeautifulSoup(html,\"html.parser\") for item in soup.find_all(\"div\",class_=\"item\"): #æŸ¥æ‰¾ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸²å½¢æˆåˆ—è¡¨ã€‚ # print(item) # æµ‹è¯•æŸ¥çœ‹ç”µå½±itemå…¨éƒ¨ä¿¡æ¯ data = [] #ä¿å­˜ä¸€éƒ¨ç”µå½±çš„æ‰€æœ‰ä¿¡æ¯ item = str(item) # å½±ç‰‡è¯¦æƒ…çš„é“¾æ¥ link = re.findall(findLink,item)[0] #reåº“ç”¨æ¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾æŒ‡å®šçš„å­—ç¬¦ä¸² # print(link) data.append(link) # æ·»åŠ é“¾æ¥ imgSrc= re.findall(findImgSrc,item)[0] #æ·»åŠ å›¾ç‰‡ data.append(imgSrc) titles = re.findall(findTitle,item) # ç‰‡åå¯èƒ½åªæœ‰ä¸€ä¸ªä¸­æ–‡åï¼Œæ²¡æœ‰å¤–å›½å if (len(titles) == 2): ctitle = titles[0] # æ·»åŠ ä¸­æ–‡å data.append(ctitle) otitle = titles[1].replace(\"/\",\"\") # å»æ‰æ— å…³çš„ç¬¦å· data.append(otitle) # æ·»åŠ å¤–å›½å else: data.append(titles[0]) data.append(' ') # å¤–å›½åå­—ç•™ç©º rating = re.findall(findRating,item)[0] # æ·»åŠ è¯„åˆ† data.append(rating) judgeNim = re.findall(findJudge,item)[0] data.append(judgeNim) # æ·»åŠ è¯„ä»·äººæ•° inq = re.findall(findInq,item) if len(inq) != 0: inq = inq[0].replace(\"ã€‚\",\"\") # å»æ‰å¥å· data.append(inq) # æ·»åŠ æ¦‚è¿° else: data.append(\" \") # ç•™ç©º bd = re.findall(findBd,item)[0] bd = re.sub('\u003cbr(\\s+)?/\u003e(\\s+)?',\" \",bd) # å»æ‰\u003cbr/\u003e bd = re.sub('/',\" \",bd) # æ›¿æ¢/ data.append(bd.strip()) # å»æ‰å‰åçš„ç©ºæ ¼ datalist.append(data) # æŠŠå¤„ç†å¥½çš„ä¸€éƒ¨åˆ†ç”µå½±ä¿¡æ¯æ”¾å…¥datalist # print(datalist) return datalist # å¾—åˆ°ä¸€ä¸ªæŒ‡å®šçš„URLçš„ç½‘é¡µå†…å®¹ def askURL(url): head = { # æ¨¡æ‹Ÿæµè§ˆå™¨å¤´éƒ¨ä¿¡æ¯ï¼Œå‘è±†ç“£æœåŠ¡å™¨å‘é€æ¶ˆæ¯ \"User-Agent\": UserAgent().random } request = urllib.request.Request(url,headers=head) handler = ProxyHandler({\"http\":\"58.20.184.187:9091\"}) # ä½¿ç”¨ä»£ç†IPè¯·æ±‚èµ„æº opener = build_opener(handler) # ç”¨æˆ·ä»£ç†è¡¨ç¤ºå‘Šè¯‰è±†ç“£æœåŠ¡å™¨ï¼Œæˆ‘ä»¬æ˜¯ä»€ä¹ˆç±»å‹çš„æœºå™¨ã€æµè§ˆå™¨(æœ¬è´¨ä¸Šæ˜¯å‘Šè¯‰æµè§ˆå™¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ”¶ä»€ä¹ˆæ°´å¹³çš„æ–‡ä»¶å†…å®¹) html = \"\" try: resp = opener.open(request) html = resp.read().decode(\"utf-8\") # print(html) except URLError as e: if hasattr(e,\"code\"): print(e.code) if hasattr(e,\"reason\"): print(e.reason) return html # 3.ä¿å­˜æ•°æ® def saveData(datalist,savepath): print(\"save....\") book = xlwt.Workbook(encoding='utf-8') # åˆ›å»ºworkbookå¯¹è±¡ sheet = book.add_sheet('è±†ç“£ç”µå½±Top250',cell_overwrite_ok=True) # åˆ›å»ºå·¥ä½œè¡¨ col = (\"ç”µå½±è¯¦æƒ…é“¾æ¥\",\"å›¾ç‰‡é“¾æ¥\",\"å½±ç‰‡ä¸­æ–‡å\",\"å½±ç‰‡å¤–å›½å\",\"è¯„åˆ†\",\"è¯„ä»·æ•°\",\"æ¦‚å†µ\",\"ç›¸å…³ä¿¡æ¯\") for i in range(0,8): sheet.write(0,i,col[i]) # åˆ—å for i in range(0,250): print(\"ç¬¬%dæ¡\" %i) data = datalist[i] for j in range(0,8): sheet.write(i+1,j,data[j]) # æ•°æ® book.save(savepath) # ä¿å­˜æ•°æ®è¡¨ if __name__ == \"__main__\": # å½“ç¨‹åºæ‰§è¡Œæ—¶ã€‚ç¨‹åºå…¥å£ï¼Œæ§åˆ¶å‡½æ•°è°ƒç”¨é¡ºåºã€‚ # è°ƒç”¨å‡½æ•° main() print(\"çˆ¬å–å®Œæ¯•ï¼\") ","date":"2022-07-17","objectID":"/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/:1:2","tags":["python"],"title":"è±†ç“£ç”µå½±æ•°æ®åˆ†æ","uri":"/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/"},{"categories":["ç¼–ç¨‹"],"content":"ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œä»£ç å¦‚ä¸‹ from bs4 import BeautifulSoup # ç½‘é¡µè§£æï¼Œè·å–æ•°æ® import re # æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿›è¡Œæ–‡å­—åŒ¹é… import urllib.request, urllib.error # æŒ‡å®šurlï¼Œè·å–ç½‘é¡µæ•°æ® from urllib.error import URLError import xlwt # è¿›è¡Œexeclæ“ä½œ import sqlite3 # è¿›è¡Œsqlite æ•°æ®åº“æ“ä½œ from fake_useragent import UserAgent # å¼•å…¥åŠ¨æ€éšæœºUserAgent from urllib.request import build_opener, ProxyHandler # ååçˆ¬ï¼Œä½¿ç”¨ä»£ç†IPï¼Œé˜²æ­¢è¢«æœåŠ¡å™¨å°æ‰ã€‚ def main(): baseurl = \"https://movie.douban.com/top250?start=\" # 1.çˆ¬å–ç½‘é¡µ datalist = getData(baseurl) dbpath = \"movie.db\" # 3.ä¿å­˜æ•°æ® saveData2DB(datalist, dbpath) # askURL(\"https://movie.douban.com/top250?start=0\") # å½±ç‰‡è¯¦æƒ…çš„è§„åˆ™ findLink = re.compile(r'\u003ca href=\"(.*?)\"\u003e') # åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œè¡¨ç¤ºè§„åˆ™ï¼ˆå­—ç¬¦ä¸²çš„æ¨¡å¼ï¼‰ # å½±ç‰‡å›¾ç‰‡ findImgSrc = re.compile(r'\u003cimg.*src=\"(.*?)\"',re.S) # re.S è®©æ¢è¡Œç¬¦åŒ…å«åœ¨å­—ç¬¦ä¸­ # å½±ç‰‡ç‰‡å findTitle = re.compile(r'\u003cspan class=\"title\"\u003e(.*)\u003c/span\u003e') # å½±ç‰‡è¯„åˆ† findRating = re.compile(r'\u003cspan class=\"rating_num\" property=\"v:average\"\u003e(.*)\u003c/span\u003e') # æ‰¾åˆ°è¯„ä»·äººæ•° findJudge = re.compile(r'\u003cspan\u003e(\\d*)äººè¯„ä»·\u003c/span\u003e') # æ‰¾åˆ°æ¦‚å†µ findInq = re.compile(r'\u003cspan class=\"inq\"\u003e(.*)\u003c/span\u003e') # æ‰¾åˆ°å½±ç‰‡çš„ç›¸å…³å†…å®¹ findBd =re.compile(r'\u003cp class=\"\"\u003e(.*?)\u003c/p\u003e',re.S) # çˆ¬å–ç½‘é¡µ def getData(baseurl): datalist = [] for i in range(0,10): # è°ƒç”¨è·å–é¡µé¢ä¿¡æ¯çš„å‡½æ•°,10æ¬¡,æ­£å¥½10é¡µå†…å®¹250æ¡ã€‚ url = baseurl + str(i*25) askURL(url) html = askURL(url) # ä¿å­˜è·å–åˆ°çš„ç½‘é¡µæºç  # 2.é€ä¸€è§£ææ•°æ® soup = BeautifulSoup(html,\"html.parser\") for item in soup.find_all(\"div\",class_=\"item\"): #æŸ¥æ‰¾ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸²å½¢æˆåˆ—è¡¨ã€‚ # print(item) # æµ‹è¯•æŸ¥çœ‹ç”µå½±itemå…¨éƒ¨ä¿¡æ¯ data = [] #ä¿å­˜ä¸€éƒ¨ç”µå½±çš„æ‰€æœ‰ä¿¡æ¯ item = str(item) # å½±ç‰‡è¯¦æƒ…çš„é“¾æ¥ link = re.findall(findLink,item)[0] #reåº“ç”¨æ¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾æŒ‡å®šçš„å­—ç¬¦ä¸² # print(link) data.append(link) # æ·»åŠ é“¾æ¥ imgSrc= re.findall(findImgSrc,item)[0] #æ·»åŠ å›¾ç‰‡ data.append(imgSrc) titles = re.findall(findTitle,item) # ç‰‡åå¯èƒ½åªæœ‰ä¸€ä¸ªä¸­æ–‡åï¼Œæ²¡æœ‰å¤–å›½å if (len(titles) == 2): ctitle = titles[0] # æ·»åŠ ä¸­æ–‡å data.append(ctitle) otitle = titles[1].replace(\"/\",\"\") # å»æ‰æ— å…³çš„ç¬¦å· data.append(otitle) # æ·»åŠ å¤–å›½å else: data.append(titles[0]) data.append(' ') # å¤–å›½åå­—ç•™ç©º rating = re.findall(findRating,item)[0] # æ·»åŠ è¯„åˆ† data.append(rating) judgeNim = re.findall(findJudge,item)[0] data.append(judgeNim) # æ·»åŠ è¯„ä»·äººæ•° inq = re.findall(findInq,item) if len(inq) != 0: inq = inq[0].replace(\"ã€‚\",\"\") # å»æ‰å¥å· data.append(inq) # æ·»åŠ æ¦‚è¿° else: data.append(\" \") # ç•™ç©º bd = re.findall(findBd,item)[0] bd = re.sub('\u003cbr(\\s+)?/\u003e(\\s+)?',\" \",bd) # å»æ‰\u003cbr/\u003e bd = re.sub('/',\" \",bd) # æ›¿æ¢/ data.append(bd.strip()) # å»æ‰å‰åçš„ç©ºæ ¼ datalist.append(data) # æŠŠå¤„ç†å¥½çš„ä¸€éƒ¨åˆ†ç”µå½±ä¿¡æ¯æ”¾å…¥datalist # print(datalist) return datalist # å¾—åˆ°ä¸€ä¸ªæŒ‡å®šçš„URLçš„ç½‘é¡µå†…å®¹ def askURL(url): head = { # æ¨¡æ‹Ÿæµè§ˆå™¨å¤´éƒ¨ä¿¡æ¯ï¼Œå‘è±†ç“£æœåŠ¡å™¨å‘é€æ¶ˆæ¯ \"User-Agent\": UserAgent().random } request = urllib.request.Request(url,headers=head) handler = ProxyHandler({\"http\":\"58.20.184.187:9091\"}) # ä½¿ç”¨ä»£ç†IPè¯·æ±‚èµ„æº opener = build_opener(handler) # ç”¨æˆ·ä»£ç†è¡¨ç¤ºå‘Šè¯‰è±†ç“£æœåŠ¡å™¨ï¼Œæˆ‘ä»¬æ˜¯ä»€ä¹ˆç±»å‹çš„æœºå™¨ã€æµè§ˆå™¨(æœ¬è´¨ä¸Šæ˜¯å‘Šè¯‰æµè§ˆå™¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ”¶ä»€ä¹ˆæ°´å¹³çš„æ–‡ä»¶å†…å®¹) html = \"\" try: resp = opener.open(request) html = resp.read().decode(\"utf-8\") # print(html) except URLError as e: if hasattr(e,\"code\"): print(e.code) if hasattr(e,\"reason\"): print(e.reason) return html # 3.ä¿å­˜æ•°æ® def saveData2DB(datalist,dbpath): init_db(dbpath) conn = sqlite3.connect(dbpath) cur = conn.cursor() for data in datalist: for index in range(len(data)): if index == 4 or index == 5: continue data[index] = '\"'+data[index]+'\"' sql = ''' insert into movie250( info_link,pic_link,cname,ename,score,rated,instroduction,info ) values(%s)'''%\",\".join(data) # print(sql) # æ‰“å°æ’å…¥è¯­å¥ï¼ˆæµ‹è¯•ç”¨ï¼‰ cur.execute(sql) conn.commit() cur.close() conn.close() def init_db(dbpath): sql = ''' create table movie250 ( id integer primary key autoincrement, info_link text, pic_link text, cname varchar , ename varchar , score numeric , rated numeric , instroduction text , info text ) ''' # åˆ›å»ºæ•°æ®è¡¨ conn = sqlite3.connect(dbpath) cursor = conn.cursor() cursor.execute(sql) conn.commit() conn.close() if __name__ == \"__main__\": # å½“ç¨‹åºæ‰§è¡Œæ—¶ã€‚ç¨‹åºå…¥å£ï¼Œæ§åˆ¶å‡½æ•°è°ƒç”¨é¡ºåºã€‚ # è°ƒç”¨å‡½æ•° main() # init_db(\"movietest.db\") # æµ‹è¯•ç”¨ï¼Œç”Ÿæˆæµ‹è¯•åº“ã€‚ print(\"çˆ¬å–å®Œæ¯•ï¼\") ","date":"2022-07-17","objectID":"/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/:1:3","tags":["python"],"title":"è±†ç“£ç”µå½±æ•°æ®åˆ†æ","uri":"/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/"},{"categories":["ç¼–ç¨‹"],"content":"è¯»å†™æ–‡ä»¶ï¼ˆä¸Šï¼‰â€“æ–‡ä»¶ä¸æ–‡ä»¶è·¯å¾„ ä¸»è¦æ˜¯os.path()ç¬¬ä¸‰æ–¹åº“ 1.Windowsç³»ç»Ÿä¸­çš„\\å’ŒLinuxç³»ç»Ÿä¸­çš„/ ä»¥ä¸‹ä»£ç åœ¨Terminalä¸­æ‰§è¡Œæ›´ç›´è§‚ # D:\\\\code2022\\\\auto-work # /code2022/auto-work # è§£å†³ \\ å’Œ / çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨os.path.join() # os.path.join('D:\\\\','code2022','auto-work') 2.è·å–å½“å‰çš„ç›®å½• os.getcwd() # åˆ‡æ¢åˆ°æŒ‡å®šè·¯å¾„ä¸‹ os.chdir('D:\\\\code2022') \u003e\u003e\u003e os.getcwd() 'D:\\\\code2022\\\\auto-work' \u003e\u003e\u003e os.chdir('D:\\\\code2022') \u003e\u003e\u003e os.getcwd() 'D:\\\\code2022' 3.ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ ç»å¯¹è·¯å¾„æ€»æ˜¯ä»æ ¹æ–‡ä»¶å¤¹å¼€å§‹ ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹ç¨‹åºçš„å½“å‰å·¥ä½œç›®å½• test1.py çš„ç»å¯¹è·¯å¾„ # D:\\code2022\\auto-work\\test1.py # D:\\code2022\\auto-work\\test2.py test2.pyç›¸å¯¹äºtest1.pyçš„è·¯å¾„ # '.' å½“å‰æ–‡ä»¶å¤¹ # '..' çˆ¶æ–‡ä»¶å¤¹ # ç›¸å¯¹äºtest1.py çš„è·¯å¾„ ../test2.py # ç›¸å¯¹äºauto-work/test2.py çš„è·¯å¾„ ../../test2.py # è¿”å›ç»å¯¹è·¯å¾„ os.path.abspath('.') # 'D:\\\\code2022\\\\auto-work' os.path.abspath('test1.py') # 'D:\\\\code2022\\\\auto-work\\\\test1.py' # è¿”å›ç›¸å¯¹è·¯å¾„ os.path.relpath(path[, start]) # è¿”å›æœ€åä¸€ä¸ªæ–œæ å‰çš„æ‰€æœ‰å†…å®¹--ç›®å½•å os.path.dirname('D:\\\\code2022\\\\auto-work\\\\test1.py') # 'D:\\\\code2022\\\\auto-work' # è¿”å›æœ€åä¸€ä¸ªæ–œæ åçš„æ‰€æœ‰å†…å®¹--æ–‡ä»¶å os.path.basename('D:\\\\code2022\\\\auto-work\\\\test1.py') # 'test1.py' # ä»¥å…ƒç»„çš„æ–¹å¼åŒæ—¶è¿”å›ç›®å½•åå’Œæ–‡ä»¶å os.path.split('D:\\\\code2022\\\\auto-work\\\\test1.py') # ç»“æœï¼š('D:\\\\code2022\\\\auto-work', 'test1.py') # æŒ‰ç…§æ–œæ è£å‰ª,os.path.sep ä¼šæ ¹æ®ç³»ç»Ÿå–ä¸åŒçš„å€¼ 'D:\\\\code2022\\\\auto-work\\\\test1.py'.split(os.path.sep) # ç»“æœï¼š['D:', 'code2022', 'auto-work', 'test1.py'] 4.åˆ›å»ºæ–°æ–‡ä»¶å¤¹ï¼ˆos.mkdir()ï¼‰ åœ¨auto-workæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºtest3æ–‡ä»¶å¤¹ é‡å¤åˆ›å»ºä¼šæŠ¥é”™ os.mkdir('D:\\\\code2022\\\\auto-work\\\\test3') 5.æŸ¥çœ‹æ–‡ä»¶å¤§å°å’Œæ–‡ä»¶å¤¹å†…å®¹(å•ä½æ˜¯å­—èŠ‚) os.path.getsize('test2.py') # 28 os.listdir('.') # ['test1.py', 'test2.py', 'test3'] è¿™é‡Œæ˜¯os.listdir()è€Œä¸æ˜¯os.path.list() 6.æ£€æŸ¥è·¯å¾„æ˜¯å¦æœ‰æ•ˆ å¦‚æœæä¾›çš„è·¯å¾„ä¸å­˜åœ¨ï¼Œä¼šä½¿ç¨‹åºå´©æºƒï¼Œä»¥ä¸‹å‡½æ•°å¯ä»¥æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨ \u003e\u003e\u003e os.path.exists('test1.py') True \u003e\u003e\u003e os.path.isfile('test1.py') True \u003e\u003e\u003e os.path.isdir('test3') True \u003e\u003e\u003e 7.è¯¾åç»ƒä¹  æŠŠtest3æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æŒ‰ç…§æ–‡ä»¶ç±»å‹æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹ä¸‹ æŠŠxlsxæ–‡ä»¶æ”¾åˆ°test3\\xlsxæ–‡ä»¶å¤¹ä¸‹ æŠŠjpegæ–‡ä»¶æ”¾åˆ°test3\\jpegæ–‡ä»¶å¤¹ä¸‹ æŠŠpptxæ–‡ä»¶æ”¾åˆ°test3\\pptxæ–‡ä»¶å¤¹ä¸‹ æŠŠdocxæ–‡ä»¶æ”¾åˆ°test3\\docæ–‡ä»¶å¤¹ä¸‹ æŠŠtxtæ–‡ä»¶æ”¾åˆ°test3\\txtæ–‡ä»¶å¤¹ä¸‹ shutilæ¨¡å—æ”¯æŒæ–‡ä»¶çš„å¤åˆ¶å’Œåˆ é™¤ windowså’Œlinuxéƒ½èƒ½ä½¿ç”¨ .pyæ–‡ä»¶æ”¾åˆ°æ•´ç†çš„æ–‡ä»¶å¤¹å†…æ‰§è¡Œ import os,shutil def cleanDir(): BaseDir = os.getcwd() xlsxPath = os.path.join(BaseDir,'xlsx') imgPath = os.path.join(BaseDir,'img') pptPath = os.path.join(BaseDir,'ppt') docPath = os.path.join(BaseDir,'doc') txtPath = os.path.join(BaseDir,'txt') # D:\\\\code2022\\\\auto-work\\\\test3\\\\txt if not os.path.exists(xlsxPath): os.mkdir(xlsxPath) if not os.path.exists(imgPath): os.mkdir(imgPath) if not os.path.exists(pptPath): os.mkdir(pptPath) if not os.path.exists(docPath): os.mkdir(docPath) if not os.path.exists(txtPath): os.mkdir(txtPath) for file in os.listdir(BaseDir): baseName = os.path.basename(file) # 9.txt filePath = os.path.join(BaseDir,file) # D:\\\\code2022\\\\auto-work\\\\test3\\\\9.txt if os.path.isfile(filePath): ex = baseName.split('.')[1] # .txt if ex == 'xlsx': shutil.move(filePath,os.path.join(xlsxPath,baseName)) elif ex == 'jpeg': shutil.move(filePath,os.path.join(imgPath,baseName)) elif ex == 'pptx': shutil.move(filePath,os.path.join(pptPath,baseName)) elif ex == 'docx': shutil.move(filePath,os.path.join(docPath,baseName)) elif ex == 'txt': shutil.move(filePath,os.path.join(txtPath,baseName)) # æŠŠD:\\\\code2022\\\\auto-work\\\\test3\\\\9.txt å‰ªåˆ‡åˆ°D:\\\\code2022\\\\auto-work\\\\test3\\\\txt cleanDir() ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/:0:0","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹æ–‡ä»¶è¯»å†™","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/"},{"categories":["ç¼–ç¨‹"],"content":"çº¯æ–‡æœ¬æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„åŒºåˆ« çº¯æ–‡æœ¬æ–‡ä»¶å°±æ˜¯åªåŒ…å«åŸºæœ¬æ–‡æœ¬å­—ç¬¦ï¼Œä¸åŒ…å«å­—ä½“ã€å¤§å°å’Œé¢œè‰²ä¿¡æ¯çš„ï¼Œä¾‹å¦‚txtæ–‡ä»¶ äºŒè¿›åˆ¶æ–‡ä»¶åªæ˜¯é™¤äº†çº¯æ–‡æœ¬æ–‡ä»¶å¤–çš„å…¶ä»–æ–‡ä»¶ï¼Œä¾‹å¦‚pdfï¼Œå›¾åƒ,excelç­‰ã€‚ ç”¨ç¨‹åºè¯»çº¯æ–‡æœ¬æ–‡ä»¶ä¸‰æ­¥éª¤ï¼š open()æ‰“å¼€ï¼Œè¿”å›Fileå¯¹è±¡ è°ƒç”¨Fileå¯¹è±¡çš„read()å’Œwriteå‡½æ•° è°ƒç”¨Fileå¯¹è±¡çš„close()å‡½æ•°ï¼Œå…³é—­è¯¥æ–‡ä»¶ã€‚ æ‰“å¼€æ–‡ä»¶ filePath = r'D:\\code2022\\auto-work\\test3\\txt\\9.txt' f = open(filePath,encoding='utf-8') è¯»å–æ–‡ä»¶å†…å®¹ # read() è¯»å–æ‰€æœ‰ content = f.read() print('txtçš„å†…å®¹:') print(content) f.close() # æŒ‰è¡Œè¯»å– f = open(filePath) rowIndex = 1 for line in f.readlines(): print('txtç¬¬{0}è¡Œå†…å®¹:'.format(rowIndex)) print(line) rowIndex += 1 f.close() # è§„å®šè¯»å–å­—èŠ‚æ•° f = open(filePath) print('ç¬¬ä¸€è¡Œå†…å®¹ï¼š') print(f.readline()) print('è¯»å–5ä¸ªå­—èŠ‚ï¼š') print(f.readline(5)) f.close() å†™å…¥æ–‡ä»¶ å†™æ¨¡å¼å’Œæ·»åŠ æ¨¡å¼ å†™æ¨¡å¼ä¼šè¦†ç›–åŸæ¥çš„å†…å®¹ newFilePath = r'D:\\code2022\\auto-work\\test3\\txt\\9.txt' f = open(newFilePath,'w',encoding='utf-8') f.write(\"ä½ å¥½\\n\") f.close() f = open(newFilePath, 'a',encoding='utf-8') f.write(\"è¿™æ˜¯æˆ‘ç”¨æ·»åŠ æ¨¡å¼å¢åŠ çš„å†…å®¹\\n\") f.close() ç»ƒä¹ ï¼š å°†D:\\code2022\\auto-work\\test3\\txt\\10.txtä¸­çš„æ•°å­—è½¬æ¢æˆä¸­æ–‡æ•°å­—å¹¶ä¸”ä¿å­˜åˆ°æºæ–‡ä»¶ä¸­ æ–‡æœ¬å†…å®¹å¦‚ä¸‹ï¼š æˆ‘è¿˜è®°å¾—æˆ‘åˆä¸­3å¹´éƒ½æ˜¯åœ¨4ç­çš„ï¼Œæˆç»©ä¸€ç›´é©¬é©¬è™è™ï¼Œåœ¨ç­çº§å‰5åã€‚ ç„¶åä¸­è€ƒå°±è¿›å…¥äº†å¿é‡Œçš„é‡ç‚¹é«˜ä¸­ã€‚ é«˜1çš„æ—¶å€™æ˜¯åœ¨8ç­ï¼Œæ¢äº†6ä½åŒæ¡Œï¼Œå…¶ä¸­2ä½æ˜¯å¥³ç”Ÿ åˆ°é«˜2é«˜3ï¼Œåˆæœºç¼˜å·§åˆåˆ†åˆ°4ç­ï¼Œç„¶åå°±ä¸€ç›´åˆ°äº†æ¯•ä¸šã€‚ ä»£ç å®ç°ï¼š def convertNum(): filePath = r'D:\\code2022\\auto-work\\test3\\txt\\10.txt' f = open(filePath,'r',encoding='utf-8') newlines = [] for line in f.readlines(): newline = '' for i in range(len(line)): c = line[i] if c == '0': c = 'é›¶' elif c == '1': c = 'ä¸€' elif c == '2': c = 'äºŒ' elif c == '3': c = 'ä¸‰' elif c == '4': c = 'å››' elif c == '5': c = 'äº”' elif c == '6': c = 'å…­' elif c == '7': c = 'ä¸ƒ' elif c == '8': c = 'å…«' elif c == '9': c = 'ä¹' newline = newline + c newlines.append(newline) f.close() f = open(r'D:\\code2022\\auto-work\\test3\\txt\\11.txt','w',encoding='utf-8') f.writelines(newlines) f.close() convertNum() è§£è¯»ä»£ç ï¼š ç”¨utf-8ç¼–ç æ‰“å¼€æ–‡ä»¶ï¼Œæœ€å¤–å±‚forå¾ªç¯æ‰“å°å‡ºæ¯è¡Œå½¢å¼ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚å†…å±‚forå¾ªç¯ï¼Œå¾ªç¯æ¯ä¸€ä¸ªåˆ—è¡¨ä¸­æ¯ä¸€ä¸ªå­—ï¼Œå¦‚æœç¢°åˆ°ï¼ˆ0-9ï¼‰å°±è½¬æ¢æˆç›¸å¯¹åº”çš„æ±‰å­—ã€‚ä¿å­˜åˆ°newlinesåˆ—è¡¨ä¸­ã€‚å…³é—­æ–‡ä»¶ã€‚åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶11.txtæŠŠå¤„ç†åçš„åˆ—è¡¨å†™å…¥11.txtä¸­ã€‚ ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/:0:1","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹æ–‡ä»¶è¯»å†™","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/"},{"categories":["ç¼–ç¨‹"],"content":"shelveæ¨¡å— windows ä¿å­˜æˆä¸‰ä¸ªæ–°æ–‡ä»¶ .bak .dat .dir mac/Linux ä¿å­˜æˆä¸€ä¸ªæ–°æ–‡ä»¶ .db import shelve shelfFile = shelve.open(r'D:\\code2022\\auto-work\\test3\\txt\\shelve.txt') datas = {'username': 'smith','password':'123456'} shelfFile['userInfo'] = datas shelfFile.close() shelfFile = shelve.open(r'D:\\code2022\\auto-work\\test3\\txt\\shelve.txt') print(list(shelfFile.keys())) print(shelfFile['userInfo']) ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/:0:2","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹æ–‡ä»¶è¯»å†™","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/"},{"categories":["ç¼–ç¨‹"],"content":"è¯»å†™æ–‡ä»¶æ€»ç»“ å­¦ä¹ os.pathçš„ç›¸å…³å†…å®¹ï¼Œç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯¥è·¯å¾„ æ˜¯å¦æ˜¯æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œæ–°å»ºç›®å½•ï¼Œå¾—åˆ°è¯¥ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ç­‰ã€‚ Fileå¯¹è±¡ï¼Œçº¯æ–‡æœ¬æ–‡ä»¶çš„è¯»å–æ–¹å¼ï¼Œopen()æ‰“å¼€ï¼Œread()/write()è¯»å†™ï¼Œclose()å…³é—­ shelveæ¨¡å—å°†æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ã€‚ ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/:0:3","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹æ–‡ä»¶è¯»å†™","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨pythonå®ç°å¤§æ‰¹é‡æ–‡ä»¶ç®€ç¹ä½“è½¬æ¢ éœ€è¦å…ˆå®‰è£…zhconvå’Œpython-docx ToChsæ˜¯ç¹ä½“è½¬æ¢æˆç®€ä½“ï¼ŒToChtæ˜¯ç®€ä½“è½¬æ¢æˆç¹ä½“ ToChsä¼šæŠŠè¯¥æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„docxæ–‡ä»¶å…¨éƒ¨å¤„ç†æˆç®€ä½“ï¼Œä¿å­˜ä¸ºæ–°æ–‡ä»¶ï¼ŒåŒç†å¦‚ToCht. æ— è®ºæ˜¯ç¹ä½“è½¬æ¢æˆç®€ä½“è¿˜æ˜¯ç¹ä½“è½¬æ¢æˆç®€ä½“ï¼Œéƒ½è¦æŠŠç¨‹åºæ”¾åœ¨å’Œæ–‡ä»¶çš„åŒçº§ç›®å½•å†…ã€‚æ”¯æŒè¡¨æ ¼å†…çš„æ–‡å­—è½¬æ¢ åŸæ–‡ç« ï¼šæ–‡ç« .docx è½¬æ¢åçš„æ–‡ç« ï¼šæ–‡ç« ç¹ä½“ç‰ˆ.docx ç®€ä½“ç‰ˆåŒç† ç®€ä½“è½¬ç¹ä½“ # ç®€ä½“è½¬ç¹ä½“ import zhconv from docx import Document import os def convert(text): rule = 'zh-hant' return zhconv.convert(text,rule) def ProcessDocx(docxName): print('æ­£åœ¨å¤„ç†'+docxName) obj = Document(docxName) for p in obj.paragraphs: p.text = convert(p.text) for t in obj.tables: for r in t.rows: for c in r.cells: c.text = convert(c.text) # æ–‡ç« .docx # æ–‡ç« ç¹ä½“ç‰ˆ.docx fileName = docxName.split('.') newDocxName = fileName[0] + \"ç¹ä½“ç‰ˆ\" + '.' + fileName[1] obj.save(newDocxName) print(docxName+'å·²ç»å¤„ç†å®Œæ¯•') if __name__ == '__main__': for file in os.listdir('.'): if file.split('.')[1] == 'docx': ProcessDocx(file) ç¹ä½“è½¬ç®€ä½“ # ç¹ä½“è½¬æ¢æˆç®€ä½“ import zhconv from docx import Document import os def convert(text): rule = 'zh-hans' return zhconv.convert(text,rule) def ProcessDocx(docxName): print('æ­£åœ¨å¤„ç†'+docxName) obj = Document(docxName) for p in obj.paragraphs: p.text = convert(p.text) for t in obj.tables: for r in t.rows: for c in r.cells: c.text = convert(c.text) # æ–‡ç« .docx # æ–‡ç« ç®€ä½“ç‰ˆ.docx fileName = docxName.split('.') newDocxName = fileName[0] + \"ç®€ä½“ç‰ˆ\" + '.' + fileName[1] obj.save(newDocxName) print(docxName+'å·²ç»å¤„ç†å®Œæ¯•') if __name__ == '__main__': for file in os.listdir('.'): if file.split('.')[1] == 'docx': ProcessDocx(file) ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/:0:4","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹æ–‡ä»¶è¯»å†™","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/"},{"categories":["ç¼–ç¨‹"],"content":"å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—openpyxl pip3 install openpyxl å…³äºopenpyxlæ¨¡å—çš„å‚è€ƒæ–‡æ¡£ . ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:1","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨pythonæ“ä½œexcelè¡¨æ ¼ï¼Œä»£ç å¦‚ä¸‹ï¼š # å¼•å…¥æ¨¡å— import openpyxl import datetime # åˆ›å»ºå·¥ä½œç°¿å¹¶åˆ›å»ºä¸€ä¸ªå·¥ä½œè¡¨ wb = openpyxl.Workbook() ws = wb.active # å¯ä»¥è‡ªå®šä¹‰å·¥ä½œè¡¨åå­—ï¼Œé»˜è®¤Sheet ws.title = 'å·¥ä½œè¡¨1' # A1 å•å…ƒæ ¼å†™å…¥ 520 ws['A1'] = 520 # A2 å•å…ƒæ ¼å†™å…¥ä¸€ä¸ªåˆ—è¡¨ ws.append([1,2,3]) # A3 å•å…ƒæ ¼å†™å…¥å½“å‰æ—¶é—´ ws['A3'] = datetime.datetime.now() # ä¿å­˜ä¸º demo.xlsx wb.save('demo.xlsx') ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:2","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"æ‰“å¼€excelè¡¨æ ¼ import openpyxl wb = openpyxl.load_workbook(r'D:\\code2022\\auto-work\\demo.xlsx') print(type(wb)) # \u003cclass 'openpyxl.workbook.workbook.Workbook'\u003e ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:3","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"æŸ¥çœ‹å·¥ä½œè¡¨ print(wb.sheetnames) # ['Sheet'] ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:4","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ›å»ºæ–°çš„å·¥ä½œè¡¨å¹¶æ‰“å°å½“å‰æ‰€æœ‰å·¥ä½œè¡¨ nws = wb.create_chartsheet(title = 'demo', index = 0) print(wb.sheetnames) # ['demo', 'Sheet'] ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:5","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ é™¤ä¸€ä¸ªå·¥ä½œè¡¨ # å…ˆæŸ¥çœ‹æ‰€æœ‰å·¥ä½œè¡¨ print(wb.sheetnames) # ['demo', 'Sheet'] # åˆ é™¤ demo å·¥ä½œè¡¨ rem = wb.remove(wb['demo']) print(wb.sheetnames) # ['Sheet'] ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:6","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"å®šä½å•å…ƒæ ¼ ws = wb.active c = ws['A1'] # æ‰“å°è¡Œ print(c.row) # 1 # æ‰“å°åˆ— print(c.column) # 1 # æ‰“å°å½“å‰åæ ‡ print(c.coordinate) # A1 # è¾“å‡º A1 å•å…ƒæ ¼å€¼ print(ws['A1'].value) # 520 # è¾“å‡º A1 å•å…ƒæ ¼çš„å€¼ print(c.value) # 520 # å½“å‰ä½ç½®ï¼ˆA1ï¼‰å‘ä¸‹ç§»åŠ¨ä¸¤ä¸ªå•å…ƒæ ¼ï¼Œåˆ—ä¸å˜ã€‚ d = c.offset(2,0) # è¾“å‡ºå½“å‰åæ ‡ print(d.coordinate) # A3 # è¾“å‡ºå½“å‰åæ ‡æ‰€å¯¹åº”çš„å€¼ print(d.value) ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:7","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"è®¿é—®å¤šä¸ªå·¥ä½œè¡¨ # ä»ï¼ˆ1ï¼Œ1ï¼‰ åˆ°ï¼ˆ4ï¼Œ2ï¼‰èŒƒå›´å†…æ‰€æœ‰çš„ç¬¬ä¸€åˆ—çš„å†…å®¹ for each_row in ws.iter_rows(min_row=1, min_col=1, max_row=4, max_col=2): print(each_row[0].value) # è¾“å‡ºä»A1 åˆ° C4 èŒƒå›´å†…çš„å†…å®¹ for each_item in ws['A1':'C4']: for each_cell in each_item: print(each_cell.value, end = ' ') print('\\n') ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:8","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"æ‹·è´å·¥ä½œè¡¨ ws = wb.active new = wb.copy_worksheet(ws) wb.save(r'D:\\code2022\\auto-work\\demo.xlsx') ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:9","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸ªæ€§åŒ–å·¥ä½œè¡¨ æ›´æ”¹é»˜è®¤å·¥ä½œè¡¨é¢œè‰² import openpyxl wb = openpyxl.Workbook() ws1 = wb.create_sheet(title= '001') ws2 = wb.create_sheet(title= '003') ws3 = wb.create_sheet(title= '005') ws4 = wb.create_sheet(title= '007') ws1.sheet_properties.tabColor = \"FF0000\" ws2.sheet_properties.tabColor = \"00FF00\" ws3.sheet_properties.tabColor = \"0000FF\" ws4.sheet_properties.tabColor = \"880088\" wb.save(r\"D:\\code2022\\auto-work\\å·¥ä½œè¡¨å˜é¢œè‰².xlsx\") ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:10","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"è°ƒæ•´è¡Œé«˜å’Œåˆ—å®½ ws1.row_dimensions[2].height = 100 ws1.column_dimensions['C'].width = 50 wb.save(r'D:\\code2022\\auto-work\\å·¥ä½œè¡¨å˜é¢œè‰².xlsx') ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:11","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"åˆå¹¶å’Œæ‹†åˆ†å•å…ƒæ ¼ # åˆå¹¶ä» A1 åˆ° D2 èŒƒå›´å†…çš„æ‰€æœ‰å•å…ƒæ ¼ ws2.merge_cells('A1:D2') wb.save(r'D:\\code2022\\auto-work\\å·¥ä½œè¡¨å˜é¢œè‰².xlsx') # æ‹†åˆ†å•å…ƒæ ¼,è¦å’Œåˆå¹¶çš„å•å…ƒæ ¼èŒƒå›´ä¸€è‡´ ws2.unmerge_cells = None wb.save(r'D:\\code2022\\auto-work\\å·¥ä½œè¡¨å˜é¢œè‰².xlsx') ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:12","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"å†»ç»“çª—å£ æŒ‡çš„æ˜¯æ— è®ºæ¨ªå‘è¿˜æ˜¯çºµå‘æ»šåŠ¨å•å…ƒæ ¼ï¼Œæœ€å·¦ä¾§å’Œæœ€ä¸Šä¾§å•å…ƒæ ¼ä¸ä¼šè·Ÿéšæ»šåŠ¨è€Œå˜åŒ–ã€‚ # å†»ç»“çª—å£ import openpyxl wb = openpyxl.load_wordbook(r'D:\\code2022\\auto-work\\demo.xlsx') ws = wb.active ws.freeze_panes = 'B8' wb.save(r'D:\\code2022\\auto-work\\demo.xlsx') # è§£å†»çª—å£ ws.freeze_panes = None wb.save(r'D:\\code2022\\auto-work\\demo.xlsx') ","date":"2022-07-11","objectID":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/:0:13","tags":["python"],"title":"pythonè‡ªåŠ¨åŒ–åŠå…¬ä¹‹excel","uri":"/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/"},{"categories":["ç¼–ç¨‹"],"content":"å®‰è£…åŠæŸ¥çœ‹ç‰ˆæœ¬ pip3 install Django==4.0.6 # è¿›å…¥python python import django print(django.get_version()) windowså®‰è£…è·¯å¾„ C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python39\\Lib\\site-packages\\django ","date":"2022-07-09","objectID":"/django/:0:1","tags":["Django"],"title":"Django","uri":"/django/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ›å»ºç¬¬ä¸€ä¸ªdjango é¡¹ç›® # æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ E:\\code2022\\django\\demo # è¿›å…¥æ–‡ä»¶å¤¹ cd E:\\code2022\\django\\demo # åˆ›å»ºé¡¹ç›® mysite æ˜¯é¡¹ç›®åç§° django-admin.exe startproject mysite # è¿›å…¥åˆ°mysite ç„¶åå¯åŠ¨é¡¹ç›® cd mysite python manage.py runserver \"\"\" July 08, 2022 - 15:34:30 Django version 4.0.6, using settings 'mysite.settings' Starting development server at http://127.0.0.1:8000/ \"\"\" # è®¿é—®ï¼šhttp://127.0.0.1:8000/ å‡ºç°ç½‘é¡µï¼Œé¡¹ç›®å¯åŠ¨æˆåŠŸã€‚ æ³¨æ„ï¼šå¯åŠ¨é¡¹ç›®å¯ä»¥æŒ‡å®šç«¯å£ï¼Œä¸æŒ‡å®šé»˜è®¤æ˜¯8000 python manage.py runserver 8002 åˆ›å»ºç½‘é¡µæ–‡ä»¶views.py åœ¨mysiteæ–‡ä»¶å¤¹å†…éƒ¨åˆ›å»º from django.http import HttpResponse def hello(requets): return HttpResponse(\"Hello world! \") ä¿®æ”¹urlè·¯å¾„ ç¼–è¾‘urls.py from django.urls import path from . import views urlpatterns = [ path('hello/', views.hello), ] æµ‹è¯•è®¿é—®ï¼š http://127.0.0.1:8000/hello/ è®¿é—®è¿‡ç¨‹ï¼š æµè§ˆå™¨è®¿é—®ï¼šhttp://127.0.0.1:8000/hello/ -\u003e å…ˆåˆ°urls.pyä¸­helloè·¯å¾„å¯¹åº”çš„é¡µé¢ views.hello-\u003e ç„¶åæ‰§è¡Œviews.pyä¸­å®šä¹‰çš„helloå‡½æ•°-\u003eæœ€åæŠŠç»“æœè¿”å›ç»™æµè§ˆå™¨ã€‚ åˆ›å»ºç¬¬äºŒä¸ªé¡¹ç›®mysite2 # è·¯å¾„ E:\\code2022\\django\\demo django-admin.exe startproject mysite2 åˆ›å»ºå’Œmysite2åŒçº§çš„æ–‡ä»¶å¤¹templateså¹¶åœ¨å…¶å†…éƒ¨åˆ›å»ºmytemp.html # è·¯å¾„ E:\\code2022\\django\\demo\\mysite2 æ³¨æ„è¦å’Œmysite2 å†…éƒ¨çš„mysite2åŒçº§ã€‚ # mytemp.html å†…å®¹å¦‚ä¸‹ \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003eTitle\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1\u003e{{ hello }}\u003c/h1\u003e \u003c/body\u003e \u003c/html\u003e ä¿®æ”¹E:\\code2022\\django\\demo\\mysite2\\mysite2\\settings.pyæ–‡ä»¶å†…å®¹ æ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„templatesæ–‡ä»¶å¤¹è·¯å¾„ï¼Œä¿®æ”¹ä¸‹ TEMPLATES = [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [os.path.join(BASE_DIR,'templates')], åœ¨ç¬¬ä¸€è¡Œå¼•å…¥osæ¨¡å— import os è§£é‡Šos.path.john(BASE_DIR,'templates') å¼•å…¥osæ¨¡å—ï¼Œå°†BASE_DIR(é¡¹ç›®ç»å¯¹è·¯å¾„)å’Œtemplatesåšè·¯å¾„æ‹¼æ¥ã€‚æ‹¼æ¥åçš„ç»“æœæ˜¯ï¼šE:\\code2022\\django\\demo\\mysite2\\templates åœ¨E:\\code2022\\django\\demo\\mysite2\\mysite2ä¸­åˆ›å»ºviews.pyæ–‡ä»¶ from django.shortcuts import render def mytemp(request): context = {} context['hello'] = 'Hello World!' return render(request, 'mytemp.html', context) ä¿®æ”¹urlï¼ˆE:\\code2022\\django\\demo\\mysite2\\mysite2\\urls.pyï¼‰ from django.urls import path from . import views urlpatterns = [ path('mytemp/', views.mytemp), ] è¿›å…¥é¡¹ç›®æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œåœ¨cmdä¸­å¯åŠ¨é¡¹ç›®æŒ‡å®šç«¯å£8002 python manage.py runserver 8002 æµ‹è¯•è®¿é—® http://127.0.0.1:8002/mytemp/ è®¿é—®è¿‡ç¨‹ 127.0.0.1:8002/mytemp -\u003eurls.pyä¸­å¯»æ‰¾/mytemp å®ƒçš„æ˜ å°„ä¸ºï¼š views.mytemp -\u003e mytempå‡½æ•°åœ¨views.pyä¸­å®šä¹‰ -\u003emytempå‡½æ•°è¿˜å®šä¹‰äº†contextç©ºå­—å…¸ï¼Œä¼ å…¥é”®ï¼ˆhelloï¼‰å’Œå€¼(Hello World!) ã€‚é”®å°†åœ¨ä¸»é¡µï¼ˆmytemp.htmlï¼‰ä¸­è°ƒç”¨ã€‚ -\u003e h1æ ‡ç­¾ä¸­è°ƒç”¨é”®ï¼ˆhelloï¼‰ ","date":"2022-07-09","objectID":"/django/:0:2","tags":["Django"],"title":"Django","uri":"/django/"},{"categories":["ç¼–ç¨‹"],"content":"djangoæ¨¡æ¿æ ‡ç­¾ é“¾æ¥ ","date":"2022-07-09","objectID":"/django/:0:3","tags":["Django"],"title":"Django","uri":"/django/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ—è¡¨ templates ä¸­çš„ mytemp.html ä¸­ï¼Œå¯ä»¥ç”¨ . ç´¢å¼•ä¸‹æ ‡å–å‡ºå¯¹åº”çš„å…ƒç´ ã€‚ D:\\code2022\\Django\\demo\\mysite2\\mysite2\\urls.pyä¸­ä¿®æ”¹è·¯å¾„ from django.urls import path from . import views urlpatterns = [ path('mytemp/', views.mydef), ] æ–°å»ºD:\\code2022\\Django\\demo\\mysite2\\mysite2\\views.pyæ–‡ä»¶ï¼Œå®šä¹‰mydefå‡½æ•° from django.shortcuts import render def mydef(request): views_list = [\"ç®€å•ç¤ºä¾‹demo1\",\"ç®€å•ç¤ºä¾‹demo2\",\"ç®€å•ç¤ºä¾‹demo3\"] return render(request, 'mytemp.html', {\"views_list\": views_list}) åˆ›å»ºæ¨¡æ¿æ–‡ä»¶å¤¹å’Œä¸»é¡µæ–‡ä»¶ D:\\code2022\\Django\\demo\\mysite2\\templateså’ŒD:\\code2022\\Django\\demo\\mysite2\\templates\\mytemp.html Tip:å¯ä»¥ç”¨!+Tabé”®å¿«é€Ÿåˆ›å»ºhtmlä»£ç ï¼Œç„¶åå†æ·»åŠ å†…å®¹ã€‚s # mytemp.html \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003cmeta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"\u003e \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e \u003ctitle\u003eDocument\u003c/title\u003e \u003cp\u003e{{ views_list }}\u003c/p\u003e # å–å‡ºæ•´ä¸ªåˆ—è¡¨ \u003cp\u003e{{ views_list.0 }}\u003c/p\u003e # å–å‡ºåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´  \u003c/head\u003e \u003cbody\u003e \u003c/body\u003e \u003c/html\u003e è®¾ç½®ä¸»é¡µæ–‡ä»¶(mytemp.html)è·¯å¾„ D:\\code2022\\Django\\demo\\mysite2\\mysite2\\settings.py æ‰¾åˆ°å…³äºtemplatesæ–‡ä»¶å¤¹çš„é…ç½® import os TEMPLATES = [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [os.path.join(BASE_DIR,'templates')], å¯åŠ¨é¡¹ç›® python .\\manage.py runserver 8003 è®¿é—®127.0.0.1:8003/mytempæµ‹è¯•ã€‚ ","date":"2022-07-09","objectID":"/django/:0:4","tags":["Django"],"title":"Django","uri":"/django/"},{"categories":["ç¼–ç¨‹"],"content":"å­—å…¸ D:\\code2022\\Django\\demo\\mysite3\\mysite3\\urls.py from django.urls import path from . import views urlpatterns = [ path('mytemp/', views.mydef), ] D:\\code2022\\Django\\demo\\mysite3\\mysite3\\views.py from django.shortcuts import render def mydef(request): views_dict = {'name':'ç®€å•demoæ¼”ç¤º'} return render(request,'mytemp.html', {'views_dict': views_dict}) D:\\code2022\\Django\\demo\\mysite3\\templates\\mytemp.html \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003cmeta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"\u003e \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e \u003ctitle\u003eDocument\u003c/title\u003e \u003cp\u003e{{ views_dict }}\u003c/p\u003e \u003cp\u003e{{ views_dict.name }}\u003c/p\u003e \u003c/head\u003e \u003cbody\u003e \u003c/body\u003e \u003c/html\u003e D:\\code2022\\Django\\demo\\mysite3\\mysite3\\settings.py import os TEMPLATES = [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [os.path.join(BASE_DIR,'templates')], å¯åŠ¨é¡¹ç›®å¹¶æµ‹è¯• python .\\manage.py runserver 8004 http://127.0.0.1:8004/mytemp ","date":"2022-07-09","objectID":"/django/:0:5","tags":["Django"],"title":"Django","uri":"/django/"},{"categories":["ç¼–ç¨‹"],"content":"å¯è¿­ä»£å¯¹è±¡ï¼ˆIterableï¼‰ pythonä¸­ä»»æ„å¯¹è±¡ï¼Œåªè¦å®ƒå®šä¹‰äº†å¯ä»¥è¿”å›ä¸€ä¸ªè¿­ä»£å™¨çš„__iter__æ–¹æ³•ï¼Œæˆ–è€…å®šä¹‰äº†å¯ä»¥æ”¯æŒä¸‹æ ‡ç´¢å¼•çš„__getitem__æ–¹æ³•ï¼Œé‚£ä¹ˆä»–å°±æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚å¯è¿­ä»£å¯¹è±¡å°±æ˜¯èƒ½å¤Ÿæä¾›è¿­ä»£å™¨çš„ä»»æ„å¯¹è±¡ã€‚ str1 = \"hello\" print(str1.__iter__()) # \u003cstr_iterator object at 0x0000022BDAF5A040\u003e ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:1:0","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"è¿­ä»£å™¨(Iterator) ä»»æ„å¯¹è±¡ï¼Œåªè¦å®šä¹‰äº†nextï¼ˆpython2ï¼‰æˆ–è€…__next__æ–¹æ³•ä»–å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚ ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:2:0","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"è¿­ä»£(Iteration) ä»æŸä¸ªåœ°æ–¹ï¼ˆæ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨ï¼‰å–å‡ºä¸€ä¸ªå…ƒç´ çš„è¿‡ç¨‹ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¾ªç¯æ¥éå†æŸä¸ªä¸œè¥¿æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ¬èº«å«è¿­ä»£ã€‚ ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:3:0","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ç”Ÿæˆå™¨(Generators) ç”Ÿæˆå™¨ä¹Ÿæ˜¯ä¸€ç§è¿­ä»£å™¨ï¼Œä½†æ˜¯ä½ åªèƒ½å¯¹å…¶è¿­ä»£ä¸€æ¬¡ã€‚è¿™æ˜¯å› ä¸ºä»–ä»¬å¹¶æ²¡æœ‰æŠŠæ‰€æœ‰çš„å€¼éƒ½å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶ç”Ÿæˆå€¼ã€‚å¤§å¤šæ•°æ—¶å€™ç”Ÿæˆå™¨æ˜¯ä»¥å‡½æ•°æ˜¯å®ç°çš„ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¹¶ä¸è¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯yield(æš‚ä¸”è¯‘ä½œâ€œç”Ÿå‡ºâ€)ä¸€ä¸ªå€¼ã€‚ Pythonå†…ç½®å‡½æ•°ï¼šnext()ã€‚å®ƒå…è®¸æˆ‘ä»¬è·å–ä¸€ä¸ªåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ def generator_function(): for i in range(3): yield i gen = generator_function() print(next(gen)) # Output: 0 print(next(gen)) # Output: 1 print(next(gen)) # Output: 2 print(next(gen)) # Output: Traceback (most recent call last): # File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e # StopIteration åœ¨yieldæ‰æ‰€æœ‰çš„å€¼åï¼Œnext()è§¦å‘äº†ä¸€ä¸ªStopIterationçš„å¼‚å¸¸ã€‚åŸºæœ¬ä¸Šè¿™ä¸ªå¼‚å¸¸å‘Šè¯‰æˆ‘ä»¬ï¼Œæ‰€æœ‰çš„å€¼éƒ½å·²ç»è¢«yieldå®Œäº†ã€‚ ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ä½¿ç”¨forå¾ªç¯æ—¶æ²¡æœ‰è¿™ä¸ªå¼‚å¸¸å‘¢?forå¾ªç¯ä¼šè‡ªåŠ¨æ•æ‰åˆ°è¿™ä¸ªå¼‚å¸¸å¹¶åœæ­¢è°ƒç”¨next()ã€‚ Pythonä¸­ä¸€äº›å†…ç½®æ•°æ®ç±»å‹ä¹Ÿæ”¯æŒè¿­ä»£ã€‚ my_string = \"Yasoob\" next(my_string) # Output: Traceback (most recent call last): # File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e # TypeError: str object is not an iterator è¿™ä¸ªå¼‚å¸¸è¯´é‚£ä¸ªstrå¯¹è±¡ä¸æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚è¿™æ„å‘³ç€å®ƒæ”¯æŒè¿­ä»£ï¼Œä½†æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹å…¶è¿›è¡Œè¿­ä»£æ“ä½œã€‚æ€æ ·æ‰èƒ½å¯¹å®ƒå®æ–½è¿­ä»£å‘¢ï¼Ÿ å†…ç½®å‡½æ•°ï¼Œiterã€‚å®ƒå°†æ ¹æ®ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚ my_string = \"Yasoob\" my_iter = iter(my_string) print(next(my_iter)) # Output: 'Y' print(type(my_iter)) # \u003cclass 'str_iterator'\u003e ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:4:0","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"è£…é¥°å™¨ è£…é¥°å™¨(Decorators)æ˜¯Pythonçš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ã€‚ç®€å•åœ°è¯´ï¼šä»–ä»¬æ˜¯ä¿®æ”¹å…¶ä»–å‡½æ•°çš„åŠŸèƒ½çš„å‡½æ•°ã€‚ ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:5:0","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"åµŒå¥—å‡½æ•°è§£æ ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:6:0","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"ä»å‡½æ•°ä¸­è¿”å›å‡½æ•° def hi(name=\"yasoob\"): def greet(): return \"now you are in the greet() function\" def welcome(): return \"now you are in the welcome() function\" if name == \"yasoob\": return greet else: return welcome a = hi() print(a) #outputs: \u003cfunction greet at 0x7f2143c01500\u003e #ä¸Šé¢æ¸…æ™°åœ°å±•ç¤ºäº†`a`ç°åœ¨æŒ‡å‘åˆ°hi()å‡½æ•°ä¸­çš„greet()å‡½æ•° #ç°åœ¨è¯•è¯•è¿™ä¸ª print(a()) #outputs: now you are in the greet() function è§£æï¼š è°ƒç”¨hiå‡½æ•°ä¸­åˆ›å»ºçš„greetå‡½æ•°å’Œwelcomeå‡½æ•°ï¼Œä½œä¸ºç»“æœè¾“å‡ºå‡ºæ¥ã€‚ é—®é¢˜ï¼š åœ¨if/elseè¯­å¥ä¸­æˆ‘ä»¬è¿”å›greetå’Œwelcomeï¼Œè€Œä¸æ˜¯greet()å’Œwelcome()ã€‚ä¸ºä»€ä¹ˆé‚£æ ·ï¼Ÿè¿™æ˜¯å› ä¸ºå½“ä½ æŠŠä¸€å¯¹å°æ‹¬å·æ”¾åœ¨åé¢ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šæ‰§è¡Œï¼›ç„¶è€Œå¦‚æœä½ ä¸æ”¾æ‹¬å·åœ¨å®ƒåé¢ï¼Œé‚£å®ƒå¯ä»¥è¢«åˆ°å¤„ä¼ é€’ï¼Œå¹¶ä¸”å¯ä»¥èµ‹å€¼ç»™åˆ«çš„å˜é‡è€Œä¸å»æ‰§è¡Œå®ƒã€‚ å½“æˆ‘ä»¬å†™ä¸‹a = hi()ï¼Œhi()ä¼šè¢«æ‰§è¡Œï¼Œè€Œç”±äºnameå‚æ•°é»˜è®¤æ˜¯yasoobï¼Œæ‰€ä»¥å‡½æ•°greetè¢«è¿”å›äº†ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¯­å¥æ”¹ä¸ºa = hi(name = \"ali\")ï¼Œé‚£ä¹ˆwelcomeå‡½æ•°å°†è¢«è¿”å›ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æ‰“å°å‡ºhi()()ï¼Œè¿™ä¼šè¾“å‡ºnow you are in the greet() functionã€‚ ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:6:1","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‚æ•° def hi(): return \"come from hi()\" def hello(func): print(\"I am doing some boring work before executing hi()\") print(func()) hello(hi) \"\"\" I am doing some boring work before executing hi() come from hi() \"\"\" ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:6:2","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ–‡ä»¶æ ¼å¼åˆ¤æ–­ å¸¸è§çš„æ–‡ä»¶å¤´å­—èŠ‚ç ä¿¡æ¯ http://doc.chacuo.net/filehead import io with open('blue.jpg', 'rb') as f: jpgdata = f.read() if jpgdata.startswith(b'\\xff\\xd8'): text = u'This is a jpg file(%d bytes long)\\n' else: text = u'This is not a jpg file(%d bytes long)\\n' with io.open('summary.txt','w',encoding='utf-8') as outf: outf.write(text % len(jpgdata)) åˆ¤æ–­blue.jpgæ–‡ä»¶æ˜¯ä¸æ˜¯jpgæ ¼å¼çš„æ–‡ä»¶ã€‚å°†åˆ¤æ–­ç»“æœä¿å­˜åˆ°summary.txt. æç¤ºï¼š.jpgæ ¼å¼çš„æ–‡ä»¶å¤´å­—èŠ‚ç ä¸ºff d8ï¼Œæ³¨æ„è¯»å–blue.jpgæ–‡ä»¶æ—¶ï¼Œè¦ä»¥å­—èŠ‚æ–¹å¼è¯»å–ã€‚ uä»¥unicodeå½¢å¼å­˜å‚¨å­—ç¬¦ä¸²ã€‚ ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:6:3","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"socket æ¨¡å— ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:7:0","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"udpå¥—æ¥å­— åº”ç”¨å±‚çš„ä¸€ç§ç¼–ç¨‹æ–¹æ³• åˆ›å»ºå¥—æ¥å­—ï¼šsocket() ç»‘å®šIPç«¯å£: bind() å‘é€æ¶ˆæ¯ï¼š sendto() æ¥å—æ¶ˆæ¯ï¼š recvfrom() å…³é—­å¥—æ¥å­—ï¼š close() udp æœåŠ¡ç«¯ä»£ç ï¼š # æ¨¡å—å¯¼å…¥ from socket import * # å£°æ˜æœåŠ¡å™¨IP, ç«¯å£ ADDR = ('0.0.0.0',8888) # åˆ›å»ºudpå¥—æ¥å­— SOCK_DGRAM è¡¨ç¤ºé€‰æ‹©çš„æ—¶UDPå¥—æ¥å­— udp_socket = socket(AF_INET, SOCK_DGRAM) # è°ƒç”¨bind ç»‘å®šåœ°å€ç«¯å£ udp_socket.bind(ADDR) # å¾ªç¯æ¥å—æ¶ˆæ¯ while True: # æ¥æ”¶æ¶ˆæ¯ 1024 ä¸€æ¬¡èƒ½æ¥æ”¶çš„æœ€å¤§å­—èŠ‚æ•° msg, addr = udp_socket.recvfrom(1024) # æ‰“å°æ¶ˆæ¯è·Ÿåœ°å€ decode() è§£ç  print('Recv:', addr,msg.decode()) # å›åº”æ¶ˆæ¯ udp_socket.sendto('æ”¶åˆ°ï¼'.encode(),addr) # çº¦å®šæ–­å¼€é€šä¿¡çš„ if msg == b'bye': break # å…³é—­å¥—æ¥å­— udp_socket.close() udpå®¢æˆ·ç«¯ä»£ç ï¼š # æ¨¡å—å¯¼å…¥ from socket import * # ç¡®å®šæœåŠ¡å™¨çš„åœ°å€ 127.0.0.1 è·Ÿlocalhost é»˜è®¤æ—¶æœ¬æœºIP ADDR = ('127.0.0.1',8888) # åˆ›å»ºå¥—æ¥å­— udp_socket = socket(AF_INET, SOCK_DGRAM) # æ¥å—æ¶ˆæ¯ while True: msg = input('\u003e\u003e:') # å‘é€ç»™æœåŠ¡å™¨ udp_socket.sendto(msg.encode(),ADDR) # æ¥å—æœåŠ¡å™¨æ¶ˆæ¯ data, addr = udp_socket.recvfrom(1024) print('æ¥è‡ªæœåŠ¡å™¨çš„æ¶ˆæ¯:',data.decode()) # ç»ˆæ­¢å®¢æˆ·ç«¯å¾ªç¯ if msg == b'bye': break udp_socket.close() ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:7:1","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"TCPç¼–ç¨‹æµç¨‹ åˆ›å»ºå¥—æ¥å­—ï¼šsocket ç»‘å®šåœ°å€ï¼šbind è®¾ç½®ç›‘å¬ï¼šlisten ç­‰å¾…å¤„ç†è¿æ¥ï¼šaccept å‘é€/æ¥æ”¶æ¶ˆæ¯ï¼šsend/recv å…³é—­è¿æ¥ï¼šclose ç²˜åŒ…é—®é¢˜ äº§ç”ŸåŸå›  ä¸ºäº†è§£å†³æ•°æ®ä¼ è¾“ä¸­çš„é€Ÿç‡ä¸åè°ƒé—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿè®¾ç½®äº†ç¼“å†²åŒº å®é™…ç½‘è·¯å·¥ä½œè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå¯¼è‡´æ¶ˆæ¯æ”¶å‘ä¸ä¸€è‡´ tcpä»¥å­—èŠ‚æµæ–¹å¼è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œåœ¨æ¥æ”¶çš„æ—¶å€™ä¸åŒºåˆ†æ¶ˆæ¯è¾¹ç•Œ å¸¦æ¥é—®é¢˜ å¦‚æœå‘é€çš„æ¶ˆæ¯æ¯æ¬¡éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œéœ€è¦æ¥æ”¶ç«¯å»ç‹¬ç«‹è§£ææ¶ˆæ¯æ—¶å›å¸¦æ¥æ¶ˆæ¯è¯¯è§£é—®é¢˜ è§£å†³æ–¹å¼ äººå·¥è®¾ç½®æ¶ˆæ¯è¾¹ç•Œ å‡ç¼“æ¶ˆæ¯å‘é€é€Ÿåº¦ tcpæœåŠ¡ç«¯ä»£ç  import socket phone = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #tcpåè®® # phone.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1) phone.bind(('127.0.0.1', 9000)) #0-65535 phone.listen(5) print('staring....') while True: #é“¾æ¥å¾ªç¯ conn, client_addr=phone.accept() #(conn,client_addr) print(client_addr) while True: #é€šä¿¡å¾ªç¯ try: data = conn.recv(1024) #1024bytes? if not data:break #é’ˆå¯¹çš„æ˜¯Linuxç³»ç»Ÿï¼Œå› ä¸ºlinuxä¸ä¼šæŠ›å¼‚å¸¸ã€‚windowsä¼šæŠ›å¼‚å¸¸ã€‚ print('å®¢æˆ·ç«¯ä¿¡æ¯', data) conn.send(data.upper()) except ConnectionResetError: break conn.close() phone.close() tcpå®¢æˆ·ç«¯ä»£ç  import socket phone=socket.socket(socket.AF_INET, socket.SOCK_STREAM) phone.connect(('127.0.0.1', 9000)) while True: #é€šä¿¡å¾ªç¯ msg=input('\u003e\u003e: ').strip() if not msg: continue #é˜²æ­¢å‘é€ç©ºä¿¡æ¯ phone.send(msg.encode('utf-8')) data = phone.recv(1024) print(data) phone.close() vscode å…ˆè¿è¡ŒæœåŠ¡ç«¯ï¼Œå†è¿è¡Œå®¢æˆ·ç«¯ã€‚æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åˆ†ä¸¤ä¸ªç›®å½•ï¼Œè¿™æ ·å¯ä»¥åŒæ—¶è¿è¡Œã€‚ ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:7:2","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ–‡ä»¶ä¼ è¾“ æ–‡ä»¶ä¼ è¾“æœåŠ¡ç«¯ 1.å»ºç«‹TCPå¥—æ¥å­— 2.ç­‰å¾…å®¢æˆ·ç«¯å†…çš„è¿æ¥ 3.æ¥æ”¶å›¾ç‰‡å†…å®¹ 4.ä¿å­˜å›¾ç‰‡ 5.ç»ˆæ­¢è¿æ¥ # å¯¼å…¥æ¨¡å— from socket import * import time # åˆ›å»ºå¥—æ¥å­— socket = socket() # ç»‘å®šIP socket.bind(('0.0.0.0',8888)) # è®¾ç½®ç›‘å¬ socket.listen(5) # åˆ›å»ºconnfd connfd, addr = socket.accept() # æ¥æ”¶å®¢æˆ·ç«¯æ•°æ® data = connfd.recv(1024*1024) file_name = '%d-%d-%d.jpg'%time.localtime()[:3] f = open(file_name, 'wb') f.write(data) f.close() # å…³é—­è¿æ¥ connfd.close() socket.close() ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:7:3","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"æ–‡ä»¶ä¼ è¾“å®¢æˆ·ç«¯ \"\"\" 1.åˆ›å»ºå¥—æ¥å­— 2.è¿æ¥æœåŠ¡ç«¯ 3.è¯»å–æ–‡ä»¶å†…å®¹ 4.å‘é€æ–‡ä»¶å†…å®¹ 5.å…³é—­è¿æ¥ \"\"\" # å¯¼å…¥æ¨¡å— from socket import * # åˆ›å»ºå¥—æ¥å­— socket = socket() # è¿æ¥æœåŠ¡ç«¯ socket.connect(('127.0.0.1',8888)) # è¯»å…¥æ–‡ä»¶å†…å®¹ f = open('2.jpg', 'rb') data = f.read() # å‘é€å†…å®¹ socket.send(data) f.close() socket.close() ","date":"2022-07-07","objectID":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/:7:4","tags":["python"],"title":"ç”Ÿæˆå™¨-å¯è¿­ä»£å¯¹è±¡-è¿­ä»£å™¨-è¿­ä»£","uri":"/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•°åŸºç¡€ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:1:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•°åŸºæœ¬ä½¿ç”¨ å‡½æ•°å®šä¹‰ å®šä¹‰å‡½æ•°æ ¼å¼å¦‚ä¸‹ï¼š def å‡½æ•°å(): å‡½æ•°å°è£…çš„ä»£ç  ... 1.defæ˜¯è‹±æ–‡defineçš„ç¼©å†™ 2.å‡½æ•°åç§° åº”è¯¥èƒ½å¤Ÿè¡¨è¾¾ å‡½æ•°å°è£…ä»£ç çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿åç»­çš„è°ƒç”¨ å‡½æ•°åç§° çš„åå‘½åº”è¯¥ ç¬¦åˆæ ‡è¯†ç¬¦çš„åå‘½è§„åˆ™ å¯ä»¥ç”± å­—æ¯ã€ä¸‹åˆ’çº¿å’Œæ•°å­—ç»„æˆ ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ ä¸èƒ½ä¸å…³é”®å­—é‡å å‡½æ•°è°ƒç”¨ è°ƒç”¨å‡½æ•°å¾ˆç®€å•ï¼Œé€šè¿‡å‡½æ•°å()å³å¯å®Œæˆå¯¹å‡½æ•°çš„è°ƒç”¨ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:1:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"ç¼–å†™ç¬¬ä¸€ä¸ªå‡½æ•° éœ€æ±‚ï¼š 1.ç¼–å†™ä¸€ä¸ªæ‰“æ‹›å‘¼say_helloçš„å‡½æ•°ï¼Œå°è£…ä¸‰è¡Œæ‰“æ‹›å‘¼ä»£ç  2.åœ¨å‡½æ•°ä¸‹æ–¹è°ƒç”¨æ‰“æ‹›å‘¼ä»£ç  name = 'å°æ˜' # è§£é‡Šå™¨çŸ¥é“è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªå‡½æ•° def say_hello(): print('hello 1') print('hello 2') print('hello 3') # åªæœ‰åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¹‹å‰å®šä¹‰çš„å‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œ # å‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åï¼Œä¼šé‡æ–°å›åˆ°ä¹‹å‰çš„ç¨‹åºä¸­ï¼Œç»§ç»­æ‰§è¡Œåç»­çš„ä»£ç  say_hello() print(name) ç”¨ å•æ­¥æ‰§è¡Œ F8 å’Œ F7 è§‚å¯Ÿä»¥ä¸Šä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ å®šä¹‰å¥½å‡½æ•°åï¼Œåªè¡¨ç¤ºè¿™ä¸ªå‡½æ•°å°è£…äº†ä¸€æ®µä»£ç è€Œå·² å¦‚æœä¸ä¸»åŠ¨è°ƒç”¨å‡½æ•°ï¼Œå‡½æ•°æ˜¯ä¸ä¼šä¸»åŠ¨æ‰§è¡Œçš„ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:1:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"æ€è€ƒ èƒ½å¦å°† å‡½æ•°è°ƒç”¨ æ”¾åœ¨ å‡½æ•°å®šä¹‰çš„ä¸Šæ–¹ï¼Ÿ ä¸èƒ½ å› ä¸ºåœ¨ ä½¿ç”¨å‡½æ•°åè°ƒç”¨ä¹‹å‰ï¼Œå¿…é¡»è¦ä¿è¯ pythonå·²ç»çŸ¥é“å‡½æ•°çš„å­˜åœ¨ å¦åˆ™æ§åˆ¶å°ä¼šæç¤ºNameError: name 'say_hello' is not defined(åç§°é”™è¯¯ï¼šsay_helloè¿™ä¸ªåå­—æ²¡æœ‰è¢«å®šä¹‰) ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:1:3","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"pycharm çš„è°ƒè¯•å·¥å…· F8 step over å¯ä»¥å•æ­¥æ‰§è¡Œä»£ç ï¼Œä¼šæŠŠå‡½æ•°è°ƒç”¨çœ‹ä½œæ˜¯ä¸€è¡Œä»£ç ç›´æ¥æ‰§è¡Œ F7 step into å¯ä»¥å•æ­¥æ‰§è¡Œä»£ç , å¦‚æœæ˜¯å‡½æ•°ï¼Œä¼šè¿›å…¥å‡½æ•°å†…éƒ¨ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:1:4","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•°çš„æ–‡æ¡£æ³¨é‡Š åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœå¸Œæœ›ç»™å‡½æ•°æ·»åŠ æ³¨é‡Šï¼Œåº”è¯¥åœ¨ å®šä¹‰å‡½æ•° çš„ä¸‹æ–¹ï¼Œä½¿ç”¨ è¿ç»­çš„ä¸‰å¯¹å¼•å· åœ¨ è¿ç»­çš„ä¸‰å¯¹å¼•å· ä¹‹é—´ç¼–å†™å¯¹å‡½æ•°çš„è¯´æ˜æ–‡å­— åœ¨å‡½æ•°è°ƒç”¨ä½ç½®ï¼Œä½¿ç”¨å¿«æ·é”® ctrl + Qå¯ä»¥æŸ¥çœ‹å‡½æ•°è¯´æ˜ä¿¡æ¯ æ³¨æ„ï¼š å› ä¸º å‡½æ•°ä½“è¡Œå¯¹æ¯”è¾ƒç‹¬ç«‹ï¼Œå‡½æ•°å®šä¹‰çš„ä¸Šæ–¹ï¼Œåº”è¯¥å’Œå…¶ä»–ä»£ç ï¼ˆåŒ…æ‹¬æ³¨é‡Šï¼‰ä¿ç•™ä¸¤ä¸ªç©ºè¡Œã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:2:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•°å‚æ•°çš„ä½¿ç”¨ åœ¨å‡½æ•°åçš„åé¢çš„å°æ‹¬å·å†…éƒ¨å¡«å†™ å‚æ•° å¤šä¸ªå‚æ•°ä¹‹é—´ä½¿ç”¨,åˆ†éš” def sum_2_num(num1, num2): res = num1 + num2 print(\"%d + %d = %d\" % (num1, num2, res)) sum_2_num(10, 20) sum_2_num() # ä¸ä¼ å‚æ—¶ä¼šæŠ¥é”™ã€‚TypeError: sum_2_num() missing 2 required positional arguments: 'num1' and 'num2' ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:2:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å‚æ•°çš„ä½œç”¨ å‡½æ•°ï¼Œ æŠŠ å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ä»£ç å—ç»„ç»‡ä¸ºä¸€ä¸ªå°æ¨¡å—ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ è°ƒç”¨ã€‚ å‡½æ•°çš„å‚æ•°ï¼Œå¢åŠ å‡½æ•°çš„ é€šç”¨æ€§ï¼Œé’ˆå¯¹ ç›¸åŒçš„æ•°æ®å¤„ç†é€»è¾‘ï¼Œèƒ½å¤Ÿä½¿ç”¨æ›´å¤šçš„æ•°æ® 1.åœ¨å‡½æ•°å†…éƒ¨ï¼ŒæŠŠå‚æ•°å½“ä½œ å˜é‡ ä½¿ç”¨ï¼Œè¿›è¡Œéœ€è¦çš„æ•°æ®å¤„ç† 2.å‡½æ•°è°ƒç”¨æ—¶ï¼ŒæŒ‰ç…§å‡½æ•°å®šä¹‰çš„å‚æ•°é¡ºåºï¼Œ æŠŠ å¸Œæœ›åœ¨å‡½æ•°å†…éƒ¨å¤„ç†çš„æ•°æ®ï¼Œé€šè¿‡ å‚æ•°ä¼ é€’ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:2:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•°çš„è¿”å›å€¼ åœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œæœ‰æ—¶å€™ï¼Œä¼šå¸Œæœ› ä¸€ä¸ªå‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå‘Šè¯‰è°ƒç”¨è€…ä¸€ä¸ªç»“æœï¼Œä»¥ä¾¿è°ƒç”¨è€…é’ˆå¯¹å…·ä½“çš„ç»“æœåšåç»­çš„å¤„ç†ã€‚ è¿”å›å€¼ æ˜¯å‡½æ•° å®Œæˆå·¥ä½œåï¼Œæœ€å ç»™è°ƒç”¨è€…çš„ä¸€ä¸ªç»“æœã€‚ åœ¨å‡½æ•°ä¸­ä½¿ç”¨returnå…³é”®å­—å¯ä»¥è¿”å›ç»“æœã€‚ è°ƒç”¨å‡½æ•°ä¸€æ–¹ï¼Œå¯ä»¥ä½¿ç”¨å˜é‡æ¥æ¥æ”¶å‡½æ•°çš„è¿”å›ç»“æœã€‚ æ³¨æ„ï¼šreturnè¡¨ç¤ºè¿”å›ï¼Œåç»­ä»£ç éƒ½ä¸ä¼šè¢«æ‰§è¡Œ def sum_2_num(num1, num2): \"\"\"å¯¹ä¸¤ä¸ªæ•°å­—æ±‚å’Œ\"\"\" return num1 + num2 # è°ƒç”¨å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ res å˜é‡æ¥æ”¶è®¡ç®—ç»“æœ res = sum_2_num(10, 20) print(\"è®¡ç®—ç»“æœæ˜¯ %d\" % res) # è®¡ç®—ç»“æœæ˜¯ 30 å¤šä¸ªè¿”å›å€¼ def divid(a,b): shang = a//b yushu = a%b return shang,yushu sh,yu = divid(5,2) print(\"å•†: %d, ä½™æ•°ï¼š%d\"%(sh,yu)) è¾“å‡º å•†: 2, ä½™æ•°ï¼š1 ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:2:3","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•°çš„åµŒå¥—è°ƒç”¨ ä¸€ä¸ªå‡½æ•°é‡Œé¢åˆè°ƒç”¨äº†å¦å¤–ä¸€ä¸ªå‡½æ•°test1 å¦‚æœå‡½æ•°test2ä¸­ï¼Œè°ƒç”¨äº†å¦å¤–ä¸€ä¸ªå‡½æ•°test1 é‚£ä¹ˆæ‰§è¡Œåˆ°è°ƒç”¨test1å‡½æ•°æ—¶ï¼Œä¼šå…ˆæŠŠå‡½æ•°test1ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œ æ‰ä¼šå›åˆ°test2ä¸­è°ƒç”¨å‡½æ•°test1çš„ä½ç½®ï¼Œç»§ç»­æ‰§è¡Œåç»­çš„ä»£ç ã€‚ def test1(): print(\"*\" * 50) print(\"test 1\") print(\"*\" * 50) def test2(): print(\"_\" * 50) print(\"test 2\") test1() print(\"_\" * 50) test2() ç»“æœå¦‚ä¸‹ ç®€å•è¯´å°±æ˜¯æŒ‰ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡Œã€‚ __________________________________________________ test 2 ************************************************** test 1 ************************************************** __________________________________________________ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:2:4","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•°åµŒå¥—çš„æ¼”ç»ƒâ€“æ‰“å°åˆ†å‰²çº¿ ä½“ä¼šä¸€ä¸‹å·¥ä½œä¸­ éœ€æ±‚æ˜¯å¤šå˜çš„ éœ€æ±‚1 å®šä¹‰ä¸€ä¸ªprint_lineå‡½æ•°èƒ½å¤Ÿæ‰“å°*ç»„æˆçš„ ä¸€æ¡åˆ†å‰²çº¿ def print_line(): print(\"*\" * 50) # print_line() éœ€æ±‚2 å®šä¹‰ä¸€ä¸ªå¯ä»¥æ‰“å°ä»»æ„å­—ç¬¦çš„åˆ†å‰²çº¿å‡½æ•° def print_line_1(char): print(char * 50) # print_line_1(\"_\") éœ€æ±‚3 å®šä¹‰ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿæ‰“å°ä»»æ„é‡å¤æ¬¡æ•°çš„åˆ†å‰²çº¿ def print_line_2(char, num): print(char * num) # print_line_2(\"_\", 50) éœ€æ±‚4 å®šä¹‰ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿæ‰“å°5è¡Œåˆ†å‰²çº¿ åˆ†å‰²çº¿è¦æ±‚è¦ç¬¦åˆéœ€æ±‚3 def print_line_3(char, num): row = 0 while row \u003c 5: print_line_2(char, num) row += 1 print_line_3('*', 30) ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:2:5","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ç›¸åŒåå­— a = 100 def test1(): a = 300 # å±€éƒ¨å˜é‡ä¼˜å…ˆä½¿ç”¨ print(\"teest1---------ä¿®æ”¹å‰: a= %d\"%a) a = 200 print(\"teest1---------ä¿®æ”¹å: a= %d\"%a) def test2(): print(\"teest2---------a= %d\"%a) # æ²¡æœ‰å±€éƒ¨å˜é‡ï¼Œé»˜è®¤ä½¿ç”¨å…¨å±€å˜é‡ test1() test2() è¾“å‡ºç»“æœ teest1---------ä¿®æ”¹å‰: a= 300 teest1---------ä¿®æ”¹å: a= 200 teest2---------a= 100 åœ¨å‡½æ•°ä¸­ä¿®æ”¹å…¨å±€å˜é‡ a = 100 def test1(): global a # å£°æ˜å…¨å±€å˜é‡åœ¨å‡½æ•°ä¸­çš„æ ‡è¯†ç¬¦ print(\"teest1---------ä¿®æ”¹å‰: a= %d\"%a) a = 200 print(\"teest1---------ä¿®æ”¹å: a= %d\"%a) def test2(): print(\"teest2---------a= %d\"%a) # æ²¡æœ‰å±€éƒ¨å˜é‡ï¼Œé»˜è®¤ä½¿ç”¨å…¨å±€å˜é‡ test1() test2() è¾“å‡ºç»“æœ teest1---------ä¿®æ”¹å‰: a= 100 teest1---------ä¿®æ”¹å: a= 200 teest2---------a= 200 ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:2:6","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨æ¨¡å—ä¸­çš„å‡½æ•° æ¨¡å—æ˜¯pythonç¨‹åºæ¶æ„çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µ æ¨¡å—å¥½æ¯”æ˜¯å·¥å…·åŒ…ï¼Œè¦æƒ³ä½¿ç”¨è¿™ä¸ªå·¥å…·åŒ…ä¸­çš„å·¥å…·ï¼Œå°±éœ€è¦ å¯¼å…¥import è¿™ä¸ªæ¨¡å— æ¯ä¸€ä¸ªä»¥æ‹“å±•åpyç»“å°¾ çš„pythonæºä»£ç éƒ½æ˜¯ä¸€ä¸ªæ¨¡å— åœ¨æ¨¡å—ä¸­å®šä¹‰çš„ å…¨å±€å˜é‡ã€ å‡½æ•° éƒ½æ˜¯æ¨¡å—é¢èƒ½å¤Ÿæä¾›ç»™å¤–ç•Œç›´æ¥ä½¿ç”¨çš„å·¥å…· ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:3:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"ç¬¬ä¸€ä¸ªæ¨¡å—ä½¿ç”¨ æ­¥éª¤ æ–°å»ºmypythonæ¨¡å—.py name = \"mypythonæ¨¡å—\" åˆ›å»ºå¦ä¸€ä¸ªæ–‡ä»¶imp_mypythonæ¨¡å—.pyæ¥å¼•å…¥æ¨¡å—mypythonæ¨¡å—.pyã€‚ import mypythonæ¨¡å— print(mypythonæ¨¡å—.name) æ‰§è¡Œç»“æœ mypythonæ¨¡å— å°ç»“ å¯ä»¥åœ¨ä¸€ä¸ªpythonæ–‡ä»¶ä¸­ å®šä¹‰å˜é‡ æˆ–è€…å‡½æ•° ç„¶ååœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨importå¯¼å…¥è¿™ä¸ªæ¨¡å— å¯¼å…¥ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å—å.å˜é‡/æ¨¡å—å.å‡½æ•°çš„æ–¹å¼ï¼Œä½¿ç”¨è¿™ä¸ªæ¨¡å—ä¸­å®šä¹‰çš„å˜é‡æˆ–è€…å‡½æ•° æ¨¡å—å¯ä»¥è®©æ›¾ç»ç¼–å†™è¿‡çš„ä»£ç  æ–¹ä¾¿çš„è¢«å¤ç”¨ï¼ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:3:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"æ¨¡å—åä¹Ÿæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ æ ‡è¯†ç¬¦å¯ä»¥ç”± å­—æ¯ã€ä¸‹åˆ’çº¿å’Œæ•°å­—ç»„æˆ ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/:3:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å‡½æ•°","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"é›†åˆ ç‰¹æ€§ï¼š 1.æ— åºæ€§ï¼š ä¸€ä¸ªé›†åˆä¸­ï¼Œæ¯ä¸ªå…ƒç´ çš„åœ°ä½éƒ½æ˜¯ç›¸åŒçš„ï¼Œå…ƒç´ ä¹‹é—´æ˜¯æ— åºçš„ 2.äº’å¼‚æ€§ï¼š ä¸€ä¸ªé›†åˆä¸­ï¼Œä»»ä½•ä¸¤ä¸ªå…ƒç´ éƒ½æ˜¯ä¸åŒçš„ï¼Œå³å…ƒç´ åœ¨é›†åˆä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ 3.ç¡®å®šæ€§ï¼š ç»™å®šä¸€ä¸ªé›†åˆå’Œä¸€ä¸ªä»»æ„å…ƒç´ ï¼Œç»™è¢æ€è¦ä¹ˆå±äºè¿™ä¸ªé›†åˆï¼Œè¦ä¹ˆä¸å±äºè¿™ä¸ªé›†åˆï¼ŒäºŒè€…å¿…å±…å…¶ä¸€ï¼Œä¸å…è®¸æœ‰æ¨¡æ£±ä¸¤å¯çš„æƒ…å†µå‡ºç°ã€‚ é›†åˆçš„æˆå‘˜è¿ç®—åœ¨æ€§èƒ½ä¸Šè¦ä¼˜äºåˆ—è¡¨çš„æˆå‘˜ è¿ç®—ï¼Œè¿™æ˜¯é›†åˆçš„åº•å±‚å­˜å‚¨ç‰¹æ€§ï¼ˆå“ˆå¸Œå­˜å‚¨ï¼‰å†³å®šçš„ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/:1:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é›†åˆ","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ›å»ºé›†åˆ ç”¨set()åˆ›å»ºï¼Œæˆ–è€…ç”¨ {}å®šä¹‰ä¸€ä¸ªç©ºé›†åˆï¼Œä½†{}ä¸­è‡³å°‘è¦æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰å…ƒç´ å°±ä¸æ˜¯ç©ºé›†åˆè€Œæ˜¯ç©ºå­—å…¸äº†ã€‚ä¹Ÿå¯ä»¥å°†å…¶ä»–åºåˆ—è½¬æ¢æˆé›†åˆï¼Œä¾‹å¦‚ï¼šset('hello')ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å«4ä¸ªå­—ç¬¦çš„é›†åˆï¼ˆé‡å¤çš„lä¼šè¢«å»æ‰ï¼‰ã€‚è¿˜å¯ä»¥ç”¨ç”Ÿæˆå¼è¯­æ³•æ¥åˆ›å»ºé›†åˆï¼Œå’Œç”¨ç”Ÿæˆå¼åˆ›å»ºåˆ—è¡¨ä¸€æ ·ã€‚è¦çŸ¥é“é›†åˆä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œè¿˜æ˜¯ä½¿ç”¨å†…ç½®å‡½æ•°lenã€‚ä½¿ç”¨forå¾ªç¯å¯ä»¥å®ç°å¯¹é›†åˆå…ƒç´ çš„éå†ã€‚ # åˆ›å»ºé›†åˆï¼ˆé‡å¤å…ƒç´ ä¸ä¼šå‡ºç°åœ¨é›†åˆä¸­ï¼Œå› æ­¤å¸¸ç”¨é›†åˆè¿™ä¸€ç‰¹æ€§å»é‡ï¼ï¼ï¼‰ set1 = {1, 2, 3, 3, 3, 2} print(set1) # {1, 2, 3} print(len(set1)) # 3 # åˆ›å»ºé›†åˆæ„é€ å™¨è¯­æ³• set2 = set('hello') print(set2) # {'o', 'l', 'e', 'h'} # å°†åˆ—è¡¨è½¬æ¢æˆé›†åˆï¼ˆå¯ä»¥å»æ‰åˆ—è¡¨ä¸­é‡å¤çš„å…ƒç´ ï¼‰ set3 = set([1,2,3,3,2,1]) print(set3) # {1, 2, 3} # åˆ›å»ºé›†åˆçš„ç”Ÿæˆå¼è¯­æ³•ï¼ˆå°†åˆ—è¡¨ç”Ÿæˆå¼çš„[] æ¢æˆ{}ï¼‰ set4 = {num for num in range(1,20) if num % 3 == 0 or num % 5 == 0} print(set4) # {3, 5, 6, 9, 10, 12, 15, 18} # é›†åˆå…ƒç´ çš„å¾ªç¯éå† for elem in set4: print(elem) æ³¨æ„ï¼šé›†åˆä¸­çš„å…ƒç´ å¿…é¡»æ˜¯hashableç±»å‹ã€‚hashableç±»å‹æŒ‡çš„æ˜¯èƒ½å¤Ÿè®¡ç®—å‡ºå“ˆå¸Œç çš„æ•°æ®ç±»å‹ã€‚å¯ä»¥æš‚æ—¶å°†å“ˆå¸Œç ç†è§£ä¸ºå’Œå˜é‡å¯¹åº”çš„å”¯ä¸€çš„IDå€¼ã€‚**é€šå¸¸ä¸å¯å˜ç±»å‹éƒ½æ˜¯hashableç±»å‹ã€‚**å¦‚æ•´æ•°ã€æµ®ç‚¹ã€å­—ç¬¦ä¸²ã€å…ƒç»„ç­‰ã€‚è€Œå¯å˜ç±»å‹éƒ½ä¸æ˜¯hashableç±»å‹ï¼Œå› ä¸ºå¯å˜ç±»å‹æ— æ³•ç¡®å®šå”¯ä¸€çš„IDå€¼ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸èƒ½æ”¾åˆ°é›†åˆä¸­ã€‚é›†åˆæœ¬èº«ä¹Ÿæ˜¯å¯å˜ç±»å‹ï¼Œæ‰€ä»¥é›†åˆä¸èƒ½ä½œä¸ºé›†åˆä¸­çš„å…ƒç´ ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/:1:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é›†åˆ","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/"},{"categories":["ç¼–ç¨‹"],"content":"é›†åˆçš„è¿ç®— pythonä¸ºé›†åˆç±»å‹æä¾›äº†éå¸¸ä¸°å¯Œçš„è¿ç®—ç¬¦ï¼Œä¸»è¦åŒ…æ‹¬:æˆå‘˜è¿ç®—ã€äº¤é›†è¿ç®—ã€å¹¶é›†è¿ç®—ã€å·®é›†è¿ç®—ã€æ¯”è¾ƒè¿ç®—ï¼ˆç›¸ç­‰æ€§ã€å­é›†ã€è¶…é›†ï¼‰ç­‰ã€‚ æˆå‘˜è¿ç®— é€šè¿‡æˆå‘˜è¿ç®—inã€not inæ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­ set1 = {11,12,13,14,15} print(10 in set1) # False print(15 in set1) # True set2 = {'python', 'Java', 'Go', 'swift'} print('Ruby' in set2) # False print('Java' in set2) # True äº¤å¹¶å·®è¿ç®— pythonä¸­çš„é›†åˆè·Ÿæ•°å­¦ä¸Šçš„é›†åˆä¸€æ ·ã€‚å¯ä»¥è¿›è¡Œäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰è¿ç®—ï¼Œè€Œä¸”å¯ä»¥é€šè¿‡è¿ç®—ç¬¦å’Œæ–¹æ³•è°ƒç”¨æ–¹å¼æ¥æ“ä½œï¼Œä»£ç å¦‚ä¸‹ã€‚ set1 = {1,2,3,4,5,6,7} set2 = {2,4,6,8,10} # äº¤é›† # æ–¹å¼ä¸€ï¼šä½¿ç”¨ \u0026 è¿ç®—ç¬¦ print(set1 \u0026 set2) # {2, 4, 6} # æ–¹æ³•äºŒï¼š ä½¿ç”¨intersectionæ–¹æ³• print(set1.intersection(set2)) # {2, 4, 6} # å¹¶é›† # æ–¹æ³•ä¸€ï¼š ä½¿ç”¨ | è¿ç®—ç¬¦ print(set1 | set2) # {1, 2, 3, 4, 5, 6, 7, 8, 10} # æ–¹æ³•äºŒï¼š ä½¿ç”¨unionæ–¹æ³• print(set1.union(set2)) # {1, 2, 3, 4, 5, 6, 7, 8, 10} # å·®é›† # æ–¹æ³•ä¸€ï¼š ä½¿ç”¨ - è¿ç®—ç¬¦ print(set1 - set2) # {1, 3, 5, 7} # æ–¹æ³•äºŒï¼š ä½¿ç”¨difference æ–¹æ³• print(set1.difference(set2)) # {1, 3, 5, 7} # å¯¹ç§°å·® # æ–¹æ³•ä¸€ï¼š ä½¿ç”¨ ^ è¿ç®—ç¬¦ print(set1 ^ set2) # {1, 3, 5, 7, 8, 10} # æ–¹æ³•äºŒï¼š ä½¿ç”¨ æ–¹æ³• print(set1.symmetric_difference(set2)) # {1, 3, 5, 7, 8, 10} # æ–¹æ³•ä¸‰ï¼š å¯¹ç§°å·®ç›¸å½“äºä¸¤ä¸ªé›†åˆçš„å¹¶é›†å‡å»äº¤é›† print((set1 - set2) - (set1 \u0026 set2)) # {1, 3, 5, 7} æ€»ç»“ï¼šå¯¹äºä¸¤ä¸ªé›†åˆæ±‚äº¤é›†ï¼Œ\u0026è¿ç®—ç¬¦å’Œintersectionæ–¹æ³•çš„ä½œç”¨æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œä½¿ç”¨è¿ç®—ç¬¦çš„æ–¹å¼æ›´ç›´è§‚è€Œä¸”ä»£ç ä¹Ÿæ¯”è¾ƒç®€çŸ­ã€‚ æ¯”è¾ƒè¿ç®— ä¸¤ä¸ªé›†åˆå¯ä»¥ç”¨==å’Œ!=è¿›è¡Œç›¸ç­‰æ€§åˆ¤æ–­ï¼Œå¦‚æœä¸¤ä¸ªé›†åˆä¸­çš„å…ƒç´ å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆ==æ¯”è¾ƒçš„ç»“æœå°±æ˜¯ Trueï¼Œå¦åˆ™å°±æ˜¯Falseï¼Œå¦‚æœé›†åˆAä¸­çš„ä»»æ„ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯é›†åˆBçš„å…ƒç´ ï¼Œé‚£ä¹ˆé›†åˆAç§°ä¸ºé›†åˆBçš„å­é›†ã€‚ set1 = {1,3,5} set2 = {1,2,3,4,5} set3 = set2 # \u003c è¿ç®—ç¬¦è¡¨ç¤ºçœŸå­é›†ï¼Œ \u003c= è¡¨ç¤ºå­é›† print(set1 \u003c set2, set1 \u003c= set2) # True True print(set2 \u003c set3, set2 \u003c= set3) # False True # é€šè¿‡issubset æ–¹æ³•ä¹Ÿèƒ½è¿›è¡Œå­é›†åˆ¤æ–­ print(set1.issubset(set2)) # True # åè¿‡æ¥å¯ä»¥ç”¨issuperset æˆ–\u003eè¿ç®—ç¬¦è¿›è¡Œè¶…é›†åˆ¤æ–­ print(set2.issuperset(set1)) # True print(set2 \u003e set1) # True é›†åˆçš„æ–¹æ³• pythonä¸­çš„é›†åˆæ˜¯å¯å˜ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é›†åˆç±»å‹çš„æ–¹æ³•ä¸ºé›†åˆæ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚ # åˆ›å»ºä¸€ä¸ªç©ºé›†åˆ set1 = set() # é€šè¿‡addæ–¹æ³•æ·»åŠ å…ƒç´  set1.add(33) set1.add(55) set1.update({1,10,100,1000}) print(set1) # {33, 1, 100, 55, 1000, 10} # é€šè¿‡discardæ–¹æ³•åˆ é™¤æŒ‡å®šå…ƒç´  set1.discard(100) set1.discard(99) # å…ƒç´ ä¸å­˜åœ¨ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ å’Œremoveæ–¹æ³•å¯¹æ¯”ã€‚ print(set1) # {33, 1, 55, 1000, 10} # é€šè¿‡removeæ–¹æ³•åˆ é™¤æŒ‡å®šå…ƒç´ ï¼Œå»ºè®®å…ˆåšæˆå‘˜è¿ç®—å†åˆ é™¤ # å¦åˆ™å…ƒç´ å¦‚æœä¸åœ¨é›†åˆä¸­å°±ä¼šå¼•å‘KeyErrorå¼‚å¸¸ set1.remove(99) print(set1) # KeyError: 99 # popæ–¹æ³•å¯ä»¥ä»é›†åˆä¸­éšæœºåˆ é™¤ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›è¯¥å…ƒç´  print(set1.pop()) # 33 # clearæ–¹æ³•å¯ä»¥æ¸…ç©ºæ•´ä¸ªé›†åˆ set1.clear() print(set1) # set() å¦‚æœè¦åˆ¤æ–­ä¸¤ä¸ªé›†åˆæœ‰æ²¡æœ‰ç›¸åŒçš„å…ƒç´ å¯ä»¥ä½¿ç”¨isdisjointæ–¹æ³•ï¼Œæ²¡æœ‰ç›¸åŒå…ƒç´ è¿”å›True,å¦åˆ™è¿”å› Falseï¼Œä»£ç å¦‚ä¸‹ã€‚ set1 = {'Java', 'Python', 'Go', 'Kotlin'} set2 = {'Kotlin', 'Swift', 'Java', 'Objective-C', 'Dart'} set3 = {'HTML', 'CSS', 'JavaScript'} print(set1.isdisjoint(set2)) # False print(set1.isdisjoint(set3)) # True ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/:1:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é›†åˆ","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸å¯å˜é›†åˆ pythonä¸­è¿˜æœ‰ä¸€ç§ä¸å¯å˜ç±»å‹çš„é›†åˆï¼Œåå­—å«frozensetã€‚setå’Œfrozensetçš„åŒºåˆ«å°±å¦‚åŒlistè·Ÿtupleçš„åŒºåˆ«ã€‚frozensetç”±äºæ˜¯ä¸å¯å˜ç±»å‹ï¼Œèƒ½å¤Ÿè®¡ç®—å‡ºå“ˆå¸Œç ï¼Œå› æ­¤å®ƒå¯ä»¥ä½œä¸ºsetä¸­çš„å…ƒç´ ã€‚é™¤äº†ä¸èƒ½æ·»åŠ å’Œåˆ é™¤å…ƒç´ ï¼Œfrozensetåœ¨å…¶ä»–æ–¹é¢è·ŸsetåŸºæœ¬ä¸€æ ·ã€‚ set1 = frozenset({1,3,5,7}) set2 = frozenset(range(1,6)) print(set1 \u0026 set2) # frozenset({1, 3, 5}) print(set1 | set2) # frozenset({1, 2, 3, 4, 5, 7}) print(set1 - set2) # frozenset({7}) print(set1 \u003c set2) # False ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/:1:3","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é›†åˆ","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/"},{"categories":["ç¼–ç¨‹"],"content":"æ€»ç»“ pythonä¸­é›†åˆåº•å±‚ä½¿ç”¨äº†å“ˆå¸Œå­˜å‚¨çš„æ–¹å¼ã€‚é›†åˆæ˜¯ä¸€ç§å®¹å™¨ï¼Œå…ƒç´ å¿…é¡»æ˜¯hashableç±»å‹ï¼Œä¸åˆ—è¡¨ä¸åŒçš„åœ°æ–¹åœ¨äºé›†åˆä¸­å…ƒç´ æ²¡æœ‰åºã€ä¸èƒ½ç”¨ç´¢å¼•è¿ç®—ã€ä¸èƒ½é‡å¤ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/:1:4","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é›†åˆ","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ—è¡¨å¸¸ç”¨æ“ä½œ åœ¨ipython3ä¸­å®šä¹‰ä¸€ä¸ªåˆ—è¡¨ï¼Œä¾‹å¦‚ï¼šname_list = [] è¾“å…¥name_list.æŒ‰ä¸‹Tabé”®ï¼Œipythonä¼šæç¤ºèƒ½å¤Ÿä½¿ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š name_list.append name_list.count name_list.insert name_list.reverse name_list.clear name_list.extend name_list.pop name_list.sort name_list.copy name_list.index name_list.remove åºå· åˆ†ç±» å…³é”®å­—/å‡½æ•°/æ–¹æ³• è¯´æ˜ 1 å¢åŠ  åˆ—è¡¨.insert(ç´¢å¼•,æ•°æ®) åœ¨æŒ‡å®šä½ç½®æ’å…¥æ•°æ® åˆ—è¡¨.append(æ•°æ®) åœ¨æœ«å°¾è¿½åŠ æ•°æ® åˆ—è¡¨.extend(åˆ—è¡¨2) å°†åˆ—è¡¨2çš„æ•°æ®è¿½åŠ åˆ°åˆ—è¡¨ 2 ä¿®æ”¹ åˆ—è¡¨[ç´¢å¼•] = æ•°æ® ä¿®æ”¹æŒ‡å®šç´¢å¼•çš„æ•°æ® 3 åˆ é™¤ del åˆ—è¡¨[ç´¢å¼•] åˆ é™¤æŒ‡å®šç´¢å¼•çš„æ•°æ® åˆ—è¡¨.remove[æ•°æ®] åˆ é™¤ç¬¬ä¸€ä¸ªå‡ºç°çš„æŒ‡å®šæ•°æ® åˆ—è¡¨.pop åˆ é™¤æœ«å°¾ æ•°æ® åˆ—è¡¨.pop(ç´¢å¼•) åˆ é™¤æŒ‡å®šç´¢å¼•æ•°æ® åˆ—è¡¨.clear æ¸…ç©ºåˆ—è¡¨ 4 ç»Ÿè®¡ len(åˆ—è¡¨) åˆ—è¡¨é•¿åº¦ åˆ—è¡¨.count(æ•°æ®) æ•°æ®åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•° 5 æ’åº åˆ—è¡¨.sort() å‡åºæ’åº åˆ—è¡¨.sort(reverse=True) é™åºæ’åº åˆ—è¡¨.reverse() é€†åºã€åè½¬ delå…³é”®å­— ä½¿ç”¨delå…³é”®å­—ï¼ˆdeleteï¼‰åŒæ ·å¯ä»¥åˆ é™¤åˆ—è¡¨å…ƒç´  delå…³é”®å­—æœ¬è´¨ä¸Šæ˜¯ç”¨æ¥å°†ä¸€ä¸ªå˜é‡ä»å†…å­˜ä¸­åˆ é™¤çš„ å¦‚æœä½¿ç”¨delå…³é”®å­—å°†å˜é‡ä»å†…å­˜ä¸­åˆ é™¤ï¼Œåç»­çš„ä»£ç å°±ä¸èƒ½ä½¿ç”¨è¿™ä¸ªå˜é‡äº† del name_list[1] åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œè¦ä»åˆ—è¡¨åˆ é™¤æ•°æ®ï¼Œå»ºè®®ç”¨åˆ—è¡¨æä¾›çš„æ–¹æ³•ã€‚ å…³é”®å­—ã€å‡½æ•°å’Œæ–¹æ³• å…³é”®å­—æ˜¯pythonå†…ç½®çš„ã€å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„æ ‡è¯†ç¬¦ import keyword print(keyword.kwlist) print(len(keyword.kwlist)) å…³é”®å­—åé¢ä¸éœ€è¦ä½¿ç”¨æ‹¬å· å‡½æ•° å°è£…äº†ç‹¬ç«‹åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ å‡½æ•°å(å‚æ•°) å‡½æ•°éœ€è¦æ­»è®°ç¡¬èƒŒ æ–¹æ³• å’Œå‡½æ•°ç±»ä¼¼ï¼ŒåŒæ ·æ˜¯å°è£…äº†ç‹¬ç«‹çš„åŠŸèƒ½ æ–¹æ³• éœ€è¦é€šè¿‡ å¯¹è±¡æ¥è°ƒç”¨ï¼Œè¡¨ç¤ºé’ˆå¯¹è¿™ä¸ªå¯¹è±¡è¦åšçš„æ“ä½œã€‚ å¯¹è±¡.æ–¹æ³•åï¼ˆå‚æ•°ï¼‰ åœ¨å˜é‡åé¢è¾“å…¥.ï¼Œç„¶åé€‰æ‹©é’ˆå¯¹è¿™ä¸ªå˜é‡è¦æ‰§è¡Œçš„æ“ä½œï¼Œè®°å¿†èµ·æ¥æ¯”å‡½æ•°è¦ç®€å•çš„å¤šã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:1:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¾ªç¯éå† éå† å°±æ˜¯ ä»å¤´åˆ°å°¾ ä¾æ¬¡ ä»åˆ—è¡¨ä¸­è·å–æ•°æ® åœ¨ å¾ªç¯ä½“å†…éƒ¨ é’ˆå¯¹ æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæ‰§è¡Œç›¸åŒæ“ä½œ åœ¨ pythonä¸­ä¸ºäº†æé«˜åˆ—è¡¨çš„éå†æ•ˆç‡ï¼Œä¸“é—¨æä¾›çš„ è¿­ä»£iterationéå† ä½¿ç”¨ forå°±èƒ½å®ç°è¿­ä»£éå† # for å¾ªç¯å†…éƒ¨ä½¿ç”¨çš„å˜é‡ in åˆ—è¡¨ for name in name_list: å¾ªç¯å†…éƒ¨é’ˆå¯¹åˆ—è¡¨å…ƒç´ è¿›è¡Œæ“ä½œ print(name) ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:2:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"æµ…æ‹·è´å’Œæ·±æ‹·è´ æµ…æ‹·è´ï¼šåˆ©ç”¨åˆ—è¡¨çš„ copy() æ–¹æ³•æˆ–è€…åˆ‡ç‰‡æ¥å®ç° æ·±æ‹·è´ï¼šåˆ©ç”¨ copy æ¨¡å—çš„ deepcopy() å‡½æ•°æ¥å®ç° æµ…æ‹·è´å¯ä»¥ç”¨äºå¤„ç†ä¸€ç»´åˆ—è¡¨ï¼Œå¯¹äºåµŒå¥—åˆ—è¡¨çš„æ‹·è´ï¼Œåªèƒ½æ‹·è´ç¬¬ä¸€å±‚æ•°æ®ï¼Œå…¶ä½™ä»…æ‹·è´å…¶å¼•ç”¨ï¼š \u003e\u003e\u003e x = [[1, 2, 3], [4, 5, 6], [7, 8, 9]] \u003e\u003e\u003e y = x.copy() \u003e\u003e\u003e x[1][1] = 0 \u003e\u003e\u003e x [[1, 2, 3], [4, 0, 6], [7, 8, 9]] \u003e\u003e\u003e y [[1, 2, 3], [4, 0, 6], [7, 8, 9]] æ·±æ‹·è´å¯ä»¥ç”¨äºå¤„ç†å¤šç»´åˆ—è¡¨ï¼š \u003e\u003e\u003e import copy \u003e\u003e\u003e x = [[1, 2, 3], [4, 5, 6], [7, 8, 9]] \u003e\u003e\u003e y = copy.deepcopy(x) \u003e\u003e\u003e x[1][1] = 0 \u003e\u003e\u003e x [[1, 2, 3], [4, 0, 6], [7, 8, 9]] \u003e\u003e\u003e y [[1, 2, 3], [4, 5, 6], [7, 8, 9]] ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:3:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å°ç»“ åˆ—è¡¨æµ…æ‹·è´åªæ˜¯å¤–å±‚å¯¹è±¡æ‹·è´ï¼Œå°†åŸå¯¹è±¡æ‹·è´çš„åŒæ—¶ï¼Œä¸ä¼šæ‹·è´å¯¹è±¡ä¸­æ‰€å¼•ç”¨çš„å­å¯¹è±¡ copy() åˆ‡ç‰‡[:] æµ…æ‹·è´ï¼Œå¦‚æœåŒ…å«åµŒå¥—å¯¹è±¡ï¼Œé‚£ä¹ˆæ‹·è´çš„åªæ˜¯å…¶å¼•ç”¨ åˆ—è¡¨çš„æ·±æ‹·è´å°†åŸå¯¹è±¡æ‹·è´çš„åŒæ—¶ï¼Œä¹Ÿå°†å¯¹è±¡ä¸­æ‰€æœ‰å¼•ç”¨çš„å­å¯¹è±¡ä¸€å¹¶è¿›è¡Œæ‹·è´ã€‚ copy.copy() # æµ…æ‹·è´ copy.deepcopy() ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:3:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"æŸ¥æ‰¾ç‰¹å®šä¸‹æ ‡èŒƒå›´çš„å…ƒç´  mylist = ['a','c','b','a'] print(mylist.index('a',1,4)) # æŸ¥æ‰¾ç‰¹å®šä¸‹æ ‡èŒƒå›´çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ‰¾åˆ°å¯¹åº”æ•°æ®çš„ä¸‹æ ‡ã€‚ èŒƒå›´åŒºé—´ï¼Œå·¦é—­å³å¼€ã€‚å¼€åŒºé—´å–ä¸åˆ°ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:3:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ—è¡¨å…ƒç´ åˆ é™¤ moviename = ['apple','banana','ç³–è±†äºº','apple'] print(\"-------åˆ é™¤å‰ï¼Œç”µå½±åˆ—è¡¨çš„æ•°æ®-----\") for name in moviename: print(name) # moviename.pop() # del moviename[0] moviename.remove('apple') # å¤šä¸ªé‡å¤å…ƒç´ åªåˆ é™¤æœ€è¿‘çš„ä¸€ä¸ª print(\"-------åˆ é™¤åï¼Œç”µå½±åˆ—è¡¨çš„æ•°æ®-----\") for name in moviename: print(name) ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:4:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ—è¡¨å…ƒç´ åè½¬ä¸æ’åº a = [1,3,4,5,612,29] a.reverse() print(a) # [29, 612, 5, 4, 3, 1] a.sort() # å‡åº print(a) # [1, 3, 4, 5, 29, 612] a.sort(reverse=True) # [612, 29, 5, 4, 3, 1] é™åº print(a) ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:4:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¤šä¸ªåˆ—è¡¨åµŒå¥—å…ƒç´ å–æ³• schoolName = [[\"åŒ—äº¬å¤§å­¦\",\"æ¸…åå¤§å­¦\"],[\"å—å¼€å¤§å­¦\",\"å¤©æ´¥å¤§å­¦\",\"å¤©æ´¥å¸ˆèŒƒå¤§å­¦\"],[\"å±±ä¸œå¤§å­¦\",\"åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦\"]] print(schoolName[0][0]) # åŒ—äº¬å¤§å­¦ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:4:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç»ƒä¹  éœ€æ±‚ï¼šä¸åŒçš„äººéšæœºåˆ†é…3ä¸ªåŠå…¬å®¤ï¼Œä¸€ä¸ªäººåªå±äºä¸€ä¸ªåŠå…¬å®¤ï¼Œå¯ä»¥å¤šäººåœ¨ä¸€ä¸ªåŠå…¬å®¤ã€‚ import random # ä¸‰ä¸ªç©ºåŠå…¬å®¤ offices = [[],[],[]] # 6ä¸ªå¾…åˆ†é…çš„äºº names = [\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"] # ç»™6ä¸ªäººéšæœºåˆ†é…åˆ°3ä¸ªåŠå…¬å®¤ for name in names: index = random.randint(0,2) # è·å¾—0-2èŒƒå›´å†…éšæœºæ•´æ•° offices[index].append(name) # å±•ç¤ºåŠå…¬å®¤æ´»åŠ¨äººå‘˜åŸºæœ¬ä¿¡æ¯ i = 1 for office in offices: print(\"åŠå…¬å®¤%sçš„äººæ•°ä¸º:%d\"%(i,len(office))) # officeçš„åˆ—è¡¨é•¿åº¦å°±æ˜¯åŠå…¬å®¤ä¸­çš„äººæ•° i += 1 for name in office: # å±•ç¤ºæ¯ä¸ªåŠå…¬å®¤ä¸­çš„äººå‘˜ä¿¡æ¯ print(\"%s\"%name,end=\"\\t\") print(\"\\n\") print(\"_\"*20) ç¨‹åºæ‰§è¡Œç»“æœ åŠå…¬å®¤1çš„äººæ•°ä¸º:1 A ____________________ åŠå…¬å®¤2çš„äººæ•°ä¸º:4 B C E F ____________________ åŠå…¬å®¤3çš„äººæ•°ä¸º:1 D ____________________ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:4:3","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ—è¡¨åŒæ—¶å–å‡ºä¸‹æ ‡å’Œå…ƒç´ å°æŠ€å·§ mylist = [1,20,200,2000,3,90] for i,v in enumerate(mylist): print(i,v) è¾“å‡ºç»“æœ 0 1 1 20 2 200 3 2000 4 3 5 90 è¿˜å¯ä»¥ä»1å¼€å§‹è®¡æ•° mylist = [1,20,200,2000,3,90] for i,v in enumerate(mylist): print(i+1,v) ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/:4:4","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -åˆ—è¡¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/"},{"categories":["ç¼–ç¨‹"],"content":"é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨ ç¨‹åºæ˜¯æŒ‡ä»¤çš„é›†åˆ å‡½æ•°ï¼š æŠŠç›¸äº’ç‹¬ç«‹ä¸”ç»å¸¸é‡å¤ä½¿ç”¨çš„ä»£ç æ”¾ç½®åˆ°å‡½æ•°ä¸­ï¼Œåœ¨éœ€è¦ä½¿ç”¨è¿™äº›ä»£ç çš„æ—¶å€™è°ƒç”¨å‡½æ•°å³å¯ã€‚ åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸–ç•Œé‡Œï¼Œç¨‹åºä¸­çš„æ•°æ®å’Œæ“ä½œæ•°æ®çš„å‡½æ•°æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ•´ä½“ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¯¹è±¡ã€‚å¯¹è±¡å¯ä»¥æ¥æ”¶æ¶ˆæ¯ã€‚è§£å†³é—®é¢˜çš„æ–¹æ³•æ˜¯åˆ›å»ºå¯¹è±¡å¹¶å‘å¯¹è±¡å‘å‡ºå„ç§å„æ ·çš„æ¶ˆæ¯ã€‚é€šè¿‡æ¶ˆæ¯çš„ä¼ é€’ï¼Œç¨‹åºä¸­çš„å¤šä¸ªå¯¹è±¡å¯ä»¥ååŒå·¥ä½œï¼Œè¿™æ ·å°±èƒ½æ„é€ å‡ºå¤æ‚çš„ç³»ç»Ÿå¹¶è§£å†³ç°å®ä¸­çš„é—®é¢˜ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:1:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç±»å’Œå¯¹è±¡ é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šæŠŠä¸€ç»„æ•°æ®å’Œå¤„ç†æ•°æ®çš„æ–¹æ³•ç»„æˆå¯¹è±¡ï¼ŒæŠŠè¡Œä¸ºç›¸åŒçš„å¯¹è±¡å½’çº³ä¸ºç±»ï¼Œé€šè¿‡å°è£…éšè—å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚ï¼Œé€šè¿‡ç»§æ‰¿å®ç°ç±»çš„ç‰¹åŒ–å’Œæ³›åŒ–ï¼Œé€šè¿‡å¤šæ€å®ç°åŸºäºå¯¹è±¡ç±»å‹çš„åŠ¨æ€åˆ†æ´¾ã€‚ å¯¹è±¡ï¼ˆobjectï¼‰ ç±»ï¼ˆclassï¼‰ å°è£…ï¼ˆencapsulationï¼‰ ç»§æ‰¿ï¼ˆinheritanceï¼‰ å¤šæ€ï¼ˆpolymorphismï¼‰ åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œ**ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œå¯¹è±¡æ˜¯ä¸€ä¸ªå…·ä½“çš„æ¦‚å¿µã€‚**æˆ‘ä»¬æŠŠåŒä¸€ç±»å¯¹è±¡çš„å…±åŒç‰¹å¾æŠ½å‡ºæ¥å°±æ˜¯ä¸€ä¸ªç±»ã€‚æ¯”å¦‚ äººç±» å°±æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œæˆ‘ä»¬æ¯ä¸ªäººå°±æ˜¯äººç±»çš„è¿™ä¸ªæŠ½è±¡æ¦‚å¿µä¸‹çš„å®å®åœ¨åœ¨çš„å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç±»æ˜¯å¯¹è±¡çš„è“å›¾å’Œæ¨¡æ¿ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ï¼Œæ˜¯å¯ä»¥æ¥æ”¶æ¶ˆæ¯çš„å®ä½“ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:1:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç±»å±æ€§å’Œç±»æ–¹æ³• æœ¯è¯­â€“å®ä¾‹ 1.ä½¿ç”¨é¢å‘å¯¹è±¡å¼€å‘ï¼Œ å…ˆè®¾è®¡ç±» 2.ä½¿ç”¨ **ç±»å()**åˆ›å»ºå¯¹è±¡ï¼Œåˆ›å»ºå¯¹è±¡ çš„åŠ¨ä½œæœ‰ä¸¤æ­¥ â€‹ 1.åœ¨å†…å­˜ç©ºé—´ä¸­ä¸ºå¯¹è±¡ åˆ†é…ç©ºé—´ 2. è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•`__init__`ä¸ºå¯¹è±¡åˆå§‹åŒ– 3.å¯¹è±¡åˆ›å»ºåï¼Œ å†…å­˜ä¸­å°±æœ‰äº†ä¸€ä¸ªå¯¹è±¡ çš„å®å®åœ¨åœ¨ çš„å­˜åœ¨ â€“ å®ä¾‹ å› æ­¤ï¼Œé€šå¸¸ä¹Ÿä¼šæŠŠï¼š åˆ›å»ºå‡ºæ¥çš„ å¯¹è±¡ å«åš ç±»çš„å®ä¾‹ åˆ›å»ºå¯¹è±¡çš„ åŠ¨ä½œ å«åš å®ä¾‹åŒ– å¯¹è±¡çš„å±æ€§ å«åš å®ä¾‹å±æ€§ å¯¹è±¡è°ƒç”¨çš„æ–¹æ³• å«åš å®ä¾‹æ–¹æ³• åœ¨ç¨‹åºæ‰§è¡Œæ—¶ï¼š 1.å¯¹è±¡å„è‡ªæ‹¥æœ‰è‡ªå·±çš„ å®ä¾‹å±æ€§ 2.è°ƒç”¨å¯¹è±¡æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡self. è®¿é—®è‡ªå·±çš„å±æ€§ è°ƒç”¨è‡ªå·±çš„æ–¹æ³• ç»“è®º æ¯ä¸€ä¸ªå¯¹è±¡ éƒ½æœ‰è‡ªå·± ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œä¿å­˜å„è‡ªä¸åŒçš„å±æ€§ å¤šä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œåœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œéœ€è¦æŠŠå¯¹è±¡çš„å¼•ç”¨ ä¼ é€’åˆ°æ–¹æ³•å†…éƒ¨ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:2:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ pythonä¸­ ä¸€åˆ‡çš†å¯¹è±¡ class AAA: å®šä¹‰çš„ç±»å±äº ç±»å¯¹è±¡ obj1 = AAA()å±äº å®ä¾‹å¯¹è±¡ åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œ ç±» åŒæ · ä¼šè¢«åŠ è½½åˆ°å†…å­˜ åœ¨ pythonä¸­ï¼Œ ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ â€“ ç±»å¯¹è±¡ åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œ ç±»å¯¹è±¡ åœ¨å†…å­˜ä¸­ åªæœ‰ä¸€ä»½ï¼Œ ä½¿ç”¨ ä¸€ä¸ªç±» å¯ä»¥åˆ›å»ºå‡º å¾ˆå¤šä¸ªå¯¹è±¡å®ä¾‹ é™¤äº†å°è£… å®ä¾‹çš„ å±æ€§ å’Œæ–¹æ³•å¤–ï¼Œç±»å¯¹è±¡ å“ˆå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ å±æ€§å’Œæ–¹æ³• ç±»å±æ€§ ç±»æ–¹æ³• é€šè¿‡ ç±»å.çš„æ–¹å¼ å¯ä»¥è®¿é—®ç±»çš„å±æ€§ æˆ–è€… è°ƒç”¨ç±»çš„æ–¹æ³• ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:2:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å®šä¹‰ç±» åœ¨pythonä¸­ï¼Œç”¨classå…³é”®å­—åŠ ä¸Šç±»åæ¥å®šä¹‰ç±»ï¼Œé€šè¿‡ç¼©è¿›ç¡®å®šç±»çš„ä»£ç å—ã€‚ç±»çš„ä»£ç å—ä¸­å†™å‡½æ•°ï¼Œè¿™äº›å‡½æ•°æ˜¯å¯¹ä¸€ç±»å¯¹è±¡å…±åŒçš„åŠ¨æ€ç‰¹å¾çš„æå–ã€‚å†™åœ¨ç±»é‡Œé¢çš„å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ–¹æ³•ã€‚æ–¹æ³•æ˜¯å¯¹è±¡çš„è¡Œä¸ºï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡å¯ä»¥æ¥æ”¶çš„æ¶ˆæ¯ã€‚æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯selfï¼Œå®ƒä»£è¡¨æ¥æ”¶è¿™ä¸ªæ¶ˆæ¯çš„å¯¹è±¡æœ¬èº«ã€‚ \"\"\" ç±»åé¦–å­—æ¯è¦å¤§å†™ï¼ŒStudentç±»ä¸­å®šä¹‰äº† study å’Œ play ä¸¤ä¸ªæ–¹æ³•ã€‚ ä¸¤ä¸ªæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°`self`ä»£è¡¨æ¥æ”¶æ¶ˆæ¯çš„å­¦ç”Ÿå¯¹è±¡ï¼Œ`study`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å­¦ä¹ çš„è¯¾ç¨‹åç§°ã€‚ \"\"\" class Student: def study(self, course_name): print(f'å­¦ç”Ÿæ­£åœ¨å­¦ä¹ {course_name}.') def play(self): print(f'å­¦ç”Ÿæ­£åœ¨ç©æ¸¸æˆ.') ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:3:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ›å»ºå’Œä½¿ç”¨å¯¹è±¡ # å½“å‰çš„stu1 æ˜¯Studentè¿™ä¸ªç±»çš„å¯¹è±¡ æ˜¯ä¸€ä¸ªå…·ä½“çš„å®ä¾‹ stu1 = Student() stu2 = Student() # å½“å‰è¾“å‡ºçš„å€¼ä¸ºè¿™ä¸ªå…·ä½“å®ä¾‹åœ¨å†…å­˜ä¸­çš„åœ°å€ åå…­è¿›åˆ¶çš„å€¼ print(stu1) # \u003c__main__.Student object at 0x7f4c9b62af70\u003e print(stu2) # \u003c__main__.Student object at 0x7f4c9b5ffb50\u003e print(hex(id(stu1)), hex(id(stu2))) # 0x7f4c9b62af70 0x7f4c9b5ffb50 å®šä¹‰å˜é‡å…¶å®æ˜¯ä¿å­˜ ä¸€ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼ˆåå…­è¿›åˆ¶å½¢å¼ï¼‰ï¼Œå’Œç”¨idå‡½æ•°æŸ¥çœ‹çš„å€¼æ˜¯ç›¸åŒçš„ã€‚ é€šè¿‡è¿™ä¸ªé€»è¾‘åœ°å€ï¼Œå°±èƒ½åœ¨å†…å­˜ä¸­æ‰¾åˆ°è¿™ä¸ªå¯¹è±¡ã€‚ å¸¸è§æŠ¥é”™ï¼Œç±»æ²¡æœ‰å®ä¾‹åŒ–ã€‚ Student.study('python') # TypeError: study() missing 1 required positional argument: 'course_name' æ­£ç¡®å†™æ³•ï¼Œåœ¨è°ƒç”¨ç±»ä¸­æ–¹æ³•æ—¶å…ˆ è¿›è¡Œç±»çš„å®ä¾‹åŒ–ã€‚ç±»åååŠ å°æ‹¬å·å°±æ˜¯ç±»çš„å®ä¾‹åŒ–ã€‚ Student().study('java') # å­¦ç”Ÿæ­£åœ¨å­¦ä¹ java. ä¹Ÿå¯ä»¥å°†ç±»å®ä¾‹åŒ–åèµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œåƒstu1 = Student()ã€‚åé¢è°ƒç”¨ç±»ä¸­çš„æ–¹æ³•æ—¶å°±å¯ä»¥ç”¨å˜é‡å.æ–¹æ³•åæ¥è°ƒç”¨æ–¹æ³•ã€‚ä¾‹å¦‚stu1.play()ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:3:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"åˆå§‹åŒ–æ–¹æ³• ä¸Šé¢åˆ›å»ºçš„å¯¹è±¡åªæœ‰è¡Œä¸ºæ²¡æœ‰å±æ€§ï¼Œä½¿ç”¨__init__æ–¹æ³•æ¥åˆå§‹åŒ–å±æ€§ã€‚ ä¿®æ”¹Studentç±»ï¼Œç»™å­¦ç”Ÿå¯¹è±¡æ·»åŠ nameï¼ˆå§“åï¼‰å’Œageï¼ˆå¹´é¾„ï¼‰ä¸¤ä¸ªå±æ€§ã€‚ class Student: \"\"\"åˆå§‹åŒ–æ–¹æ³• ç»™å½“å‰å¯¹è±¡åˆ›å»ºå±æ€§\"\"\" def __init__(self,name, age): # ç»™å½“å‰ç±»æ·»åŠ å±æ€§ self.name = name self.age = age def study(self, course_name): # å±æ€§ä½¿ç”¨self è¿›è¡Œè°ƒç”¨ å‚æ•°æ˜¯ç›´æ¥è°ƒç”¨ print(f'{self.name}æ­£åœ¨å­¦ä¹ {course_name}.') def play(self): \"\"\"ç©è€\"\"\" print(f'{self.name}æ­£åœ¨ç©æ¸¸æˆ.') ç”±äºåˆå§‹åŒ–æ–¹æ³•é™¤äº†selfä¹‹å¤–è¿˜æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæ‰€ä»¥è°ƒç”¨Student ç±»çš„æ„é€ å™¨åˆ›å»ºçš„å¯¹è±¡æ—¶è¦ä¼ å…¥è¿™ä¸¤ä¸ªå‚æ•°ã€‚ stu1 = Student('john', 20) stu1.study('python') # johnæ­£åœ¨å­¦ä¹ python. stu2 = Student('smith', 30) stu2.play() # smithæ­£åœ¨ç©æ¸¸æˆ. ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:4:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"æ‰“å°å¯¹è±¡ åœ¨pythonä¸­ï¼Œä»¥ä¸¤ä¸ªä¸‹åˆ’çº¿__ã€å¼€å¤´å’Œç»“å°¾çš„æ–¹æ³•é€šå¸¸éƒ½æ˜¯æœ‰ç‰¹æ®Šç”¨é€”å’Œæ„ä¹‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸º é­”æœ¯æ–¹æ³•æˆ–é­”æ³•æ–¹æ³•ã€‚ å¦‚æœæˆ‘ä»¬åœ¨æ‰“å°å¯¹è±¡æ—¶å€™ä¸å¸Œæœ›çœ‹åˆ°å¯¹è±¡çš„åœ°å€äºŒåçœ‹åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡åœ¨ç±»ä¸­ä½¿ç”¨__repr__é­”æœ¯æ–¹æ³•æ¥åšåˆ°ã€‚è¯¥æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²å°±æ˜¯ç”¨printå‡½æ•°æ‰“å°å¯¹è±¡çš„æ—¶å€™ä¼šæ˜¾ç¤ºçš„å†…å®¹ã€‚ # ä½¿ç”¨ç±»ä¸­å†…ç½®é­”æœ¯æ–¹æ³•æ¥å®ç° def __repr__(self): return f'{self.name}: {self.age}' # ç±»å®ä¾‹åŒ– stu1 = Student('john', 20) # æ‰“å°å½“å‰å¯¹è±¡ print(stu1) # john: 20 ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:5:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"é¢å‘å¯¹è±¡çš„æ”¯æŸ± å°è£…ï¼š éšè—ä¸€åˆ‡å¯ä»¥éšè—çš„å®ç°ç»†èŠ‚ï¼Œåªå‘å¤–ç•Œæš´éœ²ç®€å•çš„è°ƒç”¨æ¥å£ã€‚ åœ¨ç±»å‹ä¸­å®šä¹‰çš„å¯¹è±¡å…¶å®æ˜¯ä¸€ç§å°è£…ã€‚åœ¨åˆ›å»ºå¯¹è±¡åï¼Œåªéœ€è¦ç»™å¯¹è±¡å‘é€ä¸€ä¸ªæ¶ˆæ¯å°±å¯ä»¥æ‰§è¡Œæ–¹æ³•ä¸­çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨åªçŸ¥é“æ–¹æ³•åå­—å’Œå‚æ•°ï¼ˆæ–¹æ³•å¤–éƒ¨è§†å›¾ï¼‰ï¼Œä¸çŸ¥é“æ–¹æ³•å†…éƒ¨å®ç°ç»†èŠ‚ï¼ˆæ–¹æ³•å†…éƒ¨è§†å›¾ï¼‰çš„æƒ…å†µä¸‹å°±å®Œæˆäº†å¯¹æ–¹æ³•çš„ä½¿ç”¨ã€‚ æ ¹æ® èŒè´£å°†å±æ€§å’Œæ–¹æ³•å°è£…åˆ°ä¸€ä¸ªæŠ½è±¡çš„ç±»ä¸­ ç»§æ‰¿ï¼šå®ç°ä»£ç çš„é‡ç”¨ï¼Œç›¸åŒçš„ä»£ç ä¸éœ€è¦é‡å¤ç¼–å†™ å¤šæ€ï¼šä¸åŒçš„å¯¹è±¡è°ƒç”¨ç›¸åŒçš„æ–¹æ³•ï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœï¼Œå¢åŠ ä»£ç çš„çµæ´»åº¦ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:6:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç»§æ‰¿ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å•ç»§æ‰¿ ç»§æ‰¿çš„æ¦‚å¿µï¼š å­ç±» æ‹¥æœ‰ çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§ æ¡ˆä¾‹1ï¼šä¸ä½¿ç”¨ç»§æ‰¿åˆ›å»ºä¸¤ä¸ªç±»åŠ¨ç‰©ç±»å’Œç‹—ç±» \"\"\" å¼€å‘ä¸¤ä¸ªç±» åŠ¨ç‰©ç±» ç‹—ç±» åŠ¨ç‰©ç±»å…·æœ‰å››ä¸ªç‰¹æ€§ åƒ å– è·‘ ç¡ ç‹—çš„ç‰¹æ€§ åƒ å– è·‘ ç¡ æ±ªæ±ªå« \"\"\" class Animal: def eat(self): print('åƒ') def drink(self): print('å–') def run(self): print('è·‘') def sleep(self): print('ç¡') class Dog: def eat(self): print('åƒ') def drink(self): print('å–') def run(self): print('è·‘') def sleep(self): print('ç¡') def bark(self): print('æ±ªæ±ªå«') laoha = Dog() laoha.eat() laoha.drink() laoha.run() laoha.sleep() laoha.bark() \"\"\" å½“å‰åŠ¨ç‰©ç±»å’Œç‹—ç±»çš„å››ä¸ªæ–¹æ³•å·²ç»é‡å¤äº† å¦‚ä½•è§£å†³è¿™æ ·çš„æƒ…å†µ ç»§æ‰¿ \"\"\" ä½¿ç”¨ç»§æ‰¿ç‰¹æ€§è¾ƒå°‘é‡å¤ä»£ç ã€‚ class Animal: def eat(self): print('åƒ') def drink(self): print('å–') def run(self): print('è·‘') def sleep(self): print('ç¡') class Dog(Animal): def bark(self): print('æ±ªæ±ªå«') # ç±»å®ä¾‹åŒ– laoha = Dog() # è°ƒç”¨ç±»ä¸­æ–¹æ³• laoha.eat() laoha.drink() laoha.run() laoha.sleep() laoha.bark() ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç»§æ‰¿è¯­æ³• class ç±»å(çˆ¶ç±»å): pass å­ç±» ç»§æ‰¿è‡ª çˆ¶ç±»ï¼Œå¯ä»¥ç›´æ¥äº«å— çˆ¶ç±»ä¸­ å·²ç»å°è£…å¥½çš„æ–¹æ³•ï¼Œä¸éœ€è¦å†æ¬¡å¼€å‘ã€‚ å­ç±» ä¸­åº”è¯¥æ ¹æ® èŒè´£ï¼Œå°è£… å­ç±»ç‰¹æœ‰çš„å±æ€§å’Œæ–¹æ³• ä¸“ä¸šæœ¯è¯­ Dog ç±»æ˜¯Animalç±»çš„å­é›†ï¼ŒAnimalç±»æ˜¯Dogç±»çš„çˆ¶ç±»ï¼ŒDogç±»ä» Animalç±»ç»§æ‰¿ Dogç±»æ˜¯ Animalç±»çš„æ´¾ç”Ÿç±»ï¼ŒAnimalç±»æ˜¯Dogç±»çš„åŸºç±»ï¼ŒDogç±»ä» Animalç±»æ´¾ç”Ÿ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç»§æ‰¿çš„ä¼ é€’æ€§ Cç±»ä»Bç±»ç»§æ‰¿ï¼ŒBç±»åˆä»Aç±»ç»§æ‰¿ é‚£ä¹ˆCç±»å°±å…·æœ‰Bç±»å’ŒAç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³• å­ç±» æ‹¥æœ‰ çˆ¶ç±» ä»¥åŠ çˆ¶ç±»çš„çˆ¶ç±» ä¸­å°è£…çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ åº”ç”¨åœºæ™¯ å½“ çˆ¶ç±» çš„æ–¹æ³•å®ç°ä¸èƒ½æ»¡è¶³å­ç±»éœ€æ±‚æ—¶ï¼Œå¯ä»¥å¯¹æ–¹æ³•è¿›è¡Œé‡å†™ã€‚ Dogæ˜¯XiaoTianQuançš„çˆ¶ç±»ï¼Œ Animalåˆæ˜¯Dogçš„çˆ¶ç±»ã€‚ æ‰€ä»¥XiaoTianQuanå¯ä»¥ç»§æ‰¿Dogå’ŒAnimalä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ã€‚ class Animal: def eat(self): print('åƒ') def drink(self): print('å–') def run(self): print('è·‘') def sleep(self): print('ç¡') class Dog(Animal): def bark(self): print('æ±ªæ±ªå«') class XiaoTianQuan(Dog): def fly(self): print(\"é£\") # ç±»å®ä¾‹åŒ– wangwang = XiaoTianQuan() # å¯ä»¥è°ƒç”¨è‡ªèº«å®šä¹‰çš„æ–¹æ³• wangwang.fly() # ä¹Ÿå¯ä»¥è°ƒç”¨çˆ¶ç±»ä»¥åŠçˆ¶çˆ¶ç±»çš„æ–¹æ³• wangwang.bark() wangwang.run() ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:3","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"æ–¹æ³•çš„é‡å†™ å­ç±» æ‹¥æœ‰ çˆ¶ç±»çš„ æ‰€æœ‰æ–¹æ³• å’Œå±æ€§ å­ç±» ç»§æ‰¿è‡ª çˆ¶ç±»ï¼Œå¯ä»¥ç›´æ¥ äº«å— çˆ¶ç±»ä¸­å·²ç»å°è£…å¥½çš„æ–¹æ³•ï¼Œ ä¸éœ€è¦å†æ¬¡å¼€å‘ã€‚ é‡å†™ çˆ¶ç±»æ–¹æ³•æœ‰ä¸¤ç§æƒ…å†µï¼š 1.è¦†ç›– çˆ¶ç±»çš„æ–¹æ³• å¦‚ä½•åœ¨å¼€å‘ä¸­ï¼Œ çˆ¶ç±»çš„æ–¹æ³•å®ç° å’Œ å­ç±»çš„æ–¹æ³•å®ç°ï¼Œå®Œå…¨ä¸åŒã€‚ å°±å¯ä»¥ä½¿ç”¨ è¦†ç›– çš„æ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­ é‡æ–°ç¼–å†™ çˆ¶ç±»çš„æ–¹æ³•å®ç° å…·ä½“çš„å®ç°æ–¹å¼ï¼Œå°±ç›¸å½“äºåœ¨ å­ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ª å’Œçˆ¶ç±»åŒåçš„æ–¹æ³•å¹¶ä¸”å®ç°ã€‚ class Animal: def eat(self): print('åƒ') def drink(self): print('å–') def run(self): print('è·‘') def sleep(self): print('ç¡') class Dog(Animal): def bark(self): print('æ±ªæ±ªå«') class XiaoTianQuan(Dog): def fly(self): print(\"é£\") # barkæ–¹æ³•çš„é‡å†™ï¼Œè§„åˆ™ï¼šå’Œç»§æ‰¿çš„æ–¹æ³•åç§°ä¸€æ ·ã€‚ def bark(self): print(\"å«çš„å’Œç¥ä¸€æ ·....\") wangwang = XiaoTianQuan() wangwang.bark() # å«çš„å’Œç¥ä¸€æ ·.... \"\"\" å“®å¤©çŠ¬æ˜¯ç¥çŠ¬å’Œæ™®é€šç‹—å«å£°ä¸ä¸€æ ·, XiaoTianQuan ç±»ä¸­å®šä¹‰è‡ªå·±çš„æ–¹æ³•ï¼Œç”±äºç»§æ‰¿äº†çˆ¶ç±»ï¼ˆDogï¼‰ç±»çš„bark æ–¹æ³•ã€‚è¿™é‡Œ è¦†ç›–çˆ¶ç±»çš„barkæ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªå’Œçˆ¶ç±»åŒåçš„æ–¹æ³•ã€‚æ¥åŒºåˆ†ç¥çŠ¬çš„å«å£°ã€‚ \"\"\" å°ç»“ï¼š åœ¨å­ç±»ä¸­é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•åï¼Œåœ¨è¿›è¡Œæ–¹æ³•è°ƒç”¨æ—¶ä¼šæ‰§è¡Œå­ç±»ä¸­é‡å†™çš„æ–¹æ³•ã€‚ 2.å¯¹çˆ¶ç±»æ–¹æ³•è¿›è¡Œæ‰©å±• å¦‚æœåœ¨å¼€å‘ä¸­ï¼Œ å­ç±»çš„æ–¹æ³•å®ç°ä¸­ åŒ…å« çˆ¶ç±»çš„æ–¹æ³•å®ç° çˆ¶ç±»åŸæœ¬å°è£…çš„æ–¹æ³•å®ç° æ˜¯ å­ç±»æ–¹æ³•çš„ä¸€éƒ¨åˆ† å°±å¯ä»¥ä½¿ç”¨ æ‰©å±• çš„æ–¹å¼ 1.åœ¨å­ç±»ä¸­ é‡å†™ çˆ¶ç±»çš„æ–¹æ³• 2.åœ¨éœ€è¦çš„ä½ç½®ä½¿ç”¨super().çˆ¶ç±»æ–¹æ³•æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•çš„æ‰§è¡Œ 3.ä»£ç å…¶ä»–çš„ä½ç½®é’ˆå¯¹å­ç±»çš„éœ€æ±‚ï¼Œç¼–å†™ å­ç±»ç‰¹æœ‰çš„ä»£ç å®ç° å…³äº super åœ¨pythonä¸­superæ˜¯ä¸€ä¸ª ç‰¹æ®Šçš„ç±» super()å°±æ˜¯ä½¿ç”¨superç±»åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ æœ€å¸¸ ä½¿ç”¨çš„åœºæ™¯æ˜¯ åœ¨é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œè°ƒç”¨ åœ¨çˆ¶ç±»ä¸­å°è£…çš„æ–¹æ³•å®ç°ã€‚ class Animal: def eat(self): print('åƒ') def drink(self): print('å–') def run(self): print('è·‘') def sleep(self): print('ç¡') class Dog(Animal): def bark(self): print('æ±ªæ±ªå«') class XiaoTianQuan(Dog): def fly(self): print(\"é£\") def bark(self): # åœ¨å½“å‰æ–¹æ³•ä¸­å»è°ƒç”¨çˆ¶ç±»æ–¹æ³• # ä½¿ç”¨superæ–¹æ³• print(\"å«çš„å’Œç¥ä¸€æ ·....\") # super() ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ super().bark() # å½“å‰çš„å­ç±»æ–¹æ³•è¿›è¡Œæ‰©å±• print('è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•...') wangwang = XiaoTianQuan() wangwang.bark() # å«çš„å’Œç¥ä¸€æ ·.... # æ±ªæ±ªå« # è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•... \"\"\" XiaoTianQuanç±»ä¸ä»…è¦è°ƒç”¨è‡ªèº«çš„barkæ–¹æ³•ï¼Œä¹Ÿè¦è°ƒç”¨å®ƒæ‰€ç»§æ‰¿çˆ¶ç±»ï¼ˆDogï¼‰çš„barkæ–¹æ³•ã€‚ ä½¿ç”¨super().æ–¹æ³• æ¥å®ç° \"\"\" è°ƒç”¨çˆ¶ç±»æ–¹æ³•çš„å¦å¤–ä¸€ç§æ–¹å¼ åœ¨ python2.x ä¸­ï¼Œå¦‚æœéœ€è¦è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š çˆ¶ç±»å.æ–¹æ³•(self) è¿™ç§æ–¹å¼ï¼Œç›®å‰åœ¨python 3.xè¿˜æ”¯æŒè¿™ç§æ–¹å¼ è¿™ç§æ–¹å¼ ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºä¸€æ—¦ çˆ¶ç±»å‘ç”Ÿå˜åŒ–ï¼Œæ–¹æ³•è°ƒç”¨ä½ç½®çš„ ç±»å åŒæ ·éœ€è¦ä¿®æ”¹ æç¤º åœ¨å¼€å‘ä¸­ï¼Œçˆ¶ç±»åå’Œsuper()ä¸¤ç§æ–¹å¼ä¸è¦æ··ç”¨ å¦‚æœä½¿ç”¨ å½“å‰å­ç±»å è°ƒç”¨æ–¹æ³•ï¼Œä¼šå½¢æˆé€’å½’è°ƒç”¨ï¼Œå‡ºç°æ­»å¾ªç¯ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:4","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"çˆ¶ç±»çš„ ç§æœ‰å±æ€§ å’Œç§æœ‰æ–¹æ³• 1.å­ç±»å¯¹è±¡ ä¸èƒ½åœ¨è‡ªå·±çš„æ–¹æ³•å†…éƒ¨ï¼Œç›´æ¥è®¿é—®çˆ¶ç±»çš„ ç§æœ‰å±æ€§æˆ–ç§æœ‰æ–¹æ³• 2.å­ç±»å¯¹è±¡ å¯ä»¥é€šè¿‡ çˆ¶ç±»çš„å…¬æœ‰æ–¹æ³•é—´æ¥è®¿é—®åˆ° ç§æœ‰å±æ€§æˆ–ç§æœ‰æ–¹æ³• ç§æœ‰å±æ€§ã€æ–¹æ³•æ˜¯å¯¹è±¡çš„éšç§ï¼Œä¸å¯¹å¤–å…¬å¼€ï¼Œå¤–ç•Œä»¥åŠå­ç±»éƒ½ä¸èƒ½ç›´æ¥è®¿é—®ã€‚ ç¤ºä¾‹ ä»£ç ç†è§£çˆ¶ç±»çš„ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³• class A: # åˆ›å»ºç±»å±æ€§ def __init__(self): # å…¬å…±å±æ€§ self.num_1 = 100 # ç§æœ‰å±æ€§ self.__num_2 = 200 # åˆ›å»ºç§æœ‰æ–¹æ³• def __test(self): print(f'ç§æœ‰å±æ€§ä¸å…¬å…±å±æ€§çš„å€¼ï¼š{self.num_1}, {self.__num_2}') class B(A): def demo(self): # çˆ¶ç±»æ–¹æ³• super().__test() \"\"\" B å…·æœ‰çˆ¶ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³• å¦‚æœæ˜¯ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•çš„æƒ…å†µä¸‹ ä¸å¯ä»¥ç›´æ¥å»ä½¿ç”¨ã€‚ \"\"\" b = B() # ä½¿ç”¨å­ç±»å»æ‰“å°çˆ¶ç±»çš„å…¬å…±å±æ€§ print(b.num_1) # æ‰“å°çˆ¶ç±»ä¸­çš„ç§æœ‰å±æ€§ æˆ‘ä»¬ä¸å¯ä»¥ç›´æ¥æ‰“å°å¼—è±çš„ç§æœ‰å±æ€§ print(b.__num_2) # AttributeError: 'B' object has no attribute '__num_2' # è°ƒç”¨çˆ¶ç±»ä¸­çš„ç§æœ‰æ–¹æ³• ä¸å…è®¸å­ç±»ç›´æ¥å»è°ƒç”¨çˆ¶ç±»çš„ç§æœ‰æ–¹æ³• b.demo() # AttributeError: 'super' object has no attribute '_B__test' å­ç±»è®¿é—®çˆ¶ç±»çš„ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³• class A: def __init__(self): self.num_1 = 100 self.__num_2 = 200 # åˆ›å»ºç§æœ‰æ–¹æ³• def __test(self): print(f'ç§æœ‰å±æ€§ä¸å…¬å…±å±æ€§çš„å€¼ï¼š{self.num_1}, {self.__num_2}') # åˆ›å»ºå…¬æœ‰æ–¹æ³• def test(self): print(f'çˆ¶ç±»ä¸­çš„å…¬å…±æ–¹æ³•è¾“å‡ºç§æœ‰å±æ€§: {self.__num_2}') # åœ¨å…¬æœ‰æ–¹æ³•ä¸­è°ƒç”¨ç§æœ‰æ–¹æ³• self.__test() class B(A): # å…¬æœ‰æ–¹æ³• def demo(self): # 1. åœ¨å­ç±»æ–¹æ³•ä¸­è®¿é—®çˆ¶ç±»çš„å…¬å…±å±æ€§ print(f'å­ç±»æ–¹æ³•è¾“å‡ºçˆ¶ç±»ä¸­çš„å…¬æœ‰å±æ€§:{self.num_1}') # 2. åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„å…¬æœ‰æ–¹æ³•è¾“å‡ºç§æœ‰å±æ€§ self.test() b = B() b.demo() \"\"\" å­ç±»æ–¹æ³•è¾“å‡ºçˆ¶ç±»ä¸­çš„å…¬æœ‰å±æ€§:100 çˆ¶ç±»ä¸­çš„å…¬å…±æ–¹æ³•è¾“å‡ºç§æœ‰å±æ€§: 200 ç§æœ‰å±æ€§ä¸å…¬å…±å±æ€§çš„å€¼ï¼š100, 200 \"\"\" ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:5","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¤šç»§æ‰¿ æ¦‚å¿µ å­ç±» å¯ä»¥æ‹¥æœ‰ å¤šä¸ªçˆ¶ç±»ï¼Œå¹¶ä¸”å…·æœ‰ æ‰€æœ‰çˆ¶ç±»çš„å±æ€§ å’Œæ–¹æ³• ä¾‹å¦‚ï¼š å­©å­ ä¼šç»§æ‰¿è‡ªå·± çˆ¶äº²å’Œæ¯äº²çš„ç‰¹æ€§ è¯­æ³• class å­ç±»å(çˆ¶ç±»å1, çˆ¶ç±»å2...): pass ä¸¾ä¾‹ class A: def test(self): print(\"test æ–¹æ³•\") class B: def demo(self): print(\"demo æ–¹æ³•\") class C(A, B): pass # åˆ›å»ºCç±»å¯¹è±¡ c = C() c.test() c.demo() \"\"\" åœ¨pythonä¸­ é¢å‘å¯¹è±¡æ˜¯æ”¯æŒå¤šä¸ªç±»è¿›è¡Œç»§æ‰¿çš„ å­ç±»åŒæ—¶å…·æœ‰çˆ¶ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•å’Œæ‰€æœ‰å±æ€§ \"\"\" ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:6","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¤šç»§æ‰¿çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹ å¦‚æœ ä¸åŒçš„çˆ¶ç±» ä¸­å­˜åœ¨ åŒåçš„æ–¹æ³•ï¼Œå­ç±»å¯¹è±¡ åœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨ å“ªä¸€ä¸ªçˆ¶ç±»ä¸­çš„æ–¹æ³•å‘¢ï¼Ÿ æç¤ºï¼šå¼€å‘æ—¶ï¼Œåº”è¯¥å°½é‡é¿å…è¿™ç§å®¹æ˜“äº§ç”Ÿæ··æ·†çš„æƒ…å†µï¼ â€”â€” å¦‚æœ çˆ¶ç±»ä¹‹é—´å­˜åœ¨åŒåçš„å±æ€§æˆ–è€…æ–¹æ³•ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨å¤šç»§æ‰¿ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:7","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"python ä¸­çš„MROâ€”â€”æ–¹æ³•æœç´¢é¡ºåº pythonä¸­é’ˆå¯¹ ç±» æä¾›äº†ä¸€ä¸ª å†…ç½®å±æ€§ __mro__å¯ä»¥æŸ¥çœ‹ æ–¹æ³• æœç´¢é¡ºåº MORæ˜¯ method resolution order,ä¸»è¦ç”¨äº åœ¨å¤šç»§æ‰¿æ—¶åˆ¤æ–­æ–¹æ³•ã€å±æ€§çš„è°ƒç”¨è·¯å¾„ print(C.__mro__) è¾“å‡ºç»“æœ (\u003cclass '__main__.C'\u003e, \u003cclass '__main__.A'\u003e, \u003cclass '__main__.B'\u003e, \u003cclass 'object'\u003e) åœ¨æœç´¢æ–¹æ³•æ—¶ï¼Œæ˜¯æŒ‰ç…§__mro__çš„è¾“å‡ºç»“æœ ä»å·¦åˆ°å³çš„é¡ºåºæŸ¥æ‰¾çš„ å¦‚æœåœ¨å½“å‰ç±»ä¸­æ‰¾åˆ°æ–¹æ³•ï¼Œå°±ç›´æ¥æ‰§è¡Œï¼Œä¸å†æœç´¢ã€‚ å¦‚æœ æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æŸ¥æ‰¾ä¸‹ä¸€ä¸ªç±» ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„æ–¹æ³•ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå°±ç›´æ¥æ‰§è¡Œï¼Œä¸å†æœç´¢ã€‚ å¦‚æœæ‰¾åˆ°æœ€åä¸€ä¸ªç±»ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°æ–¹æ³•ï¼Œç¨‹åºæŠ¥é”™ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:8","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"æ–°å¼ç±»å’Œæ—§å¼ç±»ï¼ˆç»å…¸ç±»ï¼‰ objectæ˜¯pythonä¸ºæ‰€æœ‰å¯¹è±¡æä¾›çš„ åŸºç±»ï¼Œæä¾›æœ‰ä¸€äº›å†…ç½®çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨dirå‡½æ•°æŸ¥çœ‹ã€‚ æ–°å¼ç±»ï¼š ä»¥objectä¸ºåŸºç±»ï¼Œæ¨èä½¿ç”¨ ç»å…¸ç±»ï¼š ä¸ä»¥objectä¸ºåŸºç±»ï¼Œä¸æ¨èä½¿ç”¨ åœ¨python 3.xä¸­å®šä¹‰ç±»æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçˆ¶ç±»ï¼Œä¼šé»˜è®¤ä½¿ç”¨objectä½œä¸ºè¯¥ç±»çš„ åŸºç±»â€”â€”python3.xä¸­å®šä¹‰çš„ç±»éƒ½æ˜¯ æ–°å¼ç±» åœ¨python 2.xä¸­å®šä¹‰ç±»æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçˆ¶ç±»ï¼Œä¸ä¼šä»¥objectä½œä¸ºåŸºç±»ã€‚ æ–°å¼ç±» å’Œ ç»å…¸ç±» åœ¨å¤šç»§æ‰¿æ—¶â€”ä¼šå½±å“åˆ°æ–¹æ³•çš„æœç´¢é¡ºåº ä¸ºäº†ä¿è¯ç¼–å†™çš„ä»£ç èƒ½å¤ŸåŒæ—¶åœ¨Python2.xå’ŒPython3.xè¿è¡Œï¼ä»Šååœ¨å®šä¹‰ç±»æ—¶ï¼Œå¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼Œå»ºè®®ç»Ÿä¸€ç»§æ‰¿è‡ªobjectã€‚ åœ¨python3ä¸­å¦‚æœä¸æŒ‡å®šç»§æ‰¿å…³ç³»é‚£ä¹ˆé»˜è®¤ç»§æ‰¿objectã€‚ class A(object): pass dir(A) ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__'] ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:7:9","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¯è§æ€§å’Œå±æ€§çš„è£…é¥°å™¨ å¯¹è±¡çš„æ–¹æ³•é€šå¸¸æ˜¯å…¬å¼€ï¼ˆpublicï¼‰çš„ï¼Œå› ä¸ºå…¬å¼€çš„æ–¹æ³•æ˜¯å¯¹è±¡èƒ½å¤Ÿæ¥æ”¶çš„æ¶ˆæ¯ï¼Œä¹Ÿæ˜¯å¯¹è±¡æš´éœ²ç»™å¤–ç•Œçš„è°ƒç”¨æ¥å£ã€‚å¯ä»¥ç”¨__nameè¡¨ç¤ºä¸€ä¸ªç§æœ‰å±æ€§ï¼Œ_nameè¡¨ç¤ºä¸€ä¸ªå—ä¿æŠ¤å±æ€§ã€‚ class Student: # è®¾ç½®ä¸¤ä¸ªç§æœ‰å±æ€§ name å’Œ age def __init__(self,name, age): self.__name = name self.__age = age def study(self, course_name): print(f'{self.name}æ­£åœ¨å­¦ä¹ {course_name}.') def play(self): print(f'{self.name}æ­£åœ¨ç©æ¸¸æˆ.') # ç±»å®ä¾‹åŒ–ï¼Œ __init__å‡½æ•°ä¸­å®šä¹‰äº†2ä¸ªå‚æ•°ï¼Œè¿™é‡Œè¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ã€‚ stu1 = Student(\"john\", 18) # å°è¯•è°ƒç”¨ç§æœ‰å±æ€§ nameã€‚æŠ›å‡ºå¼‚å¸¸ã€‚ stu1.study(\"python\") # AttributeError: 'Student' object has no attribute '__name' ç”±æ­¤å¯è§ï¼Œä»¥__å¼€å¤´çš„å±æ€§__nameæ˜¯ç§æœ‰çš„ï¼Œåœ¨ç±»çš„å¤–é¢æ— æ³•ç›´æ¥è®¿é—®ï¼Œä½†æ˜¯åœ¨ç±»é‡Œé¢çš„studyæ–¹æ³•ä¸­å¯ä»¥é€šè¿‡self.__nameè®¿é—®è¯¥å±æ€§ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰æ–¹æ³•åœ¨ç±»çš„å¤–é¢ä¹Ÿèƒ½è®¿é—®ç§æœ‰å±æ€§å‘¢ï¼Ÿ å¯ä»¥ï¼Œéœ€è¦æ›´æ¢åå­—è§„åˆ™ã€‚å¯¹è±¡._ç±»å__æ–¹æ³•åè¿™ç§å½¢å¼æ¥è¯»å–ç§æœ‰å±æ€§ã€‚æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„è£…é¥°å™¨æ¥å®ç°ã€‚ stu1 = Student(\"john\", 18) print(stu1._Student__name, stu1._Student__age) # john 18 ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:8:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"è£…é¥°å™¨ pythonä¸­å¯ä»¥é€šè¿‡propertyè£…é¥°å™¨ä¸ºâ€œç§æœ‰â€å±æ€§æä¾›è¯»å–å’Œä¿®æ”¹çš„æ–¹æ³•ã€‚è£…é¥°å™¨é€šå¸¸ä¼šæ”¾åœ¨ç±»ã€å‡½æ•°æˆ–æ–¹æ³•çš„å£°æ˜ä¹‹å‰ï¼Œé€šè¿‡ä¸€ä¸ª@ç¬¦å·è¡¨ç¤ºå°†è£…é¥°å™¨åº”ç”¨äºç±»ã€å‡½æ•°æˆ–æ–¹æ³•ã€‚ class Student: def __init__(self,name, age): self.__name = name self.__age = age # ç§æœ‰å±æ€§è¯»å–ï¼ˆgetteræ–¹æ³•ï¼‰- è·å–__nameå±æ€§ @property def name(self): return self.__name # ç§æœ‰å±æ€§ä¿®æ”¹å™¨ï¼ˆsetteræ–¹æ³•ï¼‰- ä¿®æ”¹__nameå±æ€§ @name.setter def name(self, name): # å¦‚æœname å‚æ•°ä¸ä¸ºç©ºå°±èµ‹å€¼ç»™å¯¹è±¡çš„__nameå±æ€§ # å¦åˆ™å°†__nameå±æ€§èµ‹å€¼ä¸º'æ— åæ°',æœ‰ä¸¤ç§å†™æ³• # self.__name = name if name else 'æ— åæ°' self.__name = name or 'æ— åæ°' # è·å–ç§æœ‰å±æ€§ @property def age(self): return self.__age def study(self, course_name): print(f'{self.name}æ­£åœ¨å­¦ä¹ {course_name}.') def play(self): print(f'{self.name}æ­£åœ¨ç©æ¸¸æˆ.') stu1 = Student('smith', 20) print(stu1.age, stu1.name) # 20 smith # ä¿®æ”¹ç§æœ‰å±æ€§nameçš„å€¼ï¼Œè®¾ç½®ä¸ºç©ºä¼šè§¦å‘ç§æœ‰å±æ€§ä¿®æ”¹å™¨@name.setterã€‚ stu1.name = '' print(stu1.name) # æ— åæ° ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:8:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"åŠ¨æ€å±æ€§ åœ¨pythonä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ã€‚pythonæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ã€‚ å¯¹è±¡çš„æ–¹æ³•æœ¬è´¨ä¸Šä¹Ÿæ˜¯å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœç»™å¯¹è±¡å‘é€ä¸€ä¸ªæ— æ³•æ¥æ”¶çš„ä¿¡æ¯ï¼Œå¼•å‘çš„å¼‚å¸¸ä»ç„¶æ˜¯AttributeErrorã€‚ class Student: def __init__(self, name, age): self.name = name self.age = age stu = Student('john', 18) # æƒ³è¦åœ¨ä¸ä¿®æ”¹å½“å‰ç±»çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»æ·»åŠ ä¸€ä¸ªsexå±æ€§ stu.sex = \"å¥³\" print(stu.name, stu.age, stu.sex) # john 18 å¥³ å¦‚æœä¸å¸Œæœ›å†ä½¿ç”¨å¯¹è±¡æ—¶åŠ¨æ€çš„ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨pythonçš„__slots__é­”æ³•æ–¹æ³•ã€‚å¯¹äºStudentç±»æ¥è¯´ï¼Œå¯ä»¥åœ¨ç±»ä¸­æŒ‡å®š__slots__ = ('name', 'age')ï¼Œè¿™æ ·Studentç±»çš„å¯¹è±¡åªèƒ½æœ‰name å’Œ age å±æ€§ã€‚å¦‚æœæƒ³åŠ¨æ€æ·»åŠ å…¶ä»–å±æ€§ä¼šå¼•å‘å¼‚å¸¸ã€‚ æ³¨æ„æ·»åŠ ä½ç½®ï¼Œè¦åœ¨__init__æ–¹æ³•ä¹‹å‰æ·»åŠ ã€‚ class Student: __slots__ = (\"name\", \"age\") def __init__(self, name, age): self.name = name self.age = age stu = Student('john', 18) # æƒ³è¦åœ¨ä¸ä¿®æ”¹å½“å‰ç±»çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»æ·»åŠ ä¸€ä¸ªå±æ€§ stu.sex = \"å¥³\" print(stu.name, stu.age, stu.sex) # AttributeError: 'Student' object has no attribute 'sex' ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:9:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"é™æ€æ–¹æ³•å’Œç±»æ–¹æ³• åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•éƒ½æ˜¯å¯¹è±¡æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éƒ½æ˜¯å¯¹è±¡å¯ä»¥æ¥æ”¶æ¶ˆæ¯ã€‚ é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•æ˜¯å‘é€ç»™ç±»å¯¹è±¡çš„æ¶ˆæ¯ã€‚ ä¸¾ä¾‹ï¼š å®šä¹‰ä¸€ä¸ªä¸‰è§’å½¢ç±»ï¼Œé€šè¿‡ä¼ å…¥ä¸‰æ¡è¾¹çš„é•¿åº¦æ¥æ„é€ ä¸‰è§’å½¢ï¼Œå¹¶æä¾›è®¡ç®—å‘¨é•¿å’Œé¢ç§¯çš„æ–¹æ³•ã€‚è®¡ç®—å‘¨é•¿å’Œé¢ç§¯è‚¯å®šæ˜¯ä¸‰è§’å½¢å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿™ä¸€ç‚¹æ¯«æ— ç–‘é—®ã€‚ä½†æ˜¯åœ¨åˆ›å»ºä¸‰è§’å½¢å¯¹è±¡æ—¶ï¼Œä¼ å…¥çš„ä¸‰æ¡è¾¹é•¿æœªå¿…èƒ½æ„é€ å‡ºä¸‰è§’å½¢ï¼Œä¸ºæ­¤æˆ‘ä»¬å¯ä»¥å…ˆå†™ä¸€ä¸ªæ–¹æ³•æ¥éªŒè¯ç»™å®šçš„ä¸‰æ¡è¾¹é•¿æ˜¯å¦å¯ä»¥æ„æˆä¸‰è§’å½¢ï¼Œè¿™ç§æ–¹æ³•å¾ˆæ˜¾ç„¶å°±ä¸æ˜¯å¯¹è±¡æ–¹æ³•ï¼Œå› ä¸ºåœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ä¸‰è§’å½¢å¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»ºå‡ºæ¥ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ç±»æ–¹æ³•è®¾è®¡ä¸ºé™æ€æ–¹æ³•æˆ–ç±»æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç±»æ–¹æ³•ä¸æ˜¯å‘é€ç»™ä¸‰è§’å½¢å¯¹è±¡çš„æ¶ˆæ¯ï¼Œè€Œæ˜¯å‘é€ç»™ä¸‰è§’å½¢ç±»çš„æ¶ˆæ¯ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ class Triangle(object): \"\"\"ä¸‰è§’å½¢ç±»\"\"\" def __init__(self, a, b, c): \"\"\"åˆå§‹åŒ–æ–¹æ³•\"\"\" self.a = a self.b = b self.c = c @staticmethod def is_valid(a,b,c): \"\"\"åˆ¤æ–­ä¸‰æ¡è¾¹é•¿èƒ½å¦æ„æˆä¸‰è§’å½¢ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\" return a + b \u003e c and b + c \u003e b # @classmethod # def is_valid(cls, a, b, c): # \"\"\"åˆ¤æ–­ä¸‰æ¡è¾¹é•¿èƒ½å¦æ„æˆä¸‰è§’å½¢ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\" # return a + b \u003e c and b + c \u003e b def perimeter(self): \"\"\"è®¡ç®—å‘¨é•¿\"\"\" return self.a + self.a + self.c def area(self): \"\"\"è®¡ç®—é¢ç§¯\"\"\" p = self.perimeter() / 2 return (p * (p - self.a) * (p - self.b) * (p - self.c)) ** 0.5 # æ­£å¸¸è°ƒç”¨ï¼Œéœ€è¦å…ˆè¿›è¡Œç±»çš„å®ä¾‹åŒ–ã€‚ triangle = Triangle(10 ,20 ,30) print(triangle.perimeter()) # 50 # è°ƒç”¨é™æ€æ–¹æ³•ä¸­å®šä¹‰çš„å±æ€§ï¼Œä¸éœ€è¦å¯¹å½“å‰ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚ç±»æ–¹æ³•ä¹Ÿä¸€æ ·ã€‚ print(Triangle.is_valid(10,20,30)) # False ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:10:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å°ç»“ åœ¨è°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œä¸éœ€è¦å¯¹å½“å‰ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»å.æ–¹æ³•ã€‚ é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•çš„åŒºåˆ« 1.é™æ€æ–¹æ³•ä¼ å…¥çš„å‚æ•°éƒ½æ˜¯æ™®é€šå‚æ•° 2.ç±»æ–¹æ³•çš„å‚æ•°ç¬¬ä¸€ä½å¿…é¡»æ˜¯cls classç®€å†™ï¼Œä»£è¡¨å½“å‰çš„æ–¹æ³•æ˜¯å±äºå½“å‰çš„ç±» é™æ€æ–¹æ³•æ˜¯ä¸å’Œå½“å‰ç±»è¿›è¡Œç»‘å®šçš„ï¼Œå¯ä»¥çœ‹æˆä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:10:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¤šæ€ é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ 1.å°è£… æ ¹æ® èŒè´£ å°†å±æ€§ å’Œ æ–¹æ³• å°è£…åˆ°ä¸€ä¸ªæŠ½è±¡çš„ç±»ä¸­ å®šä¹‰ç±»çš„å‡†åˆ™ 2.ç»§æ‰¿ å®ç°ä»£ç çš„é‡ç”¨ï¼Œç›¸åŒçš„ä»£ç ä¸éœ€è¦é‡å¤çš„ç¼–å†™ è®¾è®¡ç±»çš„æŠ€å·§ å­ç±»é’ˆå¯¹è‡ªå·±ç‰¹æœ‰çš„éœ€æ±‚ï¼Œç¼–å†™ç‰¹æœ‰çš„ä»£ç  3.å¤šæ€ ä¸åŒçš„å­ç±»å¯¹è±¡ è°ƒç”¨ç›¸åŒçš„çˆ¶ç±»æ–¹æ³•ï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœ å¤šæ€ å¯ä»¥ å¢åŠ ä»£ç çš„çµæ´»åº¦ ä»¥ ç»§æ‰¿ å’Œ é‡å†™çˆ¶ç±»æ–¹æ³• ä¸ºå‰æ æ˜¯è°ƒç”¨æ–¹æ³•çš„æŠ€å·§ï¼Œä¸ä¼šå½±å“åˆ°å†…éƒ¨è®¾è®¡. class A: def work(self): print('äººç±»éœ€è¦å·¥ä½œ') # ç¨‹åºå‘˜ class B(A): def work(self): print('ç¨‹åºå‘˜åœ¨å·¥ä½œ--ä»£ç ') # è®¾è®¡å¸ˆ class C(A): def work(self): print('è®¾è®¡å¸ˆåœ¨å·¥ä½œ--å›¾çº¸') b = B() c = C() c.work() b.work() ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:11:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¤šæ€æ¡ˆä¾‹æ¼”ç»ƒ éœ€æ±‚ 1.åœ¨Dogç±»ä¸­å°è£…æ–¹æ³•game æ™®é€šç‹—åªæ˜¯ç®€å•çš„ç©è€ 2.å®šä¹‰XiaoTianDogç»§æ‰¿è‡ªDogï¼Œå¹¶ä¸”é‡å†™gameæ–¹æ³• å“®å¤©çŠ¬éœ€è¦åœ¨å¤©ä¸Šç©è€ 3.å®šä¹‰Personç±»ï¼Œå¹¶ä¸”å°è£…ä¸€ä¸ª å’Œç‹—ç© çš„æ–¹æ³• åœ¨æ–¹æ³•å†…éƒ¨ï¼Œç›´æ¥è®©ç‹—å¯¹è±¡ è°ƒç”¨ gameæ–¹æ³• æ¡ˆä¾‹å°ç»“ Personç±»ä¸­åªéœ€è¦è®© ç‹—å¯¹è±¡ è°ƒç”¨gameæ–¹æ³•ï¼Œè€Œä¸å…³å¿ƒå…·ä½“æ˜¯ä»€ä¹ˆç‹— gameæ–¹æ³•æ˜¯åœ¨Dogçˆ¶ç±»ä¸­å®šä¹‰çš„ åœ¨ç¨‹åºæ‰§è¡Œæ—¶ï¼Œä¼ å…¥ä¸åŒçš„ ç‹—å¯¹è±¡ å®å‚ï¼Œå°±ä¼šäº§ç”Ÿä¸åŒçš„æ‰§è¡Œæ•ˆæœ å¤šæ€æ›´å®¹æ˜“ç¼–å†™å‡ºé€šç”¨çš„ä»£ç ï¼Œåšå‡ºé€šç”¨çš„ç¼–ç¨‹ï¼Œä»¥é€‚åº”éœ€æ±‚çš„ä¸æ–­å˜åŒ–ã€‚ class Dog: # å®šä¹‰ç±»å±æ€§ def __init__(self, name): self.name = name # æ–¹æ³• def game(self): print('%s åœ¨è¹¦è¹¦è·³è·³çš„ç©è€...' % self.name) class XiaoTianDog(Dog): # å½“å‰çš„å“®å¤©çŠ¬å’Œæ™®é€šçš„ç‹—ä¸ä¸€æ · \"\"\" å­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ—¶å€™ å…·æœ‰çˆ¶ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³• \"\"\" def game(self): print('%s é£åˆ°å¤©ä¸Šå»ç©è€...' % self.name) class Person: def __init__(self, name): self.name = name def game_with_dog(self, dog): # è®©ç‹—ç©è€ dog.game() # è®©ç‹—ä¸äººä¸€èµ·ç©è€ print('%s å’Œ %s å¿«ä¹çš„ç©è€...' % (self.name, dog.name)) # åˆ›å»ºä¸€ä¸ªæ™®é€šç‹—å¯¹è±¡ # wangcai = Dog('æ—ºè´¢') wangcai = XiaoTianDog('æ—ºè´¢') # åˆ›å»ºä¸€ä¸ªäººçš„å¯¹è±¡ xiaoming = Person('å°æ˜') xiaoming.game_with_dog(wangcai) \"\"\" æ—ºè´¢ åœ¨è¹¦è¹¦è·³è·³çš„ç©è€... å°æ˜ å’Œ æ—ºè´¢ å¿«ä¹çš„ç©è€... æ—ºè´¢ é£åˆ°å¤©ä¸Šå»ç©è€... å°æ˜ å’Œ æ—ºè´¢ å¿«ä¹çš„ç©è€... \"\"\" \"\"\" å¤šæ€çš„è¿è¡Œæƒ…å†µ æˆ‘ä»¬åœ¨è°ƒç”¨å­ç±»ä¸­çš„åŒåæ–¹æ³•æ—¶ è¾“å‡ºçš„å€¼ä¸ä¸€æ · ç»§æ‰¿å’Œé‡å†™çš„ \"\"\" ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/:11:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -é¢å‘å¯¹è±¡ç¼–ç¨‹å…¥é—¨","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å…ƒç»„ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/:1:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å…ƒç»„","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/"},{"categories":["ç¼–ç¨‹"],"content":"å…ƒç»„çš„å®šä¹‰ tupleï¼ˆå…ƒç»„ï¼‰ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…ƒç»„çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ å…ƒç»„ä¸­åŒ…å«åˆ—è¡¨é¡¹ï¼Œå¯ä»¥ä¿®æ”¹å…ƒç»„å€¼ï¼ˆé—´æ¥ä¿®æ”¹åˆ—è¡¨ï¼‰ a = ([1,2],[3,4]) a[0][0] = 520 print(a) # ([520, 2], [3, 4]) å…ƒç»„ è¡¨ç¤ºå¤šä¸ªå…ƒç´ ç»„æˆçš„åºåˆ— å…ƒç»„ åœ¨pythonå¼€å‘ä¸­ï¼Œæœ‰ç‰¹å®šçš„åº”ç”¨åœºæ™¯ ç”¨äºå­˜å‚¨ ä¸€ä¸²ä¿¡æ¯ï¼Œæ•°æ®ä¹‹é—´ä½¿ç”¨ ,åˆ†éš” å…ƒç»„ç”¨()å®šä¹‰ å…ƒç»„çš„ç´¢å¼•ä»0å¼€å§‹ ç´¢å¼•å°±æ˜¯æ•°æ®åœ¨å…ƒç»„ä¸­çš„ä½ç½®ç¼–å· info_tuple = (\"zhangsan\", 18, 1.75) åˆ›å»ºç©ºå…ƒç»„ info_tuple() å…ƒç»„ä¸­åªåŒ…å«ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦åœ¨å…ƒç´ åé¢æ·»åŠ é€—å· info_tuple(50, ) â€‹ å…ƒç»„çš„ç´¢å¼•æ˜¯ä»0å¼€å§‹çš„ â€‹ len(å…ƒç»„)è·å–å…ƒç»„çš„é•¿åº¦n+1 â€‹ å…ƒç»„.count(æ•°æ®) æ•°æ®åœ¨å…ƒç»„ä¸­å‡ºç°çš„æ¬¡æ•° å…ƒç»„[ç´¢å¼•] ä»åˆ—è¡¨ä¸­å–å€¼ å…ƒç»„.index(æ•°æ®) è·å¾—æ•°æ®ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/:1:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å…ƒç»„","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/"},{"categories":["ç¼–ç¨‹"],"content":"å…ƒç»„çš„å¸¸ç”¨æ“ä½œ åœ¨ipython3ä¸­å®šä¹‰ä¸€ä¸ªå…ƒç»„ï¼Œä¾‹å¦‚ï¼šinfo=() è¾“å…¥info.æŒ‰ä¸‹Tabé”®ï¼Œipythonä¼šæç¤º å…ƒç»„ èƒ½å¤Ÿä½¿ç”¨çš„å‡½æ•°å¦‚ä¸‹ï¼š info.count info.index æœ‰å…³å…ƒç»„çš„å¸¸ç”¨æ“ä½œ å¯ä»¥å‚ç…§ä¸Šå›¾ç»ƒä¹  æ³¨æ„ï¼šå…ƒç»„åªèƒ½æŸ¥ï¼Œå¢åˆ æ”¹éƒ½ä¸å¯ä»¥ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/:2:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å…ƒç»„","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/"},{"categories":["ç¼–ç¨‹"],"content":"å¾ªç¯éå† å–å€¼ å°±æ˜¯ä» å…ƒç»„ä¸­è·å–å­˜å‚¨åœ¨æŒ‡å®šä½ç½®çš„æ•°æ® éå† å°±æ˜¯ä»å¤´åˆ°å°¾ä¾æ¬¡ ä»å…ƒç»„ä¸­è·å–æ•°æ® # for å¾ªç¯å†…éƒ¨ä½¿ç”¨çš„å˜é‡ in å…ƒç»„ for item in info: å¾ªç¯å†…éƒ¨é’ˆå¯¹å…ƒç»„å…ƒç´ è¿›è¡Œæ“ä½œ print(item) åœ¨pythonä¸­ï¼Œå¯ä»¥ä½¿ç”¨forå¾ªç¯éå†æ‰€æœ‰éæ•°å­—ç±»å‹çš„å˜é‡ï¼š åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ä»¥åŠå­—ç¬¦ä¸² æç¤ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œé™¤éèƒ½å¤Ÿç¡®è®¤å…ƒç»„ä¸­æ•°æ®ç±»å‹ï¼Œå¦åˆ™é’ˆå¯¹å…ƒç»„çš„å¾ªç¯éå†éœ€æ±‚å¹¶ä¸æ˜¯å¾ˆå¤šã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/:2:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å…ƒç»„","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/"},{"categories":["ç¼–ç¨‹"],"content":"åº”ç”¨åœºæ™¯ å°½ç®¡å¯ä»¥ä½¿ç”¨for in éå†å…ƒç»„ ä½†æ˜¯åœ¨å¼€å‘ä¸­ï¼Œæ›´å¤šçš„åº”ç”¨åœºæ™¯æ˜¯ï¼š å‡½æ•°çš„ å‚æ•°å’Œè¿”å›å€¼ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ ä»»æ„å¤šä¸ªå‚æ•°ï¼Œæˆ–è€… ä¾æ¬¡è¿”å›å¤šä¸ªæ•°æ® æœ‰å…³ å‡½æ•°çš„å‚æ•° å’Œè¿”å›å€¼ï¼Œåœ¨åç»­ å‡½æ•°é«˜çº§ ç»™å¤§å®¶ä»‹ç» æ ¼å¼å­—ç¬¦ä¸²ï¼Œæ ¼å¼åŒ–å­—ç¬¦ä¸²åé¢çš„()æœ¬è´¨å°šå°±æ˜¯ä¸€ä¸ªå…ƒç»„ è®©åˆ—è¡¨ä¸å¯ä»¥è¢«ä¿®æ”¹ï¼Œä»¥ä¿æŠ¤æ•°æ®å®‰å…¨ã€‚ info = (\"zhangsan\", 18) print(\"%s çš„å¹´é¾„æ˜¯ %d\" % info) ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/:2:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å…ƒç»„","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/"},{"categories":["ç¼–ç¨‹"],"content":"å…ƒç»„å’Œåˆ—è¡¨ä¹‹é—´çš„è½¬æ¢ ä½¿ç”¨listå‡½æ•°å¯ä»¥æŠŠå…ƒç»„è½¬æ¢æˆåˆ—è¡¨ list(å…ƒç»„) ä½¿ç”¨tupleå‡½æ•°å¯ä»¥æŠŠåˆ—è¡¨è½¬æ¢æˆå…ƒç»„ tuple(åˆ—è¡¨) ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/:2:3","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å…ƒç»„","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/"},{"categories":["ç¼–ç¨‹"],"content":"å…ƒç»„æ‰“åŒ…å’Œè§£åŒ… æ‰“åŒ…ï¼šå¤šä¸ªå…ƒç´ åœ¨ä¸€ä¸ªå…ƒç»„å†… t = (123, \"FishC\", 3.14) è§£åŒ…ï¼šå°†å¤šä¸ªå…ƒç´ èµ‹å€¼ç»™å˜é‡ x,y,z = t print(x) print(y) print(z) # =å·¦è¾¹å˜é‡æ•°è¦å’Œ =å³è¾¹åºåˆ—ä¸­å­—ç¬¦æ•°é‡ä¸€è‡´ # è‹¥ä¸ç­‰ a,*b = t print(a) # 123 print(b) # ['FishC', 3.14] ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/:2:4","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å…ƒç»„","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/"},{"categories":["ç¼–ç¨‹"],"content":"å­—å…¸çš„å®šä¹‰ dictionaryï¼ˆå­—å…¸ï¼‰æ˜¯ é™¤åˆ—è¡¨æ„å¤–pythonä¹‹ä¸­ æœ€çµæ´»çš„æ•°æ®ç±»å‹ å­—å…¸åŒæ ·å¯ä»¥ç”¨æ¥ å­˜å‚¨å¤šä¸ªæ•°æ® é€šå¸¸ç”¨äºå­˜å‚¨ æè¿°ä¸€ä¸ª ç‰©ä½“çš„ç›¸å…³ä¿¡æ¯ å’Œåˆ—è¡¨çš„åŒºåˆ« åˆ—è¡¨æ˜¯ æœ‰åº çš„å¯¹è±¡é›†åˆ å­—å…¸æ˜¯ æ— åºçš„å¯¹è±¡é›†åˆ å­—å…¸ä½¿ç”¨ é”®å€¼å¯¹å­˜å‚¨æ•°æ®ï¼Œé”®å€¼å¯¹ä¹‹é—´ä½¿ç”¨,åˆ†å‰² é”® keyæ˜¯ç´¢å¼• å€¼ value æ˜¯æ•°æ® é”® å’Œ å€¼ ä¹‹é—´ä½¿ç”¨:åˆ†å‰² é”®å¿…é¡»æ˜¯å”¯ä¸€çš„ å€¼ å¯ä»¥å–ä»»ä½•æ•°æ®ç±»å‹ï¼Œä½† é”® åªèƒ½ä½¿ç”¨ å­—ç¬¦ä¸²ã€æ•°å­—æˆ–å…ƒç»„ xiaoming = { \"name\": \"å°æ˜\". \"age\": 18, \"gender\" : True \"height\": 1.75 } â€‹ len(å­—å…¸) è·å–å­—å…¸çš„ é”®å€¼å¯¹æ•°é‡ key value name å°æ˜ age 18 gender true height 1.75 å­—å…¸.keys() æ‰€æœ‰ key åˆ—è¡¨ å­—å…¸.values() æ‰€æœ‰value åˆ—è¡¨ å­—å…¸.items() æ‰€æœ‰ï¼ˆkey, valueï¼‰å…ƒç»„åˆ—è¡¨ å­—å…¸[key] å¯ä»¥ä»å­—å…¸ä¸­å–å€¼ï¼Œ key ä¸å­˜åœ¨ä¼šæŠ¥é”™ å­—å…¸.get(key) å¯ä»¥ä»å­—å…¸ä¸­å–å€¼ï¼Œ key ä¸å­˜åœ¨ä¸ä¼šæŠ¥é”™ å­—å…¸[key] = value å¦‚æœ key å­˜åœ¨ ï¼Œä¿®æ”¹æ•°æ® å¦‚æœ key ä¸å­˜åœ¨ ï¼Œæ–°å»ºé”®å€¼å¯¹ å­—å…¸.setdefault(key, value) å¦‚æœ key å­˜åœ¨ ï¼Œä¸ä¼šä¿®æ”¹æ•°æ® å¦‚æœ key ä¸å­˜åœ¨ ï¼Œæ–°å»ºé”®å€¼å¯¹ å­—å…¸.update(å­—å…¸2) å°†å­—å…¸2 çš„æ•°æ®åˆå¹¶åˆ°å­—å…¸1 del å­—å…¸[key] åˆ é™¤æŒ‡å®šé”®å€¼å¯¹ï¼Œ key ä¸å­˜åœ¨ä¼šæŠ¥é”™ å­—å…¸.pop(key) åˆ é™¤æŒ‡å®šé”®å€¼å¯¹ï¼Œ key ä¸å­˜åœ¨ä¼šæŠ¥é”™ å­—å…¸.popitem() éšæœºåˆ é™¤ä¸€ä¸ªé”®å€¼å¯¹ å­—å…¸.clear() æ¸…ç©ºå­—å…¸ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/:1:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—å…¸","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/"},{"categories":["ç¼–ç¨‹"],"content":"å­—å…¸å¸¸ç”¨æ“ä½œ åœ¨ ipython3ä¸­å®šä¹‰ä¸€ä¸ª å­—å…¸ ï¼Œä¾‹å¦‚ ï¼šxiaoing = {} è¾“å…¥ xiaoming. æŒ‰ä¸‹Tabé”®ï¼Œipythonä¼šæç¤ºå­—å…¸ èƒ½å¤Ÿä½¿ç”¨çš„å‡½æ•°å¦‚ä¸‹ï¼š xiaoming.clear() xiaoming.copy() xiaoming.get() xiaoming.items() xiaoming.keys() xiaoming.pop() xiaoming.popitem() xiaoming.setdefault() xiaoming.update() xiaoming.values() æœ‰å…³ å­—å…¸çš„ å¸¸ç”¨æ“ä½œ å¯ä»¥å‚ç…§ä¸Šå›¾ç»ƒä¹  ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/:2:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—å…¸","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/"},{"categories":["ç¼–ç¨‹"],"content":"æ¸…ç©ºå­—å…¸ info = {\"name\": \"john\", \"age\":18} print(\"æ¸…ç©ºå‰:%s\" %info) info.clear() print(\"æ¸…ç©ºå:%s\" %info) ç»“æœ æ¸…ç©ºå‰:{'name': 'john', 'age': 18} æ¸…ç©ºå:{} ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/:2:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—å…¸","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/"},{"categories":["ç¼–ç¨‹"],"content":"éå†å¾ªç¯ éå†å°±æ˜¯ ä¾æ¬¡ ä»å­—å…¸ä¸­è·å–æ‰€æœ‰é”®å€¼å¯¹ # for å¾ªç¯å†…éƒ¨ä½¿ç”¨`keyçš„å˜é‡` in å­—å…¸ for k,v in xiaoming.items(): print(\"key=%s,value=%s\"%(k,v)) æç¤ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œç”±äºå­—å…¸ä¸­æ¯ä¸€ä¸ªé”®å€¼å¯¹ä¿å­˜çš„æ•°æ®ç±»å‹æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥é’ˆå¯¹å­—å…¸çš„å¾ªç¯éœ€æ±‚å¹¶ä¸æ˜¯å¾ˆå¤šã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/:3:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—å…¸","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/"},{"categories":["ç¼–ç¨‹"],"content":"åº”ç”¨åœºæ™¯ å°½é‡å¯ä»¥ä½¿ç”¨for inéå† å­—å…¸ ä½†æ˜¯åœ¨å¼€å‘ä¸­ï¼Œæ›´å¤šçš„åº”ç”¨åœºæ™¯æ˜¯ï¼š ä½¿ç”¨ å¤šä¸ªé”®å€¼å¯¹ï¼Œå­˜å‚¨ æè¿°ä¸€ä¸ªç‰©ä½“çš„ç›¸å…³ä¿¡æ¯ â€”â€”â€“æè¿°æ›´å¤æ‚çš„æ•°æ®ä¿¡æ¯ å°† å¤šä¸ªå­—å…¸ æ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œå†è¿›è¡Œéå†ï¼Œ åœ¨å¾ªç¯ä½“å†…éƒ¨é’ˆå¯¹æ¯ä¸€ä¸ªå­—å…¸è¿›è¡Œ ç›¸åŒçš„å¤„ç† card_list = [ { \"name\": \"å¼ ä¸‰\", \"qq\": \"123465\", \"phone\": \"110\", }, { \"name\": \"æå››\", \"qq\": \"123456\", \"phone\":\"120\" } ] ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/:4:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—å…¸","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/"},{"categories":["ç¼–ç¨‹"],"content":"å­—ç¬¦ä¸² ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:1:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"å®šä¹‰ å­—ç¬¦ä¸² å°±æ˜¯ä¸€ä¸²å­—ç¬¦ï¼Œæ˜¯ç¼–ç¨‹è¯­è¨€ä¸­è¡¨ç¤ºæ–‡æœ¬çš„æ•°æ®ç±»å‹ åœ¨ pythonä¸­å¯ä»¥ä½¿ç”¨ ä¸€å †åŒå¼•å· \"\"æˆ–è€… ä¸€å¯¹å•å¼•å· ''å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸² è™½ç„¶å¯ä»¥ä½¿ç”¨\\\"æˆ–è€…\\'åšå­—ç¬¦ä¸²çš„è½¬ä¹‰ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼š å¦‚æœå­—ç¬¦ä¸²å†…éƒ¨éœ€è¦ä½¿ç”¨\"\",å¯ä»¥ä½¿ç”¨''å®šä¹‰å­—ç¬¦ä¸²ã€‚ å¦‚æœå­—ç¬¦ä¸²å†…éƒ¨éœ€è¦ä½¿ç”¨'',å¯ä»¥ä½¿ç”¨\"\"å®šä¹‰å­—ç¬¦ä¸²ã€‚ å¯ä»¥ä½¿ç”¨ ç´¢å¼• è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ æŒ‡å®šä½ç½®çš„å­—ç¬¦ï¼Œç´¢å¼•è®¡æ•°ä» 0 å¼€å§‹ äº¦å¯ä»¥ä½¿ç”¨ forå¾ªç¯éå† å­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦ å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯ç”¨\"\"æ¥å®šä¹‰å­—ç¬¦ä¸² string = 'Hello Python' for c in string: print(c) å­—ç¬¦ä¸²çš„ç´¢å¼•å€¼æ˜¯ä»0 å¼€å§‹çš„ p y t h o n â†‘ len(å­—ç¬¦ä¸²) è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ å­—ç¬¦ä¸².count(å­—ç¬¦ä¸²) å°å­—ç¬¦ä¸²åœ¨å¤§å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ¬¡æ•° å­—ç¬¦ä¸²[ç´¢å¼•] ä»å­—ç¬¦ä¸²ä¸­å–å‡ºå•ä¸ªå­—ç¬¦ã€‚ å®ƒä¹Ÿæ”¯æŒåˆ‡ç‰‡æ“ä½œ å­—ç¬¦ä¸²[1:4:] # yth å­—ç¬¦ä¸².index(å­—ç¬¦ä¸²) è·å¾—å°å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:1:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"å­—ç¬¦ä¸²çš„å¸¸è§„æ“ä½œ åœ¨ ipython3ä¸­å®šä¹‰ä¸€ä¸ª å­—ç¬¦ä¸² ï¼Œä¾‹å¦‚ ï¼š hello_str = \"\" è¾“å…¥hello_str,æŒ‰ä¸‹Tabé”®ï¼Œipythonä¼šæç¤º å­—ç¬¦ä¸²èƒ½å¤Ÿä½¿ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š hello_str.capitalize hello_str.isidentifier hello_str.rindex hello_str.casefold hello_str.islower hello_str.rjust hello_str.center hello_str.isnumeric hello_str.rpartition hello_str.count hello_str.isprintable hello_str.rsplit hello_str.encode hello_str.isspace hello_str.rstrip hello_str.endswith hello_str.istitle hello_str.split hello_str.expandtabs hello_str.isupper hello_str.splitlines hello_str.find hello_str.join hello_str.startswith hello_str.format hello_str.ljust hello_str.strip hello str.format_map hello_str.lower hello_str.swapcase hello_str.index hello_str.lstrip hello_str.title hello_str.isalnum hello_str.maketrans hello_str.translate hello_str.isalpha hello_str.partition hello_str.upper hello_str.isdecimal hello_str.replace hello_str.zfill hello_str.isdigit hello_str.rfind æç¤ºï¼šæ­£æ˜¯å› ä¸ºpython å†…ç½®æä¾›çš„æ–¹æ³•è¶³å¤Ÿå¤šï¼Œæ‰ä½¿å¾—åœ¨å¼€å‘æ—¶ï¼Œèƒ½å¤Ÿé’ˆå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ›´åŠ çµæ´»çš„æ“ä½œã€‚ 1ï¼‰åˆ¤æ–­ç±»å‹-9 æ–¹æ³• è¯´æ˜ string.isspace() å¦‚æœ string ä¸­åªåŒ…å«ç©ºæ ¼ï¼Œåˆ™è¿”å› True string.isalnum() å¦‚æœ string è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦å¹¶ä¸”æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯å­—æ¯æˆ–æ•°å­—åˆ™è¿”å›True string.isalpha() å¦‚æœ string è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦å¹¶ä¸”æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯å­—æ¯åˆ™è¿”å›True string.isdecimal() å¦‚æœ string åªåŒ…å«æ•°å­—åˆ™è¿”å›True ,å…¨è§’æ•°å­— string.isnumeric() å¦‚æœ string åªåŒ…å«æ•°å­—åˆ™è¿”å›True ,å…¨è§’æ•°å­—ï¼Œæ±‰å­—æ•°å­— string.isdigit() å¦‚æœ string åªåŒ…å«æ•°å­—åˆ™è¿”å›True ,å…¨è§’æ•°å­—ã€{1}ã€\\u00b2 string.istitle() å¦‚æœ stringæ˜¯æ ‡é¢˜åŒ–çš„ï¼ˆæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼‰åˆ™è¿”å›True ã€‚ string.islower() å¦‚æœ string ä¸­åŒ…å«è‡³å°‘ä¸€ä¸ªåŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ï¼Œå¹¶ä¸”æ‰€æœ‰è¿™äº›ï¼ˆåŒºåˆ†å¤§å°å†™çš„ï¼‰å­—ç¬¦éƒ½æ˜¯å°å†™ï¼Œåˆ™è¿”å›True ã€‚ string.upper() å¦‚æœ string ä¸­åŒ…å«è‡³å°‘ä¸€ä¸ªåŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ï¼Œå¹¶ä¸”æ‰€æœ‰è¿™äº›ï¼ˆåŒºåˆ†å¤§å°å†™çš„ï¼‰å­—ç¬¦éƒ½æ˜¯å¤§å†™ï¼Œåˆ™è¿”å›True ã€‚ 2ï¼‰æŸ¥æ‰¾å’Œæ›¿æ¢-7 æ–¹æ³• è¯´æ˜ string.startswith(str) æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥strå¼€å¤´ï¼Œæ˜¯åˆ™è¿”å›Trueã€‚ string.find(str, beg=0, end=len(string)) æ£€æµ‹ str æ˜¯å¦åŒ…å«åœ¨ string ä¸­ï¼Œå¦‚æœ beg å’Œ end æŒ‡å®šèŒƒå›´ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦åŒ…å«åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå¦‚æœæ˜¯è¿”å›å¼€å§‹çš„ç´¢å¼•å€¼ï¼Œå¦åˆ™è¿”å›-1 string.index(str, beg=0, end=len(string)) è·Ÿfind()æ–¹æ³•ä¸€æ ·ï¼Œåªä¸è¿‡å¦‚æœsträ¸åœ¨ stringä¸­ä¼šæŠ¥ä¸€ä¸ªå¼‚å¸¸. string.rfind(str, beg=0,end=len(string) ) ç±»ä¼¼äº find() å‡½æ•°ï¼Œè¿”å›å­—ç¬¦ä¸²æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…é¡¹åˆ™è¿”å› -1ã€‚ string.rindex( str, beg=0,end=len(string)) ç±»ä¼¼äº index()ï¼Œä¸è¿‡æ˜¯è¿”å›æœ€åä¸€ä¸ªåŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²çš„ç´¢å¼•å·ã€‚ string.replace(str1, str2, num=string.count(str1)) æŠŠ string ä¸­çš„ str1 æ›¿æ¢æˆ str2,å¦‚æœ num æŒ‡å®šï¼Œåˆ™æ›¿æ¢ä¸è¶…è¿‡ num æ¬¡. ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:2:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"å­—ç¬¦ä¸²çš„æ–¹æ³• åœ¨pythonä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²ç±»å‹è‡ªå¸¦çš„æ–¹æ³•å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œå’Œå¤„ç†ï¼Œå¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²çš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å˜é‡å.æ–¹æ³•å()çš„æ–¹å¼æ¥è°ƒç”¨å®ƒçš„æ–¹æ³•ã€‚æ‰€è°“æ–¹æ³•å…¶å®å°±æ˜¯è·ŸæŸä¸ªç±»å‹çš„å˜é‡ç»‘å®šçš„å‡½æ•°ï¼Œåé¢æˆ‘ä»¬è®²é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ—¶å€™è¿˜ä¼šå¯¹è¿™ä¸€æ¦‚å¿µè¯¦åŠ è¯´æ˜ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:3:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"å¤§å°å†™ç›¸å…³æ“ä½œ ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å’Œå­—ç¬¦ä¸²å¤§å°å†™å˜æ¢ç›¸å…³çš„æ–¹æ³•ã€‚ s1 = 'hello, world!' # ä½¿ç”¨capitalizeæ–¹æ³•è·å¾—å­—ç¬¦ä¸²é¦–å­—æ¯å¤§å†™åçš„å­—ç¬¦ä¸² print(s1.capitalize()) # Hello, world! # ä½¿ç”¨titleæ–¹æ³•è·å¾—å­—ç¬¦ä¸²æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™åçš„å­—ç¬¦ä¸² print(s1.title()) # Hello, World! # ä½¿ç”¨upperæ–¹æ³•è·å¾—å­—ç¬¦ä¸²å¤§å†™åçš„å­—ç¬¦ä¸² print(s1.upper()) # HELLO, WORLD! s2 = 'GOODBYE' # ä½¿ç”¨loweræ–¹æ³•è·å¾—å­—ç¬¦ä¸²å°å†™åçš„å­—ç¬¦ä¸² print(s2.lower()) # goodbye ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:3:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"æŸ¥æ‰¾æ“ä½œ å¦‚æœæƒ³åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ä»å‰å‘åæŸ¥æ‰¾æœ‰æ²¡æœ‰å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„findæˆ–indexæ–¹æ³•ã€‚ s = 'hello, world!' # find æ–¹æ³•ä»å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å¦ä¸€ä¸ªå­—ç¬¦ä¸²æ‰€åœ¨çš„ä½ç½® # æ‰¾åˆ°äº†è¿”å›å­—ç¬¦ä¸²ä¸­å¦ä¸€ä¸ªå­—ç¬¦ä¸²é¦–å­—æ¯å­—ç¬¦ä¸²çš„ç´¢å¼• print(s.find('or')) # 8 # æ‰¾ä¸åˆ°è¿”å› -1 print(s.find('shit')) # -1 # indexæ–¹æ³•ä¸findæ–¹æ³•ç±»ä¼¼ # æ‰¾åˆ°äº†è¿”å›å­—ç¬¦ä¸²ä¸­å¦ä¸€ä¸ªå­—ç¬¦ä¸²é¦–å­—ç¬¦çš„ç´¢å¼• print(s.index('or')) # 8 # æ‰¾ä¸åˆ°å¼•å‘å¼‚å¸¸ print(s.index('shit')) # ValueError: substring not found åœ¨ä½¿ç”¨findå’Œindexæ–¹æ³•æ—¶è¿˜å¯ä»¥é€šè¿‡æ–¹æ³•çš„å‚æ•°æ¥æŒ‡å®šæŸ¥æ‰¾çš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯æŸ¥æ‰¾ä¸å¿…ä»ç´¢å¼•0çš„ä½ç½®å¼€å§‹ã€‚findå’Œindexæ–¹æ³•è¿˜æœ‰é€†å‘æŸ¥æ‰¾ï¼ˆä»åå‘å‰æŸ¥æ‰¾ï¼‰çš„ç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯rfindå’Œrindex ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ s = 'hello good world!' # ä»å‰å‘åæŸ¥æ‰¾å­—ç¬¦oå‡ºç°çš„ä½ç½®ï¼ˆç›¸å½“äºç¬¬ä¸€æ¬¡å‡ºç°ï¼‰ print(s.find('o')) # 4 # ä»ç´¢å¼•ä¸º5 çš„ä½ç½®å¼€å§‹æŸ¥æ‰¾oå‡ºç°çš„ä½ç½® print(s.find('o', 5)) # 7 # ä»åå‘å‰æŸ¥æ‰¾å­—ç¬¦oå‡ºç°çš„ä½ç½®ï¼ˆç›¸å½“äºæœ€åä¸€æ¬¡å‡ºç°ï¼‰ print(s.rfind('o')) # 12 ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:3:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"æ€§è´¨åˆ¤æ–­ å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²çš„startswithã€endswithä¿©åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾ï¼›è¿˜å¯ä»¥ç”¨iså¼€å¤´çš„æ–¹æ³•åˆ¤æ–­å­—ç¬¦ä¸²çš„ç‰¹å¾ï¼Œè¿™äº›æ–¹æ³•éƒ½è¿”å›å¸ƒå°”å€¼ï¼Œä»£ç å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ s1 = 'hello, world!' # startwith æ–¹æ³•æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²å¼€å¤´è¿”å›å¸ƒå°”å€¼ print(s1.startswith('He')) # False print(s1.startswith('hel')) # True # endwith æ–¹æ³•æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²ç»“å°¾è¿”å›å¸ƒå°”å€¼ print(s1.endswith('!')) # True s2 = 'abc123456' # isdigit æ–¹æ³•æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ç”±æ•°å­—æ„æˆè¿”å›å¸ƒå°”å€¼ print(s2.isdigit()) # False # isalpha æ–¹æ³•æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ç”±å­—æ¯æ„æˆè¿”å›å¸ƒå°”å€¼ print(s2.isalpha()) # False # isalnum æ–¹æ³•æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æ•°å­—å’Œå­—æ¯æ„æˆè¿”å›å¸ƒå°”å€¼ print(s2.isalnum()) # True ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:3:3","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"æ ¼å¼åŒ–å­—ç¬¦ä¸² åœ¨pythonä¸­ï¼Œå­—ç¬¦ä¸²ç±»å‹å¯ä»¥é€šè¿‡centerã€ljustã€rjustæ–¹æ³•åšå±…ä¸­ã€å·¦å¯¹é½å’Œå³å¯¹é½å¤„ç†ã€‚å¦‚æœè¦åœ¨å­—ç¬¦ä¸²çš„å·¦ä¾§è¡¥é›¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨zfillæ–¹æ³•ã€‚ s = 'hello, world!' # center æ–¹æ³•ä»¥å®½åº¦20 å°†å­—ç¬¦ä¸²å±…ä¸­å¹¶åœ¨ä¸¤ä¾§å¡«å……* print(s.center(20, '*')) # ***hello, world!**** print(s.rjust(20)) # hello, world! print(s.ljust(20, '-')) # hello, world!------- print('33'.zfill(5)) # 00033 print('-33'.zfill(5)) # -0033 åœ¨ç”¨printå‡½æ•°è¾“å‡ºå­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ ¼å¼åŒ–ã€‚ a = 321 b = 123 print('%d * %d = %d'% (a, b, a * b)) å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å­—ç¬¦ä¸²çš„æ–¹æ³•æ¥å®Œæˆå­—ç¬¦ä¸²çš„æ ¼å¼ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ a = 321 b = 123 print('{0} * {1} = {2}'.format(a, b, a * b)) ä»python3.6å¼€å§‹ï¼Œæ ¼å¼åŒ–å­—ç¬¦ä¸²è¿˜æœ‰æ›´ä¸ºç®€ä»‹çš„ä¹¦å†™æ–¹å¼ï¼Œå°±æ˜¯åœ¨å­—ç¬¦ä¸²å‰åŠ fæ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œåœ¨è¿™ç§ä»¥fæ‰“å¤´çš„å­—ç¬¦ä¸²ä¸­{å˜é‡å}æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œä¼šè¢«å˜é‡å¯¹åº”çš„å€¼å°†å…¶æ›¿æ¢æ‰ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ a = 321 b = 123 print(f'{a} * {b} = {a * b}') f è¡¨è¾¾å¼åªæ”¯æŒpython3.6 ä»¥ä¸Šç‰ˆæœ¬ã€‚ã€‚ å¦‚æœéœ€è¦è¿›ä¸€æ­¥æ§åˆ¶æ ¼å¼åŒ–ä¸­å˜é‡å€¼çš„å½¢å¼ï¼Œå¯ä»¥å‚ç…§ä¸‹é¢çš„è¡¨æ ¼æ¥è¿›è¡Œå­—ç¬¦ä¸²æ ¼å¼åŒ–æ“ä½œã€‚ å˜é‡å€¼ å ä½ç¬¦ æ ¼å¼åŒ–ç»“æœ è¯´æ˜ 3.1415926 {:.2f} 3.14 ä¿ç•™å°æ•°ç‚¹åä¸¤ä½ 3.1415926 {:+.2f} +3.14 å¸¦ç¬¦å·ä¿ç•™å°æ•°ç‚¹åä¸¤ä½ -1 {:+.2f} -1.00 å¸¦ç¬¦å·ä¿ç•™å°æ•°ç‚¹åä¸¤ä½ 3.1415926 {:.0f} 3 ä¸å¸¦å°æ•° 123 {:0\u003e10d} 0000000123 å·¦è¾¹è¡¥0ï¼Œè¡¥å¤Ÿ10ä½ 123 {:x\u003c10d} 123xxxxxxx å³é¢è¡¥xï¼Œè¡¥å¤Ÿ10ä½ 123 {:\u003e10d} 123 å·¦è¡¥ç©ºæ ¼ï¼Œè¡¥å¤Ÿ10ä½ 123 {:\u003c10d} 123 å³è¡¥ç©ºæ ¼ï¼Œè¡¥å¤Ÿ10ä½ 123456789 {:,} 123,456,789 é€—å·åˆ†éš”æ ¼å¼ 0.123 {:.2%} 12.30% ç™¾åˆ†æ¯”æ ¼å¼ 123456789 {:.2e} 1.23e+08 ç§‘å­¦è®¡æ•°æ³•æ ¼å¼ 11 '{:0\u003e10d}'.format(11) 0000000011 è¿›åˆ¶ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:4:0","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"ä¿®å‰ªæ“ä½œ å­—ç¬¦ä¸²çš„stripæ–¹æ³•å¯ä»¥å¸®æˆ‘ä»¬è·å¾—å°†åŸå­—ç¬¦ä¸²ä¿®å‰ªå·¦å³ä¸¤ç«¯ç©ºæ ¼ä¹‹åçš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªæ–¹æ³•éå¸¸æœ‰å®ç”¨ä»·å€¼ï¼Œé€šå¸¸ç”¨æ¥å°†ç”¨æˆ·è¾“å…¥å› ä¸å°å¿ƒé”®å…¥çš„å¤´å°¾ç©ºæ ¼å»æ‰ï¼Œstripæ–¹æ³•è¿˜æœ‰lstripå’Œrstripä¸¤ä¸ªç‰ˆæœ¬ã€‚ s = ' tuling_python@163.com \\t \\r \\n' # strip æ–¹æ³•è·å¾—çš„å­—ç¬¦ä¸²ä¿®å‰ªå·¦å³ä¸¤ä¾§ç©ºæ ¼ä¹‹åçš„å­—ç¬¦ä¸² print(s.strip()) # tuling_python@163.com ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:4:1","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"æ›¿æ¢æ“ä½œ å¦‚æœå¸Œæœ›ç”¨æ–°çš„å†…å®¹æ›¿æ¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šå†…å®¹ï¼Œå¯ä»¥ç”¨replaceæ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ã€‚replaceæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¢«æ›¿æ¢çš„å†…å®¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ›¿æ¢åçš„å†…å®¹ï¼Œè¿˜å¯ä»¥é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šæ›¿æ¢çš„æ¬¡æ•°ã€‚ s1 = 'hello, world' print(s1.replace('o','@')) # hell@, w@rld print(s1.replace('o','@',1)) # hell@, world æ‹†åˆ†ã€åˆå¹¶æ“ä½œ å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„splitæ–¹æ³•å°†ä¸€ä¸ªå­—ç¬¦ä¸²æ‹†åˆ†ä¸ºå¤šä¸ªå­—ç¬¦ä¸²ï¼ˆæ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„joinæ–¹æ³•å°†åˆ—è¡¨ä¸­çš„å¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ s2 = 'I love you' words = s2.split() print(words) # ['I', 'love', 'you'] print('#'.join(words)) # I#love#you éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œsplitæ–¹æ³•é»˜è®¤ä½¿ç”¨ç©ºæ ¼è¿›è¡Œæ‹†åˆ†ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–çš„å­—ç¬¦æ¥æ‹†åˆ†å­—ç¬¦ä¸²ï¼Œè€Œä¸”è¿˜å¯ä»¥æŒ‡å®šæœ€å¤§æ‹†åˆ†æ¬¡æ•°æ¥æ§åˆ¶æ‹†åˆ†çš„æ•ˆæœã€‚ s3 = 'I#love#you#so#much' word1 = s3.split('#') print(word1) # ['I', 'love', 'you', 'so', 'much'] word2 = s3.split('#', 3) print(word2) # ['I', 'love', 'you', 'so#much'] ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:4:2","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["ç¼–ç¨‹"],"content":"ç¼–ç ã€è§£ç æ“ä½œ pythonä¸­é™¤äº†å­—ç¬¦ä¸²strç±»å‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„å­—èŠ‚ä¸²ç±»å‹ï¼ˆbytesï¼‰ã€‚æ‰€è°“å­—èŠ‚ä¸²ï¼Œå°±æ˜¯ç”±é›¶ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ç»„æˆçš„æœ‰é™åºåˆ—ã€‚é€šè¿‡å­—ç¬¦ä¸²çš„encodeæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§æŸç§ç¼–ç æ–¹å¼å°†å­—ç¬¦ä¸²ç¼–ç ä¸ºå­—èŠ‚ä¸²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—èŠ‚ä¸²çš„decodeæ–¹æ³•ï¼Œå°†å­—èŠ‚ä¸²è§£ç ä¸ºå­—ç¬¦ä¸²ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ a = 'å°çº¢' b = a.encode('utf-8') c = a.encode('gbk') print(b, c) # b'\\xe5\\xb0\\x8f\\xe7\\xba\\xa2' b'\\xd0\\xa1\\xba\\xec' print(b.decode('utf-8')) # å°çº¢ print(c.decode('gbk')) # å°çº¢ æ³¨æ„ï¼šç”¨ä»€ä¹ˆæ–¹å¼ç¼–ç  ï¼Œå°±ç”¨ä»€ä¹ˆæ–¹å¼è§£ç ã€‚ ","date":"2022-07-03","objectID":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/:4:3","tags":["python"],"title":"pythonå›ç‚‰é‡é€ -å­—ç¬¦ä¸²","uri":"/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["å·¥å…·"],"content":"æµ‹è¯•ç½‘ç«™ï¼š http://httpbin.org/ ","date":"2022-06-30","objectID":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/:0:0","tags":["webæµ‹è¯•"],"title":"httpå’Œhttpså„ç§æ–¹æ³•æµ‹è¯•","uri":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/"},{"categories":["å·¥å…·"],"content":"httpæ‰€æœ‰æ–¹æ³• ","date":"2022-06-30","objectID":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/:1:0","tags":["webæµ‹è¯•"],"title":"httpå’Œhttpså„ç§æ–¹æ³•æµ‹è¯•","uri":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/"},{"categories":["å·¥å…·"],"content":"get import requests def get_html_text(url): headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36' } r = requests.get(url, headers=headers) if r.status_code == 200: html = r.text print(html) else: print(\"è®¿é—®å¤±è´¥\") url = 'http://httpbin.org/get' get_html_text(url) è¿”å›æ•°æ® { \"args\": {}, \"headers\": { \"Accept\": \"*/*\", \"Accept-Encoding\": \"gzip, deflate\", \"Host\": \"httpbin.org\", \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36\", \"X-Amzn-Trace-Id\": \"Root=1-62b26fdb-5f9089b418e89e7533cd64f7\" }, \"origin\": \"124.64.235.140\", \"url\": \"http://httpbin.org/get\" } ","date":"2022-06-30","objectID":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/:1:1","tags":["webæµ‹è¯•"],"title":"httpå’Œhttpså„ç§æ–¹æ³•æµ‹è¯•","uri":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/"},{"categories":["å·¥å…·"],"content":"å¸¦è¯·æ±‚å¤´å’Œä¸å¸¦è¯·æ±‚å¤´è®¿é—®åŒºåˆ« ä¸å¸¦è¯·æ±‚å¤´ import requests def get_html_text(url): r = requests.get(url) if r.status_code == 200: html = r.text print(html) else: print(\"è®¿é—®å¤±è´¥\") url = 'http://httpbin.org/user-agent' get_html_text(url) ç»“æœ åªæ˜¾ç¤ºåŸå§‹è¯·æ±‚ï¼Œæœ‰äº›ç½‘ç«™ä¼šæ‹’ç»è®¿é—®ã€‚ { \"user-agent\": \"python-requests/2.25.1\" } å¸¦è¯·æ±‚å¤´ import requests def get_html_text(url): headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36' } r = requests.get(url, headers=headers) if r.status_code == 200: html = r.text print(html) else: print(\"è®¿é—®å¤±è´¥\") url = 'http://httpbin.org/user-agent' get_html_text(url) ç»“æœ å¯ä»¥ä¼ªè£…æˆä»»æ„è®¾å¤‡ã€‚ { \"user-agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36\" } ","date":"2022-06-30","objectID":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/:1:2","tags":["webæµ‹è¯•"],"title":"httpå’Œhttpså„ç§æ–¹æ³•æµ‹è¯•","uri":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/"},{"categories":["å·¥å…·"],"content":"cookies è¯·æ±‚å¤´å¸¦cookiesè¯·æ±‚èµ„æº import requests def auth_html(url): headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36', 'cookies': 'stale_after=never; fake=fake_value; last_nonce=65ef22149cc1c4c4214bf968aab45271' } r = requests.get(url, headers=headers) if r.status_code == 200: html = r.text print(html, r.status_code) else: print(\"è®¿é—®å¤±è´¥\") url = 'http://httpbin.org/get' auth_html(url) ç»“æœ { \"args\": {}, \"headers\": { \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\", \"Accept-Encoding\": \"gzip, deflate\", \"Accept-Language\": \"zh-CN,zh;q=0.9\", \"Cookie\": \"stale_after=never; fake=fake_value; last_nonce=65ef22149cc1c4c4214bf968aab45271\", \"Host\": \"httpbin.org\", \"Upgrade-Insecure-Requests\": \"1\", \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36\", \"X-Amzn-Trace-Id\": \"Root=1-62b28149-3ba69f2e27ccba90684da343\" }, \"origin\": \"124.64.235.140\", \"url\": \"http://httpbin.org/get\" } ","date":"2022-06-30","objectID":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/:1:3","tags":["webæµ‹è¯•"],"title":"httpå’Œhttpså„ç§æ–¹æ³•æµ‹è¯•","uri":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/"},{"categories":["å·¥å…·"],"content":"post import requests def post_html_text(url): headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36' } r = requests.post(url, headers=headers) if r.status_code == 200: html = r.text print(html) else: print(\"è®¿é—®å¤±è´¥\") url = 'http://httpbin.org/post' get_html_text(url) æ‰§è¡Œç»“æœ { \"args\": {}, \"data\": \"\", \"files\": {}, \"form\": {}, \"headers\": { \"Accept\": \"*/*\", \"Accept-Encoding\": \"gzip, deflate\", \"Content-Length\": \"0\", \"Host\": \"httpbin.org\", \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36\", \"X-Amzn-Trace-Id\": \"Root=1-62b2706d-7f50d849381586d306230274\" }, \"json\": null, \"origin\": \"124.64.235.140\", \"url\": \"http://httpbin.org/post\" } å¦‚æœæƒ³å¸¦æ•°æ®post,å¯ä»¥åŠ å…¥å‚æ•°ï¼Œè¯·æ±‚ç»“æœæ˜¾ç¤ºå‡ºæ¥ã€‚ import requests def post_html_text(url): headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36' } data = 'hello world' params = {'name':'jack'} r = requests.post(url, headers=headers, data=data, params=params) if r.status_code == 200: html = r.text print(html) else: print(\"è®¿é—®å¤±è´¥\") url = 'http://httpbin.org/post' post_html_text(url) è¯·æ±‚ç»“æœ { \"args\": { \"name\": \"jack\" }, \"data\": \"hello world\", \"files\": {}, \"form\": {}, \"headers\": { \"Accept\": \"*/*\", \"Accept-Encoding\": \"gzip, deflate\", \"Content-Length\": \"11\", \"Host\": \"httpbin.org\", \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36\", \"X-Amzn-Trace-Id\": \"Root=1-62b27146-6d5aa1171e476ed97757a9a5\" }, \"json\": null, \"origin\": \"124.64.235.140\", \"url\": \"http://httpbin.org/post?name=jack\" } ","date":"2022-06-30","objectID":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/:1:4","tags":["webæµ‹è¯•"],"title":"httpå’Œhttpså„ç§æ–¹æ³•æµ‹è¯•","uri":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/"},{"categories":["å·¥å…·"],"content":"authè®¤è¯ è¯·æ±‚å¤´ä¸­åŠ å…¥authorizationï¼Œå¸¦ç€è¯·æ±‚å¤´å»è¯·æ±‚ã€‚ import requests def auth_html(url): headers = { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36', 'authorization': 'Basic MTIzOjEyMw==' } data = 'hello world' params = {'name':'jack'} r = requests.get(url, headers=headers, data=data, params=params) if r.status_code == 200: html = r.text print(html) else: print(\"è®¿é—®å¤±è´¥\") url = 'http://httpbin.org/basic-auth/123/123' auth_html(url) è¯·æ±‚ç»“æœ { \"authenticated\": true, \"user\": \"123\" } MTIzOjEyMw==æ˜¯base64åŠ å¯†åçš„ã€‚ è§£å¯† echo \"MTIzOjEyMw==\" | base64 -d 123:123 ä¹Ÿå¯ä»¥ç›´æ¥æµè§ˆå™¨æµ‹è¯•è®¤è¯åŠŸèƒ½ã€‚ http://httpbin.org/basic-auth/ç”¨æˆ·å/å¯†ç  æµè§ˆå™¨f2 è¿‡æ»¤æ— å…³å…ƒç´  -.js -.jpg -.css -.gif -.png -.ico -.webp ","date":"2022-06-30","objectID":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/:1:5","tags":["webæµ‹è¯•"],"title":"httpå’Œhttpså„ç§æ–¹æ³•æµ‹è¯•","uri":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/"},{"categories":["å·¥å…·"],"content":"linuxç³»ç»Ÿå‘½ä»¤è¡Œè¯·æ±‚ getè¯·æ±‚ curl -X GET \"http://httpbin.org/get\" -H \"accept: application/json\" -H \"user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36\" postè¯·æ±‚ curl -X POST \"http://httpbin.org/post\" -H \"accept: application/json\" ","date":"2022-06-30","objectID":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/:1:6","tags":["webæµ‹è¯•"],"title":"httpå’Œhttpså„ç§æ–¹æ³•æµ‹è¯•","uri":"/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/"},{"categories":["å·¥å…·"],"content":"rmåƒåœ¾æ¡¶ rmå‘½ä»¤æ€ä¼¤åŠ›å¾ˆå¤§ï¼Œå¦‚æœè¯¯åˆ äº†ç³»ç»Ÿæ–‡ä»¶ï¼Œä¼šå¾ˆéº»çƒ¦ã€‚æ‰€ä»¥ï¼Œç»™linuxç³»ç»Ÿå»ºç«‹ä¸€ä¸ªåƒåœ¾æ¡¶ï¼Œæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œè¯¦æƒ…å‚è€ƒMake â€œrmâ€ Command To Move The Files To â€œTrash Canâ€ ã€‚ 1ã€ä¸‹è½½å®‰è£…saferm.sh git clone https://github.com/lagerspetz/linux-stuff sudo mv linux-stuff/scripts/saferm.sh /bin rm -Rf linux-stuff 2ã€ç¼–è¾‘.bashrcæ–‡ä»¶ï¼Œæœ«å°¾æ·»åŠ  alias rm=saferm.sh alias sudo='sudo ' 3ã€ä½¿ç¯å¢ƒç”Ÿæ•ˆ source .bashrc ä¹‹åï¼Œå†ä½¿ç”¨rmæˆ–è€…sudo rmå‘½ä»¤ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯mvæ“ä½œï¼Œç§»åŠ¨æ–‡ä»¶åˆ°Trashç›®å½•ã€‚ ","date":"2022-06-30","objectID":"/linux%E5%9E%83%E5%9C%BE%E6%A1%B6/:1:0","tags":["linuxåƒåœ¾æ¡¶"],"title":"linuxåƒåœ¾æ¡¶","uri":"/linux%E5%9E%83%E5%9C%BE%E6%A1%B6/"},{"categories":["å·¥å…·"],"content":"æœ¬æœºå¤–ç½‘IPè·å– https://ifconfig.me/ æˆ– curl ifconfig.me ","date":"2022-06-30","objectID":"/linux%E5%9E%83%E5%9C%BE%E6%A1%B6/:2:0","tags":["linuxåƒåœ¾æ¡¶"],"title":"linuxåƒåœ¾æ¡¶","uri":"/linux%E5%9E%83%E5%9C%BE%E6%A1%B6/"},{"categories":["å·¥å…·"],"content":"å®‰è£…jupyter 1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„Jupyter - Docker Official Images ã€‚ 2ã€ä¸‹è½½jupyteré•œåƒï¼ˆä»¥6.4.12ä¸ºä¾‹ï¼‰ docker pull jupyter/base-notebook:notebook-6.4.12 3ã€åˆ›å»ºé…ç½®ç›®å½• mkdir -p /opt/jupyter/jovyan mkdir -p /opt/jupyter/jovyan/.jupyter chmod 777 -R /opt/jupyter/jovyan 4ã€å¯åŠ¨jupyteræœåŠ¡ docker run --name vk-jupyter -d \\ -p 8888:8888 \\ -v /opt/jupyter/jovyan:/home/jovyan \\ jupyter/base-notebook:notebook-6.4.12 ä»¥ä¸Šå‘½ä»¤ï¼š å‘½åå®¹å™¨ä¸ºvk-jupyterï¼Œåå°è¿è¡Œ æ˜ å°„å®¿ä¸»æœº8888ç«¯å£åˆ°å®¹å™¨çš„8888ç«¯å£ æŒ‚è½½å®¿ä¸»æœºç›®å½•/opt/jupyter/jovyanåˆ°å®¹å™¨ç›®å½•/home/jovyan æ›´å¤šå¯åŠ¨å‘½ä»¤å‚æ•°å¯ä»¥å‚è€ƒJupyter Docker Stacks ã€‚ 5ã€éªŒè¯å®‰è£… docker psï¼Œjupyterå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-jupyterå®¹å™¨ã€‚ æµè§ˆå™¨è®¿é—® http://aliyunip:8888 ï¼Œå¯ä»¥çœ‹åˆ°Jupyterç™»å½•é¡µé¢ã€‚ 6ã€ç™»å½• docker exec -it vk-jupyter jupyter notebook list å¯ä»¥æŸ¥çœ‹åˆ°ç™»å½•éœ€è¦çš„tokenï¼Œä½¿ç”¨tokenå³å¯ç™»å½•è¿›å…¥jupyterç¼–è¾‘é¡µé¢ã€‚ é…ç½®jupyter 1ã€è®¾ç½®å¯†ç  docker exec -it vk-jupyter jupyter notebook password docker restart vk-jupyter 2ã€ä½¿ç”¨å¯†ç  æµè§ˆå™¨è®¿é—® http://aliyunip:8888 æ­¤æ—¶ä½¿ç”¨è‡ªå·±è®¾ç½®çš„å¯†ç å°±å¯ä»¥è®¿é—®jupyteräº†ã€‚ 3ã€æ ¹ç›®å½• jupyterç¼–è¾‘å™¨çš„é»˜è®¤æ ¹ç›®å½•ä¸º /home/jovyan ï¼Œå¯¹åº”å®¿ä¸»æœºç›®å½• /opt/jupyter/jovyan ï¼Œåˆ›å»ºçš„ç›®å½•å’Œæ–‡ä»¶éƒ½å»è¿™ä¸ªè·¯å¾„ä¸‹é¢å»æ‰¾ã€‚ é…ç½®Nginx jupyter ä½¿ç”¨äº† websocket åè®®ï¼Œæ‰€ä»¥éœ€è¦é…ç½®æ”¯æŒ websocketã€‚ å¦‚æœä¸é…ç½®çš„è¯ï¼Œé€šè¿‡åŸŸåè®¿é—®æ—¶ä¼šæŠ¥é”™æ— æ³•è¿æ¥å†…æ ¸ï¼Œä¹Ÿå°±æ— æ³•è¿è¡Œpythonè„šæœ¬ã€‚ server { listen 80; server_name jupyter.voidking.com; charset utf-8; location /{ proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://172.17.12.85:8888; # WebSocket support proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\"; } } jupyterå°æŠ€å·§ ","date":"2022-06-30","objectID":"/docker%E5%AE%89%E8%A3%85jupyter/:0:0","tags":["jupyter"],"title":"dockerå®‰è£…jupyter","uri":"/docker%E5%AE%89%E8%A3%85jupyter/"},{"categories":["å·¥å…·"],"content":"æ‰§è¡Œbash åœ¨ä»£ç æ¡†é‡Œè¾“å…¥å¹å·+bashå‘½ä»¤ï¼Œå³å¯æ‰§è¡Œbashï¼Œä¾‹å¦‚ï¼š !ls -l ","date":"2022-06-30","objectID":"/docker%E5%AE%89%E8%A3%85jupyter/:1:0","tags":["jupyter"],"title":"dockerå®‰è£…jupyter","uri":"/docker%E5%AE%89%E8%A3%85jupyter/"},{"categories":["å·¥å…·"],"content":"ç™»å½•è¿›å®¹å™¨ docker exec -it vk-jupyter /bin/bash docker exec --user root -it vk-jupyter /bin/bash ","date":"2022-06-30","objectID":"/docker%E5%AE%89%E8%A3%85jupyter/:2:0","tags":["jupyter"],"title":"dockerå®‰è£…jupyter","uri":"/docker%E5%AE%89%E8%A3%85jupyter/"},{"categories":["å·¥å…·"],"content":"å®‰è£…å¸¸ç”¨å‘½ä»¤ docker exec --user root -it vk-jupyter /bin/bash apt update apt install curl apt install unzip ","date":"2022-06-30","objectID":"/docker%E5%AE%89%E8%A3%85jupyter/:3:0","tags":["jupyter"],"title":"dockerå®‰è£…jupyter","uri":"/docker%E5%AE%89%E8%A3%85jupyter/"},{"categories":["å·¥å…·"],"content":"ubuntu20.04å®‰è£…docker ","date":"2022-06-29","objectID":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/:1:0","tags":["ubuntu"],"title":"ubuntu20.04å®‰è£…docker","uri":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/"},{"categories":["å·¥å…·"],"content":"æ“ä½œç³»ç»Ÿè¦æ±‚ Dockeråªæ”¯æŒ64ä½ç‰ˆæœ¬çš„ Ubuntu 18.04 LTSã€20.04 LTSã€21.04ã€21.10 æ“ä½œç³»ç»Ÿï¼Œæ›´æ—§çš„ Ubuntu æ“ä½œç³»ç»Ÿå¦‚ 16.04 å®˜æ–¹å·²ä¸å†ç»´æŠ¤ï¼› Docker Engine æ”¯æŒ x86_64 (or amd64)ã€armhfã€arm64ã€s390x ä½“ç³»æ¶æ„ã€‚ ","date":"2022-06-29","objectID":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/:1:1","tags":["ubuntu"],"title":"ubuntu20.04å®‰è£…docker","uri":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/"},{"categories":["å·¥å…·"],"content":"å¸è½½æ—§ç‰ˆæœ¬çš„ Docker Engine Dockerçš„æ—§ç‰ˆæœ¬è¢«ç§°ä¸ºdockerï¼Œdocker.ioæˆ–docker-engineã€‚å¦‚æœå®‰è£…äº†è¿™äº›ï¼Œè¯·å¸è½½å®ƒä»¬ï¼š sudo apt-get remove docker docker-engine docker.io containerd runc å¦‚æœæ‚¨æƒ³ä¿ç•™ç°æœ‰æ•°æ®ï¼Œé‚£ä¹ˆç›´æ¥è¿›å…¥ä¸‹ä¸€æ­¥å³å¯ã€‚ å¦‚æœæ‚¨ä¸æƒ³ä¿ç•™ç°æœ‰æ•°æ®ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚ imageã€containerã€volumeç­‰ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œç›¸æ¯”removeå‘½ä»¤ï¼Œpurgeä¼šåŒæ—¶æ¸…é™¤è½¯ä»¶åŒ…å’Œè½¯ä»¶çš„é…ç½®æ–‡ä»¶ã€‚ sudo apt-get purge docker-ce docker-ce-cli containerd.io ä¸»æœºä¸Šçš„ imageã€containerã€volume æˆ–è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚è¦åˆ é™¤æ‰€æœ‰æ˜ åƒã€å®¹å™¨å’Œå·ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåˆ é™¤å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼š sudo rm -rf /var/lib/docker sudo rm -rf /var/lib/containerd å¸è½½å®Œæˆã€‚ ","date":"2022-06-29","objectID":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/:1:2","tags":["ubuntu"],"title":"ubuntu20.04å®‰è£…docker","uri":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/"},{"categories":["å·¥å…·"],"content":"Docker Engine å®‰è£…æ–¹æ³• å®˜æ–¹æä¾›äº†ä¸‰ç§å®‰è£… Docker Engine çš„æ–¹æ³•ï¼š å¤§å¤šæ•°ç”¨æˆ·è®¾ç½® Docker çš„ä»“åº“ï¼Œä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ï¼Œä»¥ä¾¿äºå®‰è£…å’Œå‡çº§ä»»åŠ¡ï¼Œè¿™æ˜¯æ¨èçš„æ–¹æ³•ï¼› ä¸€äº›ç”¨æˆ·ä¸‹è½½ deb åŒ…å¹¶æ‰‹åŠ¨å®‰è£…ï¼Œå®Œå…¨æ‰‹åŠ¨ç®¡ç†å‡çº§ã€‚è¿™åœ¨è¯¸å¦‚åœ¨æ— æ³•è®¿é—® Internet çš„ç³»ç»Ÿä¸Šå®‰è£… Docker ç­‰æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼› åœ¨æµ‹è¯•å’Œå¼€å‘ç¯å¢ƒä¸­ï¼Œä¸€äº›ç”¨æˆ·é€‰æ‹©ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬æ¥å®‰è£… Dockerã€‚ æœ¬æ–‡åªä»‹ç» Docker Engine å®˜æ–¹å®‰è£…-Ubuntu ä¸­çš„ç¬¬ä¸€ç§æ–¹æ³•â€”â€”ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ã€‚ è®¾ç½® Docker Engine å­˜å‚¨åº“ â‘  æ›´æ–° apt åŒ…ç´¢å¼•å¹¶å®‰è£… ca-certificatesã€curlã€gnupgã€lsb-releaseç­‰ï¼Œä»¥å…è®¸ apt é€šè¿‡ HTTPS ä½¿ç”¨å­˜å‚¨åº“; sudo apt-get update sudo apt-get install ca-certificates curl gnupg lsb-release â‘¡ æ·»åŠ  Docker çš„å®˜æ–¹ GPG å¯†é’¥; curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg â‘¢ ä½¿ç”¨ä¸‹é¢å‘½ä»¤è®¾ç½® stable ä»“åº“ã€‚ echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null å®‰è£… Dokcer Engine å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Dokcer Engineï¼š sudo apt-get update sudo apt-get install docker-ce docker-ce-cli containerd.io å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Dokcer Engineï¼Œé¦–å…ˆä½¿ç”¨cpt-cacheå‘½ä»¤æŸ¥çœ‹ä»“åº“ä¸­ docker-ce çš„ç‰ˆæœ¬ï¼Œé€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ï¼Œä½¿ç”¨installå‘½ä»¤å®‰è£…ã€‚ apt-cache madison docker-ce sudo apt-get install docker-ce=\u003cVERSION_STRING\u003e docker-ce-cli=\u003cVERSION_STRING\u003e containerd.io æ›´æ–° Dokcer Engine sudo apt-get update sudo apt-get upgrade ","date":"2022-06-29","objectID":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/:1:3","tags":["ubuntu"],"title":"ubuntu20.04å®‰è£…docker","uri":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/"},{"categories":["å·¥å…·"],"content":"Docker Compose å®‰è£…æ–¹æ³• Docker Compose ç¨³å®šç‰ˆ 1.29.2 å®‰è£… ä¸‹é¢çš„æ­¥éª¤æ¥è‡ªäº Docker Compose å®˜æ–¹å®‰è£…-Ubuntu ã€‚ ç›®å‰ Docker Compose çš„ç¨³å®šç‰ˆä¸º 1.29.2ã€‚ è¿è¡Œä¸‹é¢çš„å‘½ä»¤å°† Docker Compose 1.29.2 çš„äºŒè¿›åˆ¶ç‰ˆæœ¬å®‰è£…åˆ° /usr/local/bin/docker-compose ä¸­ã€‚ è¦å®‰è£…ä¸åŒç‰ˆæœ¬çš„ Composeï¼Œè¯·å°† 1.29.2 æ›¿æ¢ä¸ºæ‚¨è¦ä½¿ç”¨çš„ Compose ç‰ˆæœ¬ã€‚ sudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose å¯¹äºŒè¿›åˆ¶æ–‡ä»¶ /usr/local/bin/docker-compose èµ‹äºˆå¯æ‰§è¡Œæƒé™ã€‚ sudo chmod +x /usr/local/bin/docker-compose æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ­£ç¡®è¾“å‡º compose ç‰ˆæœ¬å·ï¼Œå³æˆåŠŸã€‚ docker-compose --version Docker Compose V2 å®‰è£… å¯¹Docker Compose V2æœ‰å…´è¶£ï¼Œè¯·è®¿é—® Compose V2 ï¼Œæ¥è¿›è¡Œå®‰è£…ã€‚ ","date":"2022-06-29","objectID":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/:1:4","tags":["ubuntu"],"title":"ubuntu20.04å®‰è£…docker","uri":"/ubuntu20.04%E5%AE%89%E8%A3%85docker/"},{"categories":["ç¼–ç¨‹"],"content":"å¯å˜å’Œä¸å¯å˜ç±»å‹ ä¸å¯å˜ç±»å‹ï¼Œå†…å­˜ä¸­çš„æ•°æ®ä¸å…è®¸è¢«ä¿®æ”¹ï¼š æ•°å­—ç±»å‹ int, bool, float, complex, long(2.x) å­—ç¬¦ä¸² str å…ƒç»„ tuple å¯å˜ç±»å‹ï¼Œå†…å­˜ä¸­çš„æ•°æ®å¯ä»¥è¢«ä¿®æ”¹ï¼š åˆ—è¡¨ list å­—å…¸ dict é›†åˆset ","date":"2022-06-13","objectID":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/:1:0","tags":["python"],"title":"Pythonæ•°æ®ç»“æ„æ€»ç»“","uri":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/"},{"categories":["ç¼–ç¨‹"],"content":"å“ˆå¸Œ (hash) Python ä¸­å†…ç½®æœ‰ä¸€ä¸ªåå­—å«åš hash(o) çš„å‡½æ•° æ¥æ”¶ä¸€ä¸ªä¸å¯å˜ç±»å‹çš„æ•°æ®ä½œä¸ºå‚æ•° è¿”å›ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•° å“ˆå¸Œæ˜¯ä¸€ç§ç®—æ³•,å…¶ä½œç”¨å°±æ˜¯æå–æ•°æ®çš„ç‰¹å¾ç ï¼ˆæŒ‡çº¹ï¼‰ ç›¸åŒçš„å†…å®¹å¾—åˆ°ç›¸åŒçš„ç»“æœ ä¸åŒçš„å†…å®¹å¾—åˆ°ä¸åŒçš„ç»“æœ åœ¨Python ä¸­ï¼Œè®¾ç½®å­—å…¸çš„é”®å€¼å¯¹æ—¶ï¼Œä¼šé¦–å…ˆå¯¹keyè¿›è¡Œhashå·²å†³å®šå¦‚ä½•åœ¨å†…å­˜ä¸­ä¿å­˜å­—å…¸çš„æ•°æ®ï¼Œä»¥æ–¹ä¾¿åç»­å¯¹å­—å…¸çš„æ“ä½œï¼šå¢ã€åˆ ã€æ”¹ã€æŸ¥ é”®å€¼å¯¹çš„key å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹æ•°æ® é”®å€¼å¯¹çš„value å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„æ•°æ® ","date":"2022-06-13","objectID":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/:1:1","tags":["python"],"title":"Pythonæ•°æ®ç»“æ„æ€»ç»“","uri":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/"},{"categories":["ç¼–ç¨‹"],"content":"å¯ä»¥hashçš„ç±»å‹ å…ƒç»„ #ä»»æ„ç±»å‹è½¬æ¢æˆå…ƒç»„ç±»å‹ tuple() # tuple1 = (1,2,3) #å¯ä»¥hash print(hash(tuple1)) # 529344067295497451 å­—ç¬¦ä¸² #ä»»æ„ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹ str() str1 = \"hello world\" print(hash(str1)) # 8722840457505038127 æ•´å½¢ #ä»»æ„ç±»å‹è½¬æ¢æˆæ•´å½¢ç±»å‹ int() num = 10 print(hash(num)) æµ®ç‚¹å‹ #ä»»æ„ç±»å‹è½¬æ¢æˆæµ®ç‚¹ç±»å‹ float() num1 = 10.2 print(hash(num1)) å¸ƒå°”ç±»å‹ #ä»»æ„ç±»å‹è½¬æ¢æˆå¸ƒå°”ç±»å‹ã€‚True False bool() num1 = True print(hash(num1)) ","date":"2022-06-13","objectID":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/:1:2","tags":["python"],"title":"Pythonæ•°æ®ç»“æ„æ€»ç»“","uri":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸å¯ä»¥hashçš„ç±»å‹ åˆ—è¡¨ #ä»»æ„ç±»å‹è½¬æ¢æˆåˆ—è¡¨ç±»å‹ list() # list1 = [1,2,3,4,5] #ä¸å¯ä»¥hash hash(list1) # TypeError: unhashable type: 'list' å­—å…¸ # åˆ›å»ºä¸€ä¸ªå­—å…¸ dict() # my_dict = {'name':'smith', 'age':18} é›†åˆ # å…¶ä»–ç±»å‹è½¬æ¢æˆé›†åˆç±»å‹ set() set1 = {1,2,3,4,5} ","date":"2022-06-13","objectID":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/:1:3","tags":["python"],"title":"Pythonæ•°æ®ç»“æ„æ€»ç»“","uri":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•°çš„è¿”å›å€¼ åœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œæœ‰æ—¶å€™ï¼Œä¼šå¸Œæœ› ä¸€ä¸ªå‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå‘Šè¯‰è°ƒç”¨è€…ä¸€ä¸ªç»“æœï¼Œä»¥ä¾¿è°ƒç”¨è€…é’ˆå¯¹å…·ä½“çš„ç»“æœåšåç»­çš„å¤„ç† è¿”å›å€¼ æ˜¯å‡½æ•° å®Œæˆå·¥ä½œåï¼Œæœ€å ç»™è°ƒç”¨è€…çš„ ä¸€ä¸ªç»“æœ åœ¨å‡½æ•°ä¸­ä½¿ç”¨ return å…³é”®å­—å¯ä»¥è¿”å›ç»“æœ è°ƒç”¨å‡½æ•°ä¸€æ–¹ï¼Œå¯ä»¥ ä½¿ç”¨å˜é‡ æ¥ æ¥æ”¶ å‡½æ•°çš„è¿”å›ç»“æœ ","date":"2022-06-13","objectID":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/:2:0","tags":["python"],"title":"Pythonæ•°æ®ç»“æ„æ€»ç»“","uri":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸¾ä¾‹1 def my_func(): a = 10 b = 20 # print(a) return a print(b) my_func() # ç»“æœä¸ºç©ºã€‚æ²¡æœ‰å†…å®¹è¾“å‡ºã€‚print(b)è¯­å¥åœ¨return è¯­å¥åé¢ï¼Œä¸ä¼šè¢«æ‰§è¡Œã€‚ ","date":"2022-06-13","objectID":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/:2:1","tags":["python"],"title":"Pythonæ•°æ®ç»“æ„æ€»ç»“","uri":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸¾ä¾‹2 è®¾ç½®å˜é‡æ¥æ¥å—å‡½æ•°çš„è¿”å›ç»“æœ def my_func(): a = 10 b = 20 # print(a) return a print(b) result = my_func() print(result) # ç»“æœä¸º 10 ,è®¾ç½®ä¸€ä¸ªå˜é‡ result æ¥æ¥æ”¶å‡½æ•°è¿”å›ç»“æœ ","date":"2022-06-13","objectID":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/:2:2","tags":["python"],"title":"Pythonæ•°æ®ç»“æ„æ€»ç»“","uri":"/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"åŸºäºk8sçš„cephé›†ç¾¤æ­å»º ","date":"2022-05-16","objectID":"/ceph/:0:1","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"ç¯å¢ƒ master-139 mon,osd æ—¢åšç®¡ç†èŠ‚ç‚¹åˆåšå­èŠ‚ç‚¹ node1-140 mon,osd åšå­èŠ‚ç‚¹ node2-141 mon,osd åšå­èŠ‚ç‚¹ ceph ç‰ˆæœ¬ 13.2.10 mimic (stable) ","date":"2022-05-16","objectID":"/ceph/:0:2","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"ç³»ç»Ÿé…ç½® ç³»ç»Ÿé…ç½®å·¥ä½œï¼Œ ä¸‰å°èŠ‚ç‚¹ä¾æ¬¡æ‰§è¡Œ 1ã€ä¿®æ”¹ä¸»æœºåç§° [root@master-139 ~]# vi /etc/hostname master-139 2ã€ç¼–è¾‘hostsæ–‡ä»¶ 10.4.7.139 master-139 10.4.7.140 node1-140 10.4.7.141 node2-141 æ³¨æ„ï¼Œ è¿™é‡Œé¢çš„ä¸»æœºåç§°è¦å’ŒèŠ‚ç‚¹åç§°ä¿æŒä¸€è‡´ï¼Œ å¦åˆ™å®‰è£…çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ 3.ä¿®æ”¹yumæº cat \u003c\u003c EOF \u003e /etc/yum.repos.d/ceph.repo [ceph] name=Ceph packages for $basearch baseurl=https://mirrors.tuna.tsinghua.edu.cn/ceph/rpm-mimic/el7/x86_64/ enabled=1 gpgcheck=1 type=rpm-md gpgkey=https://download.ceph.com/keys/release.asc [ceph-noarch] name=Ceph noarch packages # å®˜æ–¹æº #baseurl=http://download.ceph.com/rpm-mimic/el7/noarch # æ¸…åæº baseurl=https://mirrors.tuna.tsinghua.edu.cn/ceph/rpm-mimic/el7/noarch/ enabled=1 gpgcheck=1 type=rpm-md gpgkey=https://download.ceph.com/keys/release.asc [ceph-source] name=Ceph source packages baseurl=https://mirrors.tuna.tsinghua.edu.cn/ceph/rpm-mimic/el7/SRPMS/ enabled=1 gpgcheck=1 type=rpm-md gpgkey=https://download.ceph.com/keys/release.asc EOF 4ã€å®‰è£…cephä¸ceph-deployç»„ä»¶ yum clean all \u0026\u0026 yum makecache yum -y install python-setuptools epel-release yum -y install python2-pip ceph-deploy ceph 5.å®‰è£…NTPæ—¶é—´åŒæ­¥å·¥å…· yum install ntp ntpdate ntp-doc -y ç¡®ä¿æ—¶åŒºæ˜¯æ­£ç¡®ï¼Œ è®¾ç½®å¼€æœºå¯åŠ¨ï¼š systemctl enable ntpd å¹¶å°†æ—¶é—´æ¯éš”1å°æ—¶è‡ªåŠ¨æ ¡å‡†åŒæ­¥ã€‚ç¼–è¾‘ vi /etc/rc.d/rc.local è¿½åŠ ï¼š /usr/sbin/ntpdate ntp1.aliyun.com \u003e /dev/null 2\u003e\u00261; /sbin/hwclock -w é…ç½®å®šæ—¶ä»»åŠ¡, æ‰§è¡Œcrontab -e åŠ å…¥ï¼š ","date":"2022-05-16","objectID":"/ceph/:1:0","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"å…å¯†ç SSHç™»é™† 6.å¼€æ”¾ç«¯å£ï¼Œ éç”Ÿäº§ç¯å¢ƒï¼Œ å¯ä»¥ç›´æ¥ç¦ç”¨é˜²ç«å¢™ï¼š systemctl stop firewalld.service systemctl disable firewalld.service 7.SELINUXè®¾ç½® SELinux è®¾ä¸ºç¦ç”¨ï¼š æ°¸ä¹…ç”Ÿæ•ˆï¼š ç¼–è¾‘ vi /etc/selinux/config ä¿®æ”¹ï¼š SELINUX=disabled 8.ç”Ÿæˆå¯†é’¥ æ‰§è¡Œ ssh-keygen ï¼Œä¸€ç›´æŒ‰é»˜è®¤æç¤ºç‚¹å‡»ç”Ÿæˆ RSA å¯†é’¥ä¿¡æ¯ã€‚ 9.åˆ†å‘å¯†é’¥è‡³å„æœºå™¨èŠ‚ç‚¹ ssh-copy-id root@master-139 ssh-copy-id root@node1-140 ssh-copy-id root@node2-141 æ³¨æ„ï¼šä»¥ä¸Š1-9æ­¥éª¤åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼ï¼ ","date":"2022-05-16","objectID":"/ceph/:1:1","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"é›†ç¾¤æ­å»ºé…ç½® 1.é‡‡ç”¨rootèº«ä»½è¿›è¡Œå®‰è£…ï¼Œåœ¨ç®¡ç†èŠ‚ç‚¹åˆ›å»ºé›†ç¾¤é…ç½®ç›®å½• cd /usr/local/ mkdir ceph-cluster cd ceph-cluster æ³¨æ„ï¼š æ­¤ç›®å½•ä½œä¸º ceph æ“ä½œå‘½ä»¤çš„åŸºå‡†ç›®å½•ï¼Œ ä¼šå­˜å‚¨å¤„ç†é…ç½®ä¿¡æ¯ã€‚ 2.åˆ›å»ºé›†ç¾¤ï¼Œ åŒ…å«ä¸‰å°æœºå™¨èŠ‚ç‚¹ï¼š ceph-deploy new master-139 node1-140 node2-141 åˆ›å»ºæˆåŠŸåï¼Œ ä¼šç”Ÿä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚ [root@master-139 ceph-cluster]# ll total 16 -rw-r--r-- 1 root root 242 May 15 03:15 ceph.conf -rw-r--r-- 1 root root 5559 May 15 03:15 ceph-deploy-ceph.log -rw------- 1 root root 73 May 15 03:15 ceph.mon.keyring 3.å¦‚æœæ¥ä¸‹æ¥é›†ç¾¤çš„å®‰è£…é…ç½®å‡ºç°é—®é¢˜ï¼Œ å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¸…é™¤ï¼Œ å†é‡æ–°å®‰è£…(å¯é€‰) ceph-deploy purge master-139 node1-140 node2-141 ceph-deploy purgedata master-139 node1-140 node2-141 ceph-deploy forgetkeys 4.å°†ä¸‰å°èŠ‚ç‚¹çš„monä¿¡æ¯ä¹Ÿåˆ é™¤ï¼ˆå¯é€‰ï¼‰ rm -rf /var/run/ceph/ 5.ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ æœ‰äº›é…ç½®åé¢éœ€ç”¨åˆ° vi /usr/local/ceph-cluster/ceph.conf [global] # è®¾ç½®poolæ± é»˜è®¤åˆ†é…æ•°é‡ é»˜è®¤å‰¯æœ¬æ•°ä¸º3 osd pool default size = 3 # å®¹å¿æ›´å¤šçš„æ—¶é’Ÿè¯¯å·® mon clock drift allowed = 2 mon clock drift warn backoff = 30 # å…è®¸åˆ é™¤pool mon_allow_pool_delete = true [mgr] # å¼€å¯WEBä»ªè¡¨ç›˜ mgr modules = dashboard ç¬¬ä¸€é¡¹ä¸ºå‰¯æœ¬æ•°ï¼Œ è®¾ä¸º 3 ä»½ã€‚ ç¬¬äºŒã€ä¸‰é¡¹ä¸ºå…è®¸ä¸€å®šæ—¶é—´çš„æ¼‚ç§»è¯¯å·®ã€‚ è®¾ç½®å®Œæˆåçš„é…ç½®å¦‚ä¸‹ [global] fsid = 67dcaf50-275b-442f-b69d-677fd8afcc94 mon_initial_members = master-139, node1-140, node2-141 mon_host = 10.4.7.139,10.4.7.140,10.4.7.141 auth_cluster_required = cephx auth_service_required = cephx auth_client_required = cephx # è®¾ç½®poolæ± é»˜è®¤åˆ†é…æ•°é‡ é»˜è®¤å‰¯æœ¬æ•°ä¸º3 osd pool default size = 3 # å®¹å¿æ›´å¤šçš„æ—¶é’Ÿè¯¯å·® mon clock drift allowed = 2 mon clock drift warn backoff = 30 # å…è®¸åˆ é™¤pool mon_allow_pool_delete = true [mgr] # å¼€å¯WEBä»ªè¡¨ç›˜ mgr modules = dashboard 6.æ‰§è¡Œå®‰è£… ceph-deploy install master-139 node1-140 node2-141 å¦‚æœå‡ºç°é”™è¯¯ï¼š ceph_deploy][ERROR ] RuntimeError: Failed to execute command: ceph --version å¯ä»¥åœ¨å„èŠ‚ç‚¹ä¸Šå•ç‹¬è¿›è¡Œå®‰è£…ï¼š yum -y install ceph å¦‚æœæ²¡æœ‰ä»“åº“æ–‡ä»¶ ceph.repo ï¼Œ æŒ‰ä¸Šé¢çš„æ­¥éª¤æ‰‹å·¥åˆ›å»ºã€‚ 7.åˆå§‹monitorä¿¡æ¯ ceph-deploy mon create-initial ## ceph-deploy --overwrite-conf mon create-initial åˆå§‹åŒ–åç”Ÿæˆä»¥ä¸‹ä¿¡æ¯ [ceph_deploy.gatherkeys][INFO ] Storing ceph.client.admin.keyring [ceph_deploy.gatherkeys][INFO ] Storing ceph.bootstrap-mds.keyring [ceph_deploy.gatherkeys][INFO ] Storing ceph.bootstrap-mgr.keyring [ceph_deploy.gatherkeys][INFO ] keyring 'ceph.mon.keyring' already exists [ceph_deploy.gatherkeys][INFO ] Storing ceph.bootstrap-osd.keyring [ceph_deploy.gatherkeys][INFO ] Storing ceph.bootstrap-rgw.keyring [ceph_deploy.gatherkeys][INFO ] Destroy temp directory /tmp/tmpuBxetx [root@master-139 ceph-cluster]# ll total 220 -rw------- 1 root root 113 May 15 03:29 ceph.bootstrap-mds.keyring -rw------- 1 root root 113 May 15 03:29 ceph.bootstrap-mgr.keyring -rw------- 1 root root 113 May 15 03:29 ceph.bootstrap-osd.keyring -rw------- 1 root root 113 May 15 03:29 ceph.bootstrap-rgw.keyring -rw------- 1 root root 151 May 15 03:29 ceph.client.admin.keyring -rw-r--r-- 1 root root 529 May 15 03:22 ceph.conf -rw-r--r-- 1 root root 167370 May 15 03:29 ceph-deploy-ceph.log -rw------- 1 root root 73 May 15 03:22 ceph.mon.keyring 8.åŒæ­¥ç®¡ç†ä¿¡æ¯ ä¸‹å‘é…ç½®æ–‡ä»¶å’Œç®¡ç†ä¿¡æ¯è‡³å„èŠ‚ç‚¹ï¼š ceph-deploy admin master-139 node1-140 node2-141 9.å®‰è£…mgr(ç®¡ç†å®ˆæŠ¤è¿›ç¨‹)ï¼Œ å¤§äº12.xç‰ˆæœ¬éœ€å®‰è£…ï¼Œ æˆ‘ä»¬è£…çš„æ˜¯æœ€æ–°ç‰ˆï¼Œéœ€æ‰§è¡Œï¼š ceph-deploy mgr create master-139 node1-140 node2-141 10.æŸ¥çœ‹å½“å‰cephç‰ˆæœ¬ # ceph -v ceph version 13.2.10 (564bdc4ae87418a232fc901524470e1a0f76d641) mimic (stable) ä»¥ä¸Šæ“ä½œéƒ½åœ¨ç®¡ç†èŠ‚ç‚¹master-139ä¸Šæ‰§è¡Œï¼ï¼ ","date":"2022-05-16","objectID":"/ceph/:2:0","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"å®‰è£…OSD(å¯¹è±¡å­˜å‚¨è®¾å¤‡) æ³¨æ„ï¼š æ–°ç‰ˆæœ¬çš„ OSD æ²¡æœ‰ prepare ä¸ activate å‘½ä»¤ã€‚ è¿™é‡Œéœ€è¦æ–°çš„ç¡¬ç›˜ä½œä¸º OSD å­˜å‚¨è®¾å¤‡ï¼Œ å…³é—­è™šæ‹Ÿæœºï¼Œ å¢åŠ ä¸€å—ç¡¬ç›˜ï¼Œ ä¸ç”¨æ ¼å¼åŒ–ã€‚ å„èŠ‚ç‚¹éƒ½æ·»åŠ 100Gç¡¬ç›˜ã€‚ é‡å¯ï¼Œ fdisk -l æŸ¥çœ‹æ–°ç£ç›˜åç§°ï¼š Disk /dev/sdb: 107.4 GB, 107374182400 bytes, 209715200 sectors Units = sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes 1.æ‰§è¡Œåˆ›å»ºOSDå‘½ä»¤ ceph-deploy osd create --data /dev/sdb master-139 ceph-deploy osd create --data /dev/sdb node1-140 ceph-deploy osd create --data /dev/sdb node2-141 ä¸‰å°èŠ‚ç‚¹éƒ½éœ€åˆ†åˆ«ä¾æ¬¡æ‰§è¡Œã€‚ éƒ½åˆ‡æ¢åˆ°/usr/local/ceph-clusterä¸‹æ‰§è¡Œ ceph-deploy gatherkeys master-139 2.éªŒè¯èŠ‚ç‚¹ï¼š è¾“å…¥ ceph health æˆ– ceph -s æŸ¥çœ‹ï¼Œ å‡ºç° HEALTH_OK ä»£è¡¨æ­£å¸¸ã€‚ [root@master-139 ceph-cluster]# ceph -s cluster: id: 4f74ac9a-b5f5-4bf5-9107-15ab8ea41f76 health: HEALTH_OK services: mon: 3 daemons, quorum master-139,node1-140,node2-141 mgr: master-139(active), standbys: node1-140, node2-141 osd: 3 osds: 3 up, 3 in data: pools: 0 pools, 0 pgs objects: 0 objects, 0 B usage: 3.0 GiB used, 297 GiB / 300 GiB avail pgs: 3.å¦‚æœå‡ºç°é”™è¯¯ï¼Œå„èŠ‚ç‚¹ä¸Šæ‰§è¡Œ,ç¡®ä¿æ—¶é—´ä¸€è‡´ã€‚ ntpdate ntp1.aliyun.com ","date":"2022-05-16","objectID":"/ceph/:2:1","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"å®‰è£…ç®¡ç†åå°ï¼ˆå¯é€‰ï¼‰ 1.å¼€å¯dashboardæ¨¡å— ceph mgr module enable dashboard 2.ç”Ÿæˆç­¾å ceph dashboard create-self-signed-cert 3.åˆ›å»ºç›®å½• mkdir mgr-dashboard [root@master-139 mgr-dashboard]# pwd /usr/local/ceph-cluster/mgr-dashboard 4.ç”Ÿæˆå¯†é’¥å¯¹ cd /usr/local/ceph-cluster/mgr-dashboard openssl req -new -nodes -x509 -subj \"/O=IT/CN=ceph-mgr-dashboard\" -days 3650 -keyout dashboard.key -out dashboard.crt -extensions v3_ca 5.å¯åŠ¨dashboard ceph mgr module disable dashboard ceph mgr module enable dashboard 6.è®¾ç½®IPä¸PORT ceph config set mgr mgr/dashboard/server_addr 10.4.7.139 ceph config set mgr mgr/dashboard/server_port 18843 æ³¨æ„ï¼šipä¸ºç®¡ç†èŠ‚ç‚¹çš„ä¸»IP 7.å…³é—­HTTPS ceph config set mgr mgr/dashboard/ssl false 8.æŸ¥çœ‹æœåŠ¡ä¿¡æ¯ [root@master-139 mgr-dashboard]# ceph mgr services { \"dashboard\": \"https://master-139:8443/\" } 9.è®¾ç½®ç®¡ç†ç”¨æˆ·ä¸å¯†ç  ceph dashboard set-login-credentials admin admin 10.è®¿é—® http://10.4.7.139:18843 ","date":"2022-05-16","objectID":"/ceph/:3:0","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"åˆ›å»ºCephfs é›†ç¾¤åˆ›å»ºå®Œåï¼Œ é»˜è®¤æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Cephfs å¯ä»¥æ”¯æŒå¯¹å¤–è®¿é—®çš„æ–‡ä»¶ç³»ç»Ÿã€‚ 1.åˆ›å»ºä¸¤ä¸ªå­˜å‚¨æ± , æ‰§è¡Œä¸¤æ¡å‘½ä»¤ ceph osd pool create cephfs_data 128 ceph osd pool create cephfs_metadata 64 å°‘äº 5 ä¸ª OSD å¯æŠŠ pg_num è®¾ç½®ä¸º 128 OSD æ•°é‡åœ¨ 5 åˆ° 10 ï¼Œå¯ä»¥è®¾ç½® pg_num ä¸º 512 OSD æ•°é‡åœ¨ 10 åˆ° 50 ï¼Œå¯ä»¥è®¾ç½® pg_num ä¸º 4096 OSD æ•°é‡å¤§äº 50 ï¼Œéœ€è¦è®¡ç®— pg_num çš„å€¼ é€šè¿‡ä¸‹é¢å‘½ä»¤å¯ä»¥åˆ—å‡ºå½“å‰åˆ›å»ºçš„å­˜å‚¨æ± ï¼š [root@master-139 ceph-cluster]# ceph osd lspools 1 cephfs_data 2 cephfs_metadata 2.åˆ›å»ºfs, åç§°ä¸ºcephfs ceph fs new cephfs cephfs_metadata cephfs_data 3.çŠ¶æ€æŸ¥çœ‹ï¼Œ ä»¥ä¸‹ä¿¡æ¯ä»£è¡¨æ­£å¸¸ [root@master-139 ceph-cluster]# ceph fs ls name: cephfs, metadata pool: cephfs_metadata, data pools: [cephfs_data ] [root@haproxy ceph-cluster]# ceph mds stat cephfs-1/1/1 up {0=haproxy=up:active}, 1 up:standby è¿™é‡Œmdså¦‚æœåªæ˜¾ç¤ºcephfs-1/1/1 up åé¢æ²¡å†…å®¹è¯´æ˜mdsæ²¡åˆ›å»ºéœ€è¦æ‰‹åŠ¨åˆ›å»ºã€‚å¦‚æœä¸åˆ›å»ºåé¢cephæŒ‚è½½ä¼šæŠ¥é”™ã€‚æç¤ºmdsä¸å­˜åœ¨ã€‚ [root@master-139 ceph-cluster]# ceph mds stat cephfs-0/0/1 up #æŒ‚è½½æ—¶æŠ¥é”™ä¿¡æ¯ [root@node1-140 ceph-cluster]# ceph-fuse -k /etc/ceph/ceph.client.admin.keyring -m 10.4.7.139:6789 /usr/local/cephfs_directory ceph-fuse[42676]: starting ceph client 2022-05-15 03:43:48.136 7f84eb7cac00 -1 init, newargv = 0x561dca3c0240 newargc=7 ceph-fuse[42676]: probably no MDS server is up? ceph-fuse[42676]: ceph mount failed with (65536) Unknown error 65536 æ‰‹åŠ¨åˆ›å»ºmds ceph-deploy mds create master-139 node1-140 node2-141 é™„ï¼š å¦‚æœåˆ›å»ºé”™è¯¯ï¼Œ éœ€è¦åˆ é™¤ï¼Œ æ‰§è¡Œï¼š ceph fs rm cephfs --yes-i-really-mean-it ceph osd pool delete cephfs_data cephfs_data --yes-i-really-really-mean-it ç¡®ä¿åœ¨ceph.confä¸­å¼€å¯ä»¥ä¸‹é…ç½®ï¼š [mon] mon allow pool delete = true ","date":"2022-05-16","objectID":"/ceph/:4:0","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"é‡‡ç”¨fuseæŒ‚è½½ å…ˆç¡®å®š ceph-fuse å‘½ä»¤èƒ½æ‰§è¡Œï¼Œ å¦‚æœæ²¡æœ‰ï¼Œ åˆ™å®‰è£…ï¼š yum -y install ceph-fuse 1.åˆ›å»ºæŒ‚è½½ç›®å½• mkdir -p /usr/local/cephfs_directory 2.æŒ‚è½½cephfs ceph-fuse -k /etc/ceph/ceph.client.admin.keyring -m 10.4.7.139:6789 /usr/local/cephfs_directory 3.æŸ¥çœ‹ç£ç›˜æŒ‚è½½ä¿¡æ¯ #df -hT /usr/local/cephfs_directory ç›®å½•å·²æˆåŠŸæŒ‚è½½ã€‚ [root@node1-140 ceph-cluster]# df -hT | grep cephfs ceph-fuse fuse.ceph-fuse 94G 0 94G 0% /usr/local/cephfs_directory æ³¨æ„æŸ¥çœ‹å½“å‰ceph çš„ä¸»èŠ‚ç‚¹æ˜¯è°ã€‚ä¸‰å°æœºå™¨ä¸­å¦‚æœæœ‰ä¸€å°çªç„¶å®•æœºï¼Œç„¶ååˆæ¢å¤äº†ã€‚æ­¤æ—¶å‡ºé—®é¢˜çš„é‚£å°å°†æˆä¸ºä¸»èŠ‚ç‚¹ã€‚ [root@node1-140 ceph-cluster]# ceph -s cluster: id: 4f74ac9a-b5f5-4bf5-9107-15ab8ea41f76 health: HEALTH_OK services: mon: 3 daemons, quorum master-139,node1-140,node2-141 mgr: master-139(active), standbys: node1-140, node2-141 mds: cephfs-1/1/1 up {0=master-139=up:active}, 2 up:standby osd: 3 osds: 3 up, 3 in data: pools: 2 pools, 192 pgs objects: 21 objects, 2.2 KiB usage: 3.0 GiB used, 297 GiB / 300 GiB avail pgs: 192 active+clean io: client: 5.0 KiB/s wr, 0 op/s rd, 9 op/s wr activeçš„æ˜¯ä¸»èŠ‚ç‚¹ï¼Œ standbysæ˜¯å¤‡ç”¨èŠ‚ç‚¹ã€‚ ","date":"2022-05-16","objectID":"/ceph/:4:1","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"cephå¸¸ç”¨å‘½ä»¤ ceph # æŸ¥çœ‹æœºå™¨çš„ç›‘æ§çŠ¶æ€ ceph health # æŸ¥çœ‹cephçš„å®æ—¶è¿è¡ŒçŠ¶æ€ ceph -w # æ£€æŸ¥ä¿¡æ¯çŠ¶æ€ä¿¡æ¯ ceph -s # æŸ¥çœ‹cephå­˜å‚¨ç©ºé—´ ceph df cephè®¤è¯ åˆ›å»ºç®¡ç†ç”¨æˆ· ä¸ºcephåˆ›å»ºä¸€ä¸ªadminç”¨æˆ·å¹¶ä¸ºadminç”¨æˆ·åˆ›å»ºä¸€ä¸ªå¯†é’¥ï¼ŒæŠŠå¯†é’¥ä¿å­˜åˆ°/etc/cephç›®å½•ä¸‹ï¼š ceph auth get-or-create client.admin mds 'allow' osd 'allow *' mon 'allow *' \u003e /etc/ceph/ceph.client.admin.keyring æˆ– ceph auth get-or-create client.admin mds 'allow' osd 'allow *' mon 'allow *' -o /etc/ceph/ceph.client.admin.keyring ä¸ºosd.0åˆ›å»ºä¸€ä¸ªç”¨æˆ·å¹¶åˆ›å»ºä¸€ä¸ªkey ceph auth get-or-create osd.0 mon 'allow rwx' osd 'allow *' -o /var/lib/ceph/osd/ceph-0/keyring ä¸ºmds.node1åˆ›å»ºä¸€ä¸ªç”¨æˆ·å¹¶åˆ›å»ºä¸€ä¸ªkey ceph auth get-or-create mds.node1 mon 'allow rwx' osd 'allow *' mds 'allow *' -o /var/lib/ceph/mds/ceph-node1/keyring æŸ¥çœ‹cephé›†ç¾¤ä¸­çš„è®¤è¯ç”¨æˆ·åŠç›¸å…³çš„key ceph auth list åˆ é™¤é›†ç¾¤ä¸­çš„ä¸€ä¸ªè®¤è¯ç”¨æˆ· ceph auth del osd.0 é›†ç¾¤ç›¸å…³ # æŸ¥çœ‹é›†ç¾¤çš„è¯¦ç»†é…ç½® ceph daemon mon.node1 config show | more # æŸ¥çœ‹é›†ç¾¤å¥åº·çŠ¶æ€ç»†èŠ‚ ceph health detail # æŸ¥çœ‹ceph logæ—¥å¿—æ‰€åœ¨çš„ç›®å½• ceph-conf --name mon.node1 --show-config-value log_file monå‘½ä»¤ ceph mon stat#æŸ¥çœ‹monçš„çŠ¶æ€ä¿¡æ¯ ceph mon dump#æŸ¥çœ‹ä½ cephæ˜ å°„ä¿¡æ¯ ceph mon remove node1 #åˆ é™¤ä¸€ä¸ªmonèŠ‚ç‚¹ ceph-deploy mon destroy {host-name [host-name]...} ceph mon add node1 node1_ip #æ·»åŠ ä¸€ä¸ªmonèŠ‚ç‚¹ ceph-deploy mon create {host-name [host-name]...} monèŠ‚ç‚¹çš„/var/lib/ceph/mon/ceph-node2/store.dbæ–‡ä»¶å†…å®¹ä¸€è‡´ï¼Œæ·»åŠ monæ³¨æ„å…ˆæ”¹é…ç½®ç›®å½•é…ç½®æ–‡ä»¶ï¼Œå†æ¨é€åˆ°æ‰€æœ‰èŠ‚ç‚¹ ceph-deploy --overwrite-conf config push node1 node2 node3 mdså‘½ä»¤ ceph mds stat #æŸ¥çœ‹msdçŠ¶æ€ ceph mds dump #msdçš„æ˜ å°„ä¿¡æ¯ ceph mds rm 0 mds.node1#åˆ é™¤ä¸€ä¸ªmdsèŠ‚ç‚¹ ceph-deploy mds create {host-name}[:{daemon-name}] [{host-name}[:{daemon-name}] ...] osdå‘½ä»¤ ceph osd stat #æŸ¥çœ‹osdçŠ¶æ€ ceph osd dump #osdçš„æ˜ å°„ä¿¡æ¯ ceph osd tree#æŸ¥çœ‹osdç›®å½•æ ‘ ceph osd down 0 #downæ‰osd.0èŠ‚ç‚¹ ceph osd rm 0#é›†ç¾¤åˆ é™¤ä¸€ä¸ªosdç¡¬ç›˜ ceph osd crush remove osd.4#åˆ é™¤æ ‡è®° ceph osd getmaxosd#æŸ¥çœ‹æœ€å¤§osdä¸ªæ•° ceph osd setmaxosd 10#è®¾ç½®osdçš„ä¸ªæ•° ceph osd out osd.3#æŠŠä¸€ä¸ªosdèŠ‚ç‚¹é€å‡ºé›†ç¾¤ ceph osd in osd.3#æŠŠé€å‡ºçš„osdåŠ å…¥é›†ç¾¤ ceph osd pause#æš‚åœosd ï¼ˆæš‚åœåæ•´ä¸ªé›†ç¾¤ä¸å†æ¥æ”¶æ•°æ®ï¼‰ ceph osd unpause#å†æ¬¡å¼€å¯osd ï¼ˆå¼€å¯åå†æ¬¡æ¥æ”¶æ•°æ®ï¼‰ ceph osd lspools#æŸ¥çœ‹cephé›†ç¾¤ä¸­çš„poolæ•°é‡ ceph osd pool create jiayuan 100#åˆ›å»ºä¸€ä¸ªpool è¿™é‡Œçš„100æŒ‡çš„æ˜¯PGç»„ ceph osd pool delete jiayuan jiayuan --yes-i-really-really-mean-it #é›†ç¾¤åå­—éœ€è¦é‡å¤ä¸¤æ¬¡ rados df#æ˜¾ç¤ºé›†ç¾¤ä¸­poolçš„è¯¦ç»†ä¿¡æ¯ ceph osd pool get data pg_num #æŸ¥çœ‹dataæ± çš„pgæ•°é‡ ceph osd pool set data target_max_bytes 100000000000000#è®¾ç½®dataæ± çš„æœ€å¤§å­˜å‚¨ç©ºé—´ä¸º100Tï¼ˆé»˜è®¤æ˜¯1T) ceph osd pool set data size 3 #è®¾ç½®dataæ± çš„å‰¯æœ¬æ•°æ˜¯3 ceph osd pool set data min_size 2 #è®¾ç½®dataæ± èƒ½æ¥å—å†™æ“ä½œçš„æœ€å°å‰¯æœ¬ä¸º2 ceph osd pool set data pg_num 100#è®¾ç½®ä¸€ä¸ªpoolçš„pgæ•°é‡ ceph osd pool set data pgp_num 100#è®¾ç½®ä¸€ä¸ªpoolçš„pgpæ•°é‡ pgå‘½ä»¤ ceph pg stat#æŸ¥çœ‹pgçŠ¶æ€ ceph pg dump#æŸ¥çœ‹pgç»„çš„æ˜ å°„ä¿¡æ¯ ceph pg map 0.3f#æŸ¥çœ‹ä¸€ä¸ªpgçš„map ceph pg 0.26 query#æŸ¥çœ‹pgè¯¦ç»†ä¿¡æ¯ ceph pg dump --format plain#æ˜¾ç¤ºä¸€ä¸ªé›†ç¾¤ä¸­çš„æ‰€æœ‰çš„pgç»Ÿè®¡ radoså’Œrbdå‘½ä»¤ rados lspools#æŸ¥çœ‹cephé›†ç¾¤ä¸­æœ‰å¤šå°‘ä¸ªpool ï¼ˆåªæ˜¯æŸ¥çœ‹pool) rados df #æŸ¥çœ‹cephé›†ç¾¤ä¸­æœ‰å¤šå°‘ä¸ªpool,å¹¶ä¸”æ¯ä¸ªpoolå®¹é‡åŠåˆ©ç”¨æƒ…å†µ rados mkpool test#åˆ›å»ºä¸€ä¸ªpool rados create test-object -p test#åˆ›å»ºä¸€ä¸ªå¯¹è±¡object rados rm test-object-1 -p test#åˆ é™¤ä¸€ä¸ªå¯¹è±¡object rados -p test ls rbd ls pool_name#æŸ¥çœ‹cephä¸­ä¸€ä¸ªpoolé‡Œçš„æ‰€æœ‰é•œåƒ rbd info -p pool_name --image 74cb427c-cee9-47d0-b467-af217a67e60a #æŸ¥çœ‹ceph poolä¸­ä¸€ä¸ªé•œåƒçš„ä¿¡æ¯ rbd create -p test --size 10000 zhanguo#åœ¨testæ± ä¸­åˆ›å»ºä¸€ä¸ªå‘½åä¸ºzhanguoçš„10000Mçš„é•œåƒ rbd rm -p test lizhanguo #åˆ é™¤ä¸€ä¸ªé•œåƒ rbd resize -p test --size 20000 zhanguo #è°ƒæ•´ä¸€ä¸ªé•œåƒçš„å°ºå¯¸ CRUSHæ˜ å°„ ceph osd getcrushmap -o MAP #è·å–ä¸€ä¸ªCRUSHæ˜ å°„ crushtool -d MAP -o MAP.TXT #åç¼–è¯‘ä¸€ä¸ªCRUSHæ˜ å°„ crushtool -c MAP.TXT -o MAP #ç¼–è¯‘ä¸€ä¸ªCRUSHæ˜ å°„ ceph osd setcrushmap -i MAP #è®¾ç½®ä¸€ä¸ªCRUSHæ˜ å°„ å—è®¾å¤‡çš„ä¸€äº›å‘½ä»¤ å•ä½ä¸ºMï¼Œé»˜è®¤åœ¨rbd poolä¸­ åˆ›å»ºå—è®¾å¤‡ï¼šrbd create {image-name} --size {megabytes} --pool {pool-name} åˆ—å‡ºå—è®¾å¤‡ï¼šrbd ls {poolname} -l æ£€ç´¢å—ä¿¡æ¯ï¼šrbd --image {image-name} info æ›´æ”¹å—å¤§å°ï¼šrbd resize --image {image-name} --size {megabytes} åˆ é™¤å—è®¾å¤‡ï¼šrbd rm {image-name} æ˜ å°„å—è®¾å¤‡ï¼šrbd map {image-name} --pool {pool-name} --id {user-name} æŸ¥çœ‹å·²æ˜ å°„å—è®¾å¤‡ï¼šrbd showmapped å–æ¶ˆæ˜ å°„ï¼šrbd unmap /dev/rbd/{poolname}/{imagename} å¿«ç…§å’Œå…‹éš†ç›¸å…³å‘½ä»¤ åˆ›å»ºå¿«ç…§ï¼š rbd --pool {pool-name} snap create --snap {snap-name} {image-name} rbd snap create {pool-name}/{image-name}@{snap-name} å¿«ç…§å›æ»šï¼š rbd --pool {pool-name} snap rollback --snap {snap-name} {image-name} rbd snap rollback {pool-name}/{image-name}@{snap-name} æ¸…é™¤å¿«ç…§ï¼š rbd --pool {pool-name} snap purge {image-name} rbd snap purge {pool-name}/{image-name} åˆ é™¤å¿«ç…§ï¼š rbd --pool {pool-name} snap rm --snap {snap-name} {image-name} rbd snap rm {pool-name}/{image-name}@{snap-name","date":"2022-05-16","objectID":"/ceph/:5:0","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"æ—¥å¿—æ–‡ä»¶æ±‡æ€» mon ,mgr , osd ç­‰å®‰è£…æŠ¥é”™ä¿¡æ¯å‡åœ¨å¯¹åº”æ—¥å¿—æ–‡ä»¶ä¸­ã€‚ /usr/local/ceph-cluster/ceph-deploy-ceph.log # tree /var/log/ceph/ /var/log/ceph/ â”œâ”€â”€ ceph.audit.log â”œâ”€â”€ ceph-client.admin.log â”œâ”€â”€ ceph.log â”œâ”€â”€ ceph-mds.haproxy.log â”œâ”€â”€ ceph-mgr.haproxy.log â”œâ”€â”€ ceph-mon.haproxy.log â”œâ”€â”€ ceph-osd.0.log â””â”€â”€ ceph-volume.log ","date":"2022-05-16","objectID":"/ceph/:6:0","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["linux"],"content":"å‚è€ƒæ–‡æ¡£ 1 2 3 ","date":"2022-05-16","objectID":"/ceph/:6:1","tags":["cephé›†ç¾¤"],"title":"ceph","uri":"/ceph/"},{"categories":["ç¼–ç¨‹"],"content":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python ç¼–è¯‘å®‰è£…python ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:1","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"å®‰è£…pythonä¾èµ–ç¯å¢ƒ sudo yum -y install epel-release sudo yum -y update é‡å¯(å¯é€‰) reboot ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:2","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"å®‰è£…ç¼–è¯‘ç¯å¢ƒ sudo yum -y groupinstall \"Development Tools\" sudo yum -y install openssl-devel bzip2-devel libffi-devel xz-devel ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:3","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"ç¡®è®¤gccå¯ç”¨ $ gcc --version gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44) Copyright (C) 2015 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:4","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"é€‰æ‹©ç¼–è¯‘åŒ… å®˜ç½‘ç¼–è¯‘åŒ… wget https://www.python.org/ftp/python/3.9.12/Python-3.9.12.tgz ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:5","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"è§£å‹å¹¶è¿›å…¥ tar -zxvf Python-3.9.12.tgz cd Python-3.9.12/ ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:6","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"é…ç½®è„šæœ¬ ./configure --enable-optimizations ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:7","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"å¼€å§‹ç¼–è¯‘ sudo make altinstall ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:8","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚æœæˆåŠŸå°†ä¼šæ˜¾ç¤ºä»¥ä¸‹å†…å®¹ copying build/scripts-3.9/pydoc3.9 -\u003e /usr/local/bin copying build/scripts-3.9/idle3.9 -\u003e /usr/local/bin copying build/scripts-3.9/2to3-3.9 -\u003e /usr/local/bin changing mode of /usr/local/bin/pydoc3.9 to 755 changing mode of /usr/local/bin/idle3.9 to 755 changing mode of /usr/local/bin/2to3-3.9 to 755 rm /usr/local/lib/python3.9/lib-dynload/_sysconfigdata__linux_x86_64-linux-gnu.py rm -r /usr/local/lib/python3.9/lib-dynload/__pycache__ /usr/bin/install -c -m 644 ./Misc/python.man \\ /usr/local/share/man/man1/python3.9.1 if test \"xupgrade\" != \"xno\" ; then \\ case upgrade in \\ upgrade) ensurepip=\"--altinstall --upgrade\" ;; \\ install|*) ensurepip=\"--altinstall\" ;; \\ esac; \\ ./python -E -m ensurepip \\ $ensurepip --root=/ ; \\ fi Looking in links: /tmp/tmp3k1lhlmm Processing /tmp/tmp3k1lhlmm/setuptools-58.1.0-py3-none-any.whl Processing /tmp/tmp3k1lhlmm/pip-22.0.4-py3-none-any.whl Installing collected packages: setuptools, pip Successfully installed pip-22.0.4 setuptools-58.1.0 ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:9","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸ [root@43f873a76b81 Python-3.9.12]# python3.9 --version Python 3.9.12 ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:10","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["ç¼–ç¨‹"],"content":"pipæ˜¯å¦ä¹Ÿå®‰è£…äº† [root@43f873a76b81 Python-3.9.12]# pip3.9 --version pip 22.0.4 from /usr/local/lib/python3.9/site-packages/pip (python 3.9) ","date":"2022-05-11","objectID":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/:0:11","tags":["python"],"title":"åŸºäºcentos7/8å®‰è£…ä»»æ„ç‰ˆæœ¬python","uri":"/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/"},{"categories":["å·¥å…·"],"content":"gitå…¥é—¨ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:0","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"ä»‹ç» Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:1","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"windowsä¸­å®‰è£… å„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä¸‹è½½ å®‰è£…ååœ¨å¼€å§‹èœå•é‡Œæ‰¾åˆ°\"Git\"-\u003eâ€œGit Bashâ€ï¼Œä¼šå¼¹å‡º Git å‘½ä»¤çª—å£ï¼Œä½ å¯ä»¥åœ¨è¯¥çª—å£è¿›è¡Œ Git æ“ä½œã€‚ åˆ›å»ºå·¥ä½œç›®å½•ï¼Œæ¯”å¦‚åœ¨Dç›˜æ ¹ç›®å½•ä¸‹åˆ›å»ºblog mkdir -p blog ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:2","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"gitåˆå§‹åŒ– é»˜è®¤ä¼šç”Ÿæˆ.gitæ–‡ä»¶å¤¹ git init ç”¨æˆ·ä¿¡æ¯ é…ç½®ä¸ªäººçš„ç”¨æˆ·åç§°å’Œç”µå­é‚®ä»¶åœ°å€ï¼š git config --global user.name \"smith\" git config --global user.email smith@gmail.com æŸ¥çœ‹é…ç½®ä¿¡æ¯ git config --list ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­çœ‹åˆ° vim ~/.gitconfig [http] postBuffer = 2M [user] name = smith email = smith@gmail.com ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:3","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"git å·¥ä½œæµç¨‹ git-process.png åˆ›å»ºreadme.txtæ–‡ä»¶ Git is a version control system. Git is free software. æŠŠæ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒº git add readme.txt git commit -m \"first push\" -m:åé¢è¾“å…¥æœ¬æ¬¡æäº¤çš„è¯´æ˜ï¼Œå¯ä»¥è¾“å…¥ä»»ä½•å†…å®¹ã€‚ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:4","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"æŸ¥çœ‹æäº¤æ—¥å¿— $ git log commit 934e87838ae19b396a9db3779f5722be53701f22 (HEAD -\u003e master) Author: smith \u003csmith@gmail.com\u003e Date: Mon May 9 09:17:05 2022 +0800 thired version commit 7580fbdc4ddfd4cf740cba51e1661b020806638c Author: smith \u003csmith@gmail.com\u003e Date: Mon May 9 09:16:18 2022 +0800 second version commit 48eca9171d496942470fbcb5b93500bf593c3fdf Author: smith \u003csmith@gmail.com\u003e Date: Mon May 9 09:12:21 2022 +0800 first push ç²¾ç®€è¾“å‡ºåŠ ä¸Š--pretty=oneline $ git log --pretty=oneline 934e87838ae19b396a9db3779f5722be53701f22 (HEAD -\u003e master) thired version 7580fbdc4ddfd4cf740cba51e1661b020806638c second version 48eca9171d496942470fbcb5b93500bf593c3fdf first push commitåé¢çš„idæ˜¯æ ¹æ®sha1ç®—æ³•å¾—æ¥çš„ã€‚ å„ä¸ªç‰ˆæœ¬ä¸­readme.txtå†…å®¹ ç‰ˆæœ¬ä¸€ Git is a version control system. Git is free software. ç‰ˆæœ¬äºŒ Git is a version control system. Git is free software. second version ç‰ˆæœ¬ä¸‰ Git is a version control system. Git is free software. thired version ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:5","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"ç‰ˆæœ¬å›é€€ é€šè¿‡git logæŸ¥çœ‹æœ€æ–°ä¸€æ¬¡æäº¤idä¸º934e87838ae19b396a9db3779f5722be53701f22ã€‚gitä¸­ç”¨HEADè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ã€‚ä¸Šä¸€ä¸ªç‰ˆæœ¬ç”¨HEAD^'è¡¨ç¤ºï¼Œä¸Šä¸Šç‰ˆæœ¬ç”¨HEAD^^è¡¨ç¤ºã€‚å¾€ä¸Š100ä¸ªç‰ˆæœ¬ç”¨HEAD~100è¡¨ç¤ºã€‚ç°åœ¨å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚ $ git reset --hard HEAD^ HEAD is now at 7580fbd second version æŸ¥çœ‹readme.txtæ–‡ä»¶å†…å®¹ã€‚æœç„¶å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬äº†ã€‚ æŸ¥çœ‹å½“å‰ç‰ˆæœ¬åº“çŠ¶æ€ $ git log commit 7580fbdc4ddfd4cf740cba51e1661b020806638c (HEAD -\u003e master) Author: smith \u003csmith@gmail.com\u003e Date: Mon May 9 09:16:18 2022 +0800 second version commit 48eca9171d496942470fbcb5b93500bf593c3fdf Author: smith \u003csmith@gmail.com\u003e Date: Mon May 9 09:12:21 2022 +0800 first push å‘ç°ä¹‹å‰çš„ç‰ˆæœ¬ä¸è§äº†ï¼Œè¿˜å¯ä»¥é€šè¿‡commit id å›åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ã€‚idä¸ç”¨å†™å…¨ï¼Œè‡³å°‘å†™6ä½ã€‚ $ git reset --hard 934e87 HEAD is now at 934e878 thired version å†æ¬¡æŸ¥çœ‹readme.txtæ–‡ä»¶æœç„¶åˆå›æ¥äº†ã€‚ Gitçš„ç‰ˆæœ¬å›é€€é€Ÿåº¦éå¸¸å¿«ï¼Œå› ä¸ºGitåœ¨å†…éƒ¨æœ‰ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„HEADæŒ‡é’ˆï¼Œå½“ä½ å›é€€ç‰ˆæœ¬çš„æ—¶å€™ï¼ŒGitä»…ä»…æ˜¯æŠŠHEADä»æŒ‡å‘thired version. å¦‚æœè¿˜æƒ³å›é€€åˆ°æœ€æ–°ç‰ˆæœ¬è€Œåˆå¿˜è®°äº†commit id ï¼ŒGitæä¾›äº†ä¸€ä¸ªå‘½ä»¤git reflogç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤ã€‚ $ git reflog 934e878 (HEAD -\u003e master) HEAD@{0}: reset: moving to 934e87 7580fbd HEAD@{1}: reset: moving to HEAD^ 934e878 (HEAD -\u003e master) HEAD@{2}: commit: thired version 7580fbd HEAD@{3}: commit: second version 48eca91 HEAD@{4}: commit (initial): first push ç„¶åé€šè¿‡commit idå›åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:6","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"æ€»ç»“ HEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤git reset --hard commit_idã€‚ ç©¿æ¢­å‰ï¼Œç”¨git logå¯ä»¥æŸ¥çœ‹æäº¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚ è¦é‡è¿”æœªæ¥ï¼Œç”¨git reflogæŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:7","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"å·¥ä½œåŒºå’Œæš‚å­˜åŒº å·¥ä½œåŒº åœ¨ç¬”è®°æœ¬ä¸­åˆ›å»ºçš„blogæ–‡ä»¶å¤¹å°±æ˜¯å·¥ä½œåŒºã€‚ æš‚å­˜åŒº ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰ å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚Gitçš„ç‰ˆæœ¬åº“é‡Œå­˜äº†å¾ˆå¤šä¸œè¥¿ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ç§°ä¸ºstageï¼ˆæˆ–è€…å«indexï¼‰çš„æš‚å­˜åŒºï¼Œè¿˜æœ‰Gitä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯masterï¼Œä»¥åŠæŒ‡å‘masterçš„ä¸€ä¸ªæŒ‡é’ˆå«HEADã€‚ æŠŠæ–‡ä»¶å‘gitç‰ˆæœ¬åº“é‡Œæ·»åŠ æ—¶ï¼Œåˆ†ä¸¤æ­¥æ‰§è¡Œï¼š ç”¨git addæŠŠæ–‡ä»¶æ·»åŠ è¿›å»ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒº ç”¨git commitæäº¤æ›´æ”¹ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚ å› ä¸ºæˆ‘ä»¬åˆ›å»ºGitç‰ˆæœ¬åº“æ—¶ï¼ŒGitè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†å”¯ä¸€ä¸€ä¸ªmasteråˆ†æ”¯ï¼Œæ‰€ä»¥ï¼Œç°åœ¨ï¼Œgit commitå°±æ˜¯å¾€masteråˆ†æ”¯ä¸Šæäº¤æ›´æ”¹ã€‚ éœ€è¦æäº¤çš„æ–‡ä»¶ä¿®æ”¹é€šé€šæ”¾åˆ°æš‚å­˜åŒºï¼Œç„¶åï¼Œä¸€æ¬¡æ€§æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹ã€‚ æµ‹è¯•ï¼š ä¿®æ”¹readme.txtæ–‡ä»¶ã€‚æäº¤åˆ°æš‚å­˜åŒºï¼ŒæŸ¥çœ‹å½“å‰çŠ¶æ€ï¼Œæœ€åæäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚ $ git status On branch master Changes to be committed: (use \"git restore --staged \u003cfile\u003e...\" to unstage) modified: readme.txt $ git commit -m \"change sth\" [master 410b2e7] change sth 1 file changed, 1 insertion(+), 1 deletion(-) $ git status On branch master nothing to commit, working tree clean ä¸€æ—¦æäº¤åï¼Œå¦‚æœä½ åˆæ²¡æœ‰å¯¹å·¥ä½œåŒºåšä»»ä½•ä¿®æ”¹ï¼Œé‚£ä¹ˆå·¥ä½œåŒºå°±æ˜¯â€œå¹²å‡€â€çš„ï¼š $ git status On branch master nothing to commit, working tree clean ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:8","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"ç®¡ç†ä¿®æ”¹ æµ‹è¯•è¿‡ç¨‹ï¼šç¬¬ä¸€æ¬¡ä¿®æ”¹ -\u003e git add -\u003e ç¬¬äºŒæ¬¡ä¿®æ”¹ -\u003e git commit ä¿®æ”¹readme.txtæ–‡ä»¶ ç¬¬ä¸€æ¬¡ä¿®æ”¹å¹¶æäº¤åˆ°ç¼“å­˜åŒº $ vi readme.txt Git is a version control system. Git is free software. with add $ git add readme.txt ç¬¬äºŒæ¬¡ä¿®æ”¹ç›´æ¥ä½¿ç”¨commit æäº¤ $ with readme.txt Git is a version control system. Git is free software. no add $ git commit -m \"change sth\" [master 729bf9e] change sth 1 file changed, 1 insertion(+) æœ€åæŸ¥çœ‹çŠ¶æ€ï¼Œå‘ç°ç¬¬äºŒæ¬¡ä¿®æ”¹æ²¡è¢«æäº¤ã€‚ $ git status On branch master Changes not staged for commit: (use \"git add \u003cfile\u003e...\" to update what will be committed) (use \"git restore \u003cfile\u003e...\" to discard changes in working directory) modified: readme.txt no changes added to commit (use \"git add\" and/or \"git commit -a\") æ€»ç»“ Gitç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œå½“ä½ ç”¨git addå‘½ä»¤åï¼Œåœ¨å·¥ä½œåŒºçš„ç¬¬ä¸€æ¬¡ä¿®æ”¹è¢«æ”¾å…¥æš‚å­˜åŒºï¼Œå‡†å¤‡æäº¤ï¼Œä½†æ˜¯ï¼Œåœ¨å·¥ä½œåŒºçš„ç¬¬äºŒæ¬¡ä¿®æ”¹å¹¶æ²¡æœ‰æ”¾å…¥æš‚å­˜åŒºï¼Œæ‰€ä»¥ï¼Œgit commitåªè´Ÿè´£æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æäº¤äº†ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡çš„ä¿®æ”¹è¢«æäº¤äº†ï¼Œç¬¬äºŒæ¬¡çš„ä¿®æ”¹ä¸ä¼šè¢«æäº¤ã€‚ æäº¤åï¼Œç”¨git diff HEAD -- readme.txtå‘½ä»¤å¯ä»¥æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«ï¼š $ git diff HEAD -- readme.txt diff --git a/readme.txt b/readme.txt index 23faa4f..199308a 100644 --- a/readme.txt +++ b/readme.txt @@ -1,3 +1,3 @@ Git is a version control system. Git is free software. -with add +no add é‚£æ€ä¹ˆæäº¤ç¬¬äºŒæ¬¡ä¿®æ”¹å‘¢ï¼Ÿä½ å¯ä»¥ç»§ç»­git addå†git commitï¼Œä¹Ÿå¯ä»¥åˆ«ç€æ€¥æäº¤ç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œå…ˆgit addç¬¬äºŒæ¬¡ä¿®æ”¹ï¼Œå†git commitï¼Œå°±ç›¸å½“äºæŠŠä¸¤æ¬¡ä¿®æ”¹åˆå¹¶åä¸€å—æäº¤äº†ï¼š ç¬¬ä¸€æ¬¡ä¿®æ”¹ -\u003e git add -\u003e ç¬¬äºŒæ¬¡ä¿®æ”¹ -\u003e git add -\u003e git commit éƒ½æ“ä½œå®ŒåæŸ¥çœ‹çŠ¶æ€ã€‚ $ git status On branch master nothing to commit, working tree clean ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:9","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"æ’¤é”€æ›´æ”¹ ä¿®æ”¹readme.txtæ–‡ä»¶â€“\u003egit add(æäº¤åˆ°æš‚å­˜åŒºï¼Œæ²¡æœ‰commit) â€“\u003eå‘ç°æ–‡ä»¶ä¿®æ”¹æœ‰é”™è¯¯â€“\u003egit reset HEAD file(æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹å›é€€åˆ°å·¥ä½œåŒº) â€“\u003egit checkout â€“ file(ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹)â€“\u003egit status (æŸ¥çœ‹çŠ¶æ€) vi readme.txt Git is a version control system. Git is free software. no add add sthssssss æäº¤åˆ°æš‚å­˜åŒºï¼Œæ²¡æœ‰commit $ git add readme.txt æŸ¥çœ‹çŠ¶æ€ã€‚æœ‰ä¿®æ”¹ã€‚ $ git status On branch master Changes to be committed: (use \"git restore --staged \u003cfile\u003e...\" to unstage) modified: readme.txt æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹å›é€€åˆ°å·¥ä½œåŒº $ git reset HEAD readme.txt Unstaged changes after reset: M readme.txt æŸ¥çœ‹çŠ¶æ€ã€‚å·²æ’¤å›ã€‚ $ git status On branch master Changes not staged for commit: (use \"git add \u003cfile\u003e...\" to update what will be committed) (use \"git restore \u003cfile\u003e...\" to discard changes in working directory) modified: readme.txt no changes added to commit (use \"git add\" and/or \"git commit -a\") ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ $ git checkout -- readme.txt æŸ¥çœ‹çŠ¶æ€ã€‚ $ git status On branch master nothing to commit, working tree clean æ–‡ä»¶å·²è¿˜åŸ $ cat readme.txt Git is a version control system. Git is free software. no add æ€»ç»“ æäº¤åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶å¯ä»¥ç”¨git reset HEAD fileå‘½ä»¤æŠŠæ–‡ä»¶é€€å›åˆ°å·¥ä½œåŒºã€‚ é€€å›åˆ°å·¥ä½œåŒºåç”¨git checkout -- fileå‘½ä»¤ä¸¢å¼ƒå·¥ä½œåŒºä¿®æ”¹ã€‚ å¯ä»¥ç”¨git statusæŸ¥çœ‹çŠ¶æ€ã€‚ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:10","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"åˆ é™¤æ–‡ä»¶ æ–‡ä»¶æäº¤åç›´æ¥æŠŠæ–‡ä»¶åˆ é™¤å¯ä»¥åœ¨ç‰ˆæœ¬åº“ä¸­æ‰¾åˆ°å¹¶æ¢å¤ï¼Œå¦‚æœä»æ¥æ²¡æäº¤è¿‡ï¼Œé‚£æ–‡ä»¶æ˜¯æ— æ³•æ¢å¤çš„ã€‚ å®éªŒï¼šåˆ›å»ºtest.txtæ–‡ä»¶å¹¶æäº¤åˆ°ç‰ˆæœ¬åº“ï¼Œå·¥ä½œåŒºåˆ é™¤æ–‡ä»¶ã€‚å¹¶æ¢å¤ã€‚ git add . git commit -m 'test' rm test.txt æŸ¥çœ‹çŠ¶æ€ $ git status On branch master Changes not staged for commit: (use \"git add/rm \u003cfile\u003e...\" to update what will be committed) (use \"git restore \u003cfile\u003e...\" to discard changes in working directory) deleted: test.txt no changes added to commit (use \"git add\" and/or \"git commit -a\") æ¢å¤æ–‡ä»¶ $ git checkout -- test.txt git checkoutå…¶å®æ˜¯ç”¨ç‰ˆæœ¬åº“é‡Œçš„ç‰ˆæœ¬æ›¿æ¢å·¥ä½œåŒºçš„ç‰ˆæœ¬ï¼Œæ— è®ºå·¥ä½œåŒºæ˜¯ä¿®æ”¹è¿˜æ˜¯åˆ é™¤ï¼Œéƒ½å¯ä»¥â€œä¸€é”®è¿˜åŸâ€ã€‚ å¦‚æœç¡®å®ä¸æƒ³ç”¨äº†ç‰ˆæœ¬åŒºå¯ä»¥åˆ é™¤æ–‡ä»¶ï¼Œè¿™æ ·å°±æ°¸ä¹…åˆ é™¤äº†ã€‚ git rm test.txt ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:11","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"è¿œç¨‹ä»“åº“ éœ€æ±‚ï¼š å°†æœ¬åœ°ä»“å’Œè¿œç¨‹ä»“æ•°æ®åŒæ­¥ï¼Œè¿˜å¯ä»¥å¤šäººååŒã€‚ æœ¬åœ°ä»“ï¼šç¬”è®°æœ¬ è¿œç¨‹ä»“ï¼šgithub 1.githubä¸Šåˆ›å»ºæ–°ä»“åº“ 2.å°†è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ° $ git remote add origin git@github.com:githubç”¨æˆ·å/ä»“åº“å.git 3.æŠŠæœ¬åœ°åº“æ‰€æœ‰å†…å®¹æ¨é€åˆ°è¿œç¨‹åº“ $ git push -u origin master æŠŠæœ¬åœ°åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ï¼Œç”¨git pushå‘½ä»¤ï¼Œå®é™…ä¸Šæ˜¯æŠŠå½“å‰åˆ†æ”¯masteræ¨é€åˆ°è¿œç¨‹ã€‚ç”±äºè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†-uå‚æ•°ï¼ŒGitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å†…å®¹æ¨é€çš„è¿œç¨‹æ–°çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åçš„æ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚ æ¨é€æˆåŠŸåï¼Œå¯ä»¥ç«‹åˆ»åœ¨GitHubé¡µé¢ä¸­çœ‹åˆ°è¿œç¨‹åº“çš„å†…å®¹å·²ç»å’Œæœ¬åœ°ä¸€æ¨¡ä¸€æ ·ã€‚ åé¢å†æ¬¡æ¨é€å¯ä»¥ä½¿ç”¨ç®€åŒ–å‘½ä»¤ $ git push origin master åˆ é™¤è¿œç¨‹åº“ å¦‚æœæ·»åŠ çš„æ—¶å€™åœ°å€å†™é”™äº†ï¼Œæˆ–è€…å°±æ˜¯æƒ³åˆ é™¤è¿œç¨‹åº“ï¼Œå¯ä»¥ç”¨git remote rm \u003cname\u003eå‘½ä»¤ã€‚ä½¿ç”¨å‰ï¼Œå»ºè®®å…ˆç”¨git remote -væŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ã€‚ $ git remote -v origin git@github.com:michaelliao/learn-git.git (fetch) origin git@github.com:michaelliao/learn-git.git (push) ç„¶åï¼Œæ ¹æ®åå­—åˆ é™¤ï¼Œæ¯”å¦‚åˆ é™¤originï¼š $ git remote rm origin æ­¤å¤„çš„â€œåˆ é™¤â€å…¶å®æ˜¯è§£é™¤äº†æœ¬åœ°å’Œè¿œç¨‹çš„ç»‘å®šå…³ç³»ï¼Œå¹¶ä¸æ˜¯ç‰©ç†ä¸Šåˆ é™¤äº†è¿œç¨‹åº“ã€‚è¿œç¨‹åº“æœ¬èº«å¹¶æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ã€‚è¦çœŸæ­£åˆ é™¤è¿œç¨‹åº“ï¼Œéœ€è¦ç™»å½•åˆ°GitHubï¼Œåœ¨åå°é¡µé¢æ‰¾åˆ°åˆ é™¤æŒ‰é’®å†åˆ é™¤ã€‚ æ€»ç»“ è¦å…³è”ä¸€ä¸ªè¿œç¨‹åº“ï¼Œä½¿ç”¨å‘½ä»¤git remote add origin git@server-name:path/repo-name.gitï¼› å…³è”ä¸€ä¸ªè¿œç¨‹åº“æ—¶å¿…é¡»ç»™è¿œç¨‹åº“æŒ‡å®šä¸€ä¸ªåå­—ï¼Œoriginæ˜¯é»˜è®¤ä¹ æƒ¯å‘½åï¼› å…³è”åï¼Œä½¿ç”¨å‘½ä»¤git push -u origin masterç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯çš„æ‰€æœ‰å†…å®¹ï¼› æ­¤åï¼Œæ¯æ¬¡æœ¬åœ°æäº¤åï¼Œåªè¦æœ‰å¿…è¦ï¼Œå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤git push origin masteræ¨é€æœ€æ–°ä¿®æ”¹ã€‚ ä»è¿œç¨‹åº“å…‹éš† å…‹éš†ä¸€ä¸ªæœ¬åœ°åº“ $ git clone git@github.com:githubç”¨æˆ·å/ä»“åº“å.git æœ¬åœ°æŸ¥çœ‹æœ‰äº†ã€‚ æœ‰å‡ ç§æ–¹å¼å…‹éš†ä»“åº“åˆ°æœ¬åœ° https :https://github.com/githubç”¨æˆ·å/ä»“åº“å.git ssh : git@github.com :githubç”¨æˆ·å/ä»“åº“å.git github cli : gh repo clone githubç”¨æˆ·å/ä»“åº“å æ¨èä½¿ç”¨sshæ–¹å¼ï¼Œé€Ÿåº¦æ›´å¿«ã€‚ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:12","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"åˆ†æ”¯ç®¡ç† åˆ›å»ºåˆ†æ”¯dev $ git checkout -b dev Switched to a new branch 'dev' æŸ¥çœ‹å½“å‰åˆ†æ”¯ï¼Œæ˜Ÿå·ä»£è¡¨å½“å‰åˆ†æ”¯ $ git branch -a * dev master å†™å…¥å†…å®¹ $ vi readme.txt Git is a version control system. Git is free software. dev branch add sth ä¸Šä¼ åˆ°æš‚å­˜åŒºï¼Œå¹¶æ¨é€åˆ°devåˆ†æ”¯ã€‚ $ git add . $ git commit -m \"push dev branch\" [dev d51e5f2] push dev branch 1 file changed, 1 insertion(+) åˆ‡æ¢åˆ°masterä¸»åˆ†æ”¯ï¼ŒæŸ¥çœ‹readme.txtæ–‡ä»¶å‘ç°æœ€åä¸€è¡Œä¸è§äº†ã€‚gitä¸­å„åˆ†æ”¯ä¹‹é—´äº’ä¸å½±å“ã€‚ git checkout master å°†devåˆ†æ”¯å’Œmasterä¸»åˆ†æ”¯åˆå¹¶ã€‚mergeåé¢æ˜¯è¦åˆå¹¶çš„åˆ†æ”¯åã€‚ $ git merge dev Updating 8e3076e..d51e5f2 Fast-forward readme.txt | 1 + 1 file changed, 1 insertion(+) åˆ‡æ¢åˆ°masteråˆ†æ”¯ git checkout master å†æ¬¡æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œæ˜¾ç¤ºäº†ã€‚ $ cat readme.txt Git is a version control system. Git is free software. dev branch add sth åˆ é™¤devåˆ†æ”¯ git branch -d dev æ€»ç»“ Gité¼“åŠ±å¤§é‡ä½¿ç”¨åˆ†æ”¯ï¼š æŸ¥çœ‹åˆ†æ”¯ï¼šgit branch åˆ›å»ºåˆ†æ”¯ï¼šgit branch \u003cname\u003e åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout \u003cname\u003eæˆ–è€…git switch \u003cname\u003e åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b \u003cname\u003eæˆ–è€…git switch -c \u003cname\u003e åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge \u003cname\u003e åˆ é™¤åˆ†æ”¯ï¼šgit branch -d \u003cname\u003e æ–°ç‰ˆæœ¬git æ”¯æŒswitchæ¥åˆ‡æ¢åˆ†æ”¯ã€‚æ›´åŠ å®¹æ˜“åŒºåˆ†ã€‚ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:13","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"åˆ†æ”¯ç®¡ç†ç­–ç•¥ é€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æœå¯èƒ½ï¼ŒGitä¼šç”¨Fast forwardæ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚ å¦‚æœè¦å¼ºåˆ¶ç¦ç”¨Fast forwardæ¨¡å¼ï¼ŒGitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚ ä¸‹é¢æˆ‘ä»¬å®æˆ˜ä¸€ä¸‹--no-ffæ–¹å¼çš„git mergeï¼š é¦–å…ˆï¼Œä»ç„¶åˆ›å»ºå¹¶åˆ‡æ¢devåˆ†æ”¯ï¼š $ git switch -c dev Switched to a new branch 'dev' ä¿®æ”¹readme.txtæ–‡ä»¶ï¼Œå¹¶æäº¤ä¸€ä¸ªæ–°çš„commitï¼š $ git add readme.txt $ git commit -m \"add merge\" [dev f52c633] add merge 1 file changed, 1 insertion(+) ç°åœ¨ï¼Œæˆ‘ä»¬åˆ‡æ¢å›masterï¼š $ git switch master Switched to branch 'master' å‡†å¤‡åˆå¹¶devåˆ†æ”¯ï¼Œè¯·æ³¨æ„--no-ffå‚æ•°ï¼Œè¡¨ç¤ºç¦ç”¨Fast forwardï¼š $ git merge --no-ff -m \"merge with no-ff\" dev Merge made by the 'recursive' strategy. readme.txt | 1 + 1 file changed, 1 insertion(+) å› ä¸ºæœ¬æ¬¡åˆå¹¶è¦åˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼Œæ‰€ä»¥åŠ ä¸Š-må‚æ•°ï¼ŒæŠŠcommitæè¿°å†™è¿›å»ã€‚ åˆå¹¶åï¼Œæˆ‘ä»¬ç”¨git logçœ‹çœ‹åˆ†æ”¯å†å²ï¼š $ git log --graph --pretty=oneline --abbrev-commit * f116cb6 (HEAD -\u003e master) merge with no-ff |\\ | * 98d73ce (dev) add merge |/ * d51e5f2 push dev branch * 8e3076e init * 3f097bb dev branch commit * 601bf08 del sth åˆ†æ”¯ç­–ç•¥ masteråˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ä»…ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ devåˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠdevåˆ†æ”¯åˆå¹¶åˆ°masterä¸Šï¼Œåœ¨masteråˆ†æ”¯å‘å¸ƒ1.0ç‰ˆæœ¬ã€‚ ä½ å’Œä½ çš„å°ä¼™ä¼´ä»¬æ¯ä¸ªäººéƒ½åœ¨devåˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€devåˆ†æ”¯ä¸Šåˆå¹¶å°±å¯ä»¥äº†ã€‚ åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Š--no-ffå‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åçš„å†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œfast forwardåˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚ Bugåˆ†æ”¯ å‘ç°masteråˆ†æ”¯æœ‰Bugéœ€è¦ä¿®å¤ï¼Œæ­¤æ—¶devä¸Šçš„å·¥ä½œè¿˜æ²¡æäº¤åˆ°æš‚å­˜åŒºã€‚å¯ä»¥ç”¨git stashå‘½ä»¤å°†å½“å‰å·¥ä½œç°åœºä¿å­˜èµ·æ¥ï¼Œåé¢ä¿®å¤å®ŒBugååœ¨è¿˜åŸå›æ¥ã€‚ $ git status On branch dev Changes not staged for commit: (use \"git add \u003cfile\u003e...\" to update what will be committed) (use \"git restore \u003cfile\u003e...\" to discard changes in working directory) modified: readme.txt no changes added to commit (use \"git add\" and/or \"git commit -a\") $ git stash Saved working directory and index state WIP on dev: 7f2ad74 init status $ git status On branch dev nothing to commit, working tree clean é¦–å…ˆç¡®å®šè¦åœ¨å“ªä¸ªåˆ†æ”¯ä¸Šä¿®å¤bugï¼Œå‡å®šéœ€è¦åœ¨masteråˆ†æ”¯ä¸Šä¿®å¤ï¼Œå°±ä»masteråˆ›å»ºä¸´æ—¶åˆ†æ”¯ï¼š $ git checkout master Switched to branch 'master' åˆ›å»ºæ–°åˆ†æ”¯issue-102 $ git checkout -b issue-102 Switched to a new branch 'issue-102' ä¿®å¤Bugï¼ˆä¿®æ”¹readme.txtæ–‡ä»¶å†…å®¹ï¼‰ï¼Œç„¶åæäº¤ã€‚ $ git add readme.txt $ git commit -m \"fix bug 102\" [issue-102 858cab6] fix bug 102 1 file changed, 1 insertion(+) ä¿®å¤å®Œæˆåï¼Œåˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œå¹¶å®Œæˆåˆå¹¶ï¼Œæœ€ååˆ é™¤issue-102åˆ†æ”¯ï¼š $ git switch master Switched to branch 'master' $ git merge --no-ff -m \"merged bug fix 102\" issue-102 Merge made by the 'ort' strategy. readme.txt | 1 + 1 file changed, 1 insertion(+) ç°åœ¨å›åˆ°devåˆ†æ”¯è¿˜åŸä¹‹å‰çš„å·¥ä½œçŠ¶æ€ $ git switch dev Switched to branch 'dev' æŸ¥çœ‹ä¹‹å‰å­˜å‚¨çš„æ•°æ® $ git stash list stash@{0}: WIP on dev: 7f2ad74 init status ä¸¤ç§æ–¹æ³•æ¢å¤ä¹‹å‰çš„å·¥ä½œå†…å®¹ ç”¨git stash applyæ¢å¤ï¼Œä½†æ˜¯æ¢å¤åï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤ï¼Œä½ éœ€è¦ç”¨git stash dropæ¥åˆ é™¤ ç”¨git stash popï¼Œæ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ äº† $ git stash pop On branch dev Changes not staged for commit: (use \"git add \u003cfile\u003e...\" to update what will be committed) (use \"git restore \u003cfile\u003e...\" to discard changes in working directory) modified: readme.txt no changes added to commit (use \"git add\" and/or \"git commit -a\") Dropped refs/stash@{0} (6228502b0116dba3633cdb19b738aba9bd6d4664) ä½ å¯ä»¥å¤šæ¬¡stashï¼Œæ¢å¤çš„æ—¶å€™ï¼Œå…ˆç”¨git stash listæŸ¥çœ‹ï¼Œç„¶åæ¢å¤æŒ‡å®šçš„stashï¼Œç”¨å‘½ä»¤ï¼š $ git stash apply stash@{0} åœ¨masteråˆ†æ”¯ä¸Šä¿®å¤äº†bugåï¼Œæˆ‘ä»¬è¦æƒ³ä¸€æƒ³ï¼Œdevåˆ†æ”¯æ˜¯æ—©æœŸä»masteråˆ†æ”¯åˆ†å‡ºæ¥çš„ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªbugå…¶å®åœ¨å½“å‰devåˆ†æ”¯ä¸Šä¹Ÿå­˜åœ¨ã€‚ å…ˆåˆ‡æ¢åˆ°masteråˆ†æ”¯ä¸ŠæŸ¥çœ‹ä¹‹å‰â€œ fix bug 102â€ é‚£æ¡commit id $ git switch master #ä¹Ÿå¯ä»¥ç”¨git switch -æ¥åˆ‡æ¢ã€‚ $ git log --graph commit 858cab6c5238646df8d353bfd83382a92a432fcd (issue-102) Author: smith \u003csmith@gmail.com\u003e Date: Tue May 10 13:18:18 2022 +0800 fix bug 102 Gitä¸“é—¨æä¾›äº†ä¸€ä¸ªcherry-pickå‘½ä»¤ï¼Œè®©æˆ‘ä»¬èƒ½å¤åˆ¶ä¸€ä¸ªç‰¹å®šçš„æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚å†æ¬¡åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼Œå¤åˆ¶masteråˆ†æ”¯ä¸Šâ€œfix bug 102â€è¿™æ¡æ”¹åŠ¨æäº¤ã€‚ $ git branch * dev master $ git cherry-pick 858cab [dev 0996ec3] fix bug 102 Date: Tue May 10 13:18:18 2022 +0800 1 file changed, 1 insertion(+) Gitè‡ªåŠ¨ç»™devåˆ†æ”¯åšäº†ä¸€æ¬¡æäº¤ï¼Œæ³¨æ„è¿™æ¬¡æäº¤çš„commitæ˜¯0996ec3ï¼Œå®ƒå¹¶ä¸åŒäºmasterçš„858cabï¼Œå› ä¸ºè¿™ä¸¤ä¸ªcommitåªæ˜¯æ”¹åŠ¨ç›¸åŒï¼Œä½†ç¡®å®æ˜¯ä¸¤ä¸ªä¸åŒçš„commitã€‚ç”¨git cherry-pickï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åœ¨devåˆ†æ”¯ä¸Šæ‰‹åŠ¨å†æŠŠä¿®bugçš„è¿‡ç¨‹é‡å¤ä¸€éã€‚ æ€»ç»“ ä¿®å¤bugæ—¶ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡åˆ›å»ºæ–°çš„bugåˆ†æ”¯è¿›è¡Œä¿®å¤ï¼Œç„¶ååˆå¹¶ï¼Œæœ€ååˆ é™¤ï¼› å½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œç°åœºgit stashä¸€ä¸‹ï¼Œç„¶åå»ä¿®å¤bugï¼Œä¿®å¤åï¼Œå†git stash popï¼Œå›åˆ°å·¥ä½œç°åœºï¼› åœ¨masteråˆ†æ”¯ä¸Šä¿®å¤çš„bugï¼Œæƒ³è¦åˆå¹¶åˆ°å½“å‰devåˆ†æ”¯ï¼Œå¯ä»¥ç”¨git cherry-pick \u003ccommit\u003eå‘½ä»¤ï¼ŒæŠŠbugæäº¤çš„ä¿®æ”¹â€œå¤åˆ¶â€åˆ°å½“å‰åˆ†æ”¯ï¼Œé¿å…é‡å¤åŠ³åŠ¨ã€‚ ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:14","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"å‚è€ƒ 1 ","date":"2022-05-07","objectID":"/git%E5%85%A5%E9%97%A8/:1:15","tags":["git"],"title":"gitå…¥é—¨","uri":"/git%E5%85%A5%E9%97%A8/"},{"categories":["å·¥å…·"],"content":"ansibleçš„é…ç½®æ–‡ä»¶ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:1:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å…¨å±€é…ç½®æ–‡ä»¶ ansibleé»˜è®¤çš„å…¨å±€é…ç½®æ–‡ä»¶æ˜¯/etc/ansible/ansible.cfgï¼Œå¯è®¤ä¸ºæ˜¯å…¨å±€é…ç½®çš„å…¥å£ã€‚ Ansibleæ”¯æŒ4ç§æ–¹å¼æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œå®ƒä»¬çš„è§£æé¡ºåºä»ä¸Šåˆ°ä¸‹ ANSIBLE_CFG ç¯å¢ƒå˜é‡æŒ‡å®šçš„é…ç½®æ–‡ä»¶ ansible.cfg å½“å‰ç›®å½•ä¸‹çš„ansible.cfg ~/.ansible.cfg å®¶ç›®å½•ä¸‹çš„.ansible.cfg /etc/ansible/ansible.cfg é»˜è®¤å…¨å±€é…ç½®æ–‡ä»¶ ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶/etc/ansible/ansible.cfgï¼š $ cat /etc/ansible/ansible.cfg | grep -vE \"^$|^#\" [defaults] inventory = /etc/ansible/hosts # inventoryæ–‡ä»¶ï¼šansibleç®¡ç†çš„ä¸»æœºæ¸…å• library = /usr/share/my_modules/ forks = 5 # ansbileçš„å¹¶å‘è¿æ¥æ•° sudo_user = root remote_port = 22 host_key_checking = False timeout = 10 log_path = /var/log/ansible.log æ–‡ä»¶ä¸­å…¶å®ƒçš„å¯é…ç½®é¡¹ï¼š stdout_callback = debug # å¯å°†è¾“å‡ºå˜å¾—äººæ€§åŒ–ï¼›é»˜è®¤è¾“å‡ºä¼šæŒ¤åœ¨ä¸€è¡Œï¼Œé…ç½®åä¼šæ¢è¡Œè¾“å‡ºï¼› ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:1:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"inventoryä¸»æœºæ–‡ä»¶ inventoryæ–‡ä»¶é»˜è®¤è·¯å¾„æ˜¯/etc/ansible/hostsï¼Œåœ¨è¿™é‡Œé…ç½®ç›®æ ‡ä¸»æœºï¼Œansibleä¾¿å¯ä»¥å¯¹å…¶è¿›è¡Œæ§åˆ¶ã€‚ åœ¨/etc/ansible/hostsæ–‡ä»¶é‡Œé…ç½®nodeä¸»æœºåæˆ–ipï¼š $ cat hosts [default] # ä¸»æœºåˆ†ç»„ node1 # 172.18.0.101 node2 # 172.18.0.102 å¯ä»¥é€šè¿‡/etc/ansible/ansible.cfgæ–‡ä»¶ä¿®æ”¹inventoryçš„é»˜è®¤è·¯å¾„ï¼šinventory = /etc/ansible/hostsã€‚å¦‚æœå°†è¯¥é…ç½®æŒ‡å®šä¸ºç›®å½•ï¼Œä¾¿å¯ä»¥ä½¿ç”¨å¤šä¸ªinventoryæ–‡ä»¶æ¥ç®¡ç†èŠ‚ç‚¹ï¼Œä¸€èˆ¬å¾ˆå°‘åŠ¨è¿™ä¸ªã€‚ é€šå¸¸ï¼Œä¸ä¼šä¿®æ”¹é»˜è®¤çš„è·¯å¾„ã€‚å¦‚æœæœ‰è‡ªå®šä¹‰çš„inventoryæ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ansibleå‘½ä»¤è¡Œä¸­ä½¿ç”¨-ié€‰é¡¹æŒ‡å®š: # ansible -i /tmp/my_inventory.ini ... # ansible-playbook -i /tmp/my_inventory.ini ... ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:1:2","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"æŸ¥çœ‹inventory åˆ—å‡ºansiblekå¯ç®¡ç†çš„æ‰€æœ‰ä¸»æœº $ ansible-inventory --graph all # æŒ‡å®šæ–‡ä»¶ï¼šansible-inventory -i /etc/ansible/hosts --graph all @all: # allæ˜¯é»˜è®¤çš„ä¸»æœºç»„ï¼ŒåŒ…å«æ‰€æœ‰ä¸»æœº |--@default: | |--node1 | |--node2 |--@ungrouped: ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:1:3","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"è¿è¡Œansibleå‘½ä»¤ å®Œæˆä¸Šè¿°çš„åŸºæœ¬é…ç½®åï¼Œå³å¯ä»¥å¼€å§‹ä½¿ç”¨ansibleæ¥æ‰¹é‡ç®¡ç†ä¸»æœºäº†ï¼Œè¿™é‡Œçš„ç®¡ç†æ–¹å¼ä¸ºå‘½ä»¤è¡Œæ–¹å¼ï¼ˆåˆç§°ä¸ºAd-hocæ–¹å¼ï¼‰ã€‚ Ad-hocæ–¹å¼è¿è¡Œansibleçš„å‘½ä»¤æ ¼å¼ï¼šansible ä¸»æœºç»„/ä¸»æœº -m æ¨¡å— -a å‚æ•° é€‰é¡¹è§£æï¼š -m: æŒ‡å®šè°ƒç”¨çš„æ¨¡å— -a: å‘æ¨¡å—ä¼ é€’çš„å‚æ•°ï¼Œæ¨¡å—ä¸éœ€è¦åˆ™å¯çœç•¥;å‚æ•°éœ€è¦ä½¿ç”¨å¼•å·åŒ…å›´ æ­¤å¤–ansibleå‘½ä»¤è¿˜å¯ä»¥å¸¦ä¸Šå…¶å®ƒé€‰é¡¹ï¼š -i: æŒ‡å®šæœ¬æ¬¡çš„inventoryè·¯å¾„ï¼ŒæŒ‡å®šè¯¥å‚æ•°åˆ™åé¢ä¸åŠ ä¸»æœºç»„/ä¸»æœº -e: è®¾ç½®å˜é‡ï¼Œæ ¼å¼ä¸º'var1=\"aaa\" var=\"bbb\"' -v/vv/vvv: å‘½ä»¤è¾“å‡ºçš„æ‰“å°çº§åˆ« ansibleçš„æ‰¹é‡ç®¡ç†åŠŸèƒ½ä¾é å„ä¸ªæ¨¡å—æ¥å®Œæˆï¼Œansibleæä¾›äº†å‡ åƒä¸ªæ¨¡å—ï¼ˆå…¶ä¸­ansibleå›¢é˜Ÿè‡ªå·±ç»´æŠ¤å¤§çº¦100å¤šä¸ªæ ¸å¿ƒæ¨¡å—ï¼‰ï¼Œæ¯ä¸ªæ¨¡å—å®Œæˆå„è‡ªçš„ä½œç”¨ã€‚ ä¸‹é¢ç”¨pingæ¨¡å—å’Œdebugæ¨¡å—æ¥æ¼”ç¤ºä¸€ä¸‹ansibleçš„åŸºç¡€åŠŸèƒ½ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:2:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"pingæ¨¡å— pingæ¨¡å—æ˜¯ansibleæœ€åŸºç¡€æ¨¡å—ä¹‹ä¸€ï¼Œå¯ç”¨äºæ£€æµ‹è¿œç¨‹ä¸»æœºæ˜¯å¦åœ¨çº¿ã€‚ å‘½ä»¤ï¼šansible ä¸»æœºç»„/ä¸»æœº -m ping è¿”å›å€¼ï¼šchangedã€ping å‘½ä»¤ï¼šansible all -m ping [root@master ansible]$ ansible all -m ping node2 | SUCCESS =\u003e { \"ansible_facts\": { \"discovered_interpreter_python\": \"/usr/bin/python\" }, \"changed\": false, \"ping\": \"pong\" } node1 | SUCCESS =\u003e { \"ansible_facts\": { \"discovered_interpreter_python\": \"/usr/bin/python\" }, \"changed\": false, \"ping\": \"pong\" } ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:2:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"debugæ¨¡å— å®˜ç½‘è¯´æ˜ï¼šhttps://docs.ansible.com/ansible/latest/collections/ansible/builtin/debug_module.html debugæ¨¡å—ç”¨äºè¾“å‡ºæˆ–è°ƒè¯•ä¸€äº›å˜é‡æˆ–æ•°æ®ã€‚è¯¥æ¨¡å—å…±æœ‰ä¸‰ä¸ªå‚æ•°msgã€varã€verbosityã€‚ msgï¼šæ‰“å°é…ç½®çš„ä¿¡æ¯ varï¼šæ‰“å°å˜é‡å€¼ verbosityï¼šè¿è¡Œçº§åˆ«ï¼Œè®¾ç½®ä¸º3ï¼Œåˆ™-vvvæˆ–æ›´é«˜æ‰ä¼šæ‰“å°è¾“å‡º å‘½ä»¤ï¼š ansible all -m debug -a 'msg=\"hello world\"' ansible all -e 'str=\"hello world\"' -m debug -a 'var=str' ansible all -v -m debug -a 'msg=\"hello world\" verbosity=1' ç¤ºä¾‹ï¼š [root@master ansible]$ ansible all -m debug -a 'msg=\"hello world\"' node1 | SUCCESS =\u003e { \"msg\": \"hello world\" } node2 | SUCCESS =\u003e { \"msg\": \"hello world\" } [root@master ansible]$ ansible all -e 'str=\"hello world\"' -m debug -a 'var=str' node1 | SUCCESS =\u003e { \"str\": \"hello world\" } node2 | SUCCESS =\u003e { \"str\": \"hello world\" } [root@master ansible]$ ansible all -m debug -a 'msg=\"hello world\" verbosity=1' node1 | SKIPPED node2 | SKIPPED [root@master ansible]$ ansible all -v -m debug -a 'msg=\"hello world\" verbosity=1' Using /etc/ansible/ansible.cfg as config file node1 | SUCCESS =\u003e { \"msg\": \"hello world\" } node2 | SUCCESS =\u003e { \"msg\": \"hello world\" } ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:2:2","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"playbook playbookæ˜¯ä¸€ä¸ªyamlæ ¼å¼çš„æ–‡ä»¶ï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªplayæŒ‰é¡ºåºåˆ—è¡¨çš„æ–¹å¼ç»„æˆã€‚æ¯ä¸ªplayè¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªtaskï¼Œæ¯ä¸ªtaskè°ƒç”¨ä¸€ä¸ªæ¨¡å—moduleã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:3:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"playbookã€playã€taskçš„å…³ç³» playbookä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªplay æ¯ä¸ªplayä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªtask å…¶ä¸­è¿˜å¯ä»¥å®šä¹‰ä¸¤ç±»ç‰¹æ®Šçš„taskï¼špre_taskså’Œpost_tasks pre_tasksè¡¨ç¤ºæ‰§è¡Œæ‰§è¡Œæ™®é€šä»»åŠ¡ä¹‹å‰æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ post_tasksè¡¨ç¤ºæ™®é€šä»»åŠ¡æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ æ¯ä¸ªplayéƒ½éœ€è¦é€šè¿‡hostsæŒ‡ä»¤æŒ‡å®šè¦æ‰§è¡Œè¯¥playçš„ç›®æ ‡ä¸»æœº æ¯ä¸ªplayéƒ½å¯ä»¥è®¾ç½®ä¸€äº›è¯¥playçš„ç¯å¢ƒæ§åˆ¶è¡Œä¸ºï¼Œæ¯”å¦‚å®šä¹‰playçº§åˆ«çš„å˜é‡ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:3:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç¼–å†™ä¸€ä¸ªplaybookå¹¶æ‰§è¡Œ playbookä½¿ç”¨yamlè¯­æ³•æ ¼å¼ç»„ç»‡å„ç§playå’Œtaskè§„åˆ™ã€‚ ä¸‹é¢ä½¿ç”¨pingæ¨¡å—å’Œdebugæ¨¡å—ç¼–å†™ä¸€ä¸ªplaybookæ–‡ä»¶å¦‚ä¸‹ï¼š # cat test.yaml --- - name: play1 # playçš„åç§°ï¼Œéå¿…é¡» hosts: all # æŒ‡å®šç›®æ ‡ä¸»æœº gather_facts: false # æ”¶é›†ç›®æ ‡ä¸»æœºä¿¡æ¯ï¼Œé»˜è®¤å€¼trueï¼Œéå¿…é¡» tasks: # taskså£°æ˜ä»»åŠ¡åˆ—è¡¨ - name: task1 # taskä»»åŠ¡åç§°ï¼Œéå¿…é¡» ping: # æ¨¡å— data: \"pong task1\" # æ¨¡å—å‚æ•° - name: task2 ping: data: \"pong task2\" - name: play2 hosts: all gather_facts: false tasks: - name: task1 debug: msg: \"hello task1 in play2\" - name: task2 debug: msg: \"hello task2 in play2\" æ³¨æ„æ‰€æœ‰çš„-å’Œ:ç¬¦å·åé¢å‡éœ€è¦æ¥ä¸€ä¸ªç©ºæ ¼ æ‰§è¡Œplaybookçš„å‘½ä»¤æ˜¯ansible-playbook test.yamlï¼š è¯¥å‘½ä»¤åŒæ ·æ”¯æŒåƒansileå‘½ä»¤ä¸€æ ·çš„å¤šä¸ªé€‰é¡¹ï¼Œå¦‚-eã€-iã€-vç­‰ $ ansible-playbook -v test.yaml Using /etc/ansible/ansible.cfg as config file PLAY [play1] ********************************************************************************************************************** TASK [task1] ********************************************************************************************************************** ok: [node2] =\u003e {\"ansible_facts\": {\"discovered_interpreter_python\": \"/usr/bin/python\"}, \"changed\": false, \"ping\": \"pong task1\"} ok: [node1] =\u003e {\"ansible_facts\": {\"discovered_interpreter_python\": \"/usr/bin/python\"}, \"changed\": false, \"ping\": \"pong task1\"} TASK [task2] ********************************************************************************************************************** ok: [node1] =\u003e {\"changed\": false, \"ping\": \"pong task2\"} ok: [node2] =\u003e {\"changed\": false, \"ping\": \"pong task2\"} PLAY [play2] ********************************************************************************************************************** TASK [task1] ********************************************************************************************************************** ok: [node1] =\u003e { \"msg\": \"hello task1 in play2\" } ok: [node2] =\u003e { \"msg\": \"hello task1 in play2\" } TASK [task2] ********************************************************************************************************************** ok: [node1] =\u003e { \"msg\": \"hello task2 in play2\" } ok: [node2] =\u003e { \"msg\": \"hello task2 in play2\" } PLAY RECAP ************************************************************************************************************************ node1 : ok=4 changed=0 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0 node2 : ok=4 changed=0 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0 ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:3:2","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"playbookæ–‡ä»¶å„é…ç½®æŒ‡ä»¤åŠå«ä¹‰ yamlæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨-è¡¨ç¤ºä¸€ä¸ªåˆ—è¡¨å…ƒç´ ï¼Œå¤šä¸ªkeyï¼švalueè¡¨ç¤ºä¸€ä¸ªå­—å…¸ã€‚ æ¯ä¸ªplaybookä½¿ç”¨åˆ—è¡¨æ¥ç»„ç»‡å¤šä¸ªplayï¼Œplayå†…åŒæ ·ä½¿ç”¨åˆ—è¡¨æ¥ç»„ç»‡å¤šä¸ªtaskï¼›playå’Œtaskè‡ªèº«åˆ™é‡‡ç”¨å­—å…¸çš„æ–¹å¼ç»„ç»‡ï¼Œå³å¤šä¸ªé”®å€¼å¯¹ã€‚ åœ¨playbooké¡¶å±‚ä½¿ç”¨- xxx:è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªplayï¼›æ¯ä¸ªplayä¸­å¿…é¡»åŒ…å«hostså’ŒtasksæŒ‡ä»¤ã€‚ hostsæŒ‡ä»¤ç”¨æ¥æŒ‡å®šè¦æ‰§è¡Œè¯¥playçš„ç›®æ ‡ä¸»æœºï¼Œå¯ä»¥æ˜¯ä¸»æœºåã€ä¸»æœºç»„æˆ–è€…å…¶å®ƒå¤šç§æ–¹å¼ã€‚ tasksæŒ‡ä»¤ç”¨æ¥æŒ‡å®šè¯¥playä¸­åŒ…å«çš„ä»»åŠ¡åˆ—è¡¨ï¼Œæ¯ä¸ªä»»åŠ¡ä½¿ç”¨- xxx:æ–¹å¼è¡¨ç¤ºã€‚ nameæŒ‡ä»¤ç”¨æ¥è®¾ç½®playå’Œtaskçš„åç§°ï¼Œå€¼å…·æœ‰å”¯ä¸€æ€§ã€‚ gather_factsæŒ‡ä»¤ç”¨æ¥æ”¶é›†ç›®æ ‡ä¸»æœºçš„ä¿¡æ¯ï¼Œç”±setupæ¨¡å—æä¾›ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªplayéƒ½å…ˆæ‰§è¡Œè¿™ä¸ªç‰¹æ®Šä»»åŠ¡ï¼Œæ”¶é›†å®Œä¿¡æ¯æ‰å¼€å§‹å…¶å®ƒä»»åŠ¡ã€‚å¦‚æœåç»­ä»»åŠ¡ä¸­ç”¨ä¸åˆ°è¯¥ä¿¡æ¯ï¼Œåˆ™å¯ä»¥ç¦æ­¢æ‰è¯¥ä»»åŠ¡ï¼Œæå‡æ•ˆç‡ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:3:3","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å‘æ¨¡å—ä¼ é€’å‚æ•° yamlä¸­ï¼Œå‘æ¨¡å—ä¼ é€’å‚æ•°çš„æ–¹å¼æ€»ç»“ä¸ºå­—ç¬¦ä¸²å’Œæ•°ç»„ä¸¤ç§æ–¹å¼ã€‚ è¿˜æ˜¯ä»¥debugæ¨¡å—ä¸ºä¾‹ã€‚ æ•°ç»„æ–¹å¼å¦‚ä¸Šé¢test.yamlæ–‡ä»¶é‡Œçš„ä¼ å‚ï¼Œå³key: valueçš„å½¢å¼ï¼š ...... - name: task1 debug: msg: \"hello task1 in play2\" verbosity=1 å­—ç¬¦ä¸²æ–¹å¼ï¼Œç”±äºyamlçš„è¯­æ³•è§„åˆ™ï¼ˆå­—ç¬¦ä¸²æ¢è¡Œå°†è‡ªåŠ¨è½¬æ¢ä¸ºç©ºæ ¼ï¼‰ï¼Œåˆæœ‰ä¸åŒçš„ä¹¦å†™å½¢å¼ï¼š --- - name: debug hosts: all gather_facts: false tasks: - name: task1 debug: msg=\"hello task1\" verbosity=1 # å‚æ•°å†™æˆä¸€è¡Œ - name: task2 debug: msg=\"hello task2\" # å‚æ•°å†™æˆå¤šè¡Œ verbosity=1 - name: task3 debug: | # ç«–çº¿|ï¼Œå°†ä¿ç•™å­—ç¬¦ä¸²çš„æ¢è¡Œç¬¦ï¼Œå¦åˆ™å°†è‡ªåŠ¨è½¬æ¢æˆç©ºæ ¼ï¼Œåœ¨ä¸€äº›æ¨¡å—ä¸­å¾ˆæœ‰ç”¨ï¼Œå¦‚shell msg=\"hello task3\" verbosity=1 - name: task4 debug: \u003e # ç¬¦å·\u003eï¼Œæ•ˆæœå’Œç›´æ¥å†™æˆå¤šè¡Œä¸€æ · msg=\"hello task4\" verbosity=1 è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨æŒ‡ä»¤argsæŒ‡æ˜å‚æ•°ï¼š ...... - name: task1 debug: args: msg: \"hello task1 in play2\" ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:3:4","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"é»˜è®¤çš„ä»»åŠ¡æ‰§è¡Œç­–ç•¥ /etc/ansible/ansible.cfgæ–‡ä»¶çš„forksé…ç½®ï¼Œå†³å®šansibleæ‰§è¡Œä»»åŠ¡çš„å¹¶å‘è¿æ¥æ•°ã€‚ å‡å¦‚forksé…ç½®ä¸º5ï¼Œé‚£ä¹ˆansibleç¬¬ä¸€æ¬¡å°†åŒæ—¶è¿æ¥5ä¸ªnodeèŠ‚ç‚¹æ‰§è¡Œä»»åŠ¡ã€‚å…¶ä¸­è‹¥æœ‰èŠ‚ç‚¹æå‰æ‰§è¡Œå®Œä»»åŠ¡ï¼Œ åˆ™ansibleä¼šæ–°å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œæ¥è¿æ¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œä»»åŠ¡ã€‚ forksæ˜¯ä¿è¯æœ€å¤šæœ‰Nä¸ªèŠ‚ç‚¹åŒæ—¶æ‰§è¡Œä»»åŠ¡ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:3:5","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å¸¸è§æ¨¡å— ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:4:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"shellæ¨¡å— è¯´æ˜ï¼š shellæ¨¡å—æ¥æ”¶shellå‘½ä»¤ï¼Œå‘½ä»¤åå¯è·Ÿç©ºæ ¼åˆ†å‰²çš„å‚æ•°åˆ—ï¼› å¿…é¡»ä¼ å…¥è‡ªç”±æ ¼å¼çš„å‘½ä»¤ï¼Œæˆ–è€…cmdå‚æ•°ï¼› å®ƒååˆ†ç±»ä¼¼commandæ¨¡å—ï¼Œä½†æ˜¯å®ƒåœ¨è¿œç¨‹ä¸»æœºä¸Šé€šè¿‡shellï¼ˆæ¯”å¦‚/bin/bashï¼‰æ¥è¿è¡Œå‘½ä»¤ï¼› shellæ¨¡å—ç›¸æ¯”commandæ¨¡å—ï¼Œæ”¯æŒè§£æç‰¹æ®Šç¬¦å·\u003cã€\u003eã€|ã€;ã€\u0026ç­‰ã€‚ å‚æ•°ï¼š Parameter Choices/Defaults è¯´æ˜ chdir path è¿è¡Œè„šæœ¬å‰ï¼Œåˆ‡æ¢åˆ°ç›¸å…³ç›®å½• cmd string éœ€è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåè·Ÿå¯é€‰çš„å‚æ•° creates path è‹¥ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨ï¼Œåˆ™è·³è¿‡è¯¥æ­¥éª¤ removes path è‹¥ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™è·³è¿‡è¯¥æ­¥éª¤ executable path æ”¹å˜æ‰§è¡Œå‘½ä»¤çš„è§£é‡Šå™¨ï¼Œå¦‚/bin/bashã€/usr/bin/expectã€/usr/bin/pythonï¼›ç»å¯¹è·¯å¾„ free_form string è‡ªç”±æ ¼å¼çš„å‘½ä»¤ï¼ˆå³å‘½ä»¤å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰ç›¸å…³å‚æ•°ï¼Œç›´æ¥å†™åœ¨shellæ¨¡å—åé¢å³å¯ï¼‰ stdin string Set the stdin of the command directly to the specified value. stdin_add_newline boolean Choices: no yes â†ï¼ˆdefaultï¼‰ Whether to append a newline to stdin data. warn boolean Choices: no yes â†(default) Whether to enable task warnings. ç¤ºä¾‹ï¼š --- - name: shell hosts: all gather_facts: no tasks: - name: task1 shell: hostname - name: task2 shell: cmd: date +\"%F %T\" - name: task3 shell: cmd: pwd chdir: /etc/sysconfig - name: task4 shell: cmd: ls /tmp creates: /tmp - name: task5 shell: cmd: print('hello world') executable: /usr/bin/python æ³¨æ„chdirå‚æ•°åªæ”¯æŒä¸‹é¢çš„æ–¹å¼ï¼š - name: task3 shell: cmd: pwd chdir: /etc/sysconfig - name: task3 shell: pwd # free_fromæ ¼å¼éœ€è¦é‡‡ç”¨argså‚æ•°ï¼Œæ˜¾å¼æŒ‡å®šchdirå‚æ•° args: chdir: /etc/sysconfig # ä¸‹é¢çš„æ–¹å¼å°†å‘ç”Ÿé”™è¯¯ - name: task3 shell: pwd chdir: /etc/sysconfig Ad-hocæ–¹å¼ï¼š $ ansible all -m shell -a \"ls -l | wc -l\" $ ansible all -v -m shell -a \"ls chdir=/tmp \" https://docs.ansible.com/ansible/latest/collections/ansible/builtin/shell_module.html#ansible-collections-ansible-builtin-shell-module ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:4:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"scriptæ¨¡å— è¯´æ˜ï¼š scriptæ¨¡å—æ¥å—ä¸€ä¸ªè„šæœ¬åç§°ï¼Œåé¢å¯è·Ÿç©ºæ ¼åˆ†å‰²çš„å‚æ•°åˆ—ï¼› æ”¯æŒè‡ªç”±æ ¼å¼çš„å‘½ä»¤ï¼Œæˆ–è€…cmdå‚æ•°ï¼› å°†æœ¬åœ°è„šæœ¬ä¼ è¾“åˆ°è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œï¼› åœ¨è¿œç¨‹ä¸»æœºä¸Šä½¿ç”¨shellç¯å¢ƒæ‰§è¡Œè„šæœ¬ï¼› è¯¥æ¨¡å—ä¸éœ€è¦pythonï¼Œç±»ä¼¼rawæ¨¡å—ã€‚ å‚æ•°ï¼š Parameter Choices/Defaults è¯´æ˜ chdir path è¿è¡Œè„šæœ¬å‰ï¼Œåˆ‡æ¢åˆ°è¿œç¨‹ä¸»æœºçš„ç›¸å…³ç›®å½• cmd string éœ€è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼Œåè·Ÿå¯é€‰çš„å‚æ•° creates path è‹¥ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨ï¼Œåˆ™è·³è¿‡è¯¥æ­¥éª¤ removes path è‹¥ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™è·³è¿‡è¯¥æ­¥éª¤ ç¤ºä¾‹ï¼š sctipt-simple.yml --- - name: script hosts: web tasks: - name: list files script: /etc/ansible/test-yml/trans_exec.sh trans_exec.sh #!/bin/bash date \u0026\u0026 hostname Ad-hocï¼š $ ansible all -m script -a \"/tmp/hello.sh world\" $ ansible all -m script -a \"/tmp/hello.sh world creates=/tmp\" https://docs.ansible.com/ansible/latest/collections/ansible/builtin/script_module.html#ansible-collections-ansible-builtin-script-module ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:4:2","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"hostnameæ¨¡å— è¯´æ˜ï¼š è®¾ç½®ç³»ç»Ÿçš„ä¸»æœºå å‚æ•°ï¼š Parameter Choices/Defaults è¯´æ˜ name string / required è®¾ç½®ä¸»æœºå ç¤ºä¾‹ï¼š - name: Set a hostname ansible.builtin.hostname: name: web01 - name: Set a hostname specifying strategy ansible.builtin.hostname: name: web01 use: systemd https://docs.ansible.com/ansible/latest/collections/ansible/builtin/hostname_module.html ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:4:3","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"åœ¨playbookä¸­è®¾ç½®å˜é‡ varsæŒ‡ä»¤å¯åœ¨playæˆ–taskä¸­è®¾ç½®å˜é‡ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªã€‚å¯ä»¥é‡‡ç”¨å­—å…¸æˆ–åˆ—è¡¨çš„å½¢å¼å®šä¹‰å˜é‡ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:5:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å­—å…¸å˜é‡çš„å®šä¹‰å’Œå¼•ç”¨ å®šä¹‰ï¼š vars: foo1: a: hello b: world foo2: a: aaa b: bbb å¼•ç”¨ï¼š ä½¿ç”¨ç‚¹å·æˆ–æ–¹æ‹¬å·ï¼Œåœ¨yamlæ–‡ä»¶ä½¿ç”¨jinja2è¯­æ³•å¼•ç”¨ï¼Œéœ€è¦åŠ å•åŒå¼•å·ï¼Œå¦åˆ™è§£æyamlçš„æ—¶å€™å°†æŠ¥é”™ - name: task1 debug: msg: \"{{ foo1.a }} {{ foo1['b'] }}\" # æ³¨æ„{{}}æ˜¯jinja2çš„è¯­æ³•ï¼Œåœ¨yamlæ–‡ä»¶ä¸­éœ€è¦ä½¿ç”¨å¼•å·å¼•èµ·æ¥ï¼Œå•åŒå¼•å·éƒ½è¡Œ - name: task2 debug: var: foo1.a,foo1['b'] # debugæ¨¡å—çš„varå‚æ•°ï¼Œå¤šä¸ªå€¼ä½¿ç”¨é€—å·åˆ†éš”ï¼Œä¸”æ— éœ€èŠ±æ‹¬å·ï¼Œå‰ååŠ ä¸åŠ å¼•å·å‡å¯ - name: task3 debug: msg: '{{ foo2.a }} {{ foo2.b }}' ç¤ºä¾‹ï¼š --- - name: vars play hosts: all gather_facts: no vars: foo1: a: hello b: world foo2: a: aaa b: bbb tasks: - name: task1 debug: msg: \"{{ foo1.a }} {{ foo1['b'] }}\" - name: task2 debug: var: foo1.a,foo1['b'] - name: task3 debug: msg: '{{ foo2.a }} {{ foo2.b }}' ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:5:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"åˆ—è¡¨å˜é‡çš„å®šä¹‰å’Œå¼•ç”¨ å®šä¹‰ï¼š vars: foo: - a: hello b: world - a: aaa b: bbb å¼•ç”¨ï¼š - name: task1 debug: msg: \"{{ foo[0].a }} {{ foo[0].b }}\" - name: task2 debug: msg: \"{{foo[1]['a']}} {{foo[1]['b']}}\" å¼•ç”¨å˜é‡æ—¶ï¼Œä½¿ç”¨ç‚¹å·æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†å¦‚æœå˜é‡åæœ¬èº«å¸¦ç‚¹ï¼Œåˆ™å°½é‡é€‰æ‹©æ–¹æ‹¬å·çš„æ–¹å¼ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:5:2","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"whenæŒ‡ä»¤è¿›è¡Œæ¡ä»¶åˆ¤æ–­ whenæŒ‡ä»¤æ˜¯ansibleæä¾›çš„å”¯ä¸€ä¸€ä¸ªé€šç”¨æ¡ä»¶æŒ‡ä»¤ã€‚whenæŒ‡ä»¤åçš„å˜é‡å¼•ç”¨ä¸éœ€è¦åŒèŠ±æ‹¬å·ï¼Œå½“whenæŒ‡ä»¤çš„å€¼ä¸ºtrueæ—¶ï¼Œæ‰§è¡Œä»»åŠ¡ã€‚ yamlæ–‡ä»¶å¦‚ä¸‹ï¼š --- - name: when hosts: all gather_facts: no vars: foo: test tasks: - name: task1 when: foo == \"test\" # whenæŒ‡ä»¤çš„å˜é‡å¯ç›´æ¥å¼•ç”¨ debug: msg: \"hello\" - name: task2 when: foo == \"dev\" debug: msg: \"world\" ç¤ºä¾‹ï¼š ä»è¾“å‡ºä¸­å¯çœ‹å‡ºï¼Œä»»åŠ¡task2ç”±äºæ¡ä»¶ä¸æ»¡è¶³è‡ªåŠ¨è·³è¿‡ [root@master ansible]# ansible-playbook -v when.yaml Using /etc/ansible/ansible.cfg as config file PLAY [when] *********************************************************************************************************************** TASK [task1] ********************************************************************************************************************** ok: [node1] =\u003e { \"msg\": \"hello\" } ok: [node2] =\u003e { \"msg\": \"hello\" } TASK [task2] ********************************************************************************************************************** skipping: [node1] =\u003e {} skipping: [node2] =\u003e {} PLAY RECAP ************************************************************************************************************************ node1 : ok=1 changed=0 unreachable=0 failed=0 skipped=1 rescued=0 ignored=0 node2 : ok=1 changed=0 unreachable=0 failed=0 skipped=1 rescued=0 ignored=0 å¤šä¸ªåˆ¤æ–­æ¡ä»¶ï¼š - name: task3 when: foo == \"dev\" or foo == \"test\" # é€»è¾‘æˆ– debug: msg: \"hello world\" - name: task4 when: (foo == \"dev\") or (foo == \"test\") # æ”¯æŒæ‹¬å·æ‹¬èµ·æ¥ debug: msg: \"hello world\" - name: task5 when: (foo == \"dev\") and (foo == \"test\") # é€»è¾‘ä¸ debug: msg: \"hello world\" - name: task6 when: - foo == \"dev\" # é€»è¾‘ä¸çš„å¦ä¸€ç§ç»„ç»‡æ–¹å¼ - foo == \"test\" debug: msg: \"hello world\" - name: task7 when: foo != \"dev\" # é€»è¾‘å¦ debug: msg: \"hello world\" ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:6:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"loopå¾ªç¯ç»“æ„ loopæŒ‡ä»¤ä¸­çš„å„é¡¹å…ƒç´ å°†ä»¥itemå˜é‡åè¿›è¡Œè¿­ä»£ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:7:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç›´æ¥è¿­ä»£åˆ—è¡¨ è¿­ä»£ç®€å•åˆ—è¡¨ï¼š åˆ—è¡¨å…ƒç´ ä¸ºå­—ç¬¦ä¸² - name: task1 shell: \"{{ item }}\" loop: - hostname - \"uptime -p\" ç¤ºä¾‹ï¼š [root@master ansible]# cat loop.yaml --- - name: loop hosts: all gather_facts: no tasks: - name: task1 shell: \"{{ item }}\" loop: - hostname - \"uptime -p\" [root@master ansible]# ansible-playbook -v loop.yaml Using /etc/ansible/ansible.cfg as config file PLAY [loop] *********************************************************************************************************************** TASK [task1] ********************************************************************************************************************** changed: [node2] =\u003e (item=hostname) =\u003e {\"ansible_facts\": {\"discovered_interpreter_python\": \"/usr/bin/python\"}, \"ansible_loop_var\": \"item\", \"changed\": true, \"cmd\": \"hostname\", \"delta\": \"0:00:00.020436\", \"end\": \"2022-01-09 15:05:17.126971\", \"item\": \"hostname\", \"rc\": 0, \"start\": \"2022-01-09 15:05:17.106535\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"node2\", \"stdout_lines\": [\"node2\"]} changed: [node1] =\u003e (item=hostname) =\u003e {\"ansible_facts\": {\"discovered_interpreter_python\": \"/usr/bin/python\"}, \"ansible_loop_var\": \"item\", \"changed\": true, \"cmd\": \"hostname\", \"delta\": \"0:00:00.361005\", \"end\": \"2022-01-09 15:05:17.409020\", \"item\": \"hostname\", \"rc\": 0, \"start\": \"2022-01-09 15:05:17.048015\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"node1\", \"stdout_lines\": [\"node1\"]} changed: [node2] =\u003e (item=uptime -p) =\u003e {\"ansible_loop_var\": \"item\", \"changed\": true, \"cmd\": \"uptime -p\", \"delta\": \"0:00:00.006628\", \"end\": \"2022-01-09 15:05:17.610052\", \"item\": \"uptime -p\", \"rc\": 0, \"start\": \"2022-01-09 15:05:17.603424\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"up 3 weeks, 2 days, 19 hours, 42 minutes\", \"stdout_lines\": [\"up 3 weeks, 2 days, 19 hours, 42 minutes\"]} changed: [node1] =\u003e (item=uptime -p) =\u003e {\"ansible_loop_var\": \"item\", \"changed\": true, \"cmd\": \"uptime -p\", \"delta\": \"0:00:00.074039\", \"end\": \"2022-01-09 15:05:18.006283\", \"item\": \"uptime -p\", \"rc\": 0, \"start\": \"2022-01-09 15:05:17.932244\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"up 3 weeks, 2 days, 19 hours, 42 minutes\", \"stdout_lines\": [\"up 3 weeks, 2 days, 19 hours, 42 minutes\"]} PLAY RECAP ************************************************************************************************************************ node1 : ok=1 changed=1 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0 node2 : ok=1 changed=1 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0 è¿­ä»£hashå“ˆå¸Œåˆ—è¡¨ï¼š åˆ—è¡¨å…ƒç´ ä¸ºå­—å…¸ - name: task1 shell: cmd: \"{{ item.cmd }}\" creates: \"{{ item['condition'] }}\" # ä¸¤ç§å¼•ç”¨æ–¹å¼å‡å¯ loop: - { cmd: 'hostname', condition: '/tmp' } # è¿™ä¸ªå¾ªç¯å°†è¢«è·³è¿‡ - { cmd: 'uptime', condition: '/aaa' } ç¤ºä¾‹ï¼š [root@master ansible]# cat loop.yaml --- - name: loop hosts: all gather_facts: no tasks: - name: task1 shell: cmd: \"{{ item.cmd }}\" creates: \"{{ item.condition }}\" loop: - { cmd: 'hostname', condition: '/tmp' } # è¿™ä¸ªå¾ªç¯å°†è¢«è·³è¿‡ï¼Œ[\"skipped, since /tmp exists\"]ï¼Œä»»åŠ¡æ²¡æœ‰è·³è¿‡ - { cmd: 'uptime', condition: '/aaa' } [root@master ansible]# [root@master ansible]# ansible-playbook -v loop.yaml Using /etc/ansible/ansible.cfg as config file PLAY [loop] *********************************************************************************************************************** TASK [task1] ********************************************************************************************************************** ok: [node2] =\u003e (item={u'cmd': u'hostname', u'condition': u'/tmp'}) =\u003e {\"ansible_facts\": {\"discovered_interpreter_python\": \"/usr/bin/python\"}, \"ansible_loop_var\": \"item\", \"changed\": false, \"cmd\": \"hostname\", \"item\": {\"cmd\": \"hostname\", \"condition\": \"/tmp\"}, \"rc\": 0, \"stdout\": \"skipped, since /tmp exists\", \"stdout_lines\": [\"skipped, since /tmp exists\"]} changed: [node2] =\u003e (item={u'cmd': u'uptime', u'condition': u'/aaa'}) =\u003e {\"ansible_loop_var\": \"item\", \"changed\": true, \"cmd\": \"uptime\", \"delta\": \"0:00:00.024675\", \"end\": \"2022-01-09 15:21:23.286758\", \"item\": {\"cmd\": \"uptime\", \"condition\": \"/aaa\"}, \"rc\": 0, \"start\": \"2022-01-09 15:21:23.262083\", \"stderr\":","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:7:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"è¿­ä»£å­—å…¸ loopæŒ‡ä»¤æ— æ³•ç›´æ¥è¿­ä»£å­—å…¸ï¼Œéœ€è¦ä½¿ç”¨è¿‡æ»¤å™¨dict2itemsè¿›è¡Œè½¬æ¢ï¼Œå¦‚ä¸‹ï¼š - name: Using dict2items ansible.builtin.debug: msg: \"{{ item.key }} - {{ item.value }}\" loop: \"{{ tag_data | dict2items }}\" vars: tag_data: Environment: dev Application: payment ä¸Šä¾‹ä¸­ï¼Œé€šè¿‡è¿­ä»£tag_dataæ¥æ‰“å°å®ƒçš„keyå’Œvalueã€‚ whenæŒ‡ä»¤å’ŒloopæŒ‡ä»¤åŒæ—¶ä½¿ç”¨æ—¶ï¼Œå…ˆè¿›è¡Œå¾ªç¯ï¼Œå†åœ¨æ¯ä¸ªå¾ªç¯ä¸­è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:7:2","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"notifyå’Œhandlers ansibleä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µchangedï¼Œå®ƒè¡¨ç¤ºç›®æ ‡çŠ¶æ€æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œå³æœ¬æ¬¡ä»»åŠ¡æ˜¯å¦æ‰§è¡Œã€æ‰§è¡Œåæ˜¯å¦å½±å“ç»“æœã€‚å¦‚æœchanged=1ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼›å¦‚æœchanged=0ï¼Œåˆ™è¡¨ç¤ºç›®æ ‡çŠ¶æ€æœªå‘ç”Ÿæ”¹å˜ï¼Œæˆ–è€…ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œã€‚ ansibleè‹¥ç›‘è§†åˆ°changed=1ï¼Œå°±ä¼šè§¦å‘notifyæŒ‡ä»¤æ‰€å®šä¹‰çš„handlerã€‚handlerï¼Œä¹Ÿæ˜¯ä¸€ä¸ªtaskï¼Œåªæ˜¯å®šä¹‰åœ¨handlersä¸­ï¼Œéœ€è¦notifyæ¥è§¦å‘æ‰§è¡Œã€‚ handlersçš„ä½¿ç”¨ä¸tasksä½¿ç”¨ä¸€æ ·ï¼Œnotifyå’Œhanldersä¸­ä»»åŠ¡åç§°å¿…é¡»ä¸€æ ·ã€‚ **å½“ä¸€ä¸ªplayä¸­æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆåï¼Œhandleræ‰ä¼šæ‰§è¡Œã€‚**å¥½å¤„æ˜¯å¯ä»¥å¤šæ¬¡è§¦å‘notifyï¼Œä½†æœ€ååªæ‰§è¡Œä¸€æ¬¡å¯¹åº”çš„handlerã€‚ ç¤ºä¾‹ï¼š --- - name: notify and handlers hosts: all gather_facts: no tasks: - name: task1 shell: uptime notify: hello handlers: - name: hello debug: msg: \"hello world\" æ‰§è¡Œç»“æœï¼š [root@master ansible]# ansible-playbook notify.yaml PLAY [notify and handlers] ******************************************************************************************************** TASK [task1] ********************************************************************************************************************** changed: [node2] changed: [node1] RUNNING HANDLER [hello] *********************************************************************************************************** ok: [node2] =\u003e {} MSG: hello world ok: [node1] =\u003e {} MSG: hello world PLAY RECAP ************************************************************************************************************************ node1 : ok=2 changed=1 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0 node2 : ok=2 changed=1 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0 ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:8:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç»„ç»‡playbook å°†æ‰€æœ‰playå…¨éƒ¨å†™åœ¨ä¸€ä¸ªyamlæ–‡ä»¶ä¸­ï¼Œå›ºç„¶å¯è¡Œï¼Œä½†æ˜¯å¯è¯»æ€§ã€ç»´æŠ¤æ€§å¤ªå·®ã€‚ æ¯”è¾ƒå¥½çš„åšæ³•æ˜¯ï¼Œå°†åŒç±»ä»»åŠ¡çš„playæ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚å¤šä¸ªä»»åŠ¡ï¼Œåˆ™å†™æˆå¤šä¸ªæ–‡ä»¶ï¼Œæœ€åä½¿ç”¨ä¸€ä¸ªå…¥å£æ–‡ä»¶æ¥å¼•ç”¨è¿™äº›ä»»åŠ¡æ–‡ä»¶ã€‚ å‡è®¾å…¥å£æ–‡ä»¶åä¸ºmain.yamlï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ä½¿ç”¨import_playbookæŒ‡ä»¤å¼•ç”¨å…¶å®ƒplaybookï¼š --- - import_playbook: \"init_server/aaa.yaml\" - import_playbook: \"init_server/bbb.yaml\" - import_playbook: \"init_server/ccc.yaml\" - import_playbook: \"init_server/ddd.yaml\" æ‰§è¡Œæ–¹å¼ä¸å˜ï¼šansible-playbook main.yaml ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:9:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç»„ç»‡å„ç±»å†…å®¹ï¼štaskã€handlerã€å˜é‡ ä¸Šé¢ä»‹ç»äº†ä½¿ç”¨playbookæŒ‡ä»¤æ¥å¼•å…¥å¤šä¸ªplaybookæ–‡ä»¶ï¼Œä»è€Œæé«˜å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚ å…¶å®ï¼Œansibleè¿˜æä¾›äº†æ›´åŠ è§„èŒƒçš„æ–¹å¼ï¼Œæ¥ç»„ç»‡æ›´å¤šçš„å†…å®¹ï¼Œå³roleå’Œcolllectionï¼Œcollectionè¿™é‡Œæš‚ä¸æ¶‰åŠã€‚ ansibleå¯ç»„ç»‡çš„å†…å®¹åŒ…æ‹¬ï¼š playbook task variable handlerï¼ˆhandlerä¹Ÿæ˜¯ä¸€ä¸ªtaskï¼Œåªæ˜¯ç¼–å†™åœ¨handlerså†…éƒ¨ï¼‰ role å¯ç»„ç»‡çš„æ„æ€æ˜¯è¯´ï¼Œå¯å°†ç›¸åŒå†…å®¹å®šä¹‰åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨ç›¸å…³æŒ‡ä»¤æ¥å¼•å…¥æŒ‡å®šæ–‡ä»¶å†…å®¹ã€‚ å¼•å…¥palybookï¼šimport_playbook å¼•å…¥taskæˆ–handlerï¼šimport_tasksã€include_tasks å¼•å…¥variableï¼švars_filesã€include_vars å¼•å…¥roleï¼šimport_roleã€include_roleã€roles importå’Œincludeä¸¤ç§å¼•å…¥æ–¹å¼æœ‰æ‰€åŒºåˆ«ï¼Œå‰è€…ä¸ºé™æ€åŠ è½½ï¼ˆåœ¨playbookè§£æçš„é˜¶æ®µï¼Œå†…å®¹å°†å†™å…¥åˆ°å¼•å…¥çš„ä½ç½®ï¼‰ï¼Œåè€…ä¸ºåŠ¨æ€åŠ è½½ï¼ˆè§£æé˜¶æ®µä¸å¼•å…¥ï¼Œè€Œæ˜¯åœ¨æ‰§è¡Œé˜¶æ®µæ‰å¼•å…¥ï¼‰ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:10:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç»„ç»‡tasks å¯å°†taskå•ç‹¬å†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨playé‡Œä½¿ç”¨import_tasksã€include_tasksæ¨¡å—å¼•å…¥ã€‚ ç¤ºä¾‹ï¼š ç¼–å†™ä¸€ä¸ªtasksæ–‡ä»¶tasks.yamlï¼š --- - name: task1 debug: msg: \"hello\" - name: task2 debug: msg: \"world\" åœ¨playbookä¸­å¼•å…¥ï¼š --- - name: play1 hosts: node1 gather_facts: no tasks: - name: task1 \u0026 task2 import_tasks: tasks.yaml # include_tasksæ¨¡å—ä¹Ÿè¡Œ åœ¨å¾ªç¯ä¸­å¼•å…¥tasksæ–‡ä»¶ï¼Œå¿…é¡»ä½¿ç”¨include_tasksæŒ‡ä»¤ --- - name: play1 hosts: node1 gather_facts: no tasks: - name: loop tasks include_tasks: tasks.yaml loop: - one - two ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:10:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç»„ç»‡handlers ä¸€èˆ¬æƒ…å†µä¸‹playbookçš„handlerså¦‚ä¸‹ï¼Œåœ¨taskä¸­ä½¿ç”¨handlerçš„ä»»åŠ¡åæ¥è§¦å‘ --- - name: play1 hosts: node1 gather_facts: no tasks: - name: task1 shell: uptime notify: h1 - name: task2 shell: date notify: h2 handlers: - name: h1 debug: msg: \"run h1\" - name: h2 debug: msg: \"run h2\" å¯å°†handlerå•ç‹¬ç¼–å†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹ï¼š $ cat handler1.yaml --- - name: handler1 debug: msg: \"run handler1\" $ cat handler2.yaml --- - name: handler2 debug: msg: \"run handler2\" ç„¶ååœ¨playbookä¸­ä½¿ç”¨import_tasksæˆ–include_tasksæŒ‡ä»¤æ¥å¼•å…¥ï¼ŒåŒæ—¶åœ¨notifyä¸­ä¿®æ”¹å¯¹åº”çš„handleråï¼š --- - name: play1 hosts: node1 gather_facts: no tasks: - name: task1 shell: uptime notify: handler1 # handler1ä¸ºé™æ€å¼•å…¥ï¼Œnotifyä½¿ç”¨handlerå - name: task2 shell: date notify: h2 # handler2ä¸ºåŠ¨æ€å¼•å…¥ï¼Œnotifyä½¿ç”¨å¼•å…¥çš„ä»»åŠ¡å handlers: - name: h1 import_tasks: handler1.yaml # import_tasksé™æ€å¼•å…¥ - name: h2 include_tasks: handler2.yaml # include_tasksåŠ¨æ€å¼•å…¥ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:10:2","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç»„ç»‡å˜é‡ å‰é¢å·²ç»ä»‹ç»äº†å¦‚ä½•åœ¨playbookä¸­ä½¿ç”¨varæŒ‡ä»¤ç›´æ¥è®¾ç½®å˜é‡ï¼Œé™¤äº†è¿™ä¸ªæ–¹æ³•ï¼Œansibleè¿˜æ”¯æŒå°†å˜é‡å•ç‹¬æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨playä¸­ä½¿ç”¨vars_filesæŒ‡ä»¤æˆ–include_varsæ¨¡å—æ¥å¼•å…¥è¯¥å˜é‡æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ï¼Œä½¿ç”¨-eé€‰é¡¹ï¼ˆâ€“extra_varsï¼‰æ¥è®¾ç½®å˜é‡æˆ–å¼•å…¥å˜é‡æ–‡ä»¶ã€‚ vars_filesæ˜¯playçº§åˆ«çš„æŒ‡ä»¤ï¼Œç”¨äºplayä¸­ï¼Œåœ¨playbookè§£æé˜¶æ®µå¼•å…¥å˜é‡æ–‡ä»¶ï¼› include_varsæ˜¯ä»»åŠ¡æ¨¡å—ï¼ˆç±»ä¼¼æ¨¡å—ä¸€æ ·ï¼‰ï¼Œç”¨åœ¨tasksä¸­å®šä¹‰ä¸€ä¸ªå¼•å…¥å˜é‡çš„ä»»åŠ¡ï¼Œåªæœ‰è¯¥ä»»åŠ¡æ‰§è¡Œä¹‹åï¼Œæ‰ä¼šåˆ›å»ºå˜é‡ï¼› -eé€‰é¡¹åœ¨å‘½ä»¤è¡Œä¸­ï¼Œå…¨å±€æœ‰æ•ˆï¼› vars_filesç¤ºä¾‹ å˜é‡æ–‡ä»¶varfile.yamlï¼Œå˜é‡çš„å®šä¹‰ä¸€æ ·ï¼Œä½¿ç”¨yamlæˆ–jsonæ ¼å¼ï¼Œå¯é‡‡ç”¨å­—å…¸æˆ–åˆ—è¡¨çš„å½¢å¼ã€‚ --- foo: a: hello b: world playbookæ–‡ä»¶å¦‚ä¸‹ï¼Œä½¿ç”¨vars_filesæŒ‡ä»¤æ¥å¼•å…¥ï¼š --- - name: play1 hosts: node1 gather_facts: no vars_files: - varfile.yaml # å¤šä¸ªå˜é‡æ–‡ä»¶ï¼Œä½¿ç”¨åˆ—è¡¨å½¢å¼å³å¯ tasks: - name: task1 debug: msg: \"{{foo.a}} {{foo.b}}\" include_varsæ¨¡å— include_varsæ˜¯æ¨¡å—æä¾›çš„åŠŸèƒ½ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ‰‹åŠ¨åˆ›å»ºçš„ä»»åŠ¡ï¼Œå’Œshellã€debugç­‰æ¨¡å—ä¸€æ ·ã€‚æ‰€ä»¥åªæœ‰å½“ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œç›¸å…³å˜é‡æ‰ä¼šåˆ›å»ºã€‚ ä¸‹é¢ä»‹ç»å‡ ä¸ªç”¨æ³•ã€‚ å¼•å…¥ä¸€ä¸ªæ–‡ä»¶ï¼š --- - name: play1 hosts: node1 gather_facts: no vars_files: - varfile.yaml tasks: - name: task1 include_vars: varfile.yaml # å¼•å…¥ä¹‹åï¼Œå¯åœ¨åç»­çš„ä»»åŠ¡ä¸­ä½¿ç”¨ - name: task2 debug: msg: \"{{foo.a}} {{foo.b}}\" å¼•å…¥å¤šä¸ªæ–‡ä»¶ï¼Œå¯é‡‡ç”¨å¾ªç¯ï¼š - name: task1 include_vars: \"{{ item }}\" loop: - varfile1.yaml - varfile2.yaml è¿˜å¯ä»¥å¼•å…¥ç›®å½•ï¼Œä½¿ç”¨æ¡ä»¶å’Œå…¶å®ƒå‚æ•°æ§åˆ¶å¼•å…¥çš„å˜é‡æ–‡ä»¶ã€‚è¿™é‡Œä¸å±•å¼€äº†ï¼Œè¯¥æ¨¡å—æœ‰å¾ˆå¤šå‚æ•°å’Œç”¨æ³•ï¼Œå…·ä½“å¯å‚è€ƒå®˜ç½‘ï¼š https://docs.ansible.com/ansible/latest/collections/ansible/builtin/include_vars_module.html#ansible-collections-ansible-builtin-include-vars-module -eé€‰é¡¹ ansible-playbookå‘½ä»¤çš„-eé€‰é¡¹æˆ–â€“extra-varsé€‰é¡¹ä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å˜é‡æˆ–å¼•å…¥å˜é‡æ–‡ä»¶ï¼š # å®šä¹‰å•ä¸ªå˜é‡ $ ansible-playbook -e 'var1=\"value1\"' xxx.yml # å®šä¹‰å¤šä¸ªå˜é‡ $ ansible-playbook -e 'var1=\"value1\" var2=\"value2\"' xxx.yml # å¼•å…¥å•ä¸ªå˜é‡æ–‡ä»¶ $ ansible-playbook -e '@varfile1.yml' xxx.yml # å¼•å…¥å¤šä¸ªå˜é‡æ–‡ä»¶ $ ansible-playbook -e '@varfile1.yml' -e '@varfile2.yml' xxx.yml ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:10:3","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨role ä¸Šé¢å°†å„ç±»å†…å®¹æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨ç›¸å…³æŒ‡ä»¤æˆ–æ¨¡å—å°†å…¶å¼•å…¥ã€‚ansibleä¸­ï¼Œæœ‰ä¸€ç§æ›´ä¸ºè§„èŒƒçš„ç»„ç»‡æ–¹å¼ï¼Œå³roleã€‚ ä½¿ç”¨roleï¼Œå³å¯æ— éœ€æ‰‹åŠ¨ä½¿ç”¨è¿™äº›æŒ‡ä»¤æˆ–æ¨¡å—äº†ã€‚æŒ‰ç…§roleæŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜æ”¾å¯¹åº”çš„å†…å®¹ï¼Œansibleå°±ä¼šè‡ªåŠ¨å¼•å…¥ã€‚ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:11:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"roleçš„æ–‡ä»¶ç»“æ„ ansible-galaxy init role1å‘½ä»¤ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªroleæ¡†æ¶ã€‚ $ cd /etc/ansible/roles $ ansible-galaxy init role01 $ tree role01 role01 â”œâ”€â”€ defaults â”‚ â””â”€â”€ main.yml â”œâ”€â”€ files # å¤–éƒ¨æ–‡ä»¶ï¼Œæ”¾å…¥æ­¤å¤„çš„æ–‡ä»¶ï¼Œåœ¨roleçš„å„ç§ä»»åŠ¡ä¸­ç›´æ¥æ— éœ€ä½¿ç”¨å…¨è·¯å¾„ â”œâ”€â”€ handlers â”‚ â””â”€â”€ main.yml # å­˜æ”¾handler â”œâ”€â”€ meta â”‚ â””â”€â”€ main.yml # è¯¥roleä¾èµ–çš„å…ˆè¡Œroleã€‚å®šä¹‰åœ¨æ­¤å¤„çš„roleå°†åœ¨è¯¥roleè¿è¡Œå‰æ‰§è¡Œ â”œâ”€â”€ README.md â”œâ”€â”€ tasks â”‚ â””â”€â”€ main.yml # å­˜æ”¾ä»»åŠ¡ â”œâ”€â”€ templates # æ¨¡æ¿æ–‡ä»¶ï¼Œæ”¾å…¥æ­¤å¤„çš„æ–‡ä»¶ï¼Œåœ¨roleçš„å„ç§ä»»åŠ¡ä¸­æ— éœ€ä½¿ç”¨å…¨è·¯å¾„ â”œâ”€â”€ tests â”‚ â”œâ”€â”€ inventory â”‚ â””â”€â”€ test.yml â””â”€â”€ vars â””â”€â”€ main.yml # å­˜æ”¾å˜é‡ åœ¨ç›¸åº”ç›®å½•åŠæ–‡ä»¶ä¸‹ç¼–å†™å¯¹åº”å†…å®¹ï¼Œç„¶åè¿˜éœ€è¦æä¾›ä¸€ä¸ªå…¥å£playbookæ–‡ä»¶ã€‚åœ¨å…¥å£playbookæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨import_rolesã€include_roleã€rolesæŒ‡ä»¤æ¥å¼•å…¥roleã€‚æœ€åä½¿ç”¨ansible-playbookå‘½ä»¤æ‰§è¡Œå…¥å£æ–‡ä»¶ï¼Œå³å¯æ‰§è¡Œå®šä¹‰åœ¨roleä¸­çš„å„ç§ä»»åŠ¡äº†ã€‚ enter.ymlæ–‡ä»¶å¦‚ä¸‹ï¼š --- - name: enter for all roles hosts: node1 gather_facts: no roles: - role01 # å¤šä¸ªroleå¯ä½¿ç”¨åˆ—è¡¨ä¸€èµ·åˆ—å‡º ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:11:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç¼–å†™ä¸€ä¸ªrole å®šä¹‰roleçš„å˜é‡ etc/ansible/roles/role01/vars/main.ymlæ–‡ä»¶æ˜¯roleå®šä¹‰å˜é‡æˆ–å¼•å…¥å˜é‡æ–‡ä»¶çš„åœ°æ–¹ã€‚ etc/ansible/roles/role01/defaults/main.ymlæ–‡ä»¶æ˜¯roleå®šä¹‰é»˜è®¤å˜é‡çš„åœ°æ–¹ï¼Œä¼˜å…ˆçº§è¾ƒä½ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¼•å…¥æ–‡ä»¶ã€‚ --- # vars file for role01 foo1: a: hello b: world å®šä¹‰roleçš„task /etc/ansible/roles/role01/tasks/main.ymlæ–‡ä»¶æ˜¯roleå®šä¹‰taskæˆ–è€…å¼•å…¥taskæ–‡ä»¶çš„åœ°æ–¹ã€‚ --- # tasks file for role01 - name: task1 debug: msg: \"{{ foo1.a }} {{ foo1.b }}\" notify: handler1 changed_when: true # è¯¥æŒ‡ä»¤ä½¿å¾—chenged=1ï¼Œè§¦å‘notify å®šä¹‰roleçš„handler /etc/ansible/roles/role01/handles/main.ymlæ–‡ä»¶æ˜¯roleå®šä¹‰handleræˆ–è€…å¼•å…¥handleræ–‡ä»¶çš„åœ°æ–¹ã€‚ --- # handlers file for role01 - name: handler1 debug: msg: \"run handler1\" æ‰§è¡Œï¼š $ ansible-playbook enter.yml PLAY [enter for all roles] ********************************************************************************************************** TASK [role01 : task1] *************************************************************************************************************** changed: [node1] =\u003e {} MSG: hello world RUNNING HANDLER [role01 : handler1] ************************************************************************************************* ok: [node1] =\u003e {} MSG: run handler1 PLAY RECAP ************************************************************************************************************************** node1 : ok=2 changed=1 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0 ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:11:2","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"playbookçš„æ‰§è¡Œé¡ºåº playbookä»ä¸Šå¾€ä¸‹æ‰§è¡Œå„ä¸ªplayï¼Œåœ¨æ¯ä¸ªplayå†…ï¼Œä»ä¸Šå¾€ä¸‹æ‰§è¡Œå„ä¸ªtaskã€‚ ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œä»»åŠ¡çš„é¡ºåºå¦‚ä¸‹ï¼š è§£æé…ç½®/etc/ansible/ansible.cfg è§£æinventory gather_factsä»»åŠ¡ pre_tasksä»»åŠ¡ pre_tasksä»»åŠ¡è§¦å‘çš„handler rolesæŒ‡ä»¤åŠ è½½çš„role taskæŒ‡ä»¤ä¸­çš„ä»»åŠ¡ roleså’Œtasksè§¦å‘çš„handler post_tasksæŒ‡ä»¤ä¸­çš„ä»»åŠ¡ post_tasksä¸­ä»»åŠ¡è§¦å‘çš„handler å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œansibleåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œå®Œæˆå‰ä¸€ä¸ªä»»åŠ¡åï¼Œæ‰è¿›å…¥ä¸‹ä¸€ä¸ªä»»åŠ¡çš„æ‰§è¡Œæµç¨‹ã€‚handlersæ˜¯åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œå¼€å§‹æ‰§è¡Œã€‚ ä»inventoryä¸­é€‰æ‹©æ‰§è¡Œplayçš„ç›¸å…³ä¸»æœº è¿æ¥åˆ°è¿œç¨‹ä¸»æœºï¼Œé€šå¸¸ä½¿ç”¨sshæ–¹å¼ æ‹·è´ç›¸å…³æ¨¡å—åˆ°è¿œç¨‹ä¸»æœºï¼Œå¹¶å¼€å§‹æ‰§è¡Œ ","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:12:0","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç†è§£å§”æ‰˜ä»»åŠ¡ å§”æ‰˜æ˜¯æŒ‡å°†åŸæœ¬åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œçš„ä»»åŠ¡ï¼Œå§”æ‰˜ç»™å¦ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œã€‚ è¦æƒ³ç†è§£å§”æ‰˜ï¼Œéœ€è¦å…ˆäº†è§£ansibleä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œansibleå…ˆé€‰æ‹©æ‰§è¡Œä»»åŠ¡çš„ä¸»æœºï¼Œåè¿æ¥è¯¥ä¸»æœºï¼Œå†æ‹·è´ç›¸å…³æ¨¡å—ï¼Œå¹¶åœ¨è¯¥è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œæ¨¡å—ã€‚ ä½†æ˜¯åœ¨ä»»åŠ¡ä¸­è¿›è¡Œäº†å§”æ‰˜åï¼Œå®é™…è¿æ¥ä¸»æœºå’Œæ‰§è¡Œæ¨¡å—åŠ¨ä½œå°†å‘ç”Ÿæ”¹å˜ã€‚æ¯”å¦‚å°†node1ä¸»æœºçš„ä»»åŠ¡å§”æ‰˜ç»™node2ï¼Œansibleä¼šæ ¹æ®hostsæŒ‡ä»¤é€‰æ‹©è¿œç¨‹ä¸»æœºnode1åï¼Œç„¶åæ ¹æ®delegate_toæŒ‡ä»¤ï¼Œè¿æ¥åˆ°node2èŠ‚ç‚¹ï¼Œå¹¶å°†ç›¸å…³æ¨¡å—æ‹·è´åˆ°node2å¹¶åœ¨node2ä¸Šæ‰§è¡Œã€‚ ä»¥ä¸‹ä½¿ç”¨dalegate_toæŒ‡ä»¤åšä¸ªæ¼”ç¤º test.yamlæ–‡ä»¶ï¼š --- - name: play1 hosts: node1 gather_facts: no tasks: - name: task1 shell: hostname delegate_to: node2 # å§”æ‰˜node2æ‰§è¡Œshellæ¨¡å— æ‰§è¡Œansible-playbook -vvv test.yamlï¼Œç„¶åæŸ¥çœ‹å…·ä½“çš„æ‰§è¡Œæ—¥å¿—ã€‚ å†å°†delegate_toæŒ‡ä»¤å»é™¤ï¼Œæ‰§è¡Œansible-playbook -vvv test.yamlå‘½ä»¤æŸ¥çœ‹ä¸å§”æ‰˜çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä¸¤è€…å¯¹æ¯”å¾ˆå®¹æ˜“å‘ç°ansibleè¿æ¥çš„ä¸»æœºä¸ºå§”æ‰˜çš„ä¸»æœºã€‚ $ ansible-playbook -vvv test.yaml æ‰“å°è¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼Œä¹Ÿå¯åœ¨/var/log/ansible.logä¸­æŸ¥çœ‹ã€‚ ansible-playbook 2.9.25 config file = /etc/ansible/ansible.cfg configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules'] ansible python module location = /usr/lib/python2.7/site-packages/ansible executable location = /usr/bin/ansible-playbook python version = 2.7.5 (default, Oct 14 2020, 14:45:30) [GCC 4.8.5 20150623 (Red Hat 4.8.5-44)] Using /etc/ansible/ansible.cfg as config file host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method Parsed /etc/ansible/hosts inventory source with ini plugin Skipping callback 'actionable', as we already have a stdout callback. Skipping callback 'counter_enabled', as we already have a stdout callback. Skipping callback 'debug', as we already have a stdout callback. Skipping callback 'dense', as we already have a stdout callback. Skipping callback 'dense', as we already have a stdout callback. Skipping callback 'full_skip', as we already have a stdout callback. Skipping callback 'json', as we already have a stdout callback. Skipping callback 'minimal', as we already have a stdout callback. Skipping callback 'null', as we already have a stdout callback. Skipping callback 'oneline', as we already have a stdout callback. Skipping callback 'selective', as we already have a stdout callback. Skipping callback 'skippy', as we already have a stdout callback. Skipping callback 'stderr', as we already have a stdout callback. Skipping callback 'unixy', as we already have a stdout callback. Skipping callback 'yaml', as we already have a stdout callback. PLAYBOOK: test.yaml ***************************************************************************************************************** 1 plays in test.yaml PLAY [play1] ************************************************************************************************************************ META: ran handlers TASK [task1] ************************************************************************************************************************ task path: /etc/ansible/test.yaml:6 \u003cnode2\u003e ESTABLISH SSH CONNECTION FOR USER: None \u003cnode2\u003e SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o Port=22 -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/root/.ansible/cp/0d67807d8c node2 '/bin/sh -c '\"'\"'echo ~ \u0026\u0026 sleep 0'\"'\"'' \u003cnode2\u003e (0, '/root\\n', '') \u003cnode2\u003e ESTABLISH SSH CONNECTION FOR USER: None \u003cnode2\u003e SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o Port=22 -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/root/.ansible/cp/0d67807d8c node2 '/bin/sh -c '\"'\"'( umask 77 \u0026\u0026 mkdir -p \"` echo /root/.ansible/tmp `\"\u0026\u0026 mkdir \"` echo /root/.ansible/tmp/ansible-tmp-1642857067.57-71643-202799162287554 `\" \u0026\u0026 echo ansible-tmp-1642857067.57-71643-202799162287554=\"` echo /root/.ansible/tmp/ansible-tmp-1642857067.57-71643-202799162287554 `\" ) \u0026\u0026 sleep 0'\"'\"'' \u003cnode2\u003e (0, 'ansible-tmp-1642857067.57-71643-202799162287554=/root/.ansible/tmp/ans","date":"2022-04-22","objectID":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/:12:1","tags":["ansible"],"title":"ansibleåŸºç¡€æ•™ç¨‹","uri":"/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"æ‰¹é‡å…å¯†ç™»å½• no_pass.sh:åªéœ€è¦è¿è¡Œè„šæœ¬ï¼Œè¾“å…¥ç›®æ ‡ç«¯æœåŠ¡å™¨ç”¨æˆ·åå’Œå¯†ç å³å¯ã€‚ipæ ¹æ®ç›®æ ‡ç«¯ç½‘æ®µä¿®æ”¹ã€‚ #!/bin/bash read -p 'input user: ' USER echo \"$USER\" read -s -p 'input pass: ' PASS rm -f /root/.ssh/id_rsa (ssh-keygen -P \"\" -f /root/.ssh/id_rsa) \u0026\u003e/dev/null for i in {5..7} do IP_host=172.18.0.${i} ping -c 1 -w 1 ${IP_host} \u0026\u003e/dev/null if [ $? -eq 0 ];then (sshpass -p ${PASS} ssh-copy-id -o StrictHostKeyChecking=no ${IP_host}) \u0026\u003e/dev/null echo -e \"\\e[1;32m ${IP_host} ok \\e[0m\" fi done ","date":"2022-04-18","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/:1:0","tags":["shell"],"title":"shellè„šæœ¬åº”ç”¨ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","uri":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"},{"categories":["å·¥å…·"],"content":"è®¡ç®—å†…å­˜ä½¿ç”¨å æ¯” vi memory_info.sh \u0026\u0026 chmod +x memory_info.sh #!/bin/bash MEM_TOTAL=`free -h |awk 'NR==2{print $2}'` MEM_USE=`free -h |awk 'NR==2{print $3}'` MEM_USED=`free | grep -i mem |awk '{print $3/$2*100\"%\"}'` MEM_FREE=`free -h |awk 'NR==2{print $4}'` MEM_FREED=`free | grep -i mem |awk '{print $4/$2*100\"%\"}'` MEM_BUFF_CACHE=`free -h |awk 'NR==2{print $6}'` MEM_BUFF_CACHED=`free | grep -i mem |awk '{print $6/$2*100 \"%\"}'` MEM_SHARE=`free -h |awk 'NR==2{print $5}'` MEM_SHARED=`free | grep -i mem |awk '{print $5/$2*100 \"%\"}'` MEM_ZONE=`head -3 /proc/meminfo | awk 'NR==1{t=$2}NR==2{f=$2;print(t-f)*100/t\"%\"}'` echo -e \"\\t\\e[1;32må†…å­˜æ€»é‡: $MEM_TOTAL \\e[0m\" echo -e \"\\t\\e[1;32må†…å­˜æ€»é‡å‡å‰©ä½™å†…å­˜(æ‰€æœ‰å·²ä½¿ç”¨)å æ¯”: $MEM_ZONE \\e[0m\" echo -e \"\\t\\e[1;32må·²ä½¿ç”¨: $MEM_USE å æ¯”: $MEM_USED \\e[0m\" echo -e \"\\t\\e[1;32må‰© ä½™: $MEM_FREE å æ¯”: $MEM_FREED \\e[0m\" echo -e \"\\t\\e[1;32må…± äº«: $MEM_SHARE å æ¯”: $MEM_SHARED \\e[0m\" echo -e \"\\t\\e[1;32mç¼“å†²åŒº: $MEM_BUFF_CACHE å æ¯”: $MEM_BUFF_CACHED \\e[0m\" æ‰§è¡Œåçš„ç»“æœ root@ccb07fbb3515:~# ./memoryinfo.sh å†…å­˜æ€»é‡: 1.8Gi å†…å­˜æ€»é‡å‡å‰©ä½™å†…å­˜(æ‰€æœ‰å·²ä½¿ç”¨)å æ¯”: 93.9799% å·²ä½¿ç”¨: 695Mi å æ¯”: 38.0057% å‰© ä½™: 110Mi å æ¯”: 6.01987% å…± äº«: 157Mi å æ¯”: 8.59889% ç¼“å†²åŒº: 1.0Gi å æ¯”: 55.9744% ","date":"2022-04-18","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/:2:0","tags":["shell"],"title":"shellè„šæœ¬åº”ç”¨ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","uri":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"},{"categories":["å·¥å…·"],"content":"å·¡æ£€æŠ¥å‘Š system_check.shå·¡æ£€ç»“æœåœ¨å½“å‰ç”¨æˆ·logæ–‡ä»¶å¤¹ä¸‹ #!/bin/bash # @Author: localhost # @Date: 2021-03-16 09:56:57 # @Last Modified by: localhost # @Last Modified time: 2021-03-16 11:06:31 # @E-mail: localhost@163.com #!/bin/bash #ä¸»æœºä¿¡æ¯æ¯æ—¥å·¡æ£€ IPADDR=$(ifconfig eth0|grep 'inet addr'|awk -F '[ :]' '{print $13}') #ç¯å¢ƒå˜é‡PATHæ²¡è®¾å¥½ï¼Œåœ¨croné‡Œæ‰§è¡Œæ—¶æœ‰å¾ˆå¤šå‘½ä»¤ä¼šæ‰¾ä¸åˆ° export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin source /etc/profile [ $(id -u) -gt 0 ] \u0026\u0026 echo \"è¯·ç”¨rootç”¨æˆ·æ‰§è¡Œæ­¤è„šæœ¬ï¼\" \u0026\u0026 exit 1 centosVersion=$(awk '{print $(NF-1)}' /etc/redhat-release) VERSION=\"2020-03-16\" #æ—¥å¿—ç›¸å…³ PROGPATH=`echo $0 | sed -e 's,[\\\\/][^\\\\/][^\\\\/]*$,,'` [ -f $PROGPATH ] \u0026\u0026 PROGPATH=\".\" LOGPATH=\"$PROGPATH/log\" [ -e $LOGPATH ] || mkdir $LOGPATH RESULTFILE=\"$LOGPATH/HostDailyCheck-$IPADDR-`date +%Y%m%d`.txt\" #å®šä¹‰æŠ¥è¡¨çš„å…¨å±€å˜é‡ report_DateTime=\"\" #æ—¥æœŸ ok report_Hostname=\"\" #ä¸»æœºå ok report_OSRelease=\"\" #å‘è¡Œç‰ˆæœ¬ ok report_Kernel=\"\" #å†…æ ¸ ok report_Language=\"\" #è¯­è¨€/ç¼–ç  ok report_LastReboot=\"\" #æœ€è¿‘å¯åŠ¨æ—¶é—´ ok report_Uptime=\"\" #è¿è¡Œæ—¶é—´ï¼ˆå¤©ï¼‰ ok report_CPUs=\"\" #CPUæ•°é‡ ok report_CPUType=\"\" #CPUç±»å‹ ok report_Arch=\"\" #CPUæ¶æ„ ok report_MemTotal=\"\" #å†…å­˜æ€»å®¹é‡(MB) ok report_MemFree=\"\" #å†…å­˜å‰©ä½™(MB) ok report_MemUsedPercent=\"\" #å†…å­˜ä½¿ç”¨ç‡% ok report_DiskTotal=\"\" #ç¡¬ç›˜æ€»å®¹é‡(GB) ok report_DiskFree=\"\" #ç¡¬ç›˜å‰©ä½™(GB) ok report_DiskUsedPercent=\"\" #ç¡¬ç›˜ä½¿ç”¨ç‡% ok report_InodeTotal=\"\" #Inodeæ€»é‡ ok report_InodeFree=\"\" #Inodeå‰©ä½™ ok report_InodeUsedPercent=\"\" #Inodeä½¿ç”¨ç‡ ok report_IP=\"\" #IPåœ°å€ ok report_MAC=\"\" #MACåœ°å€ ok report_Gateway=\"\" #é»˜è®¤ç½‘å…³ ok report_DNS=\"\" #DNS ok report_Listen=\"\" #ç›‘å¬ ok report_Selinux=\"\" #Selinux ok report_Firewall=\"\" #é˜²ç«å¢™ ok report_USERs=\"\" #ç”¨æˆ· ok report_USEREmptyPassword=\"\" #ç©ºå¯†ç ç”¨æˆ· ok report_USERTheSameUID=\"\" #ç›¸åŒIDçš„ç”¨æˆ· ok report_PasswordExpiry=\"\" #å¯†ç è¿‡æœŸï¼ˆå¤©ï¼‰ ok report_RootUser=\"\" #rootç”¨æˆ· ok report_Sudoers=\"\" #sudoæˆæƒ ok report_SSHAuthorized=\"\" #SSHä¿¡ä»»ä¸»æœº ok report_SSHDProtocolVersion=\"\" #SSHåè®®ç‰ˆæœ¬ ok report_SSHDPermitRootLogin=\"\" #å…è®¸rootè¿œç¨‹ç™»å½• ok report_DefunctProsess=\"\" #åƒµå°¸è¿›ç¨‹æ•°é‡ ok report_SelfInitiatedService=\"\" #è‡ªå¯åŠ¨æœåŠ¡æ•°é‡ ok report_SelfInitiatedProgram=\"\" #è‡ªå¯åŠ¨ç¨‹åºæ•°é‡ ok report_RuningService=\"\" #è¿è¡Œä¸­æœåŠ¡æ•° ok report_Crontab=\"\" #è®¡åˆ’ä»»åŠ¡æ•° ok report_Syslog=\"\" #æ—¥å¿—æœåŠ¡ ok report_SNMP=\"\" #SNMP OK report_NTP=\"\" #NTP ok report_JDK=\"\" #JDKç‰ˆæœ¬ ok function version(){ echo \"\" echo \"\" echo \"ç³»ç»Ÿå·¡æ£€è„šæœ¬ï¼šVersion $VERSION\" } function getCpuStatus(){ echo \"\" echo \"\" echo \"############################ CPUæ£€æŸ¥ #############################\" Physical_CPUs=$(grep \"physical id\" /proc/cpuinfo| sort | uniq | wc -l) Virt_CPUs=$(grep \"processor\" /proc/cpuinfo | wc -l) CPU_Kernels=$(grep \"cores\" /proc/cpuinfo|uniq| awk -F ': ' '{print $2}') CPU_Type=$(grep \"model name\" /proc/cpuinfo | awk -F ': ' '{print $2}' | sort | uniq) CPU_Arch=$(uname -m) echo \"ç‰©ç†CPUä¸ªæ•°:$Physical_CPUs\" echo \"é€»è¾‘CPUä¸ªæ•°:$Virt_CPUs\" echo \"æ¯CPUæ ¸å¿ƒæ•°:$CPU_Kernels\" echo \" CPUå‹å·:$CPU_Type\" echo \" CPUæ¶æ„:$CPU_Arch\" #æŠ¥è¡¨ä¿¡æ¯ report_CPUs=$Virt_CPUs #CPUæ•°é‡ report_CPUType=$CPU_Type #CPUç±»å‹ report_Arch=$CPU_Arch #CPUæ¶æ„ } function getMemStatus(){ echo \"\" echo \"\" echo \"############################ å†…å­˜æ£€æŸ¥ ############################\" if [[ $centosVersion \u003c 7 ]];then free -mo else free -h fi #æŠ¥è¡¨ä¿¡æ¯ MemTotal=$(grep MemTotal /proc/meminfo| awk '{print $2}') #KB MemFree=$(grep MemFree /proc/meminfo| awk '{print $2}') #KB let MemUsed=MemTotal-MemFree MemPercent=$(awk \"BEGIN {if($MemTotal==0){printf 100}else{printf \\\"%.2f\\\",$MemUsed*100/$MemTotal}}\") report_MemTotal=\"$((MemTotal/1024))\"\"MB\" #å†…å­˜æ€»å®¹é‡(MB) report_MemFree=\"$((MemFree/1024))\"\"MB\" #å†…å­˜å‰©ä½™(MB) report_MemUsedPercent=\"$(awk \"BEGIN {if($MemTotal==0){printf 100}else{printf \\\"%.2f\\\",$MemUsed*100/$MemTotal}}\")\"\"%\" #å†…å­˜ä½¿ç”¨ç‡% } function getDiskStatus(){ echo \"\" echo \"\" echo \"############################ ç£ç›˜æ£€æŸ¥ ############################\" df -hiP | sed 's/Mounted on/Mounted/'\u003e /tmp/inode df -hTP | sed 's/Mounted on/Mounted/'\u003e /tmp/disk join /tmp/disk /tmp/inode | awk '{print $1,$2,\"|\",$3,$4,$5,$6,\"|\",$8,$9,$10,$11,\"|\",$12}'| column -t #æŠ¥è¡¨ä¿¡æ¯ diskdata=$(df -TP | sed '1d' | awk '$2!=\"tmpfs\"{print}') #KB disktotal=$(echo \"$diskdata\" | awk '{total+=$3}END{print total}') #KB diskused=$(echo \"$diskdata\" | awk '{t","date":"2022-04-18","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/:3:0","tags":["shell"],"title":"shellè„šæœ¬åº”ç”¨ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","uri":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"},{"categories":["å·¥å…·"],"content":"ä»ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶åŠ .tmpï¼Œè½¬ç§»åˆ°å¦ä¸€ä¸ªç›®å½•ä¸‹å†å»æ‰.tmpã€‚ #! /bin/bash PRE_HOME=/iflytek/sl_export_pre EXP_HOME=/iflytek/sl_export function nameadd() { cd $PRE_HOME for filename in `ls *.*` do echo $filename | mv $filename $filename\".tmp\" done sleep 1 mv *.tmp $EXP_HOME } function namesub() { cd $EXP_HOME for filename in `ls *.tmp` do echo $filename | mv $filename `sed 's/.tmp//g'` done } nameadd sleep 1 namesub ","date":"2022-04-18","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/:3:1","tags":["shell"],"title":"shellè„šæœ¬åº”ç”¨ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","uri":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"},{"categories":["å·¥å…·"],"content":"åŒæ—¶è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶æ‰§è¡Œã€‚ 15 8,10,12,15,17,19 * * * ","date":"2022-04-18","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/:3:2","tags":["shell"],"title":"shellè„šæœ¬åº”ç”¨ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","uri":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"},{"categories":["å·¥å…·"],"content":"å®šæ—¶é‡å¯è¿›ç¨‹é…åˆcrontab ä½¿ç”¨ #!/bin/bash #!/bin/sh date +'%Y-%m-%d %H:%M:%S' PID=`ps -ef | grep '/tmpdisk/siphole_back -c /etc/siphole/siphole_back_3.conf' | grep -v \"grep\" | awk '{print $2}'` kill -9 $PID /tmpdisk/siphole_back -c /etc/siphole/siphole_back_3.conf crontab 59 23 * * * /tmpdisk/restart_back3.sh \u003e\u003e /tmpdisk/restart_back.txt æ˜¯å¦æ‰§è¡ŒæˆåŠŸä¼šè¾“å‡ºåˆ°æ—¥å¿—/tmpdisk/restart_back.txt ","date":"2022-04-18","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/:3:3","tags":["shell"],"title":"shellè„šæœ¬åº”ç”¨ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","uri":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨awkå°†ä¸¤ä¸ªå•è¯ä½ç½®äº’æ¢ æ–‡æœ¬ # cat a.txt tian po å¤„ç† awk '{temp=$1;$1=$2;$2=temp;print $0}' a.txt po tian ","date":"2022-04-18","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/:3:4","tags":["shell"],"title":"shellè„šæœ¬åº”ç”¨ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","uri":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"},{"categories":["å·¥å…·"],"content":"å–å‡ºæ–‡æœ¬ä¸­æŒ‡å®šè¡ŒæŒ‡å®šä½ç½®çš„å­—æ®µå†…å®¹ æ–‡æœ¬å¦‚ä¸‹ # cat a.txt root 4041836 4040563 0 09:23 pts/0 00:00:00 journalctl _PID=2726353 -f root 4041863 4040563 0 09:23 pts/0 00:00:00 journalctl _PID=3371956 -f å¤„ç† awk 'NR==2 {print $2}' a.txt 4041863 åˆ†æ åœ¨ awk å‘½ä»¤ä¸­ï¼ŒNR æ˜¯ä¸€ä¸ªå†…ç½®å˜é‡ï¼Œä»£è¡¨å½“å‰æ­£åœ¨å¤„ç†çš„è¡Œæ•°ã€‚æ¯æ¬¡ awk å¤„ç†ä¸€è¡Œæ–‡æœ¬æ—¶ï¼ŒNR çš„å€¼éƒ½ä¼šå¢åŠ  1ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ NR æ¥åˆ¤æ–­å¤„ç†çš„æ˜¯æ–‡ä»¶çš„ç¬¬å‡ è¡Œï¼Œå¹¶æ ¹æ®éœ€è¦å¯¹ç‰¹å®šè¡Œæ‰§è¡Œæ“ä½œã€‚å¦‚æœå½“å‰è¡Œçš„è¡Œå·ï¼ˆå³ NR çš„å€¼ï¼‰ç­‰äº 2ï¼Œåˆ™ä¼šæ‰“å°æŒ‡å®šçš„æ¶ˆæ¯ã€‚ ","date":"2022-04-18","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/:3:5","tags":["shell"],"title":"shellè„šæœ¬åº”ç”¨ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","uri":"/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"},{"categories":["å·¥å…·"],"content":"éœ€æ±‚ é€šè¿‡vpnç›´æ¥è®¿é—®å†…ç½‘å®¹å™¨ipå¯ä»¥ç›´æ¥ç™»å½•ï¼Œä¸å†éœ€è¦å…ˆç™»å…¥å…¬ç½‘IPå†è·³è½¬åˆ°å†…ç½‘å®¹å™¨å†…éƒ¨ã€‚ ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:1:0","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"è®¿é—®ç¤ºæ„å›¾ äº’è”ç½‘ï¼ˆopenvpn clientï¼‰--\u003eï¼ˆå…¬ç½‘ipï¼‰æœåŠ¡å™¨ï¼ˆç§ç½‘ip:172.18.0.10ï¼‰--\u003eæœåŠ¡å™¨ç«¯å®¹å™¨ï¼ˆå†…ç½‘172.18.0.8ï¼‰ ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:1:1","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"openvpnæœåŠ¡ç«¯é…ç½® ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:2:0","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"æ‹‰å–é•œåƒ docker pull kylemanna/openvpn ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:2:1","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"åˆ›å»ºæ˜ å°„ç›®å½• mkdir -pv /data/openvpn/conf ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:2:2","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"ç”Ÿæˆé…ç½®æ–‡ä»¶ docker run -v /data/openvpn:/etc/openvpn --rm kylemanna/openvpn ovpn_genconfig -u udp://10.10.10.10 ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:2:3","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"ç”Ÿæˆå¯†é’¥æ–‡ä»¶ è¦æ±‚è¾“å…¥ç§é’¥å¯†ç  docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn ovpn_initpki Enter PEM pass phrase: 098poilkj. # è¾“å…¥ç§é’¥å¯†ç  Verifying - Enter PEM pass phrase: 098poilkj. # é‡æ–°è¾“å…¥ä¸€æ¬¡å¯†ç  Common Name (eg: your user,host,or server name) [Easy-RSA CA]: # è¾“å…¥ä¸€ä¸ªCAåç§°ã€‚å¯ä»¥ä¸ç”¨è¾“å…¥ï¼Œç›´æ¥å›è½¦ Enter pass phrase for /etc/openvpn/pki/private/ca.key: 123456 # è¾“å…¥åˆšæ‰è®¾ç½®çš„ç§é’¥å¯†ç ï¼Œå®Œæˆååœ¨è¾“å…¥ä¸€æ¬¡ ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:2:4","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦ test1æ”¹æˆå…¶ä»–åå­— docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn easyrsa build-client-full test1 nopass Enter pass phrase for /etc/openvpn/pki/private/ca.key: 098poilkj. # è¾“å…¥åˆšæ‰è®¾ç½®çš„å¯†ç  ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:2:5","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"å¯¼å‡ºå®¢æˆ·ç«¯é…ç½® docker run -v /data/openvpn:/etc/openvpn --rm kylemanna/openvpn ovpn_getclient test1 \u003e /data/openvpn/conf/test1.ovpn ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:2:6","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"å¯åŠ¨openvpn docker run --name openvpn -v /data/openvpn:/etc/openvpn -d -p 1194:1194/udp --cap-add=NET_ADMIN kylemanna/openvpn ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:2:7","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"openvpnç”¨æˆ·ç®¡ç† ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:3:0","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"æ·»åŠ ç”¨æˆ·è„šæœ¬ vim add_user.sh #!/bin/bash read -p \"please your username: \" NAME docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn easyrsa build-client-full $NAME nopass docker run -v /data/openvpn:/etc/openvpn --rm kylemanna/openvpn ovpn_getclient $NAME \u003e /data/openvpn/conf/\"$NAME\".ovpn docker restart openvpn ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:3:1","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"åˆ é™¤ç”¨æˆ·è„šæœ¬ vim del_user.sh #!/bin/bash read -p \"Delete username: \" DNAME docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn easyrsa revoke $DNAME docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn easyrsa gen-crl docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn rm -f /etc/openvpn/pki/reqs/\"DNAME\".req docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn rm -f /etc/openvpn/pki/private/\"DNAME\".key docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn rm -f /etc/openvpn/pki/issued/\"DNAME\".crt docker restart openvpn ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:3:2","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"æ·»åŠ ç”¨æˆ· ./add_user.sh # è¾“å…¥è¦æ·»åŠ çš„ç”¨æˆ·åï¼Œå›è½¦åè¾“å…¥åˆšæ‰åˆ›å»ºçš„ç§é’¥å¯†ç  åˆ›å»ºçš„è¯ä¹¦åœ¨/data/openvpn/confç›®å½•ä¸‹ã€‚ ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:3:3","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"openvpnå®¢æˆ·ç«¯é…ç½® å®˜ç½‘ä¸‹è½½å®¢æˆ·ç«¯ ä»æœåŠ¡ç«¯æŠŠè¯ä¹¦æ‹·è´åˆ°æ¡Œé¢ä¸Šï¼Œå¹¶å°†è¯ä¹¦test1.ovpnç›´æ¥å¯¼å…¥åˆ°å®¢æˆ·ç«¯å†…ã€‚ç„¶åè¾“å…¥å®¹å™¨å†…éƒ¨IPå°±å¯ä»¥ç›´æ¥è®¿é—®dockerå†…éƒ¨å®¹å™¨äº†ã€‚ ","date":"2022-04-17","objectID":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/:4:0","tags":["openvpn"],"title":"ä½¿ç”¨dockeræ­å»ºopenvpn","uri":"/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/"},{"categories":["å·¥å…·"],"content":"ansibleæ¨¡å—å®˜æ–¹æ‰‹å†Œ æ¨¡å— ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:1:0","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"æ¨¡å—ç­›é€‰ $ ansible-doc -l | grep 'copy' vsphere_copy Copy a file to a VMware datastore win_copy Copies files to remote locations on windows hosts bigip_file_copy Manage files in datastores on a BIG-IP ec2_ami_copy copies AMI between AWS regions, return new image id win_robocopy Synchronizes the contents of two directories using Robocopy copy Copy files to remote locations na_ontap_lun_copy NetApp ONTAP copy LUNs icx_copy Transfer files from or to remote Ruckus ICX 7000 series switches unarchive Unpacks an archive after (optionally) copying it from the local machine postgresql_copy Copy data between a file/program and a PostgreSQL table ec2_snapshot_copy copies an EC2 snapshot and returns the new Snapshot ID nxos_file_copy Copy a file to a remote NXOS device netapp_e_volume_copy NetApp E-Series create volume copy pairs è¯¦ç»†çš„æ¨¡å—æè¿°æ‰‹å†Œ ansible-doc copy åªåŒ…å«æ¨¡å—å‚æ•°ç”¨æ³•çš„æ¨¡å—æè¿°æ‰‹å†Œ ansible-doc -s copy ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:1:1","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"è¿æ¥è¡Œä¸ºå˜é‡ å®˜ç½‘é“¾æ¥ å¸¸è§çš„è§£é‡Š Inventoryå˜é‡å å«ä¹‰ ansible_host ansibleè¿æ¥èŠ‚ç‚¹æ—¶çš„IPåœ°å€ ansible_port è¿æ¥å¯¹æ–¹çš„ç«¯å£å·ï¼Œsshè¿æ¥æ—¶é»˜è®¤ä¸º22 ansible_user è¿æ¥å¯¹æ–¹ä¸»æœºæ—¶ä½¿ç”¨çš„ä¸»æœºåã€‚ä¸æŒ‡å®šæ—¶ï¼Œå°†ä½¿ç”¨æ‰§è¡Œansibleæˆ–ansible-playbookå‘½ä»¤çš„ç”¨æˆ· ansible_password è¿æ¥æ—¶çš„ç”¨æˆ·å¯†ç  ansible_connection è¿æ¥ç±»å‹ï¼Œæœ‰æ•ˆå€¼åŒ…æ‹¬smartã€sshã€paramikoã€localã€dockerã€winrmï¼Œé»˜è®¤ä¸ºsmartã€‚smartè¡¨ç¤ºæ™ºèƒ½é€‰æ‹©sshå’Œparamikoï¼Œå½“SSHæ”¯æŒControlPersist(å³æŒä¹…è¿æ¥)æ—¶ä½¿ç”¨sshï¼Œå¦åˆ™ä½¿ç”¨paramikoã€‚localå’Œdockeræ˜¯éåŸºäºsshè¿æ¥çš„æ–¹å¼ï¼Œwinrmæ˜¯è¿æ¥windowsçš„æ’ä»¶ ansible_ssh_private_key_file æŒ‡å®šå¯†é’¥è®¤è¯sshè¿æ¥æ—¶çš„ç§é’¥æ–‡ä»¶ ansible_ssh_common_args æä¾›ç»™sshã€sftpã€scpå‘½ä»¤çš„é¢å¤–å‚æ•° ansible_become å…è®¸è¿›è¡Œæƒé™æå‡ ansible_become_method æŒ‡å®šæå‡æƒé™çš„æ–¹å¼ï¼Œä¾‹å¦‚å¯ä½¿ç”¨sudo/su/runasç­‰æ–¹å¼ ansible_become_user æå‡ä¸ºå“ªä¸ªç”¨æˆ·çš„æƒé™ï¼Œé»˜è®¤æå‡ä¸ºroot ansible_become_password æå‡ä¸ºæŒ‡å®šç”¨æˆ·æƒé™æ—¶çš„å¯†ç  ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:1:2","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"yamlä¸jsonæ ¼å¼è½¬æ¢ é“¾æ¥ ä¹Ÿå¯ä»¥ç”¨yqå°†yamlè½¬æ¢æˆjson æ ¼å¼ã€‚ ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:1:3","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"ansibleå…³äºlookupçš„æ’ä»¶ å‚è€ƒ ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:1:4","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"ansibleæ”¯æŒçš„magic variables å®˜ç½‘ ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:1:5","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"shæ¨¡å¼ä¸‹æ²¡æœ‰ip ifconfig å‘½ä»¤å¦‚ä½•çœ‹IPï¼Ÿ hostname -I | awk â€˜{print $1}â€™ ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:1:6","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"æ²¡æœ‰telnet å·¥å…·å¦‚ä½•æµ‹è¯•ç«¯å£ï¼Ÿ (echo \u003e/dev/tcp/172.18.0.1/6666) \u0026\u003e/dev/null \u0026\u0026 echo \"open\" || echo \"closed\" å¼€æ”¾ open æœªå¼€æ”¾ closed ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:1:7","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"ansibleå‘Šè­¦ [WARNING]: Platform linux on host node3 is using the discovered Python interpreter at /usr/bin/python3.7, but future installation of another Python interpreter could change this. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:2:0","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"å¤„ç†æ–¹å¼ å…³é—­å‘Šè­¦ vim /etc/ansible/ansible.cfg [defaults] interpreter_python=auto_silent ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:2:1","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"debain ansibleæ‰€æœ‰ç‰ˆæœ¬ https://packages.debian.org/buster-backports/all/ansible/download ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:3:0","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"ansible rpmåŒ…æ‰€æœ‰ç‰ˆæœ¬ https://releases.ansible.com/ansible/rpm/release/epel-7-x86_64/ ","date":"2022-04-15","objectID":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/:4:0","tags":["ansible"],"title":"ansibleç›¸å…³å‚è€ƒèµ„æ–™","uri":"/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"},{"categories":["å·¥å…·"],"content":"æŸ¥çœ‹dockeré•œåƒçš„dockerfile å°†\u003cIMAGE ID\u003eæ›¿æ¢ä¸ºå¾…æŸ¥çœ‹Dockerfileçš„é•œåƒIDã€‚ docker history \u003cIMAGE ID\u003e --format \"{{.CreatedBy}}\" --no-trunc |tac | awk '{if($3~/nop/){for(i=1;i\u003c=3;i++){$i=\"\"};print substr($0,4)}else{print \"RUN\",$0}}' å¯¹æ¯” [root@localhost ~]# docker history f1396d3fa7b5 --format \"{{.CreatedBy}}\" --no-trunc |tac | awk '{if($3~/nop/){for(i=1;i\u003c=3;i++){$i=\"\"};print substr($0,4)}else{print \"RUN\",$0}}' ADD file:be998d04a8927e9c4b105995e3b9d6800ea798807389f7c5921c0f4774328e21 in / CMD [\"bash\"] COPY file:d3994e70cf156a17b1ad3dae5c75ed40c6d5c73a0d1b4c6b94620f1cd76b0943 in /etc/apt/sources.list RUN /bin/sh -c apt update;apt install -y vim net-tools procps openssh-server python3.7 RUN /bin/sh -c sed -i 's/^#PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config;cp /usr/bin/python3.7 /usr/bin/python CMD [\"/bin/bash\"] åŸDockerfile FROM debian:10 COPY sources.list /etc/apt/sources.list RUN apt update;apt install -y vim net-tools procps openssh-server python3.7 RUN sed -i 's/^#PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config;cp /usr/bin/python3.7 /usr/bin/python CMD [\"/bin/bash\"] ","date":"2022-04-15","objectID":"/docker%E5%86%B7%E9%97%A8%E6%8A%80%E5%B7%A7/:1:0","tags":["dockeræŠ€å·§"],"title":"dockerå†·é—¨æŠ€å·§","uri":"/docker%E5%86%B7%E9%97%A8%E6%8A%80%E5%B7%A7/"},{"categories":["å·¥å…·"],"content":"åˆ›å»ºå®¹å™¨æ—¶æŒ‡å®šä¸»æœºå åŠ --hostnameå‚æ•°ï¼Œ--networkæŒ‡å®šç½‘ç»œã€‚ docker run --name aa --hostname kafka_node -p 2181:2181 -v /home/htht/kafka/logs:/home/kafka/logs -v /home/htht/kafka/k-datas:/home/kafka/k-datas --network=my_net1 --ip 172.18.0.3 kafka:0.1 ","date":"2022-04-15","objectID":"/docker%E5%86%B7%E9%97%A8%E6%8A%80%E5%B7%A7/:2:0","tags":["dockeræŠ€å·§"],"title":"dockerå†·é—¨æŠ€å·§","uri":"/docker%E5%86%B7%E9%97%A8%E6%8A%80%E5%B7%A7/"},{"categories":["å·¥å…·"],"content":"å…¨æ–‡ä»¶å‹ç¼©ä¸è§£å‹ ","date":"2022-04-14","objectID":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/:1:0","tags":["tar"],"title":"å‹ç¼©ä¸è§£å‹ç¼©","uri":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"},{"categories":["å·¥å…·"],"content":"å‹ç¼© tar -zcvf æ–‡ä»¶å.tgz æºæ–‡ä»¶ ","date":"2022-04-14","objectID":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/:1:1","tags":["tar"],"title":"å‹ç¼©ä¸è§£å‹ç¼©","uri":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"},{"categories":["å·¥å…·"],"content":"è§£å‹ å…ˆåˆ›å»ºè§£å‹ç›®å½• mkdir -p /root/a å†å°†æ–‡ä»¶æŒ‡å®šå‹ç¼©åˆ°è¯¥ç›®å½•å†… tar -zxvf æ–‡ä»¶å.tgz -C /root/a ","date":"2022-04-14","objectID":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/:1:2","tags":["tar"],"title":"å‹ç¼©ä¸è§£å‹ç¼©","uri":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"},{"categories":["å·¥å…·"],"content":"æ’é™¤æ—¥å¿—æ–‡ä»¶çš„å‹ç¼©ä¸è§£å‹ ","date":"2022-04-14","objectID":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/:2:0","tags":["tar"],"title":"å‹ç¼©ä¸è§£å‹ç¼©","uri":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"},{"categories":["å·¥å…·"],"content":"å‹ç¼© æ³¨æ„--exclude=å‚æ•°è¦æ”¾åˆ°æ‰“åŒ…ç›®å½•ä¹‹å‰ã€‚ æ’é™¤xxx/logsæ–‡ä»¶ï¼Œå…¶ä½™éƒ½å‹ç¼©ã€‚ tar -zcvf xxx.tgz --exclude=xxx/logs xxx ä¾‹å¦‚ï¼šæ‰“åŒ…/var/log/*ä¸‹æ‰€æœ‰æ–‡ä»¶é™¤äº†/var/log/landscapeæ–‡ä»¶å¤¹ä¹‹å¤–ã€‚ tar -zcvf exclude-log.tgz --exclude=/var/log/landscape /var/log/* ","date":"2022-04-14","objectID":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/:2:1","tags":["tar"],"title":"å‹ç¼©ä¸è§£å‹ç¼©","uri":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"},{"categories":["å·¥å…·"],"content":"è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ tar -zxvf æ–‡ä»¶å.tgz -C /root/a ","date":"2022-04-14","objectID":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/:2:2","tags":["tar"],"title":"å‹ç¼©ä¸è§£å‹ç¼©","uri":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"},{"categories":["å·¥å…·"],"content":"åŒæ—¶å‹ç¼©å¤šä¸ªæ–‡ä»¶å¤¹ å¤šä¸ªè·¯å¾„ç”¨ç©ºæ ¼éš”å¼€ tar -zcvf myfile.tgz /etc/adduser.conf /var/log/docker.log è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹å†…ï¼ˆè¯¥æ–‡ä»¶å¤¹å¿…é¡»å­˜åœ¨ï¼ï¼‰ tar -zxvf myfile.tgz -C /root/a ","date":"2022-04-14","objectID":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/:3:0","tags":["tar"],"title":"å‹ç¼©ä¸è§£å‹ç¼©","uri":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"},{"categories":["å·¥å…·"],"content":"åªæ˜¾ç¤ºå‹ç¼©å†…å®¹ä¸è§£å‹ tar -tvf myfile.tgz æˆ–è€… vim myfile.tgz ","date":"2022-04-14","objectID":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/:4:0","tags":["tar"],"title":"å‹ç¼©ä¸è§£å‹ç¼©","uri":"/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/"},{"categories":["ç¼–ç¨‹"],"content":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤ ","date":"2022-04-12","objectID":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/:1:0","tags":["python"],"title":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤","uri":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"},{"categories":["ç¼–ç¨‹"],"content":"æœåŠ¡ç«¯ from socket import * import subprocess server = socket(AF_INET, SOCK_STREAM) server.bind(('127.0.0.1', 8090)) server.listen(5) while True: conn, client_addr = server.accept() print(client_addr) while True: try: cmd = conn.recv(1024) if not cmd:break obj = subprocess.Popen(cmd.decode('utf-8'), shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE ) stdout = obj.stdout.read() stderr = obj.stderr.read() cmd_res = stdout+stderr print(len(cmd_res)) conn.send(cmd_res) except ConnectionResetError: break conn.close() server.close() ","date":"2022-04-12","objectID":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/:1:1","tags":["python"],"title":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤","uri":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"},{"categories":["ç¼–ç¨‹"],"content":"å®¢æˆ·ç«¯ from socket import * client = socket(AF_INET, SOCK_STREAM) client.connect(('127.0.0.1', 8090)) while True: cmd = input('\u003e\u003e: ').strip() if not cmd:continue client.send(cmd.encode('utf-8')) data = client.recv(1024) print(data.decode('gbk')) #ç¯å¢ƒæ—¶windowsæ”¶åŒ…åè¦è½¬æˆgbkæ ¼å¼ã€‚ client.close() ","date":"2022-04-12","objectID":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/:1:2","tags":["python"],"title":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤","uri":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"},{"categories":["ç¼–ç¨‹"],"content":"ç²˜åŒ…ç°è±¡ ","date":"2022-04-12","objectID":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/:2:0","tags":["python"],"title":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤","uri":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯ç²˜åŒ…ï¼Ÿ é¡»çŸ¥ï¼šåªæœ‰TCPæœ‰ç²˜åŒ…ç°è±¡ï¼ŒUDPæ°¸è¿œä¸ä¼šç²˜åŒ…ã€‚ é¦–å…ˆéœ€è¦æŒæ¡ä¸€ä¸ªsocketæ”¶å‘æ¶ˆæ¯çš„åŸç† å‘é€ç«¯å¯ä»¥æ˜¯ä¸€Kä¸€Kåœ°å‘é€æ•°æ®ï¼Œè€Œæ¥æ”¶ç«¯çš„åº”ç”¨ç¨‹åºå¯ä»¥ä¸¤Kä¸¤Kåœ°æèµ°æ•°æ®ï¼Œå½“ç„¶ä¹Ÿæœ‰å¯èƒ½ä¸€æ¬¡æèµ°3Kæˆ–6Kæ•°æ®ï¼Œæˆ–è€…ä¸€æ¬¡åªæèµ°å‡ ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨ç¨‹åºæ‰€çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæˆ–è¯´æ˜¯ä¸€ä¸ªæµï¼ˆstreamï¼‰ï¼Œä¸€æ¡æ¶ˆæ¯æœ‰å¤šå°‘å­—èŠ‚å¯¹åº”ç”¨ç¨‹åºæ˜¯ä¸å¯è§çš„ï¼Œå› æ­¤TCPåè®®æ˜¯é¢å‘æµçš„åè®®ï¼Œè¿™ä¹Ÿæ˜¯å®¹æ˜“å‡ºç°ç²˜åŒ…é—®é¢˜çš„åŸå› ã€‚è€ŒUDPæ˜¯é¢å‘æ¶ˆæ¯çš„åè®®ï¼Œæ¯ä¸ªUDPæ®µéƒ½æ˜¯ä¸€æ¡æ¶ˆæ¯ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»ä»¥æ¶ˆæ¯ä¸ºå•ä½æå–æ•°æ®ï¼Œä¸èƒ½ä¸€æ¬¡æå–ä»»æ„å­—èŠ‚çš„æ•°æ®ï¼Œè¿™ä¸€ç‚¹å’ŒTCPæ˜¯å¾ˆä¸åŒçš„ã€‚ æ€æ ·å®šä¹‰æ¶ˆæ¯å‘¢ï¼Ÿå¯ä»¥è®¤ä¸ºå¯¹æ–¹ä¸€æ¬¡æ€§write/sendçš„æ•°æ®ä¸ºä¸€ä¸ªæ¶ˆæ¯ï¼Œéœ€è¦æ˜ç™½çš„æ˜¯å½“å¯¹æ–¹sendä¸€æ¡ä¿¡æ¯çš„æ—¶å€™ï¼Œæ— è®ºåº•å±‚æ€æ ·åˆ†æ®µåˆ†ç‰‡ï¼ŒTCPåè®®å±‚ä¼šæŠŠæ„æˆæ•´æ¡æ¶ˆæ¯çš„æ•°æ®æ®µæ’åºå®Œæˆåæ‰å‘ˆç°åœ¨å†…æ ¸ç¼“å†²åŒºã€‚ ä¾‹å¦‚åŸºäºTCPçš„å¥—æ¥å­—å®¢æˆ·ç«¯å¾€æœåŠ¡ç«¯ä¸Šä¼ æ–‡ä»¶ï¼Œå‘é€æ—¶æ–‡ä»¶å†…å®¹æ˜¯æŒ‰ç…§ä¸€æ®µä¸€æ®µçš„å­—èŠ‚æµå‘é€çš„ï¼Œåœ¨æ¥æ”¶æ–¹çœ‹äº†ï¼Œæ ¹æœ¬ä¸çŸ¥é“è¯¥æ–‡ä»¶çš„å­—èŠ‚æµä»ä½•å¤„å¼€å§‹ï¼Œåœ¨ä½•å¤„ç»“æŸã€‚ æ‰€è°“ç²˜åŒ…é—®é¢˜ä¸»è¦è¿˜æ˜¯å› ä¸ºæ¥æ”¶æ–¹ä¸çŸ¥é“æ¶ˆæ¯ä¹‹é—´çš„ç•Œé™ï¼Œä¸çŸ¥é“ä¸€æ¬¡æ€§æå–å¤šå°‘å­—èŠ‚çš„æ•°æ®æ‰€é€ æˆçš„ã€‚ æ­¤å¤–ï¼Œå‘é€æ–¹å¼•èµ·çš„ç²˜åŒ…æ˜¯ç”±TCPåè®®æœ¬èº«é€ æˆçš„ï¼ŒTCPä¸ºæé«˜ä¼ è¾“æ•ˆç‡ï¼Œå‘é€æ–¹å¾€å¾€è¦æ”¶é›†åˆ°è¶³å¤Ÿå¤šçš„æ•°æ®åæ‰å‘é€ä¸€ä¸ªTCPæ®µã€‚è‹¥è¿ç»­å‡ æ¬¡éœ€è¦sendçš„æ•°æ®éƒ½å¾ˆå°‘ï¼Œé€šå¸¸TCPä¼šæ ¹æ®ä¼˜åŒ–ç®—æ³•æŠŠè¿™äº›æ•°æ®åˆæˆä¸€ä¸ªTCPæ®µåä¸€æ¬¡å‘é€å‡ºå»ï¼Œè¿™æ ·æ¥æ”¶æ–¹å°±æ”¶åˆ°äº†ç²˜åŒ…æ•°æ®ã€‚ ","date":"2022-04-12","objectID":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/:2:1","tags":["python"],"title":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤","uri":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"},{"categories":["ç¼–ç¨‹"],"content":"TCPä¸UDP TCPï¼ˆtransport control protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯é¢å‘è¿æ¥çš„ï¼Œé¢å‘æµçš„ï¼Œæä¾›é«˜å¯é æ€§æœåŠ¡ã€‚æ”¶å‘ä¸¤ç«¯ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ï¼‰éƒ½è¦æœ‰ä¸€ä¸€æˆå¯¹çš„socketï¼Œå› æ­¤ï¼Œå‘é€ç«¯ä¸ºäº†å°†å¤šä¸ªå‘å¾€æ¥æ”¶ç«¯çš„åŒ…ï¼Œæ›´æœ‰æ•ˆçš„å‘åˆ°å¯¹æ–¹ï¼Œä½¿ç”¨äº†ä¼˜åŒ–æ–¹æ³•ï¼ˆNagleç®—æ³•ï¼‰ï¼Œå°†å¤šæ¬¡é—´éš”è¾ƒå°ä¸”æ•°æ®é‡å°çš„æ•°æ®ï¼Œåˆå¹¶æˆä¸€ä¸ªå¤§çš„æ•°æ®å—ï¼Œç„¶åè¿›è¡Œå°åŒ…ã€‚è¿™æ ·ï¼Œæ¥æ”¶ç«¯ï¼Œå°±éš¾äºåˆ†è¾¨å‡ºæ¥äº†ï¼Œå¿…é¡»æä¾›ç§‘å­¦çš„æ‹†åŒ…æœºåˆ¶ã€‚ å³é¢å‘æµçš„é€šä¿¡æ˜¯æ— æ¶ˆæ¯ä¿æŠ¤è¾¹ç•Œçš„ã€‚ UDPï¼ˆuser datagram protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æ˜¯æ— è¿æ¥çš„ï¼Œé¢å‘æ¶ˆæ¯çš„ï¼Œæä¾›é«˜æ•ˆç‡æœåŠ¡ã€‚ä¸ä¼šä½¿ç”¨å—çš„åˆå¹¶ä¼˜åŒ–ç®—æ³•ï¼Œ, ç”±äºUDPæ”¯æŒçš„æ˜¯ä¸€å¯¹å¤šçš„æ¨¡å¼ï¼Œæ‰€ä»¥æ¥æ”¶ç«¯çš„skbuff(å¥—æ¥å­—ç¼“å†²åŒºï¼‰é‡‡ç”¨äº†é“¾å¼ç»“æ„æ¥è®°å½•æ¯ä¸€ä¸ªåˆ°è¾¾çš„UDPåŒ…ï¼Œåœ¨æ¯ä¸ªUDPåŒ…ä¸­å°±æœ‰äº†æ¶ˆæ¯å¤´ï¼ˆæ¶ˆæ¯æ¥æºåœ°å€ï¼Œç«¯å£ç­‰ä¿¡æ¯ï¼‰ï¼Œè¿™æ ·ï¼Œå¯¹äºæ¥æ”¶ç«¯æ¥è¯´ï¼Œå°±å®¹æ˜“è¿›è¡ŒåŒºåˆ†å¤„ç†äº†ã€‚ å³é¢å‘æ¶ˆæ¯çš„é€šä¿¡æ˜¯æœ‰æ¶ˆæ¯ä¿æŠ¤è¾¹ç•Œçš„ã€‚ tcpæ˜¯åŸºäºæ•°æ®æµçš„ï¼Œäºæ˜¯æ”¶å‘çš„æ¶ˆæ¯ä¸èƒ½ä¸ºç©ºï¼Œè¿™å°±éœ€è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ·»åŠ ç©ºæ¶ˆæ¯çš„å¤„ç†æœºåˆ¶ï¼Œé˜²æ­¢ç¨‹åºå¡ä½ï¼Œè€Œudpæ˜¯åŸºäºæ•°æ®æŠ¥çš„ï¼Œå³ä¾¿æ˜¯ä½ è¾“å…¥çš„æ˜¯ç©ºå†…å®¹ï¼ˆç›´æ¥å›è½¦ï¼‰ï¼Œé‚£ä¹Ÿä¸æ˜¯ç©ºæ¶ˆæ¯ï¼Œudpåè®®ä¼šå¸®ä½ å°è£…ä¸Šæ¶ˆæ¯å¤´ã€‚ udpçš„recvfromæ˜¯é˜»å¡çš„ï¼Œä¸€ä¸ªrecvfrom(x)å¿…é¡»å¯¹å”¯ä¸€ä¸€ä¸ªsendinto(y),æ”¶å®Œäº†xä¸ªå­—èŠ‚çš„æ•°æ®å°±ç®—å®Œæˆ,è‹¥æ˜¯y\u003exæ•°æ®å°±ä¸¢å¤±ï¼Œè¿™æ„å‘³ç€udpæ ¹æœ¬ä¸ä¼šç²˜åŒ…ï¼Œä½†æ˜¯ä¼šä¸¢æ•°æ®ï¼Œä¸å¯é ã€‚ TCPçš„åè®®æ•°æ®ä¸ä¼šä¸¢ï¼Œæ²¡æœ‰æ”¶å®ŒåŒ…ï¼Œä¸‹æ¬¡æ¥æ”¶ï¼Œä¼šç»§ç»­ä¸Šæ¬¡ç»§ç»­æ¥æ”¶ï¼Œå·±ç«¯æ€»æ˜¯åœ¨æ”¶åˆ°ackæ—¶æ‰ä¼šæ¸…é™¤ç¼“å†²åŒºå†…å®¹ã€‚æ•°æ®æ˜¯å¯é çš„ï¼Œä½†æ˜¯ä¼šç²˜åŒ…ã€‚ ","date":"2022-04-12","objectID":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/:2:2","tags":["python"],"title":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤","uri":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸¤ç§æƒ…å†µä¸‹ä¼šå‘ç”Ÿç²˜åŒ… å‘é€ç«¯éœ€è¦ç­‰ç¼“å†²åŒºæ»¡æ‰å‘é€å‡ºå»ï¼Œé€ æˆç²˜åŒ…ï¼ˆå‘é€æ•°æ®æ—¶é—´é—´éš”å¾ˆçŸ­ï¼Œæ•°æ®äº†å¾ˆå°ï¼Œä¼šåˆåˆ°ä¸€èµ·ï¼Œäº§ç”Ÿç²˜åŒ…ï¼‰ è¿è¡Œä¸Šé¢çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä»£ç çœ‹TCPç²˜åŒ…ç°è±¡ã€‚ ç»“æœï¼š #æœåŠ¡ç«¯ ('127.0.0.1', 3221) 21944 #ä¸€å…±21944ä¸ªå­—èŠ‚æ•°æ®ï¼Œåªæ”¶äº†1024ä¸ªå­—èŠ‚æ•°æ®ã€‚å‰©ä¸‹çš„å°±ä¼šç²˜åŒ…ã€‚ 393 393 #å®¢æˆ·ç«¯ æ‰§è¡Œtasklist ç›¸å½“äºæ‰“å°windowsçš„ä»»åŠ¡ç®¡ç†å™¨,ç„¶åå†æ‰§è¡ŒdiræŸ¥çœ‹æœ‰å“ªäº›æ–‡ä»¶ã€‚ \u003e\u003e: tasklist æ˜ åƒåç§° PID ä¼šè¯å ä¼šè¯# å†…å­˜ä½¿ç”¨ ========================= ======== ================ =========== ============ System Idle Process 0 Services 0 8 K System 4 Services 0 144 K Secure System 88 Services 0 73,304 K Registry 156 Services 0 93,616 K smss.exe 528 Services 0 1,256 K csrss.exe 880 Services 0 5,200 K wininit.exe 980 Services 0 6,700 K csrss.exe 988 Console 1 7,392 K services.exe 784 Services 0 12,104 K LsaIso.exe 816 Services 0 3,352 K lsass.exe 808 Services 0 24,360 K winlogon \u003e\u003e: dir .exe 1064 Console 1 13,052 K svchost.exe 1192 Services 0 35,916 K fontdrvhost.exe 1228 Console 1 14,864 K fontdrvhost.exe 1236 Services 0 4,444 K WUDFHost.exe 1244 Services 0 18,332 K svchost.exe 1360 Services 0 18,016 K svchost.exe 1408 Services 0 9,484 K dwm.exe 1512 Console 1 154,792 K svchost.exe 1644 Services 0 9,572 K svchost.exe 1656 Services 0 13,208 K svchost.exe 1664 Services 0 14,728 K svchost.exe 1680 Services 0 11,348 K svchost.exe 1708 Services 0 5,540 K svchost.exe å‘ç°diræ˜¾ç¤ºçš„ä¸æ˜¯å½“å‰ç›®å½•ä¸‹çš„å†…å®¹ï¼Œä»¿ä½›æ˜¯ä¸Šä¸€æ¬¡æ‰§è¡Œtaskliståå†…å®¹æ²¡æ˜¾ç¤ºå…¨ã€‚ æ¥æ”¶æ–¹ä¸åŠæ—¶æ¥æ”¶ç¼“å†²åŒºçš„åŒ…ï¼Œé€ æˆå¤šä¸ªåŒ…æ¥æ”¶ï¼ˆå®¢æˆ·ç«¯å‘é€äº†ä¸€æ®µæ•°æ®ï¼ŒæœåŠ¡ç«¯åªæ”¶äº†ä¸€å°éƒ¨åˆ†ï¼ŒæœåŠ¡ç«¯ä¸‹æ¬¡å†æ”¶çš„æ—¶å€™è¿˜æ˜¯ä»ç¼“å†²åŒºæ‹¿ä¸Šæ¬¡é—ç•™çš„æ•°æ®ï¼Œäº§ç”Ÿç²˜åŒ…ï¼‰ ã€‚ ","date":"2022-04-12","objectID":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/:2:3","tags":["python"],"title":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤","uri":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"},{"categories":["ç¼–ç¨‹"],"content":"æ‹†åŒ…çš„å‘ç”Ÿæƒ…å†µ å½“å‘é€ç«¯ç¼“å†²åŒºçš„é•¿åº¦å¤§äºç½‘å¡çš„MTUæ—¶ï¼ŒTCPä¼šå°†è¿™æ¬¡å‘é€çš„æ•°æ®æ‹†æˆå‡ ä¸ªæ•°æ®åŒ…å‘é€å‡ºå»ã€‚ è¡¥å……é—®é¢˜ä¸€ï¼šä¸ºä½•TCPæ˜¯å¯é ä¼ è¾“ï¼ŒUDPæ˜¯ä¸å¯é ä¼ è¾“ TCPåœ¨æ•°æ®ä¼ è¾“æ—¶ï¼Œå‘é€ç«¯å…ˆæŠŠæ•°æ®å‘é€åˆ°è‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œç„¶ååè®®æ§åˆ¶å°†ç¼“å­˜ä¸­çš„æ•°æ®å‘å¾€å¯¹ç«¯ï¼Œå¯¹ç«¯è¿”å›ä¸€ä¸ªack=1ï¼Œå‘é€ç«¯åˆ™æ¸…ç†ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå¯¹ç«¯è¿”å›ack=0ï¼Œåˆ™é‡æ–°å‘é€æ•°æ®ï¼Œæ‰€ä»¥TCPæ˜¯å¯é çš„ã€‚ è€Œudpå‘é€æ•°æ®ï¼Œå¯¹ç«¯æ˜¯ä¸ä¼šè¿”å›ç¡®è®¤ä¿¡æ¯çš„ï¼Œå› æ­¤ä¸å¯é ã€‚ è¡¥å……é—®é¢˜äºŒï¼šsend(å­—èŠ‚æµ)å’Œrecv(1024)åŠsendall recvé‡ŒæŒ‡å®šçš„1024æ„æ€æ˜¯ä»ç¼“å­˜é‡Œä¸€æ¬¡æ‹¿å‡º1024ä¸ªå­—èŠ‚çš„æ•°æ® sendçš„å­—èŠ‚æµæ˜¯å…ˆæ”¾å…¥å·±ç«¯ç¼“å­˜ï¼Œç„¶åç”±åè®®æ§åˆ¶å°†ç¼“å­˜å†…å®¹å‘å¾€å¯¹ç«¯ï¼Œå¦‚æœå¾…å‘é€çš„å­—èŠ‚æµå¤§å°å¤§äºç¼“å­˜å‰©ä½™ç©ºé—´ï¼Œé‚£ä¹ˆæ•°æ®ä¸¢å¤±ï¼Œç”¨sendallå°±ä¼šå¾ªç¯è°ƒç”¨sendï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚ ","date":"2022-04-12","objectID":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/:2:4","tags":["python"],"title":"æ¨¡æ‹Ÿsshæ‰§è¡Œè¿œç¨‹å‘½ä»¤","uri":"/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"},{"categories":["å·¥å…·"],"content":"åº”ç”¨åœºæ™¯ Ansibleæ˜¯ä¸€ä¸ªåŸºäºPythonå¼€å‘çš„é…ç½®ç®¡ç†å’Œåº”ç”¨éƒ¨ç½²å·¥å…·ï¼Œç°åœ¨ä¹Ÿåœ¨è‡ªåŠ¨åŒ–ç®¡ç†é¢†åŸŸå¤§æ”¾å¼‚å½©ã€‚å®ƒèåˆäº†ä¼—å¤šè€ç‰Œè¿ç»´å·¥å…·çš„ä¼˜ç‚¹ï¼ŒPubbetå’ŒSaltstackèƒ½å®ç°çš„åŠŸèƒ½ï¼ŒAnsibleåŸºæœ¬ä¸Šéƒ½å¯ä»¥å®ç°ã€‚ Ansibleèƒ½æ‰¹é‡é…ç½®ã€éƒ¨ç½²ã€ç®¡ç†ä¸€å¤§å †çš„ä¸»æœºã€‚æ¯”å¦‚ä»¥å‰éœ€è¦åˆ‡æ¢åˆ°æ¯ä¸ªä¸»æœºä¸Šæ‰§è¡Œçš„ä¸€æˆ–å¤šä¸ªæ“ä½œï¼Œä½¿ç”¨Ansibleåªéœ€åœ¨å›ºå®šçš„ä¸€å°Ansibleæ§åˆ¶èŠ‚ç‚¹ä¸Šå»å®Œæˆæ‰€æœ‰ä¸»æœºçš„æ“ä½œã€‚ ","date":"2022-04-12","objectID":"/ansible/:1:0","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"ansibleä¸»æ§ç«¯æ­å»º ","date":"2022-04-12","objectID":"/ansible/:2:0","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"åŸºäºdockeræ„å»ºä¸€ä¸ªansibleé•œåƒ ç¼–å†™Dockerfile FROM debian:10 COPY sources.list /etc/apt/sources.list RUN apt update;apt install -y ansible sshpass vim net-tools procps RUN sed -i 's/^#host_key_checking.*/host_key_checking = False/g' /etc/ansible/ansible.cfg CMD [\"/bin/bash\"] è¯´æ˜ï¼šåŸºäºdebain10æ­å»ºçš„åŸºç¡€ansibleé•œåƒåŒ…ã€‚ åˆ›å»ºsources.listæ–‡ä»¶ cat \u003c\u003cEOF \u003e sources.list deb http://mirrors.ustc.edu.cn/debian/ buster main deb-src http://mirrors.ustc.edu.cn/debian/ buster main deb http://mirrors.ustc.edu.cn/debian-security buster/updates main deb-src http://mirrors.ustc.edu.cn/debian-security buster/updates main # buster-updates, previously known as 'volatile' deb http://mirrors.ustc.edu.cn/debian/ buster-updates main deb-src http://mirrors.ustc.edu.cn/debian/ buster-updates main deb http://mirrors.ustc.edu.cn/debian/ buster-backports main non-free contrib deb-src http://mirrors.ustc.edu.cn/debian/ buster-backports main non-free contrib EOF æ³¨æ„ï¼šsources.listæ˜¯ä¸€ä¸ªæºé…ç½®æ–‡ä»¶ï¼Œå’ŒDockerfileæ–‡ä»¶åœ¨åŒä¸€çº§ã€‚ FROM æ„æ€å°±æ˜¯ä½¿ç”¨å“ªä¸ªåŸºç¡€é•œåƒ COPY å°±æ˜¯å¤åˆ¶æœ¬åœ°çš„å“ªä¸ªæ–‡ä»¶åˆ°å®¹å™¨é•œåƒ RUN å°±æ˜¯æ‰§è¡Œä¸€ä¸ªLinuxå‘½ä»¤ CMD å°±æ˜¯è®¾ç½®å®¹å™¨å¯åŠ¨çš„æ—¶å€™éœ€è¦è¿è¡Œä»€ä¹ˆç¨‹åº å¼€å§‹æ„å»º è¯­æ³• docker build -t ${é•œåƒåç§°:ç‰ˆæœ¬} . ä¾‹å¦‚ docker build -t debian10/ansible . å½“ä¸è®¾ç½®ç‰ˆæœ¬çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šç»™äºˆlatestçš„ä¸€ä¸ªç‰ˆæœ¬æ ‡ç­¾ã€‚ æ³¨æ„æ„å»ºè¿‡ç¨‹ä¸­æŠ¥é”™ä¿¡æ¯ï¼Œæ ¹æ®æŠ¥é”™ä¿¡æ¯æ›´æ”¹Dockerfileæ–‡ä»¶å†…å®¹ã€‚ éªŒè¯é•œåƒ [root@localhost ~]# docker images | grep ansible debain10/ansible latest 03216dab3d76 23 minutes ago 349MB ","date":"2022-04-12","objectID":"/ansible/:2:1","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"ä¸»æ§ç«¯å®¹å™¨åˆ›å»º docker run -it --name ansible-control --privilaged=true -d debain10/ansible sh æŸ¥çœ‹å®¹å™¨æ˜¯å¦æ­£å¸¸å¯åŠ¨ docker ps ccb07fbb3515 debain10/ansible \"sh\" 25 minutes ago Up 25 minutes ansible-control è¿›å…¥å®¹å™¨ docker exec -it ansible-control bash æŸ¥çœ‹ansibleç‰ˆæœ¬ root@ccb07fbb3515:/etc/ansible# ansible --version ansible 2.7.7 config file = /etc/ansible/ansible.cfg configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules'] ansible python module location = /usr/lib/python3/dist-packages/ansible executable location = /usr/bin/ansible python version = 3.7.3 (default, Jan 22 2021, 20:04:44) [GCC 8.3.0] ","date":"2022-04-12","objectID":"/ansible/:2:2","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"ansibleè¢«æ§èŠ‚ç‚¹æ­å»º ","date":"2022-04-12","objectID":"/ansible/:3:0","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨Dockerfileåˆ›å»ºè¢«æ§èŠ‚ç‚¹é•œåƒ Dockerfileæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š FROM debian:10 COPY sources.list /etc/apt/sources.list RUN apt update;apt install -y vim net-tools procps openssh-server python3.7 RUN sed -i 's/^#PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config;cp /usr/bin/python3.7 /usr/bin/python CMD [\"/bin/bash\"] è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼Œè¢«æ§èŠ‚ç‚¹ä¸­å¿…é¡»å®‰è£…pythonï¼Œansibleé»˜è®¤ä¼šå»/usr/binå†…æ‰¾pythonæ‰§è¡Œæ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰å°±ä¼šæŠ¥é”™ã€‚è¿™é‡Œå®‰è£…é•œåƒæ—¶å°±é»˜è®¤å®‰è£…äº†python3.7ã€‚å¹¶å°†æ‰§è¡Œæ–‡ä»¶å¤åˆ¶ä¸º/usr/bin/pythonã€‚ å½“ç„¶openssh-serveræ˜¯å¿…å¤‡çš„ï¼Œansibleå°±æ˜¯åŸºäºsshæœåŠ¡æ§åˆ¶æœåŠ¡å™¨çš„ã€‚ ","date":"2022-04-12","objectID":"/ansible/:3:1","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"åˆ›å»ºsources.listæ–‡ä»¶(åŒä¸»æ§ç«¯) ","date":"2022-04-12","objectID":"/ansible/:3:2","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"å¼€å§‹æ„å»º docker build -t debian10/ansible-node . ","date":"2022-04-12","objectID":"/ansible/:3:3","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"åˆ›å»º3ä¸ªè¢«æ§ç«¯å®¹å™¨ docker run -it --name ansible-node1 --privilaged=true -d debain10/ansible init docker run -it --name ansible-node2 --privilaged=true -d debain10/ansible init docker run -it --name ansible-node3 --privilaged=true -d debain10/ansible init ","date":"2022-04-12","objectID":"/ansible/:3:4","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"åˆ†åˆ«è¿›å…¥å®¹å™¨å¹¶ä¿®æ”¹rootå¯†ç  #å¯†ç ç»Ÿä¸€ä¿®æ”¹ä¸º123456 echo \"123456\" | passwd --stdin root #debain10è¯•äº†ä¸‹ä¸ç”Ÿæ•ˆ #ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ”¹ passwd root 123456 æœ€åå¯ä»¥çœ‹åˆ°ä¸€ä¸ªä¸»æ§ç«¯å’Œ3ä¸ªè¢«æ§ç«¯å®¹å™¨ã€‚ e8e005edfab9 debain/ansible-node \"init\" About an hour ago Up About an hour ansible-node3 cd03436b2424 debain/ansible-node \"init\" About an hour ago Up About an hour ansible-node2 88bf589578f5 debain/ansible-node \"init\" About an hour ago Up About an hour ansible-node1 ccb07fbb3515 debain10/ansible \"sh\" About an hour ago Up About an hour ansible-control ","date":"2022-04-12","objectID":"/ansible/:3:5","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"åœ¨æ§åˆ¶ç«¯æ·»åŠ æ‰€æœ‰è¢«æ§ç«¯ä¸»æœºä¿¡æ¯ æœ‰ä¸¤ç§æ–¹æ³• ","date":"2022-04-12","objectID":"/ansible/:4:0","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"ä¸€ç§æ˜æ–‡æ–¹å¼(ä¸å®‰å…¨) åœ¨/etc/ansible/hostsæ–‡ä»¶æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼ˆè¦†ç›–ï¼‰ node1 ansible_ssh_host=172.18.0.5 ansible_ssh_port=22 ansible_ssh_pass=1 node2 ansible_ssh_host=172.18.0.6 ansible_ssh_port=22 ansible_ssh_pass=1 node3 ansible_ssh_host=172.18.0.7 ansible_ssh_port=22 ansible_ssh_pass=1 [hello] node1 node2 node3 ","date":"2022-04-12","objectID":"/ansible/:4:1","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"å¦ä¸€ç§å¯†æ–‡æ–¹å¼ï¼ˆæ¨èï¼‰ ä½¿ç”¨opensslç”Ÿæˆéšæœºå¯†ç  openssl rand -out vault_password_file -base64 128 #cat vault_password_file eBqrIFYQ7XDJKjTywZwc26KElu1NQwwx5su3pzj21c4H33RQUV4kslL+UHVEJzxN sYIEbklwL7la+sugcSoK5PutqZ79bXnvT7FkEk2pMFNUO4W13/R3pH1AFAddAvsC h+YG1mxTCUsNbCwgtngCkAe9cBcLbkbLMVxjQ+dZym4= #æœ€å°åŒ–æƒé™å¹¶ä¸Šé”ã€‚ chmod a-w vault_password_file chattr +i vault_password_file åˆ é™¤æ–‡ä»¶å‰å…ˆè§£é” chattr -i vault_password_file å…³äºopensslè¡¥å……ï¼š opensslç”Ÿæˆéšæœºæ•° openssl rand [-out file] [-rand file(s)] [-base64] [-hex] num å¸¸ç”¨é€‰é¡¹æœ‰ï¼š -out fileï¼šå°†ç”Ÿæˆçš„éšæœºæ•°ä¿å­˜è‡³æŒ‡å®šæ–‡ä»¶ä¸­ -base64ï¼šä½¿ç”¨base64 ç¼–ç æ ¼å¼ -hexï¼šä½¿ç”¨16è¿›åˆ¶ç¼–ç æ ¼å¼ ä½¿ç”¨ansible-vaultç”ŸæˆåŠ å¯†åçš„å­—ç¬¦ä¸² root@ccb07fbb3515:~# ansible-vault encrypt_string \"123456\" -name ansible_ssh_pass The number of --name options do not match the number of args. The last named variable will be \"ame\". The rest will not have names. # The encrypted version of variable (\"ame\", the string #1 from the command line args). ame: !vault | $ANSIBLE_VAULT;1.1;AES256 35643865643061373962376261653765333233333839353937643134643437396262646338363965 3366666561653365663164386536363963353961313362350a626662366361303434383665306531 34386161363965363634626663343832363664623139336665313131623732343437633439386264 6534663962663337640a363166383137613835383966396431326165663732646337653235646239 3534 # The encrypted version of the string #2 from the command line args.) !vault | $ANSIBLE_VAULT;1.1;AES256 34306239353764383165316133636366633131366332326362323830613638633263353638656562 3736396133633063623863623739326132383062373533300a613036646534353033363134383532 66333366633537643737333065313866396137663965393530653262616132633236663561336164 3633393361616162340a343931653762613765366339356632366135326464336532313562643432 38386533653231626365303837653831346263646464633430643765396239366334 Encryption successful æœ€åä¿®æ”¹ä¸»æœºæ–‡ä»¶/etc/ansible/hostsé…ç½®(ä½¿ç”¨yamlé£æ ¼) --- all: hosts: node1: ansible_host: 172.18.0.5 ansible_ssh_port: 22 ansible_ssh_pass: !vault | $ANSIBLE_VAULT;1.1;AES256 35643865643061373962376261653765333233333839353937643134643437396262646338363965 3366666561653365663164386536363963353961313362350a626662366361303434383665306531 34386161363965363634626663343832363664623139336665313131623732343437633439386264 6534663962663337640a363166383137613835383966396431326165663732646337653235646239 3534 node2: ansible_host: 172.18.0.6 ansible_ssh_port: 22 ansible_ssh_pass: !vault | $ANSIBLE_VAULT;1.1;AES256 35643865643061373962376261653765333233333839353937643134643437396262646338363965 3366666561653365663164386536363963353961313362350a626662366361303434383665306531 34386161363965363634626663343832363664623139336665313131623732343437633439386264 6534663962663337640a363166383137613835383966396431326165663732646337653235646239 3534 node3: ansible_host: 172.18.0.7 ansible_ssh_port: 22 ansible_ssh_pass: !vault | $ANSIBLE_VAULT;1.1;AES256 35643865643061373962376261653765333233333839353937643134643437396262646338363965 3366666561653365663164386536363963353961313362350a626662366361303434383665306531 34386161363965363634626663343832363664623139336665313131623732343437633439386264 6534663962663337640a363166383137613835383966396431326165663732646337653235646239 3534 ... yamlæ ¼å¼å‚è€ƒå®˜ç½‘ è¿™é‡Œçš„sshç«¯å£è¿˜æœ‰å¦ä¸€ç§å†™æ³• ansible_port: 22 æµ‹è¯• root@ccb07fbb3515:/etc/ansible# ansible all -m ping node1 | SUCCESS =\u003e { \"changed\": false, \"ping\": \"pong\" } node3 | SUCCESS =\u003e { \"changed\": false, \"ping\": \"pong\" } node2 | SUCCESS =\u003e { \"changed\": false, \"ping\": \"pong\" } é‡å¯å…¶ä¸­ä¸€ä¸ªä¸»æœºçš„æœåŠ¡ root@ccb07fbb3515:/etc/ansible# ansible node1 -m command -a \"systemctl restart cron\" node1 | CHANGED | rc=0 \u003e\u003e æŸ¥çœ‹æ‰€æœ‰ä¸»æœºçš„å†…æ ¸ç‰ˆæœ¬ ansible all -m command -a \"uname -a\" node1 | CHANGED | rc=0 \u003e\u003e Linux cd03436b2424 4.18.0-147.5.1.el8_1.x86_64 #1 SMP Wed Feb 5 02:00:39 UTC 2020 x86_64 GNU/Linux node2 | CHANGED | rc=0 \u003e\u003e Linux e8e005edfab9 4.18.0-147.5.1.el8_1.x86_64 #1 SMP Wed Feb 5 02:00:39 UTC 2020 x86_64 GNU/Linux node3 | CHANGED | rc=0 \u003e\u003e Linux 88bf589578f5 4.18.0-147.5.1.el8_1.x86_64 #1 SMP Wed Feb 5 02:00:39 UTC 2020 x86_64 GNU/Linux ","date":"2022-04-12","objectID":"/ansible/:4:2","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"æœ€åè¿˜å¯ä»¥å…å¯†ç™»å½• ä¸»æ§ç«¯ä½¿ç”¨ssh-keygenç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œé€šè¿‡sshpassä¼ é€’åˆ°è¢«æ§ç«¯ã€‚è¾“å…¥è¢«æ§ç«¯ç”¨æˆ·åå’Œå¯†ç ã€‚ #!/bin/bash read -p 'input user: ' USER echo \"$USER\" read -s -p 'input pass: ' PASS rm -f /root/.ssh/id_rsa (ssh-keygen -P \"\" -f /root/.ssh/id_rsa) \u0026\u003e/dev/null for i in {5..7} do IP_host=172.18.0.${i} ping -c 1 -w 1 ${IP_host} \u0026\u003e/dev/null if [ $? -eq 0 ];then (sshpass -p ${PASS} ssh-copy-id -o StrictHostKeyChecking=no ${IP_host}) \u0026\u003e/dev/null echo -e \"\\e[1;32m ${IP_host} ok \\e[0m\" fi done ç„¶åansibleçš„é…ç½®æ–‡ä»¶hostsé‡Œå¯ä»¥ä¸å†™å¯†ç äº†ã€‚ --- web: #ç»„å1 hosts: node1: #è¢«æ§ä¸»æœº1 ansible_host: 172.18.0.5 ansible_ssh_port: 22 node2: #è¢«æ§ä¸»æœº2 ansible_host: 172.18.0.6 ansible_ssh_port: 22 apache: #ç»„å2 hosts: node3: #è¢«æ§ä¸»æœº3 ansible_host: 172.18.0.7 ansible_ssh_port: 22 node4: #è¢«æ§ä¸»æœº4 ansible_host: 172.18.0.8 ansible_ssh_port: 22 ... ","date":"2022-04-12","objectID":"/ansible/:4:3","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"Ansibleå‚æ•°è¡¥å…¨åŠŸèƒ½ ä»Ansible 2.9ç‰ˆæœ¬å¼€å§‹ï¼Œansibleæ”¯æŒå‘½ä»¤çš„é€‰é¡¹è¡¥å…¨åŠŸèƒ½ï¼Œå®ƒä¾èµ–äºpythonçš„argcompleteæ’ä»¶ aptitude install python-argcomplete -y #å®‰è£… activate-global-python-argcomplete #æ¿€æ´» æ¿€æ´»åï¼Œå°±å¯ä»¥æŒ‰ä¸¤æ¬¡tabè¡¥å…¨å‘½ä»¤å’Œé€‰é¡¹äº†ã€‚ ","date":"2022-04-12","objectID":"/ansible/:5:0","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"ansibleå‡çº§åˆ°ç‰¹å®šç‰ˆæœ¬ ","date":"2022-04-12","objectID":"/ansible/:6:0","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"å¸è½½ æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ ansible --version ansible 2.7.7 å®‰è£…debainåŒ…ç®¡ç†å™¨aptitude,å®ƒå¯ä»¥è‡ªåŠ¨è§£å†³åŒ…ä¾èµ–é—®é¢˜ã€‚ apt install aptitude -y å¸è½½æ—§ç‰ˆæœ¬çš„ansible aptitude remove ansible* æŸ¥çœ‹ansibleä¾èµ–åŒ…æ˜¯å¦æ²¡å¸è½½å¹²å‡€ apt list | grep ansible* ","date":"2022-04-12","objectID":"/ansible/:6:1","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"å®‰è£…æ–°ç‰ˆæœ¬ debain ç³»ç»Ÿä¸‹ansibleæ‰€æœ‰ç‰ˆæœ¬ https://packages.debian.org/buster-backports/all/ansible/download æœ¬æ¬¡ä¸‹è½½2.9.16ç‰ˆæœ¬çš„å®‰è£…åŒ…è¿›è¡Œå‡çº§ wget http://ftp.cn.debian.org/debian/pool/main/a/ansible/ansible_2.9.16+dfsg-1~bpo10+2_all.deb å®‰è£… aptitude install ansible_2.9.16+dfsg-1~bpo10+2_all.deb æœ€æ–°ç‰ˆæ”¯æŒpython3ï¼Œå¯ä»¥ä¸‹è½½ã€‚ aptitude install python3 ","date":"2022-04-12","objectID":"/ansible/:6:2","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"æŸ¥è¯¢ ansible --version ansible 2.9.16 config file = /etc/ansible/ansible.cfg configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules'] ansible python module location = /usr/lib/python3/dist-packages/ansible executable location = /usr/bin/ansible python version = 3.7.3 (default, Jan 22 2021, 20:04:44) [GCC 8.3.0] ","date":"2022-04-12","objectID":"/ansible/:6:3","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"å…¶ä»– ","date":"2022-04-12","objectID":"/ansible/:7:0","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["å·¥å…·"],"content":"å…³äºdebain10ç³»ç»Ÿé¼ æ ‡å³é”®ç²˜è¿çš„è§£å†³æ–¹æ³• ç¼–è¾‘ vim çš„é»˜è®¤é…ç½®æ–‡ä»¶ vi /usr/share/vim/vim81/defaults.vim #ç¬¬79è¡Œ if has('mouse') set mouse=a endif #set mouse=a æ”¹ä¸ºset mouse-=a ä¿å­˜é€€å‡º ","date":"2022-04-12","objectID":"/ansible/:7:1","tags":["ansible"],"title":"ansibleåŸºæœ¬ç¯å¢ƒæ­å»ºåŠå‡çº§ç‰ˆæœ¬","uri":"/ansible/"},{"categories":["ç¼–ç¨‹"],"content":"ç®€å•å¥—æ¥å­—é€šä¿¡ ","date":"2022-04-11","objectID":"/%E5%9F%BA%E4%BA%8Etcp%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/:1:0","tags":["python"],"title":"åŸºäºtcpçš„ç®€å•å¥—æ¥å­—é€šä¿¡","uri":"/%E5%9F%BA%E4%BA%8Etcp%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/"},{"categories":["ç¼–ç¨‹"],"content":"æœåŠ¡ç«¯ import socket #ä¹°æ‰‹æœº phone = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #tcpåè®® #ç»‘å®šæ‰‹æœº # phone.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1) phone.bind(('127.0.0.1', 9000)) #0-65535 #å¼€æœº phone.listen(5) #ç­‰å¾…ç”µè¯è¿æ¥ print('staring....') conn, client_addr=phone.accept() #(conn,client_addr) .accept()ä¼šé˜»å¡ï¼Œç­‰å¾…å»ºç«‹è¿æ¥ã€‚ print(conn, client_addr) #æ”¶ã€å‘æ¶ˆæ¯ data = conn.recv(1024) #1024bytes? .recv()ä¹Ÿä¼šé˜»å¡ã€‚ç­‰ç€æ¥æ”¶æ•°æ®ã€‚ conn.send(data.upper()) #.send()ä¸ä¼šé˜»å¡ï¼Œåªæ˜¯å‘ç»™ç¼“å­˜å°±ç»“æŸäº†ã€‚ #æŒ‚ç”µè¯è¿æ¥ conn.close() #å…³æœº phone.close() ","date":"2022-04-11","objectID":"/%E5%9F%BA%E4%BA%8Etcp%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/:1:1","tags":["python"],"title":"åŸºäºtcpçš„ç®€å•å¥—æ¥å­—é€šä¿¡","uri":"/%E5%9F%BA%E4%BA%8Etcp%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/"},{"categories":["ç¼–ç¨‹"],"content":"å®¢æˆ·ç«¯ import socket #ä¹°æ‰‹æœº phone=socket.socket(socket.AF_INET, socket.SOCK_STREAM) #æ‹¨ç”µè¯ phone.connect(('127.0.0.1', 9000)) #å‘æ”¶æ¶ˆæ¯ phone.send(\"hello\".encode('utf-8')) data = phone.recv(1024) print(data) #æŒ‚ç”µè¯ phone.close() ç»“æœï¼š #æœåŠ¡ç«¯ staring.... \u003csocket.socket fd=360, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 9000), raddr=('127.0.0.1', 18455)\u003e ('127.0.0.1', 18455) #å®¢æˆ·ç«¯ b'HELLO' ä¼˜åŒ–ï¼šåŠ ä¸Šé€šä¿¡å¾ªç¯ æœåŠ¡ç«¯ import socket phone = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #tcpåè®® # phone.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1) phone.bind(('127.0.0.1', 9000)) #0-65535 phone.listen(5) print('staring....') conn, client_addr=phone.accept() #(conn,client_addr) print(conn, client_addr) while True: data = conn.recv(1024) #1024bytes? print('å®¢æˆ·ç«¯ä¿¡æ¯', data) conn.send(data.upper()) conn.close() phone.close() å®¢æˆ·ç«¯ import socket phone=socket.socket(socket.AF_INET, socket.SOCK_STREAM) phone.connect(('127.0.0.1', 9000)) while True: #é€šä¿¡å¾ªç¯ msg=input('\u003e\u003e: ').strip() if not msg: continue #é˜²æ­¢å‘é€ç©ºä¿¡æ¯ phone.send(msg.encode('utf-8')) data = phone.recv(1024) print(data) phone.close() é˜²æ­¢æœåŠ¡ç«¯æ­»æ‰ï¼Œæ·»åŠ é“¾æ¥å¾ªç¯ã€‚å¹¶æ•æ‰å¼‚å¸¸ä¿¡å·ï¼Œé˜²æ­¢å®¢æˆ·ç«¯çªç„¶æ–­æ‰å¯¼è‡´æœåŠ¡ç«¯æ­»æ‰ã€‚ç›¸å½“äºæœåŠ¡ç«¯é‡Šæ”¾æ— æ•ˆé“¾æ¥ã€‚ æœåŠ¡ç«¯ import socket phone = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #tcpåè®® # phone.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1) phone.bind(('127.0.0.1', 9000)) #0-65535 phone.listen(5) print('staring....') while True: #é“¾æ¥å¾ªç¯ conn, client_addr=phone.accept() #(conn,client_addr) print(client_addr) while True: #é€šä¿¡å¾ªç¯ try: data = conn.recv(1024) #1024bytes? if not data:break #é’ˆå¯¹çš„æ˜¯Linuxç³»ç»Ÿï¼Œå› ä¸ºlinuxä¸ä¼šæŠ›å¼‚å¸¸ã€‚windowsä¼šæŠ›å¼‚å¸¸ã€‚ print('å®¢æˆ·ç«¯ä¿¡æ¯', data) conn.send(data.upper()) except ConnectionResetError: break conn.close() phone.close() å®¢æˆ·ç«¯ import socket phone=socket.socket(socket.AF_INET, socket.SOCK_STREAM) phone.connect(('127.0.0.1', 9000)) while True: #é€šä¿¡å¾ªç¯ msg=input('\u003e\u003e: ').strip() if not msg: continue #é˜²æ­¢å‘é€ç©ºä¿¡æ¯ phone.send(msg.encode('utf-8')) data = phone.recv(1024) print(data) phone.close() æ•ˆæœï¼Œå®¢æˆ·ç«¯çªç„¶æ­»æ‰åï¼ŒæœåŠ¡ç«¯ä¼šé‡Šæ”¾é“¾æ¥ã€‚å½“å†æ¬¡æœ‰æ–°å®¢æˆ·ç«¯æ¥è¿æ¥æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå†å¼€æ–°é“¾æ¥ï¼Œé‡Šæ”¾æ—§é“¾æ¥ã€‚ #æœåŠ¡ç«¯ staring.... ('127.0.0.1', 18939) ('127.0.0.1', 18940) ('127.0.0.1', 18941) ('127.0.0.1', 18944) #å®¢æˆ·ç«¯ \u003e\u003e: Process finished with exit code -1 #windowsä¼šæŸ¥åˆ°é“¾æ¥ TCP 127.0.0.1:9000 127.0.0.1:18944 ESTABLISHED TCP 127.0.0.1:18944 127.0.0.1:9000 ESTABLISHED ","date":"2022-04-11","objectID":"/%E5%9F%BA%E4%BA%8Etcp%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/:1:2","tags":["python"],"title":"åŸºäºtcpçš„ç®€å•å¥—æ¥å­—é€šä¿¡","uri":"/%E5%9F%BA%E4%BA%8Etcp%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/"},{"categories":["ç¼–ç¨‹"],"content":"é›†åˆçš„ç›¸å…³ç‰¹æ€§ ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:0","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"å»é‡ s = {1,2,2,2,2,2,3,3,3,4,4,4,5} print(s) #{1,2,3,4,5} ç¡®ä¿ä¸è¦å°†é›†åˆä¸å­—å…¸æ··æ·†ï¼Œå­—å…¸ä¹Ÿç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥ã€‚ my_set = {1,2,3} my_dict = {\"term\": \"definition\", \"term2\": \"definition2\"} ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:1","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"set() å°†å…¶ä»–æ•°æ®ç±»å‹è½¬æ¢æˆé›†åˆç±»å‹ l = [1,2,3,4] s = set(l) print(s) #{1,2,3,4} ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:2","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"å¹¶é›†(.union()) è”åˆæ˜¯ä¸€ä¸ªæ–°é›†åˆï¼ŒåŒ…å«æ‰€æœ‰åŸå§‹é›†åˆä¸­çš„å…ƒç´ ã€‚è¿™å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªé›†åˆçš„æ€»å’Œã€‚ a = {1,2,3} b = {3,4,5} c = a.union(b) print(c) #{1,2,3,4,5} ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:3","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"äº¤é›†(.intersection()) äº¤é›†æ ‡è¯†å¤šä¸ªé›†åˆä¹‹é—´çš„å…±åŒå…ƒç´ æˆ–é‡å ã€‚ a = {1,2,3} b = {3,4,5} c = a.intersection(b) print(c) #{3} ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:4","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"å·®é›†(.difference()) å·®å¼‚æ ‡è¯†å­˜åœ¨äºåŸºé›†ä¸­è€Œä¸å­˜åœ¨äºå¦ä¸€ä¸ªåŸºé›†ä¸­çš„å€¼ã€‚aé›†åˆä¸­æœ‰è€Œbé›†åˆä¸­æ²¡æœ‰çš„éƒ¨åˆ†ã€‚ a = {1,2,3} b = {3,4,5} c = a.difference(b) print(c) #{1,2} ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:5","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"å¯¹ç§°å·®é›†(.symmetric_difference) ä»å¹¶é›†ä¸­å‡å»äº¤é›†å‰©ä¸‹çš„å°±æ˜¯å¯¹ç§°å·®é›† a = {1,2,3} b = {3,4,5} c = a.symmetric_difference(b) print(c) #{1,2,4,5} ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:6","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"å­é›†åˆ¤æ–­ .issubset()å’Œissuperset()æ–¹æ³•è¿”å›å¸ƒå°”å€¼Trueæˆ–è€…False å­é›†æ˜¯ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­æ‰€æœ‰å…ƒç´ éƒ½å­˜åœ¨äºæ›´å¤§çš„é›†åˆä¸­ a = {1,2,3,4,5} b = {3,4,5} c = a.issubset(b) print(c) #aæ˜¯bçš„å­é›†å—ï¼Ÿ ç»“æœæ˜¯ False aã€bé›†åˆè°ƒæ¢ä½ç½® a = {1,2,3,4,5} b = {3,4,5} c = b.issubset(a) print(c) #bæ˜¯açš„å­é›†å—ï¼Ÿ ç»“æœæ˜¯ True ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:7","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"è¶…é›†åˆ¤æ–­ è¶…é›†ä¸å­é›†ç›¸åã€‚å¦‚æœæä¾›çš„å‚æ•°çš„æ‰€æœ‰å…ƒç´ éƒ½å­˜åœ¨äºå…¶ä¸­ï¼Œåˆ™åŸºé›†è¢«å£°æ˜ä¸ºè¶…é›†ã€‚ a = {1,2,3,4,5} b = {3,4,5} c = a.issuperset(b) print(c) # True ","date":"2022-04-11","objectID":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/:1:8","tags":["python"],"title":"é›†åˆçš„ç›¸å…³ç‰¹æ€§","uri":"/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/"},{"categories":["ç¼–ç¨‹"],"content":"å¼‚å¸¸ ","date":"2022-04-09","objectID":"/%E5%BC%82%E5%B8%B8/:1:0","tags":["python"],"title":"å¼‚å¸¸","uri":"/%E5%BC%82%E5%B8%B8/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯å¼‚å¸¸ï¼Ÿ å¼‚å¸¸æ˜¯é”™è¯¯å‘ç”Ÿçš„ä¿¡å·ï¼Œä¸€æ—¦ç¨‹åºå‡ºé”™ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ï¼Œåº”ç”¨ç¨‹åºæœªå¤„ç†è¯¥å¼‚å¸¸ï¼Œå¼‚å¸¸ä¾¿ä¼šæŠ›å‡ºï¼Œç¨‹åºéšä¹‹ç»ˆæ­¢ã€‚ ","date":"2022-04-09","objectID":"/%E5%BC%82%E5%B8%B8/:1:1","tags":["python"],"title":"å¼‚å¸¸","uri":"/%E5%BC%82%E5%B8%B8/"},{"categories":["ç¼–ç¨‹"],"content":"å¸¸è§å¼‚å¸¸ç±»å‹ è¯­æ³•é”™è¯¯åº”è¯¥åœ¨ç¨‹åºè¿è¡Œä¹‹å‰å°±ä¿®æ­£ if 1\u003e2 print(\"xxxxxx\") é€»è¾‘é”™è¯¯ x #NameError l=[10000] #IndexError class foo: pass Foo.x #AttributeError: k={'x':1} k['y'] #KeyError res1=1/0 res2=1+'str' #ZeroDivisionError:æ— æ³•å®Œæˆè®¡ç®— for i in 3: pass #TypeError:intç±»å‹ä¸å¯è¿­ä»£ num=input(\"\u003e\u003e: \") #è¾“å…¥hello int(num) #ValueError ","date":"2022-04-09","objectID":"/%E5%BC%82%E5%B8%B8/:1:2","tags":["python"],"title":"å¼‚å¸¸","uri":"/%E5%BC%82%E5%B8%B8/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•å¤„ç†å¼‚å¸¸ #åŸºæœ¬è¯­æ³•ä¸º try: è¢«æ£€æµ‹çš„ä»£ç å— except å¼‚å¸¸ç±»å‹ï¼š tryä¸­ä¸€æ—¦æ£€æµ‹åˆ°å¼‚å¸¸ï¼Œå°±æ‰§è¡Œè¿™ä¸ªä½ç½®çš„é€»è¾‘ #ä¸¾ä¾‹ try: f=open('a.txt') g=(line.strip() for line in f) print(next(g)) print(next(g)) print(next(g)) print(next(g)) print(next(g)) except StopIteration: f.close() å¼‚å¸¸ç±»åªèƒ½ç”¨æ¥å¤„ç†æŒ‡å®šçš„å¼‚å¸¸æƒ…å†µï¼Œå¦‚æœéæŒ‡å®šå¼‚å¸¸åˆ™æ— æ³•å¤„ç†ã€‚ s1 = 'hello' try: int(s1) except IndexError as e: # æœªæ•è·åˆ°å¼‚å¸¸ï¼Œç¨‹åºç›´æ¥æŠ¥é”™ print e å¤šåˆ†æ”¯ s1 = 'hello' try: int(s1) except IndexError as e: print(e) except KeyError as e: print(e) except ValueError as e: print(e) ä¸‡èƒ½å¼‚å¸¸Exception s1 = 'hello' try: int(s1) except Exception as e: print(e) å¤šåˆ†æ”¯å¼‚å¸¸ä¸ä¸‡èƒ½å¼‚å¸¸ å¦‚æœä½ æƒ³è¦çš„æ•ˆæœæ˜¯ï¼Œæ— è®ºå‡ºç°ä»€ä¹ˆå¼‚å¸¸ï¼Œæˆ‘ä»¬ç»Ÿä¸€ä¸¢å¼ƒï¼Œæˆ–è€…ä½¿ç”¨åŒä¸€æ®µä»£ç é€»è¾‘å»å¤„ç†ä»–ä»¬ã€‚ å¦‚æœä½ æƒ³è¦çš„æ•ˆæœæ˜¯ï¼Œå¯¹äºä¸åŒçš„å¼‚å¸¸æˆ‘ä»¬éœ€è¦å®šåˆ¶ä¸åŒçš„å¤„ç†é€»è¾‘ï¼Œé‚£å°±éœ€è¦ç”¨åˆ°å¤šåˆ†æ”¯äº†ã€‚ s1 = 'hello' try: int(s1) except IndexError as e: print(e) except KeyError as e: print(e) except ValueError as e: print(e) except Exception as e: print(e) å¼‚å¸¸çš„å…¶ä»–ç»“æ„ s1 = 'hello' try: int(s1) except IndexError as e: print(e) except KeyError as e: print(e) except ValueError as e: print(e) #except Exception as e: # print(e) else: print('tryå†…ä»£ç å—æ²¡æœ‰å¼‚å¸¸åˆ™æ‰§è¡Œæˆ‘') finally: print('æ— è®ºå¼‚å¸¸ä¸å¦,éƒ½ä¼šæ‰§è¡Œè¯¥æ¨¡å—,é€šå¸¸æ˜¯è¿›è¡Œæ¸…ç†å·¥ä½œ') ä¸»åŠ¨è§¦å‘å¼‚å¸¸ try: raise TypeError('ç±»å‹é”™è¯¯') except Exception as e: print(e) è‡ªå®šä¹‰å¼‚å¸¸ class EgonException(BaseException): def __init__(self,msg): self.msg=msg def __str__(self): return self.msg try: raise EgonException('ç±»å‹é”™è¯¯') except EgonException as e: print(e) æ–­è¨€:assert æ¡ä»¶ assert 1 == 1 assert 1 == 2 æ€»ç»“try..except 1ï¼šæŠŠé”™è¯¯å¤„ç†å’ŒçœŸæ­£çš„å·¥ä½œåˆ†å¼€æ¥ 2ï¼šä»£ç æ›´æ˜“ç»„ç»‡ï¼Œæ›´æ¸…æ™°ï¼Œå¤æ‚çš„å·¥ä½œä»»åŠ¡æ›´å®¹æ˜“å®ç° 3ï¼šæ¯«æ— ç–‘é—®ï¼Œæ›´å®‰å…¨äº†ï¼Œä¸è‡³äºç”±äºä¸€äº›å°çš„ç–å¿½è€Œä½¿ç¨‹åºæ„å¤–å´©æºƒäº† å¤šåˆ†æ”¯å¼‚å¸¸å¤„ç† åŠŸèƒ½ï¼šåˆ¤æ–­æ‰“å¼€çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™æ•è·å¼‚å¸¸ï¼Œå­˜åœ¨åˆ™æ¯2ç§’é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹ã€‚ import time try: f = open(\"123.txt\",'r') try: while True: content = f.readline() if len(content) == 0: break time.sleep(2) print(content) finally: f.close() print(\"æ–‡ä»¶å…³é—­\") except Exception as result: print(\"å‘ç”Ÿå¼‚å¸¸ã€‚ã€‚ã€‚ã€‚\") ","date":"2022-04-09","objectID":"/%E5%BC%82%E5%B8%B8/:1:3","tags":["python"],"title":"å¼‚å¸¸","uri":"/%E5%BC%82%E5%B8%B8/"},{"categories":["ç¼–ç¨‹"],"content":"å°è£…ä¸åå°„ ç‰‡é¢ç†è§£ï¼šå°è£…ç›¸å½“äºéšè—ã€‚ ","date":"2022-04-09","objectID":"/%E5%B0%81%E8%A3%85/:1:0","tags":["python"],"title":"å°è£…","uri":"/%E5%B0%81%E8%A3%85/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•å°†å±æ€§éšè—ï¼ˆè®¾ç½®æˆç§æœ‰ï¼‰ï¼Ÿ ç”¨åŒä¸‹åˆ’çº¿å¼€å¤´æ–¹å¼å°†å±æ€§éšè—èµ·æ¥ã€‚ 1.__å¼€å¤´çš„å±æ€§åªæ˜¯ä¸€ç§è¯­æ³•æ„ä¹‰ä¸Šçš„å˜å½¢ï¼Œå¹¶ä¸ä¼šçœŸçš„é™åˆ¶å¤–éƒ¨çš„è®¿é—®ã€‚_ç±»å__å±æ€§åå¯ä»¥è®¿é—®ä½†æ¯«æ— æ„ä¹‰ã€‚ 2.è¿™ç§å˜å½¢åªåœ¨ç±»çš„å®šä¹‰é˜¶æ®µå‘é€ä¸€æ¬¡ï¼Œç±»å®šä¹‰ä¹‹åå†æ–°å¢çš„__å¼€å¤´çš„å±æ€§ä¸ä¼šå˜å½¢ã€‚ 3.è¿™ç§éšè—åªå¯¹å¤–ä¸å¯¹å†…ï¼Œå› ä¸ºç±»å†…éƒ¨å®šä¹‰çš„å±æ€§åœ¨ç±»å®šä¹‰é˜¶æ®µç»Ÿä¸€å‘ç”Ÿå˜å½¢ã€‚ class Foo: __N=0 def __init__(self): self.__X=10 def __foo(self): #ç›¸å½“äº_Foo__foo() print('from A') def bar(self): self.__foo() f = Foo() #ç±»å®ä¾‹åŒ–ï¼Œfæ˜¯å¯¹è±¡ã€‚ f.bar() #ç»“æœ 'from A'ã€‚å†…éƒ¨è°ƒç”¨äº†__foo()éªŒè¯ç¬¬3æ¡ã€‚ f.__foo() #æŠ¥é”™ã€‚AttributeError: 'Foo' object has no attribute '__foo'ï¼Œå±æ€§è¢«éšè—ï¼Œå¤–éƒ¨ä¸å¯è°ƒç”¨ã€‚éªŒè¯ç¬¬ä¸€æ¡å¤–éƒ¨ä¸èƒ½è®¿é—®éšè—å±æ€§ã€‚ # å¯ä»¥ç”¨f._Foo__foo()è°ƒç”¨ï¼Œä½†æ¯«æ— æ„ä¹‰ã€‚éªŒè¯ç¬¬1æ¡ã€‚ f.__N=10 print(f.__N) #éªŒè¯ç¬¬äºŒæ¡ã€‚ç±»å®šä¹‰æ—¶å·²ç»å®šä¹‰äº†__N=0,è€Œ__N=10æ˜¯åœ¨ç±»å®šä¹‰ä¹‹åã€‚æ­¤æ—¶å¯ä»¥è°ƒç”¨__N.ç»“æœä¸º10 å°è£…åº”ç”¨ class People: def __init__(self,name,age): # self.__name=name # self.__age=age self.set_info(name,age) def tell_info(self): print(\"å§“åï¼š\u003c%s\u003e å¹´é¾„ï¼š\u003c%s\u003e\"%(self.__name,self.__age)) def set_info(self,name,age): if type(name) is not str: #åˆ¤æ–­nameæ˜¯å¦æ˜¯strç±»å‹ raise TypeError('name must be str') if type(age) is not int: #åˆ¤æ–­ageæ˜¯å¦æ˜¯intç±»å‹ raise TypeError('age must be int') self.__name=name self.__age=age p=People(12312323,18) #TypeError: name must be str p.tell_info() æ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡è®¾ç½®set_info()æ–¹æ³•ç»Ÿä¸€æ¥å£ï¼ŒæŠŠnameã€ageéšè—ã€‚ç”¨æˆ·åªéœ€è¦è°ƒç”¨tell_info()æ–¹æ³•ï¼Œä¸éœ€è¦äº†è§£å…¶ä¸­çš„è¿‡ç¨‹ã€‚ ","date":"2022-04-09","objectID":"/%E5%B0%81%E8%A3%85/:1:1","tags":["python"],"title":"å°è£…","uri":"/%E5%B0%81%E8%A3%85/"},{"categories":["ç¼–ç¨‹"],"content":"å°è£…ä¹‹property propertyæ˜¯ä¸€ç§ç‰¹æ®Šå±æ€§ï¼Œè®¿é—®å®ƒæ—¶ä¼šæ‰§è¡Œä¸€æ®µåŠŸèƒ½ï¼ˆå‡½æ•°ï¼‰ç„¶åè¿”å›å€¼ã€‚ æˆäººçš„BMIæ•°å€¼ï¼š è¿‡è½»ï¼šä½äº18.5 æ­£å¸¸ï¼š18.5-23.9 è¿‡é‡ï¼š24-27 è‚¥èƒ–ï¼š28-32 éå¸¸è‚¥èƒ–, é«˜äº32 ä½“è´¨æŒ‡æ•°ï¼ˆBMIï¼‰=ä½“é‡ï¼ˆkgï¼‰Ã·èº«é«˜^2ï¼ˆmï¼‰ EXï¼š70kgÃ·ï¼ˆ1.75Ã—1.75ï¼‰=22.86 class People: def __init__(self,name,age,height,weight): self.name=name self.age=age self.height=height self.weight=weight @property def bmi(self): return self.weight / (self.height ** 2) jack=People('jack',18,1.80,75) # jack.height=1.82 print(jack.bmi) bmiåº”è¯¥æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œæ˜¯ä¸€ç§æ•°æ®å±æ€§ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨property å°†ä¸€ä¸ªç±»çš„å‡½æ•°å®šä¹‰æˆç‰¹æ€§ä»¥åï¼Œå¯¹è±¡å†å»ä½¿ç”¨çš„æ—¶å€™ojb.nameï¼Œæ ¹æœ¬æ— æ³•å¯Ÿè§‰è‡ªå·±çš„nameæ˜¯æ‰§è¡Œäº†ä¸€ä¸ªè€Œå‡½æ•°ç„¶åè®¡ç®—å‡ºæ¥ï¼Œè¿™ç§ç‰¹æ€§çš„ä½¿ç”¨æ–¹å¼éµå¾ªäº†ç»Ÿä¸€è®¿é—®çš„åŸåˆ™ã€‚ class People: def __init__(self,name): self.__name = name #å°†æ‰€æœ‰çš„æ•°æ®å±æ€§éƒ½éšè—èµ·æ¥ @property def name(self): return self.__name #obj.nameè®¿é—®çš„æ˜¯self.__nameï¼ˆè¿™ä¹Ÿæ˜¯çœŸå®å€¼çš„å­˜æ”¾ä½ç½®ï¼‰ jack=Pepole('jack') #ç±»å®ä¾‹åŒ– print(jack.name) #jack æ­¤æ—¶åå­—ä¸èƒ½ä¿®æ”¹,ä¿®æ”¹ä¼šæŠ¥å¼‚å¸¸ã€‚ jack.name='smith' #AttributeError: can't set attribute æ€æ ·å¯ä»¥ä¿®æ”¹å‘¢ï¼Ÿ è®¾ç½®åŒåçš„å±æ€§.setter()æ–¹æ³• class People: def __init__(self,name): self.__name = name @property def name(self): return self.__name @name.setter def name(self,obj): if type(obj) is not str: #åœ¨è®¾å®šå€¼ä¹‹å‰è¿›è¡Œç±»å‹æ£€æŸ¥ raise TypeError(\"name must be str\") self.__name=obj jack=Pepole('jack') jack.name='smith' print(jack.name) #smith å¦‚ä½•åˆ é™¤å±æ€§å‘¢ï¼Ÿ æ·»åŠ åŒåå±æ€§.deleter class People: def __init__(self,name): self.__name = name @property def name(self): return self.__name @name.setter def name(self,obj): if type(obj) is not str: #åœ¨è®¾å®šå€¼ä¹‹å‰è¿›è¡Œç±»å‹æ£€æŸ¥ raise TypeError(\"name must be str\") self.__name=obj @name.deleter def name(self,obj): del self.__name jack=Pepole('jack') jack.name='smith' del jack.name print(jack.name) #AttributeError: 'People' object has no attribute '_People__name' æˆåŠŸåˆ é™¤äº†ã€‚ ","date":"2022-04-09","objectID":"/%E5%B0%81%E8%A3%85/:1:2","tags":["python"],"title":"å°è£…","uri":"/%E5%B0%81%E8%A3%85/"},{"categories":["ç¼–ç¨‹"],"content":"åå°„ ","date":"2022-04-09","objectID":"/%E5%B0%81%E8%A3%85/:2:0","tags":["python"],"title":"å°è£…","uri":"/%E5%B0%81%E8%A3%85/"},{"categories":["ç¼–ç¨‹"],"content":"å†…ç½®å‡½æ•°è¡¥å…… isinstanceåˆ¤æ–­ç±»å‹ issubclass:åˆ¤æ–­æ˜¯ä¸æ˜¯å­ç±» l=[] print(type(l) is list) print(isinstance(l,list)) #True class Foo: pass class Bar(Foo): pass print(issubclass(Bar,Foo)) #True åå°„ é€šè¿‡å­—ç¬¦ä¸²æ˜ å°„æˆ–ä¿®æ”¹ç¨‹åºè¿è¡Œæ—¶çš„çŠ¶æ€ã€å±æ€§ã€æ–¹æ³•æœ‰ä»¥ä¸‹4ä¸ªæ–¹æ³•ï¼š hasattr(obj,name_str):åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡é‡Œæ˜¯å¦æœ‰å¯¹åº”çš„name_strå­—ç¬¦ä¸²çš„æ–¹æ³• setattr(obj,y,v)ï¼šè®¾ç½®å±æ€§,ç›¸å½“äºobj.y=v getattr(obj,name_str,default=None)ï¼šæ ¹æ®å­—ç¬¦ä¸²name_strå»è·å–objå¯¹è±¡é‡Œçš„æ–¹æ³•å†…å­˜åœ°å€ delattr(x,y)ï¼šåˆ é™¤æŸç§å±æ€§ class Foo: def __init__(self,name): self.name=name def f1(self): print('from f1') obj=Foo('jack') # print(obj.name) #ç­‰åŒäºobj.__dict__['name'] #hasattr print(hasattr(obj,'name')) #True print(hasattr(obj,'f1')) #True #setattr setattr(obj,'x',1) print(obj.__dict__) #ç»“æœæ˜¯ï¼š{'name': 'jack', 'x': 1} #getattr if hasattr(obj, 'f1'): f = getattr(obj, 'f1') # f=obj.f1 # print(f) #\u003cbound method Foo.f1 of \u003c__main__.Foo object at 0x000002A8A3677DC0\u003e\u003e f() #from f1 #delattr delattr(obj,'name') print(obj.__dict__) #{'x': 1} ","date":"2022-04-09","objectID":"/%E5%B0%81%E8%A3%85/:2:1","tags":["python"],"title":"å°è£…","uri":"/%E5%B0%81%E8%A3%85/"},{"categories":["ç¼–ç¨‹"],"content":"ç±»çš„å†…ç½®æ–¹æ³• __str__ï¼šæ”¹å˜å¯¹è±¡å­—ç¬¦ä¸²æ˜¾ç¤º ä¸ä½¿ç”¨__str__æ˜¾ç¤º class People: def __init__(self,name,age): self.name=name self.age=age jack=People('jack',18) print(jack) #\u003c__main__.People object at 0x000001D7DEF31310\u003e ä½¿ç”¨ä¹‹åå¯ä»¥è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹ class People: def __init__(self,name,age): self.name=name self.age=age def __str__(self): return '\u003cname: %s,age: %s\u003e' %(self.name,self.age) jack=People('jack',18) print(jack) #\u003cname: jack,age: 18\u003e __del__ï¼šææ„æ–¹æ³•ï¼Œå½“å¯¹è±¡åœ¨å†…å­˜ç§è¢«é‡Šæ”¾æ—¶ï¼Œè‡ªåŠ¨è§¦å‘æ‰§è¡Œã€‚ æ³¨ï¼šå¦‚æœäº§ç”Ÿçš„å¯¹è±¡ä»…ä»…åªæ˜¯pythonç¨‹åºçº§åˆ«çš„ï¼ˆç”¨æˆ·çº§ï¼‰ï¼Œé‚£ä¹ˆæ— éœ€å®šä¹‰__del__,å¦‚æœäº§ç”Ÿçš„å¯¹è±¡çš„åŒæ—¶è¿˜ä¼šå‘æ“ä½œç³»ç»Ÿå‘èµ·ç³»ç»Ÿè°ƒç”¨ï¼Œå³ä¸€ä¸ªå¯¹è±¡æœ‰ç”¨æˆ·çº§ä¸å†…æ ¸çº§ä¸¤ç§èµ„æºï¼Œæ¯”å¦‚ï¼ˆæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®åº“é“¾æ¥ï¼‰ï¼Œåˆ™å¿…é¡»åœ¨æ¸…é™¤å¯¹è±¡çš„åŒæ—¶å›æ”¶ç³»ç»Ÿèµ„æºï¼Œè¿™å°±ç”¨åˆ°äº†__del__ã€‚ class Foo: def __del__(self): print('æ‰§è¡Œæˆ‘å•¦') f1=Foo() del f1 print(\"------\u003e\") ç»“æœï¼š æ‰§è¡Œæˆ‘å•¦ ------\u003e å¦‚æœå»æ‰del f1é‚£ä¹ˆç»“æœåˆä¸ä¸€æ ·äº†ã€‚ class Foo: def __del__(self): print('æ‰§è¡Œæˆ‘å•¦') f1=Foo() print(\"------\u003e\") ç»“æœ ------\u003e æ‰§è¡Œæˆ‘å•¦ ","date":"2022-04-09","objectID":"/%E5%B0%81%E8%A3%85/:3:0","tags":["python"],"title":"å°è£…","uri":"/%E5%B0%81%E8%A3%85/"},{"categories":["å·¥å…·"],"content":"ftpåŸºæœ¬é…ç½® ç³»ç»Ÿï¼šcentos7 å®‰è£…vsftpd ã€ftpå®¢æˆ·ç«¯ yum install vsftpd -y yum install ftp -y [root@localhost vsftpd]# rpm -qa | grep ftp vsftpd-sysvinit-3.0.2-29.el7_9.x86_64 vsftpd-3.0.2-29.el7_9.x86_64 ftp-0.17-67.el7.x86_64 é˜²ç«å¢™è®¾ç½® firewall-cmd --list-services //æŸ¥çœ‹é˜²ç«å¢™å…è®¸çš„æœåŠ¡ã€‚ firewall-cmd --add-service=ftp --permanent //æ°¸ä¹…å¼€æ”¾ftpæœåŠ¡ firewall-cmd --add-port=20/tcp --permanent firewall-cmd --add-port=21/tcp --permanent //å…è®¸å¤–ç½‘è®¿é—® firewall-cmd --reload //é‡æ–°è½½å…¥é…ç½® setsebool ftpd_full_access 1 //selinuxè®¾ç½® setsebool tftp_home_dir 1 åˆ›å»ºç”¨æˆ·ï¼Œç™»å½• useradd test passwd test ftp localhost #ftpæœ¬åœ°æµ‹è¯• [root@localhost vsftpd]# ftp localhost Trying ::1... ftp: connect to address ::1Connection refused Trying 127.0.0.1... Connected to localhost (127.0.0.1). 220 Welcome to blah FTP service. Name (localhost:root): test 331 Please specify the password. Password: 230 Login successful. Remote system type is UNIX. Using binary mode to transfer files. ftp\u003e å±€åŸŸç½‘æµ‹è¯•ï¼š è™šæ‹ŸæœºIP:10.4.7.140 ftpï¼š21è¢«åŠ¨æ¨¡å¼ æ¥ä¸‹æ¥åœ¨windowså¹³å°ç”¨FileZilla Clientè½¯ä»¶ç™»é™†. è¿æ¥æˆåŠŸï¼š ç³»ç»Ÿè´¦å·é»˜è®¤ç™»é™†æ˜¯åœ¨è´¦å·çš„å®¶ç›®å½•ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å…¶å®ƒç›®å½•ã€‚ åˆ°è¿™é‡Œï¼ŒåŸºæœ¬çš„vsftpdæ­å»ºæˆåŠŸã€‚ å¼€æœºè‡ªå¯vsftpd systemctl enable vsftpd ","date":"2022-04-02","objectID":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/:0:1","tags":["vsftp"],"title":"vsftpdç›¸å…³é…ç½®","uri":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"},{"categories":["å·¥å…·"],"content":"vsftpd è¢«åŠ¨æ¨¡å¼æ™®é€šç”¨æˆ·ç™»å½•é…ç½® ä¸»ç¨‹åºï¼š/usr/sbin/vsftpd ä¸»é…ç½®æ–‡ä»¶ï¼š/etc/vsftpd/vsftpd.conf æ•°æ®æ ¹ç›®å½•ï¼š/var/ftp å°±ç®—æ˜¯ç»éªŒä¸°å¯Œçš„è€æ‰‹ä¹Ÿä¼šåšå¥½å¤‡ä»½å·¥ä½œ cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf.bak anonymous_enable=NO //è®¾å®šä¸å…è®¸åŒ¿åè®¿é—® local_enable=YES //è®¾å®šæœ¬åœ°ç”¨æˆ·å¯ä»¥è®¿é—® write_enable=YES //è®¾å®šå¯ä»¥è¿›è¡Œå†™æ“ä½œ local_umask=022 //è®¾å®šä¸Šä¼ åæ–‡ä»¶çš„æƒé™æ©ç  anon_upload_enable=NO //ç¦æ­¢åŒ¿åç”¨æˆ·ä¸Šä¼  anon_mkdir_write_enable=NO //ç¦æ­¢åŒ¿åç”¨æˆ·å»ºç«‹ç›®å½• dirmessage_enable=YES //è®¾å®šå¼€å¯ç›®å½•æ ‡è¯­åŠŸèƒ½ xferlog_enable=YES //è®¾å®šå¼€å¯æ—¥å¿—è®°å½•åŠŸèƒ½ connect_from_port_20=YES //è®¾å®šç«¯å£20è¿›è¡Œæ•°æ®è¿æ¥(ä¸»åŠ¨æ¨¡å¼) chown_uploads=NO //è®¾å®šç¦æ­¢ä¸Šä¼ æ–‡ä»¶æ›´æ”¹å®¿ä¸» #chown_username=whoever xferlog_file=/var/log/xferlog //è®¾å®šVsftpdçš„æœåŠ¡æ—¥å¿—ä¿å­˜è·¯å¾„ã€‚ xferlog_std_format=YES //è®¾å®šæ—¥å¿—ä½¿ç”¨æ ‡å‡†çš„è®°å½•æ ¼å¼ã€‚ #idle_session_timeout=600 //è®¾å®šç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œè¿™é‡Œé»˜è®¤ #data_connection_timeout=120 //è®¾å®šç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œè¿™é‡Œé»˜è®¤ã€‚ #nopriv_user=ftptest async_abor_enable=YES //è®¾å®šæ”¯æŒå¼‚æ­¥ä¼ è¾“åŠŸèƒ½ã€‚ ascii_upload_enable=YES ascii_download_enable=YES //è®¾å®šæ”¯æŒASCIIæ¨¡å¼çš„ä¸Šä¼ å’Œä¸‹è½½åŠŸèƒ½ã€‚ ftpd_banner=Welcome to blah FTP service. //è®¾å®šVsftpdçš„ç™»é™†æ ‡è¯­ã€‚ #deny_email_enable=YES // (default follows) #banned_email_file=/etc/vsftpd/banned_emails chroot_local_user=YES chroot_list_enable=YES //ç¦æ­¢ç”¨æˆ·ç™»å‡ºè‡ªå·±çš„FTPä¸»ç›®å½•ã€‚ chroot_list_file=/etc/vsftpd/chroot_list //è¿™ä¸ªæ–‡ä»¶é‡Œçš„ç”¨æˆ·ä¸å—é™åˆ¶ï¼Œä¸é™åˆ¶åœ¨æœ¬ç›®å½•ã€‚ ls_recurse_enable=NO //ç¦æ­¢ç”¨æˆ·ç™»é™†FTPåä½¿ç”¨\"ls -R\"çš„å‘½ä»¤ã€‚ è¯¥å‘½ä»¤ä¼šå¯¹æœåŠ¡å™¨æ€§èƒ½é€ æˆå·¨å¤§å¼€é”€ã€‚ #listen=NO #listen_ipv6=YES userlist_enable=YES //è®¾å®šuserlist_fileä¸­çš„ç”¨æˆ·å°†ä¸å¾—ä½¿ç”¨FTPã€‚ tcp_wrappers=YES //è®¾å®šæ”¯æŒTCP Wrappers allow_writeable_chroot=YES //è¿™ä¸ªå¯ä»¥è§£å†³chrootæƒé™é—®é¢˜ pasv_enable=YES pasv_min_port=40000 pasv_max_port=40080 pasv_promiscuous=YES systemctl restart vsftpd //é‡å¯vsftpdæœåŠ¡ å¦‚æœç™»å½•å¤±è´¥æç¤º500ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºchroot_listæŠŠteståŠ è¿›åˆ—è¡¨ echo test \u003e\u003e /etc/vsftpd/chroot_list åˆ›å»ºå¦ä¸€ä¸ªç”¨æˆ·aaaã€‚ç›®å‰test å’Œaaaéƒ½å¯ä»¥ç™»å½•ftp ç”±äºteståŠ å…¥åˆ°äº†chroot_liståˆ—è¡¨ä¸­ï¼Œå¯ä»¥éšæ„åˆ‡æ¢ç›®å½•ã€‚è€Œaaaç”¨æˆ·ä¸åœ¨äº†åˆ—è¡¨ä¸­ï¼Œåªèƒ½åœ¨aaaç”¨æˆ·å®¶ç›®å½•ä¸­æ´»åŠ¨ï¼Œä¸èƒ½è‡ªç”±åˆ‡æ¢ç›®å½•ã€‚ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” è§£é‡Šï¼šchroot_local_user=YESå°†æ‰€æœ‰ç”¨æˆ·é™å®šåœ¨ä¸»ç›®å½•å†…ï¼Œchroot_list_enable=YESè¡¨ç¤ºè¦å¯ç”¨chroot_list_file, å› ä¸ºchroot_local_user=YESï¼Œå³å…¨ä½“ç”¨æˆ·éƒ½è¢«â€œé™å®šåœ¨ä¸»ç›®å½•å†…â€,æ‰€ä»¥æ€»æ˜¯ä½œä¸ºâ€œä¾‹å¤–åˆ—è¡¨â€çš„chroot_list_fileè¿™æ—¶åˆ—å‡ºçš„æ˜¯é‚£äº›ä¸ä¼šè¢«é™åˆ¶åœ¨ä¸»ç›®å½•ä¸‹çš„ç”¨æˆ·ã€‚ ","date":"2022-04-02","objectID":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/:0:2","tags":["vsftp"],"title":"vsftpdç›¸å…³é…ç½®","uri":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"},{"categories":["å·¥å…·"],"content":"vsftpd åŒ¿åç”¨æˆ·ç™»å½•é…ç½® å»ºç«‹è™šæ‹ŸFTPç”¨æˆ·æ•°æ®åº“æ–‡ä»¶ å»ºç«‹ä¸€ä¸ªè™šæ‹Ÿç”¨æˆ·åå•æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯æ¥è®°å½•vsftpdè™šæ‹Ÿç”¨æˆ·çš„ç”¨æˆ·åå’Œå£ä»¤çš„æ•°æ®æ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œç»™å®ƒå‘½åä¸ºvuser.listï¼Œä¿å­˜åœ¨/etc/vsftpd/ç›®å½•ä¸‹ã€‚ä¸€è¡Œè´¦å·ï¼Œä¸€è¡Œå¯†ç  $ vim vuser.list vuser 123456 å®‰è£…Berkeley DB #æœ‰db_load å‘½ä»¤å¯ä»¥å¿½ç•¥ã€‚ yum install libdb-utils-5.3.21-25.el7.x86_64 å®‰è£…ååœ¨/etc/vsftpd/ç›®å½•ä¸‹æ‰§è¡Œã€‚ db_load -T -t hash -f vuser.list vuser.db//ç”Ÿæˆç”¨æˆ·åŠ å¯†æ–‡ä»¶ chmod 600 vuser.db //æ•æ„Ÿæ–‡ä»¶é™åˆ¶åªå…è®¸å±ä¸»è¯»å†™ åˆ›å»ºè™šæ‹Ÿç”¨æˆ·åŠè™šæ‹Ÿç”¨æˆ·çš„å®¶ç›®å½• useradd -d /var/vusers -s /sbin/nologin vftp //åˆ›å»ºç³»ç»Ÿç”¨æˆ·vftpï¼Œå¹¶åˆ¶å®šå…¶å®¶ç›®å½•ä¸º/var/vusers chmod -Rf 755 /var/vusers/ //ä¿®æ”¹ç›®å½•çš„æƒé™ä½¿å¾—å…¶ä»–ç”¨æˆ·ä¹Ÿå¯ä»¥è®¿é—®ã€‚ å»ºç«‹æ”¯æŒè™šæ‹Ÿç”¨æˆ·çš„PAMè®¤è¯æ–‡ä»¶ vsftpdçš„pamæ–‡ä»¶åœ¨/etc/pam.d/ç›®å½•ä¸‹ï¼Œå…ˆåšå¤‡ä»½å·¥ä½œã€‚ cp vsftpd vsftpd.bak vim vsftpd é‡è¦ï¼šå…ˆæ³¨é‡Šæ‰æ‰€æœ‰çš„å†…å®¹åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š auth required /lib64/security/pam_userdb.so db=/etc/vsftpd/vuser //æ­¤å¥ç”¨äºæ£€æŸ¥ç”¨æˆ·å¯†ç ï¼Œæ•°æ®åº“æ–‡ä»¶ä¸è¦å†™åç¼€.db account required /lib64/security/pam_userdb.so db=/etc/vsftpd/vuser //æ­¤å¥ç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼Œæ•°æ®åº“æ”¯æŒè™šæ‹Ÿç”¨æˆ·çš„PAMè®¤è¯æ–‡ä»¶ã€‚ åœ¨vsftpd.confä¸­æ·»åŠ æ”¯æŒé…ç½® guest_enable=YES //å¼€å¯è™šæ‹Ÿç”¨æˆ·æ¨¡å¼ guest_username=vftp //æŒ‡å®šè™šæ‹Ÿç”¨æˆ·è´¦å· pam_service_name=vsftpd //æŒ‡å®špamæ–‡ä»¶ user_config_dir=/etc/vsftpd/vusers_profile //æŒ‡å®šè™šæ‹Ÿç”¨æˆ·çš„æƒé™é…ç½®ç›®å½•ã€‚ virtual_use_local_privs=NO //è™šæ‹Ÿç”¨æˆ·å’ŒåŒ¿åç”¨æˆ·æœ‰ç›¸åŒçš„æƒé™ ä¸ºè™šæ‹Ÿç”¨æˆ·è®¾ç½®ä¸åŒçš„æƒé™ã€‚ mkdir -p /etc/vsftpd/vusers_profile/æ–°å»ºè™šæ‹Ÿç”¨æˆ·ç›®å½• vim /etc/vsftpd/vusers_profile/vuser/æ–°å»ºè™šæ‹Ÿç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶åè¦å’Œä¸Šé¢çš„è™šæ‹Ÿç”¨æˆ·åå•é‡Œçš„è´¦å·åå­—å¯¹ç­‰ã€‚ mkdir -p /var/vusers/vuser/åˆ›å»ºè™šæ‹Ÿç”¨æˆ·å®¶ç›®å½• local_root=/var/vusers/vuser //è™šæ‹Ÿè´¦å·çš„å®¶ç›®å½• write_enable=YES anonymous_enable=NO local_umask=022 anon_upload_enable=YES //ä¸Šä¼ æƒé™ anon_mkdir_write_enable=YES //åˆ›å»ºæ–‡ä»¶å’Œç›®å½•çš„æƒé™ anon_other_write_enable=YES //åˆ é™¤æ–‡ä»¶å’Œç›®å½•çš„æƒé™ anon_world_readable_only=YES //å½“æ–‡ä»¶çš„â€œå…¶ä»–äººâ€æœ‰è¯»æƒé™çš„æ—¶å€™å¯ä»¥ä¸‹è½½ download_enable=YES //ä¸‹è½½æƒé™ ä¿å­˜é…ç½®ï¼Œé‡å¯æœåŠ¡ã€‚ systemctl restart vsftpd ç™»å½•æŸ¥çœ‹ï¼š æ­¤å¤„/æŒ‡çš„æ˜¯vuserç”¨æˆ·å®¶ç›®å½•è€Œä¸æ˜¯æ ¹ç›®å½•ã€‚ æœ¬å®éªŒä¸­åŒ¿åç”¨æˆ·ç™»å½•åæœ‰æŸ¥çœ‹ä¸‹è½½æƒé™ï¼Œæ²¡æœ‰åˆ›å»ºæ–‡ä»¶æƒé™ã€‚å¹¶ä¸”é™åˆ¶äº†åªèƒ½æŸ¥çœ‹åŒ¿åç”¨æˆ·çš„å®¶ç›®å½•ï¼Œä¸èƒ½åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ã€‚ vsftpdä¼ è¾“æ¨¡å¼ ä¸»åŠ¨æ¨¡å¼ï¼šæœåŠ¡ç«¯ä¸»åŠ¨è¿å®¢æˆ·ç«¯ åœ¨ä¸»åŠ¨æ¨¡å¼ä¸‹ï¼ŒFTPå®¢æˆ·ç«¯ä»ä»»æ„ç«¯å£5150ï¼ˆç«¯å£å·\u003e1023ï¼‰å‘èµ·ä¸€ä¸ªFTPè¯·æ±‚ï¼Œå¹¶æºå¸¦è‡ªå·±ç›‘å¬çš„ç«¯å£å·5151ï¼ˆå‘é€çš„ç«¯å£å·+1=ç›‘å¬ç«¯å£å·ï¼‰ï¼›éšåæœåŠ¡å™¨è¿”å›ç¡®è®¤ï¼Œç„¶åä»æœåŠ¡å™¨æœ¬åœ°çš„20ç«¯å£ä¸»åŠ¨å‘èµ·è¿æ¥è¯·æ±‚åˆ°å®¢æˆ·ç«¯çš„ç›‘å¬ç«¯å£5151ï¼Œæœ€åå®¢æˆ·ç«¯è¿”å›ç¡®è®¤ã€‚ è¢«åŠ¨æ¨¡å¼ï¼šå®¢æˆ·ç«¯ä¸»åŠ¨è¿æœåŠ¡ç«¯ åœ¨è¢«åŠ¨æ¨¡å¼ä¸­ï¼Œå‘½ä»¤è¿æ¥å’Œæ•°æ®è¿æ¥éƒ½ç”±å®¢æˆ·ç«¯æ¥å‘èµ·ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå®¢æˆ·ç«¯ç”¨éšæœºå‘½ä»¤ç«¯å£5150å‘æœåŠ¡å™¨çš„21å‘½ä»¤ç«¯å£å‘é€ä¸€ä¸ªPASVè¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨è¿”å›æ•°æ®ç«¯å£3267ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æˆ‘åœ¨å“ªä¸ªç«¯å£ç›‘å¬æ•°æ®è¿æ¥ã€‚ç„¶åå®¢æˆ·ç«¯å‘æœåŠ¡å™¨çš„ç›‘å¬ç«¯å£3268å‘èµ·æ•°æ®è¿æ¥ï¼Œæœ€åæœåŠ¡å™¨å›å¤ç¡®è®¤ã€‚ **vsftpdé»˜è®¤æ˜¯è¢«åŠ¨æ¨¡å¼ã€‚**æ‰€ä»¥å®¢æˆ·ç«¯è¦è®¾ç½®è¢«åŠ¨æ¨¡å¼è¿æ¥ï¼Œå¦‚æœåˆ°ç°åœ¨è¿˜æ²¡è¿æ¥æˆåŠŸçš„çœ‹å®¢æˆ·ç«¯æœ‰æ²¡æœ‰è®¾ç½®è¢«åŠ¨ä¼ è¾“æ¨¡å¼ã€‚ FTPå·¥ä½œåŸç†ä»‹ç» æ–‡ä»¶ä¼ è¾“åè®®ï¼šFile Transfer Protocol æ—©æœŸçš„ä¸‰ä¸ªåº”ç”¨çº§åè®®ä¹‹ä¸€ï¼ŒåŸºäºC/Sç»“æ„ æ•°æ®ä¼ è¾“æ ¼å¼ï¼šäºŒè¿›åˆ¶ï¼ˆé»˜è®¤ï¼‰å’Œæ–‡æœ¬ åŒé€šé“åè®®ï¼šå‘½ä»¤å’Œæ•°æ®è¿æ¥ ä¸¤ç§æ¨¡å¼ï¼šä»æœåŠ¡å™¨è§’åº¦ ä¸»åŠ¨(PORT style)ï¼šæœåŠ¡å™¨ä¸»åŠ¨è¿æ¥ å‘½ä»¤ï¼ˆæ§åˆ¶ï¼‰ï¼šå®¢æˆ·ç«¯ï¼šéšæœºport â€”\u003e æœåŠ¡å™¨ï¼š21/tcp æ•°æ®ï¼šå®¢æˆ·ç«¯ï¼šéšæœºport \u003câ€”æœåŠ¡å™¨ï¼š20/tcp è¢«åŠ¨(PASV style)ï¼šå®¢æˆ·ç«¯ä¸»åŠ¨è¿æ¥ å‘½ä»¤ï¼ˆæ§åˆ¶ï¼‰ï¼šå®¢æˆ·ç«¯ï¼šéšæœºport â€”\u003e æœåŠ¡å™¨ï¼š21/tcp æ•°æ®ï¼šå®¢æˆ·ç«¯ï¼šéšæœºport â€”\u003e æœåŠ¡å™¨ï¼šéšæœºport /tcp èŒƒä¾‹ï¼šæœåŠ¡å™¨è¢«åŠ¨æ¨¡å¼æ•°æ®ç«¯å£ 227 Entering Passive Mode (172,16,0,1,224,59) æœåŠ¡å™¨æ•°æ®ç«¯å£ä¸ºï¼š224*256+59 FTPæœåŠ¡çŠ¶æ€ç ï¼š 1XXï¼šä¿¡æ¯ 125ï¼šæ•°æ®è¿æ¥æ‰“å¼€ 2XXï¼šæˆåŠŸç±»çŠ¶æ€ 200ï¼šå‘½ä»¤OK 230ï¼šç™»å½•æˆåŠŸ 3XXï¼šè¡¥å……ç±» 331ï¼šç”¨æˆ·åOK 4XXï¼šå®¢æˆ·ç«¯é”™è¯¯ 425ï¼šä¸èƒ½æ‰“å¼€æ•°æ®è¿æ¥ 5XXï¼šæœåŠ¡å™¨é”™è¯¯ 530ï¼šä¸èƒ½ç™»å½• ç”¨æˆ·è®¤è¯ï¼š åŒ¿åç”¨æˆ·ï¼šftp,anonymous,å¯¹åº”Linuxç”¨æˆ·ftp â€‹ ç³»ç»Ÿç”¨æˆ·ï¼šLinuxç”¨æˆ·,ç”¨æˆ·/etc/passwd,å¯†ç /etc/shadow â€‹ è™šæ‹Ÿç”¨æˆ·ï¼šç‰¹å®šæœåŠ¡çš„ä¸“ç”¨ç”¨æˆ·ï¼Œç‹¬ç«‹çš„ç”¨æˆ·/å¯†ç æ–‡ä»¶ vsftpd è½¯ä»¶ä»‹ç» ç”± vsftpd åŒ…æä¾›ï¼Œä¸å†ç”±xinetdç®¡ç† ç”¨æˆ·è®¤è¯é…ç½®æ–‡ä»¶ï¼š/etc/pam.d/vsftpd å¯åŠ¨æœåŠ¡ç›¸å…³æ–‡ä»¶ï¼š /usr/lib/systemd/system/vsftpd.service /etc/rc.d/init.d/vsftpd é…ç½®æ–‡ä»¶ï¼š /etc/vsftpd/vsftpd.conf å¸®åŠ©ï¼šman 5 vsftpd.conf é…ç½®æ–‡ä»¶æ ¼å¼ï¼š option=value æ³¨æ„ï¼š= å‰åä¸è¦æœ‰ç©ºæ ¼ ç”¨æˆ·å’Œå…¶å…±äº«ç›®å½• åŒ¿åç”¨æˆ·ï¼ˆæ˜ å°„ä¸ºç³»ç»Ÿç”¨æˆ·ftp ï¼‰å…±äº«æ–‡ä»¶ä½ç½®ï¼š/var/ftp ç³»ç»Ÿç”¨æˆ·å…±äº«æ–‡ä»¶ä½ç½®ï¼šç”¨æˆ·å®¶ç›®å½• è™šæ‹Ÿç”¨æˆ·å…±äº«æ–‡ä»¶ä½ç½®ï¼šä¸ºå…¶æ˜ å°„çš„ç³»ç»Ÿç”¨æˆ·çš„å®¶ç›®å½• ","date":"2022-04-02","objectID":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/:0:3","tags":["vsftp"],"title":"vsftpdç›¸å…³é…ç½®","uri":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"},{"categories":["å·¥å…·"],"content":"æé«˜vsftpçš„è®¿é—®é€Ÿåº¦ vsftpè¿æ¥æ—¶å¾ˆæ…¢ï¼Œå› ä¸ºé»˜è®¤å¼€å¯äº†reverse_lookupï¼ˆåå‘è§£æï¼‰. åœ¨(vsftpd.conf)ä¸»æ–‡ä»¶ä¸­æ·»åŠ  reverse_lookup_enable=NO é‡å¯vsftpdæœåŠ¡ systemctl restart vsftpd ","date":"2022-04-02","objectID":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/:0:4","tags":["vsftp"],"title":"vsftpdç›¸å…³é…ç½®","uri":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"},{"categories":["å·¥å…·"],"content":"éœ€æ±‚ 1.è®¾ç«‹ç®¡ç†å‘˜ç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼ˆä¸Šä¼ ã€ä¸‹è½½ã€æ–‡ä»¶åˆ é™¤ï¼‰ã€‚ 2.å…¶ä»–ç”¨æˆ·åªå…è®¸ä¸‹è½½ï¼Œä¸å…è®¸ä¸Šä¼ ã€æ–‡ä»¶ä¿®æ”¹å’Œåˆ é™¤ã€‚ 3.ç¦æ­¢ä½¿ç”¨åŒ¿åç”¨æˆ·ç™»å½• ç”¨æˆ·å æƒé™è¯´æ˜ admin ç®¡ç†å‘˜ï¼Œå¯ä»¥ä¸Šä¼ ã€ä¸‹è½½ã€æ–°å»ºæ–‡ä»¶å¤¹ã€åˆ é™¤å’Œæ›´æ”¹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹åã€‚ upload å¯ä»¥ä¸Šä¼ ã€æ–°å»ºæ–‡ä»¶å¤¹ã€‚ä¸å¯ä»¥ä¸‹è½½ï¼Œä¸èƒ½åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œä¸èƒ½é‡å‘½ååŸæœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚ download åªèƒ½ä¸‹è½½ï¼Œä¸èƒ½è¿›è¡Œå…¶ä»–æ“ä½œã€‚ å®éªŒç¯å¢ƒ centos7.9 x86_64 ä»¥ä¸Šä¸‰ä¸ªè™šæ‹Ÿç”¨æˆ·å‡ä¸å…è®¸ç™»å½•ç³»ç»Ÿï¼Œå¹¶ä¸”ä½¿ç”¨ftpæ—¶ä¼šè¢«é”å®šåœ¨æŒ‡å®šç›®å½•å†…ä¸å¯è¿›å…¥ç³»ç»Ÿå…¶ä»–ç›®å½•ã€‚ å®‰è£…é…ç½®vsftpd yum -y install vsftpd cd /etc/vsftpd/ cp vsftpd.conf vsftpd.conf.bak #å…ˆå¤‡ä»½ æ·»åŠ ä¸€ä¸ªä¸èƒ½ç™»å½•ç³»ç»Ÿç”¨æˆ·ï¼Œç”¨æ¥åšè™šæ‹Ÿç”¨æˆ·æ˜ å°„ã€‚ useradd www2013 -s /sbin/nologin -d /home/www2013 passwd www2013 åˆ›å»ºè™šæ‹Ÿç”¨æˆ·åˆ—è¡¨ï¼Œåˆ†åˆ«æ˜¯uploadã€downloadå’Œadmin touch /etc/vsftpd/vu_list.txt cat \u003e\u003evu_list\u003c\u003ceof upload 111111 download 111111 admin 111111 eof æŸ¥çœ‹åˆ—è¡¨å†…å®¹ #cat /etc/vsftpd/vu_list.txt upload 111111 download 111111 admin 111111 åˆ›å»ºdbæ–‡ä»¶ ä¿å­˜è™šæ‹Ÿå¸å·å’Œå¯†ç çš„æ–‡æœ¬æ–‡ä»¶æ— æ³•è¢«ç³»ç»Ÿå¸å·ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦åˆ›å»ºç”¨äºç³»ç»Ÿè®¤è¯çš„dbæ–‡ä»¶ db_load -T -t hash -f /etc/vsftpd/vu_list.txt /etc/vsftpd/vu_list.db -T ç”¨äºè½»æ¾åœ°å°†æ–‡æœ¬æ–‡ä»¶å¯¼å…¥æ•°æ®åº“ã€‚ -t è¡¨ç¤ºæŒ‡å®šåº•å±‚è®¿é—®æ–¹æ³•ã€‚ hash æ˜¯æˆ‘ä»¬æŒ‡å®šçš„åº•å±‚è®¿é—®æ–¹æ³•ã€‚ -f è¡¨ç¤ºä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–ã€‚ æŒ‡å®šçš„æ–‡ä»¶æ˜¯vu_list.txt æˆ‘ä»¬æ­£åœ¨åˆ›å»ºæˆ–æ·»åŠ çš„æ•°æ®åº“æ˜¯vu_list.db æ³¨æ„ï¼šåˆ›å»ºdbæ–‡ä»¶éœ€è¦db4æ”¯æŒï¼Œå¦‚æœç³»ç»Ÿæ²¡å®‰è£…è¯·å®‰è£… yum -y install db4 db4-devel db4-utils ä¿®æ”¹dbæ–‡ä»¶çš„æƒé™ï¼Œä»¥å…è¢«éæ³•ç”¨æˆ·ä¿®æ”¹ chmod 600 /etc/vsftpd/vu_list.db å¹¶åˆ é™¤vu_list.txt æ–‡ä»¶ rm vu_list.txt æ·»åŠ æ–°ç”¨æˆ·æ—¶ï¼Œåªéœ€ä½¿ç”¨viæ–°å»ºä¸€ä¸ªvu_list.txt æ–‡ä»¶ï¼Œç„¶åé‡æ–°è¿è¡Œdb_loadå‘½ä»¤ï¼Œå³å¯å°†æ–°ç”¨æˆ·æ·»åŠ åˆ°æ•°æ®åº“ä¸­ã€‚ é…ç½®PAMæ–‡ä»¶ ç”±äºæœåŠ¡å™¨é€šè¿‡è°ƒç”¨ç³»ç»ŸPAMæ¨¡å—æ¥å¯¹å®¢æˆ·ç«¯è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹æŒ‡å®šçš„é…ç½®æ–‡ä»¶æ¥è°ƒæ•´è®¤è¯æ–¹å¼ã€‚PAMæ¨¡å—çš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š/etc/pam.d/,è¿™ä¸ªç›®å½•ä¸‹å­˜æ”¾åªè®¸å¤šä¸ç”¨æˆ·è®¤è¯æœ‰å…³çš„é…ç½®æ–‡ä»¶ã€‚ å¤‡ä»½åŸæ–‡ä»¶ cp /etc/pam.d/vsftpd /etc/pam.d/vsftpd.old ç¼–è¾‘vsftpdæ–‡ä»¶ï¼Œé™¤äº†#%PAM-1.0å…¶ä»–éƒ½æ³¨é‡Šæ‰ï¼Œç„¶åå†æ·»åŠ ã€‚ 32ä½ç³»ç»Ÿæ·»åŠ ï¼š auth required /lib/security/pam_userdb.so db=/etc/vsftpd/vu_list account required /lib/security/pam_userdb.so db=/etc/vsftpd/vu_list 64ä½ç³»ç»Ÿæ·»åŠ ï¼š auth required /lib64/security/pam_userdb.so db=/etc/vsftpd/vu_list account required /lib64/security/pam_userdb.so db=/etc/vsftpd/vu_list åˆ›å»ºè™šæ‹Ÿç”¨æˆ·é…ç½®æ–‡ä»¶ #åˆ›å»ºconfæ–‡ä»¶å¤¹ cd /etc/vsftpd mkdir conf cd conf #åˆ›å»ºadminç”¨æˆ·çš„é…ç½®æ–‡ä»¶ cat \u003e\u003eadmin\u003c\u003c EOF anon_world_readable_only=NO write_enable=YES anon_mkdir_write_enable=YES anon_other_write_enable=YES anon_upload_enable=YES EOF #åˆ›å»ºuploadç”¨æˆ·çš„é…ç½®æ–‡ä»¶ cat \u003e\u003eupload\u003c\u003c EOF write_enable=YES anon_upload_enable=YES anon_mkdir_write_enable=YES anon_world_readable_only=NO download_enable=NO EOF #åˆ›å»ºdownloadç”¨æˆ·çš„é…ç½®æ–‡ä»¶ cat \u003e\u003edownload\u003c\u003c EOF anon_world_readable_only=NO EOF ä¿®æ”¹vsftpd.confæ–‡ä»¶ vi vsftpd.conf #ä¿®æ”¹å†…å®¹å¦‚ä¸‹ anonymous_enable=NO local_enable=YES anon_mkdir_write_enable=NO dirmessage_enable=YES xferlog_enable=YES connect_from_port_20=YES chown_uploads=NO chroot_local_user=YES chroot_list_enable=YES chroot_list_file=/etc/vsftpd/chroot_list allow_writeable_chroot=YES xferlog_file=/var/log/vsftpd.log xferlog_std_format=YES nopriv_user=www2013 async_abor_enable=YES ascii_upload_enable=YES ascii_download_enable=YES ftpd_banner=Welcome to blah FTP service ^_^ ls_recurse_enable=NO listen=YES pam_service_name=vsftpd userlist_enable=YES tcp_wrappers=YES local_root=/home/www2013 guest_enable=YES guest_username=www2013 virtual_use_local_privs=YES user_config_dir=/etc/vsftpd/conf reverse_lookup_enable=NO æ³¨æ„ guest_usernameè¦å’Œä¹‹å‰å»ºç«‹çš„ä¸èƒ½ç™»é™†çš„ç³»ç»Ÿç”¨æˆ·åŒ¹é…ã€‚ chroot_list_enableå’Œchroot_local_userå–å€¼çš„ä¸åŒç»„åˆæƒ…å†µ å‚æ•° å–å€¼ å–å€¼ å–å€¼ å–å€¼ chroot_list_enable YES YES NO NO chroot_local_user YES NO YES NO æ„ä¹‰ æ–‡ä»¶ä¸­åˆ—å‡ºçš„ç”¨æˆ·æ ¹ç›®å½•ä¸ºç³»ç»Ÿæ ¹ç›®å½•ï¼Œå…¶å®ƒç”¨æˆ·æ ¹ç›®å½•ä¸ºè‡ªå·±ä¸»ç›®å½•ã€‚ æ–‡ä»¶ä¸­åˆ—å‡ºçš„ç”¨æˆ·æ ¹ç›®å½•ä¸ºè‡ªå·±ä¸»ç›®å½•ï¼Œå…¶å®ƒç”¨æˆ·æ ¹ç›®å½•ä¸ºç³»ç»Ÿæ ¹ç›®å½•ã€‚ å…¨éƒ¨ç”¨æˆ·æ ¹ç›®å½•éƒ½æ˜¯è‡ªå·±ä¸»ç›®å½•ã€‚ å…¨éƒ¨ç”¨æˆ·æ ¹ç›®å½•éƒ½æ˜¯ç³»ç»Ÿæ ¹ç›®å½•ã€‚ ç¦é”¢ç³»ç»Ÿç”¨æˆ· ç¦é”¢æ‰€æœ‰ç³»ç»Ÿç”¨æˆ·åœ¨å®¶ç›®å½•ä¸­ chroot_local_user=YES ç¦é”¢ç³»ç»Ÿç”¨æˆ·ï¼Œé»˜è®¤NOï¼Œå³ä¸ç¦é”¢ã€‚ ç¦é”¢æˆ–ä¸ç¦é”¢ç‰¹å®šçš„ç³»ç»Ÿç”¨æˆ·åœ¨å®¶ç›®å½•ä¸­ï¼Œä¸ä¸Šé¢è®¾ç½®åŠŸèƒ½ç›¸å chroot_list_enable=YES #é»˜è®¤æ˜¯NO â€‹ chroot_list_file=/etc/vsftpd/chroot_list #é»˜è®¤å€¼ å½“chroot_local_user=YESå’Œchroot_list_enable=YESæ—¶ï¼Œåˆ™chroot_listä¸­ç”¨æˆ·ä¸ç¦é”¢ï¼Œå³ç™½åå• å½“chroot_local_user=NOå’Œchroot_list_enable=YESæ—¶ï¼Œåˆ™chroot_listä¸­ç”¨æˆ·ç¦é”¢ï¼Œå³é»‘åå• è®¾ç½®sslï¼Œæé«˜å®‰å…¨æ€§ã€‚ vi /etc/vsftpd/vsftpd.confæ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾ã€‚ rsa_cert_file=/etc/vsftpd/vsftpd.pem rsa_private_key_file=/etc/vsftpd/vsftpd.key ssl_enable=YES allow_anon_ssl=NO force_local_data_ssl=YES force_local_logins_ssl=YES ssl_tlsv1=YES ssl_sslv2=NO ssl_sslv3=NO pasv_min_port=7000 pasv_max_port=7500 è®¾ç½®RSAè¯ä¹¦ openssl req -x509 -nodes -days 3650 -newkey rsa:2048 -keyout /etc/vsftpd/vsftpd.key -out /etc/vsftpd/vsftpd.pem ç¬¬ä¸€ä¸ªå­—æ®µæ˜¯å›½å®¶ä»£ç å­—æ®µï¼Œå¡«å†™æ‚¨æ‰€åœ¨å›½å®¶çš„ä¸¤ä¸ªå­—æ¯ä»£ç ï¼š Country Name (2 letter code) [XX]: æ¥ä¸‹æ¥æ˜¯å·æˆ–çœï¼Œé€šè¿‡è¾“å…¥å…¨åè€Œä¸æ˜¯ç¼©å†™æ¥å¡«å†™ï¼š State or Province Name (full name) []: æ¥ä¸‹æ¥æ˜¯åœ°åŒºåç§°ã€‚è¿™æ˜¯ä½ çš„åŸå¸‚ï¼š Locality Name (eg, city) [Default City]: æ¥ä¸‹æ¥æ˜¯å…¬å¸æˆ–ç»„ç»‡åç§°ã€‚æ‚¨å¯ä»¥å°†æ­¤ç•™ç©ºæˆ–æ ¹æ®éœ€è¦å¡«å†™ï¼š Organization Name (eg, company) [Default Company Ltd","date":"2022-04-02","objectID":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/:0:5","tags":["vsftp"],"title":"vsftpdç›¸å…³é…ç½®","uri":"/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"},{"categories":["ç¼–ç¨‹"],"content":"æ–‡ä»¶å¤„ç†æµç¨‹ 1.æ‰“å¼€æ–‡ä»¶ï¼Œå¾—åˆ°æ–‡ä»¶å¥æŸ„å¹¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ 2.é€šè¿‡å¥æŸ„å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œ 3.å…³é—­æ–‡ä»¶ ","date":"2022-03-31","objectID":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/:1:0","tags":["python"],"title":"pythonæ–‡ä»¶å¤„ç†","uri":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸¤ç§æ–‡ä»¶æ“ä½œæ–¹å¼ ç›´æ¥æ“ä½œï¼ˆéœ€è¦æ‰‹åŠ¨å…³é—­æ–‡ä»¶ï¼‰ #1. æ‰“å¼€æ–‡ä»¶ï¼Œå¾—åˆ°æ–‡ä»¶å¥æŸ„å¹¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ f=open('a.txt','r',encoding='utf-8') #é»˜è®¤æ‰“å¼€æ¨¡å¼å°±ä¸ºr #2. é€šè¿‡å¥æŸ„å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œ data=f.read() #3. å…³é—­æ–‡ä»¶ f.close() ä½¿ç”¨withå…³é”®å­—ï¼ˆæ¨èï¼è‡ªåŠ¨å…³é—­æ–‡ä»¶æ— éœ€æ‰‹åŠ¨æ“ä½œï¼‰ #å¯ç”¨ç”¨withåŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œç”¨é€—å·åˆ†éš”å¼€å³å¯ with open('a.txt','r',encoding='utf-8') as read_f,open('b.txt','w',encoding='utf-8') as write_f: data=read_f.read() write_f.write(data) æ³¨æ„ï¼šè‹¥è¦ä¿è¯ä¸ä¹±ç ï¼Œæ–‡ä»¶ä»¥ä»€ä¹ˆæ–¹å¼å­˜çš„ï¼Œå°±è¦ä»¥ä»€ä¹ˆæ–¹å¼æ‰“å¼€ã€‚ f=open('a.txt','r',encoding='utf-8') linuxé»˜è®¤ç¼–ç 'utf-8' windowsé»˜è®¤ç¼–ç  'gbk' ","date":"2022-03-31","objectID":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/:1:1","tags":["python"],"title":"pythonæ–‡ä»¶å¤„ç†","uri":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"},{"categories":["ç¼–ç¨‹"],"content":"python2ä¸­æ–‡ä»¶æ‰“å¼€ #é¦–å…ˆåœ¨python3ä¸­æ“ä½œæ–‡ä»¶åªæœ‰ä¸€ç§é€‰æ‹©ï¼Œé‚£å°±æ˜¯open() #è€Œåœ¨python2ä¸­åˆ™æœ‰ä¸¤ç§æ–¹å¼ï¼šfile()ä¸open() ä¸¤è€…éƒ½èƒ½å¤Ÿæ‰“å¼€æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œä¹Ÿå…·æœ‰ç›¸ä¼¼çš„ç”¨æ³•å’Œå‚æ•°ï¼Œä½†æ˜¯ï¼Œè¿™ä¸¤ç§æ–‡ä»¶æ‰“å¼€æ–¹å¼æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œfileä¸ºæ–‡ä»¶ç±»ï¼Œç”¨file()æ¥æ‰“å¼€æ–‡ä»¶ï¼Œç›¸å½“äºè¿™æ˜¯åœ¨æ„é€ æ–‡ä»¶ç±»ï¼Œè€Œç”¨open()æ‰“å¼€æ–‡ä»¶ï¼Œæ˜¯ç”¨pythonçš„å†…å»ºå‡½æ•°æ¥æ“ä½œï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨open()æ‰“å¼€æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œè€Œç”¨fileå½“åšä¸€ä¸ªç±»å‹ï¼Œæ¯”å¦‚type(f) is fileã€‚ ","date":"2022-03-31","objectID":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/:1:2","tags":["python"],"title":"pythonæ–‡ä»¶å¤„ç†","uri":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"},{"categories":["ç¼–ç¨‹"],"content":"æ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼ åŸºç¡€ æ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼æœ‰(é»˜è®¤ä¸ºæ–‡æœ¬æ¨¡å¼) rï¼Œåªè¯»æ¨¡å¼ã€é»˜è®¤æ¨¡å¼ï¼Œæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼Œæ–‡ä»¶å­˜åœ¨æ–‡ä»¶å†…æŒ‡é’ˆç›´æ¥è·³åˆ°æ–‡ä»¶å¼€å¤´,ä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ã€‘ wï¼Œåªå†™æ¨¡å¼ã€ä¸å¯è¯»ï¼›ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼›å­˜åœ¨åˆ™æ¸…ç©ºå†…å®¹,æ–‡ä»¶æŒ‡é’ˆè·‘åˆ°æ–‡ä»¶å¼€å¤´.ã€‘ aï¼Œä¹‹è¿½åŠ å†™æ¨¡å¼ã€ä¸å¯è¯»ï¼›ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼›å­˜åœ¨åˆ™åªè¿½åŠ å†…å®¹ï¼Œæ–‡ä»¶å­˜åœ¨ä¼šå°†æ–‡ä»¶æŒ‡é’ˆç›´æ¥ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ã€‘ å¼ºè°ƒ åœ¨æ–‡ä»¶ä¸å…³é—­çš„æƒ…å†µä¸‹,è¿ç»­çš„å†™å…¥ï¼Œåå†™çš„å†…å®¹ä¸€å®šè·Ÿåœ¨å‰å†™å†…å®¹çš„åé¢ã€‚ å¦‚æœé‡æ–°ä»¥wæ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œåˆ™ä¼šæ¸…ç©ºæ–‡ä»¶å†…å®¹ã€‚ aä¸wç›¸åŒä¸å¼‚åŒ ç›¸åŒç‚¹ï¼šåœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸å…³é—­çš„æƒ…å†µä¸‹ï¼Œè¿ç»­çš„å†™å…¥ï¼Œæ–°å†™çš„å†…å®¹æ€»ä¼šè·Ÿåœ¨å‰å†™çš„å†…å®¹ä¹‹å ä¸åŒç‚¹ï¼šä»¥ a æ¨¡å¼é‡æ–°æ‰“å¼€æ–‡ä»¶ï¼Œä¸ä¼šæ¸…ç©ºåŸæ–‡ä»¶å†…å®¹ï¼Œä¼šå°†æ–‡ä»¶æŒ‡é’ˆç›´æ¥ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ï¼Œæ–°å†™çš„å†…å®¹æ°¸è¿œå†™åœ¨æœ€åã€‚ å¯¹äºéæ–‡æœ¬æ–‡ä»¶ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨bæ¨¡å¼ï¼Œâ€œb\"è¡¨ç¤ºä»¥å­—èŠ‚çš„æ–¹å¼æ“ä½œï¼ˆè€Œæ‰€æœ‰æ–‡ä»¶ä¹Ÿéƒ½æ˜¯ä»¥å­—èŠ‚çš„å½¢å¼å­˜å‚¨çš„ï¼Œä½¿ç”¨è¿™ç§æ¨¡å¼æ— éœ€è€ƒè™‘æ–‡æœ¬æ–‡ä»¶çš„å­—ç¬¦ç¼–ç ã€å›¾ç‰‡æ–‡ä»¶çš„jgpæ ¼å¼ã€è§†é¢‘æ–‡ä»¶çš„aviæ ¼å¼ï¼‰ rb wb ab æ³¨ï¼šä»¥bæ–¹å¼æ‰“å¼€æ—¶ï¼Œè¯»å–åˆ°çš„å†…å®¹æ˜¯å­—èŠ‚ç±»å‹ï¼Œå†™å…¥æ—¶ä¹Ÿéœ€è¦æä¾›å­—èŠ‚ç±»å‹ï¼Œä¸èƒ½æŒ‡å®šç¼–ç  åœ¨å¹³æ—¶å·¥ä½œä¸­ï¼Œæˆ‘ä»¬åªå•çº¯ä½¿ç”¨r/w/aï¼Œè¦ä¹ˆåªè¯»ï¼Œè¦ä¹ˆåªå†™ï¼Œä¸€èˆ¬ä¸ç”¨å¯è¯»å¯å†™çš„æ¨¡å¼ã€‚ å¤§å‰æ: tbæ¨¡å¼å‡ä¸èƒ½å•ç‹¬ä½¿ç”¨,å¿…é¡»ä¸r/w/aä¹‹ä¸€ç»“åˆä½¿ç”¨ã€‚ tï¼ˆé»˜è®¤çš„ï¼‰ï¼šæ–‡æœ¬æ¨¡å¼ 1. è¯»å†™æ–‡ä»¶éƒ½æ˜¯ä»¥å­—ç¬¦ä¸²ä¸ºå•ä½çš„ 2. åªèƒ½é’ˆå¯¹æ–‡æœ¬æ–‡ä»¶ 3. å¿…é¡»æŒ‡å®šencodingå‚æ•° bï¼šäºŒè¿›åˆ¶æ¨¡å¼: 1.è¯»å†™æ–‡ä»¶éƒ½æ˜¯ä»¥bytes/äºŒè¿›åˆ¶ä¸ºå•ä½çš„ 2. å¯ä»¥é’ˆå¯¹æ‰€æœ‰æ–‡ä»¶ 3. ä¸€å®šä¸èƒ½æŒ‡å®šencodingå‚æ•° å¼ºè°ƒï¼šbæ¨¡å¼å¯¹æ¯”tæ¨¡å¼ 1ã€åœ¨æ“ä½œçº¯æ–‡æœ¬æ–‡ä»¶æ–¹é¢tæ¨¡å¼å¸®æˆ‘ä»¬çœå»äº†ç¼–ç ä¸è§£ç çš„ç¯èŠ‚ï¼Œbæ¨¡å¼åˆ™éœ€è¦æ‰‹åŠ¨ç¼–ç ä¸è§£ç ï¼Œæ‰€ä»¥æ­¤æ—¶tæ¨¡å¼æ›´ä¸ºæ–¹ä¾¿ã€‚ 2ã€é’ˆå¯¹éæ–‡æœ¬æ–‡ä»¶ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰ï¼‰åªèƒ½ä½¿ç”¨bæ¨¡å¼ã€‚ æ‹“å±• \"+\" è¡¨ç¤ºå¯ä»¥åŒæ—¶è¯»å†™æŸä¸ªæ–‡ä»¶ r+ï¼Œ è¯»å†™ã€å¯è¯»ï¼Œå¯å†™ã€‘ w+ï¼Œå†™è¯»ã€å¯è¯»ï¼Œå¯å†™ã€‘ a+ï¼Œ å†™è¯»ã€å¯è¯»ï¼Œå¯å†™ã€‘ xï¼Œ åªå†™æ¨¡å¼ã€ä¸å¯è¯»ï¼›ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå­˜åœ¨åˆ™æŠ¥é”™ã€‘ x+ ï¼Œå†™è¯»ã€å¯è¯»ï¼Œå¯å†™ã€‘ å›è½¦ä¸æ¢è¡Œ \\n æ¢è¡Œ \\r å›è½¦ ","date":"2022-03-31","objectID":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/:1:3","tags":["python"],"title":"pythonæ–‡ä»¶å¤„ç†","uri":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"},{"categories":["ç¼–ç¨‹"],"content":"æ“ä½œæ–‡ä»¶çš„æ–¹æ³• åŸºç¡€ f.read() #è¯»å–æ‰€æœ‰å†…å®¹,å…‰æ ‡ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ã€‚ f.readline() #è¯»å–ä¸€è¡Œå†…å®¹,å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬äºŒè¡Œé¦–éƒ¨ã€‚ f.readlines() #è¯»å–æ¯ä¸€è¡Œå†…å®¹,å­˜æ”¾äºåˆ—è¡¨ä¸­ã€‚ f.write('11111\\n222\\n') #é’ˆå¯¹æ–‡æœ¬æ¨¡å¼çš„å†™,éœ€è¦è‡ªå·±å†™æ¢è¡Œç¬¦ã€‚ f.writelines('11111\\n222\\n'.encode('utf-8')) #é’ˆå¯¹bæ¨¡å¼çš„å†™,éœ€è¦è‡ªå·±å†™æ¢è¡Œç¬¦ã€‚ f.writelines(['333\\n','444\\n']) #æ–‡ä»¶æ¨¡å¼ f.writelines([bytes('333\\n',encoding='utf-8'),'444\\n'.encode('utf-8')]) #bæ¨¡å¼ æ‹“å±• f.readable() #æ–‡ä»¶æ˜¯å¦å¯è¯» f.writeable() #æ–‡ä»¶æ˜¯å¦å¯å†™ f.closed #æ–‡ä»¶æ˜¯å¦å…³é—­ f.encoding() #å¦‚æœæ–‡ä»¶æ‰“å¼€æ¨¡å¼ä¸ºb,åˆ™æ²¡æœ‰è¯¥å±æ€§ã€‚ f.flush() #ç«‹åˆ»å°†æ–‡ä»¶å†…å®¹ä»å†…å­˜åˆ·åˆ°ç¡¬ç›˜ f.name #æ˜¾ç¤ºæ–‡ä»¶å f.tell() #æ˜¾ç¤ºå½“å‰å…‰æ ‡ä½ç½® f.seek(0) #é‡ç½®å…‰æ ‡ä½ç½®,å…‰æ ‡ä¼šè·³åˆ°ç¬¬ä¸€è¡Œè¡Œé¦–ã€‚ ","date":"2022-03-31","objectID":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/:1:4","tags":["python"],"title":"pythonæ–‡ä»¶å¤„ç†","uri":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"},{"categories":["ç¼–ç¨‹"],"content":"æ–‡ä»¶å†…å…‰æ ‡ç§»åŠ¨ read(3) æ–‡ä»¶æ‰“å¼€æ–¹å¼ä¸ºæ–‡æœ¬æ¨¡å¼æ—¶ï¼Œä»£è¡¨è¯»å–3ä¸ªå­—ç¬¦ã€‚ æ–‡ä»¶æ‰“å¼€æ–¹å¼ä¸ºbæ¨¡å¼æ—¶ï¼Œä»£è¡¨è¯»å–3ä¸ªå­—èŠ‚ã€‚ å…¶ä½™çš„æ–‡ä»¶å†…å…‰æ ‡ç§»åŠ¨éƒ½æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½å¦‚seekï¼Œtellï¼Œtruncateã€‚ æ³¨æ„ seekæœ‰ä¸‰ç§ç§»åŠ¨æ–¹å¼0ï¼Œ1ï¼Œ2ï¼Œå…¶ä¸­1å’Œ2å¿…é¡»åœ¨bæ¨¡å¼ä¸‹è¿›è¡Œï¼Œä½†æ— è®ºå“ªç§æ¨¡å¼ï¼Œéƒ½æ˜¯ä»¥bytesä¸ºå•ä½ç§»åŠ¨çš„. truncateæ˜¯æˆªæ–­æ–‡ä»¶ï¼Œæ‰€ä»¥æ–‡ä»¶çš„æ‰“å¼€æ–¹å¼å¿…é¡»å¯å†™ï¼Œä½†æ˜¯ä¸èƒ½ç”¨wæˆ–w+ç­‰æ–¹å¼æ‰“å¼€ï¼Œå› ä¸ºé‚£æ ·ç›´æ¥æ¸…ç©ºæ–‡ä»¶äº†ï¼Œæ‰€ä»¥truncateè¦åœ¨r+æˆ–aæˆ–a+ç­‰æ¨¡å¼ä¸‹æµ‹è¯•æ•ˆæœã€‚ ä¹‹å‰æ–‡ä»¶å†…æŒ‡é’ˆçš„ç§»åŠ¨éƒ½æ˜¯ç”±è¯»/å†™æ“ä½œè€Œè¢«åŠ¨è§¦å‘çš„ï¼Œè‹¥æƒ³è¯»å–æ–‡ä»¶æŸä¸€ç‰¹å®šä½ç½®çš„æ•°æ®ï¼Œåˆ™éœ€è¦ç”¨f.seekæ–¹æ³•ä¸»åŠ¨æ§åˆ¶æ–‡ä»¶å†…æŒ‡é’ˆçš„ç§»åŠ¨ï¼Œè¯¦ç»†ç”¨æ³•å¦‚ä¸‹ï¼š f.seek(æŒ‡é’ˆç§»åŠ¨çš„å­—èŠ‚æ•°,æ¨¡å¼æ§åˆ¶): æ¨¡å¼æ§åˆ¶: 0: é»˜è®¤çš„æ¨¡å¼,è¯¥æ¨¡å¼ä»£è¡¨æŒ‡é’ˆç§»åŠ¨çš„å­—èŠ‚æ•°æ˜¯ä»¥æ–‡ä»¶å¼€å¤´ä¸ºå‚ç…§çš„ 1: è¯¥æ¨¡å¼ä»£è¡¨æŒ‡é’ˆç§»åŠ¨çš„å­—èŠ‚æ•°æ˜¯ä»¥å½“å‰æ‰€åœ¨çš„ä½ç½®ä¸ºå‚ç…§çš„ 2: è¯¥æ¨¡å¼ä»£è¡¨æŒ‡é’ˆç§»åŠ¨çš„å­—èŠ‚æ•°æ˜¯ä»¥æ–‡ä»¶æœ«å°¾çš„ä½ç½®ä¸ºå‚ç…§çš„ å¼ºè°ƒ:å…¶ä¸­0æ¨¡å¼å¯ä»¥åœ¨tæˆ–è€…bæ¨¡å¼ä½¿ç”¨,è€Œ1è·Ÿ2æ¨¡å¼åªèƒ½åœ¨bæ¨¡å¼ä¸‹ç”¨ 0æ¨¡å¼ # a.txtç”¨utf-8ç¼–ç ï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆabcå„å 1ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡â€œä½ å¥½â€å„å 3ä¸ªå­—èŠ‚ï¼‰ abcä½ å¥½ # 0æ¨¡å¼çš„ä½¿ç”¨ with open('a.txt',mode='rt',encoding='utf-8') as f: f.seek(3,0) # å‚ç…§æ–‡ä»¶å¼€å¤´ç§»åŠ¨äº†3ä¸ªå­—èŠ‚ print(f.tell()) # æŸ¥çœ‹å½“å‰æ–‡ä»¶æŒ‡é’ˆè·ç¦»æ–‡ä»¶å¼€å¤´çš„ä½ç½®ï¼Œè¾“å‡ºç»“æœä¸º3 print(f.read()) # ä»ç¬¬3ä¸ªå­—èŠ‚çš„ä½ç½®è¯»åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¾“å‡ºç»“æœä¸ºï¼šä½ å¥½ # æ³¨æ„ï¼šç”±äºåœ¨tæ¨¡å¼ä¸‹ï¼Œä¼šå°†è¯»å–çš„å†…å®¹è‡ªåŠ¨è§£ç ï¼Œæ‰€ä»¥å¿…é¡»ä¿è¯è¯»å–çš„å†…å®¹æ˜¯ä¸€ä¸ªå®Œæ•´ä¸­æ–‡æ•°æ®ï¼Œå¦åˆ™è§£ç å¤±è´¥ with open('a.txt',mode='rb') as f: f.seek(6,0) print(f.read().decode('utf-8')) #è¾“å‡ºç»“æœä¸º: å¥½ 1æ¨¡å¼ 1æ¨¡å¼ with open('a.txt',mode='rb') as f: f.seek(3,1) # ä»å½“å‰ä½ç½®å¾€åç§»åŠ¨3ä¸ªå­—èŠ‚ï¼Œè€Œæ­¤æ—¶çš„å½“å‰ä½ç½®å°±æ˜¯æ–‡ä»¶å¼€å¤´ print(f.tell()) # è¾“å‡ºç»“æœä¸ºï¼š3 f.seek(4,1) # ä»å½“å‰ä½ç½®å¾€åç§»åŠ¨4ä¸ªå­—èŠ‚ï¼Œè€Œæ­¤æ—¶çš„å½“å‰ä½ç½®ä¸º3 print(f.tell()) # è¾“å‡ºç»“æœä¸ºï¼š7 ç»ƒä¹ ï¼šä½¿ç”¨seek()å®ç°shellä¸­tail -f ï¼ˆæ–‡ä»¶æ—¥å¿—è¿½åŠ åŠŸèƒ½ï¼‰ import time with open('access.log','rb') as f: f.seek(0, 2) while True: line = f.readline() if line: print(line.decode('utf-8')) else: time.sleep(0.2) ç»ƒä¹ ç¼–å†™æ–‡ä»¶copyå·¥å…· æ–¹æ³•1 src_file=input('æºæ–‡ä»¶è·¯å¾„: ').strip() dst_file=input('ç›®æ ‡æ–‡ä»¶è·¯å¾„: ').strip() with open(r'%s' %src_file,mode='rb') as read_f,open(r'%s' %dst_file,mode='wb') as write_f: for line in read_f: # print(line) write_f.write(line) æ–¹æ³•2 #ä»»æ„æ–‡ä»¶æ‹·è´ import sys #å¼•å…¥sysæ¨¡å— _, src_file, dst_file = sys.argv #ä¼ å‚ï¼Œ_è¡¨ç¤ºå ä½ç¬¦ã€‚ with open(src_file, 'rb') as read_f,\\ open(dst_file, 'wb') as write_f: for line in read_f: write_f.write(line) #print(sys.argv) #ä½¿ç”¨æ–¹å¼ python D:\\pccharmcode\\begin.py æºæ–‡ä»¶è·¯å¾„ ç›®çš„æ–‡ä»¶è·¯å¾„ ","date":"2022-03-31","objectID":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/:1:5","tags":["python"],"title":"pythonæ–‡ä»¶å¤„ç†","uri":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"},{"categories":["ç¼–ç¨‹"],"content":"æ–‡ä»¶çš„ä¿®æ”¹ æ–‡ä»¶çš„æ•°æ®æ˜¯å­˜æ”¾äºç¡¬ç›˜ä¸Šçš„ï¼Œå› è€Œåªå­˜åœ¨è¦†ç›–ã€ä¸å­˜åœ¨ä¿®æ”¹è¿™ä¹ˆä¸€è¯´ï¼Œæˆ‘ä»¬å¹³æ—¶çœ‹åˆ°çš„ä¿®æ”¹æ–‡ä»¶ï¼Œéƒ½æ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„æ•ˆæœï¼Œå…·ä½“çš„è¯´æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š æ–¹å¼ä¸€ï¼šå°†ç¡¬ç›˜å­˜æ”¾çš„è¯¥æ–‡ä»¶çš„å†…å®¹å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ï¼Œåœ¨å†…å­˜ä¸­æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä¿®æ”¹å®Œæ¯•åï¼Œå†ç”±å†…å­˜è¦†ç›–åˆ°ç¡¬ç›˜ï¼ˆwordï¼Œvimï¼Œnodpad++ç­‰ç¼–è¾‘å™¨ï¼‰ import os with open('a.txt') as read_f,open('.a.txt.swap','w') as write_f: data=read_f.read() #å…¨éƒ¨è¯»å…¥å†…å­˜,å¦‚æœæ–‡ä»¶å¾ˆå¤§,ä¼šå¾ˆå¡ data=data.replace('alex','SB') #åœ¨å†…å­˜ä¸­å®Œæˆä¿®æ”¹ write_f.write(data) #ä¸€æ¬¡æ€§å†™å…¥æ–°æ–‡ä»¶ os.remove('a.txt') os.rename('.a.txt.swap','a.txt') æ–¹å¼äºŒï¼šå°†ç¡¬ç›˜å­˜æ”¾çš„è¯¥æ–‡ä»¶çš„å†…å®¹ä¸€è¡Œä¸€è¡Œåœ°è¯»å…¥å†…å­˜ï¼Œä¿®æ”¹å®Œæ¯•å°±å†™å…¥æ–°æ–‡ä»¶ï¼Œæœ€åç”¨æ–°æ–‡ä»¶è¦†ç›–æºæ–‡ä»¶ import os with open('a.txt') as read_f,open('.a.txt.swap','w') as write_f: for line in read_f: #è¯» line=line.replace('alex','SB') #æ›¿æ¢ write_f.write(line) #å†™å…¥ os.remove('a.txt') os.rename('.a.txt.swap','a.txt') ","date":"2022-03-31","objectID":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/:1:6","tags":["python"],"title":"pythonæ–‡ä»¶å¤„ç†","uri":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"},{"categories":["ç¼–ç¨‹"],"content":"æ–‡ä»¶çš„é€è¡Œè¯»å–å¹¶æ‰“å°è¡Œå· f = open(\"test.txt\",\"r\") content = f.readlines() i = 1 for temp in content: print(\"%d:%s\"%(i,temp)) i += 1 è¾“å‡º 1:hello world! 2:hello world! 3:hello world! 4:hello world! 5:hello world! ","date":"2022-03-31","objectID":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/:1:7","tags":["python"],"title":"pythonæ–‡ä»¶å¤„ç†","uri":"/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"},{"categories":["é—®é¢˜"],"content":"æè¿°Linuxä¸‹è½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ« å®è·µï¼šå½“å‰æ‰€åœ¨è·¯å¾„/root å‡†å¤‡å·¥ä½œ echo 123 \u003e /tmpdisk/a.txt echo 123 \u003e /tmpdisk/b.txt mkdir -p /tmpdisk/ylink mkdir -p /tmpdisk/rlink åˆ†åˆ«åˆ›å»ºè½¯é“¾æ¥å’Œç¡¬é“¾æ¥ ln -s /tmpdisk/a.txt ra.txt ln /tmpdisk/b.txt yb.txt ln /tmpdisk/ylink ylink #åˆ›å»ºå¤±è´¥ï¼Œç¡¬é“¾æ¥ä¸å…è®¸æ–‡ä»¶å¤¹åˆ›å»ºã€‚ln: '/tmpdisk/ylink': hard link not allowed for directory ln -s /tmpdisk/rlink rlink æŸ¥çœ‹inodeèŠ‚ç‚¹ [root@43f873a76b81 ~]# ls -li total 8 84271555 -rw------- 1 root root 3302 May 31 2018 anaconda-ks.cfg 87108116 lrwxrwxrwx 1 root root 14 Mar 28 06:18 ra.txt -\u003e /tmpdisk/a.txt 87108117 lrwxrwxrwx 1 root root 14 Mar 28 06:18 rlink -\u003e /tmpdisk/rlink 1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 yb.txt [root@43f873a76b81 ~]# ls -li /tmpdisk/ total 8 1588982 -rw-r--r-- 1 root root 4 Mar 28 05:26 a.txt 1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 b.txt 1588941 drwxr-xr-x 2 root root 6 Mar 28 06:13 rlink 1588940 drwxr-xr-x 2 root root 6 Mar 28 06:13 ylink å‘ç°ç¡¬é“¾æ¥çš„åŸæ–‡ä»¶å’Œé“¾æ¥æ–‡ä»¶inodeä¸€è‡´ã€‚éƒ½ä¸º1588983ã€‚ è½¯é“¾æ¥ç›¸å½“äºå¿«æ·æ–¹å¼ ln -s æºæ–‡ä»¶è·¯å¾„ é“¾æ¥æ–‡ä»¶è·¯å¾„ é“¾æ¥æ–‡ä»¶è·¯å¾„--------\u003eæºæ–‡ä»¶è·¯å¾„ æ€»ç»“ï¼š é»˜è®¤ä¸å¸¦å‚æ•°çš„æƒ…å†µä¸‹ï¼Œlnåˆ›å»ºçš„æ˜¯ç¡¬é“¾æ¥ï¼Œå¸¦-så‚æ•°çš„lnå‘½ä»¤åˆ›å»ºçš„æ˜¯è½¯é“¾æ¥ã€‚ ç¡¬é“¾æ¥æ–‡ä»¶ä¸æºæ–‡ä»¶çš„inodeèŠ‚ç‚¹å·ç›¸åŒï¼Œè½¯é“¾æ¥æ–‡ä»¶çš„inodeèŠ‚ç‚¹å·ï¼Œä¸æºæ–‡ä»¶ä¸åŒã€‚ lnå‘½ä»¤ä¸èƒ½å¯¹ç›®å½•åˆ›å»ºç¡¬é“¾æ¥ï¼Œä½†å¯ä»¥åˆ›å»ºè½¯é“¾æ¥ã€‚å¯¹ç›®å½•çš„è½¯é“¾æ¥ä¼šç»å¸¸ä½¿ç”¨åˆ° åˆ é™¤è½¯é“¾æ¥æ–‡ä»¶ï¼Œå¯¹æºæ–‡ä»¶å’Œç¡¬é“¾æ¥æ–‡ä»¶æ—  ä»»ä½•å½±å“ã€‚ åˆ é™¤æ–‡ä»¶çš„ç¡¬é“¾æ¥æ–‡ä»¶ï¼Œå¯¹æºæ–‡ä»¶åŠè½¯é“¾æ¥æ–‡ä»¶æ— ä»»ä½•å½±å“ã€‚ åˆ é™¤é“¾æ¥æ–‡ä»¶çš„æºæ–‡ä»¶ï¼Œå¯¹ç¡¬é“¾æ¥æ–‡ä»¶æ— å½±å“ï¼Œä¼šå¯¼è‡´å…¶è½¯é“¾æ¥å¤±æ•ˆï¼ˆçº¢åº•ç™½å­—é—ªçƒï¼‰ã€‚ åŒæ—¶åˆ é™¤æºæ–‡ä»¶åŠå…¶ç¡¬é“¾æ¥æ–‡ä»¶ï¼Œæ•´ä¸ªæ–‡ä»¶æ‰ä¼šè¢«çœŸæ­£çš„åˆ é™¤ã€‚ å¾ˆå¤šç¡¬ä»¶è®¾å¤‡çš„å¿«ç…§åŠŸèƒ½ï¼Œä½¿ç”¨çš„å°±æ˜¯åˆ—æ–¯ç¡¬é“¾æ¥çš„åŸç† è½¯é“¾æ¥å¯ä»¥è·¨æ–‡ä»¶ç³»ç»Ÿï¼Œç¡¬é“¾æ¥ä¸å¯ä»¥è·¨æ–‡ä»¶ç³»ç»Ÿã€‚ ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:1:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"Linux å¦‚ä½•æŸ¥æ‰¾å…·æœ‰ç›¸åŒ inode å·çš„æ–‡ä»¶? ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:2:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"é€šè¿‡ inodeå·æŸ¥æ‰¾ find / -xdev -inum \u003cinode_num\u003e 2\u003e/dev/null find -L / -xdev -inum \u003cinode_num\u003e 2\u003e/dev/null ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:2:1","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"é€šè¿‡æ–‡ä»¶åæŸ¥æ‰¾ find / -xdev -samefile \u003cfile_name\u003e 2\u003e/dev/null find -L / -xdev -samefile \u003cfile_name\u003e 2\u003e/dev/null å…¶ä¸­ -xdev è¡¨ç¤ºä¸è·¨è¶Šæ–‡ä»¶ç³»ç»ŸæŸ¥æ‰¾ -L è¡¨ç¤ºè€ƒè™‘ç¬¦å·é“¾æ¥(è½¯é“¾æ¥) å®ä¾‹ æŸ¥æ‰¾æºæ–‡ä»¶ä¸º/tmpdisk/a.txtçš„é“¾æ¥æ–‡ä»¶ [root@43f873a76b81 ~]# find / -xdev -samefile /tmpdisk/b.txt /root/yb.txt /tmpdisk/b.txt [root@43f873a76b81 ~]# ll -i /root/yb.txt /tmpdisk/b.txt 1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 /root/yb.txt 1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 /tmpdisk/b.txt ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:2:2","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"linuxå¸¸è§çš„ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶éƒ½æœ‰å“ªäº›ï¼Œå„è‡ªçš„ç”¨é€”ï¼Ÿ /var/log/messages å†…æ ¸åŠå…¬å…±æ¶ˆæ¯æ—¥å¿— /var/log/cron è®¡åˆ’ä»»åŠ¡æ—¥å¿— /var/log/dmesg ç³»ç»Ÿå¼•å¯¼æ—¥å¿— /var/log/maillog é‚®ä»¶ç³»ç»Ÿæ—¥å¿— /var/log/secure è®°å½•ä¸è®¿é—®é™åˆ¶ç›¸å…³æ—¥å¿— /var/log/yum.log ä½¿ç”¨yumå®‰è£…è½¯ä»¶çš„æ—¥å¿— ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:3:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"å¸¸è§Linuxå¼€æœºè®¾ç½®æ–‡ä»¶ /etc/fstab å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½ /etc/initab å®šä¹‰å¼€æœºè¿›å…¥é»˜è®¤çº§åˆ«çš„é…ç½®æ–‡ä»¶ /etc/rc.local å®šä¹‰å¼€æœºè‡ªå®šä¹‰ä»»åŠ¡çš„é…ç½®æ–‡ä»¶ ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:4:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"è¯·æè¿°Linuxç³»ç»Ÿä¼˜åŒ–çš„12ä¸ªæ­¥éª¤ 1.ä¸ç”¨rootç›´æ¥ç™»é™†ç³»ç»Ÿæ”¹ç”¨æ™®é€šç”¨æˆ·ç™»å½•ã€‚ 2.ç¦æ­¢sshè¿œç¨‹ï¼Œå¯ä»¥æ›´æ”¹é»˜è®¤è¿œç¨‹è¿æ¥sshæœåŠ¡åŠç¦æ­¢rootè¿œç¨‹è¿æ¥ã€‚ vi /etc/ssh/sshd_config PermitRootLogin no Port 22 #æ”¹ä¸ºå…¶ä»–ç«¯å£ é‡å¯sshdæœåŠ¡ systemctl restart sshd.service 3.æ—¶é—´åŒæ­¥ï¼šå®šæ—¶æ›´æ–°æœåŠ¡å™¨æ—¶é—´ æ¯å¤©12ç‚¹åŒæ­¥ä¸€æ¬¡ã€‚ crontab -e 0 12 * * * * /usr/sbin/ntpdate 192.168.0.1 è®¾ç½®ntpå¼€æœºå¯åŠ¨å¹¶å¯åŠ¨ntp systemctl enable ntpd systemctl start ntpd å®šæ—¶ä»»åŠ¡éªŒè¯ https://crontab.guru/ 4.å…³é—­selinuxåŠiptables(iptableså·¥ä½œåœºæ™¯å¦‚æœ‰wan ip,ä¸€èˆ¬è¦æ‰“å¼€ï¼Œé«˜å¹¶å‘é™¤å¤–) iptablesæ˜¯firewalldçš„å­æ¨¡å—ã€‚ systemctl stop firewalld.service å…³é—­æœåŠ¡ systemctl status firewalld.service æŸ¥çœ‹æœåŠ¡çŠ¶æ€ systemctl disable firewalld.service è®¾ç½®å¼€æœºé»˜è®¤å…³é—­é˜²ç«å¢™ æ°¸ä¹…å…³é—­selinux /etc/selinux/config å°†SELINUX=enforcing æ”¹ä¸ºSELINUX=disabled ä¸´æ—¶å…³é—­ getenforce è·å–çŠ¶æ€ setenforce 0 å…³é—­ #0å…³é—­ï¼Œ1å¼€å¯ 5.é…ç½®yumæ›´æ–°æºï¼Œä»å›½å†…æ›´æ–°ä¸‹è½½å®‰è£…rpmåŒ…ã€‚ å¤‡ä»½ mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup ä¸‹è½½æ–°çš„ CentOS-Base.repo åˆ° /etc/yum.repos.d/ wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo æˆ–è€… curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo è¿è¡Œyum makecacheç”Ÿæˆç¼“å­˜ yum makecache 6.è°ƒæ•´æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡ï¼Œè¿›ç¨‹åŠæ–‡ä»¶çš„æ‰“å¼€éƒ½ä¼šæ¶ˆè€—æ–‡ä»¶æè¿°ç¬¦ã€‚ å†…æ ¸ï¼ˆkernelï¼‰åˆ©ç”¨æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorï¼‰æ¥è®¿é—®æ–‡ä»¶ã€‚æ–‡ä»¶æè¿°ç¬¦æ˜¯éè´Ÿæ•´æ•°ã€‚æ‰“å¼€ç°å­˜æ–‡ä»¶æˆ–æ–°å»ºæ–‡ä»¶æ—¶ï¼Œå†…æ ¸ä¼šè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚è¯»å†™æ–‡ä»¶ä¹Ÿéœ€è¦ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦æ¥æŒ‡å®šå¾…è¯»å†™çš„æ–‡ä»¶ã€‚é€šä¿—æ¥è®²ï¼Œå› ä¸ºlinuxä¸€åˆ‡çš†æ–‡ä»¶ï¼Œæ‰€ä»¥å ç”¨æ–‡ä»¶æè¿°ç¬¦è¶…è¿‡äº†ç³»ç»Ÿæˆ–è€…ç”¨æˆ·è¦æ±‚çš„æœ€å¤§å€¼ï¼Œå°±æ— æ³•å†æ‰“å¼€äº†ï¼Œæ–‡ä»¶æè¿°ç¬¦ä¸»è¦æ˜¯ç³»ç»Ÿçº§å’Œç”¨æˆ·çº§ã€‚æŸ¥çœ‹æ–¹å¼å¦‚ä¸‹ sysctl -a|grep fs.file-max æŸ¥çœ‹ç³»ç»Ÿçº§æ–‡ä»¶æè¿°ç¬¦æ•°é‡ ulimit -n æŸ¥çœ‹ç”¨æˆ·çº§æ–‡ä»¶æè¿°ç¬¦æ•°é‡ ç”¨æˆ·çº§é™åˆ¶ï¼šulimitå‘½ä»¤çœ‹åˆ°çš„æ˜¯ç”¨æˆ·çº§çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªç”¨æˆ·ç™»å½•åæ‰§è¡Œçš„ç¨‹åºå ç”¨æ–‡ä»¶æè¿°ç¬¦çš„æ€»æ•°ä¸èƒ½è¶…è¿‡è¿™ä¸ªé™åˆ¶ ç³»ç»Ÿçº§é™åˆ¶ï¼šsysctlå‘½ä»¤ä¸procæ–‡ä»¶ç³»ç»Ÿä¸­æŸ¥çœ‹åˆ°çš„æ•°å€¼æ˜¯ä¸€æ ·çš„ï¼Œè¿™å±äºç³»ç»Ÿçº§é™åˆ¶ï¼Œå®ƒæ˜¯é™åˆ¶æ‰€æœ‰ç”¨æˆ·æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦çš„æ€»æ•°. ä¿®æ”¹ç”¨æˆ·çº§æ–‡ä»¶æè¿°ç¬¦(éœ€è¦rootæƒé™æˆ–rootç”¨æˆ·) vi /etc/security/limits.confã€‚ä¿®æ”¹æ–‡ä»¶æè¿°ç¬¦ï¼Œåº”è¯¥æ³¨æ„å­—æ®µä¸‹æ˜¯å¦å­˜åœ¨nofileå­—æ®µï¼Œå¦‚æœå­˜åœ¨ç›´æ¥ä¿®æ”¹ï¼Œä¸å­˜åœ¨åœ¨æœ«å°¾æ·»åŠ ä¿å­˜å³å¯ã€‚ * hard nofile 4096 * soft nofile 2048 ä¿®æ”¹ç³»ç»Ÿçº§æ–‡ä»¶æè¿°ç¬¦(éœ€è¦rootæƒé™æˆ–rootç”¨æˆ·)ï¼š vi /etc/sysctl.conf æ‰¾åˆ°fs.file-maxï¼Œå°†fs.file-maxå€¼ä¿®æ”¹ï¼Œä¿å­˜å³å¯ã€‚ sysctl -p #åŠ è½½å†…æ ¸å‚æ•°ä½¿ä¿®æ”¹ç”Ÿæ•ˆ 7.å®šæ—¶è‡ªåŠ¨æ¸…ç†/var/spool/clientmquene/ç›®å½•åƒåœ¾æ–‡ä»¶ï¼Œé˜²æ­¢èŠ‚ç‚¹è¢«å æ»¡ï¼ˆc6.4é»˜è®¤æ²¡æœ‰Sendmailï¼Œå› æ­¤å¯ä»¥ä¸é…ã€‚ï¼‰ 8.ç²¾ç®€å¼€æœºå¯åŠ¨æœåŠ¡(crondã€sshdã€networkã€rsyslog) 9.Linuxå†…æ ¸å‚æ•°ä¼˜åŒ–/etc/sysctl.confï¼Œæ‰§è¡Œsysctl -Pç”Ÿæ•ˆã€‚ 10.æ›´æ”¹å­—ç¬¦é›†ï¼Œæ”¯æŒä¸­æ–‡ï¼Œä½†æ˜¯è¿˜æ˜¯å»ºè®®ä½¿ç”¨è‹±æ–‡ï¼Œé˜²æ­¢ä¹±ç é—®é¢˜å‡ºç°ã€‚linuxé»˜è®¤ç¼–ç ä¸ºutf-8 11.é”å®šå…³é”®ç³»ç»Ÿæ–‡ä»¶ chattr +i /etc/passwd /etc/shadow /etc/group /etc/gshadow /etc/inittab å¤„ç†ä»¥ä¸Šå†…å®¹åï¼ŒæŠŠchattræ”¹åï¼Œå°±æ›´å®‰å…¨äº†ã€‚ 12.æ¸…ç©º/etc/issueå»é™¤ç³»ç»ŸåŠå†…æ ¸ç‰ˆæœ¬ç™»å½•å‰çš„å±å¹•æ˜¾ç¤ºã€‚ ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:5:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"è¯·ç»™å‡ºæŸ¥çœ‹å½“å‰å“ªäº›åœ¨çº¿ç”¨æˆ·çš„Linuxå‘½ä»¤ w #æ˜¾ç¤ºç›®å‰ç³»ç»Ÿç™»å½•ç”¨æˆ· who #æ˜¾ç¤ºç›®å‰å·²ç™»é™†ç”¨æˆ·ä¿¡æ¯ last #åˆ—å‡ºå½“å‰ä¸è¿‡å»ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·ç›¸å…³ä¿¡æ¯ lastlog #æ£€æŸ¥æŸç‰¹å®šç”¨æˆ·ä¸Šæ¬¡ç™»å½•æ—¶é—´ whoami #æ‰“å°ä¸å½“å‰ç”Ÿæ•ˆçš„ç”¨æˆ·IDå…³è”çš„ç”¨æˆ·å finger #ç”¨æˆ·ä¿¡æ¯æŸ¥æ‰¾ç¨‹åº id #æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·çš„ç”¨æˆ·ä¿¡æ¯ä¸ç»„ä¿¡æ¯ ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:6:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"è¾“å‡ºé‡å®šå‘ç›¸å…³ /dev/nullæ˜¯ç‰¹æ®Šçš„å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œè¡¨ç¤ºé»‘æ´è®¾å¤‡æˆ–ç©ºè®¾å¤‡ \u003eæˆ–è€…1\u003e #è¾“å‡ºé‡å®šå‘ï¼šæŠŠå‰é¢è¾“å‡ºçš„ä¸œè¥¿è¾“å…¥åˆ°åé¢çš„æ–‡ä»¶ä¸­ï¼Œä¼šåˆ é™¤æ–‡ä»¶åŸæœ‰å†…å®¹ã€‚ \u003e\u003eæˆ–è€…1\u003e\u003e #è¿½åŠ é‡å®šå‘ï¼šæŠŠå‰é¢è¾“å‡ºçš„ä¸œè¥¿è¿½åŠ åˆ°åè¾¹çš„æ–‡ä»¶ä¸­ï¼Œä¸ä¼šåˆ é™¤æ–‡ä»¶åŸæœ‰å†…å®¹ã€‚ \u003cæˆ–è€…\u003c0 #è¾“å…¥é‡å®šå‘ï¼šè¾“å…¥é‡å®šå‘ç”¨äºæ”¹å˜å‘½ä»¤çš„è¾“å…¥ï¼ŒæŒ‡å®šè¾“å…¥å†…å®¹é‚£ä¸ªï¼Œåè·Ÿæ–‡ä»¶åã€‚ \u003c\u003cæˆ–è€…\u003c\u003c0 #è¾“å…¥é‡å®šå‘ï¼šåè·Ÿå­—ç¬¦ä¸²ï¼Œç”¨æ¥è¡¨ç¤ºâ€œè¾“å…¥ç»“æŸâ€ï¼Œä¹Ÿå¯ä»¥ç”¨ctrl+dæ¥ç»“æŸè¾“å…¥ã€‚ 2\u003e #é”™è¯¯é‡å®šå‘ï¼šæŠŠé”™è¯¯ä¿¡æ¯è¾“å…¥åˆ°åè¾¹çš„æ–‡ä»¶ä¸­ï¼Œä¼šåˆ é™¤æ–‡ä»¶åŸæœ‰å†…å®¹ã€‚ 2\u003e\u003e #é”™è¯¯è¿½åŠ é‡å®šå‘ï¼šæŠŠé”™è¯¯ä¿¡æ¯è¿½åŠ åˆ°åè¾¹çš„æ–‡ä»¶ä¸­ï¼Œä¸ä¼šåˆ é™¤æ–‡ä»¶åŸæœ‰å†…å®¹ã€‚ æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰: 0 ä½¿ç”¨ \u003cæˆ–è€…\u003c\u003c æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰: 1 ä½¿ç”¨ \u003eæˆ–è€…\u003e\u003eã€‚æ­£å¸¸çš„è¾“å‡º æ ‡å‡†é”™è¯¯è¾“å‡ºï¼ˆstderrï¼‰:2 ä½¿ç”¨2\u003e æˆ–è€…2\u003e\u003e ç‰¹æ®Šï¼š 2\u003e\u00261 å°±æ˜¯æŠŠæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼ˆ\u003e\u0026ï¼‰ \u003e/dev/null 2\u003e\u00261 ç­‰ä»·äº1\u003e/dev/null 2\u003e/dev/null ä¾‹å¦‚ï¼šæ‰¾åˆ°æ–‡ä»¶ï¼Œå¿½ç•¥é”™è¯¯è¾“å‡ºç»“æœã€‚ find / -name python3.6 2\u003e/dev/null /usr/bin/python3.6 /usr/lib/python3.6 /usr/lib64/python3.6 /usr/local/lib/python3.6 /usr/local/lib64/python3.6 ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:7:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"sedå¸¸è§ç”¨æ³• åˆ é™¤æ–‡ä»¶ra.txtçš„ç¬¬2è¡Œå†…å®¹ã€‚ sed -i '2d' ra.txt å°†æ–‡ä»¶yb.txtä¸­çš„5555æ”¹ä¸º8080 sed -i 's/5555/8080/g' yb.txt ä½¿ç”¨-eåŒæ—¶æ›´æ”¹å¤šä¸ªæ–‡ä»¶ã€‚ sed -i -e 's/6666/9999/g' a.txt b.txt ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:8:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"$0ã€dirnameå’Œã€basenameæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå…·ä½“ä¸¾ä¸ªä¾‹å­ã€‚ ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:9:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"z.shæ–‡ä»¶ #!/bin/bash echo \"#############\" echo \"# this is '$0' test#\" echo \"#############\" echo $0 echo echo \"###############\" echo \"# this is 'dirname' test#\" echo \"############@@#\" cd `dirname $0` \u0026\u0026 pwd echo echo \"###############\" echo \"# this is 'basename' test#\" echo \"####################\" echo `basename $0` æ‰§è¡Œç»“æœ ############# # this is 'z.sh' test# ############# z.sh ############### # this is 'dirname' test# ############@@# /tmpdisk ############### # this is 'basename' test# #################### z.sh æ€»ç»“ï¼š dirnameè·å–è„šæœ¬è·¯å¾„å basenameè·å–è„šæœ¬å $0è·å–è„šæœ¬åå’Œè„šæœ¬è·¯å¾„å ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:10:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"ç”¨nohupæŠŠä¸€ä¸ªè„šæœ¬æ”¾åå°è¿è¡Œ nohup sh test.sh \u003e filename 2\u003e\u00261 \u0026 ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:11:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"æœ‰1-9çš„æ•°å­—ï¼Œechoè¾“å‡º1-9çš„æ•°å­—æ—¶ï¼Œå±è”½0-5æ•°å­—å†è¾“å‡º echo '1234567890' | sed 's/[0-5]//g' ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:12:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["é—®é¢˜"],"content":"å¦‚ä½•ç”¨wgetå’Œcurlç›‘æ§webæ˜¯å¦æ­£å¸¸ wget å¸¸ç”¨å‘½ä»¤å‚æ•° --spider æ¨¡æ‹Ÿçˆ¬è™«çš„è¡Œä¸ºå»è®¿é—®ç½‘ç«™ï¼Œä½†ä¸ä¼šä¸‹è½½ç½‘é¡µ -q --quite å®‰é™çš„è®¿é—®ï¼Œç¦æ­¢è¾“å‡ºï¼Œç±»ä¼¼-o /dev/null -o --output-file=FILE è®°å½•åˆ°è¾“å‡ºæ–‡ä»¶ -T --timeout=SECONDS è®¿é—®ç½‘ç«™çš„è¶…æ—¶æ—¶é—´ -t -tries=NUMBER é‡è¯•æ¬¡æ•° curl å¸¸ç”¨å‘½ä»¤å‚æ•° -I/--headerã€€æ˜¾ç¤ºå“åº”å¤´ä¿¡æ¯ -m/--max-time\u003cseconds\u003e è®¿é—®è¶…æ—¶æ—¶é—´ -o/--output\u003cfile\u003e è®°å½•è®¿é—®ä¿¡æ¯åˆ°æ–‡ä»¶ -s/--silent é™é»˜æ¨¡å¼è®¿é—®ï¼Œä¸è¾“å‡ºä¿¡æ¯ -w/--write-output\u003cformat\u003e ä»¥å›ºå®šæ ¼å¼è¾“å‡ºï¼Œä¾‹å¦‚%{http_code},è¾“å‡ºçŠ¶æ€ç  wget [root@43f873a76b81 tmpdisk]# wget -T 5 -q -t 2 --spider www.qq.com [root@43f873a76b81 tmpdisk]# echo $? 0 curl [root@43f873a76b81 tmpdisk]# curl -o /dev/null -s -w %{http_code} https://www.baidu.com 200 ","date":"2022-03-28","objectID":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/:13:0","tags":["å¸¸è§é—®é¢˜"],"title":"å¸¸è§é—®é¢˜æ€»ç»“","uri":"/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"},{"categories":["ç¼–ç¨‹"],"content":"é¢å‘è¿‡ç¨‹ä¸é¢å‘å¯¹è±¡ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:1:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"é¢å‘è¿‡ç¨‹ æ ¸å¿ƒå°±æ˜¯è¿‡ç¨‹äºŒå­—ï¼Œè¿‡ç¨‹å³è§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œå°±æ˜¯å…ˆå¹²ä»€ä¹ˆå†å¹²ä»€ä¹ˆ åŸºäºè¯¥æ€æƒ³å†™ç¨‹åºå°±å¥½æ¯”åœ¨è®¾è®¡ä¸€æ¡æµæ°´çº¿ï¼Œæ˜¯ä¸€ç§æœºæ¢°å¼çš„æ€ç»´æ–¹å¼ ä¼˜ç‚¹ï¼šå¤æ‚çš„è¿‡ç¨‹æµç¨‹åŒ–ï¼Œè¿›è€Œç®€å•åŒ– ç¼ºç‚¹ï¼šæ‰©å±•æ€§å·® ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:1:1","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"é¢å‘å¯¹è±¡ æ ¸å¿ƒæ˜¯å¯¹è±¡äºŒå­—ï¼Œå¯¹è±¡æ˜¯ç‰¹å¾ä¸æŠ€èƒ½çš„ç»“åˆä½“ åŸºäºè¯¥æ€æƒ³ç¼–å†™ç¨‹åºå°±å¥½æ¯”åœ¨åˆ›é€ ä¸€ä¸ªä¸–ç•Œï¼Œä¸–ç•Œæ˜¯ç”±ä¸€ä¸ªä¸ªå¯¹è±¡ç»„æˆçš„ï¼Œæ˜¯ä¸€ç§â€œä¸Šå¸å¼â€ çš„æ€ç»´æ–¹å¼ ä¼˜ç‚¹ï¼šå¯æ‹“å±•æ€§å¼º ç¼ºç‚¹ï¼šç¼–ç¨‹å¤æ‚é«˜ï¼Œå®¹æ˜“å‡ºç°è¿‡åº¦è®¾è®¡ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:1:2","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ç±» å¯¹è±¡æ˜¯ç‰¹å¾ä¸æŠ€èƒ½çš„ç»“åˆä½“ï¼Œç±»å°±æ˜¯ä¸€ç³»åˆ—å¯¹è±¡ç›¸ä¼¼çš„ç‰¹å¾ä¸æŠ€èƒ½çš„ç»“åˆä½“ã€‚ åœ¨ç°å®ä¸–ç•Œä¸­ï¼šä¸€å®šæ˜¯ç°æœ‰çš„ä¸€ä¸ªä¸ªå…·ä½“å­˜åœ¨çš„å¯¹è±¡ï¼Œåæ€»ç»“å‡ºçš„ç±»ã€‚ åœ¨ç¨‹åºä¸­ï¼šä¸€å®šä¿è¯å…ˆå®šä¹‰ç±»ï¼Œåäº§ç”Ÿå¯¹è±¡ã€‚ ç±»ä½“ä»£ç åœ¨ç±»çš„å®šä¹‰é˜¶æ®µå°±ä¼šç«‹åˆ»æ‰§è¡Œã€‚ åœ¨ç¨‹åºä¸­ç‰¹å¾ç”¨å˜é‡æ ‡è¯†ï¼ŒæŠ€èƒ½ç”¨å‡½æ•°æ ‡è¯†ã€‚ å› è€Œç±»ä¸­æœ€å¸¸è§çš„æ— éæ˜¯ï¼šå˜é‡å’Œå‡½æ•°çš„å®šä¹‰ Studentæ˜¯ç±»åï¼Œschoolæ˜¯ç‰¹å¾ï¼Œdefå®šä¹‰çš„å‡½æ•°éƒ½æ˜¯æŠ€èƒ½ã€‚ class Student: school = 'taiyang' def learn(self): print('is learning') def sleep(self): print('is sleeping') def choose_course(self): print('choose course') print(Student.__dict__) æŸ¥çœ‹ print(Student.school) #æ•°æ®å±æ€§æ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«çš„ print(Student.learn) #å‡½æ•°å±æ€§æ˜¯ç»‘å®šç»™å¯¹è±¡ç”¨çš„ æ–°å¢ Student.country = 'china' print(Student.country) åˆ é™¤ del Student.country print(Student.country) æ³¨æ„ ç±»ä¸­å¯ä»¥æœ‰ä»»æ„pythonä»£ç ï¼Œè¿™äº›ä»£ç åœ¨ç±»å®šä¹‰é˜¶æ®µä¾¿ä¼šæ‰§è¡Œ å› è€Œä¼šäº§ç”Ÿæ–°çš„åç§°ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾ç±»çš„å˜é‡åä¸å‡½æ•°åï¼Œå¯ä»¥é€šè¿‡Student.__dict__æŸ¥çœ‹ å¯¹äºç»å…¸ç±»æ¥è¯´æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥å­—å…¸æ“ä½œç±»åç§°ç©ºé—´çš„åå­—ï¼ˆæ–°å¼ç±»æœ‰é™åˆ¶ï¼‰ï¼Œä½†pythonä¸ºæˆ‘ä»¬æä¾›ä¸“é—¨çš„.è¯­æ³•ã€‚ ç‚¹æ˜¯è®¿é—®å±æ€§çš„è¯­æ³•ï¼Œç±»ä¸­å®šä¹‰çš„åå­—ï¼Œéƒ½æ˜¯ç±»çš„å±æ€§ã€‚ ç¨‹åºä¸­ç±»çš„ç”¨æ³• .ä¸“é—¨ç”¨æ¥è®¿é—®å±æ€§ï¼Œæœ¬è´¨æ“ä½œçš„å°±æ˜¯__dict__ Student.school ç­‰äºç»å…¸ç±»çš„æ“ä½œStudent.__dict__['school'] Student.school='taiyang'ç­‰äºç»å…¸ç±»çš„æ“ä½œStudent.__dict__['school']=â€˜taiyangâ€™ Student.x=1ç­‰äºç»å…¸çš„ç±»çš„æ“ä½œStudent.__dict__['x']=1 del Student.xç­‰äºç»å…¸çš„ç±»çš„æ“ä½œStudent.__dict__.pop('x') pythonä¸­ç±»å†…ç½®çš„ç‰¹æ®Šå±æ€§ ç±»å.__name__# ç±»çš„åå­—(å­—ç¬¦ä¸²) ç±»å.__doc__# ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸² ç±»å.__base__# ç±»çš„ç¬¬ä¸€ä¸ªçˆ¶ç±»(åœ¨è®²ç»§æ‰¿æ—¶ä¼šè®²) ç±»å.__bases__# ç±»æ‰€æœ‰çˆ¶ç±»æ„æˆçš„å…ƒç»„(åœ¨è®²ç»§æ‰¿æ—¶ä¼šè®²) ç±»å.__dict__# ç±»çš„å­—å…¸å±æ€§ ç±»å.__module__# ç±»å®šä¹‰æ‰€åœ¨çš„æ¨¡å— ç±»å.__class__# å®ä¾‹å¯¹åº”çš„ç±»(ä»…æ–°å¼ç±»ä¸­) ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:1:3","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•ç»‘å®šåˆ°å¯¹è±¡ç‹¬æœ‰ç‰¹å¾ï¼Ÿ è°ƒç”¨ç±»çš„è¿‡ç¨‹åˆç§°ä¸ºå®ä¾‹åŒ– å¾—åˆ°ä¸€ä¸ªè¿”å›å€¼ï¼Œå³å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ã€‚ ç¤ºä¾‹ï¼š æ”¹å†™ï¼š class Student: school = 'taiyang' def __init__(self, name, sex, age): #åœ¨è°ƒç”¨ç±»æ—¶ä¼šè‡ªåŠ¨è§¦å‘æ‰§è¡Œã€‚ self.Name = name self.Sex = sex self.Age = age def learn(self): print('is learning') def sleep(self): print('is sleeping') def choose_course(self): print('choose course') #å®ä¾‹åŒ–ä¸‰ä¸ªå¯¹è±¡ stu1 = Student('jack', 'ç”·', 18) stu2 = Student('smith', 'ç”·', 28) stu3 = Student('john', 'å¥³', 30) #è°ƒç”¨å¯¹è±¡ç‰¹æœ‰å±æ€§ã€‚ print(stu1.Name) #jack print(stu2.Name) #smith ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:2:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"å±æ€§æŸ¥æ‰¾ä¸ç»‘å®šæ–¹æ³• class Student: school = 'taiyang' def learn(self, x, y): print('%s is learning' %self.Name) print(x, y) def sleep(self): print('is sleeping') def choose_course(self): print('choose course') def __init__(self, name, sex, age): self.Name = name self.Sex = sex self.Age = age #1.æŸ¥æ‰¾ä¸€ä¸ªå¯¹è±¡çš„å±æ€§é¡ºåºæ˜¯ï¼šå…ˆæ‰¾å¯¹è±¡è‡ªå·±çš„__dict__ï¼Œå†æ‰¾ç±»çš„__dict__ã€‚ stu1 = Student('jack', 'ç”·', 18) stu2 = Student('smith', 'ç”·', 28) stu3 = Student('john', 'å¥³', 30) print(stu1.__dict__) #{'Name': 'jack', 'Sex': 'ç”·', 'Age': 18} print(stu1.Name, stu1.Age, stu1.Sex) #jack 18 ç”· #2.ç±»çš„æ•°æ®å±æ€§æ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚ print(Student.school, id(Student.school)) #taiyang 2061253245552 print(stu1.school, id(stu1.school)) #taiyang 2061253245552 print(stu2.school, id(stu2.school)) #taiyang 2061253245552 print(stu3.school, id(stu3.school)) #taiyang 2061253245552 #3.ç±»ä¸­å®šä¹‰çš„å‡½æ•°æ˜¯ç»‘å®šç»™å¯¹è±¡ä½¿ç”¨çš„ã€‚ # ä¸åŒå¯¹è±¡å°±æ˜¯ä¸åŒç»‘å®šæ–¹æ³•ã€‚ # ç»‘å®šç»™è°ï¼Œå°±åº”è¯¥ç”±è°æ¥è°ƒç”¨,è°æ¥è°ƒç”¨å°±ä¼šæŠŠè°å½“ä½œç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™å¯¹åº”çš„å‡½æ•°ã€‚ print(Student.learn) #\u003cfunction Student.learn at 0x0000026B2F04F9D0\u003e print(stu1.learn) #\u003cbound method Student.learn of \u003c__main__.Student object at 0x0000026B2F05EFD0\u003e\u003e print(stu2.learn) #\u003cbound method Student.learn of \u003c__main__.Student object at 0x00000227AB11EF10\u003e\u003e print(stu3.learn) #\u003cbound method Student.learn of \u003c__main__.Student object at 0x00000227AB11ED00\u003e\u003e stu1.learn(1, 2) #ç­‰äºStudent.learn(stu1, 1, 2) stu2.learn(3, 4) stu3.learn(5, 6) è§£æï¼š stu1.learn #stu1å¯¹è±¡ç»‘å®šå…¬å…±å‡½æ•°å±æ€§learn Student.learn #Studentç±»è®¿é—®å…¬å…±å‡½æ•°å±æ€§learn å®ƒä»¬éƒ½å¯ä»¥åŠ æ‹¬å·è®¿é—®å…¬å…±å‡½æ•°å±æ€§learn pythonä¸­ä¸€åˆ‡çš†ä¸ºå¯¹è±¡ï¼Œä¸”python3ä¸­ç±»ä¸ç±»å‹æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œç±»å‹å°±æ˜¯ç±»ã€‚ #ç±»å‹dictå°±æ˜¯ç±»dict \u003e\u003e\u003e list \u003cclass 'list'\u003e #å®ä¾‹åŒ–çš„åˆ°3ä¸ªå¯¹è±¡l1,l2,l3 \u003e\u003e\u003e l1=list() \u003e\u003e\u003e l2=list() \u003e\u003e\u003e l3=list() #ä¸‰ä¸ªå¯¹è±¡éƒ½æœ‰ç»‘å®šæ–¹æ³•append,æ˜¯ç›¸åŒçš„åŠŸèƒ½,ä½†å†…å­˜åœ°å€ä¸åŒ \u003e\u003e\u003e l1.append \u003cbuilt-in method append of list object at 0x10b482b48\u003e \u003e\u003e\u003e l2.append \u003cbuilt-in method append of list object at 0x10b482b88\u003e \u003e\u003e\u003e l3.append \u003cbuilt-in method append of list object at 0x10b482bc8\u003e #æ“ä½œç»‘å®šæ–¹æ³•l1.append(3),å°±æ˜¯åœ¨å¾€l1æ·»åŠ 3,ç»å¯¹ä¸ä¼šå°†3æ·»åŠ åˆ°l2æˆ–l3 \u003e\u003e\u003e l1.append(3) \u003e\u003e\u003e l1 [3] \u003e\u003e\u003e l2 [] \u003e\u003e\u003e l3 [] #è°ƒç”¨ç±»list.append(l3,111)ç­‰åŒäºl3.append(111) \u003e\u003e\u003e list.append(l3,111) #l3.append(111) \u003e\u003e\u003e l3 [111] ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:3:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"å¯¹è±¡ä¹‹é—´çš„äº¤äº’ å°ç»ƒä¹ : class Garen: #å®šä¹‰è‹±é›„ç›–ä¼¦çš„ç±»ï¼Œä¸åŒçš„ç©å®¶å¯ä»¥ç”¨å®ƒå®ä¾‹å‡ºè‡ªå·±è‹±é›„; camp = 'demacia' #æ‰€æœ‰ç©å®¶çš„è‹±é›„(ç›–ä¼¦)çš„é˜µè¥éƒ½æ˜¯Demacia; def __init__(self,nickname,life_value,aggresivity): self.nickname=nickname #ä¸ºè‡ªå·±çš„ç›–ä¼¦èµ·ä¸ªåˆ«å; self.life_value=life_value #è‹±é›„éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å€¼; self.aggresivity=aggresivity #è‹±é›„éƒ½æœ‰è‡ªå·±çš„æ”»å‡»åŠ›; def attack(self,enemy): enemy.life_value-=self.aggresivity #æ ¹æ®è‡ªå·±çš„æ”»å‡»åŠ›ï¼Œæ”»å‡»æ•Œäººå°±å‡æ‰æ•Œäººçš„ç”Ÿå‘½å€¼ã€‚ class Riven: camp = 'Noxus' #æ‰€æœ‰ç©å®¶çš„è‹±é›„(é”é›¯)çš„é˜µè¥éƒ½æ˜¯Noxus; def __init__(self,nickname,life_value,aggresivity): self.nickname=nickname #ä¸ºè‡ªå·±çš„é”é›¯èµ·ä¸ªåˆ«å; self.life_value=life_value #è‹±é›„éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å€¼; self.aggresivity=aggresivity #è‹±é›„éƒ½æœ‰è‡ªå·±çš„æ”»å‡»åŠ›; def attack(self,enemy): #æ™®é€šæ”»å‡»æŠ€èƒ½ï¼Œenemyæ˜¯æ•Œäºº; enemy.life_value-=self.aggresivity #æ ¹æ®è‡ªå·±çš„æ”»å‡»åŠ›ï¼Œæ”»å‡»æ•Œäººå°±å‡æ‰æ•Œäººçš„ç”Ÿå‘½å€¼ã€‚ def fire(self,enemy): enemy.life_value-=100 #å®ä¾‹å‡ºä¿©è‹±é›„ g1=Garen('è‰ä¸›çŒ¥çç”·', 1000,100) r1=Riven('çŒ›ç”·é›¯é›¯',200,500) #äº¤äº’ print(r1.life_value) #æ”»å‡»ä¹‹å‰é”é›¯è¡€é‡ 200 g1.attack(r1) #ç›–ä¼¦æ”»å‡»é”é›¯ print(r1.life_value) #æ”»å‡»ä¹‹åé”é›¯å‰©ä½™è¡€é‡ 100 ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:4:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"æ€»ç»“ 1.ç«™çš„è§’åº¦ä¸åŒï¼Œå®šä¹‰å‡ºçš„ç±»æ˜¯æˆªç„¶ä¸åŒçš„ 2.ç°å®ä¸­çš„ç±»å¹¶ä¸å®Œå…¨ç­‰äºç¨‹åºä¸­çš„ç±»ï¼Œæ¯”å¦‚ç°å®ä¸­çš„å…¬å¸ç±»ï¼Œåœ¨ç¨‹åºä¸­æœ‰æ—¶éœ€è¦æ‹†åˆ†æˆéƒ¨é—¨ç±»ï¼Œä¸šåŠ¡ç±»ã€‚ 3.æœ‰æ—¶ä¸ºäº†ç¼–ç¨‹éœ€æ±‚ï¼Œç¨‹åºä¸­ä¹Ÿå¯èƒ½ä¼šå®šä¹‰ç°å®ä¸­ä¸å­˜åœ¨çš„ç±»ï¼Œæ¯”å¦‚ç­–ç•¥ç±»ï¼Œç°å®ä¸­å¹¶ä¸å­˜åœ¨ï¼Œä½†æ˜¯åœ¨ç¨‹åºä¸­å´æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„ç±»ã€‚ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:5:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ä»ä»£ç çº§åˆ«çœ‹é¢å‘å¯¹è±¡ #åœ¨æ²¡æœ‰å­¦ä¹ ç±»è¿™ä¸ªæ¦‚å¿µæ—¶ï¼Œæ•°æ®ä¸åŠŸèƒ½æ˜¯åˆ†ç¦»çš„ def exc1(host,port,db,charset): conn=connect(host,port,db,charset) conn.execute(sql) return xxx def exc2(host,port,db,charset,proc_name) conn=connect(host,port,db,charset) conn.call_proc(sql) return xxx #æ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦é‡å¤ä¼ å…¥ä¸€å †å‚æ•° exc1('127.0.0.1',3306,'db1','utf8','select * from tb1;') exc2('127.0.0.1',3306,'db1','utf8','å­˜å‚¨è¿‡ç¨‹çš„åå­—') #æˆ‘ä»¬èƒ½æƒ³åˆ°çš„è§£å†³æ–¹æ³•æ˜¯ï¼ŒæŠŠè¿™äº›å˜é‡éƒ½å®šä¹‰æˆå…¨å±€å˜é‡. HOST=â€˜127.0.0.1â€™ PORT=3306 DB=â€˜db1â€™ CHARSET=â€˜utf8â€™ def exc1(host,port,db,charset): conn=connect(host,port,db,charset) conn.execute(sql) return xxx def exc2(host,port,db,charset,proc_name) conn=connect(host,port,db,charset) conn.call_proc(sql) return xxx exc1(HOST,PORT,DB,CHARSET,'select * from tb1;') exc2(HOST,PORT,DB,CHARSET,'å­˜å‚¨è¿‡ç¨‹çš„åå­—') ä½†æ˜¯2çš„è§£å†³æ–¹æ³•ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼ŒæŒ‰ç…§2çš„æ€è·¯ï¼Œæˆ‘ä»¬å°†ä¼šå®šä¹‰ä¸€å¤§å †å…¨å±€å˜é‡ï¼Œè¿™äº›å…¨å±€å˜é‡å¹¶æ²¡æœ‰åšä»»ä½•åŒºåˆ†ï¼Œå³èƒ½å¤Ÿè¢«æ‰€æœ‰åŠŸèƒ½ä½¿ç”¨ï¼Œç„¶è€Œäº‹å®ä¸Šåªæœ‰HOSTï¼ŒPORTï¼ŒDBï¼ŒCHARSETæ˜¯ç»™exc1å’Œexc2è¿™ä¸¤ä¸ªåŠŸèƒ½ç”¨çš„ã€‚è¨€å¤–ä¹‹æ„ï¼šæˆ‘ä»¬å¿…é¡»æ‰¾å‡ºä¸€ç§èƒ½å¤Ÿå°†æ•°æ®ä¸æ“ä½œæ•°æ®çš„æ–¹æ³•ç»„åˆåˆ°ä¸€èµ·çš„è§£å†³æ–¹æ³•ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¯´çš„ç±»äº†. class MySQLHandler: def __init__(self,host,port,db,charset='utf8'): self.host=host self.port=port self.db=db self.charset=charset def exc1(self,sql): conn=connect(self.host,self.port,self.db,self.charset) res=conn.execute(sql) return res def exc2(self,sql): conn=connect(self.host,self.port,self.db,self.charset) res=conn.call_proc(sql) return res obj=MySQLHandler('127.0.0.1',3306,'db1') obj.exc1('select * from tb1;') obj.exc2('å­˜å‚¨è¿‡ç¨‹çš„åå­—') #æ”¹è¿› class MySQLHandler: def __init__(self,host,port,db,charset='utf8'): self.host=host self.port=port self.db=db self.charset=charset self.conn=connect(self.host,self.port,self.db,self.charset) def exc1(self,sql): return self.conn.execute(sql) def exc2(self,sql): return self.conn.call_proc(sql) obj=MySQLHandler('127.0.0.1',3306,'db1') obj.exc1('select * from tb1;') obj.exc2('å­˜å‚¨è¿‡ç¨‹çš„åå­—') ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:6:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ç»§æ‰¿ä¸æ´¾ç”Ÿ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:7:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Ÿ ç»§æ‰¿æ˜¯ä¸€ç§åˆ›å»ºæ–°ç±»çš„æ–¹å¼ï¼Œæ–°å»ºçš„ç±»å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªçˆ¶ç±»ï¼ˆpythonæ”¯æŒå¤šç»§æ‰¿ï¼‰ï¼Œçˆ¶ç±»åˆå¯ç§°ä½œåŸºç±»æˆ–è¶…ç±»ï¼Œæ–°å»ºçš„ç±»ç§°ä¸ºæ´¾ç”Ÿç±»æˆ–å­ç±»ã€‚ å­ç±»ä¼šâ€œé—ä¼ â€çˆ¶ç±»çš„å±æ€§ï¼Œä»è€Œè§£å†³ä»£ç é‡ç”¨çš„é—®é¢˜ã€‚ pythonä¸­ç±»çš„ç»§æ‰¿åˆ†ä¸ºï¼šå•ç»§æ‰¿å’Œå¤šç»§æ‰¿ class ParentClass1: #å®šä¹‰çˆ¶ç±» pass class ParentClass2: #å®šä¹‰çˆ¶ç±» pass class SubClass1(ParentClass1): #å•ç»§æ‰¿ï¼ŒåŸºç±»æ˜¯ParentClass1ï¼Œæ´¾ç”Ÿç±»æ˜¯SubClass pass class SubClass2(ParentClass1,ParentClass2): #pythonæ”¯æŒå¤šç»§æ‰¿ï¼Œç”¨é€—å·åˆ†éš”å¼€å¤šä¸ªç»§æ‰¿çš„ç±» pass ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:7:1","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"æŸ¥çœ‹ç»§æ‰¿ SubClass1.__bases__ #__base__åªæŸ¥çœ‹ä»å·¦åˆ°å³ç»§æ‰¿çš„ç¬¬ä¸€ä¸ªå­ç±»ï¼Œ__bases__åˆ™æ˜¯æŸ¥çœ‹æ‰€æœ‰ç»§æ‰¿çš„çˆ¶ç±» (\u003cclass '__main__.ParentClass1'\u003e,) SubClass2.__bases__ (\u003cclass '__main__.ParentClass1'\u003e, \u003cclass '__main__.ParentClass2'\u003e) æç¤ºï¼šå¦‚æœæ²¡æœ‰æŒ‡å®šåŸºç±»ï¼Œpythonçš„ç±»ä¼šé»˜è®¤ç»§æ‰¿objectç±»ï¼Œobjectæ˜¯æ‰€æœ‰pythonç±»çš„åŸºç±»ï¼Œä»–æä¾›äº†ä¸€äº›å¸¸è§çš„æ–¹æ³•ï¼ˆå¦‚__str__ï¼‰çš„å®ç°ã€‚ ParentClass1.__bases__ (\u003cclass 'object'\u003e,) ParentClass2.__bases__ (\u003cclass 'object'\u003e,) ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:7:2","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ç»å…¸ç±»ä¸æ–°å¼ç±» åœ¨python2 ä¸­ç±»åˆ†ä¸ºä¸¤ç§ï¼š 1.ç»å…¸ç±»: æŒ‡çš„æ˜¯æ²¡æœ‰ç»§æ‰¿objectç±»çš„ç±»ï¼Œä»¥åŠè¯¥ç±»çš„å­ç±»ã€‚ 2.æ–°å¼ç±»ï¼šæŒ‡çš„æ˜¯ç»§æ‰¿objectç±»çš„ç±»ï¼Œä»¥åŠè¯¥ç±»çš„å­ç±»ã€‚ åœ¨python3ä¸­ç±»ç»Ÿä¸€ä¸ºæ–°å¼ç±» ç»§æ‰¿æè¿°çš„æ˜¯å­ç±»å’Œçˆ¶ç±»ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯ä¸€ç§ä»€ä¹ˆæ˜¯ä»€ä¹ˆçš„å…³ç³»ã€‚è¦æ‰¾å‡ºè¿™ç§å…³ç³»ï¼Œå¿…é¡»å…ˆæŠ½è±¡å†ç»§æ‰¿ã€‚ æŠ½è±¡å³æŠ½å–ç±»ä¼¼æˆ–è€…è¯´æ¯”è¾ƒåƒçš„éƒ¨åˆ†ã€‚ ç»§æ‰¿ï¼šæ˜¯åŸºäºæŠ½è±¡çš„ç»“æœï¼Œé€šè¿‡ç¼–ç¨‹è¯­è¨€å»å®ç°å®ƒï¼Œè‚¯å®šæ˜¯å…ˆç»å†æŠ½è±¡è¿™ä¸ªè¿‡ç¨‹ï¼Œæ‰èƒ½é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å»è¡¨è¾¾å‡ºæŠ½è±¡çš„ç»“æ„ã€‚ æŠ½è±¡åªæ˜¯åˆ†æå’Œè®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªåŠ¨ä½œæˆ–è€…è¯´ä¸€ç§æŠ€å·§ï¼Œé€šè¿‡æŠ½è±¡å¯ä»¥å¾—åˆ°ç±»ã€‚ åœ¨å¼€å‘ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±»Aï¼Œç„¶ååˆæƒ³æ–°å»ºç«‹å¦å¤–ä¸€ä¸ªç±»Bï¼Œä½†æ˜¯ç±»Bçš„å¤§éƒ¨åˆ†å†…å®¹ä¸ç±»Açš„ç›¸åŒæ—¶ æˆ‘ä»¬ä¸å¯èƒ½ä»å¤´å¼€å§‹å†™ä¸€ä¸ªç±»Bï¼Œè¿™å°±ç”¨åˆ°äº†ç±»çš„ç»§æ‰¿çš„æ¦‚å¿µã€‚ é€šè¿‡ç»§æ‰¿çš„æ–¹å¼æ–°å»ºç±»Bï¼Œè®©Bç»§æ‰¿Aï¼ŒBä¼šâ€˜é—ä¼ â€™Açš„æ‰€æœ‰å±æ€§(æ•°æ®å±æ€§å’Œå‡½æ•°å±æ€§)ï¼Œå®ç°ä»£ç é‡ç”¨ã€‚ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:7:3","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ç»ƒä¹  å®šä¹‰ä¸¤ä¸ªç±»Studentç±»å’ŒTeacherç±»ï¼Œéƒ½æœ‰ç›¸åŒçš„æ•°æ®å±æ€§ï¼ˆéƒ½åœ¨åŒä¸€ä¸ªå­¦æ ¡ï¼‰ï¼Œä¹Ÿæœ‰ç›¸åŒçš„å‡½æ•°å±æ€§ã€‚å§“åã€æ€§åˆ«ã€å¹´é¾„ã€‚ class Student: school='qinghua' def __init__(self, name, sex, age): self.name=name self.sex=sex self.age=age def learn(self): print('%s is learing'%self.name) class Teacher: school='qinghua' def __init__(self, name, sex, age): self.name=name self.sex=sex self.age=age def teach(self): print('%s is teaching'%self.name) ä½¿ç”¨ç»§æ‰¿ï¼ŒæŠŠç›¸åŒéƒ¨åˆ†æå–å‡ºæ¥ï¼Œå•ç‹¬åšæˆçˆ¶ç±»ã€‚å­¦ç”Ÿå’Œè€å¸ˆç±»éƒ½ä½œä¸ºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰å±æ€§ã€‚ class People: school='qinghua' def __init__(self, name, sex, age): self.name=name self.sex=sex self.age=age class Student(People): def learn(self): print('%s is learing'%self.name) class Teacher(People): def teach(self): print('%s is teaching'%self.name) #åˆå§‹åŒ– stu1=Student('jack','man',18) teacher1=Teacher('john','woman',20) #Studentå’ŒTeacherä½œä¸ºå­ç±»ç»§æ‰¿äº†çˆ¶ç±»Peopleç±»çš„æ‰€æœ‰å±æ€§ã€‚å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚ print(stu1.__dict__) {'name': 'jack', 'sex': 'man', 'age': 18} ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:7:4","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"æ´¾ç”Ÿ å½“åœ¨çˆ¶ç±»ä¸­æ‰¾ä¸åˆ°æ‰€éœ€çš„å±æ€§æ—¶ï¼Œå­ç±»å¯ä»¥å®šä¹‰å±äºè‡ªå·±çš„ç‰¹å¾ã€‚ class People: school='qinghua' def __init__(self, name, sex, age): self.name=name self.sex=sex self.age=age def tell_info(self): print('\u003cåå­—:%s æ€§åˆ«:%s å¹´é¾„:%s\u003e '%(self.name, self.sex, self.age)) class Student(People): def learn(self): print('%s is learing'%self.name) def tell_info(self): print(\"æˆ‘æ˜¯å­¦ç”Ÿ:\", end='') print('\u003cåå­—:%s æ€§åˆ«:%s å¹´é¾„:%s\u003e '%(self.name,self.sex,self.age)) class Teacher(People): def teach(self): print('%s is teaching'%self.name) def tell_info(self): print(\"æˆ‘æ˜¯è€å¸ˆ:\", end='') print('\u003cåå­—:%s æ€§åˆ«:%s å¹´é¾„:%s\u003e '%(self.name,self.sex,self.age)) #åˆå§‹åŒ– stu1=Student('jack','man',18) teacher1=Teacher('john','woman',20) #è°ƒç”¨tell_info()å‡½æ•°å±æ€§ stu1.tell_info() teacher1.tell_info() æˆ‘æ˜¯å­¦ç”Ÿ:\u003cåå­—:jack æ€§åˆ«:man å¹´é¾„:18\u003e æˆ‘æ˜¯è€å¸ˆ:\u003cåå­—:john æ€§åˆ«:woman å¹´é¾„:20\u003e tell_infoå‡½æ•°å±æ€§æŸ¥æ‰¾é¡ºåº stu1å¯¹è±¡è‡ªå·±æœ‰æ²¡æœ‰--\u003estu1æ‰€åœ¨çš„ç±»ï¼ˆStudentï¼‰æœ‰æ²¡æœ‰--\u003eå‘ç°æœ‰ç›´æ¥è°ƒç”¨ã€‚ å¦‚æœæ²¡æœ‰--\u003eæŸ¥æ‰¾çˆ¶ç±»ï¼ˆPeopleï¼‰æœ‰æ²¡æœ‰ï¼ˆæœ‰ç›´æ¥è°ƒç”¨ï¼Œæ²¡æœ‰ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼‰ å¼‚å¸¸ï¼šAttributeError: 'Student' object has no attribute 'tell_info' ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:7:5","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"å­ç±»é‡ç”¨çˆ¶ç±»æ–¹æ³• åœ¨å­ç±»æ´¾ç”Ÿå‡ºçš„æ–°æ–¹æ³•ä¸­ï¼Œå¾€å¾€éœ€è¦é‡ç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š 1.â€œæŒ‡åé“å§“â€ï¼Œå³çˆ¶ç±»å.çˆ¶ç±»æ–¹æ³•()è·Ÿç»§æ‰¿æ²¡å…³ç³»ã€‚å’Œå‡½æ•°è°ƒç”¨ç±»ä¼¼ã€‚ Studentç±»ä¸­é™¤äº†ç»§æ‰¿çˆ¶ç±»çš„name sex age æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æ´¾ç”Ÿå‡ºè‡ªå·±çš„æ–°æ–¹æ³•course stu_id class People: school = 'qinghua' def __init__(self, name, sex, age): self.name = name self.sex = sex self.age = age def tell_info(self): print('\u003cåå­—:%s æ€§åˆ«:%s å¹´é¾„:%s\u003e '%(self.name, self.sex, self.age)) class Student(People): def __init__(self, name, sex, age, course, stu_id): People.__init__(self, name, sex, age) self.course = course self.stu_id = stu_id def learn(self): print(\"%s is learning.\"%(self.name)) def tell_info(self): print(\"æˆ‘æ˜¯å­¦ç”Ÿ: \", end='') People.tell_info(self) stu1 = Student('jack', 'man', 18,'python',1) stu1.tell_info() #ç»“æœ æˆ‘æ˜¯å­¦ç”Ÿ: \u003cåå­—:jack æ€§åˆ«:man å¹´é¾„:18\u003e 2.ä½¿ç”¨super()ï¼Œä¾èµ–äºç»§æ‰¿ã€‚ä¾å¾ªmroåˆ—è¡¨ä»å½“å‰ç±»çš„ä¸‹ä¸€ä¸ªç±»å¼€å§‹æŸ¥æ‰¾ã€‚ åœ¨python2ä¸­super(è‡ªå·±çš„ç±»å, self)ï¼Œè€Œåœ¨python3ä¸­super()å‡½æ•°ä¸­å¯ä»¥ä¸ä¼ å‚ã€‚ class People: school = 'qinghua' def __init__(self, name, sex, age): self.name = name self.sex = sex self.age = age def tell_info(self): print('\u003cåå­—:%s æ€§åˆ«:%s å¹´é¾„:%s\u003e '%(self.name, self.sex, self.age)) class Student(People): def __init__(self, name, sex, age, course, stu_id): super(Student, self).__init__(name, sex, age) self.course = course self.stu_id = stu_id def learn(self): print(\"%s is learning.\"%(self.name)) def tell_info(self): print(\"æˆ‘æ˜¯å­¦ç”Ÿ: \", end='') super(Student, self).tell_info() stu1 = Student('jack', 'man', 18,'python',1) stu1.tell_info() #ç»“æœ æˆ‘æ˜¯å­¦ç”Ÿ: \u003cåå­—:jack æ€§åˆ«:man å¹´é¾„:18\u003e ç¤ºä¾‹ã€‚é—®ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ class Foo: def f2(self): print(\"======\u003ef2\") def f1(self): print('Foo f1') super().f2() class Bar: def f2(self): print('Bar f2') class Sub(Foo, Bar): pass s=Sub() s.f1() è§£æï¼š å…ˆæŸ¥çœ‹å­ç±»Sub()çš„mroæ–¹æ³• print(Sub.mro()) #[\u003cclass '__main__.Sub'\u003e, \u003cclass '__main__.Foo'\u003e, \u003cclass '__main__.Bar'\u003e, \u003cclass 'object'\u003e] å¯»æ‰¾f1()æ—¶çš„é¡ºåº å¯¹è±¡s-\u003eå¯¹è±¡æ‰€åœ¨ç±»Sub-\u003eç±»Subå·¦ä¾§çˆ¶ç±»Foo-\u003eæ‰¾åˆ°f1(),å¹¶æ‰“å°'Foo f1'ã€‚é‡åˆ°super()ï¼Œsuper()éµå¾ªmroåˆ—è¡¨ç»§ç»­æŸ¥æ‰¾f2().å½“å‰åœ¨Fooç±»ã€‚-\u003eæ‰¾åˆ°Fooä¸‹ä¸€ä¸ªç±»Barä¸­æœ‰f2æ–¹æ³•ï¼Œæ‰“å°'Bar f2'-\u003eæŸ¥æ‰¾ç»“æŸ #æœ€ç»ˆç»“æœ Foo f1 Bar f2 å³ä½¿super()æ‰€åœ¨ç±»ä¸­æœ‰åŒåå‡½æ•°å±æ€§f2()ä¹Ÿä¸ä¼šè°ƒç”¨ï¼Œåªä¼šè°ƒç”¨å½“å‰æ‰€åœ¨ç±»çš„ä¸‹ä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•ã€‚ å³ä½¿æ²¡æœ‰ç›´æ¥ç»§æ‰¿å…³ç³»ï¼Œ`super`ä»ç„¶ä¼šæŒ‰ç…§`mro`ç»§ç»­å¾€åæŸ¥æ‰¾ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆsuperæ‰€åœ¨çš„ç±»æœ‰åŒåçš„f2å‡½æ•°ä¹Ÿä¸ä¼šè°ƒç”¨çš„åŸå› ã€‚ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:8:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ç»„åˆä¸é‡ç”¨ ç»„åˆæŒ‡çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªç±»ä¸­ä»¥å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ä½œä¸ºæ•°æ®å±æ€§ï¼Œç§°ä¸ºç±»çš„ç»„åˆã€‚ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:9:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ç»§æ‰¿ä¸ç»„åˆçš„åŒºåˆ« ç»§æ‰¿ï¼šä»€ä¹ˆæ˜¯ä»€ä¹ˆ ç»„åˆï¼šä»€ä¹ˆæœ‰ä»€ä¹ˆ ç»„åˆç¤ºä¾‹1 class People: school = 'qinghua' def __init__(self, name, sex, age): self.name = name self.sex = sex self.age = age def tell_info(self): print('\u003cåå­—:%s æ€§åˆ«:%s å¹´é¾„:%s\u003e '%(self.name, self.sex, self.age)) class Student(People): def __init__(self, name, sex, age, course, stu_id): People.__init__(self, name, sex, age) self.course = course self.stu_id = stu_id def learn(self): print(\"%s is learning.\"%(self.name)) def tell_info(self): print(\"æˆ‘æ˜¯å­¦ç”Ÿ: \", end='') People.tell_info(self) class Teacher(People): def __init__(self, name, sex, age, level, salary): People.__init__(self, name, sex, age) self.level = level self.salary = salary def teach(self): print(\"%s is teaching.\"%(self.name)) def tell_info(self): print('æˆ‘æ˜¯è€å¸ˆï¼š', end='') People.tell_info(self) class Date: def __init__(self, year, mon, day): self.year = year self.mon = mon self.day = day def tell_info(self): print('å‡ºç”Ÿæ—¥æœŸæ˜¯:\u003c%s-%s-%s\u003e'%(self.year, self.mon, self.day)) stu1 = Student('jack', 'man', 18,'python',1) date_obj1 = Date(1995, 10, 2) stu1.birth = date_obj1 teacher1 = Teacher('smith', 'women', 20, 10, 4000) date_obj2 = Date(1980, 1, 1) teacher1.birth = date_obj2 stu1.birth.tell_info() teacher1.birth.tell_info() è§£æï¼š Teacherç±»å’ŒStuentç±»éƒ½æœ‰å…±åŒçš„å±æ€§ç”Ÿæ—¥ï¼Œæ‰€ä»¥å•ç‹¬åˆ›å»ºDateç±»ã€‚ #åˆå§‹åŒ–Dateç±» date_obj1 = Date(1995, 10, 2) #å­¦ç”Ÿ1çš„ç”Ÿæ—¥æ˜¯date_obj1 stu1.birth = date_obj1 #è°ƒç”¨å­¦ç”Ÿ1çš„tell_infoæ–¹æ³• stu1.birth.tell_info() ç»„åˆç¤ºä¾‹2 class People: def __init__(self,name,age,sex): self.name=name self.age=age self.sex=sex class Course: def __init__(self,name,period,price): self.name=name self.period=period self.price=price def tell_info(self): print('\u003c%s %s %s\u003e' %(self.name,self.period,self.price)) class Teacher(People): def __init__(self,name,age,sex,job_title): People.__init__(self,name,age,sex) self.job_title=job_title self.course=[] self.students=[] class Student(People): def __init__(self,name,age,sex): People.__init__(self,name,age,sex) self.course=[] eg=Teacher('eg',18,'male','éœ¸é“é‡‘ç‰Œè®²å¸ˆ') s1=Student('ç‰›äºŒ',18,'female') python=Course('python','3mons',3000.0) linux=Course('linux','3mons',3000.0) #ä¸ºè€å¸ˆegå’Œå­¦ç”Ÿs1æ·»åŠ è¯¾ç¨‹ eg.course.append(python) eg.course.append(linux) s1.course.append(python) #ä¸ºè€å¸ˆegæ·»åŠ å­¦ç”Ÿs1 eg.students.append(s1) #æŸ¥çœ‹è€å¸ˆçš„è¯¾ç¨‹ for obj in eg.course: obj.tell_info() #ç»“æœ \u003cpython 3mons 3000.0\u003e \u003clinux 3mons 3000.0\u003e #æŸ¥çœ‹å­¦ç”Ÿçš„è¯¾ç¨‹ for i in s1.course: i.tell_info() #ç»“æœ \u003cpython 3mons 3000.0\u003e è§£æ: å­¦ç”Ÿé€‰è¯¾ä¹‹å‰è¯¾ç¨‹ä¸ºç©ºï¼Œè¯¾ç¨‹æœ‰Pythonå’ŒLinuxå¯ä»¥é€‰æ‹©ï¼Œå­¦ç”Ÿé€‰æ‹©Pythonã€‚ä¸ºå­¦ç”Ÿåˆ†é…å¯¼å¸ˆï¼Œæœ€åæŸ¥çœ‹å­¦ç”Ÿæ‰€é€‰çš„è¯¾ç¨‹ã€‚ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:9:1","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"æŠ½è±¡ç±» ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:10:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼Ÿ æŠ½è±¡ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»ï¼Œåªèƒ½è¢«ç»§æ‰¿ä¸èƒ½å®ä¾‹åŒ–ã€‚ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:10:1","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸ºä»€ä¹ˆè¦æœ‰æŠ½è±¡ç±»ï¼Ÿ å¦‚æœè¯´ç±»æ˜¯ä»ä¸€å †å¯¹è±¡ä¸­æŠ½å–ç›¸åŒçš„å†…å®¹è€Œæ¥çš„ï¼Œé‚£ä¹ˆæŠ½è±¡ç±»å°±æ˜¯ä»ä¸€ç±»ä¸­æŠ½å–ç›¸åŒçš„å†…å®¹è€Œæ¥çš„ï¼Œå†…å®¹åŒ…æ‹¬æ•°æ®å±æ€§å’Œå‡½æ•°å±æ€§ã€‚ ä»å®ç°è§’åº¦æ¥çœ‹ï¼ŒæŠ½è±¡ç±»ä¸æ™®é€šç±»çš„ä¸åŒä¹‹å¤„åœ¨äºï¼šæŠ½è±¡ç±»ä¸­åªèƒ½æœ‰æŠ½è±¡æ–¹æ³•ï¼ˆæ²¡æœ‰å®ç°åŠŸèƒ½ï¼‰ï¼Œè¯¥ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿ï¼Œä¸”å­ç±»å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•ã€‚è¿™ä¸€ç‚¹ä¸æ¥å£æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†å…¶å®æ˜¯ä¸åŒçš„ã€‚ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:10:2","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"åœ¨pythonä¸­å®ç°æŠ½è±¡ç±» import abc class Animal(metaclass=abc.ABCMeta): @abc.abstractmethod def eat(self): pass @abc.abstractmethod def run(self): pass class People(Animal): pass class pig(Animal): pass peol=People() #TypeError: Can't instantiate abstract class People with abstract methods eat, run è§£æï¼š å¼•ç”¨abcæ¨¡å—å®ç°javaä¸­æ¥å£åŠŸèƒ½ã€‚æŠ½è±¡åŒ–ï¼ˆAnimalï¼‰ç±»ä¸‹é¢çš„å­ç±»å¿…é¡»ä½¿ç”¨çˆ¶ç±»ï¼ˆAnimalï¼‰å®šä¹‰å¥½çš„åŠŸèƒ½ï¼Œåç§°ä¹Ÿä¸èƒ½æ”¹ã€‚ è¦åœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨è£…é¥°å™¨ï¼š@abstractmethodã€‚å†…ç½®abcæ¨¡å—åŒ…å«è¿™ä¸¤è€…ã€‚ ä½œç”¨æ˜¯å¼ºåˆ¶å­ç±»æ¥ä½¿ç”¨å®šä¹‰å¥½çš„åŠŸèƒ½ã€‚ å¦‚æœå­ç±»ä¸ä½¿ç”¨æŠ½è±¡ç±»ä¸­å®šä¹‰çš„åŠŸèƒ½ï¼Œå°†ä¸èƒ½è¿›è¡Œå®ä¾‹åŒ–ã€‚å¼‚å¸¸å¦‚ä¸Šæ®µä»£ç æ‰€ç¤ºã€‚ å®šä¹‰å¥½åŠŸèƒ½åå°±èƒ½å®ä¾‹åŒ–æ­£å¸¸è°ƒç”¨äº†ã€‚ import abc class Animal(metaclass=abc.ABCMeta): @abc.abstractmethod def eat(self): pass @abc.abstractmethod def run(self): pass class People(Animal): def eat(self): print(\"He is eatting\") def run(self): print(\"He is running\") class pig(Animal): pass peol=People() #å®ä¾‹åŒ– peol.eat() #è°ƒç”¨eat()ã€‚He is eatting peol.run() #è°ƒç”¨run()ã€‚He is running Linuxä¸­ä¸€åˆ‡çš†æ–‡ä»¶ã€‚ç”¨æŠ½è±¡ç±»å®šä¹‰ä¸€å¥—æ¨¡æ¿ã€‚ import abc class File(metaclass=abc.ABCMeta): @abc.abstractmethod def read(self): pass def write(self): pass class Disk(File): def read(self): print(\"disk read\") def write(self): print(\"disk write\") class Process(File): def read(self): print(\"process read\") def write(self): print(\"process write\") d=Disk p=Process d.read() d.write() ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:10:3","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ç»§æ‰¿çš„åŸç† å±æ€§çš„æŸ¥æ‰¾æœ‰ä¸¤ç§æ–¹æ³•ï¼šæ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆã€‚ python2ä¸­é»˜è®¤æ˜¯ç»å…¸ç±»ï¼ˆæ·±åº¦ä¼˜å…ˆï¼‰ï¼Œè€Œpython3ä¸­é»˜è®¤æ˜¯æ–°å¼ç±»ï¼ˆå¹¿åº¦ä¼˜å…ˆï¼‰ã€‚ class A(object): def test(self): print('from A') class B(A): def test(self): print('from B') class C(A): def test(self): print('from C') class D(B): def test(self): print('from D') class E(C): def test(self): print('from E') class F(D,E): # def test(self): # print('from F') pass f1=F() f1.test() print(F.__mro__) #åªæœ‰æ–°å¼æ‰æœ‰è¿™ä¸ªå±æ€§å¯ä»¥æŸ¥çœ‹çº¿æ€§åˆ—è¡¨ï¼Œç»å…¸ç±»æ²¡æœ‰è¿™ä¸ªå±æ€§ #(\u003cclass '__main__.F'\u003e, \u003cclass '__main__.D'\u003e, \u003cclass '__main__.B'\u003e, \u003cclass '__main__.E'\u003e, \u003cclass '__main__.C'\u003e, \u003cclass '__main__.A'\u003e, \u003cclass 'object'\u003e) #æ–°å¼ç±»ç»§æ‰¿é¡ºåº:F-\u003eD-\u003eB-\u003eE-\u003eC-\u003eA #ç»å…¸ç±»ç»§æ‰¿é¡ºåº:F-\u003eD-\u003eB-\u003eA-\u003eE-\u003eC #python3ä¸­ç»Ÿä¸€éƒ½æ˜¯æ–°å¼ç±» #pyhon2ä¸­æ‰åˆ†æ–°å¼ç±»ä¸ç»å…¸ç±» ä¸ºäº†å®ç°ç»§æ‰¿,pythonä¼šåœ¨MROåˆ—è¡¨ä¸Šä»å·¦åˆ°å³å¼€å§‹æŸ¥æ‰¾åŸºç±»,ç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…è¿™ä¸ªå±æ€§çš„ç±»ä¸ºæ­¢ã€‚ è€Œè¿™ä¸ªMROåˆ—è¡¨çš„æ„é€ æ˜¯é€šè¿‡ä¸€ä¸ªC3çº¿æ€§åŒ–ç®—æ³•æ¥å®ç°çš„ã€‚æˆ‘ä»¬ä¸å»æ·±ç©¶è¿™ä¸ªç®—æ³•çš„æ•°å­¦åŸç†,å®ƒå®é™…ä¸Šå°±æ˜¯åˆå¹¶æ‰€æœ‰çˆ¶ç±»çš„MROåˆ—è¡¨å¹¶éµå¾ªå¦‚ä¸‹ä¸‰æ¡å‡†åˆ™: 1.å­ç±»ä¼šå…ˆäºçˆ¶ç±»è¢«æ£€æŸ¥ 2.å¤šä¸ªçˆ¶ç±»ä¼šæ ¹æ®å®ƒä»¬åœ¨åˆ—è¡¨ä¸­çš„é¡ºåºè¢«æ£€æŸ¥ 3.å¦‚æœå¯¹ä¸‹ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªåˆæ³•çš„é€‰æ‹©,é€‰æ‹©ç¬¬ä¸€ä¸ªçˆ¶ç±»ã€‚ï¼ˆæŸ¥æ‰¾é¡ºåºéƒ½æ˜¯ä»å·¦åˆ°å³ï¼‰ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:11:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"å¤šæ€ä¸å¤šæ€æ€§ ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:12:0","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯å¤šæ€ï¼Ÿ åŒä¸€ç§äº‹ç‰©çš„ä¸åŒå½¢æ€ã€‚å¦‚ï¼šæ°´ã€‚æœ‰æ°´è’¸æ°”ã€å†°ã€è¿˜æœ‰æ¶²æ€æ°´ä¸‰ç§å½¢æ€ã€‚ peo=People() dog=Dog() pig=Pig() #peoã€dogã€pigéƒ½æ˜¯åŠ¨ç‰©,åªè¦æ˜¯åŠ¨ç‰©è‚¯å®šæœ‰talkæ–¹æ³• #äºæ˜¯æˆ‘ä»¬å¯ä»¥ä¸ç”¨è€ƒè™‘å®ƒä»¬ä¸‰è€…çš„å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹,è€Œç›´æ¥ä½¿ç”¨ peo.talk() dog.talk() pig.talk() #æ›´è¿›ä¸€æ­¥,æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥ä½¿ç”¨ def func(obj): obj.talk() ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:12:1","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"å¤šæ€çš„å¥½å¤„ 1.å¢åŠ äº†ç¨‹åºçš„çµæ´»æ€§ ä»¥ä¸å˜åº”ä¸‡å˜ï¼Œä¸è®ºå¯¹è±¡åƒå˜ä¸‡åŒ–ï¼Œä½¿ç”¨è€…éƒ½æ˜¯åŒä¸€ç§å½¢å¼å»è°ƒç”¨ï¼Œå¦‚func(animal) 2.å¢åŠ äº†ç¨‹åºé¢å¯æ‰©å±•æ€§ é€šè¿‡ç»§æ‰¿animalç±»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç±»ï¼Œä½¿ç”¨è€…æ— éœ€æ›´æ”¹è‡ªå·±çš„ä»£ç ï¼Œè¿˜æ˜¯ç”¨func(animal)å»è°ƒç”¨ã€‚ \u003e\u003e\u003e class Cat(Animal): #å±äºåŠ¨ç‰©çš„å¦å¤–ä¸€ç§å½¢æ€ï¼šçŒ« ... def talk(self): ... print('say miao') ... \u003e\u003e\u003e def func(animal): #å¯¹äºä½¿ç”¨è€…æ¥è¯´ï¼Œè‡ªå·±çš„ä»£ç æ ¹æœ¬æ— éœ€æ”¹åŠ¨ ... animal.talk() ... \u003e\u003e\u003e cat1=Cat() #å®ä¾‹å‡ºä¸€åªçŒ« \u003e\u003e\u003e func(cat1) #ç”šè‡³è¿è°ƒç”¨æ–¹å¼ä¹Ÿæ— éœ€æ”¹å˜ï¼Œå°±èƒ½è°ƒç”¨çŒ«çš„talkåŠŸèƒ½ say miao ''' è¿™æ ·æˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ªå½¢æ€Catï¼Œç”±Catç±»äº§ç”Ÿçš„å®ä¾‹cat1ï¼Œä½¿ç”¨è€…å¯ä»¥åœ¨å®Œå…¨ä¸éœ€è¦ä¿®æ”¹è‡ªå·±ä»£ç çš„æƒ…å†µä¸‹ã€‚ä½¿ç”¨å’Œäººã€ç‹—ã€çŒªä¸€æ ·çš„æ–¹å¼è°ƒç”¨cat1çš„talkæ–¹æ³•ï¼Œå³func(cat1) ''' ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:12:2","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"é¸­å­ç±»å‹ Pythonå´‡å°šé¸­å­ç±»å‹ï¼Œå³â€˜å¦‚æœçœ‹èµ·æ¥åƒã€å«å£°åƒè€Œä¸”èµ°èµ·è·¯æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­â€™ pythonç¨‹åºå‘˜é€šå¸¸æ ¹æ®è¿™ç§è¡Œä¸ºæ¥ç¼–å†™ç¨‹åºã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³ç¼–å†™ç°æœ‰å¯¹è±¡çš„è‡ªå®šä¹‰ç‰ˆæœ¬ï¼Œå¯ä»¥ç»§æ‰¿è¯¥å¯¹è±¡ ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªå¤–è§‚å’Œè¡Œä¸ºåƒï¼Œä½†ä¸å®ƒæ— ä»»ä½•å…³ç³»çš„å…¨æ–°å¯¹è±¡ï¼Œåè€…é€šå¸¸ç”¨äºä¿å­˜ç¨‹åºç»„ä»¶çš„æ¾è€¦åˆåº¦ã€‚ ä¾‹1ï¼šåˆ©ç”¨æ ‡å‡†åº“ä¸­å®šä¹‰çš„å„ç§â€˜ä¸æ–‡ä»¶ç±»ä¼¼â€™çš„å¯¹è±¡ï¼Œå°½ç®¡è¿™äº›å¯¹è±¡çš„å·¥ä½œæ–¹å¼åƒæ–‡ä»¶ï¼Œä½†ä»–ä»¬æ²¡æœ‰ç»§æ‰¿å†…ç½®æ–‡ä»¶å¯¹è±¡çš„æ–¹æ³•. #äºŒè€…éƒ½åƒé¸­å­,äºŒè€…çœ‹èµ·æ¥éƒ½åƒæ–‡ä»¶,å› è€Œå°±å¯ä»¥å½“æ–‡ä»¶ä¸€æ ·å»ç”¨ class TxtFile: def read(self): pass def write(self): pass class DiskFile: def read(self): pass def write(self): pass ä¾‹2ï¼šå…¶å®å¤§å®¶ä¸€ç›´åœ¨äº«å—ç€å¤šæ€æ€§å¸¦æ¥çš„å¥½å¤„ï¼Œæ¯”å¦‚Pythonçš„åºåˆ—ç±»å‹æœ‰å¤šç§å½¢æ€ï¼šå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå¤šæ€æ€§ä½“ç°å¦‚ä¸‹ #str,list,tupleéƒ½æ˜¯åºåˆ—ç±»å‹ s=str('hello') l=list([1,2,3]) t=tuple((4,5,6)) #æˆ‘ä»¬å¯ä»¥åœ¨ä¸è€ƒè™‘ä¸‰è€…ç±»å‹çš„å‰æä¸‹ä½¿ç”¨s,l,t s.__len__() l.__len__() t.__len__() len(s) len(l) len(t) ","date":"2022-03-27","objectID":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/:12:3","tags":["python"],"title":"ç±»å’Œå¯¹è±¡","uri":"/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯åºåˆ—åŒ–ï¼Ÿ æˆ‘ä»¬æŠŠå¯¹è±¡ï¼ˆå˜é‡ï¼‰ä»å†…å­˜ä¸­å˜æˆå¯å­˜å‚¨æˆ–ä¼ è¾“çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºåºåˆ—åŒ–ã€‚åœ¨Pythonä¸­å«picklingï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿè¢«ç§°ä¹‹ä¸ºserializationï¼Œmarshallingï¼Œflatteningç­‰ç­‰ï¼Œéƒ½æ˜¯ä¸€ä¸ªæ„æ€ã€‚ ","date":"2022-03-26","objectID":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/:1:0","tags":["python"],"title":"åºåˆ—åŒ–ä¸ååºåˆ—åŒ–","uri":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–ï¼Ÿ æŒä¹…ä¿å­˜çŠ¶æ€ å†…å­˜æ˜¯æ— æ³•æ°¸ä¹…ä¿å­˜æ•°æ®çš„ï¼Œå½“ç¨‹åºè¿è¡Œäº†ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬æ–­ç”µæˆ–è€…é‡å¯ç¨‹åºï¼Œå†…å­˜ä¸­å…³äºè¿™ä¸ªç¨‹åºçš„ä¹‹å‰ä¸€æ®µæ—¶é—´çš„æ•°æ®ï¼ˆæœ‰ç»“æ„ï¼‰éƒ½è¢«æ¸…ç©ºäº†ã€‚åœ¨æ–­ç”µæˆ–é‡å¯ç¨‹åºä¹‹å‰å°†ç¨‹åºå½“å‰å†…å­˜ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½ä¿å­˜ä¸‹æ¥ï¼ˆä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼‰ï¼Œä»¥ä¾¿äºä¸‹æ¬¡ç¨‹åºæ‰§è¡Œèƒ½å¤Ÿä»æ–‡ä»¶ä¸­è½½å…¥ä¹‹å‰çš„æ•°æ®ï¼Œç„¶åç»§ç»­æ‰§è¡Œï¼Œè¿™å°±æ˜¯åºåˆ—åŒ–ã€‚ è·¨å¹³å°æ•°æ®äº¤äº’ åºåˆ—åŒ–ä¹‹åï¼Œä¸ä»…å¯ä»¥æŠŠåºåˆ—åŒ–åçš„å†…å®¹å†™å…¥ç£ç›˜ï¼Œè¿˜å¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°åˆ«çš„æœºå™¨ä¸Šï¼Œå¦‚æœæ”¶å‘çš„åŒæ–¹çº¦å®šå¥½å®ç”¨ä¸€ç§åºåˆ—åŒ–çš„æ ¼å¼ï¼Œé‚£ä¹ˆä¾¿æ‰“ç ´äº†å¹³å°/è¯­è¨€å·®å¼‚åŒ–å¸¦æ¥çš„é™åˆ¶ï¼Œå®ç°äº†è·¨å¹³å°æ•°æ®äº¤äº’ã€‚ åè¿‡æ¥ï¼ŒæŠŠå˜é‡å†…å®¹ä»åºåˆ—åŒ–çš„å¯¹è±¡é‡æ–°è¯»åˆ°å†…å­˜é‡Œç§°ä¹‹ä¸ºååºåˆ—åŒ–ï¼Œå³unpicklingã€‚ ","date":"2022-03-26","objectID":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/:2:0","tags":["python"],"title":"åºåˆ—åŒ–ä¸ååºåˆ—åŒ–","uri":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•åºåˆ—åŒ–ä¹‹jsonå’Œpickle jsonååºåˆ—åŒ– å¦‚æœæˆ‘ä»¬è¦åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¹‹é—´ä¼ é€’å¯¹è±¡ï¼Œå°±å¿…é¡»æŠŠå¯¹è±¡åºåˆ—åŒ–ä¸ºæ ‡å‡†æ ¼å¼ï¼Œæ¯”å¦‚XMLï¼Œä½†æ›´å¥½çš„æ–¹æ³•æ˜¯åºåˆ—åŒ–ä¸ºJSONï¼Œå› ä¸ºJSONè¡¨ç¤ºå‡ºæ¥å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥è¢«æ‰€æœ‰è¯­è¨€è¯»å–ï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°å­˜å‚¨åˆ°ç£ç›˜æˆ–è€…é€šè¿‡ç½‘ç»œä¼ è¾“ã€‚JSONä¸ä»…æ˜¯æ ‡å‡†æ ¼å¼ï¼Œå¹¶ä¸”æ¯”XMLæ›´å¿«ï¼Œè€Œä¸”å¯ä»¥ç›´æ¥åœ¨Webé¡µé¢ä¸­è¯»å–ï¼Œéå¸¸æ–¹ä¾¿ã€‚ JSONè¡¨ç¤ºçš„å¯¹è±¡å°±æ˜¯æ ‡å‡†çš„JavaScriptè¯­è¨€çš„å¯¹è±¡ï¼ŒJSONå’ŒPythonå†…ç½®çš„æ•°æ®ç±»å‹å¯¹åº”å¦‚ä¸‹ï¼š jsonç±»å‹ pythonç±»å‹ {} dic [] list â€œstringâ€ str 1234.56 intæˆ–float true/false True/False null None å†…å­˜ä¸­ç»“æ„åŒ–çš„æ•°æ®-\u003eæ ¼å¼json-\u003eå­—ç¬¦ä¸²-\u003eä¿å­˜åˆ°æ–‡ä»¶ä¸­æˆ–åŸºäºç½‘ç»œä¼ è¾“ åºåˆ—åŒ– python-\u003ejson json.dumps() json.dump() ååºåˆ—åŒ– json-\u003epython json.loads() json.load() ","date":"2022-03-26","objectID":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/:3:0","tags":["python"],"title":"åºåˆ—åŒ–ä¸ååºåˆ—åŒ–","uri":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["ç¼–ç¨‹"],"content":"ç»ƒä¹  éœ€æ±‚1 æŠŠuser = {'name': 'jack', 'age': 20, 'sex': 'male'}åºåˆ—åŒ–ã€‚ä¿å­˜ä¸ºuser_new.json åºåˆ—åŒ– #1.ä½¿ç”¨dumps import json user = {'name': 'jack', 'age': 20, 'sex': 'male'} with open('user_new.json', 'w', encoding='utf-8') as f: f.write(json.dumps(user)) #ç»“æœ {\"name\": \"jack\", \"age\": 20, \"sex\": \"male\"} #2.ä½¿ç”¨dump import json user = {'name': 'jack', 'age': 20, 'sex': 'male'} json.dump(user, open('user_new.json', 'w', encoding='utf-8')) ä½¿ç”¨dumpså’Œä½¿ç”¨dumpæ•ˆæœä¸€æ ·ã€‚ éœ€æ±‚2ï¼š æŠŠåˆšåˆšåºåˆ—åŒ–åçš„æ–‡ä»¶user_new.jsonååºåˆ—åŒ–ï¼Œå¹¶æŸ¥è¯¢keyæ‰€å¯¹åº”çš„å€¼ã€‚ #ä½¿ç”¨loadsååºåˆ—åŒ– import json with open('user_new.json', 'r', encoding='utf-8') as f: user=json.loads(f.read()) print(user['name']) #ç»“æœï¼šjack #ä½¿ç”¨loadååºåˆ—åŒ– import json user=json.load(open('user_new.json', 'r', encoding='utf-8')) print(user['name']) #ç»“æœï¼šjack ä»¥ä¸Šéƒ½æ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ–‡ä»¶ï¼Œè‡ªå®šä¹‰çš„å­—ç¬¦ä¸²èƒ½ä¸èƒ½è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Ÿ s = '{\"Name\": \"jack\", \"Hobby\": \"play\", \"age\": 20}' print(json.loads(s)) #ç»“æœ {'Name': 'jack', 'Hobby': 'play', 'age': 20} æ³¨æ„ import json dct=\"{'1':111}\"#json ä¸è®¤å•å¼•å· dct=str({\"1\":111})#æŠ¥é”™,å› ä¸ºç”Ÿæˆçš„æ•°æ®è¿˜æ˜¯å•å¼•å·:{'one': 1} dct='{\"1\":\"111\"}' print(json.loads(dct)) æ€»ç»“ æ— è®ºæ•°æ®æ˜¯æ€æ ·åˆ›å»ºçš„ï¼Œåªè¦æ»¡è¶³jsonæ ¼å¼ï¼Œå°±å¯ä»¥json.loadså‡ºæ¥,ä¸ä¸€å®šéè¦dumpsçš„æ•°æ®æ‰èƒ½loads ","date":"2022-03-26","objectID":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/:3:1","tags":["python"],"title":"åºåˆ—åŒ–ä¸ååºåˆ—åŒ–","uri":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["ç¼–ç¨‹"],"content":"pickleååºåˆ—åŒ– jsonå¹¶ä¸æ˜¯æ‰€æœ‰ç±»å‹çš„æ•°æ®éƒ½èƒ½åºåˆ—åŒ–ã€‚æ¯”å¦‚é›†åˆç±»å‹ï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨pickleæ¨¡å—äº†ã€‚ pickleä¼šæŠŠæ‰€æœ‰ç±»å‹è½¬æ¢æˆbytesç±»å‹ã€‚ Pickleçš„é—®é¢˜å’Œæ‰€æœ‰å…¶ä»–ç¼–ç¨‹è¯­è¨€ç‰¹æœ‰çš„åºåˆ—åŒ–é—®é¢˜ä¸€æ ·ï¼Œå°±æ˜¯å®ƒåªèƒ½ç”¨äºPythonï¼Œå¹¶ä¸”å¯èƒ½ä¸åŒç‰ˆæœ¬çš„Pythonå½¼æ­¤éƒ½ä¸å…¼å®¹ï¼Œå› æ­¤ï¼Œåªèƒ½ç”¨Pickleä¿å­˜é‚£äº›ä¸é‡è¦çš„æ•°æ®ï¼Œä¸èƒ½æˆåŠŸåœ°ååºåˆ—åŒ–ä¹Ÿæ²¡å…³ç³»ã€‚ s={1,2,3,4,5} print(pickle.dumps(s)) #ç»“æœ b'\\x80\\x04\\x95\\x0f\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x8f\\x94(K\\x01K\\x02K\\x03K\\x04K\\x05\\x90.' å°†é›†åˆå­˜å…¥æ–‡ä»¶å†åºåˆ—åŒ– import pickle s = {1, 2, 3, 4, 5} #æ–¹å¼1 with open('s.plk', 'wb') as f: f.write(pickle.dumps(s)) #æ–¹å¼2 pickle.dump(s, open('s.plk', 'wb')) ååºåˆ—åŒ–æ–‡ä»¶ import pickle #æ–¹å¼1 with open('s.plk', 'rb') as f: s = pickle.loads(f.read()) print(s) #æ–¹å¼2 s = pickle.load(open('s.plk', 'rb')) print(s) ","date":"2022-03-26","objectID":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/:4:0","tags":["python"],"title":"åºåˆ—åŒ–ä¸ååºåˆ—åŒ–","uri":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["ç¼–ç¨‹"],"content":"shelveæ¨¡å— shelveæ¨¡å—æ¯”pickleæ¨¡å—ç®€å•ï¼Œåªæœ‰ä¸€ä¸ªopenå‡½æ•°ï¼Œè¿”å›ç±»ä¼¼å­—å…¸çš„å¯¹è±¡ï¼Œå¯è¯»å¯å†™;keyå¿…é¡»ä¸ºå­—ç¬¦ä¸²ï¼Œè€Œå€¼å¯ä»¥æ˜¯pythonæ‰€æ”¯æŒçš„æ•°æ®ç±»å‹ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶çš„åŒæ—¶ä¼šåˆ›å»º3ä¸ªåŒåæ–‡ä»¶ã€‚.bak .dat .dirç»“å°¾ã€‚ #åˆ›å»º import shelve f = shelve.open('db.sh1') f['stu1']={'name':'jack','age':20} f.close() #æŸ¥è¯¢ print(f['stu1']['name']) ","date":"2022-03-26","objectID":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/:5:0","tags":["python"],"title":"åºåˆ—åŒ–ä¸ååºåˆ—åŒ–","uri":"/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["ç¼–ç¨‹"],"content":"æ—¥å¿—æ¨¡å—è§’è‰² 1.Logger:äº§ç”Ÿæ—¥å¿— 2.Filter:å‡ ä¹ä¸ç”¨ 3.Handler: æ¥æ”¶Loggerä¼ è¿‡æ¥çš„æ—¥å¿—ï¼Œè¿›è¡Œæ—¥å¿—æ ¼å¼åŒ–ï¼Œå¯ä»¥æ‰“å°åˆ°ç»ˆç«¯ï¼Œä¹Ÿå¯ä»¥æ‰“å°åˆ°æ–‡ä»¶ 4.Formatterï¼šæ—¥å¿—æ ¼å¼ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:1:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ—¥å¿—æ¨¡å—ç›¸å…³è¯´æ˜ å¯åœ¨logging.basicConfig()å‡½æ•°ä¸­å¯é€šè¿‡å…·ä½“å‚æ•°æ¥æ›´æ”¹loggingæ¨¡å—é»˜è®¤è¡Œä¸ºï¼Œå¯ç”¨å‚æ•°æœ‰. filenameï¼šç”¨æŒ‡å®šçš„æ–‡ä»¶ååˆ›å»ºFiledHandlerï¼Œè¿™æ ·æ—¥å¿—ä¼šè¢«å­˜å‚¨åœ¨æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚ filemodeï¼šæ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼Œåœ¨æŒ‡å®šäº†filenameæ—¶ä½¿ç”¨è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºâ€œaâ€è¿˜å¯æŒ‡å®šä¸ºâ€œwâ€ã€‚ formatï¼šæŒ‡å®šhandlerä½¿ç”¨çš„æ—¥å¿—æ˜¾ç¤ºæ ¼å¼ã€‚ datefmtï¼šæŒ‡å®šæ—¥æœŸæ—¶é—´æ ¼å¼ã€‚ levelï¼šè®¾ç½®rootloggerçš„æ—¥å¿—çº§åˆ« streamï¼šç”¨æŒ‡å®šçš„streamåˆ›å»ºStreamHandlerã€‚å¯ä»¥æŒ‡å®šè¾“å‡ºåˆ°sys.stderr,sys.stdoutæˆ–è€…æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºsys.stderrã€‚è‹¥åŒæ—¶åˆ—å‡ºäº†filenameå’Œstreamä¸¤ä¸ªå‚æ•°ï¼Œåˆ™streamå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:2:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"formatå‚æ•°ä¸­å¯èƒ½ç”¨åˆ°çš„æ ¼å¼åŒ–ä¸² %(name)s Loggerçš„åå­— %(levelno)s æ•°å­—å½¢å¼çš„æ—¥å¿—çº§åˆ« %(levelname)s æ–‡æœ¬å½¢å¼çš„æ—¥å¿—çº§åˆ« %(pathname)s è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—çš„å®Œæ•´è·¯å¾„åï¼Œå¯èƒ½æ²¡æœ‰ %(filename)s è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—çš„æ–‡ä»¶å %(module)s è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—å %(funcName)s è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„å‡½æ•°å %(lineno)d è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„è¯­å¥æ‰€åœ¨çš„ä»£ç è¡Œ %(created)f å½“å‰æ—¶é—´ï¼Œç”¨UNIXæ ‡å‡†çš„è¡¨ç¤ºæ—¶é—´çš„æµ® ç‚¹æ•°è¡¨ç¤º %(relativeCreated)d è¾“å‡ºæ—¥å¿—ä¿¡æ¯æ—¶çš„ï¼Œè‡ªLoggeråˆ›å»ºä»¥ æ¥çš„æ¯«ç§’æ•° %(asctime)s å­—ç¬¦ä¸²å½¢å¼çš„å½“å‰æ—¶é—´ã€‚é»˜è®¤æ ¼å¼æ˜¯ â€œ2003-07-08 16:49:45,896â€ã€‚é€—å·åé¢çš„æ˜¯æ¯«ç§’ %(thread)d çº¿ç¨‹IDã€‚å¯èƒ½æ²¡æœ‰ %(threadName)s çº¿ç¨‹åã€‚å¯èƒ½æ²¡æœ‰ %(process)d è¿›ç¨‹IDã€‚å¯èƒ½æ²¡æœ‰ %(message)sç”¨æˆ·è¾“å‡ºçš„æ¶ˆæ¯ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:2:1","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ—¥å¿—æ‰“å°å®ç°è¿‡ç¨‹ import logging #1.Logger:äº§ç”Ÿæ—¥å¿— logger1=logging.getLogger('è®¿é—®æ—¥å¿—') #2.Handler: æ¥æ”¶Loggerä¼ è¿‡æ¥çš„æ—¥å¿—ï¼Œè¿›è¡Œæ—¥å¿—æ ¼å¼åŒ–ï¼Œå¯ä»¥æ‰“å°åˆ°ç»ˆç«¯ï¼Œä¹Ÿå¯ä»¥æ‰“å°åˆ°æ–‡ä»¶ sh=logging.StreamHandler() #æ‰“å°åˆ°ç»ˆç«¯ fh1=logging.FileHandler('s1.log', encoding='utf-8') #æ‰“å°åˆ°æ–‡ä»¶ fh2=logging.FileHandler('s2.log', encoding='utf-8') #3.Formatterï¼šæ—¥å¿—æ ¼å¼ formatter1=logging.Formatter( fmt='%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) formatter2=logging.Formatter( fmt='%(asctime)s : %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) formatter3=logging.Formatter( fmt='%(asctime)s : %(module)s : %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) #4.ä¸ºHandlerç»‘å®šæ—¥å¿—æ ¼å¼ sh.setFormatter(formatter1) fh1.setFormatter(formatter2) fh2.setFormatter(formatter3) #5.ä¸ºlogger ç»‘å®šhandler logger1.addHandler(sh) logger1.addHandler(fh1) logger1.addHandler(fh2) #6.è®¾ç½®æ—¥å¿—çº§åˆ«:logger å¯¹è±¡çš„æ—¥å¿—çº§åˆ«åº”è¯¥\u003c=handlerçš„æ—¥å¿—çº§åˆ« #logger1.setLevel(30) logger1.setLevel(10) sh.setLevel(10) fh1.setLevel(10) fh2.setLevel(10) #7.æµ‹è¯• logger1.debug('æµ‹è¯•è€…ç©') logger1.info('è¿è¡Œè¿˜ç®—æ­£å¸¸') logger1.warning('å¯èƒ½è¦æœ‰bugäº†') logger1.error('ä¸å¥½äº†ï¼ŒçœŸå‡ºbugäº†') logger1.critical('æ¨åˆ°é‡å†™') å»æ³¨é‡Šç‰ˆ import logging logger1=logging.getLogger('è®¿é—®æ—¥å¿—') sh=logging.StreamHandler() fh1=logging.FileHandler('s1.log', encoding='utf-8') fh2=logging.FileHandler('s2.log', encoding='utf-8') formatter1=logging.Formatter( fmt='%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) formatter2=logging.Formatter( fmt='%(asctime)s : %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) formatter3=logging.Formatter( fmt='%(asctime)s : %(module)s : %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) sh.setFormatter(formatter1) fh1.setFormatter(formatter2) fh2.setFormatter(formatter3) logger1.addHandler(sh) logger1.addHandler(fh1) logger1.addHandler(fh2) #logger1.setLevel(30) logger1.setLevel(10) sh.setLevel(10) fh1.setLevel(10) fh2.setLevel(10) æµ‹è¯• logger1.debug('æµ‹è¯•è€…ç©') logger1.info('è¿è¡Œè¿˜ç®—æ­£å¸¸') logger1.warning('å¯èƒ½è¦æœ‰bugäº†') logger1.error('ä¸å¥½äº†ï¼ŒçœŸå‡ºbugäº†') logger1.critical('æ¨åˆ°é‡å†™') ç»“æœï¼š s1.log 2022-03-22 20:26:58 PM : æµ‹è¯•è€…ç© 2022-03-22 20:26:58 PM : è¿è¡Œè¿˜ç®—æ­£å¸¸ 2022-03-22 20:26:58 PM : å¯èƒ½è¦æœ‰bugäº† 2022-03-22 20:26:58 PM : ä¸å¥½äº†ï¼ŒçœŸå‡ºbugäº† 2022-03-22 20:26:58 PM : æ¨åˆ°é‡å†™ s2.log 2022-03-22 20:26:58 PM : my_logging : æµ‹è¯•è€…ç© 2022-03-22 20:26:58 PM : my_logging : è¿è¡Œè¿˜ç®—æ­£å¸¸ 2022-03-22 20:26:58 PM : my_logging : å¯èƒ½è¦æœ‰bugäº† 2022-03-22 20:26:58 PM : my_logging : ä¸å¥½äº†ï¼ŒçœŸå‡ºbugäº† 2022-03-22 20:26:58 PM : my_logging : æ¨åˆ°é‡å†™ ç»ˆç«¯ 2022-03-26 11:32:48 AM - è®¿é—®æ—¥å¿— - INFO - my_logging: è¿è¡Œè¿˜ç®—æ­£å¸¸ 2022-03-26 11:32:48 AM - è®¿é—®æ—¥å¿— - WARNING - my_logging: å¯èƒ½è¦æœ‰bugäº† 2022-03-26 11:32:48 AM - è®¿é—®æ—¥å¿— - ERROR - my_logging: ä¸å¥½äº†ï¼ŒçœŸå‡ºbugäº† 2022-03-26 11:32:48 AM - è®¿é—®æ—¥å¿— - CRITICAL - my_logging: æ¨åˆ°é‡å†™ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:3:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ—¥å¿—çš„ç»§æ‰¿å…³ç³»ï¼ˆäº†è§£ï¼‰ ç»ƒä¹  import logging #1.Logger:äº§ç”Ÿæ—¥å¿— logger1=logging.getLogger('root') logger2=logging.getLogger('root.child1') logger3=logging.getLogger('root.child1.child2') #2.Handler: æ¥æ”¶Loggerä¼ è¿‡æ¥çš„æ—¥å¿—ï¼Œè¿›è¡Œæ—¥å¿—æ ¼å¼åŒ–ï¼Œå¯ä»¥æ‰“å°åˆ°ç»ˆç«¯ï¼Œä¹Ÿå¯ä»¥æ‰“å°åˆ°æ–‡ä»¶ sh=logging.StreamHandler() #æ‰“å°åˆ°ç»ˆç«¯ #3.Formatterï¼šæ—¥å¿—æ ¼å¼ formatter1=logging.Formatter( fmt='%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) #4.ä¸ºHandlerç»‘å®šæ—¥å¿—æ ¼å¼ sh.setFormatter(formatter1) #5.ä¸ºlogger ç»‘å®šhandler logger1.addHandler(sh) logger2.addHandler(sh) logger3.addHandler(sh) #6.è®¾ç½®æ—¥å¿—çº§åˆ«:logger å¯¹è±¡çš„æ—¥å¿—çº§åˆ«åº”è¯¥\u003c=handlerçš„æ—¥å¿—çº§åˆ« #logger1.setLevel(30) logger1.setLevel(10) logger2.setLevel(10) logger3.setLevel(10) sh.setLevel(10) #7.æµ‹è¯• logger1.debug('çˆ·çˆ·') logger2.debug('çˆ¸çˆ¸') logger3.debug('å­™å­') ç»“æœ 2022-03-22 21:00:30 PM - root - DEBUG - my_logging_child: çˆ·çˆ· 2022-03-22 21:00:30 PM - root.child1 - DEBUG - my_logging_child: çˆ¸çˆ¸ 2022-03-22 21:00:30 PM - root.child1 - DEBUG - my_logging_child: çˆ¸çˆ¸ 2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: å­™å­ 2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: å­™å­ 2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: å­™å­ å»æ³¨é‡Šç‰ˆ import logging logger1=logging.getLogger('root') logger2=logging.getLogger('root.child1') logger3=logging.getLogger('root.child1.child2') sh=logging.StreamHandler() formatter1=logging.Formatter( fmt='%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) sh.setFormatter(formatter1) logger1.addHandler(sh) logger2.addHandler(sh) logger3.addHandler(sh) #logger1.setLevel(30) logger1.setLevel(10) logger2.setLevel(10) logger3.setLevel(10) sh.setLevel(10) æµ‹è¯• logger1.debug('çˆ·çˆ·') logger2.debug('çˆ¸çˆ¸') logger3.debug('å­™å­') ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:4:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ—¥å¿—æ¨¡å—åº”ç”¨ æ¨¡æ‹Ÿè´­ç‰©å°ç¨‹åºï¼Œé€‰æ‹©è½¬è´¦æ—¶è®°å½•æ—¥å¿—ã€‚ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:5:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ•´ä½“é¡¹ç›®ç»“æ„ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:5:1","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ¯ä¸ªç›®å½•ç®€å•ä»‹ç» binç›®å½•ï¼šå­˜æ”¾ç”¨æˆ·äº¤äº’ç¨‹åº confç›®å½•ï¼šè®¾ç½®ç›¸å…³ coreï¼šæ ¸å¿ƒåŠŸèƒ½ db:ç”¨æˆ·è®¤è¯ç›¸å…³ lib:å¸¸ç”¨åŠŸèƒ½ logï¼šæ—¥å¿—æ–‡ä»¶ README:é¡¹ç›®ä»‹ç» ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:5:2","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"ç›¸å…³æºç  start.py import sys, os #print(os.path.abspath(__file__)) #print(os.path.dirname(os.path.abspath(__file__))) #print(os.path.dirname(os.path.dirname(os.path.abspath(__file__)))) BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__))) sys.path.append(BASE_DIR) from core import src if __name__ == '__main__': src.run() settings.py import os import logging.config BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__))) LOG_PATH = os.path.join(BASE_DIR, 'log', 'access.log') DB_PATH = os.path.join(BASE_DIR, 'db', 'user') COLLECT_PATH = os.path.join(BASE_DIR, 'log', 'collect.log') print(LOG_PATH) print(DB_PATH) # å®šä¹‰ä¸‰ç§æ—¥å¿—è¾“å‡ºæ ¼å¼ å¼€å§‹ standard_format = '[%(asctime)s][%(threadName)s:%(thread)d][task_id:%(name)s][%(filename)s:%(lineno)d]' \\ '[%(levelname)s][%(message)s]' #å…¶ä¸­nameä¸ºgetloggeræŒ‡å®šçš„åå­— simple_format = '[%(levelname)s][%(asctime)s][%(filename)s:%(lineno)d]%(message)s' id_simple_format = '[%(levelname)s][%(asctime)s] %(message)s' # logé…ç½®å­—å…¸ LOGGING_DIC = { 'version': 1, 'disable_existing_loggers': False, 'formatters': { 'standard': { 'format': standard_format }, 'simple': { 'format': simple_format }, 'id_simple': { 'format': id_simple_format }, }, 'filters': {}, 'handlers': { #æ‰“å°åˆ°ç»ˆç«¯çš„æ—¥å¿— 'console': { 'level': 'DEBUG', 'class': 'logging.StreamHandler', # æ‰“å°åˆ°å±å¹• 'formatter': 'simple' }, #æ‰“å°åˆ°æ–‡ä»¶çš„æ—¥å¿—,æ”¶é›†infoåŠä»¥ä¸Šçš„æ—¥å¿— 'default': { 'level': 'DEBUG', 'class': 'logging.handlers.RotatingFileHandler', # ä¿å­˜åˆ°æ–‡ä»¶ 'formatter': 'standard', 'filename': LOG_PATH, # æ—¥å¿—æ–‡ä»¶ 'maxBytes': 1024*1024*5, # æ—¥å¿—å¤§å° 5M 'backupCount': 5, 'encoding': 'utf-8', # æ—¥å¿—æ–‡ä»¶çš„ç¼–ç ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒä¸­æ–‡logä¹±ç äº† }, 'collect': { 'level': 'DEBUG', 'class': 'logging.handlers.RotatingFileHandler', # ä¿å­˜åˆ°æ–‡ä»¶ 'formatter': 'simple', 'filename': COLLECT_PATH, # æ—¥å¿—æ–‡ä»¶ 'maxBytes': 1024*1024*5, # æ—¥å¿—å¤§å° 5M 'backupCount': 5, 'encoding': 'utf-8', # æ—¥å¿—æ–‡ä»¶çš„ç¼–ç ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒä¸­æ–‡logä¹±ç äº† }, }, 'loggers': { '': { 'handlers': ['default', 'console', 'collect'], # è¿™é‡ŒæŠŠä¸Šé¢å®šä¹‰çš„ä¸¤ä¸ªhandleréƒ½åŠ ä¸Šï¼Œå³logæ•°æ®æ—¢å†™å…¥æ–‡ä»¶åˆæ‰“å°åˆ°å±å¹• 'level': 'DEBUG', 'propagate': False, # å‘ä¸Šï¼ˆæ›´é«˜levelçš„loggerï¼‰ä¼ é€’ }, }, } src.py from lib import common from lib import sql def shop(): print('è´­ç‰©') def check_balance(): print('æŸ¥çœ‹ä½™é¢....') #res = sql.execute('select balance from user where id=3') #print(res) def transfer_account(): print('è½¬è´¦....') #è®°å½•æ—¥å¿— log_msg = 'jack give smith ten yuan' #è°ƒç”¨æ—¥å¿—åŠŸèƒ½ loggers = common.logger_handle('transfer_account') loggers.debug(log_msg) def run(): msg = ''' 1.è´­ç‰© 2.æŸ¥çœ‹ä½™é¢ 3.è½¬è´¦ ''' while True: print(msg) choice = input('\u003e\u003e: ').strip() if not choice:continue if choice == '1': shop() elif choice == '2': check_balance() elif choice == '3': transfer_account() user alex,18,male,10000 egon,18,male,1000000 common.py from conf import settings import logging.config # def logger(msg): # with open(settings.LOG_PATH, 'a', encoding='utf-8') as f: # f.write('%s\\n' %msg) def logger_handle(log_name): logging.config.dictConfig(settings.LOGGING_DIC) # å¯¼å…¥ä¸Šé¢å®šä¹‰çš„loggingé…ç½® logger = logging.getLogger(log_name) # ç”Ÿæˆä¸€ä¸ªlogå®ä¾‹ logger.info('It works!') # è®°å½•è¯¥æ–‡ä»¶çš„è¿è¡ŒçŠ¶æ€ sql.py def execute(sql): print('è§£æ') print('æ‰§è¡Œsql') access.log jackç»™smithè½¬è´¦äº†10å…ƒ [2022-03-22 22:01:20,767][MainThread:2600][task_id:è½¬è´¦][common.py:10][INFO][It works!] [2022-03-22 22:04:08,963][MainThread:14184][task_id:è½¬è´¦][common.py:10][INFO][It works!] [2022-03-22 22:06:59,656][MainThread:15740][task_id:transfer_account][common.py:10][INFO][It works!] [2022-03-26 11:41:33,154][MainThread:12820][task_id:transfer_account][common.py:10][INFO][It works!] collect.log [INFO][2022-03-22 22:01:20,767][common.py:10]It works! [INFO][2022-03-22 22:04:08,963][common.py:10]It works! [INFO][2022-03-22 22:06:59,656][common.py:10]It works! [INFO][2022-03-26 11:41:33,154][common.py:10]It works! ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:5:3","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"reæ¨¡å—-æ­£åˆ™è¡¨è¾¾å¼ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:6:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯æ­£åˆ™ï¼Ÿ æ­£åˆ™å°±æ˜¯ç”¨ä¸€äº›å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„ç¬¦å·ç»„åˆåˆ°ä¸€èµ·ï¼ˆç§°ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼‰æ¥æè¿°å­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚æˆ–è€…è¯´ï¼šæ­£åˆ™å°±æ˜¯ç”¨æ¥æè¿°ä¸€ç±»äº‹ç‰©çš„è§„åˆ™ã€‚ï¼ˆåœ¨Pythonä¸­ï¼‰å®ƒå†…åµŒåœ¨Pythonä¸­ï¼Œå¹¶é€šè¿‡ re æ¨¡å—å®ç°ã€‚æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼è¢«ç¼–è¯‘æˆä¸€ç³»åˆ—çš„å­—èŠ‚ç ï¼Œç„¶åç”±ç”¨ C ç¼–å†™çš„åŒ¹é…å¼•æ“æ‰§è¡Œã€‚ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:6:1","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"å¸¸ç”¨åŒ¹é…æ¨¡å¼(å…ƒå­—ç¬¦) import re print(re.findall('\\w', 'jack 123 + _ - *')) print(re.findall('\\W', 'jack 123 + _ - *')) print(re.findall('\\s', 'jack\\tn 12\\n3 + _ - *')) print(re.findall('\\S', 'jack\\tn 12\\n3 + _ - *')) print(re.findall('\\d', 'jack\\tn 12\\n3 + _ - *')) print(re.findall('\\D', 'jack\\tn 12\\n3 + _ - *')) print(re.findall('\\n', 'jack\\tn 12\\n3 + _ - *')) print(re.findall('\\t', 'jack\\tn 12\\n3 + _ - *')) print(re.findall('j', 'jack\\tn 12\\n3 + hello _ - *')) print(re.findall('^j', 'jack\\tn 12\\n3 + hello _ - *')) print(re.findall('o$', 'jack\\tn 12\\n3 + _ * hello')) é‡å¤./?/*/+/{m,n}/.*/.*? ç‚¹ .èƒ½åŒ¹é…æ¢è¡Œç¬¦(\\n)ä»¥å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ (ä»¥aå¼€å¤´çš„éƒ½æ²¡åŒ¹é…ä¸Šï¼Œç›´åˆ°é‡åˆ°aabç¬¦åˆa.båŒ¹é…è§„åˆ™ï¼Œæ‰€ä»¥ç»“æœæ˜¯aab) print(re.findall('a.b', 'a1b a b a-b aaaaaaaab')) # ['a1b' ,'a b' , 'a-b', 'aab'] print(re.findall('a.b', 'a1b a b a\\nb aaaaaaaab')) # ['a1b','a b', 'aab'] #a.b print(re.findall('a.b', 'a1b a b a\\nb aaaaaaaab', re.DOTALL)) #['a1b','a b', 'a\\nb','aab'] é—®å· ?ä»£è¡¨?å·¦è¾¹çš„å­—ç¬¦å‡ºç°0æ¬¡æˆ–è€…1æ¬¡ print(re.findall('ab?', 'a ab abb abbbb a1b')) #['a' ,'ab' ,'ab','ab','a'] åˆ†æè¿‡ç¨‹: è¦åŒ¹é…ab?ã€‚bå¯ä»¥å‡ºç°1ä¸ªä¹Ÿå¯ä»¥ä¸å‡ºç°ã€‚å³'a'æˆ–è€…'ab'.å­—æ¯aå¼€å¤´çš„åªè¦èƒ½åŒ¹é…å°±å–å‡ºæ¥ã€‚ æ˜Ÿ *ä»£è¡¨*å·¦è¾¹çš„å­—ç¬¦å‡ºç°0æ¬¡æˆ–è€…æ— ç©·æ¬¡ print(re.findall('ab*', 'a ab abb abbbb a1b')) #['a', 'ab', 'abb','abbbb','a'] åŠ å· +ä»£è¡¨+å·å·¦è¾¹çš„å­—ç¬¦å‡ºç°1æ¬¡æˆ–è€…æ— ç©·æ¬¡ print(re.findall('ab+', 'a ab abb abbbbb a1b')) #['ab','abb','abbbbb'] åˆ†æè¿‡ç¨‹: è¦åŒ¹é…ab+,bå¯ä»¥å‡ºç°1ä¸ªæˆ–è€…æ— ç©·æ¬¡ä½†ä¸èƒ½ä¸å‡ºç°ã€‚å³'ab'æˆ–è€…'aæ— ç©·ä¸ªb'.éœ€è¦ä»¥å­—æ¯abå¼€å¤´çš„æ‰èƒ½åŒ¹é…ï¼Œæ³¨æ„å’Œé—®å·ã€æ˜Ÿå·åšå¯¹æ¯”ã€‚ å¤§æ‹¬å· {m,n}ï¼šä»£è¡¨å·¦è¾¹çš„å­—ç¬¦å‡ºç°mæ¬¡åˆ°næ¬¡ print(re.findall('ab{0,1}', 'a ab abb abbbb a1b')) #ç­‰åŒäº?æ•ˆæœã€‚0æ¬¡åˆ°1æ¬¡ print(re.findall('ab{0,}', 'a ab abb abbbb a1b')) #ç­‰åŒäº*æ•ˆæœã€‚0æ¬¡åˆ°æ— ç©·æ¬¡ print(re.findall('ab{1,}', 'a ab abb abbbb a1b')) #ç­‰åŒäº+æ•ˆæœã€‚1æ¬¡åˆ°æ— ç©·æ¬¡ print(re.findall('ab{2,4}', 'a ab abb abbbb abbbbbbbbbbbb a1b')) #2æ¬¡åˆ°4æ¬¡ï¼Œå³åŒ¹é…abb,abbb,abbbb ,å¦‚æœå‡ºç°4ä¸ªä»¥ä¸Šçš„båªå–åˆ°4ä¸ªã€‚ç»“æœä¸º['abb','abbbb','abbbb'] ç‚¹æ˜Ÿ .*ä»£è¡¨è¦ä¹ˆä¸å‡ºç°ï¼Œè¦ä¹ˆå‡ºç°æ— ç©·æ¬¡ã€‚ï¼ˆè´ªå©ªåŒ¹é…ï¼‰é€šå¸¸åŒ¹é…çš„ä¸å¤Ÿç²¾å‡†ã€‚ print(re.findall('a.*b', 'xxxxy123a123b456b')) #['a123b456b'] ç‚¹æ˜Ÿé—®å· .*?éè´ªå©ªåŒ¹é…å’Œ.*å¯¹åº”ã€‚ï¼ˆçˆ¬è™«ç»å¸¸ç”¨ï¼ï¼ï¼ï¼‰ print(re.findall('a.*?b', 'xxxxy123a123b456b')) #['a123b'] åˆ†æ:æœ‰å¤šä¸ªbæ—¶ï¼ŒåŒ¹é…æœ€è¿‘çš„ä¸€ä¸ªb æ–œæ  /æˆ–è€… å°æ‹¬å· ()åˆ†ç»„ï¼Œfindall()åªå–åˆ†ç»„é‡Œé¢çš„å­—ç¬¦ã€‚(?:)ä»£è¡¨åˆ†ç»„å¤–é¢çš„å­—ç¬¦ä¹Ÿä¿ç•™ã€‚æ˜¯å›ºå®šå†™æ³•ï¼ éœ€æ±‚:æ‰¾å‡ºæ‰€æœ‰companå¼€å¤´çš„è‹±æ–‡å­—æ¯ print(re.findall('compan(y|ies)', 'Too many companies have gone bankrupt, and the next one is my company')) #ç»“æœï¼š['ies','y'] print(re.findall('compan(?:y|ies)', 'Too many companies have gone bankrupt, and the next one is my company')) #ç»“æœï¼š['companies','company'] åº”ç”¨å–å‡ºç½‘é¡µä¸­çš„é“¾æ¥ print(re.findall('href=\"(.*?)\"', '\u003ca href=\"http://www.baidu.com\"\u003eç‚¹å‡»æˆ‘\u003c/a\u003e')) ç»“æœ: ['http://www.baidu.com'] rawstring print(re.findall(r'a\\\\c', 'a\\\\c a1c aBc')) #a\\\\c -\u003ea\\c ['a\\\\c'] ä¸­æ‹¬å· []å–ä¸­æ‹¬å·å†…ä»»æ„ä¸€ä¸ª print(re.findall('a[a-z]b', 'axb azb aAb a-b a+b')) #['axb','azb'] print(re.findall('a[A-Z]b', 'axb azb aAb a-b a+b')) #['aAb'] print(re.findall('a[a-zA-Z]b', 'axb azb aAb a-b a+b')) #['axb', 'azb', 'aAb'] print(re.findall('a[0-9]b', 'axb azb aAb a1b a-b a+b a9b')) #['a1b', 'a9b'] print(re.findall('a[-+*/]b', 'axb azb aAb a1b a-b a+b a9b')) #['a-b', 'a+b'] print(re.findall('a[^-+*/]b', 'axb azb aAb a1b a-b a+b a9b')) #['axb', 'azb', 'aAb', 'a1b', 'a9b'] ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:6:2","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"reæ¨¡å—çš„å…¶ä»–ç”¨æ³• re.searchåŒ¹é…æˆåŠŸä¸€æ¬¡å°±è¿”å›,å–ä¸åˆ°å°±è¿”å›None,åŠ .group()è¿”å›ç»“æœã€‚ print(re.search('a[*]b', 'axb azb aAb a1b a-b a+b aaab')) #None print(re.search('a[a-z]b', 'axb azb aAb a1b a-b a+b aaab').group()) # axb re.matchï¼šä»å¼€å¤´å–,å¼€å¤´æ²¡æœ‰å°±ä¸ºNone,åªå–ä¸€æ¬¡ã€‚ print(re.match('a[0-9]b', 'axb azb aAb a1b a-b a2b a+b')) print(re.match('a[0-9]b', 'a9b a8b axb azb aAb a1b a-b a2b a+b').group()) print(re.search('^a[0-9]b', 'a9b a8b axb azb aAb a1b a-b a2b a+b').group()) re.split:åˆ†å‰² print(re.split(':', 'rootâŒ0:0::/root:/bin/bash',maxsplit=1)) #ç»“æœä¸ºï¼š['root','x:0:0::/root:/bin/bash'] #'rootâŒ0:0::/root:/bin/bash'.split(':') re.sub:æ›¿æ¢ print(re.sub('root', 'admin', 'rootâŒ0:0::/root:/bin/bash')) #éƒ½æ›¿æ¢ print(re.sub('root', 'admin', 'rootâŒ0:0::/root:/bin/bash', 1)) #åªæ¢ä¸€æ¬¡ éœ€æ±‚ï¼šæ–‡æœ¬å‰åå€’è½¬ print(re.sub('^([a-z]+)([^a-z]+)(.*?)([^a-z]+)([a-z]+)$', r'\\5\\2\\3\\4\\1', 'rootâŒ0:0::/root:/bin/bash')) #åªæ¢ä¸€æ¬¡ è§£æï¼š ^ä»¥â€¦å¼€å¤´ $ä»¥â€¦ç»“å°¾ ([a-z]+) åˆ†ç»„åŒ¹é…å•è¯ ([^a-z]+)åˆ†ç»„åŒ¹é…éå•è¯ (.*?)åˆ†ç»„åŒ¹é…ä»»æ„å­—ç¬¦ æ­£åˆ™æ•´ä½“è¡¨ç¤ºï¼šä»¥å•è¯å¼€å¤´ï¼Œå¹¶ä¸”ä»¥å•è¯ç»“å°¾ã€‚rè¡¨ç¤ºæ˜¾ç¤ºå­—ç¬¦åŸæœ¬å«ä¹‰ä¸è¿›è¡Œè½¬ä¹‰ï¼Œ\\5è¡¨ç¤ºç¬¬äº”ä¸ªåˆ†ç»„ã€‚r'\\5\\2\\3\\4\\1' æ•´ä½“è¡¨ç¤ºç¬¬5ä¸ªåˆ†ç»„å’Œç¬¬ä¸€ä¸ªåˆ†ç»„çš„å†…å®¹è°ƒæ¢ å¹¶ä¸”æ–œæ ä½¿ç”¨åŸæœ¬å«ä¹‰ä¸åšè½¬ä¹‰ã€‚ re.compile :å®ƒå°†æ­£åˆ™è¡¨è¾¾å¼è½¬åŒ–ä¸ºå¯¹è±¡ obj = re.compile('a\\d{2}b') print(obj.findall('a12b a123b a12345b abbb')) #['a12b'] print(obj.search('a12b a123b a12345b abbb').group()) #a12b å¸¸ç”¨æ­£åˆ™è¡¨ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:6:3","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"æ—¶é—´æ¨¡å— import time print(time.time()) #æ—¶é—´æˆ³æ ¼å¼ï¼š1648026287.9298368 print(time.localtime().tm_mday) #23 print(time.localtime()) #ç»“æ„åŒ–æ—¶é—´ print(time.gmtime()) #ç»“æ„åŒ–æ—¶é—´ #ç»“æœ #time.struct_time(tm_year=2022, tm_mon=3, tm_mday=23, tm_hour=17, tm_min=5, tm_sec=26, tm_wday=2, tm_yday=82, tm_isdst=0) #time.struct_time(tm_year=2022, tm_mon=3, tm_mday=23, tm_hour=9, tm_min=5, tm_sec=26, tm_wday=2, tm_yday=82, tm_isdst=0) print(time.strftime('%Y-%m-%d %H:%M:%S')) #2022-03-23 17:07:47 print(time.strftime('%Y-%m-%d %X')) #2022-03-23 17:07:47 #äº†è§£ print(time.localtime(1111111111)) print(time.localtime(time.time())) print(time.gmtime(time.time())) print(time.mktime(time.localtime())) print(time.strftime('%Y-%m-%d', time.localtime())) print(time.strptime('2020-03-01', '%Y-%m-%d')) print(time.asctime()) #Wed Mar 23 17:15:40 2022 print(time.ctime()) #Wed Mar 23 17:15:40 2022 print(time.asctime(time.localtime())) #Wed Mar 23 17:16:32 2022 print(time.ctime(111111111)) #Tue Jul 10 08:11:51 1973 print(time.ctime(1648027065.7651727)) #Wed Mar 23 17:17:45 2022 print(time.time()) #æ—¶é—´æˆ³æ ¼å¼ï¼š1648026287.9298368 #datetime import datetime print(datetime.datetime.now()) #å½“å‰æ—¶é—´ï¼š2022-03-23 17:20:11.964584 print(datetime.datetime.fromtimestamp(111111111)) #1973-07-10 08:11:51 print(datetime.datetime.now()+datetime.timedelta(days=3)) #å½“å‰æ—¶é—´å¼€å§‹çš„ä¸‰å¤©åã€‚2022-03-26 17:22:35.581422 print(datetime.datetime.now()+datetime.timedelta(days=-3)) #å½“å‰æ—¶é—´å¼€å§‹çš„ä¸‰å¤©å‰ã€‚2022-03-20 17:22:35.581422 print(datetime.datetime.now()+datetime.timedelta(minutes=3)) #å½“å‰æ—¶é—´å¼€å§‹çš„ä¸‰åˆ†é’Ÿåã€‚2022-03-23 17:25:35.581422 print(datetime.datetime.now()+datetime.timedelta(seconds=3)) #å½“å‰æ—¶é—´å¼€å§‹çš„ä¸‰ç§’åã€‚2022-03-23 17:22:38.581422 print(datetime.datetime.now().replace(year=2000)) #å°†å½“å‰æ—¶é—´ä¸­å¹´æ›¿æ¢æˆ2000. 2000-03-23 17:25:04.696554 ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:7:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"randomæ¨¡å— import random print(random.random()) #(0,1) --float å¤§äº0ä¸”å°äº1ä¹‹é—´çš„å°æ•° 0.8266764258093519 print(random.randint(1, 3)) #[1,3] å¤§äºç­‰äº1ä¸”å°äºç­‰äº3ä¹‹é—´çš„æ•´æ•° print(random.randrange(1, 3)) #[1,3) å¤§äºç­‰äº1ä¸”å°äº3ä¹‹é—´çš„æ•´æ•° print(random.choice([1, '23', [4,5]])) #1æˆ–è€…23æˆ–è€…[4,5] print(random.sample([1,'23',[4,5]],2)) #åˆ—è¡¨å…ƒç´ ä»»æ„2ä¸ªç»„åˆ [[4, 5], '23'] print(random.uniform(1,3)) #å¤§äº1å°äº3çš„å°æ•° 2.3344194593026546 l=[1,3,4,2,5] random.shuffle(l) #åˆ—è¡¨ä¸­å…ƒç´ éšæœºæ‰“ä¹±é¡ºåºã€‚[5, 1, 3, 4, 2] print(l) #éšæœºéªŒè¯ç ã€‚æ•°å­—+å­—æ¯ def make_code(n): res='' for i in range(n): s1=str(random.randint(0,9)) s2=chr(random.randint(65,90)) res+=random.choice([s1,s2]) return res print(make_code(6)) ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:8:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"osæ¨¡å— os.getcwd() è·å–å½“å‰å·¥ä½œç›®å½•ï¼Œå³å½“å‰pythonè„šæœ¬å·¥ä½œçš„ç›®å½•è·¯å¾„ os.chdir(\"dirname\") æ”¹å˜å½“å‰è„šæœ¬å·¥ä½œç›®å½•ï¼›ç›¸å½“äºshellä¸‹cd os.curdir è¿”å›å½“å‰ç›®å½•: ('.') os.pardir è·å–å½“å‰ç›®å½•çš„çˆ¶ç›®å½•å­—ç¬¦ä¸²åï¼š('..') os.makedirs('dirname1/dirname2') å¯ç”Ÿæˆå¤šå±‚é€’å½’ç›®å½• os.removedirs('dirname1') è‹¥ç›®å½•ä¸ºç©ºï¼Œåˆ™åˆ é™¤ï¼Œå¹¶é€’å½’åˆ°ä¸Šä¸€çº§ç›®å½•ï¼Œå¦‚è‹¥ä¹Ÿä¸ºç©ºï¼Œåˆ™åˆ é™¤ï¼Œä¾æ­¤ç±»æ¨ os.mkdir('dirname') ç”Ÿæˆå•çº§ç›®å½•ï¼›ç›¸å½“äºshellä¸­mkdir dirname os.rmdir('dirname') åˆ é™¤å•çº§ç©ºç›®å½•ï¼Œè‹¥ç›®å½•ä¸ä¸ºç©ºåˆ™æ— æ³•åˆ é™¤ï¼ŒæŠ¥é”™ï¼›ç›¸å½“äºshellä¸­rmdir dirname os.listdir('dirname') åˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ï¼Œå¹¶ä»¥åˆ—è¡¨æ–¹å¼æ‰“å° os.remove() åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ os.rename(\"oldname\",\"newname\") é‡å‘½åæ–‡ä»¶/ç›®å½• os.stat('path/filename') è·å–æ–‡ä»¶/ç›®å½•ä¿¡æ¯ os.sep è¾“å‡ºæ“ä½œç³»ç»Ÿç‰¹å®šçš„è·¯å¾„åˆ†éš”ç¬¦ï¼Œwinä¸‹ä¸º\"\\\\\",Linuxä¸‹ä¸º\"/\" os.linesep è¾“å‡ºå½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦ï¼Œwinä¸‹ä¸º\"\\t\\n\",Linuxä¸‹ä¸º\"\\n\" os.pathsep è¾“å‡ºç”¨äºåˆ†å‰²æ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸² winä¸‹ä¸º;,Linuxä¸‹ä¸º: os.name è¾“å‡ºå­—ç¬¦ä¸²æŒ‡ç¤ºå½“å‰ä½¿ç”¨å¹³å°ã€‚win-\u003e'nt'; Linux-\u003e'posix' os.system(\"bash command\") è¿è¡Œshellå‘½ä»¤ï¼Œç›´æ¥æ˜¾ç¤º os.environ è·å–ç³»ç»Ÿç¯å¢ƒå˜é‡ os.path.abspath(path) è¿”å›pathè§„èŒƒåŒ–çš„ç»å¯¹è·¯å¾„ os.path.split(path) å°†pathåˆ†å‰²æˆç›®å½•å’Œæ–‡ä»¶åäºŒå…ƒç»„è¿”å› os.path.dirname(path) è¿”å›pathçš„ç›®å½•ã€‚å…¶å®å°±æ˜¯os.path.split(path)çš„ç¬¬ä¸€ä¸ªå…ƒç´  os.path.basename(path) è¿”å›pathæœ€åçš„æ–‡ä»¶åã€‚å¦‚ä½•pathä»¥ï¼æˆ–\\ç»“å°¾ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›ç©ºå€¼ã€‚å³os.path.split(path)çš„ç¬¬äºŒä¸ªå…ƒç´  os.path.exists(path) å¦‚æœpathå­˜åœ¨ï¼Œè¿”å›Trueï¼›å¦‚æœpathä¸å­˜åœ¨ï¼Œè¿”å›False os.path.isabs(path) å¦‚æœpathæ˜¯ç»å¯¹è·¯å¾„ï¼Œè¿”å›True os.path.isfile(path) å¦‚æœpathæ˜¯ä¸€ä¸ªå­˜åœ¨çš„æ–‡ä»¶ï¼Œè¿”å›Trueã€‚å¦åˆ™è¿”å›False os.path.isdir(path) å¦‚æœpathæ˜¯ä¸€ä¸ªå­˜åœ¨çš„ç›®å½•ï¼Œåˆ™è¿”å›Trueã€‚å¦åˆ™è¿”å›False os.path.join(path1[, path2[, ...]]) å°†å¤šä¸ªè·¯å¾„ç»„åˆåè¿”å›ï¼Œç¬¬ä¸€ä¸ªç»å¯¹è·¯å¾„ä¹‹å‰çš„å‚æ•°å°†è¢«å¿½ç•¥ os.path.getatime(path) è¿”å›pathæ‰€æŒ‡å‘çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„æœ€åå­˜å–æ—¶é—´ os.path.getmtime(path) è¿”å›pathæ‰€æŒ‡å‘çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„æœ€åä¿®æ”¹æ—¶é—´ os.path.getsize(path) è¿”å›pathçš„å¤§å° åœ¨Linuxå’ŒMacå¹³å°ä¸Šï¼Œè¯¥å‡½æ•°ä¼šåŸæ ·è¿”å›pathï¼Œåœ¨windowså¹³å°ä¸Šä¼šå°†è·¯å¾„ä¸­æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå°å†™ï¼Œå¹¶å°†æ‰€æœ‰æ–œæ è½¬æ¢ä¸ºåæ–œæ ã€‚ \u003e\u003e\u003e os.path.normcase('c:/windows\\\\system32\\\\') 'c:\\\\windows\\\\system32\\\\' è§„èŒƒåŒ–è·¯å¾„ï¼Œå¦‚..å’Œ/ \u003e\u003e\u003e os.path.normpath('c://windows\\\\System32\\\\../Temp/') 'c:\\\\windows\\\\Temp' \u003e\u003e\u003e a='/Users/jieli/test1/\\\\\\a1/\\\\\\\\aa.py/../..' \u003e\u003e\u003e print(os.path.normpath(a)) /Users/jieli/test1 ä¸¾ä¾‹ print(os.getcwd()) print(os.stat(r'D:\\pccharmcode\\oracle.py')) print(os.stat(r'D:\\pccharmcode\\oracle.py').st_size) print(os.path.getsize(r'D:\\pccharmcode\\oracle.py')) os.system('tasklist') #çœ‹ç³»ç»Ÿè¿›ç¨‹,æœ‰ç¼–ç é—®é¢˜ã€‚ print(os.path.split(r'D:\\pccharmcode\\oracle.py')) #('D:\\\\pccharmcode', 'oracle.py') print(os.path.dirname(r'D:\\pccharmcode\\oracle.py')) #D:\\pccharmcode print(os.path.basename(r'D:\\pccharmcode\\oracle.py')) #oracle.py print(os.path.isabs(r'C:\\\\a123123123')) #True print(os.path.isabs(r'/root/123.txt')) #True print(os.path.join('C:', 'D:\\\\', 'dir1', 'dir2', 'dir3')) #D:dir1\\dir2\\dir3 print(os.path.normcase('c:/windows\\\\SYstem32\\\\')) #c:\\windows\\system32\\ print(os.path.normpath('c://windows\\\\System32\\\\../Temp/')) #c:\\windows\\Temp è·¯å¾„ï¼šD:\\pccharmcode\\api_key\\__init__.py è¦æ±‚è·å–åˆ°æ ¹å¼€å§‹çš„ç¬¬ä¸€çº§è·¯å¾„ã€‚ æ–¹æ³•1ï¼š print(os.path.dirname(os.path.dirname(r'D:\\pccharmcode\\api_key\\__init__.py'))) æ–¹æ³•2ï¼š res = os.path.normpath(os.path.join( os.path.abspath(r'D:\\pccharmcode\\api_key\\__init__.py'), os.pardir, os.pardir )) print(res) æ–¹æ³•3ï¼š å…ˆå°†åŸè·¯å¾„æ‹¼æ¥æˆä¸€ä¸ªæ–°è·¯å¾„(ç”¨os.path.join())ã€‚ D:\\pccharmcode\\api_key\\__init__.py\\..\\.. BASE_DIR = os.path.normpath( os.path.join( os.path.abspath(r'D:\\pccharmcode\\api_key\\__init__.py'), '..', '..' ) ) print(BASE_DIR) ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:9:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"sysæ¨¡å— ä¸»è¦æŒæ¡ sys.argv sys.exit(0) sys.path å…¶ä»– sys.argv å‘½ä»¤è¡Œå‚æ•°Listï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ç¨‹åºæœ¬èº«è·¯å¾„ sys.exit(n) é€€å‡ºç¨‹åºï¼Œæ­£å¸¸é€€å‡ºæ—¶exit(0) sys.version è·å–Pythonè§£é‡Šç¨‹åºçš„ç‰ˆæœ¬ä¿¡æ¯ sys.maxint æœ€å¤§çš„Intå€¼ sys.path è¿”å›æ¨¡å—çš„æœç´¢è·¯å¾„ï¼Œåˆå§‹åŒ–æ—¶ä½¿ç”¨PYTHONPATHç¯å¢ƒå˜é‡çš„å€¼ sys.platform è¿”å›æ“ä½œç³»ç»Ÿå¹³å°åç§° æ¨¡æ‹Ÿä¸‹è½½è¿›åº¦æ¡ print(('[%%-%ds]' %50) %('#'*1)) print(('[%%-%ds]' %50) %('#'*2)) print(('[%%-%ds]' %50) %('#'*3)) print(('[%%-%ds]' %50) %('#'*4)) print(('[%%-%ds]' %50) %('#'*5)) print(('[%%-%ds]' %50) %('#'*6)) print(('[%%-%ds]' %50) %('#'*7)) æ•ˆæœï¼š [# ] [## ] [### ] [#### ] [##### ] [###### ] [####### ] import time import sys def progress(percent,width=50): if percent \u003e= 1: percent=1 show_str = ('[%%-%ds]' % width) % ('#' * int(width*percent)) print('\\r%s %d%%' %(show_str,int(100*percent)),end='') recv_size=0 total_size=10241 while recv_size \u003c total_size: time.sleep(0.1) #æ¨¡æ‹Ÿæ•°æ®çš„ä¼ è¾“å»¶è¿Ÿ recv_size+=1024 #æ¯æ¬¡æ”¶1024 progress(recv_size/total_size) ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:10:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"shutilæ¨¡å— é«˜çº§çš„æ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€å‹ç¼©åŒ… å¤„ç†æ¨¡å—ã€‚ æ ¼å¼ï¼š shutil.copyfileobj(fsrc, fdst[, length]) å°†æ–‡ä»¶å†…å®¹æ‹·è´åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ import shutil shutil.copyfileobj(open('old.xml','r'), open('new.xml', 'w')) æ ¼å¼ï¼š shutil.copyfile(src, dst) æ‹·è´æ–‡ä»¶ shutil.copyfile('f1.log', 'f2.log') #ç›®æ ‡æ–‡ä»¶æ— éœ€å­˜åœ¨ æ ¼å¼ï¼š shutil.copymode(src, dst) ä»…æ‹·è´æƒé™ã€‚å†…å®¹ã€ç»„ã€ç”¨æˆ·å‡ä¸å˜ shutil.copymode('f1.log', 'f2.log') #ç›®æ ‡æ–‡ä»¶å¿…é¡»å­˜åœ¨ æ ¼å¼ï¼š shutil.copystat(src, dst) ä»…æ‹·è´çŠ¶æ€çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šmode bits, atime, mtime, flags shutil.copystat('f1.log', 'f2.log') #ç›®æ ‡æ–‡ä»¶å¿…é¡»å­˜åœ¨ æ ¼å¼ï¼š shutil.copy(src, dst) æ‹·è´æ–‡ä»¶å’Œæƒé™ import shutil shutil.copy('f1.log', 'f2.log') æ ¼å¼ï¼š shutil.copy2(src, dst) æ‹·è´æ–‡ä»¶å’ŒçŠ¶æ€ä¿¡æ¯ import shutil shutil.copy2('f1.log', 'f2.log') æ ¼å¼ï¼š shutil.ignore_patterns(*patterns) shutil.copytree(src, dst, symlinks=False, ignore=None) é€’å½’çš„å»æ‹·è´æ–‡ä»¶å¤¹ import shutil shutil.copytree('folder1', 'folder2', ignore=shutil.ignore_patterns('*.pyc', 'tmp*')) #ç›®æ ‡ç›®å½•ä¸èƒ½å­˜åœ¨ï¼Œæ³¨æ„å¯¹folder2ç›®å½•çˆ¶çº§ç›®å½•è¦æœ‰å¯å†™æƒé™ï¼Œignoreçš„æ„æ€æ˜¯æ’é™¤ æ‹·è´è½¯è¿æ¥: import shutil shutil.copytree('f1', 'f2', symlinks=True, ignore=shutil.ignore_patterns('*.pyc', 'tmp*')) é€šå¸¸çš„æ‹·è´éƒ½æŠŠè½¯è¿æ¥æ‹·è´æˆç¡¬é“¾æ¥ï¼Œå³å¯¹å¾…è½¯è¿æ¥æ¥è¯´ï¼Œåˆ›å»ºæ–°çš„æ–‡ä»¶. æ ¼å¼ï¼š shutil.rmtree(path[, ignore_errors[, onerror]]) é€’å½’çš„å»åˆ é™¤æ–‡ä»¶ import shutil shutil.rmtree('folder1') æ ¼å¼ï¼š shutil.move(src, dst) é€’å½’çš„å»ç§»åŠ¨æ–‡ä»¶ï¼Œå®ƒç±»ä¼¼mvå‘½ä»¤ï¼Œå…¶å®å°±æ˜¯é‡å‘½åã€‚ shutil.move('folder1', 'folder3') å‹ç¼©ä¸è§£å‹ç¼© æ ¼å¼ï¼š shutil.make_archive(base_name, format,...) åˆ›å»ºå‹ç¼©åŒ…å¹¶è¿”å›æ–‡ä»¶è·¯å¾„ï¼Œä¾‹å¦‚ï¼šzipã€tar. base_nameï¼š å‹ç¼©åŒ…çš„æ–‡ä»¶åï¼Œä¹Ÿå¯ä»¥æ˜¯å‹ç¼©åŒ…çš„è·¯å¾„ã€‚åªæ˜¯æ–‡ä»¶åæ—¶ï¼Œåˆ™ä¿å­˜è‡³å½“å‰ç›®å½•ï¼Œå¦åˆ™ä¿å­˜è‡³æŒ‡å®šè·¯å¾„ï¼Œ å¦‚ data_bak =\u003eä¿å­˜è‡³å½“å‰è·¯å¾„ å¦‚ï¼š/tmp/data_bak =\u003eä¿å­˜è‡³/tmp/ formatï¼š å‹ç¼©åŒ…ç§ç±»ï¼Œâ€œzipâ€, â€œtarâ€, â€œbztarâ€ï¼Œâ€œgztarâ€ root_dirï¼š è¦å‹ç¼©çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰ ownerï¼š ç”¨æˆ·ï¼Œé»˜è®¤å½“å‰ç”¨æˆ· groupï¼š ç»„ï¼Œé»˜è®¤å½“å‰ç»„ loggerï¼š ç”¨äºè®°å½•æ—¥å¿—ï¼Œé€šå¸¸æ˜¯logging.Loggerå¯¹è±¡ å°† /data ä¸‹çš„æ–‡ä»¶æ‰“åŒ…æ”¾ç½®å½“å‰ç¨‹åºç›®å½• import shutil ret = shutil.make_archive(\"data_bak\", 'gztar', root_dir='/data') å°† /dataä¸‹çš„æ–‡ä»¶æ‰“åŒ…æ”¾ç½® /tmp/ç›®å½• import shutil ret = shutil.make_archive(\"/tmp/data_bak\", 'gztar', root_dir='/data') shutil å¯¹å‹ç¼©åŒ…çš„å¤„ç†æ˜¯è°ƒç”¨ ZipFile å’Œ TarFile ä¸¤ä¸ªæ¨¡å—æ¥è¿›è¡Œçš„. è¯¦ç»†ï¼š å‹ç¼© z = zipfile.ZipFile('laxi.zip', 'w') z.write('a.log') z.write('data.data') z.close() è§£å‹ z = zipfile.ZipFile('laxi.zip', 'r') z.extractall(path='.') z.close() ä½¿ç”¨tarfileå‹ç¼©ä¸è§£å‹ç¼© import tarfile å‹ç¼© t=tarfile.open('/tmp/egon.tar','w') t.add('/test1/a.py',arcname='a.bak') t.add('/test1/b.py',arcname='b.bak') t.close() è§£å‹ç¼© t=tarfile.open('/tmp/egon.tar','r') t.extractall('/egon') t.close() ç»ƒä¹ ï¼š å°†ATMæ–‡ä»¶å¤¹ä»¥tar.gzæ–¹å¼å‹ç¼©ï¼Œç„¶åè§£å‹åˆ°aaaæ–‡ä»¶å¤¹å†…ã€‚æœ€ååˆ é™¤aaaæ–‡ä»¶å¤¹ã€‚ import shutil import tarfile #å‹ç¼© shutil.make_archive(\"backup\", 'gztar', root_dir=r'D:\\pccharmcode\\ATM') #è§£å‹ o = tarfile.open('backup.tar.gz', 'r') o.extractall(r'D:\\pccharmcode\\aaa') o.close() #åˆ é™¤aaaæ–‡ä»¶å¤¹ shutil.rmtree(r'D:\\pccharmcode\\aaa') ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:11:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"xmlæ¨¡å— from xml.etree import ElementTree tree = ElementTree.parse('a.xml') root = tree.getroot() # print(root.tag) # print(root.attrib) # print(root.text) ä¸‰ç§æŸ¥æ‰¾æ–¹å¼ ä»å­èŠ‚ç‚¹ä¸­æŸ¥æ‰¾ æ˜¾ç¤ºä¸€ç§ print(root.find('country')) #\u003cElement 'country' at 0x000001E26EDCC130\u003e #åŠ .tag .attrib .textå°±å¯ä»¥æ˜¾ç¤ºå†…å®¹ æ˜¾ç¤ºæ‰€æœ‰ã€‚ä»¥åˆ—è¡¨çš„å½¢å¼æ˜¾ç¤ºã€‚ print(root.findall('country')) #[\u003cElement 'country' at 0x0000027D6F00C0E0\u003e, \u003cElement 'country' at 0x0000027D6F00C2C0\u003e, \u003cElement 'country' at 0x0000027D6F00C450\u003e] æ³¨æ„ï¼šå¦‚æœæ‰¾ä¸åˆ°å°±ä¼šæ˜¾ç¤º None ä»æ ‘å½¢ç»“æ„ä¸­æŸ¥æ‰¾ root.iter() print(list(root.iter('country'))) ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:12:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"éå†æ–‡æ¡£ from xml.etree import ElementTree tree = ElementTree.parse('a.xml') root = tree.getroot() for country in root: print('==========\u003e', country.tag, country.attrib, country.attrib['name']) for rank in country: print(rank.tag, rank.attrib, rank.text) ç»“æœ ==========\u003e country {'name': 'Liechtenstein'} Liechtenstein rank {'updated': 'yes'} 2 year {} 2008 gdppc {} 141100 neighbor {'name': 'Austria', 'direction': 'E'} None neighbor {'name': 'Switzerland', 'direction': 'W'} None ==========\u003e country {'name': 'Singapore'} Singapore rank {'updated': 'yes'} 5 year {} 2011 gdppc {} 59900 neighbor {'name': 'Malaysia', 'direction': 'N'} None ==========\u003e country {'name': 'Panama'} Panama rank {'updated': 'yes'} 69 year {} 2011 gdppc {} 13600 neighbor {'name': 'Costa Rica', 'direction': 'W'} None neighbor {'name': 'Colombia', 'direction': 'E'} None åªéå†yearèŠ‚ç‚¹ for year in root.iter('year'): print(year.tag, year.text) ç»“æœ year 2008 year 2011 year 2011 ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:12:1","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"ä¿®æ”¹ for c in root.iter('year'): new_year = int(c.text)+1 c.text = str(new_year) c.set('update', 'yes') c.set('version', '1.0') tree.write('b.xml') ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:12:2","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ é™¤ for country in root.findall('country'): rank = int(country.find('rank').text) if rank \u003e 50: root.remove(country) tree.write('output.xml') åœ¨countryå†…æ·»åŠ ï¼ˆappendï¼‰èŠ‚ç‚¹year2 for country in root.findall('country'): for year in country.findall('year'): if int(year.text) \u003e 2000: year2 = ElementTree.Element('year2') year2.text = 'happy-new-year' year2.attrib = {'update':'yes'} country.append(year2) #å¾€countryèŠ‚ç‚¹ä¸‹æ·»åŠ å­èŠ‚ç‚¹ tree.write('a.xml.swap') ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:12:3","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"configerparseræ¨¡å— [mysqld]å«åšsection portã€basedirç­‰ç­‰å«åšoption ç»ƒä¹ é…ç½®æ–‡ä»¶my.ini [mysqld] port = 3306 basedir = D:\\\\softnew\\\\MYSQL\\\\mysql-5.7.20-winx64 max_connections = 200 character-set-server = utf8 default-storage-engine = INNODB skip-grant-table = True [client] user = root password = 123 import configparser config = configparser.ConfigParser() config.read('my.ini') print(config.sections()) #æŸ¥çœ‹æ‰€æœ‰çš„æ ‡é¢˜ print(config.options('mysqld')) #æŸ¥çœ‹æ ‡é¢˜mysqldä¸‹æ‰€æœ‰key=valueçš„key print(config.get('mysqld', 'port')) #æŸ¥çœ‹æ ‡é¢˜mysqldä¸‹portçš„å€¼=\u003eå­—ç¬¦ä¸²æ ¼å¼ åˆ¤æ–­æœ‰æ²¡æœ‰åå­—ä¸ºaaaçš„option if config.has_option('mysqld', 'aaa'): print(config.get('mysqld', 'aaaa')) æŸ¥çœ‹å€¼çš„ç±»å‹ print(type(config.get('mysqld', 'skip-grant-table'))) #\u003cclass 'str'\u003e è½¬æ¢æˆå¸ƒå°”ç±»å‹ print(config.getboolean('mysqld', 'skip-grant-table')) print(config.getint('mysqld', 'port')) print(config.getfloat('mysqld', 'port')) å‘æ–‡ä»¶ä¸­æ·»åŠ sectionå’Œoption config.add_section('client1') config.set('client1', 'name', 'jack') config.set('client1', 'port', '2000') config.write(open('my.ini', 'w', encoding='utf-8')) my.iniæ–‡ä»¶ å°†sectionï¼ˆclient1ï¼‰ä¸­option(port)å¯¹åº”çš„å€¼2000æ”¹ä¸º3000 config.set('client1', 'port', '3000') config.write(open('my.ini', 'w', encoding='utf-8')) æŸ¥çœ‹my.iniæ–‡ä»¶ï¼Œportå¯¹åº”çš„å€¼å·²ç»æ”¹å˜ã€‚ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:13:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"hashlibæ¨¡å— ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:14:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆå«hash? hashæ˜¯ä¸€ç§ç®—æ³•ï¼ˆ3.xé‡Œä»£æ›¿äº†md5æ¨¡å—å’Œshaæ¨¡å—ï¼Œä¸»è¦æä¾› SHA1, SHA224, SHA256, SHA384, SHA512 ï¼ŒMD5 ç®—æ³•ï¼‰ï¼Œè¯¥ç®—æ³•æ¥å—ä¼ å…¥çš„å†…å®¹ï¼Œç»è¿‡è¿ç®—å¾—åˆ°ä¸€ä¸²hashå€¼ã€‚ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:14:1","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"hashå€¼çš„ç‰¹ç‚¹ åªè¦ä¼ å…¥çš„å†…å®¹ä¸€æ ·ï¼Œå¾—åˆ°çš„hashå€¼å¿…ç„¶ä¸€æ ·=====\u003eè¦ç”¨æ˜æ–‡ä¼ è¾“å¯†ç æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒã€‚ ä¸èƒ½ç”±hashå€¼è¿”è§£æˆå†…å®¹=======ã€‹æŠŠå¯†ç åšæˆhashå€¼ï¼Œä¸åº”è¯¥åœ¨ç½‘ç»œä¼ è¾“æ˜æ–‡å¯†ç ã€‚ åªè¦ä½¿ç”¨çš„hashç®—æ³•ä¸å˜ï¼Œæ— è®ºæ ¡éªŒçš„å†…å®¹æœ‰å¤šå¤§ï¼Œå¾—åˆ°çš„hashå€¼é•¿åº¦æ˜¯å›ºå®šçš„ã€‚ hashç®—æ³•å°±åƒä¸€åº§å·¥å‚ï¼Œå·¥å‚æ¥æ”¶ä½ é€æ¥çš„åŸææ–™ï¼ˆå¯ä»¥ç”¨m.update()ä¸ºå·¥å‚è¿é€åŸææ–™ï¼‰ï¼Œç»è¿‡åŠ å·¥è¿”å›çš„äº§å“å°±æ˜¯hashå€¼ã€‚ ç»ƒä¹  import hashlib m = hashlib.md5() # m=hashlib.sha256() m.update('jack'.encode('utf-8')) print(m.hexdigest()) #4ff9fc6e4e5d5f590c4f2134a8cc96d1 m.update('j'.encode('utf-8')) print(m.hexdigest()) #636a4e0a176a6cbb43dd00aec17e64ab m2 = hashlib.sha3_256() m2.update('jack123'.encode('utf-8')) print(m2.hexdigest()) #1183ac670862872ae3315c178a68dddd6166a004b0086bfa23f70e780fe7545c m2.update('j'.encode('utf-8')) print(m2.hexdigest()) #fe50db7bfb8a1e79934413625d2024114de0afd62bd17c3e9d97aee74f8553c6 æ³¨æ„ï¼šæŠŠä¸€æ®µå¾ˆé•¿çš„æ•°æ®updateå¤šæ¬¡ï¼Œä¸ä¸€æ¬¡updateè¿™æ®µé•¿æ•°æ®ï¼Œå¾—åˆ°çš„ç»“æœä¸€æ ·ã€‚ä½†æ˜¯updateå¤šæ¬¡ä¸ºæ ¡éªŒå¤§æ–‡ä»¶æä¾›äº†å¯èƒ½ã€‚ ä»¥ä¸ŠåŠ å¯†ç®—æ³•è™½ç„¶ä¾ç„¶éå¸¸å‰å®³ï¼Œä½†æ—¶å€™å­˜åœ¨ç¼ºé™·ï¼Œå³ï¼šé€šè¿‡æ’åº“å¯ä»¥åè§£ã€‚æ‰€ä»¥ï¼Œæœ‰å¿…è¦å¯¹åŠ å¯†ç®—æ³•ä¸­æ·»åŠ è‡ªå®šä¹‰keyå†æ¥åšåŠ å¯†ã€‚ import hashlib hash = hashlib.sha256('898oaFs09f'.encode('utf-8')) hash.update('alvin'.encode('utf-8')) print(hash.hexdigest()) #e79e68f070cdedcfe63eaf1a2e92c83b4cfb1b5c6bc452d214c1b7e77cdfd1c7 æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•å¹¶æŠŠå¯†ç å“ˆå¸Œ name = input('user\u003e\u003e: ') pwd = input('password\u003e\u003e: ') m = hashlib.md5() m.update(pwd.encode('utf-8')) pwd = m.hexdigest() print(name, pwd) # jack 1d6c1e168e362bc0092f247399003a88(jack123) æ¨¡æ‹Ÿæ’åº“ï¼Œå…ˆç”Ÿæˆå­—å…¸ã€‚ cryt_pwd = '1d6c1e168e362bc0092f247399003a88' pwds=[ 'jack1234', 'jack', 'jack456', 'jack123' ] def mack_dic(pwds): dic = {} for pwd in pwds: m = hashlib.md5(pwd.encode('utf-8')) dic[pwd] = m.hexdigest() return dic dic = mack_dic(pwds) for pwd in dic: if dic[pwd] == cryt_pwd: print(pwd) ç»“æœï¼šjack123 python è¿˜æœ‰ä¸€ä¸ª hmac æ¨¡å—ï¼Œå®ƒå†…éƒ¨å¯¹æˆ‘ä»¬åˆ›å»º key å’Œ å†…å®¹ è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ç„¶åå†åŠ å¯† import hmac h1=hmac.new('hello'.encode('utf-8'),digestmod='md5') h1.update('world'.encode('utf-8')) print(h1.hexdigest()) import hmac m = hmac.new(key='åŠ ç›'.encode('utf-8'), msg='jack123'.encode('utf-8'), digestmod=hashlib.sha1) print(m.hexdigest()) è¦æƒ³ä¿è¯hmacæœ€ç»ˆç»“æœä¸€è‡´ï¼Œå¿…é¡»ä¿è¯ï¼š hmac.newæ‹¬å·å†…æŒ‡å®šçš„åˆå§‹keyä¸€æ · æ— è®ºupdateå¤šå°‘æ¬¡ï¼Œæ ¡éªŒçš„å†…å®¹ç´¯åŠ åˆ°ä¸€èµ·æ˜¯ä¸€æ ·çš„å†…å®¹ # æ“ä½œä¸€ import hmac h1=hmac.new('hello'.encode('utf-8'),digestmod='md5') h1.update('world'.encode('utf-8')) print(h1.hexdigest()) # 0e2564b7e100f034341ea477c23f283b # æ“ä½œäºŒ import hmac h2=hmac.new('hello'.encode('utf-8'),digestmod='md5') h2.update('w'.encode('utf-8')) h2.update('orld'.encode('utf-8')) print(h1.hexdigest()) # 0e2564b7e100f034341ea477c23f283b ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:14:2","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"subprocessæ¨¡å— åœ¨linuxä¸­ä½¿ç”¨subporcessæ¨¡å—å¯ä»¥å®ç°shellå‘½ä»¤æ•ˆæœã€‚ åœ¨windowsä¸­ä½¿ç”¨å¯ä»¥å®ç°windowså¹³å°ä¸‹çš„å‘½ä»¤ã€‚ ä¸¾ä¾‹ï¼šåœ¨Linuxä¸‹æŸ¥æ‰¾/rootè·¯å¾„ä¸‹æ‰€æœ‰ä»¥.txtç»“å°¾çš„æ–‡ä»¶ã€‚ shell å®ç° ls /root | grep txt$ subprocessæ¨¡å—å®ç° import subprocess res1=subprocess.Popen('ls /root', shell=True,stdout=subprocess.PIPE) res=subprocess.Popen('grep txt$', shell=True, stdin=res1.stdout, stdout=subprocess.PIPE) print(res.stdout.read().decode('utf-8')) è§£æï¼š subprocess.Popen()æ‰§è¡Œå‘½ä»¤ls /rootå¹¶ä¼ å…¥ç®¡é“ï¼ˆsubprocess.PIPEï¼‰å¹¶èµ‹å€¼ç»™res1 shell=TrueæŒ‡å®šç”¨shellæ¥æ‰§è¡Œã€‚ subprocess.Popen()æ‰§è¡Œå‘½ä»¤grep txt$å…ˆæŠŠres1ä¼ è¿›æ¥ï¼Œç„¶åå†æŠŠæ•´ä¸ªå‘½ä»¤ä½œä¸ºè¾“å‡ºï¼Œæœ€åèµ‹å€¼ç»™resã€‚ è¯»è¾“å‡ºçš„å†…å®¹ï¼Œlinuxå¹³å°é»˜è®¤ç¼–ç ä¸ºutf-8ã€‚ ç»“æœï¼š a.txt output.txt url.txt windowså¹³å° æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ‰€æœ‰ä»»åŠ¡ shell tasklist ä½¿ç”¨subprocesså®ç° import subprocess res=subprocess.Popen('tasklist', shell=True, stdout=subprocess.PIPE) print(res.stdout.read().decode('gbk')) æ³¨æ„ï¼šwindowsä¸‹é»˜è®¤ç¼–ç ä¸ºgbkã€‚ä½¿ç”¨å…¶ä»–ç¼–ç ä¼šå‡ºç°ä¹±ç æƒ…å†µã€‚ ç»“æœ æ˜ åƒåç§° PID ä¼šè¯å ä¼šè¯# å†…å­˜ä½¿ç”¨ ========================= ======== ================ =========== ============ System Idle Process 0 Services 0 8 K System 4 Services 0 148 K Secure System 88 Services 0 73,304 K Registry 156 Services 0 108,364 K smss.exe 532 Services 0 1,232 K csrss.exe 868 Services 0 5,128 K Everything.exe 14296 Console 1 110,268 K LogiOptions.exe 2244 Console 1 15,932 K conhost.exe 6812 Console 1 11,480 K python.exe 9740 Console 1 10,116 K cmd.exe 3740 Console 1 4,852 K tasklist.exe 15428 Console 1 9,824 K å®˜æ–¹æ–‡æ¡£å‚è€ƒ ","date":"2022-03-26","objectID":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/:15:0","tags":["python"],"title":"pythonå¸¸ç”¨æ¨¡å—","uri":"/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯æ¨¡å—ï¼Ÿ æœ€å¸¸è§çš„åœºæ™¯ï¼Œä¸€ä¸ªæ¨¡å—å°±æ˜¯åŒ…å«äº†ä¸€ç»„åŠŸèƒ½çš„pythonæ–‡ä»¶ï¼Œä¾‹å¦‚module.py,æ¨¡å—åæ˜¯moduleã€‚å¯ä»¥ä½¿ç”¨import moduleã€‚ å››ä¸ªé€šç”¨ç±»åˆ«ï¼š ä½¿ç”¨pythonç¼–å†™çš„.pyæ–‡ä»¶ å·²è¢«ç¼–è¯‘ä¸ºå…±äº«åº“æˆ–DLLçš„cæˆ–c++æ‰©å±• æŠŠä¸€ç³»åˆ—æ¨¡å—ç»„ç»‡åˆ°ä¸€èµ·çš„æ–‡ä»¶å¤¹ï¼ˆæ³¨æ„ï¼šæ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ª__init__.pyæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¤¹ç§°ä¹‹ä¸ºåŒ…ï¼‰ ä½¿ç”¨Cç¼–å†™å¹¶è¿æ¥åˆ°pythonè§£é‡Šå™¨çš„å†…ç½®æ¨¡å— ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:1:0","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¨¡å—ï¼Ÿ ä»æ–‡ä»¶çº§åˆ«ç»„ç»‡ç¨‹åºï¼Œæ›´æ–¹ä¾¿ç®¡ç†ã€‚ æ‹¿æ¥ä¸»ä¹‰ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚ ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:2:0","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•ä½¿ç”¨æ¨¡å—ï¼Ÿ import æ¨¡å—å è°ƒç”¨æ¨¡å—é‡Œé¢çš„å‡½æ•° æ¨¡å—å.å‡½æ•°å ç¬¬ä¸€æ¬¡å¯¼å…¥æ¨¡å—ï¼Œä¼šå‘ç”Ÿ3ä»¶äº‹ï¼Œé‡å¤å¯¼å…¥åªä¼šå¼•ç”¨ä¹‹å‰åŠ è½½å¥½çš„ç»“æœã€‚ 1.äº§ç”Ÿä¸€ä¸ªæ–°çš„åç§°ç©ºé—´ã€‚ 2.è¿è¡Œspam.pyæºæ–‡ä»¶ä»£ç ï¼Œäº§ç”Ÿçš„åå­—éƒ½å­˜æ”¾äº1çš„åç§°ç©ºé—´ä¸­,è¿è¡Œè¿‡ç¨‹ä¸­globalå…³é”®å­—æŒ‡å‘çš„å°±æ˜¯è¯¥åç§°ç©ºé—´ã€‚ 3.åœ¨å½“å‰åç§°ç©ºé—´æ‹¿åˆ°ä¸€ä¸ªåå­—spamï¼Œè¯¥åå­—æŒ‡å‘1çš„åç§°ç©ºé—´ã€‚å¼•ç”¨spam.pyä¸­åå­—çš„æ–¹å¼ï¼šspam.åå­— å¼ºè°ƒï¼šè¢«å¯¼å…¥çš„æ¨¡å—åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨è‡ªå·±çš„ç‹¬ç«‹çš„åç§°ç©ºé—´ä½œä¸ºå…¨å±€åç§°ç©ºé—´ã€‚ ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:3:0","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"èµ·åˆ«å import spam as sm ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:3:1","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"ä¸€è¡Œå¯¼å…¥å¤šä¸ªæ¨¡å— import time,sys,spam ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:3:2","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"å¦ä¸€ç§ä½¿ç”¨æ¨¡å—çš„æ–¹æ³• from æ¨¡å—å import åå­— ä¼˜ç‚¹ï¼šå¼•ç”¨æ—¶ä¸ç”¨åŠ å‰ç¼€ï¼Œç®€å• ç¼ºç‚¹ï¼šå®¹æ˜“ä¸å½“åç§°ç©ºé—´çš„åå­—å†²çª from spam import money as m from spam import money,read1,read2 from spam import * # *åŒ…å«é™¤äº†ä¸‹åˆ’çº¿å¼€å¤´ä»¥å¤–æ‰€æœ‰çš„åå­—ã€‚ ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:3:3","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"pythonæ–‡ä»¶çš„ä¸¤ç§ç”¨é€” 1.å½“ä½œè„šæœ¬æ‰§è¡Œ __name__ == '__main__' 2.å½“ä½œæ¨¡å—è¢«å¯¼å…¥ä½¿ç”¨ __name__ == 'æ¨¡å—å' if __name__ == '__main__': pass ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:3:4","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"æ¨¡å—æœç´¢è·¯å¾„é¡ºåº å†…å­˜-ã€‹å†…ç½®æ¨¡å—â€“ã€‹sys.path(å½“å‰æ‰§è¡Œæ–‡ä»¶è·¯å¾„) ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:3:5","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"ä»€ä¹ˆæ˜¯åŒ… åŒ…å°±æ˜¯ä¸€ä¸ªåŒ…å«äº†__init__.pyæ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼ˆå¯ä»¥å¾€è¯¥æ–‡ä»¶å¤¹ä¸‹æ”¾ä¸€å †å­æ¨¡å—ï¼‰ ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:4:0","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"åŒ…çš„ä½¿ç”¨ æ³¨æ„ï¼šä½†å‡¡æ˜¯åœ¨å¯¼å…¥æ—¶ï¼Œå‡ºç°.ï¼Œè¿™æ˜¯å¯¼å…¥åŒ…æ‰æœ‰çš„è¯­æ³•ï¼Œ.çš„å·¦è¾¹å¿…é¡»æ˜¯ä¸€ä¸ªåŒ…ï¼Œä½¿ç”¨çš„æ—¶å€™æ²¡æœ‰è¿™ç§é™åˆ¶ã€‚ #æŠŠæ‰€æœ‰è¦å¯¼å…¥çš„.pyæ¨¡å—åˆ°æ”¾åˆ°ä¸€ä¸ªåŒ…ä¸­ï¼Œç„¶ååªéœ€è¦å¯¼å…¥åŒ…åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ import package1 ç»ƒä¹ ï¼š åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºpython package åå­—ä¸ºpackage1ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»º__init__.py åœ¨å’Œpackage1åŒçº§çš„ç›®å½•ä¸‹import.pyä¸­å¯¼å…¥package1,å¯ä»¥ä½¿ç”¨package1ä¸­å®šä¹‰çš„æ¨¡å—. åœ¨package1ä¸­åˆ›å»ºæ¨¡å—func.pyã€‚ func.pyå†…å®¹å¦‚ä¸‹ï¼š def f1(): print('Welcome to my f1') print('from func.py') __init__.pyå†…å®¹å¦‚ä¸‹ï¼š print('__init__.py yeah') ä½¿ç”¨package1åŒ…ä¸­æ¨¡å—func.pyä¸­çš„f1()å‡½æ•°ï¼ˆåœ¨import.pyä¸­å¯¼å…¥ï¼‰ æ–¹æ³•1ï¼š import package1.func package1.func.f1() æ–¹æ³•2ï¼š from package1 import func func.f1() ç»“æœ: __init__.py yeah from func.py Welcome to my f1 åˆ†æï¼šè·¯å¾„æŸ¥æ‰¾é¡ºåº __init__.py-\u003efunc.py-\u003ef1() ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:5:0","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•åœ¨pycharmä¸­åˆ›å»ºåŒ…ï¼Ÿ new-\u003ePython Package ç»ƒä¹ ï¼š å±‚çº§ç»“æ„å¦‚ä¸‹ /root/import.py /root/package1 â”œâ”€â”€ init.py â”œâ”€â”€ func.py â””â”€â”€ package2 â”œâ”€â”€ init.py â””â”€â”€ myfunc.py /root/package1/func.pyä¸­çš„å†…å®¹ def f1(): print('Welcome to my f1') /root/package1/package2/myfunc.py æ¨¡å—ä¸­å†…å®¹ def max1(): print('This is a test!') éœ€æ±‚ï¼š 1.åœ¨/root/import.pyä½¿ç”¨/root/package1/package2/myfunc.py æ¨¡å—ä¸­max1() å‡½æ•° 2.åœ¨/root/import.pyä½¿ç”¨/root/package1/func.py æ¨¡å—ä¸­f1() å‡½æ•° è§£å†³æ–¹æ³•ï¼š æ€è·¯ï¼š/root/package1/__init__.pyä¸­å…ˆå¯¼å…¥max1() å‡½æ•°,å†å¯¼å…¥f1() å‡½æ•° from package1.package2.myfunc import max1 from package1.func import f1 ç„¶ååœ¨æ‰§è¡Œæ–‡ä»¶/root/import.pyä¸­åªéœ€è¦å¯¼å…¥åŒ…package1 å°±å¯ä»¥ç›´æ¥ä½¿ç”¨max1()å’Œf1()äº†ã€‚ import package1 package1.max1() package1.f1() ç»“æœå¦‚ä¸‹ This is a test! Welcome to my f1 æ‹“å±•ï¼š å±‚çº§ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š /root/import.py /root/package1 â”œâ”€â”€ init.py â”œâ”€â”€ func.py â”œâ”€â”€ package2 â”‚ â”œâ”€â”€ init.py â”‚ â””â”€â”€ myfunc.py â””â”€â”€ package3 â”œâ”€â”€ init.py â””â”€â”€ myfunc1.py /root/package1/package3/myfunc1.py ä¸­çš„å†…å®¹ def f3(): print('from package3 myfunc1.py') éœ€æ±‚ï¼šåœ¨/root/import.pyä¸­ä½¿ç”¨package3ä¸­myfunc1æ¨¡å—ä¸­çš„f3å‡½æ•°ï¼ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼‰ è§£å†³ï¼š 1.åœ¨/root/package1/__init__.py ä¸­å…ˆå¯¼å…¥f3å‡½æ•°(ç‚¹è¡¨ç¤ºåœ¨å½“å‰è·¯å¾„ä¸‹) from .package3.myfunc1 import f3 2.åœ¨/root/import.pyä¸­å¯¼å…¥package1åŒ…å³å¯ç›´æ¥ä½¿ç”¨f3å‡½æ•° import package1 package1.f3() ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:5:1","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"æ–°ä¸‹è½½çš„æ¨¡å—aaaå¦‚ä½•å¯¼å…¥ï¼Ÿ import sys sys.path.append(r'aaaç»å¯¹è·¯å¾„') ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:5:2","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚ä½•è¿æ¥ä¸¤ä¸ªæˆ–è€…å¤šä¸ªè·¯å¾„åï¼Ÿ ä½¿ç”¨os.path.join()å‡½æ•° import os print(os.path.join(r'C:', '\\\\', 'a', 'b', 'c.txt')) ç»“æœ C:\\a\\b\\c.txt ","date":"2022-03-26","objectID":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/:5:3","tags":["python"],"title":"æ¨¡å—ä¸åŒ…","uri":"/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/"},{"categories":["ç¼–ç¨‹"],"content":"åŸºäºk8sä¸­cniæ’ä»¶calicoç½‘ç»œåŸç†ä½¿ç”¨æ€»ç»“ ","date":"2022-03-25","objectID":"/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/:1:0","tags":["k8s"],"title":"k8sç½‘è·¯é€šä¿¡","uri":"/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"},{"categories":["ç¼–ç¨‹"],"content":"1.å®éªŒç¯å¢ƒ name version ip cni master v1.22.2 ens33:10.4.7.60 calico worker1 v1.22.2 ens33:10.4.7.61 calico worker2 v1.22.2 ens33:10.4.7.62 calico ","date":"2022-03-25","objectID":"/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/:1:1","tags":["k8s"],"title":"k8sç½‘è·¯é€šä¿¡","uri":"/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"},{"categories":["ç¼–ç¨‹"],"content":"2.å®éªŒæ•´ä½“æ‹“æ‰‘ ","date":"2022-03-25","objectID":"/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/:1:2","tags":["k8s"],"title":"k8sç½‘è·¯é€šä¿¡","uri":"/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"},{"categories":["ç¼–ç¨‹"],"content":"3.éƒ¨ç½²ä¸€ä¸ªdeployment é—®é¢˜1 podçš„ipä»å“ªé‡Œæ¥ï¼Ÿ ç”±kube-controller-manageræ¥åˆ†é…ã€‚ root@master:~# cat /etc/kubernetes/manifests/kube-controller-manager.yaml | grep cidr - --allocate-node-cidrs=true - --cluster-cidr=10.244.0.0/16 é—®é¢˜2 å¦‚ä½•ç¡®å®šé›†ç¾¤ä¸Šæ­£åœ¨ä½¿ç”¨çš„cniç½‘ç»œæ’ä»¶? åœ¨masterèŠ‚ç‚¹ä¸ŠæŸ¥çœ‹ é—®é¢˜3 åœ¨k8sä¸­ï¼Œdocker ä½¿ç”¨çš„æ˜¯bridgeï¼ˆç½‘æ¡¥ï¼‰æ¨¡å¼ï¼Œå¹¶ä¸”å§‹ç»ˆå¤„äºDownçŠ¶æ€ï¼Œé‚£ä¹ˆcalicoä½¿ç”¨çš„ä¹Ÿæ˜¯ç½‘æ¡¥æ¨¡å¼ç ï¼Ÿ ä½¿ç”¨ip -d aå¯ä»¥æŸ¥çœ‹ç½‘å¡æ¨¡å¼. calicoä½¿ç”¨éƒ½æ˜¯vxlanæŠ€æœ¯ã€‚ root@master:~# ip -d a 1: lo: \u003cLOOPBACK,UP,LOWER_UP\u003e mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 promiscuity 0 minmtu 0 maxmtu 0 numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether 00:0c:29:30:56:5c brd ff:ff:ff:ff:ff:ff promiscuity 0 minmtu 46 maxmtu 16110 numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 inet 10.4.7.60/24 brd 10.4.7.255 scope global ens33 valid_lft forever preferred_lft forever inet6 fe80::20c:29ff:fe30:565c/64 scope link valid_lft forever preferred_lft forever 3: docker0: \u003cNO-CARRIER,BROADCAST,MULTICAST,UP\u003e mtu 1500 qdisc noqueue state DOWN group default link/ether 02:42:97:3a:db:c3 brd ff:ff:ff:ff:ff:ff promiscuity 0 minmtu 68 maxmtu 65535 bridge forward_delay 1500 hello_time 200 max_age 2000 ageing_time 30000 stp_state 0 priority 32768 vlan_filtering 0 vlan_protocol 802.1Q bridge_id 8000.2:42:97:3a:db:c3 designated_root 8000.2:42:97:3a:db:c3 root_port 0 root_path_cost 0 topology_change 0 topology_change_detected 0 hello_timer 0.00 tcn_timer 0.00 topology_change_timer 0.00 gc_timer 102.44 vlan_default_pvid 1 vlan_stats_enabled 0 vlan_stats_per_port 0 group_fwd_mask 0 group_address 01:80:c2:00:00:00 mcast_snooping 1 mcast_router 1 mcast_query_use_ifaddr 0 mcast_querier 0 mcast_hash_elasticity 16 mcast_hash_max 4096 mcast_last_member_count 2 mcast_startup_query_count 2 mcast_last_member_interval 100 mcast_membership_interval 26000 mcast_querier_interval 25500 mcast_query_interval 12500 mcast_query_response_interval 1000 mcast_startup_query_interval 3124 mcast_stats_enabled 0 mcast_igmp_version 2 mcast_mld_version 1 nf_call_iptables 0 nf_call_ip6tables 0 nf_call_arptables 0 numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0 valid_lft forever preferred_lft forever 4: cali64bc2599f1b@if3: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1450 qdisc noqueue state UP group default link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid 0 promiscuity 0 minmtu 68 maxmtu 65535 veth numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 inet6 fe80::ecee:eeff:feee:eeee/64 scope link valid_lft forever preferred_lft forever 5: cali186813c9403@if3: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1450 qdisc noqueue state UP group default link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid 1 promiscuity 0 minmtu 68 maxmtu 65535 veth numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 inet6 fe80::ecee:eeff:feee:eeee/64 scope link valid_lft forever preferred_lft forever 6: calia0e2fa62436@if3: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1450 qdisc noqueue state UP group default link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid 2 promiscuity 0 minmtu 68 maxmtu 65535 veth numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 inet6 fe80::ecee:eeff:feee:eeee/64 scope link valid_lft forever preferred_lft forever 7: calia67de3f32d9@if3: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1450 qdisc noqueue state UP group default link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid 3 promiscuity 0 minmtu 68 maxmtu 65535 veth numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 inet6 fe80::ecee:eeff:feee:eeee/64 scope link valid_lft forever preferred_lft forever 10: vxlan.calico: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 145","date":"2022-03-25","objectID":"/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/:1:3","tags":["k8s"],"title":"k8sç½‘è·¯é€šä¿¡","uri":"/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"},{"categories":["linux"],"content":"ç³»ç»Ÿç¯å¢ƒ [root@43f873a76b81 ~]# uname -a Linux 43f873a76b81 4.18.0-147.5.1.el8_1.x86_64 #1 SMP Wed Feb 5 02:00:39 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux [root@43f873a76b81 ~]# cat /etc/*release* CentOS Linux release 7.9.2009 (Core) Derived from Red Hat Enterprise Linux 7.9 (Source) NAME=\"CentOS Linux\" VERSION=\"7 (Core)\" ID=\"centos\" ID_LIKE=\"rhel fedora\" VERSION_ID=\"7\" PRETTY_NAME=\"CentOS Linux 7 (Core)\" ANSI_COLOR=\"0;31\" CPE_NAME=\"cpe:/o:centos:centos:7\" HOME_URL=\"https://www.centos.org/\" BUG_REPORT_URL=\"https://bugs.centos.org/\" CENTOS_MANTISBT_PROJECT=\"CentOS-7\" CENTOS_MANTISBT_PROJECT_VERSION=\"7\" REDHAT_SUPPORT_PRODUCT=\"centos\" REDHAT_SUPPORT_PRODUCT_VERSION=\"7\" CentOS Linux release 7.9.2009 (Core) CentOS Linux release 7.9.2009 (Core) cpe:/o:centos:centos:7 ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:1","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"æ£€æŸ¥æ˜¯å¦æœ‰sshæœåŠ¡,æ²¡æœ‰åˆ™éœ€è¦å®‰è£…openssh-serveræœåŠ¡ [root@43f873a76b81 ~]# rpm -qa| grep ssh openssh-7.4p1-22.el7_9.x86_64 openssh-server-7.4p1-22.el7_9.x86_64 libssh2-1.8.0-4.el7.x86_64 [root@43f873a76b81 ~]# yum install -y openssh-server ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:2","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"ç¼–è¾‘vi /etc/ssh/sshd_config æ–‡ä»¶ï¼Œç¦ç”¨rootç”¨æˆ·ç›´æ¥ç™»å½•ï¼Œ1åˆ†é’Ÿæ— æ“ä½œè‡ªåŠ¨é€€å‡ºç³»ç»Ÿã€‚ ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:3","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œå…¶ä»–å…¨æ³¨é‡Šæ‰ã€‚ Port 22 LoginGraceTime 1m PermitRootLogin no AuthorizedKeysFile .ssh/authorized_keys UsePAM yes X11Forwarding yes AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE AcceptEnv XMODIFIERS Subsystem sftp /usr/libexec/openssh/sftp-server Protocol 2 ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:4","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"è§£é‡Šï¼š Port 22 #ä½¿ç”¨22ç«¯å£è¿æ¥ LoginGraceTime 1m #ç™»å½•ç³»ç»Ÿå1åˆ†é’Ÿå†…ä¸æ“ä½œè‡ªåŠ¨é€€å‡ºã€‚è®¾ç½®ç©ºé—²ä¼šè¯è¶…æ—¶æ—¶é•¿ã€‚ PermitRootLogin no #ç¦æ­¢rootç”¨æˆ·ç›´æ¥ç™»å½• UsePAM yes #ä½¿ç”¨pamæ¨¡å— X11Forwarding yes # å¼€å¯GUIç•Œé¢ Subsystem sftp /usr/libexec/openssh/sftp-server Protocol 2 #ä½¿ç”¨ç‰ˆæœ¬2æ›´åŠ å®‰å…¨ã€‚ ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:5","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"æ·»åŠ ä¸€ä¸ªæ™®é€šç”¨æˆ·adminå¹¶è®¾ç½®å¯†ç admin useradd admin passwd admin ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:6","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"æ›´æ”¹pamæ¨¡å—è®¾ç½®ï¼Œå¯†ç è¾“é”™åç­‰å¾…120såé‡è¯•ã€‚ ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:7","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"ä¸€å®šè¦åŠ åœ¨ç¬¬ä¸€è¡Œã€‚ vi /etc/pam.d/login #%PAM-1.0 auth required pam_tally2.so onerr=fail deny=3 unlock_time=120 even_deny_root root_unlock_time=120 vi /etc/pam.d/sshd #%PAM-1.0 auth required pam_tally2.so onerr=fail deny=3 unlock_time=120 even_deny_root root_unlock_time=120 ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:8","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"æœ€åé‡å¯sshæœåŠ¡ systemctl restart sshd ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:9","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"æµ‹è¯•æ•ˆæœ ssh admin@172.16.0.3 Account locked due to 27 failed logins Password: Account locked due to 29 failed logins Password: ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:10","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"æŸ¥çœ‹ç™»é™†ä¿¡æ¯ [root@43f873a76b81 ~]# pam_tally2 --user Login Failures Latest failure From root 3 03/16/22 06:04:08 gateway admin 36 03/16/22 06:04:17 gateway ","date":"2022-03-16","objectID":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/:0:11","tags":["pamæ¨¡å—"],"title":"pamæ¨¡å—é™åˆ¶ç™»å½•","uri":"/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/"},{"categories":["linux"],"content":"Linux ä¿¡æ¯æŸ¥è¯¢å‘½ä»¤ ","date":"2022-02-25","objectID":"/linux-%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4/:0:0","tags":["linux"],"title":"Linux ä¿¡æ¯æŸ¥è¯¢å‘½ä»¤","uri":"/linux-%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"ç¡¬ä»¶æŸ¥è¯¢ æŸ¥çœ‹ CPU ä¿¡æ¯ cat /proc/cpuinfo æŸ¥çœ‹ç‰©ç† CPU æ•°é‡ cat /proc/cpuinfo |grep \"physical id\"|sort |uniq|wc -l æŸ¥çœ‹é€»è¾‘ CPU æ•°é‡ cat /proc/cpuinfo |grep \"processor\"|wc -l æŸ¥çœ‹æ¯ä¸ª CPU ä¸­ core çš„æ•°é‡ (æ ¸å¿ƒæ•°) cat /proc/cpuinfo |grep \"cores\"|uniq æŸ¥çœ‹ CPU çš„ä¸»é¢‘ cat /proc/cpuinfo |grep MHz|uniq æŸ¥çœ‹æ“ä½œç³»ç»Ÿå†…æ ¸ä¿¡æ¯ uname -a æŸ¥çœ‹ CPU å‹å· cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c # 8 Intel(R) Core(TM) i7-4770 CPU @ 3.40GHz å‰é¢ 8 ä»£è¡¨ CPU æ•°é‡. æŸ¥çœ‹ CPU è¿è¡Œåœ¨ 32bit æˆ– 64bit æ¨¡å¼ getconf LONG_BIT # 64 è¯´æ˜å½“å‰ CPU è¿è¡Œåœ¨ 64bit æ¨¡å¼ä¸‹,ä½†å¹¶ä¸ä»£è¡¨ä¸æ”¯æŒ 32bit,åä¹‹äº¦ç„¶. æŸ¥çœ‹ CPU æ˜¯å¦æ”¯æŒ 64bit è®¡ç®— cat /proc/cpuinfo | grep flags | grep ' lm ' | wc -l # 8 (ç»“æœå¤§äº 0, è¯´æ˜æ”¯æŒ 64bit è®¡ç®—. lm æŒ‡ long mode, æ”¯æŒ lm åˆ™æ˜¯ 64bit) æŸ¥çœ‹æœºå™¨å‹å· dmidecode | grep \"Product Name\" æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ dmesg | grep -i eth æŸ¥çœ‹å†…å­˜ä¿¡æ¯ cat /proc/meminfo æŸ¥çœ‹å†…å­˜æ€»é‡ grep MemTotal /proc/meminfo æŸ¥çœ‹ç©ºé—²å†…å­˜æ€»é‡ grep MemFree /proc/meminfo æŸ¥çœ‹æŒ‡å®šç›®å½•çš„å¤§å° du -sh \u003cç›®å½•å\u003e æŸ¥çœ‹å„åˆ†åŒºä½¿ç”¨æƒ…å†µ df -h æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶é—´ã€ç”¨æˆ·æ•°ã€è´Ÿè½½ uptime æŸ¥çœ‹æ“ä½œç³»ç»Ÿç‰ˆæœ¬ head -n 1 /etc/issue æŸ¥çœ‹ç¯å¢ƒå˜é‡ env æŸ¥çœ‹è®¡ç®—æœºå hostname ","date":"2022-02-25","objectID":"/linux-%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4/:1:0","tags":["linux"],"title":"Linux ä¿¡æ¯æŸ¥è¯¢å‘½ä»¤","uri":"/linux-%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"CentOS 7 å¸¸è§„å‘½ä»¤ ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:0:0","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"æ–‡ä»¶ç±» ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:1:0","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"å¸¸è§„ tar æ‰“åŒ…è§£åŒ… tar cvf FileName.tar DirName or FileName # æ‰“åŒ… tar xvf FileName.tar -C æŒ‡å®šä½ç½®ç›®å½• # è§£åŒ… tar gz æ‰“åŒ…å‹ç¼© tar zcvf FileName.tar.gz DirName or FileName # æ‰“åŒ…å¹¶å‹ç¼© tar zxvf FileName.tar.gz -C æŒ‡å®šä½ç½®ç›®å½• # è§£åŒ… zip å‹ç¼©è§£å‹ç¼© zip FileName.zip FileName # å‹ç¼©æ–‡ä»¶ zip -r DirName.zip DirName # å‹ç¼©ç›®å½• unzip xxx.zip # è§£å‹ç¼© ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:1:1","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"æ–‡ä»¶ä¸‹è½½ ä¸‹è½½è¦†ç›– wget https://xxx.com/xxx.zip -O /xxx/xxx.zip # -O é‡å‘½åå¹¶ç›´æ¥è¦†ç›– ä¸‹è½½æŒ‡å®šè·¯å¾„æ¯”å¯¹æ–°æ—§ç›´æ¥è¦†ç›– wget -P /xxx/xxx -N https://xxx.com/xxx.zip # -P æŒ‡å®šä¸‹è½½è·¯å¾„,å¦‚ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º. # -N åªä¸‹è½½æ¯”æœ¬åœ°æ–°çš„æ–‡ä»¶å¹¶è¦†ç›– ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:1:2","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"æ–‡ä»¶ä¼ è¾“ æ–‡ä»¶ä¸‹è½½ - ä»è¿œç¨‹æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶åˆ°æœ¬æœåŠ¡å™¨ scp -P 22 root@8.8.8.8:/root/1.zip /root æ–‡ä»¶ä¸Šä¼  - ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹æœåŠ¡å™¨ scp -P 22 /root/st/1.zip root@8.8.8.8:/root ç›®å½•ä¸‹è½½ - ä»è¿œç¨‹æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶å¤¹åˆ°æœ¬æœåŠ¡å™¨ scp -r -P 22 root@8.8.8.8:/root/xx /root ç›®å½•ä¸Šä¼  - ä¸Šä¼ æœ¬åœ°æ–‡ä»¶å¤¹åˆ°è¿œç¨‹æœåŠ¡å™¨ scp -r -P 22 /root/xx root@8.8.8.8:/root ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:1:3","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"æ–‡ä»¶æŸ¥æ‰¾ æŸ¥è¯¢å½“å‰ç›®å½•ä¸‹åŠæ‰€æœ‰å­ç›®å½•ä¸‹çš„æŸæ–‡ä»¶,å¹¶æ‹·è´åˆ°å½“å‰æ–‡ä»¶å¤¹ find . -name \"*.txt\" | xargs -I{} cp {} ./ find . -name \"*.*\" | xargs -I{} cp {} ./ æŸ¥è¯¢å½“å‰ç›®å½•ä¸‹åŠæ‰€æœ‰å­ç›®å½•ä¸‹çš„æŸæ–‡ä»¶,å¹¶åˆ é™¤. find . -name \".DS_Store\" | xargs -I{} rm {} ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:1:4","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"è¿ç»´ç±» ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:2:0","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"åŸºç¡€é…ç½® å…è®¸ root ç™»é™†åŠä¿®æ”¹ç«¯å£ vi /etc/ssh/sshd_config Port 22222 # é…ç½®ç«¯å£ PermitRootLogin yes PasswordAuthentication yes ClientAliveInterval 30 # é‡å¯ sshd systemctl restart sshd yum æº yum repolist yum repolist all # æŸ¥çœ‹ yum æº yum -y install epel-release # å¦‚æ—  epel/x86_64 æ¨èå…ˆå®‰è£… epel æº yum clean all yum makecache # æ¸…é™¤å¹¶é‡å»ºç¼“å­˜ yum update -y # æ›´æ–° # å¦‚éœ€ä½¿ç”¨ epel æºå›½å†…é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤: mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.backup mv /etc/yum.repos.d/epel-testing.repo /etc/yum.repos.d/epel-testing.repo.backup wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo yum clean all yum makecache ä¿®æ”¹ç½‘ç»œä¿¡æ¯ cd /etc/sysconfig/network-scripts # ls æŸ¥çœ‹å½“å‰ç½‘å¡ä¿¡æ¯,å¯èƒ½ä¸º ifcfg-eth0 ifcfg-ens192 ç­‰ç­‰. vi ifcfg-eth0 # ç¼–è¾‘ä¿®æ”¹ç½‘ç»œä¿¡æ¯ service network restart # é‡å¯ç½‘ç»œæœåŠ¡ æ—¶åŒºåŠ ntp æ—¶é—´åŒæ­¥ tzselect # é€‰æ‹©æ—¶åŒº mv /etc/localtime /etc/localtime.bak # å¤‡ä»½ localtime ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime # åˆ›å»ºæ—¶åŒºè½¯é“¾æ¥,å†æ¬¡ date æ£€æŸ¥æ—¶åŒº. yum -y install ntpdate # å®‰è£… ntpdate ntpdate cn.pool.ntp.org # åŒæ­¥æ—¶é—´ # å¤‡é€‰ ntp æœåŠ¡å™¨ cn.pool.ntp.org ntp.aliyun.com ntp1.aliyun.com time1.cloud.tencent.com screen å¸¸ç”¨å‘½ä»¤ yum -y install screen # å®‰è£… screen screen -S xxx # æ–°å»ºåä¸º xxx çš„ session screen -ls # åˆ—å‡ºå½“å‰æ‰€æœ‰ session screen -r xxx # æ¢å¤åˆ° xxx è¿™ä¸ª session screen -d xxx # è¿œç¨‹åˆ†ç¦» xxx è¿™ä¸ª session screen -d -r xxx # ç»“æŸå½“å‰ session å¹¶æ¢å¤åˆ° xxx è¿™ä¸ª session screen -S xxx -X quit # è¿œç¨‹åˆ é™¤ session ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:2:1","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"å¸¸è§„æŸ¥è¯¢ æ¸…é™¤å†å²ç™»å½•è®°å½• echo \u003e /var/log/wtmp æ¸…é™¤å†å²å‘½ä»¤è®°å½• history -c \u0026\u0026 history -w ä¸€é”®æ¸…é™¤å¹¶é€€å‡º echo \u003e /var/log/wtmp \u0026\u0026 history -c \u0026\u0026 history -w \u0026\u0026 exit æŸ¥çœ‹ç›®å½•å ç”¨ç©ºé—´ du -h --max-depth=1 /home ç«¯å£å ç”¨æŸ¥è¯¢ netstat -ntlp netstat -ntlp | grep 80 # æŸ¥è¯¢80ç«¯å£å ç”¨ CPUå†…å­˜å ç”¨æŸ¥è¯¢ ps aux|head -1;ps aux|grep -v PID|sort -rn -k +3|head # è·å–å ç”¨CPUèµ„æºæœ€å¤šçš„10ä¸ªè¿›ç¨‹ ps aux|head -1;ps aux|grep -v PID|sort -rn -k +4|head # è·å–å ç”¨å†…å­˜èµ„æºæœ€å¤šçš„10ä¸ªè¿›ç¨‹ é‡æ–°åŠ è½½systemctl sudo systemctl daemon-reload ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:2:2","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"iptables ä½¿ç”¨ iptables éœ€ç¦ç”¨é»˜è®¤é˜²ç«å¢™ firewalld yum -y install iptables-services # å®‰è£… iptables iptables-services systemctl stop firewalld systemctl disable firewalld # ç¦ç”¨ firewall systemctl start iptables systemctl status iptables systemctl enable iptables # å¯ç”¨ iptables iptables -P INPUT ACCEPT iptables -P OUTPUT ACCEPT iptables -P FORWARD ACCEPT iptables -F service iptables save # è®¾ç½®é»˜è®¤è§„åˆ™å¹¶æ¸…ç©ºæ‰€æœ‰è§„åˆ™,ä¿å­˜è®¾ç½®. # ä»¥ä¸‹ä¸ºå¿«é€Ÿæ‰§è¡Œ iptables -P INPUT ACCEPT \u0026\u0026 \\ iptables -P OUTPUT ACCEPT \u0026\u0026 \\ iptables -P FORWARD ACCEPT \u0026\u0026 \\ iptables -F \u0026\u0026 \\ service iptables save ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:2:3","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"é˜²ç«å¢™ å¸¸è§„å‘½ä»¤ sudo firewall-cmd --add-service=http --permanent sudo firewall-cmd --add-service=https --permanent sudo firewall-cmd --add-port=80/tcp --permanent sudo firewall-cmd --add-port=443/tcp --permanent sudo firewall-cmd --add-port=4000-5000/tcp --permanent sudo firewall-cmd --remove-port=XXXX/tcp --permanent sudo firewall-cmd --reload sudo firewall-cmd --list-all æ›´å¤šå‘½ä»¤ # æŸ¥çœ‹æ˜¯å¦å¼€å¯ systemctl status firewalld.service # æ‰“å¼€é˜²ç«å¢™ systemctl start firewalld.service # åœç”¨é˜²ç«å¢™ systemctl disable firewalld # ç¦ç”¨é˜²ç«å¢™ systemctl stop firewalld.service # å¼€æœºå¯åŠ¨ systemctl enable firewalld # å–æ¶ˆå¼€æœºå¯åŠ¨ systemctl disable firewalld # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ firewall-cmd --state # æŸ¥çœ‹æ¥å£ä¿¡æ¯ firewall-cmd --list-all # æ›´æ–°é˜²ç«å¢™è§„åˆ™æ–¹æ³•1:æ— éœ€æ–­å¼€è¿æ¥ï¼ŒåŠ¨æ€æ›´æ”¹è§„åˆ™ firewall-cmd --reload # æ›´æ–°é˜²ç«å¢™è§„åˆ™æ–¹æ³•2:æ–­å¼€è¿æ¥ï¼Œä»¥é‡å¯çš„æ–¹å¼æ›´æ”¹è§„åˆ™ firewall-cmd --complete-reload # æŸ¥çœ‹å¸®åŠ© firewall-cmd --help --zone=NAME # æŒ‡å®š Zone --permanent # ä¸ºæ°¸ä¹…ç”Ÿæ•ˆ --timeout=seconds # æŒç»­ä¸€æ®µæ—¶é—´ï¼Œåˆ°æœŸåè‡ªåŠ¨ç§»é™¤ï¼Œç»å¸¸ç”¨äºè°ƒè¯•ï¼Œä¸”ä¸èƒ½ä¸ --permanent åŒæ—¶ä½¿ç”¨ # è¿½åŠ ä¸€ä¸ª8181ç«¯å£ï¼Œæ°¸ä¹…æœ‰æ•ˆ firewall-cmd --add-port=8181/tcp --permanent # è¿½åŠ ä¸€æ®µç«¯å£èŒƒå›´ firewall-cmd --add-port=6000-6600/tcp # å¼€æ”¾ ftp æœåŠ¡ firewall-cmd --add-service=ftp # æ·»åŠ eth0 æ¥å£è‡³ public ä¿¡ä»»ç­‰çº§ï¼Œæ°¸ä¹…æœ‰æ•ˆ firewall-cmd --zone=public --add-interface=eth0 --permanent # é…ç½® public zone çš„ç«¯å£è½¬å‘ firewall-cmd --zone=public --add-masquerade # ç„¶åè½¬å‘ tcp 22 ç«¯å£è‡³ 9527 firewall-cmd --zone=public --add-forward-port=port=22:proto=tcp:toport=9527 # è½¬å‘ 22 ç«¯å£æ•°æ®è‡³å¦ä¸€ä¸ª ip çš„ç›¸åŒç«¯å£ä¸Š firewall-cmd --zone=public --add-forward-port=port=22:proto=tcp:toaddr=192.168.1.123 # è½¬å‘ 22 ç«¯å£æ•°æ®è‡³å¦ä¸€ ip çš„ 9527 ç«¯å£ä¸Š firewall-cmd --zone=public --add-forward-port=port=22:proto=tcp:toport=9527:toaddr=192.168.1.100 # IP å°ç¦ firewall-cmd --permanent --add-rich-rule=\"rule family='ipv4' source address='192.168.1.123' reject\" # é€šè¿‡ ipset æ¥å°ç¦ ip firewall-cmd --permanent --zone=public --new-ipset=blacklist --type=hash:ip firewall-cmd --permanent --zone=public --ipset=blacklist --add-entry=192.168.1.123 # å°ç¦ç½‘æ®µ firewall-cmd --permanent --zone=public --new-ipset=blacklist --type=hash:net firewall-cmd --permanent --zone=public --ipset=blacklist --add-entry=192.168.1.0/24 # å€’å…¥ ipset è§„åˆ™ blacklistï¼Œç„¶åå°ç¦ blacklist firewall-cmd --permanent --zone=public --new-ipset-from-file=/path/blacklist.xml firewall-cmd --permanent --zone=public --add-rich-rule='rule source ipset=blacklist drop' ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:2:4","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"ç³»ç»Ÿç±» ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:3:0","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"ç£ç›˜æŒ‚è½½ ç£ç›˜åˆ†åŒºæ ¼å¼åŒ– fdisk -l # æŸ¥çœ‹åˆ°æ–°ç¡¬ç›˜ /dev/sdb fdisk /dev/sdb # ä¸ºç£ç›˜åˆ†åŒº,é€‰æ‹© n å¼€å§‹åˆ†åŒº,å…¶ä»–ç›´æ¥å›è½¦ä¿æŒé»˜è®¤,ç»“å°¾ w ä¿å­˜. mkfs.ext4 /dev/sdb1 # æ ¼å¼åŒ–åˆ†åŒº ç£ç›˜æŒ‚è½½ mkdir /data # åˆ›å»ºæŒ‚è½½ç›®å½• mount /dev/sdb1 /data # æŒ‚è½½è‡³ /data vi /etc/fstab # é…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ /dev/sdb1 /data ext4 defaults 0 0 # æ·»åŠ å¯åŠ¨é¡¹åä¿å­˜ umount /data # å–æ¶ˆæŒ‚è½½,åŒæ—¶éœ€å†æ¬¡ç¼–è¾‘ /etc/fstab åˆ é™¤å¼€æœºè‡ªåŠ¨æŒ‚è½½å‘½ä»¤. ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:3:1","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"NFS æœåŠ¡ç«¯ å®‰è£… yum -y install nfs-utils systemctl start rpcbind systemctl enable rpcbind systemctl start nfs systemctl enable nfs é…ç½® vi /etc/exports # é…ç½®æŒ‚è½½æƒé™ /share *(rw,sync,no_root_squash,no_all_squash) # æ‰€æœ‰ç½‘æ®µ /share 192.168.1.0/24(rw,sync,no_root_squash,no_all_squash) # æŒ‡å®šç½‘æ®µ /share 192.168.1.9(rw,sync,no_root_squash,no_all_squash) # æŒ‡å®š IP exportfs -r # åˆ·æ–°é…ç½® å®¢æˆ·ç«¯æŒ‚è½½ ç”¨äºæŒ‚è½½å±€åŸŸç½‘å†…ç¾¤æ™– NFS å…±äº«æ–‡ä»¶å¤¹,éœ€åœ¨ç¾¤æ™– DSM å†…å¼€å¯ NFS æœåŠ¡,å¹¶ç¼–è¾‘éœ€æŒ‚è½½çš„å…±äº«æ–‡ä»¶å¤¹,æ·»åŠ  NFS æƒé™è®¾ç½®æœåŠ¡å™¨åç§°æˆ– IP åœ°å€ä¸º \\* yum -y install nfs-utils # å®‰è£… NFS å·¥å…· mkdir /data # åˆ›å»ºæœ¬åœ°ç›®å½• mount -t nfs 192.168.1.8:/volume1/Downloads /data # æŒ‚è½½ç›®å½• vi /etc/fstab # è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ 192.168.1.8:/volume1/Downloads /data nfs defaults 0 0 # å°¾è¡Œæ·»åŠ æŒ‚è½½å‘½ä»¤ umount /data # å–æ¶ˆæŒ‚è½½,åŒæ—¶éœ€å†æ¬¡ç¼–è¾‘ /etc/fstab åˆ é™¤å¼€æœºè‡ªåŠ¨æŒ‚è½½å‘½ä»¤. ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:3:2","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"SMB æœåŠ¡ç«¯ å®‰è£…å¯åŠ¨ yum -y install samba # å®‰è£… systemctl start smb # å¯åŠ¨ systemctl status smb # çŠ¶æ€ systemctl enable smb # å¼€æœºè‡ªå¯åŠ¨ systemctl restart smb # é‡å¯ å…±äº«æ–‡ä»¶å¤¹ æœ¬æ–‡ä¸ºåŒ¿åå…±äº«æ–‡ä»¶å¤¹,æ— éœ€é…ç½®è´¦å·å¯†ç . mkdir /data # åˆ›å»ºå…±äº«æ–‡ä»¶å¤¹ chown -R nobody:nobody /data # èµ‹äºˆæ–‡ä»¶å¤¹åŒ¿åç”¨æˆ·æƒé™ vi /etc/sysconfig/selinux # OR vi /etc/selinux/config # ä¿®æ”¹ SELINUX=disabled åé‡å¯æœåŠ¡å™¨ é…ç½® smb.conf vi /etc/samba/smb.conf # å‚è€ƒä»¥ä¸‹ç¼–è¾‘ conf æ–‡ä»¶: [global] workgroup = WORKGROUP security = user map to guest = Bad User [data] comment = date path = /data public = yes read only = No é…ç½®è´¦å·å¯†ç  å‚è€ƒé“¾æ¥ useradd stille smbpasswd -a stille chown -R nobody:nobody share chmod -R 777 share vi /etc/samba/smb.conf [global] security = user workgroup = SAMBA passdb backend = tdbsam [share] comment = share path = /share writable = no create mask = 0644 directory mask = 02755 valid users = stille write list = stille æ£€æŸ¥è¯­æ³• testparm # æ£€æŸ¥è¯­æ³• systemctl restart smb # é‡å¯ smb æœåŠ¡ avahi yum install avahi-tools systemctl start avahi-daemon systemctl enable avahi-daemon vi /etc/avahi/services/smb.service \u003cservice-group\u003e \u003cname\u003eCENTOS\u003c/name\u003e \u003cservice\u003e \u003ctype\u003e_device-info._tcp\u003c/type\u003e \u003ctxt-record\u003emodel=Xserve\u003c/txt-record\u003e \u003c/service\u003e \u003cservice\u003e \u003ctype\u003e_smb._tcp\u003c/type\u003e \u003cport\u003e445\u003c/port\u003e \u003c/service\u003e \u003c/service-group\u003e systemctl restart avahi-daemon å®¢æˆ·ç«¯ åŒ¿åæŒ‚è½½ mount -t cifs -o guest //192.168.1.8/share /share # é…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ vim /etc/fstab //192.168.1.8/share /share cifs defaults,guest 0 0 ç”¨æˆ·å¯†ç æŒ‚è½½ mount -t cifs -o username=xxxxx,password='xxxxx',iocharset=utf-8 //192.168.1.8/share /share # é…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ vim /etc/fstab //192.168.1.8/share /share cifs defaults,username=xxxxx,password=xxxxx umount umount /share # é‡åˆ°æ— æ³• umount æ—¶ yum install psmisc fuser -mv /share kill -9 xxxx ","date":"2022-02-25","objectID":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/:3:3","tags":["centos7"],"title":"CentOS7 å¸¸è§„å‘½ä»¤","uri":"/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/"},{"categories":["linux"],"content":"CentOS 7 å‡çº§å†…æ ¸ uname -r # æŸ¥çœ‹å†…æ ¸ yum install -y https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm yum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available yum --enablerepo=elrepo-kernel install -y kernel-lt awk -F\\' '$1==\"menuentry \" {print i++ \" : \" $2}' /boot/grub2/grub.cfg yum install -y grub2-pc grub2-set-default 0 vim /etc/default/grub # ä¿®æ”¹ GRUB_DEFAULT=0 grub2-mkconfig -o /boot/grub2/grub.cfg reboot # é‡å¯ uname -r # æŸ¥çœ‹å†…æ ¸ ############################## ä»¥ä¸‹å¯é€‰ ############################## yum remove kernel-tools-libs.x86_64 kernel-tools.x86_64 # åˆ é™¤ç‰ˆæœ¬å·¥å…·åŒ… yum --disablerepo=\\* --enablerepo=elrepo-kernel install -y kernel-lt-tools.x86_64 # å®‰è£…æ–°ç‰ˆæœ¬å·¥å…·åŒ… rpm -qa | grep kernel # æŸ¥çœ‹å·²å®‰è£…å†…æ ¸ ","date":"2022-02-25","objectID":"/centos7-%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/:0:0","tags":["centos7"],"title":"CentOS7 å‡çº§å†…æ ¸","uri":"/centos7-%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/"},{"categories":["å·¥å…·"],"content":"Shell è„šæœ¬å¸¸ç”¨å‚è€ƒ ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:0:0","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"echo cat read sed awk ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:1:0","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"cat cat \u003e /path/${TEMP}/account.conf\u003c\u003cEOF export ${API_ID_HEADER}=\"${API_ID_INPUT}\" export ${API_KEY_HEADER}=\"${API_KEY_INPUT}\" EOF # å•å¼•å·è½¬è¯‘å†…å®¹ # cat \u003e /path/${TEMP}/account.conf\u003c\u003c'EOF' ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:1:1","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"sed sed -i \\ -e '/Port 22/a\\Port 22222' \\ -e '/^PasswordAuthentication.*yes$/s/yes/no/g' \\ -e '/^PermitRootLogin.*no$/s/no/yes/g' \\ -e '/^#PermitRoot.*yes$/s/#PermitRoot/PermitRoot/g' \\ -e '/#ClientAliveInterval/s/#ClientAliveInterval 0/ClientAliveInterval 30/g' \\ -e '/#MaxSessions/s/#MaxSessions 10/MaxSessions 100/g' \\ /etc/ssh/sshd_config ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:1:2","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"awk ä»æ–‡ä»¶è·å– åˆ†éš”ç¬¦ = å¦‚æœç¬¬ä¸€åˆ—å«æœ‰ DOMAIN æ‰“å°ç¬¬äºŒåˆ— DOMAIN=$(cat /conf/account.conf | awk -F= '{if($1~\"DOMAIN\")print $2}') ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:1:3","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"read read -p \"è¯·è¾“å…¥:\" INPUT ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:1:4","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"case case \"$INPUT\" in 1) echo \"1\" ;; 2) echo \"2\" ;; *) echo \"å…¶ä»–\" exit 0 esac ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:1:5","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"if åˆ¤æ–­ å­—ç¬¦ä¸²å¯¹æ¯”åˆ¤æ–­ if [ \"$INPUT\" == \"3\" ]; then echo \"å˜é‡ç­‰äº 3\" fi åˆ¤æ–­å˜é‡æ˜¯å¦å­˜åœ¨ if [ ! -n \"${INPUT}\" ]; then echo \"å˜é‡ä¸å­˜åœ¨\" fi åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨ if [ -d /data/test ]; then echo \"ç›®å½•å­˜åœ¨\" fi åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ if [ -f /data/test ]; then echo \"ç›®å½•å­˜åœ¨\" fi æœåŠ¡å™¨è½¯ä»¶åˆ¤æ–­ if type docker-compose \u003e/dev/null 2\u003e\u00261; then echo \"å·²å®‰è£… docker-compose\" else echo \"æœªå®‰è£… docker-compose\" fi åˆ¤æ–­æ˜¯å¦æ˜¯root if [[ $EUID -ne 0 ]]; then echo \"é root ç”¨æˆ·\" exit 1 fi åˆ¤æ–­ OpenVZ if [[ -d \"/proc/vz\" ]]; then echo -e \"è¿™æ˜¯ OpenVZ,é KVM\" exit 1 fi æ•°å€¼æ¯”è¾ƒåˆ¤æ–­ if [ $TIMES -eq 3 ]; then echo \"Times å¤§äº 3\" fi ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:2:0","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"è¿ç®—ç¬¦ ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:3:0","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"ç®—æœ¯è¿ç®—ç¬¦ #!/bin/sh a=10 b=20 val=`expr $a + $b` echo \"a + b : $val\" val=`expr $a - $b` echo \"a - b : $val\" val=`expr $a \\* $b` echo \"a * b : $val\" val=`expr $b / $a` echo \"b / a : $val\" val=`expr $b % $a` echo \"b % a : $val\" if [ $a == $b ] then echo \"a is equal to b\" fi if [ $a != $b ] then echo \"a is not equal to b\" fi è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ + åŠ æ³• expr $a + $b ç»“æœä¸º 30ã€‚ - å‡æ³• expr $a - $b ç»“æœä¸º 10ã€‚ * ä¹˜æ³• expr $a \\* $b ç»“æœä¸º 200ã€‚ / é™¤æ³• expr $b / $a ç»“æœä¸º 2ã€‚ % å–ä½™ expr $b % $a ç»“æœä¸º 0ã€‚ = èµ‹å€¼ a=$b å°†æŠŠå˜é‡ b çš„å€¼èµ‹ç»™ aã€‚ == ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œç›¸åŒåˆ™è¿”å› trueã€‚ [ $a == $b ] è¿”å› falseã€‚ != ä¸ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œä¸ç›¸åŒåˆ™è¿”å› trueã€‚ [ $a != $b ] è¿”å› trueã€‚ ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:3:1","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"å…³ç³»è¿ç®—ç¬¦ #!/bin/sh a=10 b=20 if [ $a -eq $b ] then echo \"$a -eq $b : a is equal to b\" else echo \"$a -eq $b: a is not equal to b\" fi if [ $a -ne $b ] then echo \"$a -ne $b: a is not equal to b\" else echo \"$a -ne $b : a is equal to b\" fi if [ $a -gt $b ] then echo \"$a -gt $b: a is greater than b\" else echo \"$a -gt $b: a is not greater than b\" fi if [ $a -lt $b ] then echo \"$a -lt $b: a is less than b\" else echo \"$a -lt $b: a is not less than b\" fi if [ $a -ge $b ] then echo \"$a -ge $b: a is greater or equal to b\" else echo \"$a -ge $b: a is not greater or equal to b\" fi if [ $a -le $b ] then echo \"$a -le $b: a is less or equal to b\" else echo \"$a -le $b: a is not less or equal to b\" fi å…³ç³»è¿ç®—ç¬¦åˆ—è¡¨ è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ -eq æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚ [ $a -eq $b ] è¿”å› trueã€‚ -ne æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚ [ $a -ne $b ] è¿”å› trueã€‚ -gt æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ $a -gt $b ] è¿”å› falseã€‚ -lt æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ $a -lt $b ] è¿”å› trueã€‚ -ge æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§ç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ $a -ge $b ] è¿”å› falseã€‚ -le æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ $a -le $b ] è¿”å› trueã€‚ ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:3:2","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"å¸ƒå°”è¿ç®—ç¬¦ #!/bin/sh a=10 b=20 if [ $a != $b ] then echo \"$a != $b : a is not equal to b\" else echo \"$a != $b: a is equal to b\" fi if [ $a -lt 100 -a $b -gt 15 ] then echo \"$a -lt 100 -a $b -gt 15 : returns true\" else echo \"$a -lt 100 -a $b -gt 15 : returns false\" fi if [ $a -lt 100 -o $b -gt 100 ] then echo \"$a -lt 100 -o $b -gt 100 : returns true\" else echo \"$a -lt 100 -o $b -gt 100 : returns false\" fi if [ $a -lt 5 -o $b -gt 100 ] then echo \"$a -lt 100 -o $b -gt 100 : returns true\" else echo \"$a -lt 100 -o $b -gt 100 : returns false\" fi è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ ! éè¿ç®—ï¼Œè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› falseï¼Œå¦åˆ™è¿”å› trueã€‚ [ ! false ] è¿”å› trueã€‚ -o æˆ–è¿ç®—ï¼Œæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› trueã€‚ [ $a -lt 20 -o $b -gt 100 ] è¿”å› trueã€‚ -a ä¸è¿ç®—ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼éƒ½ä¸º true æ‰è¿”å› trueã€‚ [ $a -lt 20 -a $b -gt 100 ] è¿”å› falseã€‚ ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:3:3","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"å­—ç¬¦ä¸²è¿ç®—ç¬¦ #!/bin/sh a=\"abc\" b=\"efg\" if [ $a = $b ] then echo \"$a = $b : a is equal to b\" else echo \"$a = $b: a is not equal to b\" fi if [ $a != $b ] then echo \"$a != $b : a is not equal to b\" else echo \"$a != $b: a is equal to b\" fi if [ -z $a ] then echo \"-z $a : string length is zero\" else echo \"-z $a : string length is not zero\" fi if [ -n $a ] then echo \"-n $a : string length is not zero\" else echo \"-n $a : string length is zero\" fi if [ $a ] then echo \"$a : string is not empty\" else echo \"$a : string is empty\" fi è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ = æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚ [ $a = $b ] è¿”å› falseã€‚ != æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚ [ $a != $b ] è¿”å› trueã€‚ -z æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸º0è¿”å› trueã€‚ [ -z $a ] è¿”å› falseã€‚ -n æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸ä¸º0è¿”å› trueã€‚ [ -z $a ] è¿”å› trueã€‚ str æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚ [ $a ] è¿”å› trueã€‚ ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:3:4","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦åˆ—è¡¨ #!/bin/sh file=\"/var/www/tutorialspoint/unix/test.sh\" if [ -r $file ] then echo \"File has read access\" else echo \"File does not have read access\" fi if [ -w $file ] then echo \"File has write permission\" else echo \"File does not have write permission\" fi if [ -x $file ] then echo \"File has execute permission\" else echo \"File does not have execute permission\" fi if [ -f $file ] then echo \"File is an ordinary file\" else echo \"This is sepcial file\" fi if [ -d $file ] then echo \"File is a directory\" else echo \"This is not a directory\" fi if [ -s $file ] then echo \"File size is not zero\" else echo \"File size is zero\" fi if [ -e $file ] then echo \"File exists\" else echo \"File does not exist\" fi æ“ä½œç¬¦ è¯´æ˜ ä¸¾ä¾‹ -b file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å—è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -b $file ] è¿”å› falseã€‚ -c file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -b $file ] è¿”å› falseã€‚ -d file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯ç›®å½•ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -d $file ] è¿”å› falseã€‚ -f file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯æ™®é€šæ–‡ä»¶ï¼ˆæ—¢ä¸æ˜¯ç›®å½•ï¼Œä¹Ÿä¸æ˜¯è®¾å¤‡æ–‡ä»¶ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -f $file ] è¿”å› trueã€‚ -g file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SGID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -g $file ] è¿”å› falseã€‚ -k file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº†ç²˜ç€ä½(Sticky Bit)ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -k $file ] è¿”å› falseã€‚ -p file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å…·åç®¡é“ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -p $file ] è¿”å› falseã€‚ -u file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SUID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -u $file ] è¿”å› falseã€‚ -r file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯è¯»ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -r $file ] è¿”å› trueã€‚ -w file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯å†™ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -w $file ] è¿”å› trueã€‚ -x file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -x $file ] è¿”å› trueã€‚ -s file æ£€æµ‹æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼ˆæ–‡ä»¶å¤§å°æ˜¯å¦å¤§äº0ï¼‰ï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚ [ -s $file ] è¿”å› trueã€‚ -e file æ£€æµ‹æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -e $file ] è¿”å› trueã€‚ ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:3:5","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"å‚æ•° å‚è€ƒliunk å˜é‡ å«ä¹‰ $0 å½“å‰è„šæœ¬çš„æ–‡ä»¶å $n ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚n æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºç¬¬å‡ ä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯$1ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯$2ã€‚ $# ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ä¸ªæ•°ã€‚ $* ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚ $@ ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚è¢«åŒå¼•å·(\" â€œ)åŒ…å«æ—¶ï¼Œä¸ $* ç¨æœ‰ä¸åŒï¼Œä¸‹é¢å°†ä¼šè®²åˆ°ã€‚ $? ä¸Šä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œæˆ–å‡½æ•°çš„è¿”å›å€¼ã€‚ $$ å½“å‰Shellè¿›ç¨‹IDã€‚å¯¹äº Shell è„šæœ¬ï¼Œå°±æ˜¯è¿™äº›è„šæœ¬æ‰€åœ¨çš„è¿›ç¨‹IDã€‚ ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:4:0","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["å·¥å…·"],"content":"å¾ªç¯ æ ‡å‡†æŒ‰æ¬¡å¾ªç¯ for (( i=1;i\u003c=3;i++ )); do xxx done for æ–‡ä»¶å¾ªç¯ å¥— while æ¯”å¯¹å¾ªç¯ for LOG in $(ls -1 ${LOG_PATH}/*.log) do SIZE=`ls -l $LOG | awk '{print $5}'` while [ $SIZE -gt $MAX_SIZE ] do sed -i '1,100000d' $LOG SIZE=`ls -l $LOG | awk '{print $5}'` done done ","date":"2022-02-25","objectID":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/:5:0","tags":["shell"],"title":"shellè„šæœ¬å¸¸ç”¨å‚è€ƒ","uri":"/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/"},{"categories":["linux"],"content":"iptableså¸¸ç”¨æ€»ç»“ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:0","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å®‰è£… ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:1","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"æŸ¥è¯¢å½“å‰é˜²ç«å¢™çŠ¶æ€ systemctl status iptables # æ£€æŸ¥ iptables æ˜¯å¦å®‰è£… systemctl status firewalld # æ£€æŸ¥ firewall æ˜¯å¦å®‰è£… ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:2","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"åœæ­¢å¹¶ç¦ç”¨firewalld systemctl stop firewalld # åœæ­¢ firewalld æœåŠ¡ systemctl disable firewalld # ç¦ç”¨ firewalld æœåŠ¡ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:3","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å®‰è£…iptables yum install -y iptables # å®‰è£… iptables yum install -y iptables-services # å®‰è£… iptables-services ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:4","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å¯åŠ¨å‘½ä»¤ systemctl start iptables systemctl enable iptables systemctl stop iptables systemctl restart iptables systemctl reload iptables ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:5","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"é»˜è®¤å¼€æ”¾è§„åˆ™ iptables -P INPUT ACCEPT iptables -P OUTPUT ACCEPT iptables -P FORWARD ACCEPT #æ¸…ç©ºè§„åˆ™ iptables -F ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:6","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"ä¿å­˜é…ç½® service iptables save # æ‰‹åŠ¨ä¿®æ”¹ vi /etc/sysconfig/iptables ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:7","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"æœºåˆ¶ å‘½ä»¤ iptables -t è¡¨å \u003c-A/I/D/R\u003e è§„åˆ™é“¾å [è§„åˆ™å·] \u003c-i/o ç½‘å¡å\u003e \u003c-s æºIP/æºå­ç½‘\u003e --sport æºç«¯å£ -p åè®®å \u003c-d ç›®æ ‡IP/ç›®æ ‡å­ç½‘\u003e --dport ç›®æ ‡ç«¯å£ -j åŠ¨ä½œ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:8","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å·¥ä½œæœºåˆ¶ è§„åˆ™é“¾ååŒ…æ‹¬ã€Œä¹Ÿè¢«ç§°ä¸ºäº”ä¸ªé’©å­å‡½æ•°(hook functions)ã€ï¼š INPUTé“¾ ï¼šå¤„ç†è¾“å…¥æ•°æ®åŒ…ã€‚ OUTPUTé“¾ ï¼šå¤„ç†è¾“å‡ºæ•°æ®åŒ…ã€‚ FORWARDé“¾ ï¼šå¤„ç†è½¬å‘æ•°æ®åŒ…ã€‚ PREROUTINGé“¾ ï¼šç”¨äºç›®æ ‡åœ°å€è½¬æ¢ï¼ˆDNATï¼‰ã€‚ POSTOUTINGé“¾ ï¼šç”¨äºæºåœ°å€è½¬æ¢ï¼ˆSNATï¼‰ã€‚ é˜²ç«å¢™ç­–ç•¥ é˜²ç«å¢™ç­–ç•¥ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§å«é€šç­–ç•¥ï¼Œä¸€ç§å«å µç­–ç•¥ï¼Œé€šç­–ç•¥ï¼Œé»˜è®¤é—¨æ˜¯å…³ç€çš„ï¼Œå¿…é¡»è¦å®šä¹‰è°èƒ½è¿›ã€‚å µç­–ç•¥åˆ™æ˜¯ï¼Œå¤§é—¨æ˜¯æ´å¼€çš„ï¼Œä½†æ˜¯ä½ å¿…é¡»æœ‰èº«ä»½è®¤è¯ï¼Œå¦åˆ™ä¸èƒ½è¿›ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å®šä¹‰ï¼Œè®©è¿›æ¥çš„è¿›æ¥ï¼Œè®©å‡ºå»çš„å‡ºå»ï¼Œæ‰€ä»¥é€šï¼Œæ˜¯è¦å…¨é€šï¼Œè€Œå µï¼Œåˆ™æ˜¯è¦é€‰æ‹©ã€‚å½“æˆ‘ä»¬å®šä¹‰çš„ç­–ç•¥çš„æ—¶å€™ï¼Œè¦åˆ†åˆ«å®šä¹‰å¤šæ¡åŠŸèƒ½ï¼Œå…¶ä¸­ï¼šå®šä¹‰æ•°æ®åŒ…ä¸­å…è®¸æˆ–è€…ä¸å…è®¸çš„ç­–ç•¥ï¼Œfilterè¿‡æ»¤çš„åŠŸèƒ½ï¼Œè€Œå®šä¹‰åœ°å€è½¬æ¢çš„åŠŸèƒ½çš„åˆ™æ˜¯naté€‰é¡¹ã€‚ä¸ºäº†è®©è¿™äº›åŠŸèƒ½äº¤æ›¿å·¥ä½œï¼Œæˆ‘ä»¬åˆ¶å®šå‡ºäº†â€œè¡¨â€è¿™ä¸ªå®šä¹‰ï¼Œæ¥å®šä¹‰ã€åŒºåˆ†å„ç§ä¸åŒçš„å·¥ä½œåŠŸèƒ½å’Œå¤„ç†æ–¹å¼ã€‚ æˆ‘ä»¬ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šä¸ªåŠŸèƒ½æœ‰3ä¸ªï¼š filter å®šä¹‰å…è®¸æˆ–è€…ä¸å…è®¸çš„ï¼Œåªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šINPUT ï¼ŒFORWARD ï¼ŒOUTPUT nat å®šä¹‰åœ°å€è½¬æ¢çš„ï¼Œä¹Ÿåªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šPREROUTING ï¼ŒOUTPUT ï¼ŒPOSTROUTING mangleåŠŸèƒ½:ä¿®æ”¹æŠ¥æ–‡åŸæ•°æ®ï¼Œæ˜¯5ä¸ªé“¾éƒ½å¯ä»¥åšï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING æˆ‘ä»¬ä¿®æ”¹æŠ¥æ–‡åŸæ•°æ®å°±æ˜¯æ¥ä¿®æ”¹TTLçš„ã€‚èƒ½å¤Ÿå®ç°å°†æ•°æ®åŒ…çš„å…ƒæ•°æ®æ‹†å¼€ï¼Œåœ¨é‡Œé¢åšæ ‡è®°/ä¿®æ”¹å†…å®¹çš„ã€‚è€Œé˜²ç«å¢™æ ‡è®°ï¼Œå…¶å®å°±æ˜¯é mangleæ¥å®ç°çš„ã€‚ å°æ‰©å±•: å¯¹äºfilteræ¥è®²ä¸€èˆ¬åªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šINPUT ï¼ŒFORWARD ï¼ŒOUTPUT å¯¹äºnatæ¥è®²ä¸€èˆ¬ä¹Ÿåªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šPREROUTING ï¼ŒOUTPUT ï¼ŒPOSTROUTING è€Œmangleåˆ™æ˜¯5ä¸ªé“¾éƒ½å¯ä»¥åšï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING iptables/netfilterï¼ˆè¿™æ¬¾è½¯ä»¶ï¼‰æ˜¯å·¥ä½œåœ¨ç”¨æˆ·ç©ºé—´çš„ï¼Œå®ƒå¯ä»¥è®©è§„åˆ™è¿›è¡Œç”Ÿæ•ˆçš„ï¼Œæœ¬èº«ä¸æ˜¯ä¸€ç§æœåŠ¡ï¼Œè€Œä¸”è§„åˆ™æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ã€‚è€Œæˆ‘ä»¬iptablesç°åœ¨è¢«åšæˆäº†ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥è¿›è¡Œå¯åŠ¨ï¼Œåœæ­¢çš„ã€‚å¯åŠ¨ï¼Œåˆ™å°†è§„åˆ™ç›´æ¥ç”Ÿæ•ˆï¼Œåœæ­¢ï¼Œåˆ™å°†è§„åˆ™æ’¤é”€ã€‚ iptablesè¿˜æ”¯æŒè‡ªå·±å®šä¹‰é“¾ã€‚ä½†æ˜¯è‡ªå·±å®šä¹‰çš„é“¾ï¼Œå¿…é¡»æ˜¯è·ŸæŸç§ç‰¹å®šçš„é“¾å…³è”èµ·æ¥çš„ã€‚åœ¨ä¸€ä¸ªå…³å¡è®¾å®šï¼ŒæŒ‡å®šå½“æœ‰æ•°æ®çš„æ—¶å€™ä¸“é—¨å»æ‰¾æŸä¸ªç‰¹å®šçš„é“¾æ¥å¤„ç†ï¼Œå½“é‚£ä¸ªé“¾å¤„ç†å®Œä¹‹åï¼Œå†è¿”å›ã€‚æ¥ç€åœ¨ç‰¹å®šçš„é“¾ä¸­ç»§ç»­æ£€æŸ¥ã€‚ æ³¨æ„ï¼šè§„åˆ™çš„æ¬¡åºéå¸¸å…³é”®ï¼Œè°çš„è§„åˆ™è¶Šä¸¥æ ¼ï¼Œåº”è¯¥æ”¾çš„è¶Šé å‰ï¼Œè€Œæ£€æŸ¥è§„åˆ™çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§ä»ä¸Šå¾€ä¸‹çš„æ–¹å¼è¿›è¡Œæ£€æŸ¥çš„ã€‚ è¡¨ååŒ…æ‹¬ï¼š raw ï¼šé«˜çº§åŠŸèƒ½ï¼Œå¦‚ï¼šç½‘å€è¿‡æ»¤ã€‚ mangle ï¼šæ•°æ®åŒ…ä¿®æ”¹ï¼ˆQOSï¼‰ï¼Œç”¨äºå®ç°æœåŠ¡è´¨é‡ã€‚ nat ï¼šåœ°å€è½¬æ¢ï¼Œç”¨äºç½‘å…³è·¯ç”±å™¨ã€‚ filter ï¼šåŒ…è¿‡æ»¤ï¼Œç”¨äºé˜²ç«å¢™è§„åˆ™ã€‚ åŠ¨ä½œåŒ…æ‹¬ï¼š ACCEPT ï¼šæ¥æ”¶æ•°æ®åŒ…ã€‚ DROP ï¼šä¸¢å¼ƒæ•°æ®åŒ…ã€‚ REDIRECT ï¼šé‡å®šå‘ã€æ˜ å°„ã€é€æ˜ä»£ç†ã€‚ SNAT ï¼šæºåœ°å€è½¬æ¢ã€‚ DNAT ï¼šç›®æ ‡åœ°å€è½¬æ¢ã€‚ MASQUERADE ï¼šIPä¼ªè£…ï¼ˆNATï¼‰ï¼Œç”¨äºADSLã€‚ LOG ï¼šæ—¥å¿—è®°å½•ã€‚ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:9","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"é€‰é¡¹ -t, --table table å¯¹æŒ‡å®šçš„è¡¨ table è¿›è¡Œæ“ä½œï¼Œ table å¿…é¡»æ˜¯ rawï¼Œ natï¼Œfilterï¼Œmangle ä¸­çš„ä¸€ä¸ªã€‚å¦‚æœä¸æŒ‡å®šæ­¤é€‰é¡¹ï¼Œé»˜è®¤çš„æ˜¯ filter è¡¨ã€‚ # é€šç”¨åŒ¹é…ï¼šæºåœ°å€ç›®æ ‡åœ°å€çš„åŒ¹é… -pï¼šæŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…åè®®ç±»å‹ï¼› -s, --source [!] address[/mask] ï¼šæŠŠæŒ‡å®šçš„ä¸€ä¸ªï¼ä¸€ç»„åœ°å€ä½œä¸ºæºåœ°å€ï¼ŒæŒ‰æ­¤è§„åˆ™è¿›è¡Œè¿‡æ»¤ã€‚å½“åé¢æ²¡æœ‰ mask æ—¶ï¼Œaddress æ˜¯ä¸€ä¸ªåœ°å€ï¼Œæ¯”å¦‚ï¼š192.168.1.1ï¼›å½“ mask æŒ‡å®šæ—¶ï¼Œå¯ä»¥è¡¨ç¤ºä¸€ç»„èŒƒå›´å†…çš„åœ°å€ï¼Œæ¯”å¦‚ï¼š192.168.1.0/255.255.255.0ã€‚ -d, --destination [!] address[/mask] ï¼šåœ°å€æ ¼å¼åŒä¸Šï¼Œä½†è¿™é‡Œæ˜¯æŒ‡å®šåœ°å€ä¸ºç›®çš„åœ°å€ï¼ŒæŒ‰æ­¤è¿›è¡Œè¿‡æ»¤ã€‚ -i, --in-interface [!] \u003cç½‘ç»œæ¥å£name\u003e ï¼šæŒ‡å®šæ•°æ®åŒ…çš„æ¥è‡ªæ¥è‡ªç½‘ç»œæ¥å£ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ eth0 ã€‚æ³¨æ„ï¼šå®ƒåªå¯¹ INPUTï¼ŒFORWARDï¼ŒPREROUTING è¿™ä¸‰ä¸ªé“¾èµ·ä½œç”¨ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ­¤é€‰é¡¹ï¼Œ è¯´æ˜å¯ä»¥æ¥è‡ªä»»ä½•ä¸€ä¸ªç½‘ç»œæ¥å£ã€‚åŒå‰é¢ç±»ä¼¼ï¼Œ\"!\" è¡¨ç¤ºå–åã€‚ -o, --out-interface [!] \u003cç½‘ç»œæ¥å£name\u003e ï¼šæŒ‡å®šæ•°æ®åŒ…å‡ºå»çš„ç½‘ç»œæ¥å£ã€‚åªå¯¹ OUTPUTï¼ŒFORWARDï¼ŒPOSTROUTING ä¸‰ä¸ªé“¾èµ·ä½œç”¨ã€‚ # æŸ¥çœ‹ç®¡ç†å‘½ä»¤ -L, --list [chain] åˆ—å‡ºé“¾ chain ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šé“¾ï¼Œåˆ—å‡ºè¡¨ä¸Šæ‰€æœ‰é“¾çš„æ‰€æœ‰è§„åˆ™ã€‚ # è§„åˆ™ç®¡ç†å‘½ä»¤ -A, --append chain rule-specification åœ¨æŒ‡å®šé“¾ chain çš„æœ«å°¾æ’å…¥æŒ‡å®šçš„è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ¡è§„åˆ™ä¼šè¢«æ”¾åˆ°æœ€åï¼Œæœ€åæ‰ä¼šè¢«æ‰§è¡Œã€‚è§„åˆ™æ˜¯ç”±åé¢çš„åŒ¹é…æ¥æŒ‡å®šã€‚ -I, --insert chain [rulenum] rule-specification åœ¨é“¾ chain ä¸­çš„æŒ‡å®šä½ç½®æ’å…¥ä¸€æ¡æˆ–å¤šæ¡è§„åˆ™ã€‚å¦‚æœæŒ‡å®šçš„è§„åˆ™å·æ˜¯1ï¼Œåˆ™åœ¨é“¾çš„å¤´éƒ¨æ’å…¥ã€‚è¿™ä¹Ÿæ˜¯é»˜è®¤çš„æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šè§„åˆ™å·ã€‚ -D, --delete chain rule-specification -D, --delete chain rulenum åœ¨æŒ‡å®šçš„é“¾ chain ä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šè§„åˆ™ã€‚ -R numï¼šReplaysæ›¿æ¢/ä¿®æ”¹ç¬¬å‡ æ¡è§„åˆ™ # é“¾ç®¡ç†å‘½ä»¤ï¼ˆè¿™éƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼‰ -P, --policy chain target ï¼šä¸ºæŒ‡å®šçš„é“¾ chain è®¾ç½®ç­–ç•¥ targetã€‚æ³¨æ„ï¼Œåªæœ‰å†…ç½®çš„é“¾æ‰å…è®¸æœ‰ç­–ç•¥ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„æ˜¯ä¸å…è®¸çš„ã€‚ -F, --flush [chain] æ¸…ç©ºæŒ‡å®šé“¾ chain ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šé“¾ï¼Œæ¸…ç©ºè¯¥è¡¨ä¸Šæ‰€æœ‰é“¾çš„æ‰€æœ‰è§„åˆ™ã€‚ -N, --new-chain chain ç”¨æŒ‡å®šçš„åå­—åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾ã€‚ -X, --delete-chain [chain] ï¼šåˆ é™¤æŒ‡å®šçš„é“¾ï¼Œè¿™ä¸ªé“¾å¿…é¡»æ²¡æœ‰è¢«å…¶å®ƒä»»ä½•è§„åˆ™å¼•ç”¨ï¼Œè€Œä¸”è¿™æ¡ä¸Šå¿…é¡»æ²¡æœ‰ä»»ä½•è§„åˆ™ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šé“¾åï¼Œåˆ™ä¼šåˆ é™¤è¯¥è¡¨ä¸­æ‰€æœ‰éå†…ç½®çš„é“¾ã€‚ -E, --rename-chain old-chain new-chain ï¼šç”¨æŒ‡å®šçš„æ–°åå­—å»é‡å‘½åæŒ‡å®šçš„é“¾ã€‚è¿™å¹¶ä¸ä¼šå¯¹é“¾å†…éƒ¨é€ æˆä»»ä½•å½±å“ã€‚ -Z, --zero [chain] ï¼šæŠŠæŒ‡å®šé“¾ï¼Œæˆ–è€…è¡¨ä¸­çš„æ‰€æœ‰é“¾ä¸Šçš„æ‰€æœ‰è®¡æ•°å™¨æ¸…é›¶ã€‚ -j, --jump target \u003cæŒ‡å®šç›®æ ‡\u003e ï¼šå³æ»¡è¶³æŸæ¡ä»¶æ—¶è¯¥æ‰§è¡Œä»€ä¹ˆæ ·çš„åŠ¨ä½œã€‚target å¯ä»¥æ˜¯å†…ç½®çš„ç›®æ ‡ï¼Œæ¯”å¦‚ ACCEPTï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„é“¾ã€‚ -hï¼šæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ï¼› ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:10","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å‚æ•° å‚æ•° è¯´æ˜ -P è®¾ç½®é»˜è®¤ç­–ç•¥:iptables -P INPUT (DROP) -F æ¸…ç©ºè§„åˆ™é“¾ -L æŸ¥çœ‹è§„åˆ™é“¾ -A åœ¨è§„åˆ™é“¾çš„æœ«å°¾åŠ å…¥æ–°è§„åˆ™ -I num åœ¨è§„åˆ™é“¾çš„å¤´éƒ¨åŠ å…¥æ–°è§„åˆ™ -D num åˆ é™¤æŸä¸€æ¡è§„åˆ™ -s åŒ¹é…æ¥æºåœ°å€IP/MASKï¼ŒåŠ å¹å·\"!â€œè¡¨ç¤ºé™¤è¿™ä¸ªIPå¤–ã€‚ -d åŒ¹é…ç›®æ ‡åœ°å€ -i ç½‘å¡åç§° åŒ¹é…ä»è¿™å—ç½‘å¡æµå…¥çš„æ•°æ® -o ç½‘å¡åç§° åŒ¹é…ä»è¿™å—ç½‘å¡æµå‡ºçš„æ•°æ® -p åŒ¹é…åè®®,å¦‚tcp,udp,icmp â€“dport num åŒ¹é…ç›®æ ‡ç«¯å£å· â€“sport num åŒ¹é…æ¥æºç«¯å£å· ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:11","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å®ä¾‹ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:12","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"æ¸…ç©ºå½“å‰æ‰€æœ‰è§„åˆ™å’Œè®¡æ•° iptables -F # æ¸…ç©ºæ‰€æœ‰çš„é˜²ç«å¢™è§„åˆ™ iptables -X # åˆ é™¤ç”¨æˆ·è‡ªå®šä¹‰çš„ç©ºé“¾ iptables -Z # æ¸…ç©ºè®¡æ•° ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:13","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"é…ç½®å…è®¸sshç«¯å£è¿æ¥ iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 22 -j ACCEPT # 22ä¸ºä½ çš„sshç«¯å£ï¼Œ -s 192.168.1.0/24è¡¨ç¤ºå…è®¸è¿™ä¸ªç½‘æ®µçš„æœºå™¨æ¥è¿æ¥ï¼Œå…¶å®ƒç½‘æ®µçš„ipåœ°å€æ˜¯ç™»é™†ä¸äº†ä½ çš„æœºå™¨çš„ã€‚ -j ACCEPTè¡¨ç¤ºæ¥å—è¿™æ ·çš„è¯·æ±‚ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:14","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å…è®¸æœ¬åœ°å›ç¯åœ°å€å¯ä»¥æ­£å¸¸ä½¿ç”¨ iptables -A INPUT -i lo -j ACCEPT # æœ¬åœ°å›ç¯åœ°å€å°±æ˜¯127.0.0.1ï¼Œæ˜¯æœ¬æœºä¸Šä½¿ç”¨çš„,å®ƒè¿›ä¸å‡ºéƒ½è®¾ç½®ä¸ºå…è®¸ iptables -A OUTPUT -o lo -j ACCEPT ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:15","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"è®¾ç½®é»˜è®¤è§„åˆ™ iptables -P INPUT DROP # é…ç½®é»˜è®¤çš„ä¸è®©è¿› iptables -P FORWARD DROP # é»˜è®¤çš„ä¸å…è®¸è½¬å‘ iptables -P OUTPUT ACCEPT # é»˜è®¤çš„å¯ä»¥å‡ºå» ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:16","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"é…ç½®ç™½åå• iptables -A INPUT -p all -s 192.168.1.0/24 -j ACCEPT # å…è®¸æœºæˆ¿å†…ç½‘æœºå™¨å¯ä»¥è®¿é—® iptables -A INPUT -p all -s 192.168.140.0/24 -j ACCEPT # å…è®¸æœºæˆ¿å†…ç½‘æœºå™¨å¯ä»¥è®¿é—® iptables -A INPUT -p tcp -s 183.121.3.7 --dport 3380 -j ACCEPT # å…è®¸183.121.3.7è®¿é—®æœ¬æœºçš„3380ç«¯å£ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:1:17","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å¼€å¯ç›¸åº”çš„æœåŠ¡ç«¯å£ iptables -A INPUT -p tcp --dport 80 -j ACCEPT # å¼€å¯80ç«¯å£ï¼Œå› ä¸ºwebå¯¹å¤–éƒ½æ˜¯è¿™ä¸ªç«¯å£ iptables -A INPUT -p icmp --icmp-type 8 -j ACCEPT # å…è®¸è¢«ping iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT # å·²ç»å»ºç«‹çš„è¿æ¥å¾—è®©å®ƒè¿›æ¥ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:0","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"é…ç½®å¤šç«¯å£ #åŒä¸€ç›®çš„IPå¤šä¸ªä¸è¿ç»­ç«¯å£ iptables -t nat -A PREROUTING -i eth0 -s 0.0.0.0/0 -d 192.168.255.1 -p tcp -m multiport --dport 8082,8083,10728 -j DNAT --to 172.29.110.107 iptables -t nat -A POSTROUTING -o bond0 -d 172.29.110.107 -p tcp -m multiport --dport 8082,8083,10728 -j SNAT --to 172.13.202.100 #åŒä¸€ç›®çš„ipå¤šä¸ªè¿ç»­ç«¯å£ iptables -t nat -A PREROUTING -i eth0 -s 0.0.0.0/0 -d 192.168.255.1 -p tcp --dport 47110:47122 -j DNAT --to 172.12.43.70 iptables -t nat -A POSTROUTING -o bond0 -d 172.12.43.70 -p tcp --dport 47110:47122 -j SNAT --to 172.13.202.101 ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:1","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"ä¿å­˜è§„åˆ™åˆ°é…ç½®æ–‡ä»¶ä¸­ cp /etc/sysconfig/iptables /etc/sysconfig/iptables.bak # ä»»ä½•æ”¹åŠ¨ä¹‹å‰å…ˆå¤‡ä»½ï¼Œè¯·ä¿æŒè¿™ä¸€ä¼˜ç§€çš„ä¹ æƒ¯ iptables-save \u003e /etc/sysconfig/iptables cat /etc/sysconfig/iptables ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:2","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"åˆ—å‡ºå·²è®¾ç½®çš„è§„åˆ™ iptables -L [-t è¡¨å] [é“¾å] å››ä¸ªè¡¨å rawï¼Œnatï¼Œfilterï¼Œmangle äº”ä¸ªè§„åˆ™é“¾å INPUTã€OUTPUTã€FORWARDã€PREROUTINGã€POSTROUTING filterè¡¨åŒ…å«INPUTã€OUTPUTã€FORWARDä¸‰ä¸ªè§„åˆ™é“¾ iptables -L -t nat # åˆ—å‡º nat ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™ # ^ -t å‚æ•°æŒ‡å®šï¼Œå¿…é¡»æ˜¯ rawï¼Œ natï¼Œfilterï¼Œmangle ä¸­çš„ä¸€ä¸ª iptables -L -t nat --line-numbers # è§„åˆ™å¸¦ç¼–å· iptables -L INPUT iptables -L -nv # æŸ¥çœ‹ï¼Œè¿™ä¸ªåˆ—è¡¨çœ‹èµ·æ¥æ›´è¯¦ç»† ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:3","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"æ¸…é™¤å·²æœ‰è§„åˆ™ iptables -F INPUT # æ¸…ç©ºæŒ‡å®šé“¾ INPUT ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™ iptables -X INPUT # åˆ é™¤æŒ‡å®šçš„é“¾ï¼Œè¿™ä¸ªé“¾å¿…é¡»æ²¡æœ‰è¢«å…¶å®ƒä»»ä½•è§„åˆ™å¼•ç”¨ï¼Œè€Œä¸”è¿™æ¡ä¸Šå¿…é¡»æ²¡æœ‰ä»»ä½•è§„åˆ™ã€‚ # å¦‚æœæ²¡æœ‰æŒ‡å®šé“¾åï¼Œåˆ™ä¼šåˆ é™¤è¯¥è¡¨ä¸­æ‰€æœ‰éå†…ç½®çš„é“¾ã€‚ iptables -Z INPUT # æŠŠæŒ‡å®šé“¾ï¼Œæˆ–è€…è¡¨ä¸­çš„æ‰€æœ‰é“¾ä¸Šçš„æ‰€æœ‰è®¡æ•°å™¨æ¸…é›¶ã€‚ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:4","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"åˆ é™¤å·²æ·»åŠ çš„è§„åˆ™ iptables -A INPUT -s 192.168.1.5 -j DROP # æ·»åŠ ä¸€æ¡è§„åˆ™ å°†æ‰€æœ‰iptablesä»¥åºå·æ ‡è®°æ˜¾ç¤ºï¼Œæ‰§è¡Œï¼š iptables -L -n --line-numbers æ¯”å¦‚è¦åˆ é™¤INPUTé‡Œåºå·ä¸º8çš„è§„åˆ™ï¼Œæ‰§è¡Œï¼š iptables -D INPUT 8 ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:5","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å¼€æ”¾æŒ‡å®šçš„ç«¯å£ iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT #å…è®¸æœ¬åœ°å›ç¯æ¥å£(å³è¿è¡Œæœ¬æœºè®¿é—®æœ¬æœº) iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT #å…è®¸å·²å»ºç«‹çš„æˆ–ç›¸å…³è¿çš„é€šè¡Œ iptables -A OUTPUT -j ACCEPT # å…è®¸æ‰€æœ‰æœ¬æœºå‘å¤–çš„è®¿é—® iptables -A INPUT -p tcp --dport 22 -j ACCEPT # å…è®¸è®¿é—®22ç«¯å£ iptables -A INPUT -p tcp --dport 80 -j ACCEPT # å…è®¸è®¿é—®80ç«¯å£ iptables -A INPUT -p tcp --dport 21 -j ACCEPT # å…è®¸ftpæœåŠ¡çš„21ç«¯å£ iptables -A INPUT -p tcp --dport 20 -j ACCEPT # å…è®¸FTPæœåŠ¡çš„20ç«¯å£ iptables -A INPUT -j REJECT # ç¦æ­¢å…¶ä»–æœªå…è®¸çš„è§„åˆ™è®¿é—® iptables -A FORWARD -j REJECT # ç¦æ­¢å…¶ä»–æœªå…è®¸çš„è§„åˆ™è®¿é—® ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:6","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å±è”½ç«¯å£ iptables -A INPUT -p tcp --dport 12345 -j DROP # å±è”½è®¿é—® 12345 ç«¯å£ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:7","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å±è”½åŸŸå iptables -A OUTPUT -m string --string \"ysp8.cc\" --algo bm --to 65535 -j DROP # å±è”½æœåŠ¡å™¨å†…åŸŸåè®¿é—® ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:8","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å±è”½IP iptables -A INPUT -p tcp -m tcp -s 192.168.0.8 -j DROP # å±è”½æ¶æ„ä¸»æœºï¼ˆæ¯”å¦‚ï¼Œ192.168.0.8 iptables -I INPUT -s 123.45.6.7 -j DROP # å±è”½å•ä¸ªIPçš„å‘½ä»¤ iptables -I INPUT -s 123.0.0.0/8 -j DROP # å°æ•´ä¸ªæ®µå³ä»123.0.0.1åˆ°123.255.255.254çš„å‘½ä»¤ iptables -I INPUT -s 124.45.0.0/16 -j DROP # å°IPæ®µå³ä»123.45.0.1åˆ°123.45.255.254çš„å‘½ä»¤ iptables -I INPUT -s 123.45.6.0/24 -j DROP # å°IPæ®µå³ä»123.45.6.1åˆ°123.45.6.254çš„å‘½ä»¤æ˜¯ ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:9","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"æŒ‡å®šæ•°æ®åŒ…å‡ºå»çš„ç½‘ç»œæ¥å£ åªå¯¹ OUTPUTï¼ŒFORWARDï¼ŒPOSTROUTING ä¸‰ä¸ªé“¾èµ·ä½œç”¨ã€‚ iptables -A FORWARD -o eth0 ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:10","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"æŸ¥çœ‹å·²æ·»åŠ çš„è§„åˆ™ iptables -L -n -v Chain INPUT (policy DROP 48106 packets, 2690K bytes) pkts bytes target prot opt in out source destination 5075 589K ACCEPT all -- lo * 0.0.0.0/0 0.0.0.0/0 191K 90M ACCEPT tcp -- * * 0.0.0.0/0 0.0.0.0/0 tcp dpt:22 1499K 133M ACCEPT tcp -- * * 0.0.0.0/0 0.0.0.0/0 tcp dpt:80 4364K 6351M ACCEPT all -- * * 0.0.0.0/0 0.0.0.0/0 state RELATED,ESTABLISHED 6256 327K ACCEPT icmp -- * * 0.0.0.0/0 0.0.0.0/0 Chain FORWARD (policy ACCEPT 0 packets, 0 bytes) pkts bytes target prot opt in out source destination Chain OUTPUT (policy ACCEPT 3382K packets, 1819M bytes) pkts bytes target prot opt in out source destination 5075 589K ACCEPT all -- * lo 0.0.0.0/0 0.0.0.0/0 ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:11","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å¯åŠ¨ç½‘ç»œè½¬å‘è§„åˆ™ å…¬ç½‘210.14.67.7è®©å†…ç½‘192.168.188.0/24ä¸Šç½‘ iptables -t nat -A POSTROUTING -s 192.168.188.0/24 -j SNAT --to-source 210.14.67.127 ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:12","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"ç«¯å£æ˜ å°„ æœ¬æœºçš„ 2222 ç«¯å£æ˜ å°„åˆ°å†…ç½‘ è™šæ‹Ÿæœºçš„22 ç«¯å£ iptables -t nat -A PREROUTING -d 210.14.67.127 -p tcp --dport 2222 -j DNAT --to-dest 192.168.188.115:22 ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:13","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"å­—ç¬¦ä¸²åŒ¹é… æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦è¿‡æ»¤æ‰€æœ‰TCPè¿æ¥ä¸­çš„å­—ç¬¦ä¸²testï¼Œä¸€æ—¦å‡ºç°å®ƒæˆ‘ä»¬å°±ç»ˆæ­¢è¿™ä¸ªè¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š iptables -A INPUT -p tcp -m string --algo kmp --string \"test\" -j REJECT --reject-with tcp-reset iptables -L # Chain INPUT (policy ACCEPT) # target prot opt source destination # REJECT tcp -- anywhere anywhere STRING match \"test\" ALGO name kmp TO 65535 reject-with tcp-reset # # Chain FORWARD (policy ACCEPT) # target prot opt source destination # # Chain OUTPUT (policy ACCEPT) # target prot opt source destination ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:14","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"é˜»æ­¢Windowsè •è™«çš„æ”»å‡» iptables -I INPUT -j DROP -p tcp -s 0.0.0.0/0 -m string --algo kmp --string \"cmd.exe\" ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:15","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["linux"],"content":"é˜²æ­¢SYNæ´ªæ°´æ”»å‡» iptables -A INPUT -p tcp --syn -m limit --limit 5/second -j ACCEPT ","date":"2022-02-25","objectID":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/:2:16","tags":["iptables"],"title":"iptableså¸¸ç”¨æ€»ç»“","uri":"/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"},{"categories":["å·¥å…·"],"content":"å‰è¨€ é•¿æ—¶é—´ä¸ç™»é™†jupyterç«Ÿç„¶å¿˜è®°äº†å¯†ç ï¼Œæ‰€ä»¥è®°å½•ä¸‹jupyterå®¹å™¨ä¸­æ›´æ”¹å¯†ç è¿‡ç¨‹ã€‚ ","date":"2022-02-24","objectID":"/jupyter%E6%9B%B4%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/:1:0","tags":["jupyter"],"title":"jupyteræ›´æ”¹ç™»å½•å¯†ç ","uri":"/jupyter%E6%9B%B4%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/"},{"categories":["å·¥å…·"],"content":"æ›´æ”¹è¿‡ç¨‹ è¿›å…¥jupyterå®¹å™¨ docker exec -it vk-jupyter bash cd .jupyter/ vi jupyter_notebook_config.json ç”Ÿæˆæ–°å¯†ç å“ˆå¸Œå€¼ ipython å¤åˆ¶æ–°çš„å“ˆå¸Œå€¼æ›¿æ¢jupyter_notebook_config.jsonæ–‡ä»¶ä¸­çš„å“ˆå¸Œå€¼ é‡å¯jupyterå®¹å™¨ docker restart vk-jupyter å°è¯•ç”¨æ–°å¯†ç ç™»å½• ","date":"2022-02-24","objectID":"/jupyter%E6%9B%B4%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/:2:0","tags":["jupyter"],"title":"jupyteræ›´æ”¹ç™»å½•å¯†ç ","uri":"/jupyter%E6%9B%B4%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/"},{"categories":["å·¥å…·"],"content":"å®‰è£…åŠå‘½ä»¤ ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:0","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Dockerå‘½ä»¤ å¸¸ç”¨ docker version docker info docker pull docker login docker logout docker images docker ps -a docker start|stop|restart docker rm xxxx docker rmi xxxx docker exec -it `name OR id` /bin/bash æ‰¹é‡åœæ­¢åˆ é™¤å®¹å™¨å’Œé•œåƒ åœæ­¢æ‰€æœ‰å®¹å™¨ docker stop $(docker ps -aq) åˆ é™¤æ‰€æœ‰çš„å®¹å™¨ docker rm $(docker ps -aq) åˆ é™¤æ‰€æœ‰çš„é•œåƒ docker rmi $(docker images -q) Dockerç›®å½•æ‹·è´ æœ¬æœº/root/testç›®å½•æ‹·è´åˆ°å®¹å™¨å†…/rootç›®å½•å†… docker cp /root/test 28a186bbebd4:/root/ æœ¬æœº/root/testç›®å½•æ‹·è´åˆ°å®¹å™¨å†…,å¹¶æ›´åä¸º/test123.æ³¨æ„å‘½ä»¤åæ²¡æœ‰/. docker cp /root/test 28a186bbebd4:/test123 å°†å®¹å™¨å†…çš„/testç›®å½•æ‹·è´åˆ°ä¸»æœºçš„/rootç›®å½•å†…. docker cp 28a186bbebd4:/test /root/ Docker æ–‡ä»¶æ‹·è´ æœ¬æœº1.dbæ–‡ä»¶æ‹·è´åˆ°å®¹å™¨å†…rootç›®å½•å†…. docker cp 1.db 28a186bbebd4:/root/ å°†å®¹å™¨å†…çš„/root/1.dbæ–‡ä»¶æ‹·è´åˆ°ä¸»æœºçš„å½“å‰ç›®å½•. docker cp 28a186bbebd4:/root/1.db . Dockerå‘½ä»¤è¡¥å…¨ å®‰è£… bash-completion sudo yum install -y bash-completion æ ¹æ®å®˜æ–¹æ–‡æ¡£è¿›ä¸€æ­¥é…ç½® å®˜ç½‘é“¾æ¥ curl -L https://raw.githubusercontent.com/docker/compose/$(docker-compose version --short)/contrib/completion/bash/docker-compose \u003e /etc/bash_completion.d/docker-compose é‡æ–°è¿›å…¥ç»ˆç«¯å³å¯è¡¥å…¨å‘½ä»¤ã€‚ ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:1","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Dockeré•œåƒ å®¹å™¨åˆ›å»ºé•œåƒ é€šè¿‡å®¹å™¨æäº¤ç”Ÿæˆé•œåƒ docker commit å®¹å™¨å é•œåƒå ä¿å­˜é•œåƒåˆ°æ–‡ä»¶ docker save é•œåƒå \u003e æ–‡ä»¶å.tar ä»æ–‡ä»¶æ¢å¤åˆ°é•œåƒ docker load \u003c æ–‡ä»¶å.tar é€šè¿‡é•œåƒå¯åŠ¨æ–°å®¹å™¨ docker run --name å®¹å™¨å ç›¸å…³å‚æ•° æœ€åæ¥æ–°çš„é•œåƒå ä¾‹å¦‚ èµ‹äºˆå®¹å™¨æ‰€æœ‰æƒé™ docker run -it --name test -d --privileged=true centos:7.6.1810 /usr/sbin/init å®¹å™¨æš´éœ²ç«¯å£ç»™å¤–é¢è®¿é—®,å®¹å™¨å†…20ã€80ï¼Œå®¹å™¨å¤–2000ã€8080 docker run -it --name test -p 2000:20 -p 8080:80 -d centos:7.6.1810 /usr/sbin/init å®¹å™¨ä¸é—´æ–­è¿è¡Œï¼Œdockeré‡å¯å®¹å™¨ä¼šè‡ªåŠ¨é‡å¯ä¸ç”¨äººå·¥å¹²é¢„ã€‚ åšæ•°æ®æŒä¹…åŒ–å­˜å‚¨ã€‚æœ¬åœ°ç›®å½•å®¹å™¨ç›®å½•æ˜ å°„ã€‚å®¹å™¨å†…ç«¯å£5000 å®¹å™¨å¤–ç«¯å£5000ã€‚ å®¹å™¨å†…ç›®å½•ï¼š/var/lib/registry å®¹å™¨å¤–ç›®å½•ï¼š/opt/registry docker run -it --name registry -v /opt/registry:/var/lib/registry -p 5000:5000 --restart=always registry é€€å‡ºå®¹å™¨åç«‹å³é”€æ¯ docker run -it --rm --name test2 alpine sh è¿›å…¥å®¹å™¨ docker exec -it å®¹å™¨å/å®¹å™¨id /bin/bash ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:2","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"å¯¼å…¥å¯¼å‡ºé•œåƒ å¯¼å‡ºé•œåƒ docker images # æŸ¥çœ‹IMAGE ID docker save bb2b73d4a4a6 \u003e xxx.tar å¯¼å…¥é•œåƒ docker load \u003c xxx.tar ä¿®æ”¹é•œåƒå docker tag bb2b73d4a4a6 xxx/xxx:latest ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:3","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Docker hub ä¸Šä¼ æœ¬åœ°é•œåƒ ç™»å½• docker login -u ç”¨æˆ·å ip/åŸŸå -p å¯†ç  ä¸Šä¼ é•œåƒå‰æ‰“æ ‡ç­¾ docker tag SOURCE_IMAGE[:TAG] harbor.lhp.com/images/IMAGE[:TAG] ä¸Šä¼ é•œåƒ docker push harbor.lhp.com/images/IMAGE[:TAG] ä¸‹è½½é•œåƒ docker pull harbor.lhp.com/images/alpine:latest ç™»å½•æˆåŠŸä¿¡æ¯æŸ¥çœ‹ cat /root/.docker/config.json authåé¢å­—æ®µå¯ä»¥ç”¨base64è¿›è¡Œè§£ç  #åŠ å¯† echo test|base64 dGVzdAo= #è§£å¯† echo \"YWRtaW46SGFyYm9yMTIzNDU=\" | base64 -d è‡ªåŠ¨æ„å»ºé•œåƒ Docker hubåˆ›å»ºä»“åº“ é“¾æ¥ GitHub é…ç½® Build Rules Source Type Source Docker Tag Dockerfile location Branch Master Latest / Tag /^v([0-9.]+)$/ {\\1} / Tag Github Tag /^v([0-9.]+)$/ å¯¹åº” v1.0 æˆ– v1.0.0 /^([0-9.]+)$/ å¯¹åº” 1.0 æˆ– 1.0.0 /^([0-9]+)$/ å¯¹åº” 20210101 Docker Tag {sourceref} å¯¹åº” Github Tag {\\1} å¯¹åº” Github Tag å»é™¤ v Github push æ­£å¸¸ commit å¹¶ push åˆ° GitHub Docker Hub è‡ªåŠ¨æ„å»º master åˆ†æ”¯ä¸º latest é•œåƒ æœ¬åœ° tag commit å¹¶ push tag Docker Hub è‡ªåŠ¨æ„å»º tag æ ‡ç­¾ä¸º tagå é•œåƒ åˆ›å»ºæ ‡ç­¾ git log # å¤åˆ¶ commit ID git tag -a v1.0.0 commitID -m \"v1.0.0\" # æœ¬åœ° tag ç‰ˆæœ¬å·æ ‡ç­¾ git push origin v1.0.0 # æäº¤æœ¬åœ°æ ‡ç­¾åˆ° GitHub åˆ é™¤æ ‡ç­¾ git tag -d æ ‡ç­¾å git push origin :refs/tags/æ ‡ç­¾å ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:4","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Dockerå®‰è£… Dockerå®˜æ–¹è„šæœ¬å®‰è£… ä¸‹è½½ä¸€é”®å®‰è£…è„šæœ¬ curl -fsSL https://get.docker.com -o get-docker.sh è¿è¡Œä¸€é”®å®‰è£…è„šæœ¬(é˜¿é‡Œäº‘åŠ é€Ÿé•œåƒ) sudo sh get-docker.sh --mirror Aliyun Dockerå®˜æ–¹æ‰‹åŠ¨å‡çº§ å‡çº§yum yum update å®‰è£…ä¾èµ–åŒ… sudo yum install -y yum-utils \\ device-mapper-persistent-data \\ lvm2 é…ç½®ä»“åº“(å›½å†…ç”¨æˆ·æ¨èä½¿ç”¨ä¸‹é¢é˜¿é‡Œäº‘åŠ é€Ÿé•œåƒ) sudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo é…ç½®ä»“åº“(é˜¿é‡Œäº‘åŠ é€Ÿé•œåƒ) sudo yum-config-manager \\ --add-repo \\ https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo æ’åºæŸ¥çœ‹ä»“åº“å†…æ–‡ä»¶ yum list docker-ce --showduplicates | sort -r å®‰è£…æœ€æ–°ç‰ˆDocker sudo yum install docker-ce docker-ce-cli containerd.io ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:5","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Dockerå¯åŠ¨å‘½ä»¤ å¯åŠ¨Docker sudo systemctl start docker æˆ– sudo /etc/init.d/docker restart æŸ¥çœ‹Dockerç‰ˆæœ¬ sudo docker version è®¾ç½®Dockerå¼€æœºè‡ªåŠ¨å¯åŠ¨ sudo systemctl enable docker ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:6","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Docker-compose å®‰è£… å®˜æ–¹å®‰è£… - é€Ÿåº¦æ…¢,æœ‰å¯èƒ½è¢«DNSæ±¡æŸ“å¯¼è‡´å¤±è´¥. æ‰‹åŠ¨å®‰è£… - æ‰‹åŠ¨ä¸‹è½½,ç¦»çº¿å®‰è£…. PIP åœ¨çº¿å®‰è£… - ä½¿ç”¨ Python çš„ pip åŒ…ç®¡ç†å·¥å…·åœ¨çº¿å®‰è£…. å®˜æ–¹å®‰è£… å®˜ç½‘é€‰æ‹©ç‰ˆæœ¬ https://github.com/docker/compose/releases ä»¥ä¸‹å‘½ä»¤æ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬å·,ä¾‹å¦‚v2.2.3 curl -L https://github.com/docker/compose/releases/download/v2.2.3/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose æ‰§è¡Œæƒé™ chmod +x /usr/local/bin/docker-compose æ£€æŸ¥ docker compose ç‰ˆæœ¬ docker-compose version æ‰‹åŠ¨å®‰è£… å®˜ç½‘é€‰æ‹©ç‰ˆæœ¬ https://github.com/docker/compose/releases é€‰æ‹©ç›¸åº”ç‰ˆæœ¬,ä¸‹è½½åˆ°æœ¬åœ°æˆ–è€…æœåŠ¡å™¨ä¸­. æ›´åä¸ºdocker-compose,å¹¶ç§»åŠ¨åˆ°/usr/local/binç›®å½•ä¸‹. æ·»åŠ æ‰§è¡Œæƒé™ chmod +x /usr/local/bin/docker-compose æ£€æŸ¥ docker compose ç‰ˆæœ¬ docker-compose version pipåœ¨çº¿å®‰è£… å®‰è£…ä¾èµ– yum -y install epel-release å®‰è£… PIP yum -y install python-pip å‡çº§ PIP pip install --upgrade pip å‡çº§æŠ¥é”™ You are using pip version 8.1.2, however version 22.0.3 is available è§£å†³ curl https://bootstrap.pypa.io/pip/2.7/get-pip.py \u003e\u003e get-pip.py python get-pip.py 3.6ç‰ˆæœ¬çš„get-pip.py curl https://bootstrap.pypa.io/get-pip.py \u003e\u003e get-pip.py python get-pip.py æ£€æŸ¥ PIP ç‰ˆæœ¬ pip --version pip 21.3.1 from /usr/local/lib/python3.6/site-packages/pip (python 3.6) å®‰è£… docker composeã€‚ pip install -U docker-compose æ£€æŸ¥ docker compose ç‰ˆæœ¬ docker-compose version docker-compose version 1.29.2, build unknown docker-py version: 5.0.3 CPython version: 3.6.8 OpenSSL version: OpenSSL 1.0.2k-fips 26 Jan 2017 ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:7","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Dockeré…ç½®é•œåƒåŠ é€ŸåŠç§æœ‰ä»“åº“ é…ç½®ä¿å­˜å‘½ä»¤ é…ç½®daemon.jsonéœ€è¦é‡è½½å¹¶é‡å¯ç”Ÿæ•ˆ ç¼–è¾‘ daemon.json vi /etc/docker/daemon.json é‡æ–°åŠ è½½ daemon.json sudo systemctl daemon-reload é‡å¯ Docker sudo systemctl restart docker ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:8","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"é…ç½®é•œåƒåŠ é€Ÿ å…¬å…±é•œåƒåŠ é€Ÿ æ·»åŠ Docker ä¸­å›½å®˜æ–¹é•œåƒåŠ é€Ÿ { \"registry-mirrors\": [\"https://registry.docker-cn.com\"] } æ›´å¤šå…¬å…±é•œåƒåŠ é€ŸæœåŠ¡ { \"registry-mirrors\": [ \"https://hub-mirror.c.163.com\", \"https://mirror.baidubce.com\", \"https://registry.docker-cn.com\", \"https://reg-mirror.qiniu.com\", \"https://dockerhub.azk8s.cn\", \"https://docker.mirrors.ustc.edu.cn\" ] } ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:9","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"ç§æœ‰é•œåƒåŠ é€Ÿ å¯ä½¿ç”¨IPæˆ–åå‘ä»£ç†åŸŸåæ¥é…ç½®ç§æœ‰é•œåƒåŠ é€ŸæœåŠ¡. è¯·æ³¨æ„é•œåƒåŠ é€Ÿçš„ HTTP/HTTPS åè®®,ä»¥åŠå¼€æ”¾é˜²ç«å¢™ç«¯å£. ç§æœ‰åŸŸåé•œåƒåŠ é€Ÿ { \"registry-mirrors\": [ \"https://registry.yourdomain.com\" ] } ç§æœ‰IPé•œåƒåŠ é€Ÿ { \"registry-mirrors\": [ \"http://101.102.103.104:5000\" ] } ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:10","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"é…ç½®ç§æœ‰ä»“åº“ ç§æœ‰ä»“åº“å¯ä»¥ä½¿ç”¨å†…ç½‘ IPå’Œå…¬ç½‘ IPçš„å½¢å¼é…ç½®. ä½¿ç”¨åå‘ä»£ç†é…ç½®äº†åŸŸåçš„ç§æœ‰ä»“åº“æ— éœ€é…ç½®daemon.json. å†…ç½‘IP { \"insecure-registries\": [ \"192.168.1.5:5000\" ] } å…¬ç½‘IP { \"insecure-registries\": [ \"101.102.103.104:5000\" ] } åŒæ—¶é…ç½®é•œåƒåŠ é€Ÿå’Œç§æœ‰ä»“åº“ { \"registry-mirrors\": [\"https://registry.yourdomain.com\"], \"insecure-registries\": [\"192.168.1.5:5000\"] } æ›´å¤šçš„é•œåƒåŠ é€ŸæœåŠ¡å’Œç§æœ‰ä»“åº“ { \"registry-mirrors\": [ \"https://registry.yourdomain.com\", \"https://hub-mirror.c.163.com\", \"https://mirror.baidubce.com\" ], \"insecure-registries\": [ \"192.168.1.5:5000\", \"101.102.103.104:5000\" ] } ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:1:11","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Dockerè¿ç§»/var/lib/dockerç›®å½• ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:2:0","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"å‰è¨€ ç”±äº/var/lib/docker/overlay2ç›®å½•å ç”¨ç£ç›˜ç©ºé—´è¿‡å¤§,å³ä½¿ä½¿ç”¨docker system prune -aå‘½ä»¤ä¹Ÿæ— æ³•æ¸…ç†overlay2ç›®å½•ä¸‹çš„æ–‡ä»¶,æ‰‹åŠ¨åˆ é™¤åˆ™ä¼šå¯¼è‡´å®¹å™¨æ— æ³•å¯åŠ¨.æ‰€ä»¥åªæœ‰å°† docker æ ¹ç›®å½•è¿ç§»è‡³ç©ºé—´æ›´å¤§çš„ç›®å½•. è¿ç§»æµç¨‹ åœæ­¢dockeræœåŠ¡ systemctl stop docker è¿ç§»ç›®å½• åˆ›å»ºæ–°çš„ docker æ ¹ç›®å½•,ç¡®ä¿åˆ›å»ºçš„ç›®å½•ç©ºé—´å®¹é‡å¤Ÿå¤§. mkdir -p /home/docker/lib è¿ç§»/var/lib/dockerç›®å½•è‡³/home/docker/lib rsync -avz /var/lib/docker /home/docker/lib/ é…ç½®devicemapper.conf,å…ˆæŸ¥çœ‹è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨.å¦‚ä¸å­˜åœ¨åˆ™æ–°å»º. mkdir -p /etc/systemd/system/docker.service.d/ vi /etc/systemd/system/docker.service.d/devicemapper.conf å†™å…¥ä»¥ä¸‹ä»£ç ä¿å­˜: [Service] ExecStart= ExecStart=/usr/bin/dockerd --graph=/home/docker/lib/docker é‡åŠ è½½ docker systemctl daemon-reload systemctl restart docker systemctl enable docker æ£€æŸ¥ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ docker info ç¡®è®¤æ˜¾ç¤ºä¿¡æ¯ä¸­ Docker Root Dir è·¯å¾„æ­£ç¡® Docker Root Dir: /home/docker/lib/docker Debug Mode: false Registry: https://index.docker.io/v1/ å®Œæˆ å†æ¬¡å¯åŠ¨å®¹å™¨,æ£€æŸ¥æ— è¯¯åå¯åˆ é™¤åŸè·¯å¾„/var/lib/docker/ä¸­çš„æ–‡ä»¶. ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:2:1","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"Docker ç§æœ‰é•œåƒä»“åº“ å®‰è£…æœåŠ¡ç«¯ æœ¬æ–‡ä»¥éƒ¨ç½²è‡³å…¬ç½‘,å¼€å¯è´¦å·å¯†ç ,å¹¶é…ç½®åŸŸååå‘ä»£ç†ä¸ºä¾‹. å‘½ä»¤å‚æ•°è¿‡å¤š,ä¸ºæ–¹ä¾¿é…ç½®å‚æ•°,å»ºè®®ä½¿ç”¨docker composeéƒ¨ç½². åˆ›å»ºhtpasswdè´¦å·å¯†ç  å¯åŠ¨ä¸€ä¸ªä¸€æ¬¡æ€§å®¹å™¨ç”¨äºåˆ›å»ºè´¦å·å¯†ç .å¯†ç æ–‡ä»¶è·¯å¾„ä»¥/root/registry/htpasswdä¸ºä¾‹,è´¦å·å¯†ç ä»¥adminå’Œ12345678ä¸ºä¾‹. docker run --rm --entrypoint \\ htpasswd httpd:2 -Bbn \\ admin 12345678 \u003e /root/registry/htpasswd docker-compose.yml volumes æŒ‚è½½htpasswdå¯†ç æ–‡ä»¶,æ•°æ®ç›®å½•,æ—¶åŒºæ–‡ä»¶.é…ç½®æ–‡ä»¶config.ymlä½œä¸ºé«˜çº§ç”¨æˆ·å¯é€‰æŒ‚è½½. environment ç¯å¢ƒå˜é‡å¼€å¯è®¤è¯,å¹¶å¼€å¯åˆ é™¤é•œåƒåŠŸèƒ½. version: \"3\" services: registry: image: registry:2 container_name: registry volumes: # - ./config.yml:/etc/docker/registry/config.yml - ./htpasswd:/auth/htpasswd - ./registry:/var/lib/registry - /etc/localtime:/etc/localtime ports: - 5000:5000 environment: - REGISTRY_AUTH=htpasswd - REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd - REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm - REGISTRY_STORAGE_DELETE_ENABLED=true networks: - registry restart: always networks: registry: å¯åŠ¨ docker-compose up -d æˆåŠŸå¯åŠ¨åç§æœ‰é•œåƒä»“åº“å†…ç½‘åœ°å€ä¸º: 192.168.1.5:5000 å¯æ ¹æ®éœ€æ±‚ä½¿ç”¨åŸŸåé…ç½®åå‘ä»£ç†,ä¾‹å¦‚: https://registry.yourdomain.com æ³¨æ„éœ€å¼€æ”¾é˜²ç«å¢™ 5000 ç«¯å£ ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:2:2","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"é…ç½®å®¢æˆ·ç«¯ ä»¥CentOSä¸ºä¾‹,åˆ›å»ºæˆ–ä¿®æ”¹/etc/docker/daemon.jsonæ–‡ä»¶. æ³¨æ„,å¦‚ä½¿ç”¨åŸŸåé…ç½®åå‘ä»£ç†å¹¶å¼€å¯HTTPS,åˆ™æ— éœ€é…daemon.jsonæ–‡ä»¶. { \"insecure-registries\": [ \"192.168.1.5:5000\" ] } æˆ– { \"insecure-registries\": [ \"101.102.103.104:5000\" ] } ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:2:3","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨ ç™»å½• docker login registry.yourdomain.com docker login 192.168.1.5:5000 docker login 101.102.103.104:5000 # ä½¿ç”¨ä¸Šæ–‡åˆ›å»ºçš„è´¦å·å¯†ç  admin 12345678 ç™»å½• ç™»å‡º docker logout registry.yourdomain.com docker logout 192.168.1.5:5000 docker logout 101.102.103.104:5000 Push å°†ç°æœ‰é•œåƒ tag ä¸ºç§æœ‰ä»“åº“é•œåƒå docker images # è·å–ç°æœ‰é•œåƒçš„ IMAGE ID docker tag 102816b1ee7d registry.yourdomain.com/mysql:8.0.13 docker tag 102816b1ee7d 192.168.1.5:5000/mysql:8.0.13 docker tag 102816b1ee7d 101.102.103.104:5000/mysql:8.0.13 Push è‡³ç§æœ‰é•œåƒä»“åº“ docker push registry.yourdomain.com/mysql:8.0.13 docker push 192.168.1.5:5000/mysql:8.0.13 docker push 101.102.103.104:5000/mysql:8.0.13 Pull docker pull registry.yourdomain.com/mysql:8.0.13 docker pull 192.168.1.5:5000/mysql:8.0.13 docker pull 101.102.103.104:5000/mysql:8.0.13 æŸ¥çœ‹é•œåƒä»“åº“æ¸…å• curl -u admin:12345678 -X GET https://registry.yourdomain.com/v2/_catalog æŸ¥çœ‹é•œåƒ tag æ¸…å• curl -u admin:12345678 -X GET https://registry.yourdomain.com/v2/mysql/tags/list åˆ é™¤é•œåƒ docker-compose.yml`ç¯å¢ƒå˜é‡ä¸­å¼€å¯`REGISTRY_STORAGE_DELETE_ENABLED=true è·å–é•œåƒ digest hash curl -u admin:12345678 --header \"Accept: application/vnd.docker.distribution.manifest.v2+json\" -I -X GET https://registry.yourdomain.com/v2/mysql/manifests/8.0.13 # è·å– digest hash å¦‚ä¸‹ sha256:45a2a291xxx223123fc03d9be551e362b460exxs56787736919baa åˆ é™¤é•œåƒæ¸…å• curl -u admin:12345678 -I -X DELETE https://registry.yourdomain.com/v2/mysql/manifests/sha256:45a2a291xxx223123fc03d9be551e362b460exxs56787736919baa æ¸…ç†ç£ç›˜ç©ºé—´ docker exec registry bin/registry garbage-collect /etc/docker/registry/config.yml æ‰‹åŠ¨åˆ é™¤ç›®å½• å®Œæˆä¸Šè¿°æ“ä½œåè¿˜å¯ä»¥åˆ é™¤å­˜å‚¨ç›®å½•ä¸­çš„ç©ºç›®å½•æ–‡ä»¶,å¦‚ä¸åˆ é™¤ä¾æ—§å¯ä»¥è¢«ä¸Šè¿°æŸ¥çœ‹é•œåƒä»“åº“çš„å‘½ä»¤æŸ¥è¯¢åˆ°ç»“æœ. ä¾ç…§ä¸Šæ–‡ç¤ºä¾‹,æŒ‚è½½å­˜å‚¨ç›®å½•è·¯å¾„å¦‚ä¸‹: ./registry/docker/registry/v2/repositories ","date":"2022-02-24","objectID":"/docker%E5%9F%BA%E7%A1%80/:2:4","tags":["docker"],"title":"dockeråŸºç¡€","uri":"/docker%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"å‰è¨€ ä¸Šæ¬¡å®‰è£…äº†Harborï¼Œå¹¶æ²¡æœ‰å¼€å¯httpsï¼Œä¸å¤ªå®‰å…¨ï¼Œè¿™æ¬¡è®°å½•ä¸‹è‡ªç­¾åè¯ä¹¦æ¥å®ç°httpsç™»å½•ã€‚ ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:1:0","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"è‡ªç­¾åè¯ä¹¦åˆ›å»ºè¿‡ç¨‹ åˆ›å»ºè¯ä¹¦ç›®å½• mkdir /root/ca -p cd /root/ca #ä»¥ä¸‹å‘½ä»¤åˆ›å»ºCAè¯ä¹¦ openssl req -newkey rsa:4096 -nodes -sha256 -keyout ca.key -x509 -days 365 -out ca.crt å…¶ä¸­ï¼šï¼ˆreqï¼šç”³è¯·è¯ä¹¦ç­¾ç½²è¯·æ±‚ï¼›-newkey æ–°å¯†é’¥ ï¼›-x509ï¼šå¯ä»¥ç”¨æ¥æ˜¾ç¤ºè¯ä¹¦çš„å†…å®¹ï¼Œè½¬æ¢å…¶æ ¼å¼ï¼Œç»™CSRç­¾åç­‰X.509è¯ä¹¦çš„ç®¡ç†å·¥ä½œï¼Œè¿™é‡Œç”¨æ¥è‡ªç­¾åã€‚ï¼‰ ä¸€è·¯å›è½¦å‡ºç°Common Name è¾“å…¥IPæˆ–åŸŸå: Common Name (eg, your name or your server's hostname) []:harbor.lhp.com ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:2:0","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ openssl req -newkey rsa:4096 -nodes -sha256 -keyout harbor.lhp.com.key ä¸€è·¯å›è½¦å‡ºç°Common Name è¾“å…¥IPæˆ–åŸŸå Common Name (eg, your name or your server's hostname) []:harbor.lhp.com ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:2:1","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"ç”Ÿæˆx509 v3 æ‰©å±•æ–‡ä»¶ cat \u003e v3.ext \u003c\u003c-EOF authorityKeyIdentifier=keyid,issuer basicConstraints=CA:FALSE keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment extendedKeyUsage = serverAuth subjectAltName = DNS:harbor.lhp.com EOF ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:2:2","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"ç”Ÿæˆä¸»æœºè¯ä¹¦ openssl x509 -req -sha512 -days 3650 \\ -extfile v3.ext \\ -CA ca.crt -CAkey ca.key -CAcreateserial \\ -in harbor.lhp.com.csr \\ -out harbor.lhp.com.crt ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:2:3","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"å¢åŠ dockerè¯ä¹¦å¯ä¿¡ openssl x509 -inform PEM -in harbor.lhp.com.crt -out harbor.lhp.com.cert mkdir -p /etc/docker/certs.d/ cp harbor.lhp.com.cert /etc/docker/certs.d/harbor.lhp.com/ cp harbor.lhp.com.key /etc/docker/certs.d/harbor.lhp.com/ cp ca.crt /etc/docker/certs.d/harbor.lhp.com/ ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:2:4","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"é‡å¯docker /etc/init.d/docker restart ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:2:5","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"é…ç½®harbor.yml #set hostname hostname = harbor.lhp.com #åŸŸåæˆ–ip #set ui_url_protocol uiurlprotocol = https #è¿™é‡Œæ”¹ä¸ºhttps**** ...... #The path of cert and key files for nginx, they are applied only the protocol is set to https ssl_cert = /root/ca/harbor.lhp.com.crt #crtä½ç½® ssl_cert_key = /root/ca/harbor.lhp.com.key #keyçš„ä½ç½® ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:2:6","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"é…ç½®å¯åŠ¨harbor #åˆ°harborå®‰è£…ç›®å½•ä¸‹æ›´æ–°é…ç½®æ–‡ä»¶ ./prepare #å¯åŠ¨harbor docker-compose -f docker-compose.yml up -d ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:2:7","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"æµ‹è¯• https://harbor.lhp.com ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:3:0","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"é‡æ–°ç™»å½•harboræŠ¥é”™ x509 é‡æ–°ç¼–è¾‘/etc/docker/daemon.jsonæ–‡ä»¶ { \"registry-mirrors\": [\"https://jliunkl7.mirror.aliyuncs.com\"], \"insecure-registries\": [\"harbor.lhp.com\"] } é‡å¯dockerå³å¯. å®˜æ–¹å‚è€ƒ ","date":"2022-02-21","objectID":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/:3:1","tags":["hatbor"],"title":"harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•","uri":"/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/"},{"categories":["å·¥å…·"],"content":"å‰è¨€ ç”±äºæˆ‘ä½¿ç”¨çš„ubuntu20.04ä¸­dockeræ‰€å¯åŠ¨çš„æœåŠ¡é™¤äº†æœ¬æœºèƒ½è®¿é—®ï¼Œå±€åŸŸç½‘ä¸­å…¶ä»–è®¾å¤‡éƒ½æ— æ³•è®¿é—®ã€‚å®¹å™¨ç«¯å£å’Œwindowsæœ¬æœºç«¯å£ä¸ç›¸é€šï¼Œéœ€è¦windowså¼€å¯ç«¯å£è½¬å‘ã€‚ç½‘ä¸Šæ‰¾äº†å¥½å¤šèµ„æ–™å‘ç°æœ‰ä½githubç”¨æˆ·å¼€å‘çš„è„šæœ¬ç®€å•æ˜“ç”¨å¹¶ä¸”èƒ½å®Œç¾è§£å†³ç«¯å£è½¬å‘é—®é¢˜ã€‚ ","date":"2022-02-21","objectID":"/%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%9C%AC%E6%9C%BAwsl2%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1/:1:0","tags":["wsl2"],"title":"å±€åŸŸç½‘ä¸­å…¶ä»–ä¸»æœºè®¿é—®æœ¬æœºwsl2ä¸­çš„æœåŠ¡","uri":"/%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%9C%AC%E6%9C%BAwsl2%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1/"},{"categories":["å·¥å…·"],"content":"windowsä¸Šä½¿ç”¨ é“¾æ¥ ä¸‹è½½wslpp.exeå³å¯ä½¿ç”¨ï¼Œé»˜è®¤æ‰€æœ‰IPéƒ½èƒ½è®¿é—®æœ¬æœºçš„dockerç”Ÿæˆçš„æœåŠ¡ç«¯å£ï¼Œå¹¶ä¸”ä¸ç”¨é…ç½®ã€‚ ","date":"2022-02-21","objectID":"/%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%9C%AC%E6%9C%BAwsl2%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1/:1:1","tags":["wsl2"],"title":"å±€åŸŸç½‘ä¸­å…¶ä»–ä¸»æœºè®¿é—®æœ¬æœºwsl2ä¸­çš„æœåŠ¡","uri":"/%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%9C%AC%E6%9C%BAwsl2%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1/"},{"categories":["å·¥å…·"],"content":"linuxä¸­ä½¿ç”¨ ç¯å¢ƒ wslä¸­å¿…é¡»å®‰è£…net-toolså·¥å…· sudo apt-get install net-tools åœ¨Windows PowerShellä¸­, å°†å…¶cloneåˆ°æœ¬åœ°: git clone https://github.com/HobaiRiku/wsl2-auto-portproxy.git åœ¨WSL2ä¸­, ç¼–è¯‘æ­¤é¡¹ç›®,æ³¨æ„,æ˜¯éœ€è¦Goçš„ç¯å¢ƒçš„, è€Œä¸”è¿™ä¸€æ­¥éª¤éœ€è¦åœ¨Windowsçš„ç®¡ç†å‘˜æ¨¡å¼è¿›è¡Œ sudo apt install golang-go cd /mnt/c/Users/`windows-user-name`/wsl2-auto-portproxy/ make build é…ç½®wslppçš„é…ç½®æ–‡ä»¶, åœ¨WSLä¸­æ‰§è¡Œ mkdir /mnt/c/Users/14408/.wslpp vim /mnt/c/Users/14408/.wslpp/config.json è¾“å…¥: { \"onlyPredefined\": true, \"predefined\": { \"tcp\": [ \"22:22\" ] }, \"ignore\": { \"tcp\": [ 445 ] } }: å›åˆ°Windows PowerShellä¸­, æ‰§è¡Œ: cd .\\wsl2-auto-portproxy\\dist\\ .\\wslpp.exe æ­¤å¤–, WSLæ“ä½œWindowsçš„æ–‡ä»¶,æ˜¯éœ€è¦åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹è¿›è¡Œçš„. ","date":"2022-02-21","objectID":"/%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%9C%AC%E6%9C%BAwsl2%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1/:1:2","tags":["wsl2"],"title":"å±€åŸŸç½‘ä¸­å…¶ä»–ä¸»æœºè®¿é—®æœ¬æœºwsl2ä¸­çš„æœåŠ¡","uri":"/%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%9C%AC%E6%9C%BAwsl2%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1/"},{"categories":["å·¥å…·"],"content":"å‰è¨€ Harbor æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨é•œåƒä»“åº“ï¼Œå®ƒæä¾›ç”¨æˆ·æƒé™ç®¡ç†ã€é•œåƒå¤åˆ¶ç­‰åŠŸèƒ½ï¼Œæé«˜ä½¿ç”¨çš„registryçš„æ•ˆç‡ã€‚ç¡®ä¿é•œåƒè¢«æ‰«æå¹¶ä¸”æ²¡æœ‰æ¼æ´ï¼Œå¹¶å°†é•œåƒæ ‡è®°ä¸ºå¯ä¿¡ã€‚ ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:1:0","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"harboræ¶æ„ ä¸»è¦ç»„ä»¶åŒ…æ‹¬proxyï¼Œä»–æ˜¯ä¸€ä¸ªnginxå‰ç«¯ä»£ç†ï¼Œä¸»è¦æ˜¯åˆ†å‘å‰ç«¯é¡µé¢uiè®¿é—®å’Œé•œåƒä¸Šä¼ å’Œä¸‹è½½æµé‡ï¼Œä¸Šå›¾ä¸­é€šè¿‡æ·±è“è‰²å…ˆæ ‡è¯†ï¼› uiæä¾›äº†ä¸€ä¸ªwebç®¡ç†é¡µé¢ï¼Œå½“ç„¶è¿˜åŒ…æ‹¬äº†ä¸€ä¸ªå‰ç«¯é¡µé¢å’Œåç«¯APIï¼Œåº•å±‚ä½¿ç”¨mysqlæ•°æ®åº“ã€‚ registryæ˜¯é•œåƒä»“åº“ï¼Œè´Ÿè´£å­˜å‚¨é•œåƒæ–‡ä»¶ï¼Œå½“é•œåƒä¸Šä¼ å®Œæ¯•åé€šè¿‡hooké€šçŸ¥uiåˆ›å»ºrepositoryï¼Œä¸Šå›¾é€šè¿‡çº¢è‰²çº¿æ ‡è¯†ï¼Œå½“ç„¶registryçš„tokenè®¤è¯ä¹Ÿæ˜¯é€šè¿‡uiç»„ä»¶å®Œæˆã€‚ adminserveræ˜¯ç³»ç»Ÿçš„é…ç½®ç®¡ç†ä¸­å¿ƒé™„å¸¦æ£€æŸ¥å­˜å‚¨ç”¨é‡ï¼Œuiå’Œjobserverå¯åŠ¨æ—¶å€™å›éœ€è¦åŠ è½½adminserverçš„é…ç½®ï¼Œé€šè¿‡ç°è‰²çº¿æ ‡è¯†ã€‚jobseviceæ˜¯è´Ÿè´£é•œåƒå¤åˆ¶å·¥ä½œçš„ï¼Œä»–å’Œregistryé€šä¿¡ï¼Œä»ä¸€ä¸ªregistry pullé•œåƒç„¶åpushåˆ°å¦ä¸€ä¸ªregistryï¼Œå¹¶è®°å½•job_logï¼Œä¸Šå›¾é€šè¿‡ç´«è‰²çº¿æ ‡è¯†ã€‚ logæ˜¯æ—¥å¿—æ±‡æ€»ç»„ä»¶ï¼Œé€šè¿‡dockerçš„log-driveræŠŠæ—¥å¿—æ±‡æ€»åˆ°ä¸€èµ·ï¼Œé€šè¿‡æµ…è“è‰²çº¿æ¡æ ‡è¯†ã€‚ ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:2:0","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ç¯å¢ƒå‡†å¤‡ è¿è¡Œç¯å¢ƒ Ubuntu 20.04 LTS docker-ceï¼š20.10.12 docker-composeï¼šv2.2.3 harbor-offlineï¼šv1.10.10 ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:3:0","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å®‰è£…docker å®˜æ–¹å®‰è£…å‚è€ƒ æˆ‘æ˜¯åœ¨wsl2ä¸­ä½¿ç”¨ubuntu 20.04ç³»ç»Ÿå®‰è£…dockerçš„ã€‚ åˆ é™¤æ—§ç‰ˆdocker sudo apt-get remove docker docker-engine docker.io containerd runc å¦‚æœä¹‹å‰å®‰è£…è¿‡docker,é‚£ä¹ˆæ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½åœ¨/var/lib/docker/ä¸­,åŒ…æ‹¬images, containers, volumes, and networksã€‚ ä¸ç”¨å¯ä»¥åˆ é™¤ã€‚ å¼€å§‹å®‰è£…è®¾ç½®repoæº sudo apt-get update sudo apt-get install \\ ca-certificates \\ curl \\ gnupg \\ lsb-release æ·»åŠ Dockerçš„å®˜æ–¹GPG key curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg è®¾ç½®ç¨³å®šç‰ˆrepoæº echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null å®‰è£…docker-ce sudo apt-get update sudo apt-get install docker-ce docker-ce-cli containerd.io æµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸ sudo docker run hello-world å®‰è£…docker-compose harboréœ€è¦ç”¨docker-composeæ¥ç®¡ç†ã€‚ æºç åœ°å€ï¼šhttps://github.com/docker/compose/releases ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ã€‚ curl -L https://github.com/docker/compose/releases/download/v2.2.3/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose æ·»åŠ æ‰§è¡Œæƒé™ã€‚ chmod +x /usr/local/bin/docker-compose éªŒè¯ä¸€ä¸‹ã€‚ $docker-compose --version è¾“å‡ºï¼š Docker Compose version v2.2.3 ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:4:0","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å®‰è£… harbor æºç åœ°å€ï¼šhttps://github.com/goharbor/harbor/releases é¡¹ç›®åˆ†æœ‰åœ¨çº¿ç‰ˆï¼Œä»¥åŠç¦»çº¿ç‰ˆï¼Œè¿™é‡Œä½¿ç”¨ç¦»çº¿ç‰ˆçš„å®‰è£…ã€‚ ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:0","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ä¸‹è½½å®‰è£…åŒ…ã€‚ wget https://github.com/goharbor/harbor/releases/download/v1.10.10/harbor-offline-installer-v1.10.10.tgz æˆ–è®¸ç”¨è¿…é›·ä¸‹è½½ï¼Œé€Ÿåº¦æ›´ä½³ã€‚ è§£å‹å®‰è£…åŒ…ã€‚ mkdir -p softwere cd /root/softwere mv harbor-offline-installer-v1.10.10.tgz /root/softwere tar xvf harbor-offline-installer-v1.10.10.tgz ls harbor LICENSE common common.sh docker-compose.yml harbor.v1.10.10.tar.gz harbor.yml install.sh prepare ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:1","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æ›´æ”¹é…ç½® è¿™é‡Œä½¿ç”¨åŸŸå+5000ç«¯å£æ¥è®¿é—®ï¼Œå…³é—­httpsã€‚å®Œæ•´é…ç½®å¦‚ä¸‹ï¼š vim harbor.yml # Configuration file of Harbor # The IP address or hostname to access admin UI and registry service. # DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients. hostname: harbor.lhp.com # http related config http: # port for http, default is 80. If https enabled, this port will redirect to https port port: 5000 # https related config # https: # https port for harbor, default is 443 # port: 443 # The path of cert and key files for nginx # certificate: /your/certificate/path # private_key: /your/private/key/path # Uncomment external_url if you want to enable external proxy # And when it enabled the hostname will no longer used # external_url: https://reg.mydomain.com:8433 # The initial password of Harbor admin # It only works in first time to install harbor # Remember Change the admin password from UI after launching Harbor. harbor_admin_password: Toor12345 # Harbor DB configuration database: # The password for the root user of Harbor DB. Change this before any production use. password: root123 # The maximum number of connections in the idle connection pool. If it \u003c=0, no idle connections are retained. max_idle_conns: 50 # The maximum number of open connections to the database. If it \u003c= 0, then there is no limit on the number of open connections. # Note: the default number of connections is 100 for postgres. max_open_conns: 100 # The default data volume data_volume: /data # Harbor Storage settings by default is using /data dir on local filesystem # Uncomment storage_service setting If you want to using external storage # storage_service: # # ca_bundle is the path to the custom root ca certificate, which will be injected into the truststore # # of registry's and chart repository's containers. This is usually needed when the user hosts a internal storage with self signed certificate. # ca_bundle: # # storage backend, default is filesystem, options include filesystem, azure, gcs, s3, swift and oss # # for more info about this configuration please refer https://docs.docker.com/registry/configuration/ # filesystem: # maxthreads: 100 # # set disable to true when you want to disable registry redirect # redirect: # disabled: false # Clair configuration clair: # The interval of clair updaters, the unit is hour, set to 0 to disable the updaters. updaters_interval: 12 jobservice: # Maximum number of job workers in job service max_job_workers: 10 notification: # Maximum retry count for webhook job webhook_job_max_retry: 10 chart: # Change the value of absolute_url to enabled can enable absolute url in chart absolute_url: disabled # Log configurations log: # options are debug, info, warning, error, fatal level: info # configs for logs in local storage local: # Log files are rotated log_rotate_count times before being removed. If count is 0, old versions are removed rather than rotated. rotate_count: 50 # Log files are rotated only if they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be in kilobytes. # If the M is used, the size is in megabytes, and if G is used, the size is in gigabytes. So size 100, size 100k, size 100M and size 100G # are all valid. rotate_size: 200M # The directory on your host that store log location: /var/log/harbor # Uncomment following lines to enable external syslog endpoint. # external_endpoint: # # protocol used to transmit log to external endpoint, options is tcp or udp # protocol: tcp # # The host of external endpoint # host: localhost # # Port of external endpoint # port: 5140 #This attribute is for migrator to detect the version of the .cfg file, DO NOT MODIFY! _version: 1.10.0 # Uncomment external_database if using external database. # external_database: # harbor: # host: harbor_db_host # port: harbor_db_port # db_name: harbor_db_name # username: harbor_db_username # password: harbor_db_password # ssl_mode: disable # max_idle_conns: 2 # max_open_conns: 0 # clair: # host: clair_db_h","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:2","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æ·»åŠ æ˜ å°„å…³ç³» vi /etc/hosts 172.28.238.43 harbor.lhp.com ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:3","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"windowsä¹Ÿéœ€è¦æ·»åŠ æ˜ å°„å…³ç³» ç”¨ç®¡ç†å‘˜ç”¨æˆ·ç¼–è¾‘C:\\Windows\\System32\\drivers\\etc\\hosts #åŒæ ·æ·»åŠ ä¸‹é¢å†…å®¹ 172.28.238.43 harbor.lhp.com ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:4","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ä¿®æ”¹ååˆ·æ–° ipconfig /flushdns é…ç½®daemon.jsonï¼Œdockerç™»å½•harboræ—¶éœ€è¦ã€‚ vi /etc/docker/daemon.json { \"registry-mirrors\": [\"https://jliunkl7.mirror.aliyuncs.com\"], \"insecure-registries\": [\"harbor.lhp.com:5000\"] } ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:5","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"é‡å¯docker service docker stop service docker start ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:6","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æ‰§è¡Œinstall.shè„šæœ¬å®‰è£… ./install.sh ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:7","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æµ‹è¯•è®¿é—®harbor http://harbor.lhp.com:5000 ç”¨æˆ·åï¼šadmin å¯†ç ï¼šToor12345 ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:8","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"dockerç™»å½•harbor docker login -u admin http://harbor.lhp.com:5000 ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:9","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"harboråˆ›å»ºé¡¹ç›® ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:10","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½åˆ°harbor #push docker tag alpine:latest harbor.lhp.com:5000/images/alpine:latest docker push harbor.lhp.com:5000/images/alpine:latest #pull docker pull harbor.lhp.com:5000/images/alpine:latest portainerä¸­æ·»åŠ harborä»“åº“ã€‚ä»¥åå°±å¯ä»¥åœ¨portainerä¸­å¯è§†åŒ–ä¸Šä¼ å’Œä¸‹è½½é•œåƒå•¦ï¼ ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:5:11","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ç™»å½•portainerå¹¶æ–°å¢ä»“åº“ ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:6:0","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½ã€‚ é•œåƒæ‰“tagæ—¶æ³¨æ„è¦åœ¨é•œåƒå‰åŠ harboré¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ–‡ä¸­çš„ä¸ºimagesã€‚ å°†busybox:latestä¸Šä¼ åˆ°harborçš„imagesä¸­ã€‚ è¿›å…¥busyboxé•œåƒå¹¶æ‰“tagï¼Œæ³¨æ„æ ¼å¼ã€‚ ä¸Šä¼ é•œåƒåˆ°harborä»“åº“ harborä¸­æŸ¥çœ‹ harborä¸Šæ‹‰å–é•œåƒæ“ä½œ é€‰æ‹©è¦æ‹‰å–çš„é•œåƒå¹¶æ‹‰å–ã€‚ ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:6:1","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"harborç™»å½•æ—¶é‡åˆ°çš„å‘ å¦‚æœæ˜¾ç¤ºharborç™»å½•å¤±è´¥ï¼Œè€Œå¯†ç åˆæ˜¯harbor.ymlä¸­è®¾ç½®çš„å¯†ç ã€‚æ­¤æ—¶éœ€è¦åœæ­¢harboræ‰€æœ‰ç›¸å…³é•œåƒã€‚è¿›å…¥åˆ°harborå®‰è£…ç›®å½•ã€‚ cd /root/softwere/harbor #åœæ­¢harboræ‰€æœ‰ç›¸å…³é•œåƒ docker-compose down -v #å¼€å¯harboræ‰€æœ‰ç›¸å…³é•œåƒ docker-compose up -d åœæ­¢dockeræœåŠ¡ï¼Œåˆ é™¤harborçš„æ•°æ®å·,æ¸…é™¤æ—¥å¿—ï¼Œè·¯å¾„åœ¨harbor.ymlä¸­ã€‚ rm -rf /data rm -rf /var/log/harbor #path data_volume: /data location: /var/log/harbor æœ€ååˆ é™¤harboræ–‡ä»¶å¤¹ï¼Œé‡æ–°è§£å‹å®‰è£…å³å¯ã€‚ rm -rf /root/softwere/harbor cd /root/softwere/ tar -xf harbor.v1.10.10.tar.gz ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:7:0","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å…¶ä»–åŠŸèƒ½-Harboré•œåƒæ¼æ´æ‰«æ å®‰è£…harborè‡ªå¸¦çš„æ¼æ´æ‰«æ æ·»åŠ æ‰«ææ¨¡å— #è¿›å…¥åˆ°harborç›®å½•ä¸­æ“ä½œ ./prepare --with-clair prepare base dir is set to /root/softwere/harbor /usr/src/app/utils/configs.pyğŸ’¯ YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details. configs = yaml.load(f) WARNING:root:WARNING: HTTP protocol is insecure. Harbor will deprecate http protocol in the future. Please make sure to upgrade to httpsClearing the configuration file: /config/db/env Clearing the configuration file: /config/jobservice/env Clearing the configuration file: /config/jobservice/config.yml Clearing the configuration file: /config/nginx/nginx.conf Clearing the configuration file: /config/registryctl/env Clearing the configuration file: /config/registryctl/config.yml Clearing the configuration file: /config/registry/root.crt Clearing the configuration file: /config/registry/config.yml Clearing the configuration file: /config/core/env Clearing the configuration file: /config/core/app.conf Clearing the configuration file: /config/log/rsyslog_docker.conf Clearing the configuration file: /config/log/logrotate.conf Generated configuration file: /config/log/logrotate.conf Generated configuration file: /config/log/rsyslog_docker.conf Generated configuration file: /config/nginx/nginx.conf Generated configuration file: /config/core/env Generated configuration file: /config/core/app.conf Generated configuration file: /config/registry/config.yml Generated configuration file: /config/registryctl/env Generated configuration file: /config/db/env Generated configuration file: /config/jobservice/env Generated configuration file: /config/jobservice/config.yml loaded secret from file: /secret/keys/secretkey Generated configuration file: /config/clair/postgres_env Generated configuration file: /config/clair/config.yaml Generated configuration file: /config/clair/clair_env Generated configuration file: /config/clair-adapter/env Generated configuration file: /compose_location/docker-compose.yml /usr/src/app/utils/configs.py:90: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details. versions = yaml.load(f) Clean up the input dir #ä¼šè‡ªåŠ¨ç”Ÿæˆdocker-compose.ymlæ–‡ä»¶ âœ harbor ls LICENSE common common.sh docker-compose.yml harbor.v1.10.10.tar.gz harbor.yml install.sh prepare é‡å¯å¯åŠ¨harboræœåŠ¡ï¼ˆæ³¨æ„è¿™é‡Œè¦æŒ‡å®šdocker-compose.yamlæ–‡ä»¶ï¼‰ docker-compose -f docker-compose.yml up -d æµ‹è¯•æ‰«æ å¯ä»¥çœ‹åˆ°åœ¨é¡¹ç›®é‡Œé¢å·²ç»æ˜¾ç¤ºå®‰è£…å¥½äº†æ‰«æå™¨æ’ä»¶ï¼Œä¸å®‰è£…è¿™é‡Œæ˜¯æ²¡æœ‰çš„ã€‚ é€‰æ‹©é•œåƒæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œæ‰«æäº†ã€‚ é•œåƒæœªæ‰«æå‰ é•œåƒæ‰«æå ","date":"2022-02-18","objectID":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/:8:0","tags":["harbor"],"title":"harborå®‰è£…ä¸ç®€å•ä½¿ç”¨","uri":"/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å‰è¨€ Portaineræ˜¯ä¸€æ¬¾è½»é‡çº§çš„Dockerå›¾å½¢åŒ–ç®¡ç†çš„æ–¹æ¡ˆï¼Œç›¸æ¯”k8så’Œk3sï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼ åŠŸèƒ½ç‚¹ï¼š å¤šå¹³å°æ”¯æŒï¼šLinux/Windows/OSX æ§åˆ¶é¢æ¿åˆ†ç±»å±•ç¤º æŠ€æœ¯æ ˆåˆ†ç±»å±•ç¤ºï¼šä½¿ç”¨swarmæˆ–docker-composeç­‰å¯åŠ¨çš„æœåŠ¡/é›†ç¾¤ä¼šåœ¨è¿™é‡Œå‡ºç° ç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸ åº”ç”¨æ¨¡æ¿å¿«é€Ÿéƒ¨ç½² ç®¡ç†Swarmé›†ç¾¤æˆ–å¤šæœåŠ¡å™¨çš„é•œåƒ/å®¹å™¨/å·/ç½‘ç»œ æ“ä½œäº‹ä»¶æ—¥å¿—è®°å½• å®¹å™¨æ§åˆ¶å°æ—¥å¿—å±•ç¤º ä½¿ç”¨å¤šä¸ªDockerä»“åº“ç§æœpull/pushé•œåƒ ç”¨æˆ·æƒé™ç®¡ç†åŠŸèƒ½ï¼ˆéœ€ä»˜è´¹$9.9ï¼‰ ","date":"2022-02-17","objectID":"/wsl2%E4%B8%ADportainer%E5%AE%B9%E5%99%A8%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:1:0","tags":["wsl2"],"title":"wsl2ä¸­Portainerå®¹å™¨å¯è§†åŒ–ç®¡ç†å·¥å…·çš„å®‰è£…ä¸ä½¿ç”¨","uri":"/wsl2%E4%B8%ADportainer%E5%AE%B9%E5%99%A8%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å®‰è£… å®˜æ–¹æ–‡æ¡£ é¦–å…ˆï¼Œåˆ›å»º Portainer Server å°†ç”¨äºå­˜å‚¨å…¶æ•°æ®åº“çš„å·ï¼š docker volume create portainer_data ç„¶åï¼Œä¸‹è½½å¹¶å®‰è£… Portainer Server å®¹å™¨: docker run -d -p 8000:8000 -p 9000:9000 -p 9443:9443 \\ --name=portainer --restart=always \\ -v /var/run/docker.sock:/var/run/docker.sock \\ -v portainer_data:/data \\ portainer/portainer-ce:2.11.1 æŸ¥çœ‹æ˜¯å¦å¯åŠ¨ âœ ~ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES bb2b73d4a4a6 portainer/portainer-ce:2.11.1 \"/portainer\" 2 hours ago Up About an hour 0.0.0.0:8000-\u003e8000/tcp, :::8000-\u003e8000/tcp, 0.0.0.0:9443-\u003e9443/tcp, :::9443-\u003e9443/tcp, 9000/tcp portainer ç™»å½• https://localhost:9443 æ³¨æ„:localhostå¯ä»¥æ”¹æˆIP ç¬¬ä¸€æ¬¡ç™»å½•éœ€è¦åˆå§‹åŒ–ç¯å¢ƒï¼Œåˆ›å»ºè¶…çº§ç®¡ç†å‘˜ç”¨æˆ·åå’Œå¯†ç ã€‚ è¿›å…¥åä¼šè‡ªåŠ¨æ‰«æå®¹å™¨ç¯å¢ƒ å‡çº§å‚è€ƒå®˜æ–¹æ–‡æ¡£ ","date":"2022-02-17","objectID":"/wsl2%E4%B8%ADportainer%E5%AE%B9%E5%99%A8%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:2:0","tags":["wsl2"],"title":"wsl2ä¸­Portainerå®¹å™¨å¯è§†åŒ–ç®¡ç†å·¥å…·çš„å®‰è£…ä¸ä½¿ç”¨","uri":"/wsl2%E4%B8%ADportainer%E5%AE%B9%E5%99%A8%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å‰è¨€ ç”±äºwsl2æ¯æ¬¡å¯åŠ¨IPéƒ½ä¼šæ”¹å˜ï¼ŒæŸ¥é˜…å¾®è½¯å®˜æ–¹æ–‡æ¡£åå‘ç°wsl2æ— æ³•è®¾ç½®é™æ€IPã€‚ç„¶è€Œdockersç§æœ‰ä»“åº“registryä¸­IPé…ç½®æ˜¯å›ºå®šçš„ã€‚æ‰€ä»¥éœ€è¦è‡ªå®šä¹‰è„šæœ¬å®æ—¶è·å–wsl2æœ¬æœºIPï¼Œå¹¶å¤åˆ¶åˆ°/etc/docker/daemon.jsonä¸­å¯¹åº”çš„IPä½ç½®ã€‚è¿˜éœ€è¦åˆ›å»ºç³»ç»ŸæœåŠ¡å¯åŠ¨è„šæœ¬ã€‚ä»¥ä¸‹å†…å®¹å‡åœ¨ubuntu 20.04 LTSä¸­å®ç°ã€‚ ","date":"2022-02-17","objectID":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/:1:0","tags":["è„šæœ¬"],"title":"ä½¿ç”¨è„šæœ¬è·å–æœ¬æœºIPå¹¶å¤åˆ¶åˆ°registryé…ç½®æ–‡ä»¶ä¸­","uri":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/"},{"categories":["å·¥å…·"],"content":"æ€è·¯ è¦æƒ³å®ç°éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨bashä¸­å¤šè„šæœ¬ä¹‹é—´å˜é‡ä¼ é€’ã€‚å‚è€ƒ ","date":"2022-02-17","objectID":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/:2:0","tags":["è„šæœ¬"],"title":"ä½¿ç”¨è„šæœ¬è·å–æœ¬æœºIPå¹¶å¤åˆ¶åˆ°registryé…ç½®æ–‡ä»¶ä¸­","uri":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/"},{"categories":["å·¥å…·"],"content":"è·å–wsl2æœ¬æœºIP vi /root/init_code/get-ip.sh \u0026\u0026 chmod +x /root/init_code/get-ip.sh var=`hostname -I | awk '{print $1}'` echo $var ","date":"2022-02-17","objectID":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/:2:1","tags":["è„šæœ¬"],"title":"ä½¿ç”¨è„šæœ¬è·å–æœ¬æœºIPå¹¶å¤åˆ¶åˆ°registryé…ç½®æ–‡ä»¶ä¸­","uri":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/"},{"categories":["å·¥å…·"],"content":"æŸ¥çœ‹æ–‡æœ¬æ ¼å¼ cat /etc/docker/daemon.json { \"registry-mirrors\": [\"https://8xpk5wnt.mirror.aliyuncs.com\"], \"insecure-registries\": [\"172.26.133.115:5000\"] } ","date":"2022-02-17","objectID":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/:2:2","tags":["è„šæœ¬"],"title":"ä½¿ç”¨è„šæœ¬è·å–æœ¬æœºIPå¹¶å¤åˆ¶åˆ°registryé…ç½®æ–‡ä»¶ä¸­","uri":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/"},{"categories":["å·¥å…·"],"content":"åˆ›å»ºè„šæœ¬æ¥æ›´æ”¹daemon.jsonä¸­å¯¹åº”IP vi chang-daemon.sh \u0026\u0026 chmod +x chang-daemon.sh #!/bin/bash source /root/init_code/get-ip.sh echo \"{ \\\"registry-mirrors\\\": [\\\"https://8xpk5wnt.mirror.aliyuncs.com\\\"], \\\"insecure-registries\\\": [\\\"$var:5000\\\"] } \" \u003e /etc/docker/daemon.json åœ¨è„šæœ¬2ä¸­ä½¿ç”¨source æ¥å¼•ç”¨è„šæœ¬1ä¸­çš„å˜é‡ã€‚å¦‚ä½•æ‰“å°å‡ºåŒå¼•å·ï¼ŸåŒå¼•å·å‰åŠ åæ–œæ ã€‚ ä¾‹å¦‚ï¼š æ‰“å°å‡º\"Hello World!\" echo \"\\\"Hello World!\"\\\" ","date":"2022-02-17","objectID":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/:2:3","tags":["è„šæœ¬"],"title":"ä½¿ç”¨è„šæœ¬è·å–æœ¬æœºIPå¹¶å¤åˆ¶åˆ°registryé…ç½®æ–‡ä»¶ä¸­","uri":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/"},{"categories":["å·¥å…·"],"content":"åˆ›å»ºå¼€æœºè‡ªå¯åŠ¨è„šæœ¬ vi /root/init_code/init_myservice.sh #å¯åŠ¨sshæœåŠ¡å’ŒdockeræœåŠ¡ sudo service ssh restart sudo service docker start ","date":"2022-02-17","objectID":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/:2:4","tags":["è„šæœ¬"],"title":"ä½¿ç”¨è„šæœ¬è·å–æœ¬æœºIPå¹¶å¤åˆ¶åˆ°registryé…ç½®æ–‡ä»¶ä¸­","uri":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/"},{"categories":["å·¥å…·"],"content":"åˆ›å»ºæŸ¥çœ‹ä»“åº“ä¸­é•œåƒè„šæœ¬ vi /root/init_code/watch-myregistry.sh #!/bin/bash source /root/init_code/get-ip.sh curl -XGET http://$var:5000/v2/_catalog æ­å»ºç§æœ‰ä»“åº“å‘½ä»¤ docker run -d --name registry -v /opt/registry:/var/lib/registry -p 5000:5000 --restart=always registry ","date":"2022-02-17","objectID":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/:2:5","tags":["è„šæœ¬"],"title":"ä½¿ç”¨è„šæœ¬è·å–æœ¬æœºIPå¹¶å¤åˆ¶åˆ°registryé…ç½®æ–‡ä»¶ä¸­","uri":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/"},{"categories":["å·¥å…·"],"content":"é™„åŠ  wsl2ä¸­ä½¿ç”¨systemctlå¯åŠ¨æœåŠ¡æŠ¥é”™å¦‚ä¸‹ âœ ~ systemctl restart docker System has not been booted with systemd as init system (PID 1). Can't operate. Failed to connect to bus: Host is down wsl2ä¸­é»˜è®¤ä½¿ç”¨System V init æ¥ç®¡ç†ç³»ç»ŸæœåŠ¡ï¼Œè€Œä¸æ˜¯systemdã€‚æ‰€ä»¥ä¸èƒ½è¿è¡Œsystemdä¸­çš„å‘½ä»¤ã€‚ Systemd commandå’ŒSysvinit commandå‘½ä»¤å¯¹ç…§è¡¨ Systemd command Sysvinit command systemctl start service_name service service_name start systemctl stop service_name service service_name stop systemctl restart service_name service service_name restart systemctl status service_name service service_name status systemctl enable service_name chkconfig service_name on systemctl disable service_name chkconfig service_name off wsl2ä¸­ä½¿ç”¨chkconfig å‘½ä»¤è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯åŠ¨æ²¡æ•ˆæœï¼Œæ‰€ä»¥æœ€åè¿˜æ˜¯ä½¿ç”¨è„šæœ¬æ¥å®ç°ã€‚ æŸ¥çœ‹å½“å‰ç³»ç»ŸæœåŠ¡ç®¡ç†æœºåˆ¶ ä½¿ç”¨sysvinitç®¡ç†æœåŠ¡ âœ ~ ps -p 1 -o comm= init ä½¿ç”¨systemdç®¡ç†æœåŠ¡ [root@localhost ~]# ps -p 1 -o comm= systemd ","date":"2022-02-17","objectID":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/:3:0","tags":["è„šæœ¬"],"title":"ä½¿ç”¨è„šæœ¬è·å–æœ¬æœºIPå¹¶å¤åˆ¶åˆ°registryé…ç½®æ–‡ä»¶ä¸­","uri":"/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/"},{"categories":["linux"],"content":"ç®€ä»‹ æ··æ‚æ¨¡å¼å°±æ˜¯æ¥æ”¶æ‰€æœ‰ç»è¿‡ç½‘å¡çš„æ•°æ®åŒ…ï¼ŒåŒ…æ‹¬ä¸æ˜¯å‘ç»™æœ¬æœºçš„åŒ…ï¼Œå³ä¸éªŒè¯MACåœ°å€ã€‚æ™®é€šæ¨¡å¼ä¸‹ç½‘å¡åªæ¥æ”¶å‘ç»™æœ¬æœºçš„åŒ…ï¼ˆåŒ…æ‹¬å¹¿æ’­åŒ…ï¼‰ä¼ é€’ç»™ä¸Šå±‚ç¨‹åºï¼Œå…¶å®ƒçš„åŒ…ä¸€å¾‹ä¸¢å¼ƒã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œæ··æ‚æ¨¡å¼ä¸ä¼šå½±å“ç½‘å¡çš„æ­£å¸¸å·¥ä½œï¼Œå¤šåœ¨ç½‘ç»œç›‘å¬å·¥å…·ä¸Šä½¿ç”¨ã€‚ ","date":"2022-02-14","objectID":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/:1:0","tags":["linuxæ··æ‚æ¨¡å¼"],"title":"linuxä¸‹æ··æ‚æ¨¡å¼åˆ¤æ–­","uri":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/"},{"categories":["linux"],"content":"ç½‘å¡å·¥ä½œæ¨¡å¼ å¹¿æ’­æ¨¡å¼ï¼ˆBroad Cast Modelï¼‰:å®ƒçš„ç‰©ç†åœ°å€ï¼ˆMACï¼‰åœ°å€æ˜¯ 0Xffffff çš„å¸§ä¸ºå¹¿æ’­å¸§ï¼Œå·¥ä½œåœ¨å¹¿æ’­æ¨¡å¼çš„ç½‘å¡æ¥æ”¶å¹¿æ’­å¸§ã€‚ å¤šæ’­ä¼ é€ï¼ˆMultiCast Modelï¼‰ï¼šå¤šæ’­ä¼ é€åœ°å€ä½œä¸ºç›®çš„ç‰©ç†åœ°å€çš„å¸§å¯ä»¥è¢«ç»„å†…çš„å…¶å®ƒä¸»æœºåŒæ—¶æ¥æ”¶ï¼Œè€Œç»„å¤–ä¸»æœºå´æ¥æ”¶ä¸åˆ°ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†ç½‘å¡è®¾ç½®ä¸ºå¤šæ’­ä¼ é€æ¨¡å¼ï¼Œå®ƒå¯ä»¥æ¥æ”¶æ‰€æœ‰çš„å¤šæ’­ä¼ é€å¸§ï¼Œè€Œä¸è®ºå®ƒæ˜¯ä¸æ˜¯ç»„å†…æˆå‘˜ã€‚ ç›´æ¥æ¨¡å¼ï¼ˆDirect Modelï¼‰:å·¥ä½œåœ¨ç›´æ¥æ¨¡å¼ä¸‹çš„ç½‘å¡åªæ¥æ”¶ç›®åœ°å€æ˜¯è‡ªå·± Macåœ°å€çš„å¸§ã€‚ æ··æ‚æ¨¡å¼ï¼ˆPromiscuous Modelï¼‰:å·¥ä½œåœ¨æ··æ‚æ¨¡å¼ä¸‹çš„ç½‘å¡æ¥æ”¶æ‰€æœ‰çš„æµè¿‡ç½‘å¡çš„å¸§ï¼Œä¿¡åŒ…æ•è·ç¨‹åºå°±æ˜¯åœ¨è¿™ç§æ¨¡å¼ä¸‹è¿è¡Œçš„ã€‚ ç½‘å¡çš„ç¼ºçœå·¥ä½œæ¨¡å¼åŒ…å«å¹¿æ’­æ¨¡å¼å’Œç›´æ¥æ¨¡å¼ï¼Œå³å®ƒåªæ¥æ”¶å¹¿æ’­å¸§å’Œå‘ç»™è‡ªå·±çš„å¸§ã€‚å¦‚æœé‡‡ç”¨æ··æ‚æ¨¡å¼ï¼Œä¸€ä¸ªç«™ç‚¹çš„ç½‘å¡å°†æ¥å—åŒä¸€ç½‘ç»œå†…æ‰€æœ‰ç«™ç‚¹æ‰€å‘é€çš„æ•°æ®åŒ…è¿™æ ·å°±å¯ä»¥åˆ°è¾¾å¯¹äºç½‘ç»œä¿¡æ¯ç›‘è§†æ•è·çš„ç›®çš„ã€‚ ","date":"2022-02-14","objectID":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/:2:0","tags":["linuxæ··æ‚æ¨¡å¼"],"title":"linuxä¸‹æ··æ‚æ¨¡å¼åˆ¤æ–­","uri":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/"},{"categories":["linux"],"content":"å¼€å¯æ··æ‚æ¨¡å¼ Linuxä¸‹è®¾ç½®æŠŠç½‘å¡è®¾ç½®æˆæ··æ‚æ¨¡å¼çš„å‘½ä»¤ä¹Ÿå¾ˆç®€å•ã€‚ ifconfig ens33 promisc cat /sys/class/net/ens33/flags ","date":"2022-02-14","objectID":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/:3:0","tags":["linuxæ··æ‚æ¨¡å¼"],"title":"linuxä¸‹æ··æ‚æ¨¡å¼åˆ¤æ–­","uri":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/"},{"categories":["linux"],"content":"å–æ¶ˆæ··æ‚æ¨¡å¼ ifconfig ens33 -promisc cat /sys/class/net/ens33/flags ","date":"2022-02-14","objectID":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/:4:0","tags":["linuxæ··æ‚æ¨¡å¼"],"title":"linuxä¸‹æ··æ‚æ¨¡å¼åˆ¤æ–­","uri":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/"},{"categories":["linux"],"content":"æ‹“å±• ä½¿ç”¨tcpdumpå·¥å…·æŠ“åŒ…æ—¶ï¼ŒæŠ“åŒ…çš„ç½‘å£ä¼šä¸´æ—¶å˜æˆæ··æ‚æ¨¡å¼ã€‚ [root@nginx140 ~]# tcpdump -i ens33 -vv -nn -w ./test.cap tcpdump: listening on ens33, link-type EN10MB (Ethernet), capture size 262144 bytes ^C537 packets captured 540 packets received by filter 0 packets dropped by kernel æŠ“åŒ…çš„åŒæ—¶æŸ¥çœ‹å¯¹åº”ç½‘å¡æ ‡å¿—ä½ [root@nginx140 ~]# cat /sys/class/net/ens33/flags 0x1103 ","date":"2022-02-14","objectID":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/:5:0","tags":["linuxæ··æ‚æ¨¡å¼"],"title":"linuxä¸‹æ··æ‚æ¨¡å¼åˆ¤æ–­","uri":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/"},{"categories":["linux"],"content":"æ€»ç»“ å½“ç½‘å¡çš„æ ‡å¿—ä½ä¸º0x1003æ—¶ï¼Œæ²¡æœ‰å¼€å¯æ··æ‚æ¨¡å¼ã€‚è€Œç½‘å¡æ ‡å¿—ä½ä¸º0x1103æ—¶ï¼Œè¯´æ˜è¯¥ç½‘å¡å¼€å¯äº†æ··æ‚æ¨¡å¼ã€‚ ","date":"2022-02-14","objectID":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/:6:0","tags":["linuxæ··æ‚æ¨¡å¼"],"title":"linuxä¸‹æ··æ‚æ¨¡å¼åˆ¤æ–­","uri":"/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/"},{"categories":["é—®é¢˜"],"content":"å¤‡ä»½åŸrepo mv /etc/yum.repos.d/rhel-source.repo /etc/yum.repos.d/rhel-source.repo-old ","date":"2022-02-12","objectID":"/redhat6.3yum%E6%BA%90%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3/:1:0","tags":["yumæºå¤±æ•ˆ"],"title":"redhat6.3çš„yumæºå¤±æ•ˆè§£å†³","uri":"/redhat6.3yum%E6%BA%90%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3/"},{"categories":["é—®é¢˜"],"content":"æ–°å»ºrepoæ–‡ä»¶ vi /etc/yum.repos.d/rhel-source.repo # CentOS-Base.repo # # The mirror system uses the connecting IP address of the client and the # update status of each mirror to pick mirrors that are updated to and # geographically close to the client. You should use this for CentOS updates # unless you are manually picking other mirrors. # # If the mirrorlist= does not work for you, as a fall back you can try the # remarked out baseurl= line instead. # # [base] name=CentOS-6.5 - Base - mirrors.aliyun.com failovermethod=priority baseurl=http://mirrors.aliyun.com/centos-vault/6.5/os/$basearch/ gpgcheck=1 gpgkey=http://mirrors.aliyun.com/centos-vault/RPM-GPG-KEY-CentOS-6 #released updates [updates] name=CentOS-6.5 - Updates - mirrors.aliyun.com failovermethod=priority baseurl=http://mirrors.aliyun.com/centos-vault/6.5/updates/$basearch/ gpgcheck=1 gpgkey=http://mirrors.aliyun.com/centos-vault/RPM-GPG-KEY-CentOS-6 #additional packages that may be useful [extras] name=CentOS-6.5 - Extras - mirrors.aliyun.com failovermethod=priority baseurl=http://mirrors.aliyun.com/centos-vault/6.5/extras/$basearch/ gpgcheck=1 gpgkey=http://mirrors.aliyun.com/centos-vault/RPM-GPG-KEY-CentOS-6 #additional packages that extend functionality of existing packages [centos-vaultplus] name=CentOS-6.5 - Plus - mirrors.aliyun.com failovermethod=priority baseurl=http://mirrors.aliyun.com/centos-vault/6.5/centos-vaultplus/$basearch/ gpgcheck=1 enabled=0 gpgkey=http://mirrors.aliyun.com/centos-vault/RPM-GPG-KEY-CentOS-6 #contrib - packages by Centos Users [contrib] name=CentOS-6.5 - Contrib - mirrors.aliyun.com failovermethod=priority baseurl=http://mirrors.aliyun.com/centos-vault/6.5/contrib/$basearch/ gpgcheck=1 enabled=0 gpgkey=http://mirrors.aliyun.com/centos-vault/RPM-GPG-KEY-CentOS-6 ","date":"2022-02-12","objectID":"/redhat6.3yum%E6%BA%90%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3/:2:0","tags":["yumæºå¤±æ•ˆ"],"title":"redhat6.3çš„yumæºå¤±æ•ˆè§£å†³","uri":"/redhat6.3yum%E6%BA%90%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3/"},{"categories":["é—®é¢˜"],"content":"æ¸…é™¤ç¼“å­˜å¹¶é‡å»ºç¼“å­˜ yum clean all \u0026\u0026 yum makecache ","date":"2022-02-12","objectID":"/redhat6.3yum%E6%BA%90%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3/:3:0","tags":["yumæºå¤±æ•ˆ"],"title":"redhat6.3çš„yumæºå¤±æ•ˆè§£å†³","uri":"/redhat6.3yum%E6%BA%90%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3/"},{"categories":["å·¥å…·"],"content":"ç®€ä»‹ logrotate ç¨‹åºæ˜¯ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ç®¡ç†å·¥å…·ã€‚ç”¨äºåˆ†å‰²æ—¥å¿—æ–‡ä»¶ï¼Œåˆ é™¤æ—§çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œèµ·åˆ°â€œè½¬å‚¨â€ä½œç”¨ã€‚å¯ä»¥èŠ‚çœç£ç›˜ç©ºé—´ã€‚ä¸‹é¢å°±å¯¹ logrotate æ—¥å¿—è½®è½¬æ“ä½œåšä¸€æ¢³ç†è®°å½•ã€‚ logrotate æ˜¯åŸºäº crontab è¿è¡Œçš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶é—´ç‚¹æ˜¯ç”± crontab æ§åˆ¶çš„ï¼Œå…·ä½“å¯ä»¥æŸ¥è¯¢ crontab çš„é…ç½®æ–‡ä»¶ /etc/anacrontabã€‚ ç³»ç»Ÿä¼šæŒ‰ç…§è®¡åˆ’çš„é¢‘ç‡è¿è¡Œ logrotateï¼Œé€šå¸¸æ˜¯æ¯å¤©ã€‚åœ¨å¤§å¤šæ•°çš„ Linux å‘è¡Œç‰ˆæœ¬ä¸Šï¼Œè®¡åˆ’æ¯å¤©è¿è¡Œçš„è„šæœ¬ä½äº /etc/cron.daily/logrotateã€‚ ä¸»æµ Linux å‘è¡Œç‰ˆä¸Šéƒ½é»˜è®¤å®‰è£…æœ‰ logrotate åŒ…ï¼Œå¦‚æœä½ çš„ linux ç³»ç»Ÿä¸­æ‰¾ä¸åˆ° logrotate, å¯ä»¥ä½¿ç”¨ apt-get æˆ– yum å‘½ä»¤æ¥å®‰è£…ã€‚ logrotateè¿è¡Œæœºåˆ¶ logrotate åœ¨å¾ˆå¤š Linux å‘è¡Œç‰ˆä¸Šéƒ½æ˜¯é»˜è®¤å®‰è£…çš„ã€‚ç³»ç»Ÿä¼šå®šæ—¶è¿è¡Œ logrotateï¼Œä¸€èˆ¬æ˜¯æ¯å¤©ä¸€æ¬¡ã€‚ç³»ç»Ÿæ˜¯è¿™ä¹ˆå®ç°æŒ‰å¤©æ‰§è¡Œçš„ã€‚crontab ä¼šæ¯å¤©å®šæ—¶æ‰§è¡Œ /etc/cron.daily ç›®å½•ä¸‹çš„è„šæœ¬ï¼Œè€Œè¿™ä¸ªç›®å½•ä¸‹æœ‰ä¸ªæ–‡ä»¶å« logrotateã€‚åœ¨ centos ä¸Šè„šæœ¬å†…å®¹æ˜¯è¿™æ ·çš„ï¼š ç³»ç»Ÿè‡ªå¸¦ cron taskï¼š/etc/cron.daily/logrotateï¼Œæ¯å¤©è¿è¡Œä¸€æ¬¡ã€‚ [root@localhost logrotate.d]# cat /etc/cron.daily/logrotate #!/bin/sh /usr/sbin/logrotate -s /var/lib/logrotate/logrotate.status /etc/logrotate.conf EXITVALUE=$? if [ $EXITVALUE != 0 ]; then /usr/bin/logger -t logrotate \"ALERT exited abnormally with [$EXITVALUE]\" fi exit 0 å¯ä»¥çœ‹åˆ°è¿™ä¸ªè„šæœ¬ä¸»è¦åšçš„äº‹å°±æ˜¯ä»¥ /etc/logrotate.conf ä¸ºé…ç½®æ–‡ä»¶æ‰§è¡Œäº† logrotateã€‚å°±æ˜¯è¿™æ ·å®ç°äº†æ¯å¤©æ‰§è¡Œä¸€æ¬¡ logrotateã€‚ è‡ªå®šä¹‰å‘¨æœŸæ»šåŠ¨æ—¥å¿— å› ä¸ºæˆ‘çš„ç³»ç»Ÿæ‰§è¡Œ /etc/cron.daily ç›®å½•ä¸‹çš„è„šæœ¬ä¸æ˜¯æˆ‘æƒ³æ»šåŠ¨æ—¥å¿—çš„æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘æŠŠ /etc/cron.daily/logrotate æ‹·äº†å‡ºæ¥ï¼Œæ”¹äº†ä¸€ä¸‹ logrotate é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œç„¶ååœ¨ crontab é‡ŒåŠ ä¸Šä¸€æ¡æŒ‡å®šæ—¶é—´æ‰§è¡Œè¿™ä¸ªè„šæœ¬çš„è®°å½•ï¼Œè‡ªå®šä¹‰å‘¨æœŸæ»šåŠ¨æ—¥å¿—å°±å¤§åŠŸå‘Šæˆäº†ã€‚è¿™ç§è‡ªå®šä¹‰çš„æ–¹å¼æœ‰ä¸¤ç‚¹è¦æ³¨æ„ï¼š é…ç½®æ–‡ä»¶é‡Œä¸€å®šè¦é…ç½® rotate æ–‡ä»¶æ•°ç›®è¿™ä¸ªå‚æ•°ã€‚å¦‚æœä¸é…ç½®é»˜è®¤æ˜¯ 0 ä¸ªï¼Œä¹Ÿå°±æ˜¯åªå…è®¸å­˜åœ¨ä¸€ä»½æ—¥å¿—ï¼Œåˆšåˆ‡åˆ†å‡ºæ¥çš„æ—¥å¿—ä¼šé©¬ä¸Šè¢«åˆ é™¤ã€‚ æ‰§è¡Œ logrotate å‘½ä»¤æœ€å¥½åŠ  -f å‚æ•°ï¼Œä¸ç„¶æœ‰æ—¶å€™é…ç½®æ–‡ä»¶ä¿®æ”¹çš„å†…å®¹ä¸ç”Ÿæ•ˆã€‚ å¾ˆå¤šç¨‹åºçš„ä¼šç”¨åˆ° logrotate æ»šåŠ¨æ—¥å¿—ï¼Œæ¯”å¦‚ nginxã€‚å®ƒä»¬å®‰è£…åï¼Œä¼šåœ¨ /etc/logrotate.d è¿™ä¸ªç›®å½•ä¸‹å¢åŠ è‡ªå·±çš„ logrotate çš„é…ç½®æ–‡ä»¶ã€‚logrotate ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ /etc/logrotate.d ä¸‹çš„é…ç½®å‘¢ï¼Ÿçœ‹åˆ° /etc/logrotate.conf é‡Œè¿™è¡Œï¼Œä¸€åˆ‡å°±ä¸è¨€è€Œå–»äº†ã€‚ include /etc/logrotate.d å®‰è£… å…ˆæ£€æŸ¥æœåŠ¡å™¨æœ‰æ²¡æœ‰å®‰è£… rpm -qa | grep crontab å®‰è£… yum -y install vixie-cron yum -y install crontabs ç®€å•è¯´æ˜ï¼š vixie-cron æ˜¯ cron çš„ä¸»ç¨‹åºï¼› crontabs æ˜¯ç”¨æ¥å®‰è£…ã€å¸è£…ã€æˆ–åˆ—ä¸¾ç”¨æ¥é©±åŠ¨ cron å®ˆæŠ¤è¿›ç¨‹çš„è¡¨æ ¼çš„ç¨‹åºã€‚ å®‰è£…å¥½åå¯åŠ¨å’Œé…ç½®æœåŠ¡ service crond start //å¯åŠ¨æœåŠ¡ service crond stop //å…³é—­æœåŠ¡ service crond restart //é‡å¯æœåŠ¡ service crond reload //é‡æ–°è½½å…¥é…ç½® service crond status //æŸ¥çœ‹crontabæœåŠ¡çŠ¶æ€ è®¾ç½®å¼€æœºè‡ªå¯ chkconfig --level 345 crond on ç®€å•å®šæ—¶è„šæœ¬ [root@localhost ~]# vim test.sh nowtime=`date +\"%Y-%m-%d %H:%M:%S\"` echo \"hello cron \"$nowtime æ·»åŠ æ‰§è¡Œæƒé™ [root@localhost~]# chmod +x test.sh è¿è¡Œï¼š [root@localhost ~]# ./test.sh hello cron 2022-01-09 19:54:30 æ·»åŠ å®šæ—¶ä»»åŠ¡ã€‚æ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ è¿è¡Œcrontab -e */1 * * * * /root/test.sh \u003e\u003e /root/test.log é…ç½®æ–‡ä»¶ä»‹ç» Linuxç³»ç»Ÿé»˜è®¤å®‰è£…logrotateå·¥å…·ï¼Œå®ƒé»˜è®¤çš„é…ç½®æ–‡ä»¶åœ¨ï¼š /etc/logrotate.conf /etc/logrotate.d/ logrotate.conf æ‰æ˜¯ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œlogrotate.d æ˜¯ä¸€ä¸ªç›®å½•ï¼Œè¯¥ç›®å½•é‡Œçš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šè¢«ä¸»åŠ¨çš„è¯»å…¥/etc/logrotate.confä¸­æ‰§è¡Œã€‚å¦å¤–ï¼Œå¦‚æœ /etc/logrotate.d/ é‡Œé¢çš„æ–‡ä»¶ä¸­æ²¡æœ‰è®¾å®šä¸€äº›ç»†èŠ‚ï¼Œåˆ™ä¼šä»¥/etc/logrotate.confè¿™ä¸ªæ–‡ä»¶çš„è®¾å®šæ¥ä½œä¸ºé»˜è®¤å€¼ã€‚ Logrotateæ˜¯åŸºäºCRONæ¥è¿è¡Œçš„ï¼Œå…¶è„šæœ¬æ˜¯/etc/cron.daily/logrotateï¼Œæ—¥å¿—è½®è½¬æ˜¯ç³»ç»Ÿè‡ªåŠ¨å®Œæˆçš„ã€‚å®é™…è¿è¡Œæ—¶ï¼ŒLogrotateä¼šè°ƒç”¨é…ç½®æ–‡ä»¶/etc/logrotate.confã€‚å¯ä»¥åœ¨/etc/logrotate.dç›®å½•é‡Œæ”¾ç½®è‡ªå®šä¹‰å¥½çš„é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥è¦†ç›–Logrotateçš„ç¼ºçœå€¼ã€‚ [root@localhost ~]# cat /etc/cron.daily/logrotate #!/bin/sh /usr/sbin/logrotate /etc/logrotate.conf \u003e/dev/null 2\u003e\u00261 EXITVALUE=$? if [ $EXITVALUE != 0 ]; then /usr/bin/logger -t logrotate \"ALERT exited abnormally with [$EXITVALUE]\" fi exit 0 å¦‚æœç­‰ä¸åŠcronè‡ªåŠ¨æ‰§è¡Œæ—¥å¿—è½®è½¬ï¼Œæƒ³æ‰‹åŠ¨å¼ºåˆ¶åˆ‡å‰²æ—¥å¿—ï¼Œéœ€è¦åŠ -få‚æ•°ï¼›ä¸è¿‡æ­£å¼æ‰§è¡Œå‰æœ€å¥½é€šè¿‡Debugé€‰é¡¹æ¥éªŒè¯ä¸€ä¸‹ï¼ˆ-då‚æ•°ï¼‰ï¼Œè¿™å¯¹è°ƒè¯•ä¹Ÿå¾ˆé‡è¦ï¼š /usr/sbin/logrotate -f /etc/logrotate.d/nginx /usr/sbin/logrotate -d -f /etc/logrotate.d/nginx logrotate å‘½ä»¤æ ¼å¼ï¼š logrotate [OPTION...] \u003cconfigfile\u003e -d, --debug ï¼šdebugæ¨¡å¼ï¼Œæµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ã€‚ -f, --force ï¼šå¼ºåˆ¶è½¬å‚¨æ–‡ä»¶ã€‚ -m, --mail=command ï¼šå‹ç¼©æ—¥å¿—åï¼Œå‘é€æ—¥å¿—åˆ°æŒ‡å®šé‚®ç®±ã€‚ -s, --state=statefile ï¼šä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€æ–‡ä»¶ã€‚ -v, --verbose ï¼šæ˜¾ç¤ºè½¬å‚¨è¿‡ç¨‹ã€‚ æ ¹æ®æ—¥å¿—åˆ‡å‰²è®¾ç½®è¿›è¡Œæ“ä½œï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼š [root@localhost ~]# /usr/sbin/logrotate -v /etc/logrotate.conf [root@localhost ~]# /usr/sbin/logrotate -v /etc/logrotate.d/php æ ¹æ®æ—¥å¿—åˆ‡å‰²è®¾ç½®è¿›è¡Œæ‰§è¡Œï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯,ä½†æ˜¯ä¸è¿›è¡Œå…·ä½“æ“ä½œï¼Œdebugæ¨¡å¼ [root@localhost ~]# /usr/sbin/logrotate -d /etc/logrotate.conf [root@localhost ~]# /usr/sbin/logrotate -d /etc/logrotate.d/nginx æŸ¥çœ‹å„logæ–‡ä»¶çš„å…·ä½“æ‰§è¡Œæƒ…å†µ [root@localhost ~]# cat /var/lib/logrotate.status åˆ‡å‰²ä»‹ç» æ¯”å¦‚ä»¥ç³»ç»Ÿæ—¥å¿—/var/log/messageåšåˆ‡å‰²æ¥ç®€å•è¯´æ˜ä¸‹ï¼š ç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œrotate(è½®è½¬)ä¹‹åï¼ŒåŸæœ¬çš„messagesä¼šå˜æˆmessages.1ï¼Œè€Œä¸”ä¼šåˆ¶é€ ä¸€ä¸ªç©ºçš„messagesç»™ç³»ç»Ÿæ¥å‚¨å­˜æ—¥å¿—ï¼› ç¬¬äºŒæ¬¡æ‰§è¡Œä¹‹åï¼Œmessages.1ä¼šå˜æˆmessages.2ï¼Œè€Œmessagesä¼šå˜æˆmessages.1ï¼Œåˆé€ æˆä¸€ä¸ªç©ºçš„messagesæ¥å‚¨å­˜æ—¥å¿—ï¼ å¦‚æœä»…è®¾å®šä¿ç•™ä¸‰ä¸ªæ—¥å¿—ï¼ˆå³è½®è½¬3æ¬¡ï¼‰çš„è¯ï¼Œé‚£ä¹ˆæ‰§è¡Œç¬¬ä¸‰æ¬¡æ—¶ï¼Œåˆ™ messages.3è¿™ä¸ªæ¡£æ¡ˆå°±ä¼šè¢«åˆ é™¤ï¼Œå¹¶ç”±åé¢çš„è¾ƒæ–°çš„ä¿å­˜æ—¥å¿—æ‰€å–ä»£ï¼ä¹Ÿå°±æ˜¯ä¼šä¿å­˜æœ€æ–°çš„å‡ ä¸ªæ—¥å¿—ã€‚ æ—¥å¿—ç©¶ç«Ÿè½®æ¢å‡ æ¬¡ï¼Œè¿™ä¸ªæ˜¯æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„dateext å‚æ•°æ¥åˆ¤å®šçš„ã€‚ ","date":"2022-02-12","objectID":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/:0:0","tags":["logrotate"],"title":"ä½¿ç”¨logrotateè¿›è¡Œæ—¥å¿—åˆ‡å‰²","uri":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"},{"categories":["å·¥å…·"],"content":"logrotate.confé…ç½® cat /etc/logrotate.conf åº•ä¸‹çš„è®¾å®šæ˜¯ â€œlogrotate çš„é»˜è®¤å€¼â€ ï¼Œå¦‚æœåˆ¥çš„æ–‡ä»¶è®¾å®šäº†å…¶ä»–çš„å€¼ï¼Œå°±ä¼šä»¥å…¶å®ƒæ–‡ä»¶çš„è®¾å®šä¸ºä¸» weekly //é»˜è®¤æ¯ä¸€å‘¨æ‰§è¡Œä¸€æ¬¡rotateè½®è½¬å·¥ä½œ rotate 4 // ä¿ç•™å¤šå°‘ä¸ªæ—¥å¿—æ–‡ä»¶(è½®è½¬å‡ æ¬¡).é»˜è®¤ä¿ç•™å››ä¸ª.å°±æ˜¯æŒ‡å®šæ—¥å¿—æ–‡ä»¶åˆ é™¤ä¹‹å‰è½®è½¬çš„æ¬¡æ•°ï¼Œ0 æŒ‡æ²¡æœ‰å¤‡ä»½ create //è‡ªåŠ¨åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ–°çš„æ—¥å¿—æ–‡ä»¶å…·æœ‰å’ŒåŸæ¥çš„æ–‡ä»¶ç›¸åŒçš„æƒé™ï¼›å› ä¸ºæ—¥å¿—è¢«æ”¹å,å› æ­¤è¦åˆ›å»ºä¸€ä¸ªæ–°çš„æ¥ç»§ç»­å­˜å‚¨ä¹‹å‰çš„æ—¥å¿— dateext // è¿™ä¸ªå‚æ•°å¾ˆé‡è¦ï¼å°±æ˜¯åˆ‡å‰²åçš„æ—¥å¿—æ–‡ä»¶ä»¥å½“å‰æ—¥æœŸä¸ºæ ¼å¼ç»“å°¾ï¼Œå¦‚xxx.log-20131216è¿™æ ·,å¦‚æœæ³¨é‡Šæ‰,åˆ‡å‰²å‡ºæ¥æ˜¯æŒ‰æ•°å­—é€’å¢,å³å‰é¢è¯´çš„ xxx.log-1è¿™ç§æ ¼å¼ compress //æ˜¯å¦é€šè¿‡gzipå‹ç¼©è½¬å‚¨ä»¥åçš„æ—¥å¿—æ–‡ä»¶ï¼Œå¦‚xxx.log-20131216.gz ï¼›å¦‚æœä¸éœ€è¦å‹ç¼©ï¼Œæ³¨é‡Šæ‰å°±è¡Œ include /etc/logrotate.d //å°† /etc/logrotate.d/ ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½åŠ è½½è¿›æ¥ /var/log/wtmp { //ä»…é’ˆå¯¹ /var/log/wtmp æ‰€è®¾å®šçš„å‚æ•° monthly //æ¯æœˆä¸€æ¬¡åˆ‡å‰²,å–ä»£é»˜è®¤çš„ä¸€å‘¨ minsize 1M //æ–‡ä»¶å¤§å°è¶…è¿‡ 1M åæ‰ä¼šåˆ‡å‰² create 0664 root utmp //æŒ‡å®šæ–°å»ºçš„æ—¥å¿—æ–‡ä»¶æƒé™ä»¥åŠæ‰€å±ç”¨æˆ·å’Œç»„ rotate 1 //åªä¿ç•™ä¸€ä¸ªæ—¥å¿—. } è¿™ä¸ª wtmp å¯è®°å½•ç”¨æˆ·ç™»å½•ç³»ç»ŸåŠç³»ç»Ÿé‡å¯çš„æ—¶é—´.å› ä¸ºæœ‰ minsize çš„å‚æ•°ï¼Œå› æ­¤ä¸è§å¾—æ¯ä¸ªæœˆä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡,è¦çœ‹æ–‡ä»¶å¤§å°ã€‚ ç”±è¿™ä¸ªæ–‡ä»¶çš„è®¾å®šå¯ä»¥çŸ¥é“/etc/logrotate.då…¶å®å°±æ˜¯ç”±/etc/logrotate.conf æ‰€è§„åˆ’å‡ºæ¥çš„ç›®å½•ï¼Œè™½ç„¶å¯ä»¥å°†æ‰€æœ‰çš„é…ç½®éƒ½å†™å…¥ /etc/logrotate.conf ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥è¿™ä¸ªæ–‡ä»¶å°±å®åœ¨æ˜¯å¤ªå¤æ‚äº†ï¼Œå°¤å…¶æ˜¯å½“ä½¿ç”¨å¾ˆå¤šçš„æœåŠ¡åœ¨ç³»ç»Ÿä¸Šé¢æ—¶ï¼Œ æ¯ä¸ªæœåŠ¡éƒ½è¦å»ä¿®æ”¹ /etc/logrotate.conf çš„è®¾å®šä¹Ÿä¼¼ä¹ä¸å¤ªåˆç†äº†ã€‚ æ‰€ä»¥ï¼Œå¦‚æœç‹¬ç«‹å‡ºæ¥ä¸€ä¸ªç›®å½•ï¼Œé‚£ä¹ˆæ¯ä¸ªè¦åˆ‡å‰²æ—¥å¿—çš„æœåŠ¡ï¼Œ å°±å¯ä»¥ç‹¬è‡ªæˆä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”æ”¾ç½®åˆ° /etc/logrotate.d/ å½“ä¸­ã€‚ å…¶ä»–é‡è¦å‚æ•°è¯´æ˜ï¼š å‚æ•° è¯´æ˜ compress é€šè¿‡gzip å‹ç¼©è½¬å‚¨ä»¥åçš„æ—¥å¿— nocompress ä¸åšgzipå‹ç¼©å¤„ç† copytruncate ç”¨äºè¿˜åœ¨æ‰“å¼€ä¸­çš„æ—¥å¿—æ–‡ä»¶ï¼ŒæŠŠå½“å‰æ—¥å¿—å¤‡ä»½å¹¶æˆªæ–­ï¼›æ˜¯å…ˆæ‹·è´å†æ¸…ç©ºçš„æ–¹å¼ï¼Œæ‹·è´å’Œæ¸…ç©ºä¹‹é—´æœ‰ä¸€ä¸ªæ—¶é—´å·®ï¼Œå¯èƒ½ä¼šä¸¢å¤±éƒ¨åˆ†æ—¥å¿—æ•°æ®ã€‚ nocopytruncate å¤‡ä»½æ—¥å¿—æ–‡ä»¶ä¸è¿‡ä¸æˆªæ–­ create mode owner group è½®è½¬æ—¶æŒ‡å®šåˆ›å»ºæ–°æ–‡ä»¶çš„å±æ€§ï¼Œå¦‚create 0777 nobody nobody nocreate ä¸å»ºç«‹æ–°çš„æ—¥å¿—æ–‡ä»¶ delaycompress å’Œcompress ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œè½¬å‚¨çš„æ—¥å¿—æ–‡ä»¶åˆ°ä¸‹ä¸€æ¬¡è½¬å‚¨æ—¶æ‰å‹ç¼© nodelaycompress è¦†ç›– delaycompress é€‰é¡¹ï¼Œè½¬å‚¨åŒæ—¶å‹ç¼©ã€‚ missingok å¦‚æœæ—¥å¿—ä¸¢å¤±ï¼Œä¸æŠ¥é”™ç»§ç»­æ»šåŠ¨ä¸‹ä¸€ä¸ªæ—¥å¿— errors address è½¬å‚¨æ—¶çš„é”™è¯¯ä¿¡æ¯å‘é€åˆ°æŒ‡å®šçš„Email åœ°å€ ifempty å³ä½¿æ—¥å¿—æ–‡ä»¶ä¸ºç©ºæ–‡ä»¶ä¹Ÿåšè½®è½¬ï¼Œè¿™ä¸ªæ˜¯logrotateçš„ç¼ºçœé€‰é¡¹ã€‚ notifempty å½“æ—¥å¿—æ–‡ä»¶ä¸ºç©ºæ—¶ï¼Œä¸è¿›è¡Œè½®è½¬ mail address æŠŠè½¬å‚¨çš„æ—¥å¿—æ–‡ä»¶å‘é€åˆ°æŒ‡å®šçš„E-mail åœ°å€ nomail è½¬å‚¨æ—¶ä¸å‘é€æ—¥å¿—æ–‡ä»¶ olddir directory è½¬å‚¨åçš„æ—¥å¿—æ–‡ä»¶æ”¾å…¥æŒ‡å®šçš„ç›®å½•ï¼Œå¿…é¡»å’Œå½“å‰æ—¥å¿—æ–‡ä»¶åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ noolddir è½¬å‚¨åçš„æ—¥å¿—æ–‡ä»¶å’Œå½“å‰æ—¥å¿—æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ sharedscripts è¿è¡Œpostrotateè„šæœ¬ï¼Œä½œç”¨æ˜¯åœ¨æ‰€æœ‰æ—¥å¿—éƒ½è½®è½¬åç»Ÿä¸€æ‰§è¡Œä¸€æ¬¡è„šæœ¬ã€‚å¦‚æœæ²¡æœ‰é…ç½®è¿™ä¸ªï¼Œé‚£ä¹ˆæ¯ä¸ªæ—¥å¿—è½®è½¬åéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡è„šæœ¬ prerotate åœ¨logrotateè½¬å‚¨ä¹‹å‰éœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ä¿®æ”¹æ–‡ä»¶çš„å±æ€§ç­‰åŠ¨ä½œï¼›å¿…é¡»ç‹¬ç«‹æˆè¡Œ postrotate åœ¨logrotateè½¬å‚¨ä¹‹åéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œä¾‹å¦‚é‡æ–°å¯åŠ¨ (kill -HUP) æŸä¸ªæœåŠ¡ï¼å¿…é¡»ç‹¬ç«‹æˆè¡Œ daily æŒ‡å®šè½¬å‚¨å‘¨æœŸä¸ºæ¯å¤© weekly æŒ‡å®šè½¬å‚¨å‘¨æœŸä¸ºæ¯å‘¨ monthly æŒ‡å®šè½¬å‚¨å‘¨æœŸä¸ºæ¯æœˆ rotate count æŒ‡å®šæ—¥å¿—æ–‡ä»¶åˆ é™¤ä¹‹å‰è½¬å‚¨çš„æ¬¡æ•°ï¼Œ0 æŒ‡æ²¡æœ‰å¤‡ä»½ï¼Œ5 æŒ‡ä¿ç•™5 ä¸ªå¤‡ä»½ dateext ä½¿ç”¨å½“æœŸæ—¥æœŸä½œä¸ºå‘½åæ ¼å¼ dateformat .%s é…åˆdateextä½¿ç”¨ï¼Œç´§è·Ÿåœ¨ä¸‹ä¸€è¡Œå‡ºç°ï¼Œå®šä¹‰æ–‡ä»¶åˆ‡å‰²åçš„æ–‡ä»¶åï¼Œå¿…é¡»é…åˆdateextä½¿ç”¨ï¼Œåªæ”¯æŒ %Y %m %d %s è¿™å››ä¸ªå‚æ•° size(æˆ–minsize) log-size å½“æ—¥å¿—æ–‡ä»¶åˆ°è¾¾æŒ‡å®šçš„å¤§å°æ—¶æ‰è½¬å‚¨ï¼Œlog-sizeèƒ½æŒ‡å®šbytes(ç¼ºçœ)åŠKB (sizek)æˆ–MB(sizem). å½“æ—¥å¿—æ–‡ä»¶ \u003e= log-size çš„æ—¶å€™å°±è½¬å‚¨ã€‚ ä»¥ä¸‹ä¸ºåˆæ³•æ ¼å¼ï¼šï¼ˆå…¶ä»–æ ¼å¼çš„å•ä½å¤§å°å†™æ²¡æœ‰è¯•è¿‡ï¼‰ size = 5 æˆ– size 5 ï¼ˆ\u003e= 5 ä¸ªå­—èŠ‚å°±è½¬å‚¨ï¼‰ size = 100k æˆ– size 100k size = 100M æˆ– size 100M ","date":"2022-02-12","objectID":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/:1:0","tags":["logrotate"],"title":"ä½¿ç”¨logrotateè¿›è¡Œæ—¥å¿—åˆ‡å‰²","uri":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"},{"categories":["å·¥å…·"],"content":"åˆ‡å‰²nginxæ—¥å¿—çš„é…ç½® [root@localhost ~]# vim /etc/logrotate.d/nginx /usr/local/nginx/logs/*.log { daily rotate 7 missingok notifempty dateext sharedscripts postrotate if [ -f /usr/local/nginx/logs/nginx.pid ]; then kill -USR1 `cat /usr/local/nginx/logs/nginx.pid` fi endscript } ","date":"2022-02-12","objectID":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/:1:1","tags":["logrotate"],"title":"ä½¿ç”¨logrotateè¿›è¡Œæ—¥å¿—åˆ‡å‰²","uri":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"},{"categories":["å·¥å…·"],"content":"å…³äº USR1 ä¿¡å·è§£é‡Š USR1 é€šå¸¸è¢«ç”¨æ¥å‘ŠçŸ¥åº”ç”¨ç¨‹åºé‡è½½é…ç½®æ–‡ä»¶ï¼›ä¾‹å¦‚ï¼Œå‘ Apache HTTP æœåŠ¡å™¨å‘é€ä¸€ä¸ª USR1 ä¿¡å·å°†å¯¼è‡´ä»¥ä¸‹æ­¥éª¤çš„å‘ç”Ÿï¼šåœæ­¢æ¥å—æ–°çš„è¿æ¥ï¼Œç­‰å¾…å½“å‰è¿æ¥åœæ­¢ï¼Œé‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ï¼Œé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ï¼Œé‡å¯æœåŠ¡å™¨ï¼Œä»è€Œå®ç°ç›¸å¯¹å¹³æ»‘çš„ä¸å…³æœºçš„æ›´æ”¹ã€‚ å¯¹äº USR1 å’Œ 2 éƒ½å¯ä»¥ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œåœ¨ POSIX å…¼å®¹çš„å¹³å°ä¸Šï¼ŒSIGUSR1 å’Œ SIGUSR2 æ˜¯å‘é€ç»™ä¸€ä¸ªè¿›ç¨‹çš„ä¿¡å·ï¼Œå®ƒè¡¨ç¤ºäº†ç”¨æˆ·å®šä¹‰çš„æƒ…å†µã€‚å®ƒä»¬çš„ç¬¦å·å¸¸é‡åœ¨å¤´æ–‡ä»¶ signal.h ä¸­å®šä¹‰ã€‚åœ¨ä¸åŒçš„å¹³å°ä¸Šï¼Œä¿¡å·çš„ç¼–å·å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ç¬¦å·åç§°ã€‚ kill -HUP pid killall -HUP pName å…¶ä¸­ pid æ˜¯è¿›ç¨‹æ ‡è¯†ï¼ŒpName æ˜¯è¿›ç¨‹çš„åç§°ã€‚ å¦‚æœæƒ³è¦æ›´æ”¹é…ç½®è€Œä¸éœ€åœæ­¢å¹¶é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤ã€‚åœ¨å¯¹é…ç½®æ–‡ä»¶ä½œå¿…è¦çš„æ›´æ”¹åï¼Œå‘å‡ºè¯¥å‘½ä»¤ä»¥åŠ¨æ€æ›´æ–°æœåŠ¡é…ç½®ã€‚æ ¹æ®çº¦å®šï¼Œå½“ä½ å‘é€ä¸€ä¸ªæŒ‚èµ·ä¿¡å· (ä¿¡å· 1 æˆ– HUP) æ—¶ï¼Œå¤§å¤šæ•°æœåŠ¡å™¨è¿›ç¨‹ (æ‰€æœ‰å¸¸ç”¨çš„è¿›ç¨‹) éƒ½ä¼šè¿›è¡Œå¤ä½æ“ä½œå¹¶é‡æ–°åŠ è½½å®ƒä»¬çš„é…ç½®æ–‡ä»¶ã€‚ ","date":"2022-02-12","objectID":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/:2:0","tags":["logrotate"],"title":"ä½¿ç”¨logrotateè¿›è¡Œæ—¥å¿—åˆ‡å‰²","uri":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"},{"categories":["å·¥å…·"],"content":"åˆ†äº«ä¸€ä¾‹æ›¾ç»ä½¿ç”¨è¿‡çš„nginxæ—¥å¿—åˆ‡å‰²å¤„ç†è„šæœ¬ï¼š logrotateæ—¥å¿—åˆ†å‰²é…ç½® [root@localhost ~# vim /etc/logrotate.d/nginx /data/nginx_logs/*.access_log { nocompress daily copytruncate create ifempty olddir /data/nginx_logs/days rotate 0 } æ—¥å¿—åˆ†å‰²è„šæœ¬ [root@localhost ~# vim /usr/local/sbin/logrotate-nginx.sh #!/bin/bash #åˆ›å»ºè½¬å‚¨æ—¥å¿—å‹ç¼©å­˜æ”¾ç›®å½• mkdir -p /data/nginx_logs/days #æ‰‹å·¥å¯¹nginxæ—¥å¿—è¿›è¡Œåˆ‡å‰²è½¬æ¢ /usr/sbin/logrotate -vf /etc/logrotate.d/nginx #å½“å‰æ—¶é—´ time=$(date -d \"yesterday\" +\"%Y-%m-%d\") #è¿›å…¥è½¬å‚¨æ—¥å¿—å­˜æ”¾ç›®å½• cd /data/nginx_logs/days #å¯¹ç›®å½•ä¸­çš„è½¬å‚¨æ—¥å¿—æ–‡ä»¶çš„æ–‡ä»¶åè¿›è¡Œç»Ÿä¸€è½¬æ¢ for i in $(ls ./ | grep \"^\\(.*\\)\\.[[:digit:]]$\") do mv ${i} ./$(echo ${i}|sed -n 's/^\\(.*\\)\\.\\([[:digit:]]\\)$/\\1/p')-$(echo $time) done #å¯¹è½¬å‚¨çš„æ—¥å¿—æ–‡ä»¶è¿›è¡Œå‹ç¼©å­˜æ”¾ï¼Œå¹¶åˆ é™¤åŸæœ‰è½¬å‚¨çš„æ—¥å¿—æ–‡ä»¶ï¼Œåªä¿å­˜å‹ç¼©åçš„æ—¥å¿—æ–‡ä»¶ã€‚ä»¥èŠ‚çº¦å­˜å‚¨ç©ºé—´ for i in $(ls ./ | grep \"^\\(.*\\)\\-\\([[:digit:]-]\\+\\)$\") do tar jcvf ${i}.bz2 ./${i} rm -rf ./${i} done #åªä¿ç•™æœ€è¿‘7å¤©çš„å‹ç¼©è½¬å‚¨æ—¥å¿—æ–‡ä»¶ find /data/nginx_logs/days/* -name \"*.bz2\" -mtime 7 -type f -exec rm -rf {} \\; crontabå®šæ—¶æ‰§è¡Œ [root@localhost ~# crontab -e #logrotate 0 0 * * * /bin/bash -x /usr/local/sbin/logrotate-nginx.sh \u003e /dev/null 2\u003e\u00261 æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬ï¼Œæµ‹è¯•ä¸‹çœ‹çœ‹ï¼š [root@localhost ~# /bin/bash -x /usr/local/sbin/logrotate-nginx.sh [root@localhost ~# cd /data/nginx_logs/days [root@localhost days# ls huantest.access_log-2017-01-18.bz2 phpè„šæœ¬åˆ‡å‰² [root@localhost ~]# cat /etc/logrotate.d/php /Data/logs/php/*log { daily rotate 365 missingok notifempty compress dateext sharedscripts postrotate if [ -f /Data/app/php5.6.26/var/run/php-fpm.pid ]; then kill -USR1 `cat /Data/app/php5.6.26/var/run/php-fpm.pid` fi endscript postrotate /bin/chmod 644 /Data/logs/php/*gz endscript } ç»“æœ [root@localhost ~]# ll /Data/app/php5.6.26/var/run/php-fpm.pid -rw-r--r-- 1 root root 4 Dec 28 17:03 /Data/app/php5.6.26/var/run/php-fpm.pid [root@localhost ~]# cd /Data/logs/php [root@localhost php]# ll total 25676 -rw-r--r-- 1 root root 0 Jun 1 2016 error.log -rw-r--r-- 1 nobody nobody 182 Aug 30 2015 error.log-20150830.gz -rw-r--r-- 1 nobody nobody 371 Sep 1 2015 error.log-20150901.gz -rw-r--r-- 1 nobody nobody 315 Sep 7 2015 error.log-20150907.gz nginxæ—¥å¿—åˆ‡å‰²ä¸€ä¾‹ [root@localhost ~]# cat /etc/logrotate.d/nginx /Data/logs/nginx/*/*log { daily rotate 365 missingok notifempty compress dateext sharedscripts postrotate /etc/init.d/nginx reload endscript } ç»“æœ [root@localhost ~]# ll /Data/logs/nginx/www.huanqiu.com/ .......... -rw-r--r-- 1 root root 1652 Jan 1 00:00 error.log-20170101.gz -rw-r--r-- 1 root root 1289 Jan 2 00:00 error.log-20170102.gz -rw-r--r-- 1 root root 1633 Jan 3 00:00 error.log-20170103.gz -rw-r--r-- 1 root root 3239 Jan 4 00:00 error.log-20170104.gz ç³»ç»Ÿæ—¥å¿—åˆ‡å‰²ä¸€ä¾‹ [root@localhost ~]# cat /etc/logrotate.d/syslog /var/log/cron /var/log/maillog /var/log/messages /var/log/secure /var/log/spooler { sharedscripts postrotate /bin/kill -HUP `cat /var/run/syslogd.pid 2\u003e /dev/null` 2\u003e /dev/null || true endscript } ç»“æœ [root@localhost ~]# ll /var/log/messages* -rw------- 1 root root 34248975 Jan 19 18:42 /var/log/messages -rw------- 1 root root 51772994 Dec 25 03:11 /var/log/messages-20161225 -rw------- 1 root root 51800210 Jan 1 03:05 /var/log/messages-20170101 -rw------- 1 root root 51981366 Jan 8 03:36 /var/log/messages-20170108 -rw------- 1 root root 51843025 Jan 15 03:40 /var/log/messages-20170115 [root@localhost ~]# ll /var/log/cron* -rw------- 1 root root 2155681 Jan 19 18:43 /var/log/cron -rw------- 1 root root 2932618 Dec 25 03:11 /var/log/cron-20161225 -rw------- 1 root root 2939305 Jan 1 03:06 /var/log/cron-20170101 -rw------- 1 root root 2951820 Jan 8 03:37 /var/log/cron-20170108 -rw------- 1 root root 3203992 Jan 15 03:41 /var/log/cron-20170115 [root@localhost ~]# ll /var/log/secure* -rw------- 1 root root 275343 Jan 19 18:36 /var/log/secure -rw------- 1 root root 2111936 Dec 25 03:06 /var/log/secure-20161225 -rw------- 1 root root 2772744 Jan 1 02:57 /var/log/secure-20170101 -rw------- 1 root root 1115543 Jan 8 03:26 /var/log/secure-20170108 -rw------- 1 root root 731599 Jan 15 03:40 /var/log/secure-20170115 [root@localhost ~]# ll /var/log/spooler* -rw------- 1 root root 0 Jan 15 03:41 /var/log/spooler -rw-------","date":"2022-02-12","objectID":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/:2:1","tags":["logrotate"],"title":"ä½¿ç”¨logrotateè¿›è¡Œæ—¥å¿—åˆ‡å‰²","uri":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"},{"categories":["å·¥å…·"],"content":"å°è¯•è§£å†³logrotateæ— æ³•è‡ªåŠ¨è½®è¯¢æ—¥å¿—çš„åŠæ³• ç°è±¡è¯´æ˜ï¼š ä½¿ç”¨logrotateè½®è¯¢nginxæ—¥å¿—ï¼Œé…ç½®å¥½ä¹‹åï¼Œå‘ç°nginxæ—¥å¿—è¿ç»­ä¸¤å¤©æ²¡è¢«åˆ‡å‰²ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿï¼Ÿ ç„¶åå¼€å§‹æ£€æŸ¥æ—¥å¿—åˆ‡å‰²çš„é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é—®é¢˜ï¼Œæ£€æŸ¥åç¡®å®šé…ç½®æ–‡ä»¶ä¸€åˆ‡æ­£å¸¸ã€‚ äºæ˜¯æ€€ç–‘æ˜¯logrotateé¢„å®šçš„cronæ²¡æ‰§è¡Œï¼ŒæŸ¥çœ‹äº†cronçš„æ—¥å¿—ï¼Œå‘ç°æœ‰ä¸€æ¡Dec 7 04:02:01 www crond[18959]: (root) CMD (run-parts /etc/cron.daily)è¿™æ ·çš„æ—¥å¿—ï¼Œè¯æ˜cronåœ¨04:02åˆ†æ—¶å·²ç»æ‰§è¡Œ/etc/cron.dailyç›®å½•ä¸‹çš„ç¨‹åºã€‚ æ¥ç€æŸ¥çœ‹/etc /cron.daily/logrotateï¼ˆè¿™æ˜¯logrotateè‡ªåŠ¨è½®è½¬çš„è„šæœ¬ï¼‰çš„å†…å®¹ï¼š [root@localhost~]# cat /etc/cron.daily/logrotate #!/bin/sh /usr/sbin/logrotate /etc/logrotate.conf \u003e/dev/null 2\u003e\u00261 EXITVALUE=$? if [ $EXITVALUE != 0 ]; then /usr/bin/logger -t logrotate \"ALERT exited abnormally with [$EXITVALUE]\" fi exit 0 æ²¡æœ‰å‘ç°å¼‚å¸¸ï¼Œé…ç½®å¥½çš„æ—¥å¿—è½®è½¬æ“ä½œéƒ½æ˜¯ç”±è¿™ä¸ªè„šæœ¬å®Œæˆçš„ï¼Œä¸€åˆ‡è¿è¡Œæ­£å¸¸ï¼Œè„šæœ¬åº”è¯¥å°±æ²¡é—®é¢˜ã€‚ ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼š [root@localhost ~]# /usr/sbin/logrotate /etc/logrotate.conf è¿™äº›ç³»ç»Ÿæ—¥å¿—æ˜¯æ­£å¸¸è½®è¯¢äº†ï¼Œä½†nginxæ—¥å¿—å´è¿˜æ˜¯æ²¡è½®è¯¢ã€‚æ¥ç€å¼ºè¡Œå¯åŠ¨è®°å½•æ–‡ä»¶ç»´æŠ¤æ“ä½œï¼Œçºµä½¿logrotateæŒ‡ä»¤è®¤ä¸ºæ²¡æœ‰éœ€è¦ï¼Œåº”è¯¥æœ‰å¯èƒ½æ˜¯logroateè®¤ä¸ºnginxæ—¥å¿—å¤ªå°ï¼Œä¸è¿›è¡Œè½®è¯¢ã€‚ æ•…éœ€è¦å¼ºåˆ¶è½®è¯¢ï¼Œå³åœ¨/etc/cron.daily/logrotateè„šæœ¬ä¸­å°† -t å‚æ•°æ›¿æ¢æˆ -f å‚æ•° [root@localhost ~]# cat /etc/cron.daily/logrotate #!/bin/sh /usr/sbin/logrotate /etc/logrotate.conf \u003e/dev/null 2\u003e\u00261 EXITVALUE=$? if [ $EXITVALUE != 0 ]; then /usr/bin/logger -f logrotate \"ALERT exited abnormally with [$EXITVALUE]\" fi exit æœ€åé‡å¯ä¸‹cronæœåŠ¡ï¼š [root@localhost ~]# /etc/init.d/crond restart Stopping crond: [ OK ] Starting crond: [ OK ] logrotateé»˜è®¤è‡ªåŠ¨åˆ‡å‰²ç”Ÿæ•ˆæ—¶é—´ Logrotateæ˜¯åŸºäºCRONæ¥è¿è¡Œçš„ï¼Œå…¶è„šæœ¬æ˜¯/etc/cron.daily/logrotateï¼Œå®é™…è¿è¡Œæ—¶ï¼ŒLogrotateä¼šè°ƒç”¨é…ç½®æ–‡ä»¶/etc/logrotate.confã€‚ [root@test ~]# cat /etc/cron.daily/logrotate #!/bin/sh /usr/sbin/logrotate /etc/logrotate.conf EXITVALUE=$? if [ $EXITVALUE != 0 ]; then /usr/bin/logger -t logrotate \"ALERT exited abnormally with [$EXITVALUE]\" fi exit 0 æ—¶é—´æ˜¯ç”±CRONæ§åˆ¶çš„ï¼Œå…·ä½“å¯ä»¥æŸ¥è¯¢CRONçš„é…ç½®æ–‡ä»¶/etc/anacrontabï¼ˆè€ç‰ˆæœ¬çš„æ–‡ä»¶æ˜¯/etc/crontabï¼‰ [root@test ~]# cat /etc/anacrontab # /etc/anacrontab: configuration file for anacron # See anacron(8) and anacrontab(5) for details. SHELL=/bin/sh PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root # the maximal random delay added to the base delay of the jobs RANDOM_DELAY=45 //è¿™ä¸ªæ˜¯éšæœºçš„å»¶è¿Ÿæ—¶é—´ï¼Œè¡¨ç¤ºæœ€å¤§45åˆ†é’Ÿ # the jobs will be started during the following hours only START_HOURS_RANGE=3-22 //è¿™ä¸ªæ˜¯å¼€å§‹æ—¶é—´ #period in days delay in minutes job-identifier command 1 5 cron.daily nice run-parts /etc/cron.daily 7 25 cron.weekly nice run-parts /etc/cron.weekly @monthly 45 cron.monthly nice run-parts /etc/cron.monthly ç¬¬ä¸€ä¸ªæ˜¯Recurrence period ç¬¬äºŒä¸ªæ˜¯å»¶è¿Ÿæ—¶é—´ æ‰€ä»¥cron.dailyä¼šåœ¨3:22+(5,45)è¿™ä¸ªæ—¶é—´æ®µæ‰§è¡Œï¼Œ/etc/cron.dailyæ˜¯ä¸ªæ–‡ä»¶å¤¹. é€šè¿‡é»˜è®¤/etc/anacrontabæ–‡ä»¶é…ç½®ï¼Œä¼šå‘ç°logrotateè‡ªåŠ¨åˆ‡å‰²æ—¥å¿—æ–‡ä»¶çš„é»˜è®¤æ—¶é—´æ˜¯å‡Œæ™¨3ç‚¹å¤šã€‚ ================================================================================================== ç°åœ¨éœ€è¦å°†åˆ‡å‰²æ—¶é—´è°ƒæ•´åˆ°æ¯å¤©çš„æ™šä¸Š12ç‚¹ï¼Œå³æ¯å¤©åˆ‡å‰²çš„æ—¥å¿—æ˜¯å‰ä¸€å¤©çš„0-24ç‚¹ä¹‹é—´çš„å†…å®¹ã€‚ æ“ä½œå¦‚ä¸‹ï¼š [root@localhost ~]# mv /etc/anacrontab /etc/anacrontab.bak //å–æ¶ˆæ—¥å¿—è‡ªåŠ¨è½®è½¬çš„è®¾ç½® [root@localhost logrotate.d]# cat nstc_nohup.out /data/nstc/nohup.out { rotate 30 dateext daily copytruncate compress notifempty missingok } [root@localhost logrotate.d]# cat syslog /var/log/cron /var/log/maillog /var/log/messages /var/log/secure /var/log/history { sharedscripts compress rotate 30 daily dateext postrotate /bin/kill -HUP `cat /var/run/syslogd.pid 2\u003e /dev/null` 2\u003e /dev/null || true endscript } ç»“åˆcrontabè¿›è¡Œè‡ªå®šä¹‰çš„å®šæ—¶è½®è½¬æ“ä½œ [root@localhost ~]# crontab -l #log logrotate 59 23 * * * /usr/sbin/logrotate -f /etc/logrotate.d/syslog \u003e/dev/null 2\u003e\u00261 59 23 * * * /usr/sbin/logrotate -f /etc/logrotate.d/nstc_nohup.out \u003e/dev/null 2\u003e\u00261 ç»“æœ [root@localhost ~]# ll /data/nstc/nohup.out* -rw------- 1 app app 33218 1æœˆ 25 09:43 /data/nstc/nohup.out -rw------- 1 app app 67678 1æœˆ 25 23:59 /data/nstc/nohup.out-20180125.gz é™¤äº†åˆ©ç”¨è‡ªå¸¦çš„Logrotateå·¥å…·å®ç°æ—¥å¿—åˆ‡å‰²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ç¼–å†™pythonè„šæœ¬æˆ–shellè„šæœ¬ä»¥å®ç°æ—¥å¿—åˆ‡å‰²ã€‚ä¸‹é¢å°±ç®€å•åˆ—å‡ºå‡ ä¸ªå®ä¾‹è¯´æ˜ä¸‹ï¼š ","date":"2022-02-12","objectID":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/:2:2","tags":["logrotate"],"title":"ä½¿ç”¨logrotateè¿›è¡Œæ—¥å¿—åˆ‡å‰²","uri":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"},{"categories":["å·¥å…·"],"content":"å…¶ä»–å·¥å…·å®ç°æ—¥å¿—åˆ‡å‰² Pythonè„šæœ¬å®ç°æ—¥å¿—åˆ‡å‰² å®ä¾‹1ï¼šå¯¹jumpserveræ—¥å¿—è¿›è¡Œåˆ‡å‰² [root@localhost mnt]# cat log_rotate.py #!/usr/bin/env python import datetime,os,sys,shutil log_path = '/opt/jumpserver/logs/' log_file = 'jumpserver.log' yesterday = (datetime.datetime.now() - datetime.timedelta(days = 1)) try: os.makedirs(log_path + yesterday.strftime('%Y') + os.sep + \\ yesterday.strftime('%m')) except OSError,e: print print e sys.exit() shutil.move(log_path + log_file,log_path \\ + yesterday.strftime('%Y') + os.sep \\ + yesterday.strftime('%m') + os.sep \\ + log_file + '_' + yesterday.strftime('%Y%m%d') + '.log') os.popen(\"sudo /opt/jumpserver/service.sh restart\") æ‰‹åŠ¨æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼š [root@localhost mnt]# chmod 755 log_rotate.py [root@localhost mnt]# python log_rotate.py æŸ¥çœ‹æ—¥å¿—åˆ‡å‰²åçš„æ•ˆæœï¼š [root@localhost mnt]# ls /opt/jumpserver/logs/ 2017 jumpserver.log [root@localhost mnt]# ls /opt/jumpserver/logs/2017/ 09 [root@localhost mnt]# ls /opt/jumpserver/logs/2017/09/ jumpserver.log_20170916.log ç„¶ååšæ¯æ—¥çš„å®šæ—¶åˆ‡å‰²ä»»åŠ¡ï¼š [root@localhost mnt]# crontab -e 30 1 * * * /usr/bin/python /mnt/log_rotate.py \u003e /dev/null 2\u003e\u00261 å®ä¾‹2:å¯¹nginxæ—¥å¿—è¿›è¡Œåˆ‡å‰² [root@localhost mnt]# vim log_rotate.py #!/usr/bin/env python import datetime,os,sys,shutil log_path = '/app/nginx/logs/' log_file = 'www_access.log' yesterday = (datetime.datetime.now() - datetime.timedelta(days = 1)) try: os.makedirs(log_path + yesterday.strftime('%Y') + os.sep + \\ yesterday.strftime('%m')) except OSError,e: print print e sys.exit() shutil.move(log_path + log_file,log_path \\ + yesterday.strftime('%Y') + os.sep \\ + yesterday.strftime('%m') + os.sep \\ + log_file + '_' + yesterday.strftime('%Y%m%d') + '.log') os.popen(\"sudo kill -USR1 `cat /app/nginx/logs/nginx.pid`\") shellè„šæœ¬å®ç°æ—¥å¿—åˆ‡å‰² [root@localhost ~]# cat /app/script/log_rotate.sh #!/bin/sh function rotate() { logs_path=$1 echo Rotating Log: $1 cp ${logs_path} ${logs_path}.$(date -d \"yesterday\" +\"%Y%m%d\") \u003e ${logs_path} rm -f ${logs_path}.$(date -d \"7 days ago\" +\"%Y%m%d\") } for i in $* do rotate $i done æ¯å¤©å®šæ—¶åˆ‡å‰²æ—¥å¿—çš„ä»»åŠ¡åˆ¶å®šï¼ˆæ¯”å¦‚å¯¹pythonçš„ä¸€ä¸ªä¸šåŠ¡/data/log/xcspam/ä¸‹çš„æ—¥å¿—è¿›è¡Œåˆ‡å‰²ï¼Œ0Kçš„æ—¥å¿—ä¸è¿›è¡Œåˆ‡å‰²ï¼‰ï¼š [root@localhost ~]# crontab -e #xcspam æ—¥å¿—åˆ‡å‰² 30 0 * * * find /data/log/xcspam/ -size +0 -name '*.log' | xargs /app/script/log_rotate.sh æ‰‹åŠ¨æ‰§è¡Œåˆ‡å‰²ï¼š [root@localhost ~]# find /data/log/xcspam/ -size +0 -name â€˜*.logâ€™ | xargs /app/script/log_rotate.sh åˆ‡å‰²åçš„æ—¥å¿—æ•ˆæœï¼š [root@qd-vpc-op-consumer01 ~]# ls /data/log/xcspam/ xcspam_error.log xcspam_error.log-20170926 æ¯”å¦‚å¯¹maridbæ—¥å¿—è¿›è¡Œåˆ‡å‰² [root@localhost ~]# crontab -e #xcspam æ—¥å¿—åˆ‡å‰² 30 0 * * * find /var/log/mariadb/ -size +0 -name '*.log' | xargs /app/script/log_rotate.sh [root@localhost ~]# find /var/log/mariadb/ -size +0 -name '*.log' | xargs /app/script/log_rotate.sh [root@localhost ~]# ll /var/log/mariadb/ æ€»ç”¨é‡ 8 -rw-r-----. 1 mysql mysql 0 9æœˆ 17 20:31 mariadb.log -rw-r-----. 1 root root 4532 9æœˆ 17 20:31 mariadb.log.20170916 æ—¥å¿—å‹ç¼©è„šæœ¬ï¼š [root@localhost ~]# ls /var/log/fss/nginx/ nginx.20190506.log nginx.20190507.log nginx.20190508.log [root@localhost ~]# cat /root/log_clean.sh #!/usr/bin/sh #æ ¹æ®ç³»ç»Ÿ/æœåŠ¡/æ—¥å¿—ä¿ç•™å¤©æ•°ä¸‰ä¸ªå‚æ•°å‹ç¼©æ—¥å¿— #usage: sh clearlog.sh sysname appname keepdays sysName=$1 appName=$2 keepDay=$3 logDir=/var/log/${sysName}/${appName} logFile=${appName}.*[0-9][0-9].log cd ${logDir} find ./ -name \"${logFile}\" -mtime -${keepDay} -exec gzip {} \\; [root@localhost ~]# sh /root/log_clean.sh fss nginx 3 [root@localhost ~]# ls /var/log/fss/nginx/ nginx.20190506.log.gz nginx.20190507.log.gz nginx.20190508.log.gz è¿˜å¯ä»¥é’ˆå¯¹æ—¥å¿—ä¿ç•™ç­–ç•¥ï¼Œè°ƒæ•´æˆæ—¥å¿—æ¸…ç†è„šæœ¬ã€‚ æ¨èç”¨çš„Nginxæ—¥å¿—è½®è½¬æ–¹æ³• [éƒ¨ç½²åœ¨nginxçš„æ—¥å¿—ç›®å½•ä¸‹] #!/bin/bash yesterday=`date -d \"-1 days\" +'%Y%m%d'` cd `dirname $0` basedir=`pwd` logdir=\"${basedir}/bak\" bindir=\"${basedir%/*}/sbin\" mkdir -p ${logdir} for log in `ls *.log 2\u003e/dev/null` do mv ${log} ${logdir}/${log}.${yesterday}.bak # gzip ${logdir}/${log}.${yesterday} done ${bindir}/nginx -s reload cd ${logdir} find . -type f -name \"*.bak\" -mtime +7 | xargs rm -f ","date":"2022-02-12","objectID":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/:2:3","tags":["logrotate"],"title":"ä½¿ç”¨logrotateè¿›è¡Œæ—¥å¿—åˆ‡å‰²","uri":"/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"},{"categories":["é—®é¢˜"],"content":"æ‰€æœ‰çš„ç«¯å£ä½¿ç”¨æƒ…å†µ netstat -ano ","date":"2022-02-06","objectID":"/windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/:1:0","tags":["winè¿›ç¨‹"],"title":"windowsç»“æŸè¿›ç¨‹","uri":"/windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/"},{"categories":["é—®é¢˜"],"content":"æŸ¥çœ‹å ç”¨ç«¯å£åº”ç”¨ netstat -ano | findstr \"ç«¯å£å·\" ","date":"2022-02-06","objectID":"/windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/:2:0","tags":["winè¿›ç¨‹"],"title":"windowsç»“æŸè¿›ç¨‹","uri":"/windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/"},{"categories":["é—®é¢˜"],"content":"é€šè¿‡idæŸ¥æ‰¾å¯¹åº”çš„è¿›ç¨‹åç§° tasklist | findstr \"è¿›ç¨‹idå·\" #åˆ—å‡ºè¿›ç¨‹åç§° taskkill /f /t /im \"è¿›ç¨‹idæˆ–è€…è¿›ç¨‹åç§°\" #ç»“æŸè¿›ç¨‹ ","date":"2022-02-06","objectID":"/windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/:3:0","tags":["winè¿›ç¨‹"],"title":"windowsç»“æŸè¿›ç¨‹","uri":"/windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"åˆ›å»ºæ–‡ç«  è¿›å…¥åšå®¢ç›®å½•ï¼Œåœ¨ /source/_posts æ–‡ä»¶å¤¹ä¸‹ç›´æ¥å»ºç«‹ä¸€ä¸ª.mdæ–‡ä»¶ hexo new â€œè¿™é‡Œå¡«å…¥æ–‡ç« çš„æ ‡é¢˜â€ .mdæ–‡ä»¶æ³¨æ„ä½¿ç”¨å¸¦æœ‰makedownè¯­æ³•çš„ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå¯¹æ–‡ç« è¿›è¡Œç¼–è¾‘ï¼Œä½ å¯ä»¥åœ¨Hexo-\u003eSource-\u003e_postç›®å½•ä¸‹çœ‹åˆ°ä½ æ–°åˆ›å»ºçš„é‚£ä¸ªæ–‡ç« ï¼Œè¿˜æœ‰ä¸€ä¸ªé…å¥—çš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾è¿™è¾¹åšæ–‡çš„å›¾ç‰‡èµ„æº æ–‡ç« æ ‡é¢˜ï¼Œæ—¥æœŸï¼Œæ ‡ç­¾ï¼Œåˆ†ç±» layout: title title: hexoæ–‡ç« å‘å¸ƒå’Œåˆ é™¤ date: 2022-02-06 17:42:04 tags: æ ‡ç­¾ categories: åˆ†ç±» æ–‡ç« æ’å…¥å›¾ç‰‡ä½¿ç”¨jsdelivrè¿›è¡ŒcdnåŠ é€Ÿä½¿å›¾ç‰‡è®¿é—®æ›´å¿«ã€‚ å›¾ç‰‡æ ¼å¼ï¼š \u003cimg src=\"https://cdn.jsdelivr.net/gh/Smithkenny/Myimage/img/zshæ’ä»¶.png\" /\u003e ","date":"2022-02-06","objectID":"/hexo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%92%8C%E5%88%A0%E9%99%A4/:0:1","tags":["hexo"],"title":"hexoæ–‡ç« å‘å¸ƒå’Œåˆ é™¤","uri":"/hexo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%92%8C%E5%88%A0%E9%99%A4/"},{"categories":["ç½‘ç«™"],"content":"å‘å¸ƒæ–°å»ºæ–‡ç«  æ–‡ç« å†™å¥½åï¼Œç›´æ¥åœ¨git bashä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ç›´æ¥å‘å¸ƒæ–‡ç«  hexo d -g å¦‚æœå‘å¸ƒçš„æ—¶å€™å‡ºç°é”™è¯¯ ERROR Deployer not found: git æ‰§è¡Œ npm install hexo-deployer-git â€“save æˆ–è€…ç›´æ¥ä½¿ç”¨gitæ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸­,ç­‰å¾…github action è‡ªåŠ¨éƒ¨ç½²ç½‘ç«™ã€‚ git add . git commit -m \"è¯´æ˜\" git push origin master ","date":"2022-02-06","objectID":"/hexo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%92%8C%E5%88%A0%E9%99%A4/:0:2","tags":["hexo"],"title":"hexoæ–‡ç« å‘å¸ƒå’Œåˆ é™¤","uri":"/hexo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%92%8C%E5%88%A0%E9%99%A4/"},{"categories":["ç½‘ç«™"],"content":"åˆ é™¤æ–‡ç«  åˆ é™¤æ–‡ç« çš„è¿‡ç¨‹ä¸€æ ·ä¹Ÿå¾ˆç®€å•ï¼Œå…ˆåˆ é™¤æœ¬åœ°æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ç”Ÿæˆå’Œéƒ¨ç½²å‘½ä»¤è¿›è€Œå°†è¿œç¨‹ä»“åº“ä¸­çš„æ–‡ä»¶ä¹Ÿä¸€å¹¶åˆ é™¤ã€‚å…·ä½“æ¥è¯´ï¼Œä»¥æœ€å¼€å§‹é»˜è®¤å½¢æˆçš„helloworld.mdè¿™ç¯‡æ–‡ç« ä¸ºä¾‹ã€‚ é¦–å…ˆè¿›å…¥åˆ°source / _post æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰¾åˆ°helloworld.mdæ–‡ä»¶ï¼Œåœ¨æœ¬åœ°ç›´æ¥æ‰§è¡Œåˆ é™¤ã€‚ç„¶åä¾æ¬¡æ‰§è¡Œ hexo d -g å†å»ä¸»é¡µæŸ¥çœ‹ä½ å°±ä¼šå‘ç°ä½ çš„åšå®¢ä¸Šé¢å·²ç»ç©ºç©ºå¦‚ä¹Ÿäº†ï¼Œè¿™å°±æ˜¯å¦‚ä½•åˆ é™¤æ–‡ç« çš„æ–¹æ³•ã€‚ ","date":"2022-02-06","objectID":"/hexo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%92%8C%E5%88%A0%E9%99%A4/:0:3","tags":["hexo"],"title":"hexoæ–‡ç« å‘å¸ƒå’Œåˆ é™¤","uri":"/hexo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%92%8C%E5%88%A0%E9%99%A4/"},{"categories":["å·¥å…·"],"content":"ä»€ä¹ˆæ˜¯ WSL WSL çš„å…¨ç§°å«åšï¼šWindows Subsystem for Linuxï¼Œå³ã€Œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿã€ã€‚WSL çš„è¯ç”Ÿè®© Windows ç”¨æˆ·ï¼ˆå¼€å‘äººå‘˜ï¼‰æŒ‰åŸæ ·è¿è¡Œ GNU/Linux ç¯å¢ƒ â€”â€” åŒ…æ‹¬å¤§å¤šæ•°å‘½ä»¤è¡Œå·¥å…·ã€å®ç”¨å·¥å…·å’Œåº”ç”¨ç¨‹åº â€”â€” ä¸”ä¸ä¼šäº§ç”Ÿè™šæ‹Ÿæœºå¼€é”€ã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:1:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç”¨ WSL å¯ä»¥åšä»€ä¹ˆï¼Ÿ å¥½çš„ï¼Œåœ¨ Windows ä¸Šç”¨ WSL æˆ‘ä»¬åˆ°åº•èƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿ ä½ å¯ä»¥åœ¨ Windows ä¸Šã€Œå®‰è£…ã€ä½ å–œæ¬¢çš„ GNU/Linux å‘è¡Œç‰ˆ ä½ å¯ä»¥ç›´æ¥åœ¨ Windows ä¸Šè¿è¡Œ grepã€awkã€sed ç­‰ Linux åŸç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ ä½ å¯ä»¥åœ¨ Windows ä¸Šç›´æ¥ä½¿ç”¨ Vimã€Emacs ç­‰å·¥å…·ï¼Œç›´æ¥ä½¿ç”¨ Linux ç‰ˆæœ¬çš„ Javascript/Node.jsã€Rubyã€Pythonã€C/C++ã€Rustã€Go ç­‰è¯­è¨€è¿›è¡Œå¼€å‘ï¼Œç›´æ¥è¿è¡Œ MySQLã€Apache ç­‰ Linux åŸç”Ÿåº”ç”¨å’ŒæœåŠ¡ç­‰ æœ€ä¸ºé‡è¦çš„æ˜¯ï¼Œåˆ©ç”¨ WSL æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ ä¸æŠ›å¼ƒ Windows å…¨éƒ¨ä¼˜ç§€å·¥å…·çš„å‰æä¸‹ï¼Œåœ¨æ²¡æœ‰å› ä¸ºè™šæ‹Ÿæœºå¼€é”€è€Œç‰ºç‰²å¤ªå¤šæ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œç›´æ¥è¿è¡Œä½¿ç”¨å®Œæ•´çš„ Linux ç³»ç»Ÿã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:2:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"WSL 2 ä¸­é‡‡ç”¨çš„æ–°æªæ–½ åœ¨ Windows ä¸Šå®ç°å®Œæ•´çš„ Linux åŸç”Ÿç³»ç»Ÿè°ƒç”¨ï¼ˆFull System Call Compatibilityï¼‰ ç”¨ WSL æ‰§è¡Œæ›¾ç» 1.0 ç‰ˆæœ¬æ— æ³•è¿è¡Œçš„ Linux åŸç”Ÿç¨‹åºï¼Œæ¯”å¦‚ä¾èµ–è™šæ‹ŸåŒ–æŠ€æœ¯çš„ Docker å®¹å™¨ã€‚ æå¤§çš„çªç ´äº† WSL 1.0 ä¸­å‡ºç°çš„ I/O æ€§èƒ½ç“¶é¢ˆï¼šWSL 2 ä¸­ï¼Œgit cloneã€npm installã€apt updateã€apt upgrade ç­‰ä¾èµ–æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½çš„æ“ä½œå’Œå‘½ä»¤çš„é€Ÿåº¦éƒ½æœ‰æ˜¾è‘—æé«˜ã€‚ å¦‚æœä½ åœ¨ WSL 2 ä¸­è¿è¡Œ Web æœåŠ¡å™¨ï¼Œä½ ä¼šå‘ç°æ˜ å°„åˆ° Windows ä¸­çš„ç«¯å£å¹¶ä¸ä¸€æ ·ã€‚ä¸è¿‡è¿™ä¸€ä¸åŒå¹¶æ— å¤§ç¢ã€‚ ä½ ä¼šå‘ç° WSL 2 ä¸­åœ¨ Windows ä¾§å’Œ Linux ä¾§ä¹‹é—´ç›¸äº’ç§»åŠ¨æ–‡ä»¶çš„é€Ÿåº¦ä¼šæ¯” WSL çš„ 1.0 ç‰ˆæœ¬æ…¢ã€‚å› æ­¤ï¼Œä¸ºäº†å°½å¯èƒ½ä¿è¯æˆ‘ä»¬ WSL æ–‡ä»¶ç³»ç»Ÿçš„å­˜å‚¨é€Ÿåº¦ï¼Œæˆ‘ä»¬åº”è¯¥å°†åœ¨ Linux ä¸­ä½¿ç”¨çš„æ–‡ä»¶å…¨éƒ¨æ”¾åœ¨ Linux æ–‡ä»¶ç³»ç»Ÿä¸‹ã€‚ WSL 2 ç›®å‰å¯¹ç¡¬ä»¶çš„æ”¯æŒæœ‰é™ï¼Œå› æ­¤ä½ å¯èƒ½æ— æ³•ç›´æ¥é€šè¿‡ WSL 2 è®¿é—®å¤–è®¾ã€‚ä¸è¿‡ï¼ŒWSL 2 ç›®å‰å·²ç»æ”¯æŒäº† GPU çš„è¿æ¥,åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº› hacky çš„æ‰‹æ®µè®© WSL 2 èƒ½å¤Ÿè®¿é—® USB æ¥å£. WSL 2 å¯¹ VMware ç­‰è™šæ‹Ÿæœºè½¯ä»¶ä¹Ÿæœ‰ä¸€äº›è¦æ±‚ï¼Œä¹Ÿå°±æ˜¯ï¼šä½ æ— æ³•åœ¨è¿è¡Œ WSL 2 çš„æƒ…å†µä¸‹ç›´æ¥è¿è¡Œ VMware æˆ–æ—§ç‰ˆæœ¬çš„ Virtual Boxã€‚è¿™æ˜¯å› ä¸º WSL 2 ä¸­çš„è™šæ‹ŸåŒ–æŠ€æœ¯ä¾èµ–äº Hyper-Vï¼Œè€Œ VMware å’Œ 6.0 ç‰ˆæœ¬ä¹‹å‰çš„ Virtual Box éƒ½å’Œ Hyper-V ä¸å…¼å®¹. ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:3:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®‰è£… åªæœ‰ Windows 10 æ‰èƒ½å®‰è£…ä½¿ç”¨ WSLã€‚Windows 7ã€8 æˆ–ä¹‹å‰çš„ä»»ä½•ç‰ˆæœ¬éƒ½æ— æ³•ä½¿ç”¨ï¼Œè¯·åŠæ—¶å°†ç³»ç»Ÿç‰ˆæœ¬æ›´æ–°è‡³æœ€æ–°ã€‚ åªæœ‰ Windows 10 ç‰ˆæœ¬ 16215 æˆ–ä»¥åçš„ç‰ˆæœ¬æ‰èƒ½å¤Ÿæ­£å¸¸è¿è¡Œ WSLã€‚ä½ å¯ä»¥åœ¨ã€ŒWindows è®¾ç½® \u003e ç³»ç»Ÿ \u003e å…³äºã€å¤„æ‰¾åˆ°ä½ çš„ Windows 10 æ“ä½œç³»ç»Ÿç‰ˆæœ¬ã€‚ åªæœ‰ Windows 10 ç‰ˆæœ¬ 18362 æˆ– 18363 ä»¥åŠä»¥åçš„ç‰ˆæœ¬ï¼Œæˆ–å°ç‰ˆæœ¬å·ä¸º 1049 çš„ç‰ˆæœ¬ï¼Œæ‰èƒ½å¤Ÿæ­£å¸¸è¿è¡Œ WSL 2ã€‚éœ€è¦æ˜ç¡®ï¼ŒWSL 2 ç›®å‰åªèƒ½åœ¨ Windows 10 ç‰ˆæœ¬ 1903ã€1909 å’Œ 2004 ä¸­ä½¿ç”¨ï¼ˆå…¶ä¸­ 1903 å’Œ 1909 ä»…æ”¯æŒ x64 ç³»ç»Ÿï¼‰ï¼Œå› æ­¤ä½ éœ€è¦å°†è‡ªå·±çš„ Windows ç³»ç»Ÿè¿›è¡Œå‡çº§è‡³åˆé€‚çš„ç‰ˆæœ¬ï¼Œæ‰èƒ½ä½¿ç”¨æ­£ç¡®çš„ Windows 10 ç‰ˆæœ¬å®‰è£… WSL 2ã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:4:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å¼€å¯ã€Œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿã€çš„é™„åŠ åŠŸèƒ½ æ— è®ºä½¿ç”¨ WSL 1 è¿˜æ˜¯ WSL 2ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¼€å¯ã€Œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿã€çš„é™„åŠ åŠŸèƒ½ï¼š ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell ç»ˆç«¯ è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux æŒ‰ç…§æç¤ºé‡å¯ç”µè„‘ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:4:1","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®˜æ–¹ç‰ˆæœ¬ WSL å¾®è½¯å®˜æ–¹æ”¯æŒçš„ WSL Linux å‘è¡Œç‰ˆå¯ä»¥ç›´æ¥ä»å¾®è½¯å•†åº—ä¸‹è½½ã€‚ å®˜æ–¹æ”¯æŒçš„ Linux å‘è¡Œç‰ˆæœ‰ï¼š Ubuntu: æœ€æ–°ç‰ˆ ï¼Œ16.04 LTS ï¼Œ18.04 LTS ï¼Œå’Œ 20.04 LTS OpenSUSE Leap: 42 , 15.0 SUSE Linux Enterprise Server: 12 , 15 Debian GNU/Linux Kali Linux Pengwin - GitHub | WhitewaterFoundry/Pengwin ä»˜è´¹ Alpine WSL - GitHub | agowa338/WSL-DistroLauncher-Alpine Fedora Remix for WSL - GitHub | WhitewaterFoundry/Fedora-Remix-for-WSL ä»˜è´¹ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:4:2","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç¤¾åŒºæ”¯æŒçš„ WSL å¦å¤–ä¹Ÿæœ‰ç¤¾åŒºæ”¯æŒçš„ WSL Linux å‘è¡Œç‰ˆï¼Œç¤¾åŒºæ”¯æŒçš„ç¬¬ä¸‰æ–¹ WSL å‘è¡Œç‰ˆï¼š Arch Linux Alpine Linux ç¬¬ä¸‰æ–¹æ”¯æŒçš„å‘è¡Œç‰ˆéœ€è¦æŒ‰ç…§å…¶å®˜æ–¹ä½¿ç”¨è¯´æ˜è¿›è¡Œå®‰è£…ã€‚ ä¸‹è½½æˆåŠŸåï¼Œæˆ‘ä»¬éœ€è¦å¯¹åˆšåˆšè¿™ä¸€å‘è¡Œç‰ˆè¿›è¡Œåˆå§‹åŒ–ã€‚åœ¨å¼€å§‹èœå•ä¸­ï¼Œæ²¡æœ‰æ„å¤–çš„è¯ï¼Œä½ åº”è¯¥çœ‹åˆ°åˆšåˆšä¸‹è½½å®Œæˆçš„ Ubuntu å¿«æ·æ–¹å¼ï¼Œæˆ‘ä»¬ç‚¹å‡»æ‰“å¼€ Ubuntuï¼Œç­‰å¾…åˆå§‹åŒ–å®Œæˆå³å¯ã€‚ï¼ˆåˆå§‹åŒ–è¿‡ç¨‹ä¼šå°†ä¸‹è½½å¥½çš„ Linux å‘è¡Œç‰ˆçš„æ–‡ä»¶è§£å‹ç¼©ï¼Œå¹¶å­˜å‚¨åœ¨ç”µè„‘ä¸Šä¾›ä½ ä½¿ç”¨ï¼Œå¾€å¾€ä¼šéœ€è¦ 1 åˆ†é’Ÿç”šè‡³æ›´å¤šã€‚ï¼‰ åˆå§‹åŒ–å®Œæˆä¹‹åï¼ŒLinux ä¼šæç¤ºä½ è¾“å…¥ä¸€ä¸ª UNIX ç”¨æˆ·åå¹¶ä¸ºä¹‹è®¾ç½®ä¸€ä¸ª UNIX å¯†ç ã€‚è¿™ä¸€ç”¨æˆ·åå’Œå¯†ç ä¸ä½ çš„ Windows ç™»å½•è´¦å·å¯†ç å®Œå…¨æ— å…³ï¼Œä½ å¯ä»¥ä»»æ„è®¾ç½®ã€‚å®Œæˆä¹‹åï¼Œä½ çš„ Ubuntu å‘è¡Œç‰ˆå°±å®‰è£…æˆåŠŸäº†ã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:4:3","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"WSL 2 çš„å®‰è£… WSL 2 éœ€è¦åœ¨ WSL å·²ç»å®‰è£…å®Œæ¯•çš„åŸºç¡€ä¹‹ä¸Šæ‰èƒ½è¿›è¡Œå®‰è£…ã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:5:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å¼€å¯æ”¯æŒ WSL 2 çš„å¯é€‰ç»„ä»¶ å¦‚æœä½ å¸Œæœ›å®‰è£… WSL 2ï¼Œä½ éœ€è¦ç¡®ä¿ä½ å·²å®‰è£…ã€Œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿã€å’Œã€Œè™šæ‹Ÿæœºå¹³å°ã€è¿™ä¸¤ä¸ªå¯é€‰ç»„ä»¶ã€‚[1] åŒæ ·ï¼š ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell ç»ˆç«¯ è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart æ ¹æ®æç¤ºé‡å¯ç”µè„‘ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:5:1","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨å‘½ä»¤è¡Œè®¾ç½®éœ€è¦ç”± WSL 2 æ”¯æŒçš„å‘è¡Œç‰ˆ åŒæ ·ï¼Œç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell ç»ˆç«¯ï¼š æ‰§è¡Œä¸‹é¢å‘½ä»¤æ‰¾åˆ°ä½ å½“å‰å®‰è£…çš„ Linux å‘è¡Œç‰ˆåŠå…¶åå­—ï¼š wsl --list ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†ä½ éœ€è¦çš„å‘è¡Œç‰ˆè®¾ç½®ä¸ºç”± WSL 2 æ”¯æŒï¼Œå°†å…¶ä¸­çš„ \u003cDistro\u003e ä¿®æ”¹ä¸º Linux å‘è¡Œç‰ˆåç§°ï¼š wsl --set-version \u003cDistro\u003e 2 å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å°†ä¹‹åæ–°å®‰è£…çš„å‘è¡Œç‰ˆå‡è®¾ç½®ä¸ºé»˜è®¤ç”± WSL 2 æ”¯æŒï¼š wsl --set-default-version 2 æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¦‚æœå‘ç°æœ€åä¸€åˆ—çš„ VERSION æ•°ä¸º 2ï¼Œè¯´æ˜ä½ çš„é…ç½®æ˜¯æˆåŠŸçš„ï¼š wsl --list --verbose å¦‚æœæŸ¥è¯¢åˆ°çš„ç‰ˆæœ¬è¿˜æ˜¯1ï¼Œå¹¶ä¸”æç¤ºå½“å‰windowséœ€è¦å‡çº§å†…æ ¸ã€‚åˆ™ä½¿ç”¨wsl_update_x64.rarå·¥å…·å‡çº§å¹¶é‡å¯ç”µè„‘ã€‚å†æ¬¡å°è¯•ï¼Œç›´åˆ°ç‰ˆæœ¬ä¸º2. ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:5:2","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®‰è£…Fluent Terminal Fluent Terminal æ˜¯ç›®å‰ç›¸å¯¹ç¨³å®šçš„é Electron æ„å»ºçš„ç»ˆç«¯ã€‚å¾—ç›Šäº UWP æŠ€æœ¯ï¼ŒFluent Terminal èƒ½å¤ŸåŒæ ·æ‹¥æœ‰ç¾ä¸½çš„äºšå…‹åŠ›åŠé€æ˜èƒŒæ™¯ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ iTerm2 è‰²å½©ä¸»é¢˜ã€‚ å®‰è£…Fluent Terminalä¹‹å‰å…ˆå®‰è£…Scoop. ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:6:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"è‡ªå®šä¹‰è·¯å¾„å®‰è£…Scoop ç”¨ç®¡ç†å‘˜è¿è¡Œpowershell,åˆ›å»ºscoopç¯å¢ƒå˜é‡. env:SCOOP='D:\\Applications\\Scoop' [Environment]::SetEnvironmentVariable('SCOOP',$env:SCOOP,'User') env:SCOOP_GLOBAL='D:\\GlobalScoopApps' [Environment]::SetEnvironmentVariable('SCOOP_GLOBAL',$env:SCOOP_GLOBAL,'User') windowsç¯å¢ƒå˜é‡æŸ¥çœ‹æ–¹å¼ï¼š è®¾ç½®-ç³»ç»Ÿè®¾ç½®-é«˜çº§ç³»ç»Ÿè®¾ç½®-ç¯å¢ƒå˜é‡ å®‰è£…Scoop(åŒ…ç®¡ç†å·¥å…·) Scoopå®˜ç½‘ å‚è€ƒ éœ€è¦è®¾ç½®ä»£ç†æ‰èƒ½å®‰è£…ï¼š æš‚æ—¶å…ˆç”¨ä»¥ä¸‹æ–¹æ³•è®¾ç½®ä»£ç† ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å°†å½“å‰ sessionï¼ˆä¼šè¯ï¼‰çš„ä»£ç†è¿›è¡Œé…ç½®ï¼š export http_proxy=http://\u003cWindows ä¸»æœºçš„ IP åœ°å€\u003e:\u003cä»£ç†ç«¯å£\u003e export https_proxy=http://\u003cWindows ä¸»æœºçš„ IP åœ°å€\u003e:\u003cä»£ç†ç«¯å£\u003e ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å–æ¶ˆä»£ç†ï¼š unset http_proxy https_proxy æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ£€æµ‹è‡ªå·±çš„å¯¹å¤–ç«¯å£ï¼š # ä¸€ä¸ªæ¥å£ curl ipinfo.io # å¦ä¸€ä¸ªæ¥å£ curl cip.cc å®‰è£…å‘½ä»¤ï¼š iex (new-object net.webclient).downloadstring('https://get.scoop.sh') ## æˆ–è€… iwr-useb get.scoop.sh|iex å¸è½½å‘½ä»¤ï¼š scoop uninstall scoop è¿™ä¸ªå¸è½½ï¼Œä¼šåˆ é™¤ä½ é…ç½®çš„scoopä¸‹é¢çš„æ‰€æœ‰è½¯ä»¶ï¼Œéå¸¸å±é™©ã€‚ å®‰è£… Scoop ä¹‹åï¼Œæˆ‘ä»¬åœ¨ PowerShell ä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå³å¯å®‰è£… Fluent Terminalï¼š scoop bucket add nonportable scoop install fluent-terminal-np ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:6:1","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"Shell ç¯å¢ƒ ä¸ºäº†åŠ é€Ÿ Ubuntu è½¯ä»¶åŒ…åœ¨ä¸­å›½å¤§é™†çš„ä¸‹è½½é€Ÿåº¦ï¼Œæˆ‘ä»¬å°†åŒ…ç®¡ç†å·¥å…· apt æºæ›´æ¢è‡³æ¸…å TUNA è½¯ä»¶æºé•œåƒã€‚Ubuntu çš„è½¯ä»¶æºé…ç½®æ–‡ä»¶æ˜¯ /etc/apt/sources.listã€‚å°†ç³»ç»Ÿè‡ªå¸¦çš„è¯¥æ–‡ä»¶åšä¸ªå¤‡ä»½ï¼Œå°†è¯¥æ–‡ä»¶æ›¿æ¢ä¸ºä¸‹é¢å†…å®¹ï¼Œå³å¯ä½¿ç”¨ TUNA çš„è½¯ä»¶æºé•œåƒã€‚ å¤‡ä»½åŸæ–‡ä»¶ï¼š sudo cp /etc/apt/sources.list /etc/apt/sources.list.bac åœ¨é…ç½®æ–‡ä»¶ /etc/apt/sources.list æœ€å‰é¢æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼ˆä¸‹é¢å†…å®¹ä¸ºé»˜è®¤ Ubuntu 20.04 LTS ç‰ˆæœ¬çš„å†…å®¹ï¼‰ï¼š # é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse # é¢„å‘å¸ƒè½¯ä»¶æºï¼Œä¸å»ºè®®å¯ç”¨ # deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse æ›´æ–°ç¼“å­˜ï¼š sudo apt update \u0026\u0026 sudo apt upgrade æ›´å¤šå†…å®¹è¯·å‚è€ƒï¼šUbuntu é•œåƒä½¿ç”¨å¸®åŠ© - æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:7:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"zsh ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:7:1","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®‰è£…ã€é…ç½® å®‰è£… zsh å¹¶å°†ä¹‹è®¾ç½®ä¸ºé»˜è®¤ Shellï¼š åˆ©ç”¨ apt å®‰è£… zsh sudo apt install zsh ä¸‹è½½å®‰è£… oh-my-zsh ï¼Œå¯èƒ½æ˜¯å¸‚é¢ä¸Šæœ€å¥½çš„ zsh é…ç½®ç®¡ç†å·¥å…·ï¼š è¿è¡Œå‘½ä»¤ä¸‹è½½å®‰è£… sh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\" å°† zsh ä½œä¸ºé»˜è®¤çš„ Shell ç¯å¢ƒï¼ˆå¦‚æœåˆšåˆšå®‰è£…è„šæœ¬æ²¡æœ‰è¿™æ ·åšçš„è¯ï¼‰ï¼š chsh -s $(which zsh) å®‰è£…zshæ—¶å¦‚æœæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š chsh always asking a password , and get `PAM: Authentication failure` è§£å†³æ–¹æ³• å°†/etc/pam.d/chshä¸­ auth required pam_shells.so æ”¹æˆ auth sufficient pam_shells.so é‡æ–°è¿›å…¥å½“å‰ç”¨æˆ·å¹¶é‡æ–°å®‰è£…zshã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:7:2","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"æ’ä»¶ã€ä¸»é¢˜æ¨¡æ¿æ¨è zsh æ‹¥æœ‰ç›¸å½“ä¸°å¯Œçš„ä¸»é¢˜ã€æ’ä»¶ç­‰æ‹“å±•å†…å®¹ï¼Œè¿™é‡Œæˆ‘ä»…åˆ—ä¸¾ä¸€äº›æˆ‘å¸¸ç”¨çš„é…ç½®æ’ä»¶å’Œä¸»é¢˜æ¨¡æ¿ï¼š æ’ä»¶ åœ¨.zshrcä¸­è®¾ç½® zsh-autosuggestions ï¼šä¸º zsh æä¾›åŸºäºè¾“å…¥å†å²çš„è‡ªåŠ¨å‘½ä»¤æç¤º autojump ï¼šå¿«é€Ÿè·³è½¬ä¸åŒçš„ç›®å½•ã€è·¯å¾„ã€æ–‡ä»¶å¤¹ zsh-syntax-highlighting ï¼šä¸º zsh å‘½ä»¤æä¾›è‰²å½©é«˜äº® é€€å‡ºå½“å‰ç™»å½•ç”¨æˆ·å¹¶é‡æ–°è¿›ï¼Œå¦‚æœå‘ç°æç¤ºæ’ä»¶éœ€è¦é‡æ–°å®‰è£…ã€‚åˆ™ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ã€‚ git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting git clone https://github.com/wting/autojump ~/.oh-my-zsh/custom/plugins/autojump autojumpä»£ç ä»“åº“å…‹éš†åéœ€è¦è¿›å…¥åˆ°autojump æ‰‹åŠ¨å®‰è£… å®‰è£… cd autojump ./install.py å¸è½½ ./uninstall.py ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:7:3","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®‰è£…gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ å‚è€ƒ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:8:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨è„šæœ¬è‡ªåŠ¨æ‰§è¡Œä»£ç†é…ç½® WINDOWS_IP=$(ip route | grep default | awk '{print $3}') PROXY_HTTP=\"http://${WINDOWS_IP}:7890\" PROXY_SOCKS5=\"${WINDOWS_IP}:7890\" # Set proxy set_proxy () { export http_proxy=\"${PROXY_HTTP}\" export https_proxy=\"${PROXY_HTTP}\" proxy_git } # Unset proxy unset_proxy () { unset http_proxy unset https_proxy git config --global --unset http.https://github.com.proxy } # Set alias alias proxy=set_proxy alias deproxy=unset_proxy å®é™…ä¸Šæ˜¯å…ˆè·å–åˆ°ç½‘å…³IPï¼Œè‡ªåŠ¨è®¾ç½®ä»£ç†ã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:8:1","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨æ–¹å¼ å¼€å¯ä»£ç†ï¼šproxy å…³é—­ä»£ç†ï¼šdeproxy IPæ£€æµ‹ï¼š æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ£€æµ‹è‡ªå·±çš„å¯¹å¤–ç«¯å£ï¼š # ä¸€ä¸ªæ¥å£ curl ipinfo.io # å¦ä¸€ä¸ªæ¥å£ curl cip.cc ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:8:2","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®‰è£… Python åœ¨ WSL ç¯å¢ƒä¸­å®‰è£… Pythonï¼š ä½¿ç”¨ APT å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Python 3ï¼š # å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Python 3 sudo apt install python-is-python3 å®‰è£… Python åŒ…ç®¡ç† pip å·¥å…·ï¼š sudo apt install python3-pip æ›´æ–° pip åŒ…ç®¡ç†æºä¸ºæ¸…åå¤§å­¦ TUNA é•œåƒæºï¼š[1] # ä½¿ç”¨ TUNA é•œåƒæºæ›´æ–° pip pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pip -U # å°† pip æºè®¾ç½®ä¸º TUNA pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:9:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®‰è£…ä»£ç ä¼˜åŒ–å·¥å…· åœ¨ä¸Šé¢å®‰è£…å®Œæˆ VS Code çš„ Python æ’ä»¶ä¹‹åï¼Œå¦‚æœé¡ºåˆ©ï¼Œé‚£ä¹ˆ VS Code åº”è¯¥æç¤ºä½ ç¼ºå°‘ Python ä»£ç æ£€æŸ¥å·¥å…·ï¼ˆPython linterï¼‰ï¼Œå¦‚æœä½ å°è¯•æ ¼å¼åŒ–æ–‡æ¡£ï¼Œé‚£ä¹ˆ VS Code è¿˜ä¼šæç¤ºä½ ç¼ºå°‘ Python ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼ˆPython code formatterï¼‰ã€‚æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å®‰è£…è¿™äº›ç»„ä»¶ã€‚ å®‰è£… Python ä»£ç æ£€æŸ¥å·¥å…·ï¼ŒVS Code æ”¯æŒ Pylintï¼ˆé»˜è®¤ï¼‰ã€Flake8ã€mypy ç­‰å¤šä¸ª Python linterï¼Œæˆ‘æ›´æ¨èå¤§å®¶ä½¿ç”¨ Flake8 ï¼š pip install flake8 å®‰è£… Python æ ¼å¼åŒ–ä»£ç å·¥å…·ï¼ŒVS Code æ”¯æŒ autopep8ï¼ˆé»˜è®¤ï¼‰ã€yapf å’Œ blackï¼Œæˆ‘æ›´æ¨èå¤§å®¶ä½¿ç”¨ black æ¥æ ¼å¼åŒ–ä»£ç ï¼š pip install black ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:10:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"ç”¨ Poetry ç®¡ç† Python é¡¹ç›® Poetry â€“ Python packaging and dependency management made easy.[2] ç†Ÿæ‚‰ Python é¡¹ç›®å¼€å‘çš„åŒå­¦å¯èƒ½çŸ¥é“ï¼ŒPython éœ€è¦åˆ©ç”¨è™šæ‹Ÿç¯å¢ƒå·¥å…· virtualenv æ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒè¿è¡Œ Python é¡¹ç›®ï¼Œä¹Ÿéœ€è¦ pip åŒ…ç®¡ç†å·¥å…·æ¥å®‰è£… Python ä¾èµ–ã€‚ä½¿ç”¨ä¸¤ä¸ªå•ç‹¬çš„å·¥å…·ç®¡ç†ä¸€ä¸ªé¡¹ç›®å¯èƒ½ä¼šå‡ºç°è¯¸å¤šé—®é¢˜ï¼ŒåŒæ—¶ requirements.txt çš„ç®¡ç†ä¹Ÿç›¸å½“ä¸ä¼˜é›…ã€‚å› æ­¤æˆ‘ä»¬ç”¨ Poetry ä½œä¸ºç»Ÿä¸€ç®¡ç† Python ç¯å¢ƒå’Œä¾èµ–çš„å·¥å…·ã€‚Poetry ä¹‹äº Python å°±å¦‚ yarn / npm ä¹‹äº Node.jsã€cargo ä¹‹äº Rustã€composer ä¹‹äº PHPâ€¦â€¦ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:11:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®‰è£… Poetry åœ¨ WSL ä¸­å®‰è£… Poetryï¼š curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python å°† Tab è¡¥å…¨åŠ å…¥æˆ‘ä»¬æ‰€ä½¿ç”¨çš„ Shell ç¯å¢ƒï¼Œæ¯”å¦‚ zsh ä¸­ï¼š poetry completions zsh \u003e ~/.zfunc/_poetry ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:11:1","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"åŸºæœ¬ä½¿ç”¨ æˆ‘ä»¬å¯ä»¥ç”¨ Poetry ç›´æ¥æ–°å»ºä¸€ä¸ªæ¨¡æ¿ Python é¡¹ç›®ï¼Œæ¯”å¦‚å«åš poetry-demoï¼š poetry new poetry-demo è¿™ä¸€å‘½ä»¤ä¼šåœ¨ poetry-demo ç›®å½•ä¸‹ç”Ÿæˆå¦‚ä¸‹çš„æ–‡ä»¶å†…å®¹ï¼š poetry-demo â”œâ”€â”€ pyproject.toml â”œâ”€â”€ README.rst â”œâ”€â”€ poetry_demo â”‚ â””â”€â”€ __init__.py â””â”€â”€ tests â”œâ”€â”€ __init__.py â””â”€â”€ test_poetry_demo.py å…¶ä¸­çš„ pyproject.toml æ–‡ä»¶å°±æ˜¯å®šä¹‰æˆ‘ä»¬å½“å‰ Python é¡¹ç›®æ‰€ä½¿ç”¨ä¾èµ–åº“çš„æ–‡ä»¶ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…ä¸€ä¸ªæ–°çš„ Python ä¾èµ–ï¼š # å®‰è£…ä¸€ä¸ªä¾èµ– poetry add requests # å®‰è£…ä¸€ä¸ªä»…åœ¨å¼€å‘ä¸­ä½¿ç”¨çš„ä¾èµ–ï¼ˆæ¯”å¦‚æ ¼å¼åŒ–å·¥å…· blackï¼‰ poetry add black --dev # æˆ– -D å¯¹äºä¸€ä¸ªå·²å®šä¹‰ pyproject.toml çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š # å®‰è£…æ‰€æœ‰ä¾èµ– poetry install # å®‰è£…é™¤äº†ä»…é™å¼€å‘ä½¿ç”¨çš„ä¾èµ–å¤–çš„æ‰€æœ‰ä¾èµ–åº“ poetry install --no-dev ä½¿ç”¨ remove å…³é”®è¯æ¥ç§»é™¤æŸä¸ªä¾èµ–ï¼š poetry remove requests æ›´å¤š Poetry å‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨ï¼Œæ¨èå¤§å®¶å‚è€ƒ Poetry å®˜æ–¹æ–‡æ¡£ï¼šPoetry - Commands . ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:11:2","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"Node.js ç‰ˆæœ¬æ›´æ–° åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å…ˆæ¥ä»‹ç»å‡ ä¸ª Node.js ç›¸å…³çš„æ¦‚å¿µï¼š Node.js - A JavaScript runtime built on Chromeâ€™s V8 JavaScript engine æ˜¯ä¸€ä¸ªä¸ä¾èµ–æµè§ˆå™¨çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå¤§éƒ¨åˆ†å‰ç«¯é¡¹ç›®æ¯”å¦‚ Vueã€React å’Œåç«¯é¡¹ç›®æ¯”å¦‚ Expressã€Koa å‡ä¾èµ–äº Node.js ç”Ÿæ€ç³»ç»Ÿï¼› n - Interactively Manage Your Node.js Versionsï¼šæ˜¯ä¸€ä¸ª Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ n æ¥å®‰è£…ä¸åŒç‰ˆæœ¬çš„ Node.js ç¯å¢ƒï¼› npm å’Œ yarnï¼Œåˆ†åˆ«æ˜¯ Node.js çš„åŒ…ç®¡ç†å·¥å…·ï¼Œå…¶ä¸­æˆ‘æ›´æ¨èå¤§å®¶ä½¿ç”¨åè€…ï¼ˆyarnï¼‰æ¥ç®¡ç†å®‰è£… Node.js ä¾èµ–ï¼› æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åœ¨ WSL ä¸­ä½¿ç”¨ n æ¥å®‰è£… Node.js ç¯å¢ƒï¼Œå¹¶é…ç½®åŒ…ç®¡ç†å·¥å…· yarn æ¥ç®¡ç† Node.js ç¯å¢ƒä¸­çš„ä¾èµ–ã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:12:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"å®‰è£… Node.js å»ºè®®å¤§å®¶ä½¿ç”¨ n æ¥ç®¡ç†ä¸å®‰è£… Node.jsï¼Œä¾¿äºåˆ‡æ¢ç‰ˆæœ¬å’Œå¿«æ·å®‰è£…ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ n-install å®‰è£… nï¼š curl -L https://git.io/n-install | bash n-installï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢çš„å‘½ä»¤ï¼‰é»˜è®¤ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å°† n çš„é‡è¦ç¯å¢ƒå˜é‡ PREFIX å’Œ N_PREFIX è®¾ç½®åˆ° $HOME/nï¼Œå¹¶å°† n å®‰è£…åˆ° $HOME/n/binã€‚åŒæ—¶ï¼Œn-install ä¼šå¸®åŠ©æˆ‘ä»¬æ›´æ–°å½“å‰æˆ‘ä»¬æ‰€ä½¿ç”¨çš„ Shellï¼ˆæ¯”å¦‚ zshï¼‰ï¼Œåœ¨ç›¸åº”çš„é…ç½®æ–‡ä»¶ä¸­å°† $HOME/n/bin æ·»åŠ åˆ° PATH ä¸­ã€‚æœ€åï¼Œn-install ä¼šå¸®æˆ‘ä»¬å®‰è£…æœ€æ–°çš„ LTS ç‰ˆæœ¬çš„ Node.js ç¯å¢ƒã€‚ æ›´å¤šå…³äº n-install çš„ä½¿ç”¨ï¼Œè¯·å‚è€ƒ n-install çš„ README æ–‡æ¡£ ã€‚ ä½¿ç”¨ n-install å®‰è£…å¥½ n ä»¥åŠ Node.js ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤è¿›è¡ŒéªŒè¯ï¼š # éªŒè¯ n çš„å®‰è£…æƒ…å†µ n --version 6.7.0 # éªŒè¯ Node.js çš„å®‰è£…æƒ…å†µ node --version v12.18.3 # éªŒè¯ npm çš„å®‰è£…æƒ…å†µ npm --version 6.14.6 å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ n ä¸‹è½½å…¶ä»–ç‰ˆæœ¬çš„ Node.jsï¼š # ä¸‹è½½æœ€æ–°çš„ LTS ç‰ˆæœ¬ Node.js n lts # ä¸‹è½½ç‰¹å®šç‰ˆæœ¬çš„ Node.js n 10.16.0 ç›´æ¥è¿è¡Œå‘½ä»¤ n ä¹Ÿå¯ä»¥è¿›å…¥ interactive ç•Œé¢ï¼Œè®©æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨æŸä¸ªç‰ˆæœ¬çš„ Node.jsã€‚ æœ‰å…³ä½¿ç”¨ n ä¸‹è½½å®‰è£…ä¸ä½¿ç”¨ Node.js çš„å‘½ä»¤å’Œæ–¹æ³•ï¼Œè¯·å‚è€ƒ n çš„å®˜æ–¹ README æ–‡æ¡£ ã€‚ ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:13:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["å·¥å…·"],"content":"é…ç½® Node.js åŒ…ç®¡ç†å·¥å…· æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®‰è£… yarn ï¼Œæ¨èå¤§å®¶å®‰è£…ä½¿ç”¨ yarnï¼šè¿™ä¸ªæ›´åŠ ç°ä»£ã€ç§‘å­¦çš„ Node.js åŒ…ç®¡ç†å·¥å…·ã€‚åˆšåˆšä¸‹è½½çš„ Node.js ä¸­åŒ…å«æœ‰ npmï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ npm æ¥å®‰è£… yarnï¼š npm install -g yarn æ­¤æ—¶æˆ‘ä»¬å®‰è£…çš„ yarn å®é™…ä¸Šæ˜¯ 1.22.0ï¼š yarn --version 1.22.4 æ­¤æ—¶æˆ‘ä»¬å®‰è£…çš„æ˜¯ yarn 1.0 ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æ¯”è¾ƒä¼ ç»Ÿçš„ç®¡ç†å®‰è£… Node.js ä¾èµ–çš„å·¥å…·ï¼Œè·Ÿ npm æ¯”è¾ƒç±»ä¼¼ã€‚yarn åœ¨ 2.0+ ç‰ˆæœ¬ä¸­ç»å†äº†é‡å¤§çš„å˜åŒ–ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªé¡¹ç›®å¼€å¯ yarn çš„ 2.0 ç‰ˆæœ¬ï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ‰‹åŠ¨å¼€å¯ï¼š yarn set version berry å…¶ä¸­ï¼Œyarn 2.0 æ‰€æ”¯æŒçš„ Plug and play - Plugâ€™nâ€™Play åŠŸèƒ½æ˜¯ yarn 2.0 çš„é‡ç£…åŠŸèƒ½ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä½¿ç”¨ yarn 2.0 çš„ä¸»è¦åŸå› ï¼ŒPlugâ€™nâ€™Play é‡ç‚¹è§£å†³äº† Node.js çš„ node_modules å­˜åœ¨äºæ¯ä¸ªé¡¹ç›®ä¸­çš„é—®é¢˜ï¼Œæ›´å¤šå†…å®¹è¯·è§ï¼šyarn - Plugâ€™nâ€™Play ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶éä¸æ˜¯æ‰€æœ‰çš„ Node.js åº“å‡æ”¯æŒ yarn 2.0ï¼Œå› æ­¤æ¨èé¢„å…ˆæŸ¥çœ‹ä½ æ‰€ä½¿ç”¨çš„åº“æ˜¯å¦æ”¯æŒ yarn 2.0ï¼šCompatibility Table ã€‚ å¦‚æœä½ ä¹‹å‰ä½¿ç”¨ yarn 1.0 ç‰ˆæœ¬ï¼Œæ¨èæŸ¥çœ‹ yarn å®˜æ–¹çš„ 1.0 è‡³ 2.0 ç‰ˆæœ¬è¿ç§»æŒ‡å—ï¼šMigrating from Yarn 1 ã€‚ æœ‰å…³åœ¨ VS Code ä¸­å¼€å‘ Node.js é¡¹ç›®çš„æ–¹æ³•ï¼Œæ›´å¤šè¯·å‚è€ƒï¼šNode.js tutorial in Visual Studio Code - Visual Studio Code Docs ","date":"2022-02-05","objectID":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/:14:0","tags":["wsl2"],"title":"wsl2æ­å»ºå…¨è¿‡ç¨‹","uri":"/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"},{"categories":["æ–°å¹´"],"content":"2022 æ–°å¹´å¿«ä¹ï¼ï¼ï¼ğŸ‰ğŸ‰ğŸ‰âœ¨ ","date":"2022-02-01","objectID":"/2022happynewyear/:0:1","tags":[2022],"title":"2022","uri":"/2022happynewyear/"},{"categories":["ç¼–ç¨‹"],"content":"æ–¹æ³• æ–¹æ³•çš„æ ¼å¼ object.method(arg1,arg2,etc...) è®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹åˆ—è¡¨çš„å„ç§æ–¹æ³•çš„ä¾‹å­ã€‚ # Create a simple list lst = [1,2,3,4,5] é€šè¿‡iPythonå’ŒJupyterç¬”è®°æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨tabé”®å¿«é€ŸæŸ¥çœ‹æ‰€æœ‰å¯èƒ½çš„æ–¹æ³•ã€‚åˆ—è¡¨ä¸­çš„æ–¹æ³•æœ‰ append count extend insert pop remove reverse sort append() å…è®¸æˆ‘ä»¬å°†å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨çš„æœ«å°¾ï¼š lst.append(6) lst ç»“æœ [1, 2, 3, 4, 5, 6] count()æ–¹æ³•å°†è®¡ç®—ä¸€ä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚ # æŸ¥æ‰¾2åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•° lst.count(2) ç»“æœ 1 ä½ å¯ä»¥éšæ—¶åœ¨Jupyterç¬”è®°æœ¬ä¸­ä½¿ç”¨Shift+Tabæ¥è·å¾—æ›´å¤šå…³äºè¯¥æ–¹æ³•çš„å¸®åŠ©ã€‚åœ¨ä¸€èˆ¬çš„Pythonä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨help()å‡½æ•°ã€‚ help(lst.count) Help on built-in function count: count(...) method of builtins.list instance L.count(value) -\u003e integer -- return number of occurrences of value ","date":"2022-01-15","objectID":"/python%E6%96%B9%E6%B3%95%E5%92%8C%E5%87%BD%E6%95%B0/:0:1","tags":["python"],"title":"pythonæ–¹æ³•å’Œå‡½æ•°","uri":"/python%E6%96%B9%E6%B3%95%E5%92%8C%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"å‡½æ•° ä»å½¢å¼ä¸Šçœ‹ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œå®ƒå°†ä¸€ç»„è¯­å¥ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥è¢«å¤šæ¬¡è¿è¡Œã€‚å®ƒä»¬è¿˜å¯ä»¥è®©æˆ‘ä»¬æŒ‡å®šå‚æ•°ï¼Œä½œä¸ºå‡½æ•°çš„è¾“å…¥ã€‚ åœ¨ä¸€ä¸ªæ›´åŸºæœ¬çš„å±‚é¢ä¸Šï¼Œå‡½æ•°ä½¿æˆ‘ä»¬ä¸å¿…ä¸€æ¬¡åˆä¸€æ¬¡åœ°é‡å¤ç¼–å†™ç›¸åŒçš„ä»£ç ã€‚å¦‚æœä½ è¿˜è®°å¾—å…³äºå­—ç¬¦ä¸²å’Œåˆ—è¡¨çš„è¯¾ç¨‹ï¼Œè®°å¾—æˆ‘ä»¬ç”¨å‡½æ•°len()æ¥è·å–ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ç”±äºæ£€æŸ¥ä¸€ä¸ªåºåˆ—çš„é•¿åº¦æ˜¯ä¸€é¡¹å¸¸è§çš„ä»»åŠ¡ï¼Œä½ ä¼šæƒ³å†™ä¸€ä¸ªèƒ½åœ¨å‘½ä»¤ä¸‹åå¤è¿›è¡Œçš„å‡½æ•°ã€‚ å‡½æ•°å°†æ˜¯åœ¨ Python ä¸­é‡å¤ä½¿ç”¨ä»£ç çš„æœ€åŸºæœ¬å±‚æ¬¡ä¹‹ä¸€ï¼Œå®ƒä¹Ÿå°†ä½¿æˆ‘ä»¬å¼€å§‹æ€è€ƒç¨‹åºè®¾è®¡ï¼ˆå½“æˆ‘ä»¬å­¦ä¹ é¢å‘å¯¹è±¡ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬å°†æ›´æ·±å…¥åœ°ç ”ç©¶è®¾è®¡çš„æƒ³æ³•ï¼‰ã€‚ ç®€å•åœ°è¯´ï¼Œå½“ä½ æ‰“ç®—å¤šæ¬¡ä½¿ç”¨ä¸€ä¸ªä»£ç å—æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨å‡½æ•°ã€‚å‡½æ•°å°†å…è®¸ä½ è°ƒç”¨åŒä¸€ä¸ªä»£ç å—ï¼Œè€Œä¸éœ€è¦å¤šæ¬¡ç¼–å†™å®ƒã€‚è¿™åè¿‡æ¥åˆå…è®¸ä½ åˆ›å»ºæ›´å¤æ‚çš„ Python è„šæœ¬ã€‚ä¸è¿‡è¦çœŸæ­£ç†è§£è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åº”è¯¥å®é™…å†™å‡ºæˆ‘ä»¬è‡ªå·±çš„å‡½æ•°! å®šä¹‰å…³é”®å­— è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨Pythonä¸­æ„å»ºå‡ºä¸€ä¸ªå‡½æ•°çš„è¯­æ³•ã€‚å®ƒæœ‰å¦‚ä¸‹å½¢å¼ã€‚ def name_of_function(arg1,arg2): ''' This is where the function's Document String (docstring) goes. When you call help() on your function it will be printed out. ''' # Do stuff here # Return desired result è§£é‡Š æˆ‘ä»¬ä»¥defå¼€å¤´ï¼Œç„¶åæ˜¯ä¸€ä¸ªç©ºæ ¼ï¼Œæ¥ç€æ˜¯å‡½æ•°çš„åç§°ã€‚å°½é‡ä¿æŒåå­—çš„ç›¸å…³æ€§ï¼Œä¾‹å¦‚ ç”¨len()æ¥è¡¨ç¤º length() å‡½æ•°ã€‚åŒæ ·è¦æ³¨æ„åå­—çš„ä½¿ç”¨ï¼Œä¸è¦å’ŒPythonä¸­å†…ç½®å‡½æ•°ï¼ˆå¦‚lenï¼‰åŒåã€‚å†…ç½®å…³é”®å­— æ¥ä¸‹æ¥æ˜¯ä¸€å¯¹åœ†æ‹¬å·ï¼Œé‡Œé¢æœ‰ä¸€äº›ç”¨é€—å·åˆ†éš”çš„å‚æ•°ã€‚è¿™äº›å‚æ•°æ˜¯ä½ çš„å‡½æ•°çš„è¾“å…¥ã€‚ä½ å°†èƒ½å¤Ÿåœ¨ä½ çš„å‡½æ•°ä¸­ä½¿ç”¨è¿™äº›è¾“å…¥å¹¶å¼•ç”¨å®ƒä»¬ã€‚åœ¨è¿™ä¹‹åä½ è¦åŠ ä¸€ä¸ªå†’å·ã€‚ è¿™æ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼Œæ‚¨å¿…é¡»ç¼©è¿›æ‰èƒ½æ­£ç¡®å¼€å§‹å‡½æ•°å†…çš„ä»£ç ã€‚ Python åˆ©ç”¨ç©ºæ ¼æ¥ç»„ç»‡ä»£ç ã€‚è®¸å¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸è¿™æ ·åšï¼Œæ‰€ä»¥è¯·è®°ä½è¿™ä¸€ç‚¹ã€‚ æ¥ä¸‹æ¥æ‚¨å°†çœ‹åˆ°æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œè¿™æ˜¯æ‚¨ç¼–å†™å‡½æ•°åŸºæœ¬æè¿°çš„åœ°æ–¹ã€‚ä½¿ç”¨ Jupyter å’Œ Jupyter Notebooksï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨å‡½æ•°åç§°åæŒ‰ Shift+Tab æ¥é˜…è¯»è¿™äº›æ–‡æ¡£å­—ç¬¦ä¸²ã€‚ç®€å•å‡½æ•°ä¸éœ€è¦æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œä½†æœ€å¥½å°†å®ƒä»¬æ”¾å…¥å…¶ä¸­ï¼Œä»¥ä¾¿æ‚¨æˆ–å…¶ä»–äººå¯ä»¥è½»æ¾ç†è§£æ‚¨ç¼–å†™çš„ä»£ç ã€‚ æœ€åï¼Œä½ å¼€å§‹å†™ä½ æƒ³æ‰§è¡Œçš„ä»£ç ã€‚ å­¦ä¹ å‡½æ•°çš„æœ€å¥½æ–¹æ³•æ˜¯é€šè¿‡å®ä¾‹æ¥å­¦ä¹ ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬è¯•ç€é€šè¿‡ä¸æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„å„ç§å¯¹è±¡å’Œæ•°æ®ç»“æ„ç›¸å…³çš„ä¾‹å­ã€‚ ç®€å•çš„å‡½æ•° def say_hello(): print('hello') ç”¨å‡½æ•°åå’Œæ‹¬å·æ¥è°ƒç”¨å‡½æ•° say_hello() ç»“æœ hello å¦‚æœä½ å¿˜è®°äº†å°æ‹¬å·ï¼ˆï¼‰ï¼Œå®ƒå°†ç®€å•åœ°æ˜¾ç¤º say_hello æ˜¯ä¸€ä¸ªå‡½æ•°çš„äº‹å®ã€‚ç¨åæˆ‘ä»¬å°†å­¦ä¹ æˆ‘ä»¬å®é™…ä¸Šå¯ä»¥å°†å‡½æ•°ä¼ å…¥å…¶ä»–å‡½æ•°ä¸­ï¼ä½†ç°åœ¨ï¼Œåªéœ€è®°ä½ç”¨ï¼ˆï¼‰è°ƒç”¨å‡½æ•°å°±å¯ä»¥äº†ã€‚ say_hello ç»“æœ \u003cfunction __main__.say_hello\u003e æ¥å—å‚æ•° def greeting(name): print(f'Hello {name}') ä¼ å…¥å‚æ•° greeting('Jose') ç»“æœ Hello Jose æ³¨æ„è¿™é‡Œå¦‚æœä¸ä¼ å…¥å‚æ•°ä¼šæŠ¥é”™ã€‚ greeting() æŠ¥é”™å¦‚ä¸‹ï¼Œæç¤ºname éœ€è¦ä¸€ä¸ªå‚æ•° --------------------------------------------------------------------------- TypeError Traceback (most recent call last) \u003cipython-input-5-3ffcd7d44b66\u003e in \u003cmodule\u003e ----\u003e 1 greeting() TypeError: greeting() missing 1 required positional argument: 'name' å¦‚æœç”¨å¦‚ä¸‹å†™æ³•ï¼Œåˆ™å¯ä»¥ä¸ç”¨ä¼ å…¥å‚æ•°ã€‚å› ä¸ºç»™name æŒ‡å®šäº†é»˜è®¤çš„å‚æ•°ã€‚ def greeting(name=â€˜smithâ€™): print(f'Hello {name}') æµ‹è¯• greeting() ç»“æœ Hello smith ä½¿ç”¨returnå…³é”®å­— åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªçœ‹åˆ°äº† print() çš„ä½¿ç”¨ï¼Œä½†å¦‚æœæˆ‘ä»¬çœŸçš„æƒ³ä¿å­˜ç»“æœå˜é‡ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ return å…³é”®å­—ã€‚è®©æˆ‘ä»¬çœ‹ä¸€äº›ä½¿ç”¨ return è¯­å¥çš„ç¤ºä¾‹ã€‚ return å…è®¸å‡½æ•°è¿”å›ä¸€ä¸ªç»“æœï¼Œç„¶åå¯ä»¥å°†å…¶å­˜å‚¨ä¸ºå˜é‡ï¼Œæˆ–ä»¥ç”¨æˆ·æƒ³è¦çš„ä»»ä½•æ–¹å¼ä½¿ç”¨ã€‚ def add_num(num1,num2): return num1+num2 add_num(4,5) ç»“æœ 9 ä¹Ÿå¯ä»¥æŠŠè¿”å›å€¼ä½œä¸ºå˜é‡å­˜èµ·æ¥ result = add_num(4,5) print(result) ç»“æœ 9 å¦‚æœè¾“å…¥ä¸¤ä¸ªå­—ç¬¦ä¸²ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ add_num('one','two') 'onetwo' å¸¸è§é—®é¢˜ï¼šprintå’Œreturn æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ returnå…³é”®å­—å…è®¸ä½ å°†ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºç»“æœå®é™…ä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ã€‚print()å‡½æ•°åªæ˜¯å‘ä½ æ˜¾ç¤ºè¾“å‡ºç»“æœï¼Œä½†å¹¶ä¸ä¸ºå°†æ¥çš„ä½¿ç”¨è€Œä¿å­˜å®ƒã€‚è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°æ¢è®¨ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚ def print_result(a,b): print(a+b) def return_result(a,b): return a+b print_result(10,5) ç»“æœ 15 å¦‚æœæ‚¨åœ¨ .py è„šæœ¬ä¸­è¿è¡Œå®ƒï¼Œæ‚¨å°†çœ‹ä¸åˆ°ä»»ä½•è¾“å‡º return_result(10,5) ç»“æœ 15 å°†è¿™ä¸ªç»“æœä¿å­˜åœ¨å˜é‡ä¸­å my_print = print_result(20,20) my_print ç»“æœ 40 æŸ¥çœ‹å˜é‡ç±»å‹ type(my_print) NoneType è¯·æ³¨æ„! æ³¨æ„print_result()å¹¶æ²¡æœ‰è®©ä½ æŠŠç»“æœä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ä¸­å»ï¼å®ƒåªæ˜¯æŠŠå®ƒæ‰“å°å‡ºæ¥ï¼Œè€Œprint()åœ¨èµ‹å€¼æ—¶è¿”å›None! å®ƒåªæ˜¯æŠŠå®ƒæ‰“å°å‡ºæ¥ï¼Œprint()å¯¹èµ‹å€¼è¿”å›æ— ã€‚ my_result = return_result(20,20) my_result ç»“æœ 40 æŸ¥çœ‹å˜é‡ç±»å‹ type(my_result) ç»“æœæ˜¯ int å˜é‡å¯ä»¥é‡å¤ä½¿ç”¨ my_result1 + my_result1 ç»“æœ 80 å‘å†…éƒ¨å‡½æ•°ä¸­æ·»åŠ é€»è¾‘ éªŒè¯æ•°å­—æ˜¯å¦æ˜¯å¶æ•° å¦‚æœä¸€ä¸ªæ•°å­—æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆ mod 2 (% 2) åº”è¯¥ä¸ºé›¶ã€‚ 2 % 2 0 21 % 2 1 20 % 2 == 0 True 21 % 2 == 0 False è®©æˆ‘ä»¬ç”¨å®ƒæ¥æ„é€ ä¸€ä¸ªå‡½æ•°ã€‚æ˜¯å¶æ•°è¿”å›True,ä¸æ˜¯åˆ™è¿”å›False def even_check(number): return number % 2 == 0 even_check(20) æ˜¯å¶æ•° True even_check(21) ä¸æ˜¯å¶æ•° False éªŒè¯åˆ—è¡¨ä¸­çš„æ•°å­—æ˜¯å¦æ˜¯å¶æ•° è®©æˆ‘ä»¬è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºåˆ—è¡¨ä¸­çš„ä»»ä½•æ•°å­—æ˜¯å¦ä¸ºå¶æ•°ã€‚æ³¨æ„è¿™é‡Œ return å¦‚ä½•è·³å‡ºå¾ªç¯å¹¶é€€å‡ºå‡½æ•°ã€‚ def check_even_list(num_list): # Go through each number for number in num_list: # Once we get a \"hit\" on an even number, we return True if number % 2 == 0: return True # Otherwise we don't do anything else: pass å¦‚æœéƒ½æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆæ²¡è¿”å›å€¼äº†ã€‚ check_even_list([1,2,3]) True check_even_list([1,1,1]) éå¸¸å¸¸è§çš„é”™è¯¯ï¼Œæ³¨æ„ä»¥ä¸‹ä»£ç æ˜¯é”™è¯¯çš„ def check_even_list(num_list): # Go through each number for number in num_list: # Once we get a \"hit\" on an even number, we return True if number % 2 == 0: return True # This is WRONG! This returns False at the very first odd number! # It doesn't end up checking the other numbers in the list! else: return False # åªä¼šæ£€æŸ¥åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªä½ç½®çš„æ•°å­—ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ•°å­—æ˜¯å¥‡æ•°ï¼Œè¿”å›Falseç„¶åç›´æ¥è·³å‡ºå¾ªç¯äº†ï¼Œä¸ä¼šå†éªŒè¯åé¢çš„æ•°å­—ã€‚ check_even_list([1,2,3]) False æ­£ç¡®çš„åšæ³•æ˜¯æˆ‘ä»¬éœ€è¦åœ¨è¿è¡Œå®Œæ•´ä¸ªå¾ªç¯ä¹‹åå‘èµ·ä¸€ä¸ªè¿”å› Falseã€‚æ³¨æ„ç¼©è¿›ã€‚ def check_even_list(num_list): # Go through each number for number in num_list: # Once we get a \"hit\" on an even number, we return True if number % 2 == 0: return True # Don't do anything if its not even else: pass # Notice the indentation! This ensures we run through the entire for loop return False check_even_list([1,2,3]) ç»“æœ True check_eve","date":"2022-01-15","objectID":"/python%E6%96%B9%E6%B3%95%E5%92%8C%E5%87%BD%E6%95%B0/:0:2","tags":["python"],"title":"pythonæ–¹æ³•å’Œå‡½æ•°","uri":"/python%E6%96%B9%E6%B3%95%E5%92%8C%E5%87%BD%E6%95%B0/"},{"categories":["ç¼–ç¨‹"],"content":"python è¯­æ³• ifã€elifã€else è¯­å¥ å˜¿ï¼Œå¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè¯·æ‰§è¡Œä¸€äº›æ“ä½œã€‚å¦åˆ™ï¼Œå¦‚æœå‘ç”Ÿå…¶ä»–æƒ…å†µï¼Œè¯·æ‰§è¡Œå…¶ä»–æ“ä½œã€‚å¦åˆ™ï¼Œå¦‚æœä¸Šè¿°æƒ…å†µå‡æœªå‘ç”Ÿï¼Œè¯·æ‰§è¡Œæ­¤æ“ä½œã€‚ if case1: perform action1 elif case2: perform action2 else: perform action3 ä¾‹å¦‚ x = False if x: print('x was True!') else: print('I will be printed in any case where x is not true') #I will be printed in any case where x is not true å¤šåˆ†æ”¯ç»“æ„ loc = 'Bank' if loc == 'Auto Shop': print('Welcome to the Auto Shop!') elif loc == 'Bank': print('Welcome to the bank!') else: print('Where are you?') #Welcome to the bank! for å¾ªç¯ for å¾ªç¯åœ¨ Python ä¸­å……å½“è¿­ä»£å™¨ï¼›å®ƒéå†åºåˆ—ä¸­çš„é¡¹ç›®æˆ–ä»»ä½•å…¶ä»–å¯è¿­ä»£é¡¹ç›®ã€‚æˆ‘ä»¬äº†è§£çš„å¯ä»¥è¿­ä»£çš„å¯¹è±¡åŒ…æ‹¬å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ï¼Œç”šè‡³æ˜¯å­—å…¸çš„å†…ç½®å¯è¿­ä»£å¯¹è±¡ï¼Œä¾‹å¦‚é”®æˆ–å€¼ã€‚ è¿™æ˜¯ Python ä¸­ for å¾ªç¯çš„ä¸€èˆ¬æ ¼å¼ï¼š for item in object: statements to do stuff éå†åˆ—è¡¨ list1 = [1,2,3,4,5,6,7,8,9,10] for num in list1: print(num) ç»“æœï¼š 1 2 3 4 5 6 7 8 9 10 å–ä½™ ç”¨ % æ¥è·å–ä½™æ•° # 3 Remainder 1 10 % 3 # 1 # 2 Remainder 4 18 % 7 #4 # 2 no remainder 4 % 2 #0 è¯·æ³¨æ„ï¼Œå¦‚æœä¸€ä¸ªæ•°å¯ä»¥å®Œå…¨æ•´é™¤ä¸”æ²¡æœ‰ä½™æ•°ï¼Œåˆ™æ¨¡è°ƒç”¨çš„ç»“æœä¸º 0ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥æµ‹è¯•å¶æ•°ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªæ•°æ¨¡ 2 ç­‰äº 0ï¼Œåˆ™æ„å‘³ç€å®ƒæ˜¯å¶æ•°ï¼ æ‰“å°å‡ºlist1ä¸­æ‰€æœ‰çš„å¶æ•° for num in list1: if num % 2 == 0: print(num) ç»“æœï¼š 2 4 6 8 10 ä¹Ÿå¯ä»¥åŠ ä¸Šelseè¯­å¥ for num in list1: if num % 2 == 0: print(num) else: print('Odd number') ç»“æœï¼š Odd number 2 Odd number 4 Odd number 6 Odd number 8 Odd number 10 ä¾‹å¦‚ # Start sum at zero list_sum = 0 for num in list1: list_sum = list_sum + num print(list_sum) ç»“æœï¼š 55 å¦ä¸€ç§å†™æ³• # Start sum at zero list_sum = 0 for num in list1: list_sum += num print(list_sum) ç»“æœï¼š 55 æˆ‘ä»¬å·²ç»åœ¨åˆ—è¡¨ä¸­ä½¿ç”¨äº† for å¾ªç¯ï¼Œé‚£ä¹ˆä½¿ç”¨å­—ç¬¦ä¸²å‘¢ï¼Ÿè¯·è®°ä½å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œå› æ­¤å½“æˆ‘ä»¬éå†å®ƒä»¬æ—¶ï¼Œæˆ‘ä»¬å°†è®¿é—®è¯¥å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªé¡¹ç›®ã€‚ for letter in 'This is a string.': print(letter) ç»“æœï¼š T h i s i s a s t r i n g . ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å°† for å¾ªç¯ä¸å…ƒç»„ä¸€èµ·ä½¿ç”¨. tup = (1,2,3,4,5) for t in tup: print(t) ç»“æœï¼š 1 2 3 4 5 å½“æ¶‰åŠåˆ° for å¾ªç¯æ—¶ï¼Œå…ƒç»„å…·æœ‰ç‰¹æ®Šçš„å“è´¨ã€‚å¦‚æœæ‚¨æ­£åœ¨éå†åŒ…å«å…ƒç»„çš„åºåˆ—ï¼Œåˆ™è¯¥é¡¹ç›®å®é™…ä¸Šå¯ä»¥æ˜¯å…ƒç»„æœ¬èº«ï¼Œè¿™æ˜¯å…ƒç»„è§£åŒ…çš„ç¤ºä¾‹ã€‚åœ¨ for å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬å°†è§£å‹ç¼©åºåˆ—ä¸­çš„å…ƒç»„ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®è¯¥å…ƒç»„ä¸­çš„å„ä¸ªé¡¹ç›®ï¼ list2 = [(2,4),(6,8),(10,12)] for tup in list2: print(tup) ç»“æœï¼š (2, 4) (6, 8) (10, 12) æ‹†åŒ… for (t1,t2) in list2: print(t1) ç»“æœ 2 6 10 ä½¿ç”¨åºåˆ—ä¸­çš„å…ƒç»„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è§£åŒ…è®¿é—®å…¶ä¸­çš„é¡¹ç›®ï¼è¿™æ˜¯å› ä¸ºè®¸å¤šå¯¹è±¡å°†é€šè¿‡å…ƒç»„ä¼ é€’å®ƒä»¬çš„è¿­ä»£ã€‚ åœ¨å­—å…¸ä¸­ä½¿ç”¨forå¾ªç¯ d = {'k1':1,'k2':2,'k3':3} for item in d: print(item) ç»“æœ k1 k2 k3 å…³äºå­—å…¸çš„æ–°æ–¹æ³• .keys(), .values() and .items() çš„ä½¿ç”¨ # Create a dictionary view object d.items() dict_items([('k1', 1), ('k2', 2), ('k3', 3)]) ç”±äº .items() æ–¹æ³•æ”¯æŒè¿­ä»£ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œå­—å…¸è§£åŒ…ä»¥åˆ†ç¦»é”®å’Œå€¼ã€‚ # å­—å…¸æ‹†åŒ… for k,v in d.items(): print(k) print(v) ç»“æœï¼š k1 1 k2 2 k3 3 å¦‚æœä½ æƒ³è·å¾—ä¸€ä¸ªçœŸæ­£çš„é”®ã€å€¼æˆ–é”®/å€¼å…ƒç»„çš„åˆ—è¡¨ï¼Œä½ å¯ä»¥å°†è§†å›¾è½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨ã€‚ list(d.keys()) ç»“æœ ['k1', 'k2', 'k3'] è¯·è®°ä½ï¼Œå­—å…¸æ˜¯æ— åºçš„ï¼Œé”®å’Œå€¼ä»¥ä»»æ„é¡ºåºè¿”å›ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ sorted() è·å–æ’åºåˆ—è¡¨ã€‚ sorted(d.values()) ç»“æœ [1, 2, 3] æ›´å¤šå†…å®¹å‚è€ƒ while å¾ªç¯ Python ä¸­çš„ while è¯­å¥æ˜¯æ‰§è¡Œè¿­ä»£çš„æœ€å¸¸ç”¨æ–¹æ³•ä¹‹ä¸€ã€‚åªè¦æ¡ä»¶ä¸ºçœŸï¼Œwhile è¯­å¥å°±ä¼šé‡å¤æ‰§è¡Œå•ä¸ªè¯­å¥æˆ–ä¸€ç»„è¯­å¥ã€‚ä¹‹æ‰€ä»¥ç§°ä¸ºâ€œå¾ªç¯â€ï¼Œæ˜¯å› ä¸ºä»£ç è¯­å¥ä¸€éåˆä¸€éåœ°å¾ªç¯ï¼Œç›´åˆ°ä¸å†æ»¡è¶³æ¡ä»¶ã€‚ å¸¸ç”¨æ ¼å¼ while test: code statements else: final code statements ä¾‹å¦‚ x = 0 while x \u003c 10: print('x is currently: ',x) print(' x is still less than 10, adding 1 to x') x+=1 else: print('All Done!') ç»“æœ x is currently: 0 x is still less than 10, adding 1 to x x is currently: 1 x is still less than 10, adding 1 to x x is currently: 2 x is still less than 10, adding 1 to x x is currently: 3 x is still less than 10, adding 1 to x x is currently: 4 x is still less than 10, adding 1 to x x is currently: 5 x is still less than 10, adding 1 to x x is currently: 6 x is still less than 10, adding 1 to x x is currently: 7 x is still less than 10, adding 1 to x x is currently: 8 x is still less than 10, adding 1 to x x is currently: 9 x is still less than 10, adding 1 to x All Done! æ³¨æ„ä¸€å…±æ‰§è¡Œ10æ¬¡å¾ªç¯ï¼Œå½“x=10æ—¶ï¼Œwhileåæ¡ä»¶ä¸ºå‡ï¼Œè·³å‡ºå¾ªç¯ï¼Œæ‰§è¡Œelseè¯­å¥ã€‚ å…³é”®å­—break, continue,pass æˆ‘ä»¬å¯ä»¥åœ¨å¾ªç¯ä¸­ä½¿ç”¨ breakã€continue å’Œ pass è¯­å¥æ¥ä¸ºå„ç§æƒ…å†µæ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚è¿™ä¸‰ä¸ªè¯­å¥å®šä¹‰ä¸º breakï¼šè·³å‡ºå½“å‰æœ€è¿‘çš„å°é—­å¾ªç¯ã€‚ continueï¼šè½¬åˆ°æœ€è¿‘çš„å°é—­å¾ªç¯çš„é¡¶éƒ¨ã€‚ passï¼šä»€ä¹ˆéƒ½ä¸åšã€‚ è€ƒè™‘ break å’Œ continue è¯­å¥ï¼Œwhile å¾ªç¯çš„ä¸€èˆ¬æ ¼å¼å¦‚ä¸‹æ‰€ç¤º while test: code statement if test: break if test: continue else: break å’Œ continue è¯­å¥å¯ä»¥å‡ºç°åœ¨å¾ªç¯ä½“å†…çš„ä»»ä½•ä½ç½®ï¼Œä½†æˆ‘ä»¬é€šå¸¸ä¼šå°†å®ƒä»¬ä¸ if è¯­å¥ä¸€èµ·è¿›ä¸€æ­¥åµŒå¥—ï¼Œä»¥æ ¹æ®æŸäº›æ¡ä»¶æ‰§è¡Œæ“ä½œã€‚ x = 0 while x \u003c 10: print('x is currently: ',x) print(' x is still less than 10, adding 1 to x') x+=1 if x==3: print('x==3') else: print('continuing...') continue ç»“æœ x is currently: 0 x is still less than 10, adding 1 to x continuing... x is currently: 1 x is still less than 10, adding 1 to x continuing... x is currently: 2 x is still less than 10, adding 1 to x x==3 x is currently: 3 x is still less than 10, adding 1 to x con","date":"2022-01-09","objectID":"/python%E8%AF%AD%E6%B3%95/:0:1","tags":["python"],"title":"pythonè¯­æ³•","uri":"/python%E8%AF%AD%E6%B3%95/"},{"categories":["ç¼–ç¨‹"],"content":"è¿ç®— ç®—æ•°è¿ç®— è¿ç®—ç¬¦ æè¿° å®ä¾‹ + åŠ  - ä¸¤ä¸ªå¯¹è±¡ç›¸åŠ  a + b è¾“å‡ºç»“æœ 30 - å‡ - å¾—åˆ°è´Ÿæ•°æˆ–æ˜¯ä¸€ä¸ªæ•°å‡å»å¦ä¸€ä¸ªæ•° a - b è¾“å‡ºç»“æœ -10 * ä¹˜ - ä¸¤ä¸ªæ•°ç›¸ä¹˜æˆ–æ˜¯è¿”å›ä¸€ä¸ªè¢«é‡å¤è‹¥å¹²æ¬¡çš„å­—ç¬¦ä¸² a * b è¾“å‡ºç»“æœ 200 / é™¤ - xé™¤ä»¥y b / a è¾“å‡ºç»“æœ 2 % å–æ¨¡ - è¿”å›é™¤æ³•çš„ä½™æ•° b % a è¾“å‡ºç»“æœ 0 ** å¹‚ - è¿”å›xçš„yæ¬¡å¹‚ a**bä¸º10çš„20æ¬¡æ–¹ï¼Œè¾“å‡ºç»“æœ100000000000000000000 // å–æ•´é™¤ä¸€è¿”å›å•†çš„æ•´æ•°éƒ¨åˆ† 9//2 è¾“å‡ºç»“æœ 4 , 9.0//2.0 è¾“å‡ºç»“æœ 4.0 æ¯”è¾ƒè¿ç®— è¿ç®—ç¬¦ æè¿° å®ä¾‹ == ç­‰äº - æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰ (a == b)è¿”å›Trueã€‚ != ä¸ç­‰äº - æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸ç›¸ç­‰ (a != b) è¿”å› True. \u003c\u003e ä¸ç­‰äº - æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸ç›¸ç­‰ (a \u003c\u003e b) è¿”å› True.è¿™ä¸ªè¿ç®—ç¬¦ç±»ä¼¼ != ã€‚ \u003e å¤§äº - è¿”å›aæ˜¯å¦å¤§äºb (a \u003e b) è¿”å› Trueã€‚ \u003c å°äº - è¿”å›aæ˜¯å¦å°äºbã€‚æ‰€æœ‰æ¯”è¾ƒè¿ç®—ç¬¦è¿”å›1è¡¨ç¤ºçœŸï¼Œè¿”å›0è¡¨ç¤ºå‡ã€‚è¿™åˆ†åˆ«ä¸ç‰¹æ®Šçš„å˜é‡Trueå’ŒFalseç­‰ä»·ã€‚æ³¨æ„ï¼Œè¿™äº›å˜é‡åçš„å¤§å†™ã€‚ (a \u003c b) è¿”å› Trueã€‚ \u003e= å¤§äºç­‰äº - è¿”å›aæ˜¯å¦å¤§äºç­‰äºbã€‚ (a \u003e= b) è¿”å› Trueã€‚ \u003c= å°äºç­‰äº - è¿”å›xæ˜¯å¦å°äºç­‰äºyã€‚ (a \u003c= b) è¿”å› Trueã€‚ é€»è¾‘è¿ç®— è¿ç®—ç¬¦ æè¿° å®ä¾‹ and å¸ƒå°”\"ä¸\" - å¦‚æœaä¸ºFalseï¼Œa and bè¿”å›Falseï¼Œå¦åˆ™å®ƒè¿”å›bçš„è®¡ç®—å€¼ã€‚ (a and b) è¿”å› Falseã€‚ or å¸ƒå°”\"æˆ–\" - å¦‚æœaæ˜¯Trueï¼Œå®ƒè¿”å›Trueï¼Œå¦åˆ™å®ƒè¿”å›bçš„è®¡ç®—å€¼ã€‚ (a or b) è¿”å›Trueã€‚ not å¸ƒå°”\"é\" - å¦‚æœaä¸ºTrueï¼Œè¿”å›Falseã€‚å¦‚æœbä¸ºFalseï¼Œå®ƒè¿”å›Trueã€‚ not(a and b) è¿”å› Tureã€‚ æˆå‘˜è®¡ç®— è¿ç®—ç¬¦ æè¿° å®ä¾‹ in å¦‚æœåœ¨æŒ‡å®šçš„åºåˆ—ä¸­æ‰¾åˆ°å€¼è¿”å›Trueï¼Œå¦åˆ™è¿”å›False. x åœ¨ y åºåˆ—ä¸­ï¼Œå¦‚æœ x åœ¨ y åºåˆ—ä¸­è¿”å›True not in å¦‚æœåœ¨æŒ‡å®šçš„åºåˆ—ä¸­æ²¡æœ‰æ‰¾åˆ°å€¼è¿”å›Trueï¼Œå¦åˆ™è¿”å›False. x ä¸åœ¨ y åºåˆ—ä¸­ï¼Œå¦‚æœ x ä¸åœ¨ y åºåˆ—ä¸­è¿”å›Trueã€‚ Pythonè¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼Œä»¥ä¸‹è¡¨æ ¼åˆ—å‡ºäº†ä»æœ€é«˜åˆ°æœ€ä½ä¼˜å…ˆçº§çš„æ‰€æœ‰è¿ç®—ç¬¦ï¼š è¿ç®—ç¬¦ æè¿° ** æŒ‡æ•° (æœ€é«˜ä¼˜å…ˆçº§) ~ + - æŒ‰ä½ç¿»è½¬, ä¸€å…ƒåŠ å·å’Œå‡å· (æœ€åä¸¤ä¸ªçš„æ–¹æ³•åä¸º +@ å’Œ -@) * / % // ä¹˜ï¼Œé™¤ï¼Œå–æ¨¡å’Œå–æ•´é™¤ + - åŠ æ³•å‡æ³• \u003e\u003e Â« å³ç§»ï¼Œå·¦ç§»è¿ç®—ç¬¦ \u0026 ä½ â€˜ANDâ€™ ^ | ä½è¿ç®—ç¬¦ \u003c= \u003c \u003e \u003e= æ¯”è¾ƒè¿ç®—ç¬¦ \u003c\u003e == != ç­‰äºè¿ç®—ç¬¦ = %= /= //= -= += *= **= èµ‹å€¼è¿ç®—ç¬¦ is is not èº«ä»½è¿ç®—ç¬¦ in not in æˆå‘˜è¿ç®—ç¬¦ not and or é€»è¾‘è¿ç®—ç¬¦ å˜é‡å å˜é‡åçš„å‘½åè§„åˆ™ åç§°ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚ åç§°ä¸­ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œç”¨_ä»£æ›¿ã€‚ ä¸èƒ½ä½¿ç”¨è¿™äº›ç¬¦å·ï¼š'\",\u003c\u003e/?|\\()!@#$%^\u0026*~-+ åç§°å°å†™è¢«è®¤ä¸ºæ˜¯æœ€ä½³å®è·µ (PEP8)ã€‚ é¿å…ä½¿ç”¨å­—ç¬¦ 'l'ï¼ˆå°å†™å­—æ¯ elï¼‰ã€'O'ï¼ˆå¤§å†™å­—æ¯ ohï¼‰æˆ– 'I'ï¼ˆå¤§å†™å­—æ¯çœ¼ç›ï¼‰ä½œä¸ºå•å­—ç¬¦å˜é‡åç§°ã€‚ é¿å…ä½¿ç”¨åœ¨ Python ä¸­å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„è¯ï¼Œå¦‚â€œlistâ€å’Œâ€œstrâ€ åŠ¨æ€ç±»å‹ ä¾‹å¦‚1 my_dog = 2 print(my_dog) # ç»“æœæ˜¯ 2 ä¾‹å¦‚2 my_dogs = ['a','b'] print(my_dog) # ç»“æœæ˜¯['a','b'] ç”¨name = object æ¥è¡¨ç¤ºå˜é‡ï¼Œä¸€ä¸ªç­‰å·ä»£è¡¨èµ‹å€¼è¿ç®—ã€‚ ä¾‹å¦‚1 a = 1 print(a) # ç»“æœæ˜¯1 ä¹Ÿå¯ä»¥é‡æ–°èµ‹å€¼ a = a + a print(a) # ç»“æœæ˜¯2 æ·å¾„ã€‚+=ï¼Œ-=ï¼Œ*=ï¼Œ/= ä¾‹å¦‚ a += 10 ç›¸å½“äºa = a + 10 ç”¨type()å¯ä»¥ç¡®å®šå˜é‡çš„ç±»å‹ã€‚type()æ˜¯å†…ç½®å‡½æ•°ã€‚å¸¸è§çš„ç±»å‹æœ‰ int (for integer) #æ•´å‹ float #æµ®ç‚¹å‹ï¼ˆå°æ•°ï¼‰ str (for string) #å­—ç¬¦ä¸² list #åˆ—è¡¨ tuple #å…ƒç»„ dict (for dictionary) #å­—å…¸ set #é›†åˆ bool (for Boolean True/False) #å¸ƒå°”å‹ ä¾‹å¦‚ a = (1,2) type(a) #ç»“æœï¼štuple c = {1,2} type(c) #ç»“æœï¼šset å­—ç¬¦ä¸² åœ¨pythonä¸­ç”¨å­—ç¬¦ä¸²è®°å½•æ–‡æœ¬ä¿¡æ¯ä¾‹å¦‚åç§°ã€‚ Python ä¸­çš„å­—ç¬¦ä¸²å®é™…ä¸Šæ˜¯ä¸€ä¸ªåºåˆ—ï¼Œè¿™åŸºæœ¬ä¸Šæ„å‘³ç€ Python å°†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå…ƒç´ ä½œä¸ºä¸€ä¸ªåºåˆ—è¿›è¡Œè·Ÿè¸ªã€‚ä¾‹å¦‚ï¼ŒPython å°†å­—ç¬¦ä¸²â€œhelloâ€ç†è§£ä¸ºæŒ‰ç‰¹å®šé¡ºåºæ’åˆ—çš„å­—æ¯åºåˆ—ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å°†èƒ½å¤Ÿä½¿ç”¨ç´¢å¼•æ¥è·å–ç‰¹å®šçš„å­—æ¯ï¼ˆå¦‚ç¬¬ä¸€ä¸ªå­—æ¯æˆ–æœ€åä¸€ä¸ªå­—æ¯ï¼‰ã€‚ è¦åœ¨ Python ä¸­åˆ›å»ºå­—ç¬¦ä¸²ï¼Œæ‚¨éœ€è¦ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·ã€‚ 'hello' \"hello\" #ç»“æœæ˜¯ç›¸åŒçš„ã€‚hello å½“å†…å®¹éœ€è¦è¾“å‡ºå•å¼•å·æ—¶ï¼Œç”¨åŒå¼•å·æ‹¬èµ·æ¥ \"I'm ready to use the single quotes inside a string!\" å­—ç¬¦ä¸²é•¿åº¦æ£€æŸ¥len() len('Hello World') #ç»“æœ 11ï¼Œç©ºæ ¼ä¹Ÿç®—é•¿åº¦ å­—ç¬¦ä¸²ç´¢å¼•index ä¾‹å¦‚ s = 'Hello World' print(s) # ç»“æœ Hello World print(s[0]) #ç»“æœH print(s[1]) #ç»“æœe print(s[2]) #ç»“æœl print(s[1:]) #ç»“æœello World print(s[:3]) #ç»“æœHel print(s[:]) #ç»“æœHello World print(s[-1]) #ç»“æœd print(s[:-1]) #ç»“æœ Hello Worl print(s[::1]) #ç»“æœ Hello World print(s[::2]) #ç»“æœ HloWrd print(s[::-1]) #ç»“æœ dlroW olleH è§£æ H e l l o W o r l d 0 1 2 3 4 5 6 7 8 9 10 #æ­£åºä»0å¼€å§‹ -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1 # å€’åº ä»-1å¼€å§‹ # è§„åˆ™å‰åŒ…æ‹¬ï¼Œåä¸åŒ…æ‹¬ # ä¾‹å¦‚ s = 'hello' print(s[1:3]) åŒ…æ‹¬ä½ç½®1å¯¹åº”çš„å†…å®¹ï¼Œä¸åŒ…å«ä½ç½®3å¯¹åº”çš„å†…å®¹ã€‚æ‰€ä»¥ç»“æœä¸ºel å€’åºæŸ¥æ‰¾ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä¾‹å¦‚ print(s[-3:-1]) #ç»“æœä¸ºll ä¸¤ä¸ªå†’å·åé¢çš„æ•°å­—æ˜¯æ­¥é•¿ã€‚ print(s[::2]) #ç»“æœä¸ºhlo å­—ç¬¦ä¸²ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±ä¸èƒ½æ›´æ”¹æˆ–æ›¿æ¢å…¶ä¸­çš„å…ƒç´ äº†ã€‚æ›´æ”¹ä¼šæŠ¥é”™ã€‚ ä¾‹å¦‚ s = 'hello world' s[0] = 'x' #æŠ¥é”™å†…å®¹TypeError: 'str' object does not support item assignment è™½ç„¶ä¸èƒ½æ›´æ”¹å…ƒç´ å†…å®¹ï¼Œä½†å­—ç¬¦ä¸²å¯ä»¥åšæ‹¼æ¥ã€‚ ä¾‹å¦‚ s = 'hello' s = s + 'world' print(s) #ç»“æœ helloworld å®ƒä¹Ÿæ”¯æŒä¹˜æ³• ä¾‹å¦‚ letter = 'z' print(letter**10) #ç»“æœ zzzzzzzzzz å†…ç½®å‡½æ•°è°ƒç”¨ æ ¼å¼ï¼š object.method(parameters) å¯¹è±¡.æ–¹æ³•(å‚æ•°) ä¾‹å¦‚ s = 'hello world' s.upper() #å¤§å†™ # ç»“æœ 'HELLO WORLD' s.lower() #å°å†™ #ç»“æœ 'hello world' s.split('w') #åˆ†å‰²ï¼Œä¸åŒ…å«è¢«åˆ†å‰²çš„å…ƒç´  #ç»“æœ 'hello ','orld' æ‰“å°æ ¼å¼åŒ– æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ .format() æ–¹æ³•å°†æ ¼å¼åŒ–çš„å¯¹è±¡æ·»åŠ åˆ°æ‰“å°çš„å­—ç¬¦ä¸²è¯­å¥ä¸­ã€‚ ä¾‹å¦‚ï¼š 'Insert another string with curly brackets: {}'.format('The inserted string') # ç»“æœ'Insert another string with curly brackets: The inserted string' å­—ç¬¦ä¸²æ ¼å¼åŒ– å­—ç¬¦ä¸²æ ¼å¼åŒ–çš„ä¸‰ç§å®ç°æ–¹å¼ æ—§çš„æ–¹å¼æ˜¯ä½¿ç”¨ % å……å½“å ä½ç¬¦ æ”¹è¿›çš„æ–¹å¼æ˜¯ä½¿ç”¨ .format()æ¥å®ç° Python 3.6 å¼•å…¥çš„æœ€æ–°æ–¹æ³•ä½¿ç”¨æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ–‡å­—ï¼Œç§°ä¸º f-stringsã€‚ ä¸¾ä¾‹1 print(\"I'm going to inject %s text here, and %s text here.\" %('some','more')) #ç»“æœï¼šI'm going to inject some text here, and more text here x, y = 'some', 'more' print(\"I'm going to inject %s text here, and %s text here.\"%(x,y)) # ç»“æœï¼šI'm going to inject some text here, and more text here. æ ¼å¼è½¬æ¢æ–¹æ³• æ¯”è¾ƒ%s å’Œ%rä½¿ç”¨æ—¶çš„ä¸åŒï¼Œ%s ä½¿ç”¨çš„æ˜¯str() å‡½æ•°ï¼Œ%r ä½¿ç”¨çš„æ˜¯repr()å‡½æ•°ã€‚%r èƒ½å¤Ÿé‡æ–°åˆ›å»ºå®ƒæ‰€ä»£è¡¨çš„å¯¹è±¡ã€‚ print('I have a %r.'%'pen') # ç»“æœï¼š I have a 'pen'. print('I have a %s.'%'pen') # ç»“æœï¼šI have a p","date":"2022-01-06","objectID":"/python%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/:0:1","tags":["python"],"title":"pythonå¯¹è±¡å’Œæ•°æ®ç»“æ„åŸºç¡€","uri":"/python%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/"},{"categories":["å·¥å…·"],"content":"é—®é¢˜å‡ºç°çš„åŸå›  æˆ‘çš„æœåŠ¡å™¨çš„å¹³å°æ¶æ„æ˜¯IBM-Zæ— æ³•æ‹‰å–é»˜è®¤çš„x86å¹³å°çš„é•œåƒï¼Œæ‰€ä»¥éœ€è¦åˆ°docker-hubä¸Šæ‰¾åˆ°IBM-Zå¯¹åº”çš„é•œåƒæ‰èƒ½ä½¿ç”¨ã€‚ é¦–å…ˆè¿›å…¥Docker Hub æŸ¥æ‰¾æ‰€éœ€é•œåƒ ä¾‹å¦‚æˆ‘éœ€è¦ä¸‹è½½mysqlé•œåƒçš„IBM-Zç‰ˆæœ¬ æœç´¢mysql ï¼Œå·¦ä¾§ç­›é€‰IBM Z. é€‰æ‹©ibmcom/mysql-s390x é€‰æ‹©tags å¤åˆ¶5.7.34ç‰ˆæœ¬çš„ä¸‹è½½è·¯å¾„ï¼Œç²˜è´´åˆ°æœåŠ¡å™¨ä¸­å³å¯ä¸‹è½½ã€‚ ","date":"2022-01-04","objectID":"/%E4%B8%8D%E5%90%8C%E6%9E%B6%E6%9E%84%E5%B9%B3%E5%8F%B0%E4%B8%8Bdoker%E5%AE%98%E6%96%B9%E9%95%9C%E5%83%8F%E5%8C%85%E6%9F%A5%E6%89%BE%E8%AF%B4%E6%98%8E/:0:1","tags":["docker"],"title":"ä¸åŒæ¶æ„å¹³å°ä¸‹dokerå®˜æ–¹é•œåƒåŒ…æŸ¥æ‰¾è¯´æ˜","uri":"/%E4%B8%8D%E5%90%8C%E6%9E%B6%E6%9E%84%E5%B9%B3%E5%8F%B0%E4%B8%8Bdoker%E5%AE%98%E6%96%B9%E9%95%9C%E5%83%8F%E5%8C%85%E6%9F%A5%E6%89%BE%E8%AF%B4%E6%98%8E/"},{"categories":["æ•°æ®åº“"],"content":"mysqlä¸­å¼•ç”¨äº†ä¸€å¼ è¡¨æ¥å­˜å‚¨mysqlçš„ç”¨æˆ·ä¿¡æ¯ mysql.user ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:0","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"åŸºç¡€å­—æ®µ Hostï¼š è®¿é—®æ•°æ®åº“å®¢æˆ·ç«¯æœºå™¨çš„IPåœ°å€ã€‚â€™%â€™:é€šé…ç¬¦ï¼ŒåŒ¹é…æ‰€æœ‰çš„ipåœ°å€ Userï¼š ç”¨æˆ·åã€‚è¶…çº§ç®¡ç†å‘˜ä¸ºroot authentication_stringï¼š å¯†ç çš„åŠ å¯†å­—ç¬¦ä¸² è¦æ³¨æ„çš„æ˜¯ï¼Œmysqlæ˜¯é€šè¿‡ç”¨æˆ·åï¼ˆuserï¼‰å’Œå®¢æˆ·ç«¯ipï¼ˆhostï¼‰æ¥å”¯ä¸€ç¡®å®šä¸€ä¸ªç”¨æˆ·ã€‚å³ï¼Œå¯ä»¥è®¾ç½®åŒä¸€ä¸ªç”¨æˆ·ååœ¨ä¸åŒçš„å®¢æˆ·ç«¯ç™»é™†æ—¶çš„å¯†ç ä¸åŒï¼Œç™»é™†åçš„æƒé™ä¹Ÿä¸åŒã€‚é€šè¿‡æŸ¥çœ‹mysql.userçš„è¡¨ç»“æ„ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œhostå’Œuseræ˜¯ä½œä¸ºè”åˆä¸»é”®å­˜åœ¨çš„ã€‚ mysql\u003e desc mysql.user; +------------------------+-----------------------------------+------+-----+-----------------------+-------+ | Field | Type | Null | Key | Default | Extra | +------------------------+-----------------------------------+------+-----+-----------------------+-------+ | Host | char(60) | NO | PRI | | | | User | char(32) | NO | PRI | | | | Select_priv | enum('N','Y') | NO | | N | | | Insert_priv | enum('N','Y') | NO | | N | | | Update_priv | enum('N','Y') | NO | | N | | | Delete_priv | enum('N','Y') | NO | | N | | | Create_priv | enum('N','Y') | NO | | N | | | Drop_priv | enum('N','Y') | NO | | N | | | Reload_priv | enum('N','Y') | NO | | N | | | Shutdown_priv | enum('N','Y') | NO | | N | | | Process_priv | enum('N','Y') | NO | | N | | | File_priv | enum('N','Y') | NO | | N | | | Grant_priv | enum('N','Y') | NO | | N | | | References_priv | enum('N','Y') | NO | | N | | | Index_priv | enum('N','Y') | NO | | N | | | Alter_priv | enum('N','Y') | NO | | N | | | Show_db_priv | enum('N','Y') | NO | | N | | | Super_priv | enum('N','Y') | NO | | N | | | Create_tmp_table_priv | enum('N','Y') | NO | | N | | | Lock_tables_priv | enum('N','Y') | NO | | N | | | Execute_priv | enum('N','Y') | NO | | N | | | Repl_slave_priv | enum('N','Y') | NO | | N | | | Repl_client_priv | enum('N','Y') | NO | | N | | | Create_view_priv | enum('N','Y') | NO | | N | | | Show_view_priv | enum('N','Y') | NO | | N | | | Create_routine_priv | enum('N','Y') | NO | | N | | | Alter_routine_priv | enum('N','Y') | NO | | N | | | Create_user_priv | enum('N','Y') | NO | | N | | | Event_priv | enum('N','Y') | NO | | N | | | Trigger_priv | enum('N','Y') | NO | | N | | | Create_tablespace_priv | enum('N','Y') | NO | | N | | | ssl_type | enum('','ANY','X509','SPECIFIED') | NO | | | | | ssl_cipher | blob | NO | | NULL | | | x509_issuer | blob | NO | | NULL | | | x509_subject | blob | NO | | NULL | | | max_questions | int(11) unsigned | NO | | 0 | | | max_updates | int(11) unsigned | NO | | 0 | | | max_connections | int(11) unsigned | NO | | 0 | | | max_user_connections | int(11) unsigned | NO | | 0 | | | plugin | char(64) | NO | | mysql_native_password | | | authentication_string | text | YES | | NULL | | | password_expired | enum('N','Y') | NO | | N | | | password_last_changed | timestamp | YES | | NULL | | | password_lifetime | smallint(5) unsigned | YES | | NULL | | | account_locked | enum('N','Y') | NO | | N | | +------------------------+-----------------------------------+------+-----+-----------------------+-------+ ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:1","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"æƒé™å­—æ®µ Select_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥é€šè¿‡SELECTå‘½ä»¤é€‰æ‹©æ•°æ®ã€‚ Insert_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥é€šè¿‡INSERTå‘½ä»¤æ’å…¥æ•°æ®ã€‚ Update_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥é€šè¿‡UPDATEå‘½ä»¤ä¿®æ”¹ç°æœ‰æ•°æ®ã€‚ Delete_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥é€šè¿‡DELETEå‘½ä»¤åˆ é™¤ç°æœ‰æ•°æ®ã€‚ Create_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥åˆ›å»ºæ–°çš„æ•°æ®åº“å’Œè¡¨ã€‚ Drop_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥åˆ é™¤ç°æœ‰æ•°æ®åº“å’Œè¡¨ã€‚ Reload_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰§è¡Œåˆ·æ–°å’Œé‡æ–°åŠ è½½MySQLæ‰€ç”¨å„ç§å†…éƒ¨ç¼“å­˜çš„ç‰¹å®šå‘½ä»¤ï¼ŒåŒ…æ‹¬æ—¥å¿—ã€æƒé™ã€ä¸»æœºã€æŸ¥è¯¢å’Œè¡¨ã€‚ Shutdown_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥å…³é—­MySQLæœåŠ¡å™¨ã€‚åœ¨å°†æ­¤æƒé™æä¾›ç»™rootè´¦æˆ·ä¹‹å¤–çš„ä»»ä½•ç”¨æˆ·æ—¶ï¼Œéƒ½åº”å½“éå¸¸è°¨æ…ã€‚ Process_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥é€šè¿‡SHOW PROCESSLISTå‘½ä»¤æŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„è¿›ç¨‹ã€‚ File_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰§è¡ŒSELECT INTO OUTFILEå’ŒLOAD DATA INFILEå‘½ä»¤ã€‚ Grant_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥å°†å·²ç»æˆäºˆç»™è¯¥ç”¨æˆ·è‡ªå·±çš„æƒé™å†æˆäºˆå…¶ä»–ç”¨æˆ·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·å¯ä»¥æ’å…¥ã€é€‰æ‹©å’Œåˆ é™¤fooæ•°æ®åº“ä¸­çš„ä¿¡æ¯ï¼Œå¹¶ä¸”æˆäºˆäº†GRANTæƒé™ï¼Œåˆ™è¯¥ç”¨æˆ·å°±å¯ä»¥å°†å…¶ä»»ä½•æˆ–å…¨éƒ¨æƒé™æˆäºˆç³»ç»Ÿä¸­çš„ä»»ä½•å…¶ä»–ç”¨æˆ·ã€‚ References_privï¼š ç›®å‰åªæ˜¯æŸäº›æœªæ¥åŠŸèƒ½çš„å ä½ç¬¦ï¼›ç°åœ¨æ²¡æœ‰ä½œç”¨ã€‚ Index_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥åˆ›å»ºå’Œåˆ é™¤è¡¨ç´¢å¼•ã€‚ Alter_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥é‡å‘½åå’Œä¿®æ”¹è¡¨ç»“æ„ã€‚ Show_db_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æŸ¥çœ‹æœåŠ¡å™¨ä¸Šæ‰€æœ‰æ•°æ®åº“çš„åå­—ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ‹¥æœ‰è¶³å¤Ÿè®¿é—®æƒé™çš„æ•°æ®åº“ã€‚å¯ä»¥è€ƒè™‘å¯¹æ‰€æœ‰ç”¨æˆ·ç¦ç”¨è¿™ä¸ªæƒé™ï¼Œé™¤éæœ‰ç‰¹åˆ«ä¸å¯æŠ—æ‹’çš„åŸå› ã€‚ Super_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰§è¡ŒæŸäº›å¼ºå¤§çš„ç®¡ç†åŠŸèƒ½ï¼Œä¾‹å¦‚é€šè¿‡KILLå‘½ä»¤åˆ é™¤ç”¨æˆ·è¿›ç¨‹ï¼Œä½¿ç”¨SET GLOBALä¿®æ”¹å…¨å±€MySQLå˜é‡ï¼Œæ‰§è¡Œå…³äºå¤åˆ¶å’Œæ—¥å¿—çš„å„ç§å‘½ä»¤ã€‚ Create_tmp_table_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥åˆ›å»ºä¸´æ—¶è¡¨ã€‚ Lock_tables_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥ä½¿ç”¨LOCK TABLESå‘½ä»¤é˜»æ­¢å¯¹è¡¨çš„è®¿é—®/ä¿®æ”¹ã€‚ Execute_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ã€‚æ­¤æƒé™åªåœ¨MySQL 5.0åŠæ›´é«˜ç‰ˆæœ¬ä¸­æœ‰æ„ä¹‰ã€‚ Repl_slave_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥è¯»å–ç”¨äºç»´æŠ¤å¤åˆ¶æ•°æ®åº“ç¯å¢ƒçš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ã€‚æ­¤ç”¨æˆ·ä½äºä¸»ç³»ç»Ÿä¸­ï¼Œæœ‰åˆ©äºä¸»æœºå’Œå®¢æˆ·æœºä¹‹é—´çš„é€šä¿¡ã€‚ Repl_client_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥ç¡®å®šå¤åˆ¶ä»æœåŠ¡å™¨å’Œä¸»æœåŠ¡å™¨çš„ä½ç½®ã€‚ Create_view_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥åˆ›å»ºè§†å›¾ã€‚æ­¤æƒé™åªåœ¨MySQL 5.0åŠæ›´é«˜ç‰ˆæœ¬ä¸­æœ‰æ„ä¹‰ã€‚å…³äºè§†å›¾çš„æ›´å¤šä¿¡æ¯ï¼Œå‚è§ç¬¬34ç« ã€‚ Show_view_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æŸ¥çœ‹è§†å›¾æˆ–äº†è§£è§†å›¾å¦‚ä½•æ‰§è¡Œã€‚æ­¤æƒé™åªåœ¨MySQL 5.0åŠæ›´é«˜ç‰ˆæœ¬ä¸­æœ‰æ„ä¹‰ã€‚ Create_routine_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æ›´æ”¹æˆ–æ”¾å¼ƒå­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ã€‚æ­¤æƒé™æ˜¯åœ¨MySQL 5.0ä¸­å¼•å…¥çš„ã€‚ Alter_routine_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥ä¿®æ”¹æˆ–åˆ é™¤å­˜å‚¨å‡½æ•°åŠå‡½æ•°ã€‚æ­¤æƒé™æ˜¯åœ¨MySQL 5.0ä¸­å¼•å…¥çš„ã€‚ Create_user_privï¼š ç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰§è¡ŒCREATE USERå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤ç”¨äºåˆ›å»ºæ–°çš„MySQLè´¦æˆ·ã€‚ Event_privï¼š ç¡®å®šç”¨æˆ·èƒ½å¦åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤äº‹ä»¶ã€‚è¿™ä¸ªæƒé™æ˜¯MySQL 5.1.6æ–°å¢çš„ã€‚ Trigger_privï¼š ç¡®å®šç”¨æˆ·èƒ½å¦åˆ›å»ºå’Œåˆ é™¤è§¦å‘å™¨ï¼Œè¿™ä¸ªæƒé™æ˜¯MySQL 5.1.6æ–°å¢çš„ã€‚ ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:2","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"mysql.dbè¡¨ userè¡¨ä¸­çš„æ¯é¡¹æƒé™ä¸ºYçš„æ—¶å€™ï¼Œåˆ™ä»£è¡¨è¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨éƒ½æ‹¥æœ‰è¯¥æƒé™ã€‚ è€Œå¦‚æœæŸä¸ªç”¨æˆ·åªå¯¹å•ç‹¬çš„æŸä¸ªæ•°æ®åº“çš„æŸå¼ è¡¨æœ‰è¯¥æƒé™æ—¶ï¼Œåˆ™userè¡¨ä¸­è¯¥æƒé™å¯¹åº”çš„å­—æ®µä¸ºNï¼Œå¹¶åœ¨dbè¡¨ä¸­æ·»åŠ ä¸€æ¡è®°å½•ç”¨æ¥æ ‡è¯†æ­¤é¡¹æƒé™ã€‚ æµ‹è¯•å¤±è´¥ã€‚ç»™æŸä¸ªç”¨æˆ·æ·»åŠ äº†ä¸€ä¸ªæƒé™ï¼Œä½†æ˜¯mysql.dbä¸­å¹¶æ²¡æœ‰å¢åŠ è®°å½•ã€‚ ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:3","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"åŸºç¡€å‘½ä»¤ ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:4","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"åˆ›å»ºç”¨æˆ· create user 'username'@'host' identified by 'password'; (ä¸å»ºè®®ç”¨) å¦‚æœä¸å¡«hostï¼ˆcreate user 'username' identified by 'password';ï¼‰ï¼Œåˆ™é»˜è®¤ä¸º%:å³æ‰€æœ‰ipçš„å®¢æˆ·ç«¯å‡å¯è®¿é—®ã€‚ ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:5","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"èµ‹äºˆæƒé™ -- èµ‹äºˆå•ä¸ªæƒé™ grant all on database_name.table_name to 'username'@'host' [identified by 'password']; -- èµ‹äºˆå¤šä¸ªæƒé™ grant insert, select on database_name.table_name to 'username'@'host' [identified by 'password']; å¸¸è§æƒé™æœ‰ï¼šall, create, drop, insert, update, delete, selectç­‰ã€‚ å¦‚æœå¸¦ä¸Š[]é‡Œé¢çš„å†…åˆ™ç›¸å½“äºä¿®æ”¹æ­¤ç”¨æˆ·çš„å¯†ç ã€‚ è¿™é‡Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“ä¿®æ”¹å¯†ç æˆ–ä¿®æ”¹æƒé™æ—¶ï¼Œå¦‚æœæ­¤ç”¨æˆ·å·²ç»ç™»é™†ï¼Œåˆ™ä¸ä¼šç«‹åˆ»å—åˆ°æƒé™ä¿®æ”¹çš„å½±å“ï¼ˆè¿‡ä¸€æ®µæ—¶é—´ä»¥åä¼šä¸ä¼šå½±å“æš‚æ²¡åšæµ‹è¯•ã€‚ï¼‰ï¼Œè¿˜æ˜¯å¯ä»¥æ­£å¸¸çš„ä½¿ç”¨å·²ç»æ”¶å›çš„æƒé™ã€‚ ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:6","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"æ”¶å›æƒé™ -- æ”¶å›å•ä¸ªæƒé™ revoke all on database_name.table_name from 'username'@'host'; -- æ”¶å›å¤šä¸ªæƒé™ revoke select, insert on database_name.table_name from 'username'@'host'; ä¸èµ‹äºˆæƒé™ä¸ä¸€æ ·çš„æ˜¯ï¼Œæ”¶å›æƒé™æ—¶ä¸å…è®¸åŒæ—¶ä¿®æ”¹å¯†ç ï¼Œè€Œä¸”å°†to user æ”¹ä¸º from userã€‚ ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:7","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"åˆ é™¤ç”¨æˆ· drop user 'username'@'host'; ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:8","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"æŸ¥çœ‹æŸä¸ªç”¨æˆ·çš„æƒé™ show grants for 'username'@'host'; +---------------------------------------------------------------------+ | Grants for root@localhost | +---------------------------------------------------------------------+ | GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION | | GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION | +---------------------------------------------------------------------+ ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:9","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"æŸ¥çœ‹MYSQLæ•°æ®åº“ä¸­æ‰€æœ‰ç”¨æˆ· mysql\u003e SELECT DISTINCT CONCAT('User: ''',user,'''@''',host,''';') AS query FROM mysql.user; +------------------------------------+ | query | +------------------------------------+ | User: 'root'@'%'; | | User: 'mysql.session'@'localhost'; | | User: 'mysql.sys'@'localhost'; | | User: 'root'@'localhost'; | +------------------------------------+ 4 rows in set (0.00 sec) ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:10","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"æŸ¥çœ‹æ•°æ®åº“ä¸­å…·ä½“æŸä¸ªç”¨æˆ·çš„æƒé™ mysql\u003e show grants for 'root'@'%'; +-------------------------------------------------------------+ | Grants for root@% | +-------------------------------------------------------------+ | GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION | +-------------------------------------------------------------+ 1 row in set (0.00 sec) ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:11","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"æŸ¥çœ‹userè¡¨ä¸­æŸä¸ªç”¨æˆ·çš„å…·ä½“æƒé™ mysql\u003e select * from mysql.user where user='root' \\G; *************************** 1. row *************************** Host: localhost User: root Select_priv: Y Insert_priv: Y Update_priv: Y Delete_priv: Y Create_priv: Y Drop_priv: Y Reload_priv: Y Shutdown_priv: Y Process_priv: Y File_priv: Y Grant_priv: Y References_priv: Y Index_priv: Y Alter_priv: Y Show_db_priv: Y Super_priv: Y Create_tmp_table_priv: Y Lock_tables_priv: Y Execute_priv: Y Repl_slave_priv: Y Repl_client_priv: Y Create_view_priv: Y Show_view_priv: Y Create_routine_priv: Y Alter_routine_priv: Y Create_user_priv: Y Event_priv: Y Trigger_priv: Y Create_tablespace_priv: Y ssl_type: ssl_cipher: x509_issuer: x509_subject: max_questions: 0 max_updates: 0 max_connections: 0 max_user_connections: 0 plugin: mysql_native_password authentication_string: *064C811C8A9344D23DFC73BDBE590528C07A6FCC password_expired: N password_last_changed: 2022-07-26 13:03:51 password_lifetime: NULL account_locked: N ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:12","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"ä¿®æ”¹è´¦å·å¯†ç  -- ä¿®æ”¹å½“å‰ç™»å½•è´¦å·çš„å¯†ç  set password = password('pwd'); -- ä¿®æ”¹åˆ«çš„è´¦å·å¯†ç  set password for 'username'@'host' = password('pwd'); -- å¯ä»¥ä½¿ç”¨èµ‹äºˆæƒé™çš„æ–¹å¼ä¿®æ”¹å¯†ç ï¼ˆä¸Šæ–‡æåˆ°è¿‡ï¼‰ï¼Œç”¨æ­¤ç§æ–¹å¼æ—¶æœ€å¥½èµ‹äºˆçš„æ˜¯ç™»é™†æƒé™ï¼Œè¿™æ ·å¯ä»¥ä¸å½±å“è´¦å·å½“å‰çš„æƒé™ã€‚ grant usage on *.* to 'username'@'host' identified by 'pwd'; ","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:13","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"mysqlçš„å„ç§æƒé™ï¼ˆå…±27ç§ï¼‰ ï¼ˆä»¥ä¸‹æ“ä½œéƒ½æ˜¯ä»¥rootèº«ä»½ç™»é™†è¿›è¡Œgrantæˆæƒï¼Œä»¥p1@localhostèº«ä»½ç™»é™†æ‰§è¡Œå„ç§å‘½ä»¤ã€‚ï¼‰ usage è¿æ¥ï¼ˆç™»é™†ï¼‰æƒé™ï¼Œå»ºç«‹ä¸€ä¸ªç”¨æˆ·ï¼Œå°±ä¼šè‡ªåŠ¨æˆäºˆå…¶usageæƒé™ï¼ˆé»˜è®¤æˆäºˆï¼‰ã€‚ grant usage on *.* to 'p1'@'localhost' identified by '123'; è¯¥æƒé™åªèƒ½ç”¨äºæ•°æ®åº“ç™»é™†ï¼Œä¸èƒ½æ‰§è¡Œä»»ä½•æ“ä½œï¼›ä¸”usageæƒé™ä¸èƒ½è¢«å›æ”¶ï¼Œä¹Ÿå³REVOKEç”¨æˆ·å¹¶ä¸èƒ½åˆ é™¤ç”¨æˆ·ã€‚ select å¿…é¡»æœ‰selectçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨select table grant select on pyt.* to â€˜p1â€²@â€™localhostâ€™; select * from shop; create å¿…é¡»æœ‰createçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨create table grant create on pyt.* to â€˜p1â€²@â€™localhostâ€™; create routine å¿…é¡»å…·æœ‰create routineçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨{create | alter | drop} {procedure | function} grant create routine on pyt.* to â€˜p1â€²@â€™localhostâ€™; -- å½“æˆäºˆcreate routineæ—¶ï¼Œè‡ªåŠ¨æˆäºˆEXECUTE, ALTER ROUTINEæƒé™ç»™å®ƒçš„åˆ›å»ºè€…ï¼š show grants for â€˜p1â€²@â€™localhostâ€™; +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+ Grants for p1@localhost +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+ | GRANT USAGE ON *.* TO â€˜p1â€²@â€™localhostâ€™ IDENTIFIED BY PASSWORD â€˜*23AE809DDACAF96AF0FD78ED04B6A265E05AA257â€² | | GRANT SELECT, CREATE, CREATE ROUTINE ON `pyt`.* TO â€˜p1â€²@â€™localhostâ€™| | GRANT EXECUTE, ALTER ROUTINE ON PROCEDURE `pyt`.`pro_shop1` TO â€˜p1â€²@â€™localhostâ€™ | +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+ create temporary tables(æ³¨æ„è¿™é‡Œæ˜¯tablesï¼Œä¸æ˜¯table) å¿…é¡»æœ‰create temporary tablesçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨create temporary tables. grant create temporary tables on pyt.* to â€˜p1â€²@â€™localhostâ€™; [mysql@mydev ~]$ mysql -h localhost -u p1 -p pyt create temporary table tt1(id int); create view å¿…é¡»æœ‰create viewçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨create view grant create view on pyt.* to â€˜p1â€²@â€™localhostâ€™; create view v_shop as select price from shop; create user è¦ä½¿ç”¨CREATE USERï¼Œå¿…é¡»æ‹¥æœ‰mysqlæ•°æ®åº“çš„å…¨å±€CREATE USERæƒé™ï¼Œæˆ–æ‹¥æœ‰INSERTæƒé™ã€‚ grant create user on *.* to â€˜p1â€²@â€™localhostâ€™; -- ä¹Ÿå¯ä»¥ä½¿ç”¨ grant insert on *.* to p1@localhost; insert å¿…é¡»æœ‰insertçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨insert into â€¦â€¦ valuesâ€¦. alter å¿…é¡»æœ‰alterçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨alter table alter table shop modify dealer char(15); alter routine å¿…é¡»å…·æœ‰alter routineçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨{alter |drop} {procedure|function} grant alter routine on pyt.* to â€˜p1â€²@â€™ localhost â€˜; drop procedure pro_shop; revoke alter routine on pyt.* from â€˜p1â€²@â€™localhostâ€™; [mysql@mydev ~]$ mysql -h localhost -u p1 -p pyt drop procedure pro_shop; ERROR 1370 (42000): alter routine command denied to user â€˜p1â€²@â€™localhostâ€™ for routine â€˜pyt.pro_shopâ€™ update å¿…é¡»æœ‰updateçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨update table update shop set price=3.5 where article=0001 and dealer=â€™Aâ€™; delete å¿…é¡»æœ‰deleteçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨delete from â€¦.whereâ€¦.(åˆ é™¤è¡¨ä¸­çš„è®°å½•) drop å¿…é¡»æœ‰dropçš„æƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨drop database db_name; drop table tab_name; drop view vi_name; drop index in_name; show database é€šè¿‡show databaseåªèƒ½çœ‹åˆ°ä½ æ‹¥æœ‰çš„æŸäº›æƒé™çš„æ•°æ®åº“ï¼Œé™¤éä½ æ‹¥æœ‰å…¨å±€SHOW DATABASESæƒé™ã€‚ å¯¹äºp1@localhostç”¨æˆ·æ¥è¯´ï¼Œæ²¡æœ‰å¯¹mysqlæ•°æ®åº“çš„æƒé™ï¼Œæ‰€ä»¥ä»¥æ­¤èº«ä»½ç™»é™†æŸ¥è¯¢æ—¶ï¼Œæ— æ³•çœ‹åˆ°mysqlæ•°æ®åº“ï¼š show databases; +â€”â€”â€”â€”â€”â€”â€“+ | Database | +â€”â€”â€”â€”â€”â€”â€“+ | information_schema| | pyt | | test | +â€”â€”â€”â€”â€”â€”â€“+ show view å¿…é¡»æ‹¥æœ‰show viewæƒé™ï¼Œæ‰èƒ½æ‰§è¡Œshow create viewã€‚ grant show view on pyt.* to p1@localho show create view v_shop; index å¿…é¡»æ‹¥æœ‰indexæƒé™ï¼Œæ‰èƒ½æ‰§è¡Œ[create |drop] index grant index on pyt.* to p1@localhost; create index ix_shop on shop(article); drop index ix_shop on shop; excute æ‰§è¡Œå­˜åœ¨çš„Functions,Procedures call pro_shop1(0001,@a)ï¼› +â€”â€”â€”+ | article | +â€”â€”â€”+ | 0001 | | 0001 | +â€”â€”â€”+ select @a; +â€”â€”+ | @a | +â€”â€”+ | 2 | +â€”â€”+ lock tables å¿…é¡»æ‹¥æœ‰lock tablesæƒé™ï¼Œæ‰å¯ä»¥ä½¿ç”¨lock tables grant lock tables on pyt.* to p1@localhost; lock tables a1 read; unlock tables; references æœ‰äº†REFERENCESæƒé™ï¼Œç”¨æˆ·å°±å¯ä»¥å°†å…¶å®ƒè¡¨çš„ä¸€ä¸ªå­—æ®µä½œä¸ºæŸä¸€ä¸ªè¡¨çš„å¤–é”®çº¦æŸã€‚ reload å¿…é¡»æ‹¥æœ‰reloadæƒé™ï¼Œæ‰å¯ä»¥æ‰§è¡Œflush [tables | logs | privileges] grant reload on pyt.* to p1@localhost; ERROR 1221 (HY000): Incorrect usage of DB GRANT and GLOBAL PRIVILEGES grant reload on *.* to â€˜p1â€²@â€™localhostâ€™; flush tables; replication client æ‹¥æœ‰æ­¤æƒé™å¯ä»¥æŸ¥è¯¢master serverã€slave serverçŠ¶æ€ã€‚ show master status; ERROR 1227 (42000): Access denied; you need the SUPER,REPLICATION CLIENT privilege for this operation grant Replication client on *.* to p1@localhost; -- ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ grant super on *.* to p1@localhost; show master status; +â€”â€”â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”â€”â€”+ | File | Position | Binlog_Do_DB | Binlog_Ignore_DB | +â€”â€”â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”â€”â€”+ | mysql-bin.000006 | 2111 | | | +â€”â€”â€”â€”â€”â€”+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”â€”â€”â€”â€”+ show slave status; replication slave æ‹¥æœ‰æ­¤æƒé™å¯ä»¥æŸ¥çœ‹ä»æœåŠ¡å™¨ï¼Œä»ä¸»æœåŠ¡å™¨è¯»å–äºŒè¿›åˆ¶æ—¥å¿—ã€‚ show slave hosts; ERROR 1227 (42000): Access denied; you need the REPLICATION SLAVE privilege fo","date":"2022-01-03","objectID":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/:0:14","tags":["mysql"],"title":"mysqlçš„userè¡¨è¯¦è§£","uri":"/mysql%E7%9A%84user%E8%A1%A8%E8%AF%A6%E8%A7%A3/"},{"categories":["æ•°æ®åº“"],"content":"å¸¸è§å‘½ä»¤ è¿æ¥æœ¬åœ°æ•°æ®åº“ä¸è¿œç¨‹æ•°æ®åº“(10.4.xx.xx:3306) mysql -h localhost -u root -p123 mysql -h 10.4.xx.xx -P 3306 -u root -p æ˜¾ç¤ºæ•°æ®åº“åˆ—è¡¨ show databases; æ˜¾ç¤ºåº“ä¸­çš„æ•°æ®è¡¨ show tables; æ˜¾ç¤ºæ•°æ®è¡¨çš„ç»“æ„ describe è¡¨å; é»˜è®¤è¡¨ç»“æ„ç±»å‹ä¸ºMYISAM,å¹¶åœ¨/var/lib/mysql/abc ç›®å½•ä¸‹å»ºç«‹student.frm(è¡¨å®šä¹‰æ–‡ä»¶)ï¼Œstudent.MDY(æ•°æ®æ–‡ä»¶)ï¼Œstudent.MYI(ç´¢å¼•æ–‡ä»¶)ã€‚ å»ºåº“ create database åº“å; å»ºè¡¨ create table è¡¨å (å­—æ®µè®¾å®šåˆ—è¡¨); ä¾‹å¦‚ï¼š mysql\u003e create table test (id int(20)); åˆ åº“å’Œåˆ è¡¨ drop database åº“å; drop table è¡¨å; å°†è¡¨ä¸­è®°å½•æ¸…ç©º delete from è¡¨å; # å†…å®¹æ¸…ç©ºï¼Œè‡ªå¢idä¸ä¼šè¢«æ¸…æ‰ï¼Œè‡ªå¢idä¼šä¿ç•™ mysql\u003e truncate table users; # æ•°æ®åº“è¿”å›ï¼šâ€œQuery OK, 0 rows affected (0.04 sec)â€ #ï¼ˆæˆåŠŸè¿”å›0ï¼‰ï¼ˆè‡ªå¢idä¹Ÿä¸€åŒä¼šè¢«æ¸…æ‰) æ˜¾ç¤ºè¡¨ä¸­çš„è®°å½• select * from è¡¨å; ","date":"2022-01-03","objectID":"/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/:0:1","tags":["mysql"],"title":"mysqlå¸¸ç”¨å‘½ä»¤æ€»ç»“","uri":"/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/"},{"categories":["æ•°æ®åº“"],"content":"åº“çš„åŸºæœ¬æ“ä½œ åˆ›å»ºæ•°æ®åº“ mysql\u003e create database ceshi; è¿æ¥æ•°æ®åº“ mysql\u003e use ceshi; æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“ mysql\u003e select database(); å½“å‰æ•°æ®åº“åŒ…å«çš„è¡¨ä¿¡æ¯ mysql\u003e show tables; åˆ é™¤æ•°æ®åº“ mysql\u003e drop database ceshi; ","date":"2022-01-03","objectID":"/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/:0:2","tags":["mysql"],"title":"mysqlå¸¸ç”¨å‘½ä»¤æ€»ç»“","uri":"/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/"},{"categories":["æ•°æ®åº“"],"content":"è¡¨çš„åŸºæœ¬æ“ä½œ å‘½ä»¤ create table \u003cè¡¨å\u003e (\u003cå­—æ®µå 1\u003e \u003cç±»å‹ 1\u003e [,..\u003cå­—æ®µå n\u003e \u003cç±»å‹ n\u003e]); ä¾‹å¦‚ mysql\u003e create table Class( id int(4) not null primary key auto_increment, name varchar(25) not null, age int (4) not null default'0'); # default'0' è®¾ç½®é»˜è®¤å€¼ä¸º0 ,not null(ä¸èƒ½ä¸ºç©º) ,primary keyï¼ˆä¸»é”®ï¼‰,auto_incrementï¼ˆè‡ªå¢é•¿ï¼‰ è·å–è¡¨ç»“æ„ å‘½ä»¤ desc è¡¨åï¼Œæˆ–è€…show columns from è¡¨å ä¾‹å¦‚ mysql\u003e desc Class; mysql\u003e describe Class; mysql\u003e show columns from Class; æ’å…¥æ•°æ® å‘½ä»¤ insert into \u003cè¡¨å\u003e [( \u003cå­—æ®µå 1\u003e[,..\u003cå­—æ®µå n \u003e ])] values ( å€¼ 1 )[, ( å€¼ n )] ä¾‹å¦‚ mysql\u003e insert into Class values(1,'Wrry',26),(2,'ZJW',28); æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ® æŸ¥è¯¢æ‰€æœ‰è¡Œ mysql\u003e select * from Class; æŸ¥è¯¢å‰å‡ è¡Œæ•°æ® ä¾‹å¦‚:æŸ¥çœ‹è¡¨ Class ä¸­å‰ 3 è¡Œæ•°æ® mysql\u003e select * from Class limit 0,3; æˆ–è€… mysql\u003e select * from Class order by id limit 0,3; # order by id:ä»¥idæ’åº åˆ é™¤è¡¨ä¸­æ•°æ® å‘½ä»¤ delete from è¡¨å where è¡¨è¾¾å¼; ä¾‹å¦‚:åˆ é™¤è¡¨ Class ä¸­ç¼–å·ä¸º 6 çš„è®°å½• mysql\u003e delete from MyClass where id=6; ä¿®æ”¹è¡¨ä¸­æ•°æ® å‘½ä»¤ update è¡¨å set å­—æ®µ=æ–°å€¼,... where æ¡ä»¶; ä¾‹å¦‚ mysql\u003e update Class set name='AI' where id=1; åœ¨è¡¨ä¸­å¢åŠ å­—æ®µ å‘½ä»¤ alter table è¡¨å add å­—æ®µ ç±»å‹ å…¶ä»–; ä¾‹å¦‚:åœ¨è¡¨ Class ä¸­æ·»åŠ äº†ä¸€ä¸ªå­—æ®µ sex,ç±»å‹ä¸º varchar(25),é»˜è®¤å€¼ä¸º 0 mysql\u003e alter table Class add sex varchar(25) default '0'; æ›´æ”¹è¡¨å å‘½ä»¤ rename table åŸè¡¨å to æ–°è¡¨å; ä¾‹å¦‚:åœ¨è¡¨ Class åå­—æ›´æ”¹ä¸º MClass mysql\u003e rename table Class to MClass; å¤åˆ¶è¡¨ create table æ–°è¡¨å like åŸè¡¨åç§°; ä¾‹å¦‚ mysql\u003e create table Test like test; åˆ é™¤è¡¨ å‘½ä»¤:drop table \u003cè¡¨å\u003e ä¾‹å¦‚:åˆ é™¤è¡¨åä¸º MClass çš„è¡¨ mysql\u003e drop table MClass; æ›´å¤šæ“ä½œå‚è€ƒ ","date":"2022-01-03","objectID":"/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/:0:3","tags":["mysql"],"title":"mysqlå¸¸ç”¨å‘½ä»¤æ€»ç»“","uri":"/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/"},{"categories":["æ•°æ®åº“"],"content":"MysqlæŸ¥çœ‹è§¦å‘å™¨ è¿æ¥æ•°æ®åº“å¹¶è¿›å…¥åº“ use test; æŸ¥çœ‹å½“å‰åº“ä¸­æ‰€æœ‰è¡¨çš„è§¦å‘å™¨ mysql\u003e show triggers \\G; *************************** 1. row *************************** Trigger: trigupdate Event: UPDATE Table: account Statement: INSERT INTO myevent VALUES(1,'after update') Timing: AFTER Created: NULL sql_mode: Definer: root@localhost character_set_client: utf8 collation_connection: utf8_general_ci Database Collation: utf8_general_ci 1 row in set (0.00 sec) ERROR: No query specified è§¦å‘å™¨çš„åˆ›å»º æ–°å»ºè¡¨accountï¼Œè¡¨ä¸­æœ‰ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯ INT ç±»å‹çš„ accnum å’Œ DECIMAL ç±»å‹çš„ amountã€‚SQL è¯­å¥å’Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š mysql\u003e CREATE TABLE account( accnum INT(4), amount DECIMAL(10,2)); Query OK, 0 rows affected (0.49 sec) åˆ›å»ºä¸€ä¸ªåä¸º trigupdate çš„è§¦å‘å™¨ï¼Œæ¯æ¬¡ account è¡¨æ›´æ–°æ•°æ®ä¹‹åéƒ½å‘ myevent æ•°æ®è¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®ã€‚åˆ›å»ºæ•°æ®è¡¨ myevent çš„ SQL è¯­å¥å’Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š mysql\u003e CREATE TABLE myevent( id INT(11) DEFAULT NULL, evtname CHAR(20) DEFAULT NULL); Query OK, 0 rows affected (0.26 sec) åˆ›å»º trigupdate è§¦å‘å™¨çš„ SQL ä»£ç å¦‚ä¸‹ï¼š mysql\u003e CREATE TRIGGER trigupdate AFTER UPDATE ON account FOR EACH ROW INSERT INTO myevent VALUES(1,'after update'); Query OK, 0 rows affected (0.15 sec) ä½¿ç”¨ SHOW TRIGGERS è¯­å¥æŸ¥çœ‹è§¦å‘å™¨ï¼ˆåœ¨ SHOW TRIGGERS å‘½ä»¤åæ·»åŠ \\Gï¼Œè¿™æ ·æ˜¾ç¤ºä¿¡æ¯ä¼šæ¯”è¾ƒæœ‰æ¡ç†ï¼‰ï¼ŒSQL è¯­å¥å’Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š mysql\u003e show triggers\\G; *************************** 1. row *************************** Trigger: trigupdate Event: INSERT Table: account Statement: INSERT INTO myevent VALUES(1,'after insert') Timing: AFTER Created: NULL sql_mode: Definer: root@localhost character_set_client: utf8 collation_connection: utf8_general_ci Database Collation: utf8_general_ci 1 row in set (0.00 sec) ERROR: No query specified ç”±è¿è¡Œç»“æœå¯ä»¥çœ‹åˆ°è§¦å‘å™¨çš„åŸºæœ¬ä¿¡æ¯ã€‚å¯¹ä»¥ä¸Šæ˜¾ç¤ºä¿¡æ¯çš„è¯´æ˜å¦‚ä¸‹ï¼š Trigger è¡¨ç¤ºè§¦å‘å™¨çš„åç§°ï¼Œåœ¨è¿™é‡Œè§¦å‘å™¨çš„åç§°ä¸º trigupdateï¼› Event è¡¨ç¤ºæ¿€æ´»è§¦å‘å™¨çš„äº‹ä»¶ï¼Œè¿™é‡Œçš„è§¦å‘äº‹ä»¶ä¸ºæ›´æ–°æ“ä½œ UPDATEï¼› Table è¡¨ç¤ºæ¿€æ´»è§¦å‘å™¨çš„æ“ä½œå¯¹è±¡è¡¨ï¼Œè¿™é‡Œä¸º account è¡¨ï¼› Statement è¡¨ç¤ºè§¦å‘å™¨æ‰§è¡Œçš„æ“ä½œï¼Œè¿™é‡Œæ˜¯å‘ myevent æ•°æ®è¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼› Timing è¡¨ç¤ºè§¦å‘å™¨è§¦å‘çš„æ—¶é—´ï¼Œè¿™é‡Œä¸ºæ›´æ–°æ“ä½œä¹‹åï¼ˆAFTERï¼‰ï¼› è¿˜æœ‰ä¸€äº›å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦å‘å™¨çš„åˆ›å»ºæ—¶é—´ã€SQL çš„æ¨¡å¼ã€è§¦å‘å™¨çš„å®šä¹‰è´¦æˆ·å’Œå­—ç¬¦é›†ç­‰ï¼Œè¿™é‡Œä¸å†ä¸€ä¸€ä»‹ç»ã€‚ SHOW TRIGGERS è¯­å¥ç”¨æ¥æŸ¥çœ‹å½“å‰åˆ›å»ºçš„æ‰€æœ‰è§¦å‘å™¨çš„ä¿¡æ¯ã€‚å› ä¸ºè¯¥è¯­å¥æ— æ³•æŸ¥è¯¢æŒ‡å®šçš„è§¦å‘å™¨ï¼Œæ‰€ä»¥åœ¨è§¦å‘å™¨è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¯¥è¯­å¥ä¼šå¾ˆæ–¹ä¾¿ã€‚å¦‚æœè¦æŸ¥çœ‹ç‰¹å®šè§¦å‘å™¨çš„ä¿¡æ¯æˆ–è€…æ•°æ®åº“ä¸­è§¦å‘å™¨è¾ƒå¤šæ—¶ï¼Œå¯ä»¥ç›´æ¥ä» information_schema æ•°æ®åº“ä¸­çš„ triggers æ•°æ®è¡¨ä¸­æŸ¥æ‰¾ã€‚ åœ¨triggersè¡¨ä¸­æŸ¥çœ‹è§¦å‘å™¨ä¿¡æ¯ åœ¨ MySQL ä¸­ï¼Œæ‰€æœ‰è§¦å‘å™¨çš„ä¿¡æ¯éƒ½å­˜åœ¨ information_schema æ•°æ®åº“çš„ triggers è¡¨ä¸­ï¼Œå¯ä»¥é€šè¿‡æŸ¥è¯¢å‘½ä»¤ SELECT æ¥æŸ¥çœ‹ï¼Œå…·ä½“çš„è¯­æ³•å¦‚ä¸‹ï¼š SELECT * FROM information_schema.triggers WHERE trigger_name= 'è§¦å‘å™¨å'; å…¶ä¸­ï¼Œ'è§¦å‘å™¨å'ç”¨æ¥æŒ‡å®šè¦æŸ¥çœ‹çš„è§¦å‘å™¨çš„åç§°ï¼Œéœ€è¦ç”¨å•å¼•å·å¼•èµ·æ¥ã€‚è¿™ç§æ–¹å¼å¯ä»¥æŸ¥è¯¢æŒ‡å®šçš„è§¦å‘å™¨ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€çµæ´»ã€‚ ä¸‹é¢ä½¿ç”¨ SELECT å‘½ä»¤æŸ¥çœ‹ trigupdate è§¦å‘å™¨ï¼ŒSQL è¯­å¥å¦‚ä¸‹ï¼š SELECT * FROM information_schema.triggers WHERE TRIGGER_NAME= 'trigupdate'\\G; ä¸Šè¿°å‘½ä»¤é€šè¿‡ WHERE æ¥æŒ‡å®šéœ€è¦æŸ¥çœ‹çš„è§¦å‘å™¨çš„åç§°ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š mysql\u003e SELECT * FROM information_schema.triggers WHERE TRIGGER_NAME= 'trigupdate'\\G; *************************** 1. row *************************** TRIGGER_CATALOG: def TRIGGER_SCHEMA: test TRIGGER_NAME: trigupdate EVENT_MANIPULATION: INSERT EVENT_OBJECT_CATALOG: def EVENT_OBJECT_SCHEMA: test EVENT_OBJECT_TABLE: account ACTION_ORDER: 0 ACTION_CONDITION: NULL ACTION_STATEMENT: INSERT INTO myevent VALUES(1,'after insert') ACTION_ORIENTATION: ROW ACTION_TIMING: AFTER ACTION_REFERENCE_OLD_TABLE: NULL ACTION_REFERENCE_NEW_TABLE: NULL ACTION_REFERENCE_OLD_ROW: OLD ACTION_REFERENCE_NEW_ROW: NEW CREATED: NULL SQL_MODE: DEFINER: root@localhost CHARACTER_SET_CLIENT: utf8 COLLATION_CONNECTION: utf8_general_ci DATABASE_COLLATION: utf8_general_ci 1 row in set (0.01 sec) ç”±è¿è¡Œç»“æœå¯ä»¥çœ‹åˆ°è§¦å‘å™¨çš„è¯¦ç»†ä¿¡æ¯ã€‚å¯¹ä»¥ä¸Šæ˜¾ç¤ºä¿¡æ¯çš„è¯´æ˜å¦‚ä¸‹ï¼š TRIGGER_SCHEMA è¡¨ç¤ºè§¦å‘å™¨æ‰€åœ¨çš„æ•°æ®åº“ï¼› TRIGGER_NAME è¡¨ç¤ºè§¦å‘å™¨çš„åç§°ï¼› EVENT_OBJECT_TABLE è¡¨ç¤ºåœ¨å“ªä¸ªæ•°æ®è¡¨ä¸Šè§¦å‘ï¼› ACTION_STATEMENT è¡¨ç¤ºè§¦å‘å™¨è§¦å‘çš„æ—¶å€™æ‰§è¡Œçš„å…·ä½“æ“ä½œï¼› ACTION_ORIENTATION çš„å€¼ä¸º ROWï¼Œè¡¨ç¤ºåœ¨æ¯æ¡è®°å½•ä¸Šéƒ½è§¦å‘ï¼› ACTION_TIMING è¡¨ç¤ºè§¦å‘çš„æ—¶åˆ»æ˜¯ AFTERï¼› è¿˜æœ‰ä¸€äº›å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦å‘å™¨çš„åˆ›å»ºæ—¶é—´ã€SQL çš„æ¨¡å¼ã€è§¦å‘å™¨çš„å®šä¹‰è´¦æˆ·å’Œå­—ç¬¦é›†ç­‰ï¼Œè¿™é‡Œä¸å†ä¸€ä¸€ä»‹ç»ã€‚ ä¸Šè¿° SQL è¯­å¥ä¹Ÿå¯ä»¥ä¸æŒ‡å®šè§¦å‘å™¨åç§°ï¼Œè¿™æ ·å°†æŸ¥çœ‹æ‰€æœ‰çš„è§¦å‘å™¨ï¼ŒSQL è¯­å¥å¦‚ä¸‹ï¼š SELECT * FROM information_schema.triggers \\G; è¿™ä¸ªè¯­å¥ä¼šæ˜¾ç¤º triggers æ•°æ®è¡¨ä¸­æ‰€æœ‰çš„è§¦å‘å™¨ä¿¡æ¯ã€‚ ","date":"2022-01-03","objectID":"/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/:0:4","tags":["mysql"],"title":"mysqlå¸¸ç”¨å‘½ä»¤æ€»ç»“","uri":"/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/"},{"categories":["æ•°æ®åº“"],"content":"å®éªŒç¯å¢ƒ [root@hdss7-11 ~]# uname -r 3.10.0-1062.el7.x86_64 [root@hdss7-11 ~]# cat /etc/redhat-release CentOS Linux release 7.7.1908 (Core) [root@hdss7-11 ~]# master 10.4.7.11 slave1 10.4.7.12 slave2 10.4.7.21 ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:1","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"å®‰è£…mysql5.7 æŸ¥è¯¢å¹¶åˆ é™¤æ—§çš„MySQL(æ²¡æœ‰å¯ä»¥å¿½ç•¥) [root@hdss7-11 ~]# rpm -qa |grep mysql php-mysql-5.4.16-48.el7.x86_64 mysql57-community-release-el7-9.noarch [root@hdss7-11 ~]# rpm -e php-mysql-5.4.16-48.el7.x86_64 ä¸‹è½½MySQLæº [root@hdss7-11 ~]# wget https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm repoçš„å®‰è£… [root@hdss7-11 ~]# rpm -ivh mysql57-community-release-el7-9.noarch.rpm warning: mysql57-community-release-el7-9.noarch.rpm: Header V3 DSA/SHA1 Signature, key ID 5072e1f5: NOKEY Preparing... ################################# [100%] Updating / installing... 1:mysql57-community-release-el7-9 ################################# [100%] å¼€å§‹å®‰è£…MySQL yum -y install mysql-community-server å¯åŠ¨mysqlå¹¶æŸ¥çœ‹çŠ¶æ€ systemctl start mysqld.service systemctl status mysqld.service â— mysqld.service - MySQL Server Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled) Active: active (running) since Mon 2022-01-03 18:12:46 CST; 15s ago Docs: man:mysqld(8) http://dev.mysql.com/doc/refman/en/using-systemd.html Process: 3241 ExecStart=/usr/sbin/mysqld â€“daemonize â€“pid-file=/var/run/mysqld/mysqld.pid $MYSQLD_OPTS (code=exited, status=0/SUCCESS) Process: 3187 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS) Main PID: 3244 (mysqld) CGroup: /system.slice/mysqld.service â””â”€3244 /usr/sbin/mysqld â€“daemonize â€“pid-file=/var/run/mâ€¦ Jan 03 18:12:41 hdss7-11.host.com systemd[1]: Starting MySQL Serverâ€¦ Jan 03 18:12:46 hdss7-11.host.com systemd[1]: Started MySQL Server. Hint: Some lines were ellipsized, use -l to show in full. æŸ¥çœ‹ç‰ˆæœ¬ mysql -V mysql Ver 14.14 Distrib 5.7.36, for Linux (x86_64) using EditLine wrapper æŸ¥æ‰¾ç³»ç»Ÿé»˜è®¤å¯†ç  cd /var/log grep -e \"password\" mysqld.log A temporary password is generated for root@localhost: kaNNUw-2y,Gc è®¾ç½®æ–°å¯†ç ï¼Œå¯†ç ä¿®æ”¹ä¸ºIThaipeng123. mysql -uroot -p è¾“å…¥å¯†ç kaNNUw-2y,Gc mysql\u003e alter user 'root'@'localhost' identified by 'IThaipeng123.'; Query OK, 0 rows affected (0.01 sec) å¦‚æœæœ‰ä»¥ä¸‹æŠ¥é”™è¯´æ˜å¯†ç å¼ºåº¦ä¸å¤Ÿï¼Œéœ€è¦åŠ ç‰¹æ®Šå­—ç¬¦ã€‚ mysql\u003e alter user â€˜rootâ€™@â€™localhostâ€™ identified by â€˜IThaipeng123â€™; ERROR 1819 (HY000): Your password does not satisfy the current policy requirements æ³¨æ„ï¼šä¸‰å°æœåŠ¡å™¨å®‰è£…æ–¹æ³•ç›¸åŒï¼Œè¿™é‡Œåªç»™å‡ºä¸€å°çš„è¯´æ˜ã€‚ ä¸‰å°MySQLæ­å»ºå¥½ä¹‹åï¼Œéœ€è¦æŠŠæ—¶é—´åŒæ­¥å¼€å¯ï¼Œé˜²ç«å¢™å…³é—­ NTPé…ç½® NTPæœåŠ¡ç«¯ï¼š10.4.7.11 NTPå®¢æˆ·ç«¯ï¼š10.4.7.12 10.4.7.21 å®‰è£…ntpæœåŠ¡ï¼ˆä¸‰å°éƒ½éœ€å®‰è£…ï¼‰ yum install -y ntp æŸ¥çœ‹ntpå®‰è£…åŒ… [root@hdss7-11 ~]# rpm -qa |grep ntp ntp-4.2.6p5-29.el7.centos.2.x86_64 ntpdate-4.2.6p5-29.el7.centos.2.x86_64 7.11ä¸Šä¿®æ”¹NTPé…ç½®æ–‡ä»¶ vim /etc/ntp.conf æŠŠé…ç½®æ–‡ä»¶ä¸‹é¢å››è¡Œæ³¨é‡Šæ‰ï¼š server 0.centos.pool.ntp.org iburst server 1.centos.pool.ntp.org iburst server 2.centos.pool.ntp.org iburst server 3.centos.pool.ntp.org iburst ç„¶ååœ¨ä¸‹é¢æ·»åŠ è¿™å‡ è¡Œï¼š server 0.cn.pool.ntp.org iburst server 1.cn.pool.ntp.org iburst server 2.cn.pool.ntp.org iburst server 3.cn.pool.ntp.org iburst å¯åŠ¨ntpæœåŠ¡ï¼Œå¹¶å¼€æœºè‡ªå¯ systemctl start ntpd systemctl enable ntpd æŸ¥çœ‹ntpæ˜¯å¦åŒæ­¥ [root@hdss7-11 ~]# ntpq -p remote refid st t when poll reach delay offset jitter ============================================================================== ntp5.flashdance 194.58.202.20 2 u 1 64 1 318.796 49.178 1.689 time.cloudflare 10.4.3.52 3 u 2 64 1 183.991 28.217 4.578 ntp6.flashdance 194.58.202.148 2 u 1 64 1 331.954 46.528 5.128 139.199.214.202 100.122.36.196 2 u 2 64 1 72.218 10.343 0.000 é˜²ç«å¢™å¼€å¯ntpé»˜è®¤ç«¯å£udp123(å¯é€‰ï¼Œå¦‚æœæ²¡å¼€å¯é˜²ç«å¢™åˆ™ä¸ç”¨æ“ä½œæ­¤æ­¥) [root@hdss7-11 ~]# firewall-cmd --permanent --zone=public --add-port=123/udp success [root@hdss7-11 ~]# firewall-cmd --reload success NTP å®¢æˆ·ç«¯é…ç½® 7.12 7.21 ä¸Šä¿®æ”¹ntpé…ç½®æ–‡ä»¶ vim /etc/ntp.conf #é…ç½®å…è®¸NTP Serveræ—¶é—´æœåŠ¡å™¨ä¸»åŠ¨ä¿®æ”¹æœ¬æœºçš„æ—¶é—´ restrict 10.4.7.11 nomodify notrap noquery #æ³¨é‡Šæ‰å…¶ä»–æ—¶é—´æœåŠ¡å™¨ #server 0.centos.pool.ntp.org iburst #server 1.centos.pool.ntp.org iburst #server 2.centos.pool.ntp.org iburst #server 3.centos.pool.ntp.org iburst #é…ç½®æ—¶é—´æœåŠ¡å™¨ä¸ºæœ¬åœ°æ­å»ºçš„NTP ServeræœåŠ¡å™¨ server 10.4.7.11 åŒæ­¥ä¸»æœåŠ¡å™¨(7.12 7.21 ä¸Šæ“ä½œï¼‰ [root@hdss7-21 ~]# ntpdate -u 10.4.7.11 3 Jan 10:53:42 ntpdate[6675]: adjust time server 10.4.7.11 offset 0.015245 sec æŸ¥çœ‹NTPåŒæ­¥çŠ¶æ€ [root@hdss7-21 ~]# ntpq -p remote refid st t when poll reach delay offset jitter ============================================================================== 10.4.7.11 139.199.21","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:2","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"é…ç½®MySQL masterä¸»æœåŠ¡å™¨ åœ¨/etc/my.cnf ä¸­ä¿®æ”¹æˆ–è€…å¢åŠ ä»¥ä¸‹å†…å®¹ [root@hdss7-11 ~]# tail -n 3 /etc/my.cnf server-id = 11 log-bin=master-bin log-slave-updates=true é‡å¯mysqlæœåŠ¡ systemctl restart mysqld ç™»å½•MySQLç¨‹åºï¼Œç»™æœåŠ¡å™¨æˆæƒ mysql -uroot -p è¾“å…¥å¯†ç  mysql\u003egrant replication slave on *.* to 'myslave'@'10.4.7.%' identified by 'Haipengv123456?'; Query OK, 0 rows affected, 1 warning (0.00 sec) mysql\u003e flush privileges; Query OK, 0 rows affected (0.00 sec) mysql\u003e show master status; +-------------------+----------+--------------+------------------+-------------------+ | File | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set | +-------------------+----------+--------------+------------------+-------------------+ | master-bin.000001 | 599 | | | | +-------------------+----------+--------------+------------------+-------------------+ 1 row in set (0.00 sec) fileåˆ—æ˜¾ç¤ºçš„æ—¥å¿—åï¼Œposition åˆ—æ˜¾ç¤ºåç§»é‡ã€‚ ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:3","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"é…ç½®ä»æœåŠ¡å™¨ 7-12 server-id = 22 7-21 server-id = 23 åœ¨/etc/my.cnf ä¸­ä¿®æ”¹æˆ–è€…å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š [root@hdss7-12 ~]# tail -n 3 /etc/my.cnf server-id = 22 ## è¿™é‡Œçš„IDä¸èƒ½ä¸ä¸»æœåŠ¡å™¨ç›¸åŒï¼Œä¹Ÿä¸èƒ½å’Œå…¶ä»–ä»æœåŠ¡å™¨ç›¸åŒ relay-log=relay-log-bin ## ä»ä¸»æœåŠ¡å™¨ä¸ŠåŒæ­¥æ—¥å¿—åˆ°æœ¬åœ° relay-log-index=slave-relay-bin.index ## å®šä¹‰relay-logçš„ä½ç½®å’Œåç§° é‡å¯ä»æœåŠ¡å™¨çš„MySQL ç™»å½•mysql # mysql -uroot -p Enter password: é…ç½®åŒæ­¥ æ ¹æ®ä¸»æœåŠ¡å™¨çš„ç»“æœæ¥æ›´æ”¹ä¸‹é¢çš„master_log_file å’Œmaster_log_post çš„å‚æ•° mysql\u003e change master to master_host='10.4.7.11',master_user='myslave',master_password='Haipengv123456?',master_log_file='master-bin.000001',master_log_pos=599; Query OK, 0 rows affected, 2 warnings (0.02 sec) å¯åŠ¨åŒæ­¥ mysql\u003e start slave; Query OK, 0 rows affected (0.35 sec) mysql\u003e æŸ¥çœ‹slaveç¡®ä¿ä¸¤ä¸ªå€¼éƒ½ä¸ºyes mysql\u003e show slave status \\G *************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: 10.4.7.11 Master_User: myslave Master_Port: 3306 Connect_Retry: 60 Master_Log_File: master-bin.000001 Read_Master_Log_Pos: 599 Relay_Log_File: relay-log-bin.000002 Relay_Log_Pos: 321 Relay_Master_Log_File: master-bin.000001 Slave_IO_Running: Yes Slave_SQL_Running: Yes ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:4","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"éªŒè¯ä¸»ä»å¤åˆ¶ç»“æœ åœ¨ä¸»æœåŠ¡å™¨ä¸Šåˆ›å»ºæ•°æ®åº“ 10.4.7.11 ä¸»æœåŠ¡å™¨ mysql\u003e create database db_test; Query OK, 1 row affected (0.00 sec) æŸ¥çœ‹ä¸»ä»æœåŠ¡å™¨çš„æ•°æ®åº“æ˜¯å¦åŒæ­¥ ä¸»æœåŠ¡å™¨ï¼š mysql\u003e show databases; +--------------------+ | Database | +--------------------+ | information_schema | | db_test | | mysql | | performance_schema | | sys | +--------------------+ 5 rows in set (0.00 sec) slave1 mysql\u003e show databases; +--------------------+ | Database | +--------------------+ | information_schema | | db_test | | mysql | | performance_schema | | sys | +--------------------+ 5 rows in set (0.00 sec) slave2 mysql\u003e show databases; +--------------------+ | Database | +--------------------+ | information_schema | | db_test | | mysql | | performance_schema | | sys | +--------------------+ 5 rows in set (0.00 sec) ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:5","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"æ‹“å±•server-idçš„ç”¨é€” server-idç”¨äºæ ‡è¯†æ•°æ®åº“å®ä¾‹ï¼Œé˜²æ­¢åœ¨é“¾å¼ä¸»ä»ã€å¤šä¸»å¤šä»æ‹“æ‰‘ä¸­å¯¼è‡´SQLè¯­å¥çš„æ— é™å¾ªç¯ï¼š æ ‡è®°binlog eventçš„æºå®ä¾‹ è¿‡æ»¤ä¸»åº“binlogï¼Œå½“å‘ç°server-idç›¸åŒæ—¶ï¼Œè·³è¿‡è¯¥eventæ‰§è¡Œï¼Œé¿å…æ— é™å¾ªç¯æ‰§è¡Œã€‚ å¦‚æœè®¾ç½®äº†replicate-same-server-id=1ï¼Œåˆ™æ‰§è¡Œæ‰€æœ‰eventï¼Œä½†æœ‰å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯æ‰§è¡ŒSQLè¯­å¥ã€‚ æˆ‘ä»¬ç”¨ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜server-idä¸ºä»€ä¹ˆä¸è¦é‡å¤ï¼š ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:6","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"å½“ä¸»åº“å’Œå¤‡åº“server-idé‡å¤æ—¶ ç”±äºé»˜è®¤æƒ…å†µreplicate-same-server-id=0ï¼Œå› æ­¤å¤‡åº“ä¼šè·³è¿‡æ‰€æœ‰ä¸»åº“åŒæ­¥çš„æ•°æ®ï¼Œå¯¼è‡´ä¸»ä»æ•°æ®çš„ä¸ä¸€è‡´ã€‚ ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:7","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"å½“ä¸¤ä¸ªå¤‡åº“server-idé‡å¤æ—¶ ä¼šå¯¼è‡´ä»åº“è·Ÿä¸»åº“çš„è¿æ¥æ—¶æ–­æ—¶è¿ï¼Œäº§ç”Ÿå¤§é‡å¼‚å¸¸ã€‚æ ¹æ®MySQLçš„è®¾è®¡ï¼Œä¸»åº“å’Œä»åº“é€šè¿‡äº‹ä»¶æœºåˆ¶è¿›è¡Œè¿æ¥å’ŒåŒæ­¥ï¼Œå½“æ–°çš„è¿æ¥åˆ°æ¥æ—¶ï¼Œå¦‚æœå‘ç°server-idç›¸åŒï¼Œä¸»åº“ä¼šæ–­å¼€ä¹‹å‰çš„è¿æ¥å¹¶é‡æ–°æ³¨å†Œæ–°è¿æ¥ã€‚å½“Aåº“è¿æ¥ä¸Šä¸»åº“æ—¶ï¼Œæ­¤æ—¶Båº“è¿æ¥åˆ°æ¥ï¼Œä¼šæ–­å¼€Aåº“è¿æ¥ï¼ŒAåº“å†è¿›è¡Œé‡è¿ï¼Œå‘¨è€Œå¤å§‹å¯¼è‡´å¤§é‡å¼‚å¸¸ä¿¡æ¯ã€‚ ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:8","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"ç”Ÿæˆserver-idçš„è§„åˆ™ æ—¢ç„¶server-idä¸èƒ½ç›¸åŒï¼Œè€Œå½“æˆ‘ä»¬æœ‰10ä¸ªå®ä¾‹æ—¶ï¼Œæ€ä¹ˆä¿è¯æ¯ä¸ªéƒ½ä¸åŒå‘¢ï¼Ÿæœ‰å‡ ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š éšæœºæ•° æ—¶é—´æˆ³ IPåœ°å€+ç«¯å£ åœ¨ç®¡ç†ä¸­å¿ƒé›†ä¸­åˆ†é…ï¼Œç”Ÿæˆè‡ªå¢ID ä¸Šé¢çš„è¿™äº›æ–¹æ³•éƒ½å¯ä»¥ï¼Œä½†æ˜¯æ³¨æ„ä¸è¦è¶…è¿‡äº†æœ€å¤§å€¼2^32-1ï¼ŒåŒæ—¶å€¼æœ€å¥½\u003e2ã€‚æˆ‘é‡‡ç”¨çš„æ–¹æ³•æ˜¯IPåœ°å€åä¸¤ä½+æœ¬æœºMySQLå®ä¾‹åºå·ï¼Œä½†å¦‚æœæ˜¯é€šè¿‡dockeræ¥è¿›è¡Œç®¡ç†å¤šå®ä¾‹æ—¶ï¼Œè¿™ä¸ªæ€ä¹ˆç”Ÿæˆå¤§å®¶å¯ä»¥æƒ³ä¸‹æœ‰æ²¡æœ‰ä»€ä¹ˆä¼˜ç¾çš„è§£å†³æ–¹æ¡ˆã€‚ ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:0:9","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"server-uuidé…ç½® MySQLæœåŠ¡ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶ç”Ÿæˆserver-uuidé…ç½®ï¼š è¯»å–${data_dir}/auto.cnfæ–‡ä»¶ä¸­çš„UUID å¦‚æœä¸å­˜åœ¨ï¼Œè‡ªåŠ¨åˆ›å»ºæ–‡ä»¶å’Œç”Ÿæˆæ–°çš„UUIDå¹¶è¯»å– shell\u003e cat ~/mysql/data/auto.cnf [auto] server-uuid=fd5d03bc-cfde-11e9-ae59-48d539355108 è¿™ä¸ªauto.cnfé…ç½®é£æ ¼ç±»ä¼¼äºmy.cnfï¼Œä½†è¿™ä¸ªæ–‡ä»¶åªåŒ…å«ä¸€ä¸ªautoé…ç½®å—å’Œä¸€è¡Œserver-uuidé…ç½®ã€‚å®ƒæ˜¯è‡ªåŠ¨åˆ›å»ºçš„ï¼Œå› æ­¤ä¸è¦ä¿®æ”¹å®ƒçš„å†…å®¹ã€‚ åœ¨ä¸»ä»æ‹“æ‰‘ä¸­ï¼Œä¸»ä»å¯ä»¥çŸ¥é“äº’ç›¸çš„UUIDï¼Œåœ¨ä¸»æœºä¸Šä½¿ç”¨show slave hostsï¼Œåœ¨ä»æœºä¸Šä½¿ç”¨show slave statusæŸ¥çœ‹Master_UUIDå­—æ®µã€‚ server-uuidå‚æ•°å¹¶ä¸èƒ½å–ä»£server-idï¼Œä»–ä»¬æœ‰ä¸åŒçš„ä½œç”¨ã€‚å½“ä¸»ä»åŒæ­¥æ—¶å¦‚æœä¸»ä»å®ä¾‹çš„server-uuidç›¸åŒä¼šæŠ¥é”™é€€å‡ºï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®replicate-same-server-id=1æ¥é¿å…æŠ¥é”™ï¼ˆä¸æ¨èï¼‰ã€‚ ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:1:0","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["æ•°æ®åº“"],"content":"å‚è€ƒèµ„æ–™ å‚è€ƒ ","date":"2022-01-03","objectID":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/:1:1","tags":["mysql"],"title":"mysqlä¸»ä»æ¶æ„","uri":"/mysql%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"},{"categories":["å·¥å…·"],"content":"nginx 1.16.1 å®‰è£…ä½¿ç”¨è¯´æ˜ 1.åˆ›å»ºç›®å½• mkdir -p /var/temp/nginx ä¸‹è½½ï¼š https://nginx.org/en/download.html è§£å‹ tar -zxvf nginx-1.16.1.tar.gz å®‰è£…ç¼–è¯‘ä¾èµ–åŒ…ï¼š yum install -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel 2.è¿›å…¥nginx-1.16.1 ç¼–è¯‘å‚æ•° ./configure \\ --prefix=/usr/local/nginx \\ --pid-path=/var/run/nginx/nginx.pid \\ --lock-path=/var/lock/nginx.lock \\ --error-log-path=/var/log/nginx/error.log \\ --http-log-path=/var/log/nginx/access.log \\ --with-http_gzip_static_module \\ --http-client-body-temp-path=/var/temp/nginx/client \\ --http-proxy-temp-path=/var/temp/nginx/proxy \\ --http-fastcgi-temp-path=/var/temp/nginx/fastcgi \\ --http-uwsgi-temp-path=/var/temp/nginx/uwsgi \\ --http-scgi-temp-path=/var/temp/nginx/scgi https://nginx.org/en/download.html ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:1:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"config ç¼–è¯‘å‚æ•° nginx1.16ç¼–è¯‘å®‰è£…configureå‚æ•°ï¼š [root@363ee3055cf0 nginx-1.16.1]# ./configure --help --help print this message æ‰“å°å¸®åŠ©ä¿¡æ¯ --prefix=PATH set installation prefix è®¾ç½®å®‰è£…ç›®å½• --sbin-path=PATH set nginx binary pathname è®¾ç½®sbinè·¯å¾„ --modules-path=PATH set modules path è®¾ç½®æ¨¡å—è·¯å¾„ --conf-path=PATH set nginx.conf pathname è®¾ç½®é…ç½®æ–‡ä»¶è·¯å¾„ --error-log-path=PATH set error log pathname è®¾ç½®é”™è¯¯æ—¥å¿—çš„è·¯å¾„ --pid-path=PATH set nginx.pid pathname è®¾ç½®pidè·¯å¾„ --lock-path=PATH set nginx.lock pathname è®¾ç½®é”è·¯å¾„ --user=USER set non-privileged user for è®¾ç½®ç”¨æˆ· worker processes --group=GROUP set non-privileged group for è®¾ç½®ç»„ worker processes --build=NAME set build name è®¾ç½®æ„å»ºå --builddir=DIR set build directory è®¾ç½®æ„å»ºæ–‡ä»¶å¤¹ --with-select_module enable select module å¼€å¯selectæ¨¡å— --without-select_module disable select moduleå…³é—­ --with-poll_module enable poll module --without-poll_module disable poll module --with-threads enable thread pool support --with-file-aio enable file AIO support --with-http_ssl_module enable ngx_http_ssl_module --with-http_v2_module enable ngx_http_v2_module --with-http_realip_module enable ngx_http_realip_module --with-http_addition_module enable ngx_http_addition_module --with-http_xslt_module enable ngx_http_xslt_module --with-http_xslt_module=dynamic enable dynamic ngx_http_xslt_module --with-http_image_filter_module enable ngx_http_image_filter_module --with-http_image_filter_module=dynamic enable dynamic ngx_http_image_filter_module --with-http_geoip_module enable ngx_http_geoip_module --with-http_geoip_module=dynamic enable dynamic ngx_http_geoip_module --with-http_sub_module enable ngx_http_sub_module --with-http_dav_module enable ngx_http_dav_module --with-http_flv_module enable ngx_http_flv_module --with-http_mp4_module enable ngx_http_mp4_module --with-http_gunzip_module enable ngx_http_gunzip_module --with-http_gzip_static_module enable ngx_http_gzip_static_module --with-http_auth_request_module enable ngx_http_auth_request_module --with-http_random_index_module enable ngx_http_random_index_module --with-http_secure_link_module enable ngx_http_secure_link_module --with-http_degradation_module enable ngx_http_degradation_module --with-http_slice_module enable ngx_http_slice_module --with-http_stub_status_module enable ngx_http_stub_status_module --without-http_charset_module disable ngx_http_charset_module --without-http_gzip_module disable ngx_http_gzip_module --without-http_ssi_module disable ngx_http_ssi_module --without-http_userid_module disable ngx_http_userid_module --without-http_access_module disable ngx_http_access_module --without-http_auth_basic_module disable ngx_http_auth_basic_module --without-http_mirror_module disable ngx_http_mirror_module --without-http_autoindex_module disable ngx_http_autoindex_module --without-http_geo_module disable ngx_http_geo_module --without-http_map_module disable ngx_http_map_module --without-http_split_clients_module disable ngx_http_split_clients_module --without-http_referer_module disable ngx_http_referer_module --without-http_rewrite_module disable ngx_http_rewrite_module --without-http_proxy_module disable ngx_http_proxy_module --without-http_fastcgi_module disable ngx_http_fastcgi_module --without-http_uwsgi_module disable ngx_http_uwsgi_module --without-http_scgi_module disable ngx_http_scgi_module --without-http_grpc_module disable ngx_http_grpc_module --without-http_memcached_module disable ngx_http_memcached_module --without-http_limit_conn_module disable ngx_http_limit_conn_module --without-http_limit_req_module disable ngx_http_limit_req_module --without-http_empty_gif_module disable ngx_http_empty_gif_module --without-http_browser_module disable ngx_http_browser_module --without-http_upstream_hash_module disable ngx_http_upstream_hash_module --without-http_upstream_ip_hash_module disable ngx_http_upstream_ip_hash_module --without-http_upstream_least_conn_module disable ngx_http_upstream_least_conn_module --without-http_upstream_random_module disable ngx_http_upstream_random_module --without-http_upstrea","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:1:1","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"nginx çš„è¿›ç¨‹æ¨¡å‹ master ä¸»è¿›ç¨‹ worker å·¥ä½œè¿›ç¨‹ worker_processes 2; # é»˜è®¤ä¸º1,é…ç½®ä¸ºn-1 .nä¸ºcpuæ•°é‡ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:2:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"nginxäº‹ä»¶å¤„ç†ã€‚å¼‚æ­¥éé˜»å¡ã€‚ events { # é»˜è®¤ä½¿ç”¨epoll use epoll; # æ¯ä¸ªworker å…è®¸è¿æ¥çš„å®¢æˆ·ç«¯æœ€å¤§è¿æ¥æ•° worker_connections 10240; } ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:2:1","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"é…ç½®æ–‡ä»¶è¯¦è§£ï¼š server { listen 89; server_name localhost; location / { root html; index imooc.html index.htm; } } /usr/local/nginx/html/imooc.html \u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead\u003e \u003ctitle\u003eWelcome to immoc!\u003c/title\u003e \u003cstyle\u003e body { width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1\u003eWelcome imooc!\u003c/h1\u003e \u003c/body\u003e \u003c/html\u003e æˆ–è€…ï¼š nginx.confä¸­æ·»åŠ  include imooc.conf; åˆ›å»ºimooc.confæ–‡ä»¶ã€‚ /usr/local/nginx/conf/imooc.conf server { listen 89; server_name localhost; location / { root html; index imooc.html index.htm; } } æ¯æ¬¡æ›´æ”¹åéƒ½è¦é‡å¯æœåŠ¡ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:3:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å¸¸è§pidæŠ¥é”™ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:4:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"nginx.pidæ‰“å¼€å¤±è´¥ï¼š 1.nginx: [error] invalid PID number \"\" in â€œ/usr/local/nginx/logs/nginx.pidâ€ è§£å†³æ–¹æ³•ï¼š ä½¿ç”¨nginx -cçš„å‚æ•°æŒ‡å®šnginx.confæ–‡ä»¶çš„ä½ç½® ç„¶åå†é‡æ–°å¯åŠ¨ï¼Œè§£å†³é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ps -ef|grep nginx çœ‹åˆ°æœåŠ¡å·²ç»å¯åŠ¨æˆåŠŸã€‚ /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf 2.nginx: [error] open() â€œ/var/run/nginx/nginx.pidâ€ failed (2: No such file or directory) æç¤ºä¿¡æ¯è¯´æ˜åœ¨ /var/run/nginx/ ç›®å½•ä¸‹æ‰¾ä¸åˆ° nginx.pid æ–‡ä»¶ï¼Œè§£å†³æ–¹å¼æœ‰ä¸¤ç§ ç¬¬ä¸€ç§æ–¹å¼ï¼šåˆ›å»ºé»˜è®¤ç›®å½• /var/run/nginx/ ï¼› ç¬¬äºŒç§æ–¹å¼ï¼šä¿®æ”¹ nginx.conf æ–‡ä»¶ï¼ŒæŒ‡å®š pidæ–‡ä»¶ æ‰€åœ¨ç›®å½•ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:4:1","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æ—¥å¿—åˆ‡å‰²ï¼š(æ‰‹åŠ¨) cat_my_log.sh #!/bin/bash LOG_PATH=\"/var/log/nginx/\" RECORD_TIME=$(date -d \"yesterday\" +%Y-%m-%d+%H:%M) PID=/var/run/nginx/nginx.pid mv ${LOG_PATH}/access.log ${LOG_PATH}/access.${RECORD_TIME}.log mv ${LOG_PATH}/error.log ${LOG_PATH}/error.${RECORD_TIME}.log #å‘nginxä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Œç”¨äºé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ kill -USR1 `cat $PID` chmod +x cat_my_log.sh ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:5:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æ—¥å¿—åˆ‡å‰²ï¼š(å®šæ—¶) 1.å®‰è£…å®šæ—¶ä»»åŠ¡ yum install crontabs 2.crontab -e ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡ */1 * * * * /usr/local/nginx/sbin/cut_my_log.sh 3.é‡å¯å®šæ—¶ä»»åŠ¡ service crond restart 4.å¸¸ç”¨å®šæ—¶ä»»åŠ¡ service crond start service crond stop service crond reload #é‡æ–°åŠ è½½ service crond restart #é‡å¯æœåŠ¡ crontab -l #æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨ crontab -e # ç¼–è¾‘ä»»åŠ¡ æ¯åˆ†é’Ÿæ‰§è¡Œ */1 * * * * æ¯æ—¥å‡Œæ™¨ï¼ˆæ¯å¤©æ™šä¸Š23ï¼š59ï¼‰æ‰§è¡Œï¼š 59 23 * * * æ¯æ—¥å‡Œæ™¨1ç‚¹æ‰§è¡Œï¼š 0 1 * * * æ¯å¤©ä¸ºæ•°æ®åº“å®šæ—¶å¤‡ä»½ï¼šå‚è€ƒ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:6:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"è™šæ‹Ÿä¸»æœº-ä½¿ç”¨nginxä¸ºé™æ€èµ„æºæä¾›æœåŠ¡ é™æ€èµ„æºå¯ä»¥æ˜¯mp4ã€pngã€jpgç­‰ç­‰ã€‚ /usr/local/nginx/conf/imooc.confä¸­åˆ›å»ºé™æ€èµ„æºè·¯å¾„ã€‚ server { listen 90; server_name localhost; location / { root /home/foodie-shop; index index.html; } location /static { alias /home/imooc; } location /imooc { root /home; } } è¯·æ±‚/home/imoocä¸‹çš„èµ„æºã€‚ ä¸¤ç§å†™æ³•ï¼š ä¸€ã€æ­£å¸¸è¯·æ±‚ï¼š location /imooc { root /home; } ç›´æ¥è¯·æ±‚ï¼š http://10.4.7.129:90/imooc/456.jpg äºŒã€ç»™è·¯å¾„èµ·åˆ«åï¼š å°†/home/imoocåˆ›å»ºåˆ«å ä¸º/static location /static { alias /home/imooc; } è¯·æ±‚æ—¶ç”¨åˆ«åè¯·æ±‚ http://10.4.7.129:90/static/456.jpg å°†imooc.confæ–‡ä»¶å†…å®¹åº”ç”¨åˆ°nginx.confä¸­ ç¼–è¾‘/usr/local/nginx/conf/nginx.conf å•ç‹¬æ·»åŠ ä¸€è¡Œï¼š include imooc.conf; æ£€æµ‹é…ç½®æ˜¯å¦æ­£ç¡®ï¼š /usr/local/nginx/sbin/nginx -t nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful é‡å¯nginx /usr/local/nginx/sbin/nginx -s reload æµ‹è¯•ç»“æœï¼š http://10.4.7.129:90/imooc/456.jpg http://10.4.7.129:90/static/456.jpg ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:7:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"gzipå‹ç¼©æå‡è¯·æ±‚æ•ˆç‡ #å¼€å¯gzipå‹ç¼©åŠŸèƒ½ï¼Œç›®çš„ï¼šæé«˜ä¼ è¾“æ•ˆç‡ï¼ŒèŠ‚çº¦å¸¦å®½ gzip on; #é™åˆ¶æœ€å°å‹ç¼©ï¼Œå°äº1å­—èŠ‚çš„æ–‡ä»¶ä¸ä¼šå‹ç¼© gzip_min_length 1; #çš„å®šä¹‰å‹ç¼©çš„çº§åˆ«ï¼ˆå‹ç¼©æ¯”ï¼Œæ–‡ä»¶è¶Šå¤§ï¼Œå‹ç¼©è¶Šå¤šï¼Œä½†æ˜¯cpuä½¿ç”¨ä¼šè¶Šå¤šï¼‰ gzip_comp_level 3; #å®šä¹‰å‹ç¼©æ–‡ä»¶ç±»å‹ gzip_types text/plain application/javascript application/x-javascript test/css application/xml text/javascript application/x-httpd/php image/jpeg image/gif image/png application/json; ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:8:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"locationåŒ¹é…è§„åˆ™ ç©ºæ ¼ï¼šé»˜è®¤åŒ¹é…ï¼Œæ™®é€šåŒ¹é… server { listen 91; server_name localhost; location / { root html; index imooc.html index.htm; } } = ï¼šç²¾ç¡®åŒ¹é… server { listen 91; server_name localhost; #ç²¾ç¡®åŒ¹é… location = / { root html; index imooc.html index.htm; } } æ­£åˆ™è¡¨è¾¾å¼ã€‚ /home/imooc/img [root@centos7 img]# ll total 808 -rw-r--r--. 1 root root 25125 Jun 30 19:40 456.jpg -rw-r--r--. 1 root root 25125 Dec 19 00:12 456.JPG -rw-r--r--. 1 root root 383222 Dec 13 19:25 AutoPlayOptIn.gif -rw-r--r--. 1 root root 383222 Dec 19 00:17 AutoPlayOptIn.GIF ~* ï¼šåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œ*ä»£è¡¨ä¸åŒºåˆ†å¤§å°å†™ http://10.4.7.129:92/imooc/img/456.JGP (å¯ä»¥è®¿é—®)ä¸è®ºæ˜¯å¦å®šä¹‰äº†.JPGè¿™ç§ç±»å‹éƒ½èƒ½è®¿é—®ã€‚ ~ ï¼šåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒºåˆ†å¤§å°å†™ http://10.4.7.129:92/imooc/img/456.JGP (ä¸èƒ½è®¿é—®)å› ä¸ºæ²¡æœ‰å®šä¹‰.JPGè¿™ç§ç±»å‹èƒ½è®¿é—®ã€‚ server { listen 92; server_name localhost; #æ­£åˆ™è¡¨è¾¾å¼ã€‚*ä»£è¡¨ä¸åŒºåˆ†å¤§å°å†™ location ~* \\.(GIF|png|bmp|jpg|jpeg) { root /home; } } server { listen 92; server_name localhost; #æ­£åˆ™è¡¨è¾¾å¼ã€‚*ä»£è¡¨ä¸åŒºåˆ†å¤§å°å†™ location ~ \\.(GIF|png|bmp|jpg|jpeg) { root /home; } } ^~ ä»¥æŸä¸ªå­—ç¬¦è·¯å¾„å¼€å¤´è¯·æ±‚ server { listen 93; server_name localhost; #^~ ä»¥æŸä¸ªå­—ç¬¦è·¯å¾„å¼€å¤´è¯·æ±‚ location ^~ /imooc/img { root /home; } } ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:9:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"DNSè§£æåŸŸå user-\u003e client(www.imooc.com ) -\u003e nginx(ä»£ç†æœåŠ¡å™¨192.168.1.88 å°åŒºå¤§é—¨) â€”\u003e tomcat1 ï¼ˆç›®æ ‡æœåŠ¡å™¨ å†…ç½‘ï¼‰ ##å·æ¥¼##å®¤ â€‹ â€”\u003e tomcat2 ï¼ˆç›®æ ‡æœåŠ¡å™¨ å†…ç½‘ï¼‰##å·æ¥¼##å®¤ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:10:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ç”¨switchhosts æ¨¡æ‹Ÿæœ¬åœ°åŸŸåè§£æè®¿é—® https://cloud.tencent.com/developer/article/1408956 https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Foldj%2FSwitchHosts%2Freleases%2Fdownload%2Fv3.3.12%2FSwitchHosts-win32-ia32_v3.3.12.5349.zip è‡ªå®šä¹‰hosts ä¸€é”®åˆ‡æ¢ã€‚ä¸ç”¨æ›´æ”¹æœ¬æœºhosts å®šä¹‰nginx-dev-imooc çš„hosts æ·»åŠ æ˜ å°„ï¼š 10.4.7.129 www.imooc.com è®¿é—®ï¼š www.imooc.com æ˜¾ç¤º10.4.7.129 é»˜è®¤ç•Œé¢ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:11:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"è·¨åŸŸè®¿é—® å½“å‡ºç°403è·¨åŸŸé”™è¯¯çš„æ—¶å€™ No 'Access-Control-Allow-Origin' header is present on the requested resourceï¼Œéœ€è¦ç»™NginxæœåŠ¡å™¨é…ç½®å“åº”çš„headerå‚æ•°ï¼š åªéœ€è¦åœ¨Nginxçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹å‚æ•°ï¼š location / { #å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸï¼Œ*ä»£è¡¨æ‰€æœ‰ add_header 'Access-Control-Allow-Origin' *; #å…è®¸è¯·æ±‚çš„æ–¹æ³•ï¼Œæ¯”å¦‚GET, POST, DELETEï¼ŒPUT add_header 'Access-Control-Allow-Methods' *; #å…è®¸å¸¦ä¸Šcookieè¯·æ±‚ add_header 'Access-Control-Allow-Credentails' 'true'; #å…è®¸è¯·æ±‚çš„HEADER add_header 'Access-Control-Allow-Headers' *; if ($request_method = 'OPTIONS') { return 204; } } ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:12:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"nginx é˜²ç›—é“¾æŠ€æœ¯æ”¯æŒ #å¯¹æºç«™ç‚¹éªŒè¯ valid_referers *.imooc.com; #éæ³•å¼•å…¥ä¼šè¿›å…¥ä¸‹æ–¹åˆ¤æ–­ if ($invalid_referer) { return 404; } ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:13:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"nginx æ¨¡å—åŒ–ä½“ç³» [root@centos7 nginx-1.16.1]# ll total 756 drwxr-xr-x. 6 1001 1001 4096 Dec 17 04:04 auto #ä¸€äº›åˆ¤æ–­æ“ä½œç³»ç»Ÿæ”¯æŒï¼Œç¼–è¯‘ç­‰ç›¸å…³çš„æ–‡ä»¶ -rw-r--r--. 1 1001 1001 296463 Aug 13 2019 CHANGES #ç‰ˆæœ¬çš„æ›´æ”¹æ—¥å¿— -rw-r--r--. 1 1001 1001 452171 Aug 13 2019 CHANGES.ru #ä¿„ç‰ˆç‰ˆæœ¬çš„æ›´æ”¹æ—¥å¿— drwxr-xr-x. 2 1001 1001 168 Dec 17 04:04 conf #é…ç½®æ–‡ä»¶å¤¹ -rwxr-xr-x. 1 1001 1001 2502 Aug 13 2019 configure #ç¼–è¯‘é…ç½®ç¨‹åº drwxr-xr-x. 4 1001 1001 72 Dec 17 04:04 contrib #æä¾›äº†è¯­æ³•é«˜äº®æ”¯æŒè„šæœ¬ï¼Œè®©vimæ‰“å¼€æ—¶ï¼Œè¯­æ³•é«˜äº®ã€‚éœ€è¦æ‹·è´contrib ä¸­åˆ° æœ¬åœ°vimç›®å½•(å¦‚æœæ ¹ç›®å½•æ²¡æœ‰è¯¥ç›®å½•ï¼Œå…ˆmkdir ~/.vim) drwxr-xr-x. 2 1001 1001 40 Dec 17 04:04 html #é»˜è®¤é¡µé¢ -rw-r--r--. 1 1001 1001 1397 Aug 13 2019 LICENSE #è®¸å¯è¯ä¹¦ -rw-r--r--. 1 root root 355 Dec 17 04:19 Makefile #ç¼–è¯‘åçš„æ–‡ä»¶ drwxr-xr-x. 2 1001 1001 21 Dec 17 04:04 man #ä½¿ç”¨æ‰‹å†Œ drwxr-xr-x. 3 root root 174 Dec 17 04:20 objs #ç¬¬ä¸‰æ–¹æ’ä»¶ -rw-r--r--. 1 1001 1001 49 Aug 13 2019 README drwxr-xr-x. 9 1001 1001 91 Dec 17 04:04 src #æºç  cd conf [root@centos7 conf]# ll total 40 -rw-r--r--. 1 1001 1001 1077 Aug 13 2019 fastcgi.conf -rw-r--r--. 1 1001 1001 1007 Aug 13 2019 fastcgi_params -rw-r--r--. 1 1001 1001 2837 Aug 13 2019 koi-utf -rw-r--r--. 1 1001 1001 2223 Aug 13 2019 koi-win -rw-r--r--. 1 1001 1001 5231 Aug 13 2019 mime.types -rw-r--r--. 1 1001 1001 2656 Aug 13 2019 nginx.conf # æ ¸å¿ƒé…ç½®æ–‡ä»¶ -rw-r--r--. 1 1001 1001 636 Aug 13 2019 scgi_params -rw-r--r--. 1 1001 1001 664 Aug 13 2019 uwsgi_params -rw-r--r--. 1 1001 1001 3610 Aug 13 2019 win-utf [root@centos7 html]# ll total 8 -rw-r--r--. 1 1001 1001 494 Aug 13 2019 50x.html -rw-r--r--. 1 1001 1001 612 Aug 13 2019 index.html [root@centos7 objs]# ll total 3888 -rw-r--r--. 1 root root 17763 Dec 17 04:19 autoconf.err -rw-r--r--. 1 root root 40485 Dec 17 04:19 Makefile -rwxr-xr-x. 1 root root 3857136 Dec 17 04:20 nginx -rw-r--r--. 1 root root 5327 Dec 17 04:20 nginx.8 -rw-r--r--. 1 root root 7363 Dec 17 04:19 ngx_auto_config.h -rw-r--r--. 1 root root 657 Dec 17 04:19 ngx_auto_headers.h -rw-r--r--. 1 root root 5975 Dec 17 04:19 ngx_modules.c -rw-r--r--. 1 root root 32552 Dec 17 04:20 ngx_modules.o drwxr-xr-x. 9 root root 91 Dec 17 04:19 src [root@centos7 src]# ll total 20 drwxr-xr-x. 2 1001 1001 4096 Dec 17 04:04 core #æ ¸å¿ƒæºç  drwxr-xr-x. 3 1001 1001 4096 Dec 17 04:04 event #äº‹ä»¶ drwxr-xr-x. 4 1001 1001 4096 Dec 17 04:04 http drwxr-xr-x. 2 1001 1001 4096 Dec 17 04:04 mail drwxr-xr-x. 2 1001 1001 74 Dec 17 04:04 misc #è¾…åŠ©ä»£ç  drwxr-xr-x. 3 1001 1001 18 Dec 17 04:04 os #ç³»ç»Ÿ drwxr-xr-x. 2 1001 1001 4096 Aug 13 2019 stream [root@centos7 http]# ls modules ngx_http_file_cache.c ngx_http_request.h ngx_http_upstream_round_robin.h ngx_http.c ngx_http.h ngx_http_script.c ngx_http_variables.c ngx_http_cache.h ngx_http_header_filter_module.c ngx_http_script.h ngx_http_variables.h ngx_http_config.h ngx_http_parse.c ngx_http_special_response.c ngx_http_write_filter_module.c ngx_http_copy_filter_module.c ngx_http_postpone_filter_module.c ngx_http_upstream.c v2 ngx_http_core_module.c ngx_http_request_body.c ngx_http_upstream.h ngx_http_core_module.h ngx_http_request.c ngx_http_upstream_round_robin.c ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:14:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"è´Ÿè½½å‡è¡¡ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:15:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å››å±‚è´Ÿè½½å‡è¡¡ ä¸»è¦æ˜¯ä¸ºäº†å°†è¯·æ±‚åˆ†æµåˆ°ä¸åŒæœåŠ¡å™¨ F5 ç¡¬è´Ÿè½½å‡è¡¡ åŸºäºç¡¬ä»¶ã€å•†ä¸šåŒ– LVS å››å±‚è´Ÿè½½å‡è¡¡ Haproxy å››å±‚è´Ÿè½½å‡è¡¡ Nginx å››å±‚è´Ÿè½½å‡è¡¡ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:15:1","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ä¸ƒå±‚è´Ÿè½½å‡è¡¡ åŸºäºåº”ç”¨å±‚HTTPåè®®è¿›è¡Œè´Ÿè½½å‡è¡¡ Nginx ä¸ƒå±‚è´Ÿè½½å‡è¡¡ Haproxy ä¸ƒå±‚è´Ÿè½½å‡è¡¡ apache ä¸ƒå±‚è´Ÿè½½å‡è¡¡ å››å±‚ä¸»è¦æ˜¯tcpã€udpè½¬å‘è¯·æ±‚ï¼Œè€Œä¸æ˜¯å¤„ç†è¯·æ±‚ ä¸ƒå±‚ä¼šå¤„ç†è¯·æ±‚ï¼Œå¯ä»¥è¿‡æ»¤ã€å‹ç¼©ã€ç¼“å­˜ç­‰ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:15:2","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"DNS åœ°åŸŸè´Ÿè½½å‡è¡¡ å¯ä»¥æ ¹æ®è¯·æ±‚è€…åœ°åŸŸï¼Œåˆ†é…åˆ°æœ€è¿‘çš„æœåŠ¡å™¨ å‡å°‘ç½‘ç»œä¼ è¾“çš„æŸè€— ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:15:3","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨Nginxæ­å»ºä¸‰å°tomcaté›†ç¾¤ tomcat1 :10.4.7.11 tomcat2 :10.4.7.12 tomcat3 :10.4.7.21 tomcatå®‰è£…ï¼š10.4.7.{11,12,21}éƒ½è¦å®‰è£… yum install tomcat -y yum install tomcat-webapps tomcat-admin-webapps tomcat-docs-webapp tomcat-javadoc #å…³é—­é˜²ç«å¢™ systemctl stop firewalld systemctl disable firewalld #å¯åŠ¨tomcat systemctl restart tomcat 10.4.7.129 (nginxæœåŠ¡å™¨)ä¸Šé…ç½®tomcaté›†ç¾¤ vim imooc.conf upstream tomcats { server 10.4.7.11:8080; server 10.4.7.12:8080; server 10.4.7.21:8080; } server { listen 80; server_name www.tomcats.com; location / { proxy_pass http://tomcats; } } é‡å¯nginx /usr/local/nginx/sbin/nginx -s reload windwosé…ç½®hostsè§„åˆ™ï¼š 10.4.7.129 www.tomcats.com æµ‹è¯•è®¿é—®ã€‚ www.tomcats.com è¯·æ±‚ä¼šå¹³å‡åˆ†é…ç»™åé¢ä¸‰å°tomcat. å‚è€ƒï¼šhttp://tengine.taobao.org/book/chapter_05.html ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:16:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"è´Ÿè½½å‡è¡¡ä¹‹è½®è¯¢ é»˜è®¤nginxä½¿ç”¨çš„æ˜¯è½®è¯¢ã€‚äº¤æ›¿å‡ºç°ã€‚å‡ºç°æ¬¡æ•°å‡ç­‰ã€‚ ä¿®æ”¹æ¯å°tomcaté»˜è®¤é¡µé¢ /usr/share/tomcat/webapps/ROOT/index.jsp ç¬¬37è¡Œã€‚homeæ”¹æˆå¯¹åº”IPæœ€åä¸€ä½ã€‚ 37 \u003cspan id=\"nav-home\"\u003e\u003ca href=\"${tomcatUrl}\"\u003e12\u003c/a\u003e\u003c/span\u003e é‡å¯tomcat systemctl restart tomcat ![nginx è½®è¯¢](/postimages/nginx è½®è¯¢.webp) 11 12 21 ä¼šäº¤æ›¿å‡ºç°ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:17:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"è´Ÿè½½å‡è¡¡ä¹‹æƒé‡-åŠ æƒè½®è¯¢ weight å€¼è¶Šå¤§ï¼Œå‡ºç°çš„æ¬¡æ•°è¶Šå¤šï¼ˆåç«¯æœåŠ¡å™¨è¢«è®¿é—®çš„æ¬¡æ•°å°±è¶Šå¤šï¼‰ã€‚ é…ç½®åœ¨upstream æ¨¡å—å†…ã€‚ upstream tomcats { server 10.4.7.11:8080 weight=1; server 10.4.7.12:8080 weight=2; server 10.4.7.21:8080 weight=3; } 11:12:21 = 1:2:3 21å‡ºç°å‡ ç‡æœ€å¤§ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:18:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"upstream æŒ‡ä»¤å‚æ•° max_conns :é™åˆ¶*number*åˆ°ä»£ç†æœåŠ¡å™¨çš„æœ€å¤§åŒæ—¶æ´»åŠ¨è¿æ¥æ•°.é»˜è®¤å€¼ä¸ºé›¶ï¼Œè¡¨ç¤ºæ²¡æœ‰é™åˆ¶ã€‚å¦‚æœå¯ç”¨äº†idle keepalive è¿æ¥ã€å¤šä¸ªworker å’Œå…±äº«å†…å­˜ ï¼Œåˆ™ä»£ç†æœåŠ¡å™¨çš„ active å’Œ idle è¿æ¥æ€»æ•°å¯èƒ½ä¼šè¶…è¿‡è¯¥max_connså€¼ã€‚å…è®¸æœ€å¤§è¿æ¥æ•°ã€‚ é™åˆ¶æ¯å°serverçš„è¿æ¥æ•°ï¼Œç”¨äºä¿æŠ¤é¿å…è¿‡è½½èµ·åˆ°é™æµä½œç”¨ã€‚ æµ‹è¯•å‚è€ƒé…ç½®å¦‚ä¸‹ï¼š #worker è¿›ç¨‹è®¾ç½®1ä¸ªï¼Œä¾¿äºæµ‹è¯•è§‚å¯ŸæˆåŠŸçš„è¿æ¥æ•°ã€‚ worker_processes 1 upstream tomcats { server 10.4.7.11:8080 max_conns=2; server 10.4.7.12:8080 max_conns=2; server 10.4.7.21:8080 max_conns=2; } slow_start:å½“èŠ‚ç‚¹æ¢å¤ï¼Œä¸ç«‹å³åŠ å…¥,è€Œæ˜¯ç­‰å¾… slow_start ååŠ å…¥æœåŠ¡å¯¹åˆ—.(ä»…å•†ä¸šç‰ˆæ”¯æŒ) æµ‹è¯•å‚è€ƒé…ç½®å¦‚ä¸‹ï¼š upstream tomcats { server 10.4.7.11:8080 weight=6 slow_start=60s; server 10.4.7.12:8080 weight=2; server 10.4.7.21:8080 weight=2; } æ³¨æ„ï¼š è¯¥å‚æ•°ä¸èƒ½ä½¿ç”¨åœ¨hash å’Œrandom load balancingä¸­ å¦‚æœåœ¨upstreamä¸­åªæœ‰ä¸€å°serverï¼Œåˆ™è¯¥å‚æ•°å¤±æ•ˆã€‚ down :å°†æœåŠ¡å™¨æ ‡è®°ä¸ºæ°¸ä¹…ä¸å¯ç”¨ã€‚ æµ‹è¯•å‚è€ƒé…ç½®å¦‚ä¸‹ï¼š upstream tomcats { server 10.4.7.11:8080 down; server 10.4.7.12:8080 weight=2; server 10.4.7.21:8080 weight=2; } backup:å°†æœåŠ¡å™¨æ ‡è®°ä¸ºå¤‡ä»½æœåŠ¡å™¨,åªæœ‰åœ¨å…¶ä»–çš„æœåŠ¡å™¨éƒ½å®•æœºä»¥åï¼Œè‡ªå·±æ‰ä¼šåŠ å…¥åˆ°é›†ç¾¤ä¸­ï¼Œè¢«ç”¨æˆ·è®¿é—®åˆ°ã€‚ è¯¥å‚æ•°ä¸èƒ½ä¸ hash ã€ip_hash å’Œéšæœº è´Ÿè½½å¹³è¡¡æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚ upstream tomcats { server 10.4.7.11:8080 backup; server 10.4.7.12:8080 weight=1; server 10.4.7.21:8080 weight=1; } max_fails:å¤±è´¥å‡ æ¬¡ï¼Œåˆ™æ ‡è®°serverå·²å®•æœºï¼Œå‰”å‡ºä¸Šæ¸¸æœåŠ¡ã€‚ fail_timeout:è¡¨ç¤ºå¤±è´¥çš„é‡è¯•æ—¶é—´ã€‚ å‡è®¾ç›®å‰è®¾ç½®å¦‚ä¸‹ï¼š max_fails=2 fail_timeout=15s åˆ™è¡¨ç¤ºåœ¨15ç§’å†…è¯·æ±‚æŸä¸€serverå¤±è´¥è¾¾åˆ°2æ¬¡åï¼Œåˆ™è®¤ä¸ºè¯¥serverå·²ç»æŒ‚äº†æˆ–è€…å®•æœºäº†ï¼Œéšåå†è¿‡15sï¼Œè¿™15så†…ä¸ä¼šæœ‰æ–°çš„è¯·æ±‚åˆ°è¾¾åˆšåˆšæŒ‚æ‰çš„èŠ‚ç‚¹ä¸Šï¼Œè€Œæ˜¯ä¼šè¯·æ±‚åˆ°æ­£å¸¸è¿ä½œçš„serverï¼Œ15ç§’åä¼šåœ¨æœ‰æ–°è¯·æ±‚å°è¯•è¿æ¥æŒ‚æ‰çš„serverï¼Œå¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œé‡å¤ä¸Šä¸€è¿‡ç¨‹ï¼Œç›´åˆ°æ¢å¤ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:19:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨keepaliveæé«˜ååé‡ https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive æµ‹è¯•é…ç½®ï¼š upstream tomcats { server 10.4.7.11:8080 weight=1; server 10.4.7.12:8080 weight=1; server 10.4.7.21:8080 weight=1; keepalive 32; #é…ç½®é•¿è¿æ¥çš„æ•°é‡ï¼Œä¿æŒè¿æ¥å¯ä»¥æé«˜ååé‡ } server { listen 80; server_name www.tomcats.com; location / { proxy_pass http://tomcats; proxy_http_version 1.1; #ä»£è¡¨ä¸Šé¢é•¿è¿æ¥çš„ç‰ˆæœ¬å·ï¼Œï¼ˆé»˜è®¤1.0ï¼Œä½†1.0ä¸æ˜¯é•¿é“¾æ¥ï¼‰ proxy_set_header Connection \"\"; } } ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:20:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"è´Ÿè½½å‡è¡¡ä¹‹ip_hash hashç®—æ³• hash(ip) % node_counts = index ç®—å‡ºç”¨æˆ·è®¿é—®çš„æœåŠ¡å™¨å…·ä½“æ˜¯å“ªä¸€å° ä¿è¯ç”¨æˆ·è®¿é—®çš„æœåŠ¡å™¨æ˜¯åŒä¸€å°ï¼Œä¿æŒä¼šè¯ä¸€è‡´ æµ‹è¯•é…ç½®ï¼š upstream tomcats { ip_hash; server 10.4.7.11:8080; server 10.4.7.12:8080; server 10.4.7.21:8080; } 10.4.7.110 10.4.7.120 â€”\u003e hash(10 4 7) 10.4.7.210 åˆ†æ®µè¿›è¡Œè®¡ç®—ï¼ŒåŒä¸€ç‰‡åŒºåŸŸï¼Œä¼šè®¿é—®åˆ°ä¸€ä¸ªé‡Œ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:21:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"è´Ÿè½½å‡è¡¡ä¹‹url_hash é€šè¿‡é…ç½®hash $request_uri å¼€å¯url_hash ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:21:1","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"nginxæ§åˆ¶æµè§ˆå™¨ç¼“å­˜ 1ã€è®¾ç½®é™æ€å†…å®¹çš„è¿‡æœŸæ—¶é—´(expires time;) location /static { alias /home/naga; expires 10s; } 2ã€å›ºå®šæ—¶é—´ expires @[time] expires @22h30s; ä»£è¡¨æ™šä¸Š10:30pmå¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è®¡ç®—æ—¶é—´å·® 3ã€ expires -[time] expires -1h; è·ç¦»ç°åœ¨çš„1å°æ—¶ä¹‹å‰å°±å¤±æ•ˆäº†ï¼Œç›¸å½“äºä¸ç”¨ç¼“å­˜ 4ã€expires eposh; ä¸ä½¿ç”¨ç¼“å­˜ 5ã€expires off; é»˜è®¤å€¼ï¼Œå…¶å®å°±æ˜¯ä¸ç®¡ï¼Œç”±æµè§ˆå™¨è‡ªå·±ä½¿ç”¨è‡ªå·±çš„é»˜è®¤ç¼“å­˜ 6ã€expires max; ç¼“å­˜ä¸ä¼šè¿‡æœŸï¼Œé™¤éä¿®æ”¹è¿‡ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:22:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ä¸Šæ¸¸æœåŠ¡é™æ€å†…å®¹ç¼“å­˜ keys_zone æ˜¯å†…å­˜ç¼“å­˜ max_size æ˜¯ç¡¬ç›˜ç¼“å­˜ upstream xxx { ... } # proxy_cache_path è®¾ç½®ç¼“å­˜ä¿å­˜çš„åœ°å€ï¼Œç›®å½•ä¼šè‡ªåŠ¨åˆ›å»º # keys_zone è®¾ç½®å…±äº«å†…å­˜ï¼Œä»¥åŠå ç”¨çš„ç©ºé—´å¤§å° ## å†…å­˜ç¼“å­˜ ## (mycacheæ˜¯å…±äº«å†…å­˜åï¼Œä¸‹é¢) # max_size è®¾ç½®ç¼“å­˜å¤§å° # inactive è¶…è¿‡æ­¤æ—¶é—´ï¼Œç¼“å­˜è‡ªåŠ¨æ¸…ç† # use_temp_path=off å…³é—­ä¸´æ—¶ç›®å½• proxy_cache_path /usr/local/nginx/upstream_cache keys_zone=mycache:50m max_size=30g inactive=8h use_temp_path=off; server { listen 80; server_name www.naga.cn; #å¼€å¯å¹¶ä¸”ä½¿ç”¨ç¼“å­˜ proxy_cache mycache; #é’ˆå¯¹200å’Œ304çŠ¶æ€ç çš„ç¼“å­˜è®¾ç½®è¿‡æœŸæ—¶é—´ proxy_cache_valid 200 304 8h; } ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:23:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"ä½¿ç”¨nginx é…ç½®httpsåŸŸåè¯ä¹¦ å®‰è£…sslæ¨¡å— è¦åœ¨nginxä¸­é…ç½®https,åŠå¿…é¡»å®‰è£…sslæ¨¡å—ï¼Œä¹Ÿå°±æ˜¯â€˜http_ssl_moduleâ€™. è¿›å…¥åˆ°nginxè§£å‹ç›®å½•ï¼šnginx-1.16.1 æ–°å¢sslæ¨¡å—ï¼ˆåŸæ¥çš„æ¨¡å—éœ€è¦ä¿ç•™ï¼‰â€“with-http_ssl_module ./configure \\ --prefix=/usr/local/nginx \\ --pid-path=/var/run/nginx/nginx.pid \\ --lock-path=/var/lock/nginx.lock \\ --error-log-path=/var/log/nginx/error.log \\ --http-log-path=/var/log/nginx/access.log \\ --with-http_gzip_static_module \\ --http-client-body-temp-path=/var/temp/nginx/client \\ --http-proxy-temp-path=/var/temp/nginx/proxy \\ --http-fastcgi-temp-path=/var/temp/nginx/fastcgi \\ --http-uwsgi-temp-path=/var/temp/nginx/uwsgi \\ --http-scgi-temp-path=/var/temp/nginx/scgi \\ --with-http_ssl_module ç¼–è¯‘å’Œå®‰è£…ï¼š make make install ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:24:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"é…ç½®ssl 1ã€äº‘ä¸Šç”³è¯·è¯ä¹¦ï¼Œå®¡æ ¸å®Œæˆåå°†è¯ä¹¦ä¸‹è½½ä¸‹æ¥ï¼ŒnginxåŒ…å«ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªcrtè¯ä¹¦æ–‡ä»¶ï¼Œä¸€ä¸ªkeyå¯†é’¥æ–‡ä»¶ 2ã€å°†æ–‡ä»¶ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨ï¼Œå¯ä»¥æ”¾åœ¨confä¸‹ 3ã€ä¿®æ”¹nginx.conf (äº‹å…ˆåœ¨nginxé‡Œé¢åŠ å…¥sslæ¨¡å— â€“with-http_ssl_module, å®‰è£…åé€šè¿‡ ./nginx -V æŸ¥çœ‹ ) server { listen 443; server_name localhost; # å¼€å¯ssl ssl on; # é…ç½®sslè¯ä¹¦ å› ä¸ºæ”¾åœ¨confä¸‹çš„ï¼Œå’Œnginx.confåŒä¸€è·¯å¾„ï¼Œå°±è¿™æ ·å†™å°±è¡Œ ssl_certificate 1_www.imoocdsp.com_bundle.crt; # é…ç½®è¯ä¹¦ç§˜é’¥ ssl_certificate_key 2_www.imoocdsp.com.key; # sslä¼šè¯cache ssl_session_cache shared:SSL:1m; # sslä¼šè¯è¶…æ—¶æ—¶é—´ ssl_session_timeout 5m; # é…ç½®åŠ å¯†å¥—ä»¶ï¼Œå†™æ³•éµå¾ª openssl æ ‡å‡† ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; } ### å°†httpçš„è¯·æ±‚è½¬å‘åˆ°https server { listen 80; server_name localhost; # æ’é™¤æ³• if ($http_name ~* \"^online$\" ) { rewrite ^/(.*)$ https://localhost/online/ permanent; } rewrite ^ https://$host$1 permanent; } ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:25:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"åŠ¨é™åˆ†ç¦» 1.åˆ†å¸ƒå¼ 2.å‰åç«¯è§£è€¦ 3.é™æ€å½’nginx 4.æ¥å£æœåŠ¡åŒ– é™æ€æ•°æ®ï¼šcss/js/html/images/audios/videos/â€¦ åŠ¨æ€æ•°æ®ï¼šå¾—åˆ°çš„å“åº”å¯èƒ½ä¼šå’Œä¸Šæ¬¡ä¸åŒã€‚ åŠ¨é™åˆ†ç¦»çš„é—®é¢˜ è·¨åŸŸï¼š springboot nginx jsonp åˆ†å¸ƒå¼ä¼šè¯ï¼š åˆ†å¸ƒå¼ç¼“å­˜ä¸­é—´ä»¶Redis ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:26:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"nginxé«˜å¯ç”¨HA keepalived åŒæœºä¸»å¤‡ keepalived ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿè·¯ç”±å†—ä½™åè®® VRRP ï¼Œè¿™ä¸ªåè®®çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š 1ã€è§£å†³å†…ç½‘å•æœºæ•…éšœçš„è·¯ç”±åè®®ï¼Œ 2ã€ç”¨äºæ„å»ºè¿‡ä¸ªè·¯ç”±MASTER BACKUPï¼Œå°†å‡ å°æä¾›ç›¸åŒæœåŠ¡çš„è·¯ç”±å™¨ç»„æˆä¸€ä¸ªè·¯ç”±å™¨ç»„ã€‚ä¸€ä¸ªè·¯ç”±å°±æ˜¯nginx 3ã€è™šæ‹ŸIP-VIPï¼ˆVirtual IP Addressï¼‰ è¿‡ç¨‹ï¼šç”¨æˆ·ä¸ç›´æ¥è®¿é—®nginxï¼Œè®¿é—®è™šæ‹ŸIPï¼Œè¿™ä¸ªè™šæ‹ŸIPæ˜¯ç»‘å®šäº†nginxçš„masterèŠ‚ç‚¹ï¼Œä¼šæ ¹æ®è¿™ä¸ªå…³ç³»è§£æå‡ºæ¥ç»“æœã€‚ masterä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Œå¿ƒè·³æ£€æµ‹åˆ°åä¼šè®©è™šæ‹ŸIPæ‰¾åˆ°å¤‡ç”¨æœºï¼Œå¤šä¸ªå¤‡ç”¨æœºä¼šæ ¹æ®æƒé‡é€‰æ‹©ã€‚ æ­¤å¤–ï¼Œä¸»å¤‡èŠ‚ç‚¹çš„ç¡¬ä»¶é…ç½®åº”ä¸€æ ·ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:27:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"å®‰è£…keepalived è§£å‹åè¿›å…¥æ–‡ä»¶å¤¹è¿›è¡Œé…ç½®ï¼Œç±»ä¼¼nginxï¼Œä½†æ˜¯éœ€è¦ç”¨ â€“sysconf=/etcæŒ‡å®šé…ç½®æ–‡ä»¶åœ°å€ yum -y install libnl libnl-devel ./configure --prefix=/usr/local/keepalived --sysconf=/etc make \u0026\u0026 make install prefixï¼škeepalivedå®‰è£…çš„ä½ç½® sysconfï¼škeepalivedæ ¸å¿ƒé…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®ï¼Œå›ºå®šä½ç½®ï¼Œæ”¹æˆå…¶ä»–ä½ç½®åˆ™keepalivedå¯åŠ¨ä¸äº†ã€‚ä¼šæŠ¥é”™ã€‚ libnl libnl-devel æ˜¯libnl/libnl-3ä¾èµ–åŒ…ã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:28:0","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š !Configuration File for keepalived # å…¨å±€é…ç½® global_defs { # èŠ‚ç‚¹æ•…éšœï¼Œåˆ‡æ¢äº†èŠ‚ç‚¹ä¹‹åä¼šé€šçŸ¥ç®¡ç†å‘˜ï¼Œä¸‹é¢è¿˜è¦é…ç½®é‚®ç®±çš„åè®®ç­‰ï¼Œå¯ä»¥ä¸è¦ notification_email { 123456@qq.com } notification_email_from Alexandre.Cassen@firewall.loc smtp_server 192.168.200.1 smtp_connect_timeout 30 # è·¯ç”±IDï¼šå½“å‰å®‰è£…keepalivedèŠ‚ç‚¹ä¸»æœºçš„æ ‡è¯†ç¬¦ï¼Œå…¨å±€å”¯ä¸€ router_id naga_170 vrrp_skip_check_adv_addr vrrp_strict vrrp_garp_interval 0 vrrp_gna_interval 0 } #åŸºäºVRRPåè®®çš„å¯¹è±¡ï¼Œè®¡ç®—æœºèŠ‚ç‚¹ vrrp_instance VI_1 { state MASTER # è¡¨ç¤ºå½“å‰ä¸ºnginxçš„masterä¸»èŠ‚ç‚¹ interface eth0 # å½“å‰å®ä¾‹ç»‘å®šçš„ç½‘å¡ï¼Œ ç”¨ ip addræŸ¥çœ‹ virtual_router_id 51 #è™šæ‹Ÿè·¯ç”±IDï¼Œä¸»å¤‡èŠ‚ç‚¹éœ€è¦ä¸€è‡´ priority 100 #æƒé‡ï¼Œå¤‡æœºä¼˜å…ˆçº§è¶Šé«˜å°±æˆä¸ºæ–°çš„master advert_int 1 # ä¸»å¤‡å¿ƒè·³æ£€æŸ¥ï¼Œæ—¶é—´é—´éš”1s authentication { # è®¤è¯æˆæƒï¼Œé˜²æ­¢éæ³•èŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸€æ ·å°±å¯ä»¥ auth_type PASS auth_pass 1111 } virtual_ipaddress { # è™šæ‹ŸIPï¼Œç”¨ä¸€ä¸ªå°±å¯ä»¥äº† 192.168.17.17 #192.168.200.17 #192.168.200.18 } } #ä¸‹é¢çš„éƒ½å¯ä»¥ä¸è¦ virtual_server 192.168.200.100 443 { delay_loop 6 lb_algo rr lb_kind NAT persistence_timeout 50 protocol TCP real_server 192.168.201.100 443 { weight 1 SSL_GET { url { path / digest ff20ad2481f97b1754ef3e12ecd3a9cc } url { path /mrtg/ digest 9b3a0c85a887a256d6939da88aabd8cd } connect_timeout 3 retry 3 delay_before_retry 3 } } } virtual_server 10.10.10.2 1358 { delay_loop 6 lb_algo rr lb_kind NAT persistence_timeout 50 protocol TCP sorry_server 192.168.200.200 1358 real_server 192.168.200.2 1358 { weight 1 HTTP_GET { url { path /testurl/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } url { path /testurl2/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } url { path /testurl3/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } connect_timeout 3 retry 3 delay_before_retry 3 } } real_server 192.168.200.3 1358 { weight 1 HTTP_GET { url { path /testurl/test.jsp digest 640205b7b0fc66c1ea91c463fac6334c } url { path /testurl2/test.jsp digest 640205b7b0fc66c1ea91c463fac6334c } connect_timeout 3 retry 3 delay_before_retry 3 } } } virtual_server 10.10.10.3 1358 { delay_loop 3 lb_algo rr lb_kind NAT persistence_timeout 50 protocol TCP real_server 192.168.200.4 1358 { weight 1 HTTP_GET { url { path /testurl/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } url { path /testurl2/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } url { path /testurl3/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } connect_timeout 3 retry 3 delay_before_retry 3 } } real_server 192.168.200.5 1358 { weight 1 HTTP_GET { url { path /testurl/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } url { path /testurl2/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } url { path /testurl3/test.jsp digest 640205b7b0fc66c1ea91c463fac6334d } connect_timeout 3 retry 3 delay_before_retry 3 } } } ç¤ºä¾‹ï¼š #### ç¬¬ä¸€å° #### ! Configuration File for keepalived #å…¨å±€å˜é‡-è·¯ç”±idï¼Œæ ‡è¯†ä¸»æœºid global_defs { router_id keep_140 } #è®¡ç®—æœºèŠ‚ç‚¹ vrrp_instance VI_1 { state MASTER #æ ‡ç¤ºå½“å‰æœºå™¨ä¸ºä¸»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹BACKUP interface ens33 #å½“å‰ç½‘å¡ virtual_router_id 51 #ä¿æŒä¸»å¤‡æœºä¸€è‡´ priority 100 #æƒé‡ï¼Œæœ€é«˜çš„å½“é€‰ä¸‹ä¸€ä»»ä¸»æœº advert_int 1 #æ£€æŸ¥æ—¶é—´é—´éš”1s authentication { #è®¤è¯æˆæƒï¼Œé˜²æ­¢éæ³•èŠ‚ç‚¹è¿›å…¥ auth_type PASS auth_pass 1111 } virtual_ipaddress { #è™šæ‹Ÿip 10.4.7.211 } } #### ç¬¬äºŒå° #### ! Configuration File for keepalived #å…¨å±€å˜é‡-è·¯ç”±idï¼Œæ ‡è¯†ä¸»æœºid global_defs { router_id keep_141 } #è®¡ç®—æœºèŠ‚ç‚¹ vrrp_instance VI_1 { state BACKUP #æ ‡ç¤ºå½“å‰æœºå™¨ä¸ºä»èŠ‚ç‚¹ interface ens33 #å½“å‰ç½‘å¡ virtual_router_id 51 #ä¿æŒä¸»å¤‡æœºä¸€è‡´ priority 80 #æƒé‡ï¼Œæœ€é«˜çš„å½“é€‰ä¸‹ä¸€ä»»ä¸»æœº advert_int 1 #æ£€æŸ¥æ—¶é—´é—´éš”1s authentication { #è®¤è¯æˆæƒï¼Œé˜²æ­¢éæ³•èŠ‚ç‚¹è¿›å…¥ auth_type PASS auth_pass 1111 } virtual_ipaddress { #è™šæ‹Ÿipï¼Œä¿æŒå’Œä¸»èŠ‚ç‚¹ä¸€è‡´ 10.4.7.211 } } æµ‹è¯•ï¼š ä¸¤å°æœºå™¨nginx å’Œkeeplivedè¿›ç¨‹éƒ½åœ¨ã€‚ä¸¤å°ä¸€ä¸»ä¸€å¤‡çš„ç›®çš„æ˜¯ï¼Œä¸»æœåŠ¡å™¨keeplivedæŒ‚äº†ï¼Œvipåˆ‡åˆ°å¤‡æœåŠ¡å™¨ä¸Šï¼Œä¸šåŠ¡ä¸ä¸­æ–­ã€‚é»˜è®¤vipæ˜¯åœ¨ä¸»ä¸Šç”Ÿæ•ˆçš„ã€‚ä¸»å¤‡çš„keepalivedè¿›ç¨‹éƒ½åœ¨ï¼Œvipä¼šåœ¨ä¸»ä¸Šç”Ÿæ•ˆã€‚vipåˆ‡åˆ°å¤‡æœåŠ¡å™¨ä¸Šæ—¶.ä¸»æœåŠ¡å™¨ä¸Šçš„keepalivedæ¢å¤äº†ã€‚vipä¼šå†æ¬¡åˆ‡å›åˆ°ä¸»æœåŠ¡å™¨ä¸Šã€‚ ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:28:1","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["å·¥å…·"],"content":"keepalivedé…ç½®Nginxè‡ªåŠ¨å¯åŠ¨ è¿™æ—¶å¦‚æœnginxæŒ‚äº†ï¼Œkeepalivedæ²¡æœ‰æŒ‚ï¼Œè¿˜æ˜¯ä¼šæ— æ³•è®¿é—®ã€‚ 1.è„šæœ¬ï¼ˆä¸»ä»éƒ½é…ç½®ï¼‰ cd /etc/keepalived vim check_nginx_alive.sh #!/bin/bash A=`ps -C nginx --no-header | wc -l` # è¿›ç¨‹æ•°æ˜¯0çš„è¯ï¼Œå°±å°è¯•é‡å¯nginx if [ $A -eq 0 ]; then /usr/local/nginx/sbin/nginx # ç­‰ä¸€ä¼šå„¿å†æ¬¡æ£€æŸ¥ngxinï¼Œå¦‚æœnginxæ²¡æœ‰å¯åŠ¨æˆåŠŸï¼Œåˆ™åœæ­¢å½“å‰æœºå™¨çš„keepalivedï¼Œä½¿ç”¨å¤‡ç”¨æœºå™¨ sleep 3 if [ `ps -C nginx --no-header | wc -l` -eq 0 ]; then killall keepalived fi fi æ‰§è¡Œè¿™ä¸ªè„šæœ¬åï¼Œä¼šæ£€æµ‹nginxï¼ŒæŒ‚æ‰ä¼šé‡å¯nginxã€‚ æˆ‘ä»¬å°†å®ƒé…ç½®åˆ°keepalivedé…ç½®æ–‡ä»¶é‡Œã€‚ ! Configuration File for keepalived global_defs { router_id keep_140 } vrrp_script check_nginx_alive { script \"/etc/keepalived/check_nginx_alive.sh\" interval 2 #æ¯éš”ä¸¤ç§’é’Ÿè¿è¡Œè„šæœ¬æ£€æµ‹ weight 10 #è„šæœ¬è¿è¡ŒæˆåŠŸï¼Œå‡çº§æƒé‡+10 } vrrp_instance VI_1 { state MASTER interface ens33 virtual_router_id 51 priority 100 advert_int 1 authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 10.4.7.211 } #åœ¨æ­¤æ‰§è¡Œä¸Šé¢çš„å®šæ—¶å™¨ track_script{ check_nginx_alive } } åŒæœºä¸»å¤‡ç¼ºç‚¹ è¿™æ ·æˆ‘ä»¬å°±èƒ½ä¿è¯é«˜å¯ç”¨çš„æ¶æ„äº†ï¼Œä½†æ˜¯åŒæœºä¸»å¤‡ä¼šæœ‰èµ„æºæµªè´¹çš„é—®é¢˜ï¼Œä¸»æœºæ°¸è¿œä¸æŒ‚æœºï¼Œå¤‡æœºç™½å¹²æ´»å„¿ã€‚ Keepalived åŒä¸»çƒ­å¤‡ åŒæœºä½¿ç”¨ä¸¤ä¸ªè™šæ‹ŸIPï¼Œäº’ä¸ºä¸»å¤‡ã€‚ ä½¿ç”¨DNSè½®è¯¢ä¸¤ä¸ªè™šæ‹ŸIPè¿›è¡Œè®¿é—®ï¼Œè¿™æ ·ä¸¤å°æœåŠ¡å™¨éƒ½å¯ä»¥ä½¿ç”¨äº†ã€‚è§£æåŸŸåçš„æ—¶å€™ï¼Œç»™åŸŸåè§£æä¸¤ä¸ªäº‘æœåŠ¡å™¨çš„ipåœ°å€ï¼Œå†å‡è¡¡æƒé‡å³å¯ã€‚ é…ç½®ï¼ˆåŸä¸»èŠ‚ç‚¹ï¼‰ï¼š ! Configuration File for keepalived global_defs { router_id keep_140 } vrrp_script check_nginx_alive { script \"/etc/keepalived/check_nginx_alive.sh\" interval 2 #æ¯éš”ä¸¤ç§’é’Ÿè¿è¡Œè„šæœ¬æ£€æµ‹ weight 10 #è„šæœ¬è¿è¡ŒæˆåŠŸï¼Œå‡çº§æƒé‡+10 } #211ä¸»èŠ‚ç‚¹ vrrp_instance VI_1 { state MASTER interface ens33 virtual_router_id 51 priority 100 advert_int 1 authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 10.4.7.211 } track_script{ check_nginx_alive } } #212ä»èŠ‚ç‚¹ vrrp_instance VI_2 { #åå­—è¦æ”¹ state BACKUP interface ens33 virtual_router_id 52 #æ¢äº†ä¸€ç»„å®ä¾‹ï¼Œæ”¹ priority 80 advert_int 1 authentication { auth_type PASS auth_pass 1111 } track_script { check_nginx_alive } virtual_ipaddress { 10.4.7.212 #VIPæ›´æ”¹ è™šæ‹Ÿip virtual IP } track_script{ check_nginx_alive } } é…ç½®ï¼ˆåŸä»èŠ‚ç‚¹ï¼‰ï¼š ! Configuration File for keepalived global_defs { router_id keep_141 } vrrp_script check_nginx_alive { script \"/etc/keepalived/check_nginx_alive.sh\" interval 2 #æ¯éš”ä¸¤ç§’é’Ÿè¿è¡Œè„šæœ¬æ£€æµ‹ weight 10 #è„šæœ¬è¿è¡ŒæˆåŠŸï¼Œå‡çº§æƒé‡+10 } #211ä»èŠ‚ç‚¹ vrrp_instance VI_1 { state BACKUP interface ens33 virtual_router_id 51 priority 80 advert_int 1 authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 10.4.7.211 } track_script { check_nginx_alive } } #212ä¸»èŠ‚ç‚¹ vrrp_instance VI_2 { #ç¬¬äºŒç»„å®ä¾‹ state MASTER interface ens33 virtual_router_id 52 #ç¬¬äºŒç»„router_id priority 100 advert_int 1 authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 10.4.7.212 #æ”¹ä¸ºç¬¬äºŒä¸ªè™šæ‹Ÿip } track_script { check_nginx_alive } } ","date":"2022-01-02","objectID":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:28:2","tags":["nginx"],"title":"nginxå®‰è£…ä¸ä½¿ç”¨","uri":"/nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"Kubernetes ï¼ˆ1.22.2ï¼‰å®‰è£…æ‰‹å†Œï¼ˆUbuntuéé«˜å¯ç”¨ç‰ˆï¼‰ ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:0:0","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"å®‰è£…å‰å‡†å¤‡å·¥ä½œ ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:1:0","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"ï¼ˆé‡è¦ï¼ï¼‰å®‰è£…k8s 1.22.2 ç‰ˆæœ¬éœ€è¦çš„ç¡¬ä»¶æ¡ä»¶ï¼š æ‰€æœ‰èŠ‚ç‚¹ï¼š cpuæ•°é‡2ä¸ªåŠä»¥ä¸Š 4G ä»¥ä¸Šå†…å­˜ ä¸ç”¨å¼€è™šæ‹ŸåŒ– (é‡è¦ï¼ï¼)è™šæ‹Ÿæœºä¸è¦ç”¨å…‹éš†ï¼Œæ¯å°éƒ½è¦å•ç‹¬åˆ›å»ºå¦åˆ™ä¼šå‡ºé—®é¢˜ã€‚ æœªå®‰è£…docker ä¹‹å‰åˆ›å»ºä¸€ä¸ªå¿«ç…§ã€‚ å®‰è£…dockerã€kubeletï¼Œå¹¶åˆå§‹åŒ–é›†ç¾¤ååœ¨åˆ›å»ºä¸€ä¸ªå¿«ç…§ã€‚ æœªå®‰è£…cniæ’ä»¶ä¹‹å‰åˆ›å»ºä¸€ä¸ªå¿«ç…§ï¼Œä»¥ä¾¿äºéšæ—¶æ›´æ”¹calico å’Œfluence kubeadm åˆå§‹åŒ–å¤±è´¥æ£€æŸ¥ï¼Œé‡ç½®kubeadmã€‚ ip åœ°å€è§„åˆ’ï¼š master: 10.4.7.60/24 gw:10.4.7.254 dns:114.114.114.114 worker1: 10.4.7.61/24 gw:10.4.7.254 dns:114.114.114.114 worker1: 10.4.7.61/24 gw:10.4.7.254 dns:114.114.114.114 å„èŠ‚ç‚¹å®‰è£…æ—¶éœ€è¦æ›´æ¢aptæºï¼š(æ›´æ–°å’Œå®‰è£…debåŒ…éƒ½å¾ˆå¿«ï¼ï¼ï¼) http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:1:1","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"1. è®¾ç½®hostsè§£æ æ“ä½œèŠ‚ç‚¹ï¼šæ‰€æœ‰èŠ‚ç‚¹ï¼ˆmasterï¼‰å‡éœ€æ‰§è¡Œ ä¿®æ”¹hostname hostnameå¿…é¡»åªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—ã€\",\"ã€\"-\"ï¼Œä¸”å¼€å¤´ç»“å°¾å¿…é¡»æ˜¯å°å†™å­—æ¯æˆ–æ•°å­— # åœ¨masterèŠ‚ç‚¹ hostnamectl set-hostname master #è®¾ç½®masterèŠ‚ç‚¹çš„hostname # slave1èŠ‚ç‚¹ hostnamectl set-hostname worker1 # slave2èŠ‚ç‚¹ hostnamectl set-hostname worker2 ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:1:2","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"2. è°ƒæ•´ç³»ç»Ÿé…ç½® æ“ä½œèŠ‚ç‚¹ï¼š æ‰€æœ‰çš„masterå’ŒslaveèŠ‚ç‚¹ï¼ˆmaster,k8s-slaveï¼‰éœ€è¦æ‰§è¡Œ æœ¬ç« ä¸‹è¿°æ“ä½œå‡ä»¥masterä¸ºä¾‹ï¼Œå…¶ä»–èŠ‚ç‚¹å‡æ˜¯ç›¸åŒçš„æ“ä½œï¼ˆipå’Œhostnameçš„å€¼æ¢æˆå¯¹åº”æœºå™¨çš„çœŸå®å€¼ï¼‰ è®¾ç½®iptables iptables -P FORWARD ACCEPT /etc/init.d/ufw stop ufw disable å…³é—­swap swapoff -a # é˜²æ­¢å¼€æœºè‡ªåŠ¨æŒ‚è½½ swap åˆ†åŒº rm /swap.img sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab ä¿®æ”¹å†…æ ¸å‚æ•° cat \u003c\u003cEOF \u003e /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 net.ipv4.ip_forward=1 vm.max_map_count=262144 EOF modprobe br_netfilter sysctl -p /etc/sysctl.d/k8s.conf è®¾ç½®aptæº apt-get update \u0026\u0026 apt-get install -y apt-transport-https ca-certificates software-properties-common curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add - add-apt-repository \"deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu $(lsb_release -cs) stable\" add-apt-repository \"deb [arch=amd64] https://mirrors.aliyun.com/kubernetes/apt kubernetes-xenial main\" apt-get update #è‹¥ä¸Šæ­¥å‡ºç°NO_PUBLICKEYé—®é¢˜ï¼Œå‚è€ƒhttps://www.cnblogs.com/jiangzuo/p/13667011.html ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:1:3","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"3. å®‰è£…docker æ“ä½œèŠ‚ç‚¹ï¼š æ‰€æœ‰èŠ‚ç‚¹ apt-get install docker-ce=5:20.10.9~3-0~ubuntu-focal systemctl enable docker \u0026\u0026 systemctl start docker æ³¨æ„è¦å…³é—­docker é»˜è®¤çš„cgroup å¦åˆ™ä¼šå‡ºç°kubeadm åˆå§‹åŒ–å¤±è´¥ï¼ï¼ï¼ï¼ è¿™æ˜¯cgroupé©±åŠ¨é—®é¢˜ã€‚é»˜è®¤æƒ…å†µä¸‹Kubernetes cgroupé©±åŠ¨ç¨‹åºè®¾ç½®ä¸ºsystemï¼Œä½†dockerè®¾ç½®ä¸ºsystemdã€‚æˆ‘ä»¬éœ€è¦æ›´æ”¹Docker cgroupé©±åŠ¨ï¼Œé€šè¿‡åˆ›å»ºé…ç½®æ–‡ä»¶/etc/docker/daemon.jsonå¹¶æ·»åŠ ä»¥ä¸‹è¡Œï¼š {\"exec-opts\": [\"native.cgroupdriver=systemd\"]} ç„¶åï¼Œä¸ºä½¿é…ç½®ç”Ÿæ•ˆï¼Œä½ å¿…é¡»é‡å¯dockerå’Œkubeletã€‚ systemctl daemon-reloadsystemctl restart dockersystemctl restart kubelet é‡ç½®kubeadm sudo kubeadm reset æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹æ˜¯å¦æœ‰æ±¡ç‚¹ kubectl get nodes -o json | jq '.items[].spec.taints' ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:1:4","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"ç»™kubectl è®¾ç½®åˆ«åä¸ºkï¼Œæ°¸ä¹…ç”Ÿæ•ˆã€‚ é€€å‡ºå½“å‰ç”¨æˆ·åœ¨è¿›å…¥å°±ç”Ÿæ•ˆäº†ã€‚ vi .bashrc alias k='kubectl' source ~/.bashrc åˆ é™¤masterèŠ‚ç‚¹ä¸Šçš„æ±¡ç‚¹ï¼Œåˆ é™¤åpodå¯ä»¥è°ƒåº¦åˆ°masterä¸Šã€‚ kubectl taint nodes --all node-role.kubernetes.io/master- ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:1:5","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨kubectlä¸­çš„å¼ºåˆ¶åˆ é™¤å‘½ä»¤ kubectl delete pod podName -n NAMESPACE --force --grace-period=0 ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:1:6","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"è‡ªåŠ¨è¡¥å…¨ apt install bash-completion // locate bash_completion source /usr/share/bash-completion/bash_completion source \u003c(kubectl completion bash) echo \"source \u003c(kubectl completion bash)\" \u003e\u003e ~/.bashrc source ~/.bashrc æŸ¥çœ‹æ‰€æœ‰pod kubectl get po -owide -A ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:1:7","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"éƒ¨ç½²kubernetes ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:0","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"1. å®‰è£… kubeadm, kubelet å’Œ kubectl æ“ä½œèŠ‚ç‚¹ï¼š æ‰€æœ‰çš„masterå’ŒslaveèŠ‚ç‚¹(master,k8s-slave) éœ€è¦æ‰§è¡Œ apt-get install kubelet=1.22.2-00 kubectl=1.22.2-00 kubeadm=1.22.2-00 ## æŸ¥çœ‹kubeadm ç‰ˆæœ¬ kubeadm version ## è®¾ç½®kubeletå¼€æœºå¯åŠ¨ systemctl enable kubelet ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:1","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"2. åˆå§‹åŒ–é…ç½®æ–‡ä»¶ æ“ä½œèŠ‚ç‚¹ï¼š åªåœ¨masterèŠ‚ç‚¹ï¼ˆmasterï¼‰æ‰§è¡Œ kubeadm config print init-defaults \u003e kubeadm.yaml apiVersion: kubeadm.k8s.io/v1beta3 bootstrapTokens: - groups: - system:bootstrappers:kubeadm:default-node-token token: abcdef.0123456789abcdef ttl: 24h0m0s usages: - signing - authentication kind: InitConfigurationx localAPIEndpoint: advertiseAddress: 10.4.7.60 #ä¿®æ”¹ä¸ºmaster çš„IP bindPort: 6443 nodeRegistration: criSocket: /var/run/dockershim.sock name: node # åˆ æ‰æ­¤è¡Œï¼Œåˆ æ‰æ­¤è¡Œï¼Œåˆ æ‰æ­¤è¡Œ imagePullPolicy: IfNotPresent taints: null --- apiServer: timeoutForControlPlane: 4m0s apiVersion: kubeadm.k8s.io/v1beta3 certificatesDir: /etc/kubernetes/pki clusterName: kubernetes controllerManager: {} dns: {} etcd: local: dataDir: /var/lib/etcd imageRepository: registry.aliyuncs.com/google_containers kind: ClusterConfiguration kubernetesVersion: 1.22.2 networking: dnsDomain: cluster.local podSubnet: 10.244.0.0/16 #æ·»åŠ æ­¤è¡Œ serviceSubnet: 10.96.0.0/12 scheduler: {} ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:2","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"3. æå‰ä¸‹è½½é•œåƒ æ“ä½œèŠ‚ç‚¹ï¼šåªåœ¨masterèŠ‚ç‚¹ï¼ˆmasterï¼‰æ‰§è¡Œ # æå‰ä¸‹è½½é•œåƒåˆ°æœ¬åœ° kubeadm config images pull --config kubeadm.yaml [config/images] Pulled registry.aliyuncs.com/google_containers/kube-apiserver:v1.22.2 [config/images] Pulled registry.aliyuncs.com/google_containers/kube-controller-manager:v1.22.2 [config/images] Pulled registry.aliyuncs.com/google_containers/kube-scheduler:v1.22.2 [config/images] Pulled registry.aliyuncs.com/google_containers/kube-proxy:v1.22.2 [config/images] Pulled registry.aliyuncs.com/google_containers/pause:3.5 [config/images] Pulled registry.aliyuncs.com/google_containers/etcd:3.5.0-0 [config/images] Pulled registry.aliyuncs.com/google_containers/coredns:v1.8.4 ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:3","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"4. åˆå§‹åŒ–masterèŠ‚ç‚¹ æ“ä½œèŠ‚ç‚¹ï¼šåªåœ¨masterèŠ‚ç‚¹ï¼ˆk8s-masterï¼‰æ‰§è¡Œ kubeadm init --config kubeadm.yaml è‹¥åˆå§‹åŒ–æˆåŠŸåï¼Œæœ€åä¼šæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š ... To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config Alternatively, if you are the root user, you can run: export KUBECONFIG=/etc/kubernetes/admin.conf You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ Then you can join any number of worker nodes by running the following on each as root: kubeadm join 10.4.7.60:6443 --token abcdef.0123456789abcdef \\ --discovery-token-ca-cert-hash sha256:3a7987c9f5007ebac7980e6614281ee0e064c760c8db012471f9f662289cc9ce æ¥ä¸‹æ¥æŒ‰ç…§ä¸Šè¿°æç¤ºä¿¡æ¯æ“ä½œï¼Œé…ç½®kubectlå®¢æˆ·ç«¯çš„è®¤è¯ mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config **âš ï¸æ³¨æ„ï¼š**æ­¤æ—¶ä½¿ç”¨ kubectl get nodesæŸ¥çœ‹èŠ‚ç‚¹åº”è¯¥å¤„äºnotReadyçŠ¶æ€ï¼Œå› ä¸ºè¿˜æœªé…ç½®ç½‘ç»œæ’ä»¶ è‹¥æ‰§è¡Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­å‡ºé”™ï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯è°ƒæ•´åï¼Œæ‰§è¡Œkubeadm resetåå†æ¬¡æ‰§è¡Œinitæ“ä½œå³å¯ ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:4","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"5. æ·»åŠ slaveèŠ‚ç‚¹åˆ°é›†ç¾¤ä¸­ æ“ä½œèŠ‚ç‚¹ï¼šæ‰€æœ‰çš„slaveèŠ‚ç‚¹ï¼ˆworker1`worker2`ï¼‰éœ€è¦æ‰§è¡Œ åœ¨æ¯å°slaveèŠ‚ç‚¹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œè¯¥å‘½ä»¤æ˜¯åœ¨kubeadm initæˆåŠŸåæç¤ºä¿¡æ¯ä¸­æ‰“å°å‡ºæ¥çš„ï¼Œéœ€è¦æ›¿æ¢æˆå®é™…initåæ‰“å°å‡ºçš„å‘½ä»¤ã€‚ kubeadm join 10.4.7.60:6443 --token abcdef.0123456789abcdef \\ --discovery-token-ca-cert-hash sha256:3a7987c9f5007ebac7980e6614281ee0e064c760c8db012471f9f662289cc9ce ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:5","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"6. å®‰è£…calicoæ’ä»¶ æ“ä½œèŠ‚ç‚¹ï¼šåªåœ¨masterèŠ‚ç‚¹ï¼ˆmasterï¼‰æ‰§è¡Œ æ–¹å¼ä¸€ï¼šç›´æ¥å®‰è£…ï¼ˆæœªä½¿ç”¨ï¼ï¼ï¼ï¼‰ ä¸‹è½½èµ„æºæ–‡ä»¶ wget https://docs.projectcalico.org/manifests/calico-etcd.yaml ä¿®æ”¹é…ç½® æ³¨é‡Šæ‰æ–‡ä»¶çš„å‰22è¡Œ 1 --- 2 # Source: calico/templates/calico-etcd-secrets.yaml 3 # The following contains k8s Secrets for use with a TLS enabled etcd cluster. 4 # For information on populating Secrets, see http://kubernetes.io/docs/user-guide/secrets/ 5 #apiVersion: v1 6 #kind: Secret 7 #type: Opaque 8 #metadata: 9 # name: calico-etcd-secrets 10 # namespace: kube-system 11 #data: 12 # Populate the following with etcd TLS configuration if desired, but leave blank if 13 # not using TLS for etcd. 14 # The keys below should be uncommented and the values populated with the base64 15 # encoded contents of each file that would be associated with the TLS data. 16 # Example command for encoding a file contents: cat \u003cfile\u003e | base64 -w 0 17 # etcd-key: null 18 # etcd-cert: null 19 # etcd-ca: null 20 --- 21 # Source: calico/templates/calico-config.yaml 22 # This ConfigMap is used to configure a self-hosted Calico installation. 23 kind: ConfigMap 24 apiVersion: v1 25 metadata: 26 name: calico-config 27 namespace: kube-system ... ä¿®æ”¹configmap æ³¨æ„30-35è¡Œï¼Œå…¶ä¸­etcd_endpointsæ¢æˆç¯å¢ƒçš„etcdåœ°å€ 23 kind: ConfigMap 24 apiVersion: v1 25 metadata: 26 name: calico-config 27 namespace: kube-system 28 data: 29 # Configure this with the location of your etcd cluster. 30 etcd_endpoints: \"https://10.4.7.60:2379\" 31 # If you're using TLS enabled etcd uncomment the following. 32 # You must also populate the Secret below with these files. 33 etcd_ca: \"/calico-secrets/etcd-ca\" # \"/calico-secrets/etcd-ca\" 34 etcd_cert: \"/calico-secrets/etcd-cert\" # \"/calico-secrets/etcd-cert\" 35 etcd_key: \"/calico-secrets/etcd-key\" # \"/calico-secrets/etcd-key\" 36 # Typha is disabled. 37 typha_service_name: \"none\" 38 # Configure the backend to use. 39 calico_backend: \"bird\" æ·»åŠ calico-nodeç¯å¢ƒå˜é‡ æ³¨æ„297-302è¡Œä¸ºæ–°æ·»åŠ  285 containers: 286 # Runs calico-node container on each Kubernetes node. This 287 # container programs network policy and routes on each 288 # host. 289 - name: calico-node 290 image: docker.io/calico/node:v3.20.0 291 envFrom: 292 - configMapRef: 293 # Allow KUBERNETES_SERVICE_HOST and KUBERNETES_SERVICE_PORT to be overridden for eBPF mode. 294 name: kubernetes-services-endpoint 295 optional: true 296 env: 297 - name: KUBERNETES_SERVICE_HOST 298 value: \"10.4.7.60\" 299 - name: KUBERNETES_SERVICE_PORT 300 value: \"6443\" 301 - name: KUBERNETES_SERVICE_PORT_HTTPS 302 value: \"6443\" 303 # The location of the etcd cluster. 304 - name: ETCD_ENDPOINTS 305 valueFrom: 306 configMapKeyRef: 307 name: calico-config 308 key: etcd_endpoints 309 # Location of the CA certificate for etcd. 310 - name: ETCD_CA_CERT_FILE ä¿®æ”¹CIDR æ³¨æ„371-372è¡Œï¼Œvalueå€¼ä¸ºk8sé›†ç¾¤åˆå§‹åŒ–çš„pod-network-cidr 370 # no effect. This should fall within `--cluster-cidr`. 371 - name: CALICO_IPV4POOL_CIDR 372 value: \"10.244.0.0/16\" 373 # Disable file logging so `kubectl logs` works. 374 - name: CALICO_DISABLE_FILE_LOGGING 375 value: \"true\" åˆ›å»ºsecret kubectl -n kube-system create secret generic calico-etcd-secrets --from-file=etcd-ca=/etc/kubernetes/pki/etcd/ca.crt --from-file=etcd-cert=/etc/kubernetes/pki/etcd/healthcheck-client.crt --from-file=etcd-key=/etc/kubernetes/pki/etcd/healthcheck-client.key åˆ›å»ºcalicoèµ„æºæ¸…å• kubectl apply -f calico-etcd.yaml â€‹ ç­‰å¾…podå¯åŠ¨å®Œæˆ kubectl -n kube-system get po NAME READY STATUS RESTARTS AGE calico-kube-controllers-59db5cf8fd-fpzdq 1/1 Running 1 32m calico-node-d2xq4 1/1 Running 1 32m calico-node-ppzjk calicoæ’ä»¶åŒ…ï¼š docker.io/calico/cni:v3.20.2 docker.io/calico/pod2daemon-flexvol:v3.20.2 docker.io/calico/node:v3.20.2 æ–¹å¼äºŒï¼šä½¿ç”¨operatorå®‰è£…(å·²æˆåŠŸï¼ï¼ï¼ï¼ï¼ï¼) å®‰è£…operator kubectl create -f https://docs.projectcalico.org/manifests/tigera-operator.yaml ç­‰å¾…operator podå®‰è£…å¯åŠ¨å®Œæˆ kubectl -n tigera-operator get po NAME READY STATUS RESTARTS AGE tigera-operator-698876cbb5-kfpb2 1/1 Running 0 38m é•œåƒæ‹‰å–æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥æ‰‹åŠ¨å»èŠ‚ç‚¹docker pullæ‹‰å– ç¼–è¾‘calicoé…ç½® vim custom-resources.yaml apiVersion: operator.tigera.io/v1 kind: Installation metadata: name: default","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:6","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"7. éªŒè¯é›†ç¾¤ æ“ä½œèŠ‚ç‚¹ï¼š åœ¨masterèŠ‚ç‚¹ï¼ˆk8s-masterï¼‰æ‰§è¡Œ kubectl get nodes #è§‚å¯Ÿé›†ç¾¤èŠ‚ç‚¹æ˜¯å¦å…¨éƒ¨Ready åˆ›å»ºæµ‹è¯•nginxæœåŠ¡ kubectl run test-nginx --image=nginx:alpine æŸ¥çœ‹podæ˜¯å¦åˆ›å»ºæˆåŠŸï¼Œå¹¶è®¿é—®pod ipæµ‹è¯•æ˜¯å¦å¯ç”¨ kubectl get po -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES test-nginx-5bd8859b98-5nnnw 1/1 Running 0 9s 10.244.1.2 k8s-slave1 \u003cnone\u003e \u003cnone\u003e curl 10.244.1.2 ... \u003ch1\u003eWelcome to nginx!\u003c/h1\u003e \u003cp\u003eIf you see this page, the nginx web server is successfully installed and working. Further configuration is required.\u003c/p\u003e \u003cp\u003eFor online documentation and support please refer to \u003ca href=\"http://nginx.org/\"\u003enginx.org\u003c/a\u003e.\u003cbr/\u003e Commercial support is available at \u003ca href=\"http://nginx.com/\"\u003enginx.com\u003c/a\u003e.\u003c/p\u003e \u003cp\u003e\u003cem\u003eThank you for using nginx.\u003c/em\u003e\u003c/p\u003e \u003c/body\u003e \u003c/html\u003e ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:7","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["ç¼–ç¨‹"],"content":"8. æ¸…ç†ç¯å¢ƒ å¦‚æœä½ çš„é›†ç¾¤å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°äº†å…¶ä»–é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥è¿›è¡Œé‡ç½®ï¼š # åœ¨å…¨éƒ¨é›†ç¾¤èŠ‚ç‚¹æ‰§è¡Œ kubeadm reset ifconfig cni0 down \u0026\u0026 ip link delete cni0 ifconfig flannel.1 down \u0026\u0026 ip link delete flannel.1 rm -rf /run/flannel/subnet.env rm -rf /var/lib/cni/ mv /etc/kubernetes/ /tmp mv /var/lib/etcd /tmp mv ~/.kube /tmp iptables -F iptables -t nat -F ipvsadm -C ip link del kube-ipvs0 ip link del dummy0 è®¾ç½®aptæºæŠ¥é”™ã€‚æ¢æº apt-get update \u0026\u0026 apt-get install -y apt-transport-https ca-certificates software-properties-common curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | apt-key add - add-apt-repository \"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\" add-apt-repository \"deb [arch=amd64] https://mirrors.aliyun.com/kubernetes/apt kubernetes-xenial main\" apt-get update #è‹¥ä¸Šæ­¥å‡ºç°NO_PUBLICKEYé—®é¢˜ï¼Œå‚è€ƒhttps://www.cnblogs.com/jiangzuo/p/13667011.html æœªå®‰è£…cniæ’ä»¶podçŠ¶æ€ coredns-7f6cbbb7b8-c778v pod ä¸èƒ½å¯åŠ¨å› ä¸ºæœªå®‰è£…cniæ’ä»¶ã€‚ events: Warning FailedScheduling 43s (x2 over 2m13s) default-scheduler 0/3 nodes are available: 3 node(s) had taint {node.kubernetes.io/not-ready: }, that the pod didn't tolerate. root@master:~# k get po -A -owide NAMESPACE NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES kube-system coredns-7f6cbbb7b8-c778v 0/1 Pending 0 3m54s \u003cnone\u003e \u003cnone\u003e \u003cnone\u003e \u003cnone\u003e kube-system coredns-7f6cbbb7b8-px7cm 0/1 Pending 0 3m54s \u003cnone\u003e \u003cnone\u003e \u003cnone\u003e \u003cnone\u003e kube-system etcd-master 1/1 Running 0 4m7s 10.4.7.70 master \u003cnone\u003e \u003cnone\u003e kube-system kube-apiserver-master 1/1 Running 0 4m7s 10.4.7.70 master \u003cnone\u003e \u003cnone\u003e kube-system kube-controller-manager-master 1/1 Running 0 4m7s 10.4.7.70 master \u003cnone\u003e \u003cnone\u003e kube-system kube-proxy-5w6c4 1/1 Running 0 3m23s 10.4.7.71 worker1 \u003cnone\u003e \u003cnone\u003e kube-system kube-proxy-6jnkr 1/1 Running 0 3m20s 10.4.7.72 worker2 \u003cnone\u003e \u003cnone\u003e kube-system kube-proxy-hcwtz 1/1 Running 0 3m54s 10.4.7.70 master \u003cnone\u003e \u003cnone\u003e kube-system kube-scheduler-master 1/1 Running 0 4m8s 10.4.7.70 master \u003cnone\u003e \u003cnone\u003e ","date":"2022-01-02","objectID":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/:2:8","tags":["k8s"],"title":"k8sé›†ç¾¤æ­å»º","uri":"/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"},{"categories":["å·¥å…·"],"content":"ä¸€ã€Ubuntu20.10 server LTSå®‰è£… LTSï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼‰ æ”¯æŒä»¥ä¸‹å¤„ç†å™¨ amd64 (Intel/AMD 64-bit) arm64 (64-bit ARM) ppc64el (POWER8 and POWER9) s390x (IBM Z and LinuxONE) æœ€ä½é…ç½® CPU: 1gæˆ–è€…æ›´é«˜ RAM: 1gæˆ–è€…æ›´é«˜ Disk: ä¸å°äº2.5G æ¡Œé¢ç‰ˆå’ŒæœåŠ¡å™¨ç‰ˆä¸åŒ UbuntuæœåŠ¡å™¨ç‰ˆå’ŒUbuntuæ¡Œé¢ç‰ˆä½¿ç”¨ç›¸åŒçš„Aptåº“ã€‚ ä¸€ä¸ªä¸»è¦åŒºåˆ«æ˜¯ç”¨äºæ¡Œé¢ç‰ˆçš„å›¾å½¢ç¯å¢ƒæ²¡æœ‰ä¸ºæœåŠ¡å™¨å®‰è£…ã€‚è¿™åŒ…æ‹¬å›¾å½¢æœåŠ¡å™¨æœ¬èº«ã€å›¾å½¢å®ç”¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºï¼Œä»¥åŠæ¡Œé¢ç”¨æˆ·æ‰€éœ€çš„å„ç§ç”¨æˆ·æ”¯æŒæœåŠ¡ã€‚ é•œåƒä¸‹è½½åœ°å€ https://releases.ubuntu.com/20.04/ å¼€æœºå¼•å¯¼å¯åŠ¨ ESCã€F2ã€F10ã€æˆ–F12 å¿«æ·é”® ESC go back F1 open help menu Control-Z, F2 switch to shell Control-L, F3 redraw screen Control-T, F4 toggle rich mode (colour, unicode) on and off æ›´æ¢æ¸…åæº å‚è€ƒ 1.å¤‡ä»½æºæ–‡ä»¶ sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 2.æ‰“å¼€sources.list: sudo gedit /etc/apt/sources.list åŠ å…¥æ¸…åæº deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal universe deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates universe deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security universe deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security multiverse 3.åˆ·æ–°è½¯ä»¶æºä¿¡æ¯ï¼š sudo apt-get update 4.æ›´æ–°è½¯ä»¶ sudo apt-get upgrade 5.å¦‚æœæ›´æ–°æŠ¥ä»¥ä¸‹é”™è¯¯ Ign:1 https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal InRelease Ign:2 https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal-updates InRelease Ign:3 https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal-backports InRelease Ign:4 https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal-security InRelease Err:5 https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal Release Certificate verification failed: The certificate is NOT trusted. The certificate chain uses expired certificate. Could not handshake: Error in the certificate verification. [IP: 101.6.15.130 443] Err:6 https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal-updates Release Certificate verification failed: The certificate is NOT trusted. The certificate chain uses expired certificate. Could not handshake: Error in the certificate verification. [IP: 101.6.15.130 443] Err:7 https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal-backports Release Certificate verification failed: The certificate is NOT trusted. The certificate chain uses expired certificate. Could not handshake: Error in the certificate verification. [IP: 101.6.15.130 443] Err:8 https://mirrors.tuna.tsinghua.edu.cn/ubuntu focal-security Release Certificate verification failed: The certificate is NOT trusted. The certificate chain uses expired certificate. Could not handshake: Error in the certificate verification. [IP: 101.6.15.130 443] å°†æºä¸­httpsæ”¹ä¸ºhttpå³å¯ ","date":"2022-01-02","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/:0:1","tags":["ubuntu"],"title":"ubuntuä½¿ç”¨ä¸Šç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"äºŒã€åŒ…ç®¡ç† åç¼€åä¸º.deb å®‰è£…è½¯ä»¶åŒ…nmap sudo apt install nmap å¸è½½è½¯ä»¶åŒ…nmap sudo apt remove nmap å¸è½½å¤šä¸ªåŒ…ç”¨ç©ºæ ¼åˆ†éš”ã€‚ æ›´æ–°åŒ…ç´¢å¼• APT åŒ…ç´¢å¼•æœ¬è´¨ä¸Šæ˜¯/etc/apt/sources.listæ–‡ä»¶å’Œ/etc/apt/sources.list.dç›®å½•ä¸­å®šä¹‰çš„å­˜å‚¨åº“ä¸­å¯ç”¨åŒ…çš„æ•°æ®åº“ã€‚ sudo apt update aptitude-åŒ…ç®¡ç†å·¥å…· aptitude åœ¨åˆ é™¤ä¸€ä¸ªåŒ…æ—¶ï¼Œä¼šåŒæ—¶åˆ é™¤æœ¬èº«æ‰€ä¾èµ–çš„åŒ…ã€‚è¿™æ ·ï¼Œç³»ç»Ÿä¸­ä¸ä¼šæ®‹ç•™æ— ç”¨çš„åŒ…ï¼Œæ•´ä¸ªç³»ç»Ÿæ›´ä¸ºå¹²å‡€ã€‚ å¸¸ç”¨åŒ…ç®¡ç†å‘½ä»¤ aptitude update æ›´æ–°å¯ç”¨çš„åŒ…åˆ—è¡¨ aptitude upgrade å‡çº§å¯ç”¨çš„åŒ… aptitude dist-upgrade å°†ç³»ç»Ÿå‡çº§åˆ°æ–°çš„å‘è¡Œç‰ˆ aptitude install pkgname å®‰è£…åŒ… aptitude remove pkgname åˆ é™¤åŒ… aptitude purge pkgname åˆ é™¤åŒ…åŠå…¶é…ç½®æ–‡ä»¶ aptitude search string æœç´¢åŒ… aptitude show pkgname æ˜¾ç¤ºåŒ…çš„è¯¦ç»†ä¿¡æ¯ aptitude clean åˆ é™¤ä¸‹è½½çš„åŒ…æ–‡ä»¶ aptitude autoclean ä»…åˆ é™¤è¿‡æœŸçš„åŒ…æ–‡ä»¶ æŸ¥çœ‹ç¨‹åºæ‰€éœ€ä¾èµ–åŒ… root@liujie-desktop:~# apt-cache depends freeradius freeradius ä¾èµ–: lsb-base ä¾èµ–: libc6 ä¾èµ–: libfreeradius2 ä¾èµ–: libgdbm3 ä¾èµ–: libltdl7 ä¾èµ–: libpam0g ä¾èµ–: libperl5.10 ä¾èµ–: libpython2.6 ä¾èµ–: libssl0.9.8 ä¾èµ–: zlib1g ä¾èµ–: freeradius-common ä¾èµ–: ssl-cert ä¾èµ–: adduser å»ºè®®: freeradius-ldap å»ºè®®: freeradius-postgresql å»ºè®®: freeradius-mysql å»ºè®®: freeradius-krb5 aptitude å®‰è£…nmap sudo aptitude install nmap aptitude å¸è½½nmap sudo aptitude remove nmap dpkg-åŒ…ç®¡ç†å™¨ å®ƒå¯ä»¥å®‰è£…ã€åˆ é™¤å’Œæ„å»ºåŒ…ï¼Œä½†ä¸å…¶ä»–åŒ…ç®¡ç†ç³»ç»Ÿä¸åŒï¼Œå®ƒä¸èƒ½è‡ªåŠ¨ä¸‹è½½å’Œå®‰è£…åŒ…æˆ–å…¶ä¾èµ–é¡¹ã€‚Aptå’ŒAptitude æ˜¯è¾ƒæ–°çš„ï¼Œå¹¶ä¸”åœ¨ dpkg ä¹‹ä¸Šæ·»åŠ äº†é™„åŠ åŠŸèƒ½ã€‚ åˆ—å‡ºç³»ç»ŸåŒ…æ•°æ®åº“ä¸­çš„æ‰€æœ‰åŒ…ï¼ŒåŒ…æ‹¬æ‰€æœ‰å·²å®‰è£…å’Œå·²å¸è½½çš„åŒ…ã€‚ dpkg -l é€šè¿‡ grep ç®¡é“è¾“å‡ºä»¥æŸ¥çœ‹æ˜¯å¦å®‰è£…äº†ç‰¹å®šçš„åŒ…ï¼š dpkg -l | grep apache2 è¦åˆ—å‡ºåŒ…å®‰è£…çš„æ–‡ä»¶ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º ufw åŒ…ï¼Œè¯·è¾“å…¥ï¼š dpkg -L ufw å¦‚æœä½ ä¸ç¡®å®šå®‰è£…äº†å“ªä¸ªåŒ…çš„æ–‡ä»¶ï¼Œdpkg -Sä¹Ÿè®¸å¯ä»¥å‘Šè¯‰ä½ ã€‚ä¾‹å¦‚ï¼š dpkg -S /etc/host.conf base-files: /etc/host.conf è¾“å‡ºæ˜¾ç¤º/etc/host.confå±äº base-files åŒ…ã€‚ æ‚¨å¯ä»¥.debé€šè¿‡è¾“å…¥ä»¥ä¸‹å†…å®¹æ¥å®‰è£…æœ¬åœ°æ–‡ä»¶ï¼š sudo dpkg -i zip_3.0-4_amd64.deb å¸è½½è½¯ä»¶åŒ…å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®Œæˆï¼š sudo dpkg -r zip æ³¨æ„ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸æ¨èä½¿ç”¨ dpkg å¸è½½è½¯ä»¶åŒ…ã€‚æœ€å¥½ä½¿ç”¨å¤„ç†ä¾èµ–å…³ç³»çš„åŒ…ç®¡ç†å™¨ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿå¤„äºä¸€è‡´çŠ¶æ€ã€‚å®ƒä¸ä¼šå¸è½½ç›¸å…³ä¾èµ–åŒ…ã€‚ ","date":"2022-01-02","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/:0:2","tags":["ubuntu"],"title":"ubuntuä½¿ç”¨ä¸Šç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"ä¸‰ã€æ— äººå€¼å®ˆæ‰¹é‡å®‰è£…Ubuntu server 20.04.3 ä½¿ç”¨PXEè‡ªåŠ¨ä»ç½‘ç»œåŠ è½½å®‰è£…ç¨‹åºï¼Œå‘èµ·å®‰è£…ã€‚ ä½¿ç”¨Ubuntuçš„è‡ªåŠ¨å®‰è£…åŠŸèƒ½ï¼Œè‡ªåŠ¨åŠ è½½cloud-initå®‰è£…é…ç½®ï¼Œå®Œæˆæ“ä½œç³»ç»Ÿçš„è‡ªåŠ¨é€‰æ‹©ã€‚ éœ€è¦è£…æœ‰pxeçš„æœåŠ¡ç«¯ï¼ŒæœåŠ¡å™¨éœ€è¦å®‰è£…çš„è½¯ä»¶æœ‰tftpå®¢æˆ·ç«¯ï¼Œdnsmasq æœåŠ¡ç«¯ï¼ŒtftpæœåŠ¡ç«¯å¯ä»¥åœ¨dnsmasq.confä¸­é…ç½®ã€‚ apt install tftp apt install dnsmasq éœ€è¦å®‰è£…ç³»ç»Ÿçš„å®¢æˆ·ç«¯ï¼ˆæ­¤æ—¶ç”¨è™šæ‹Ÿæœºåˆ›å»ºä¸€ä¸ªç©ºçš„è™šæ‹Ÿæœºã€‚éœ€è¦ç¬¬ä¸€å¯åŠ¨é¡¹ä¸ºç½‘å¡å¯åŠ¨ï¼Œå¹¶ä¸”é»˜è®¤uefiå¯åŠ¨ï¼‰ PXE å®‰è£…æµç¨‹ â€‹ PXEï¼ˆPre-boot Execution Environment/é¢„å¯åŠ¨æ‰§è¡Œç¯å¢ƒï¼‰çš„å®ç°ä¾èµ–äºç½‘å¡ï¼Œåªæœ‰æ”¯æŒPXE Clientçš„ç½‘å¡æ‰èƒ½å®ç°ç½‘ç»œè‡ªåŠ¨å®‰è£…ã€‚è¿™ç§ç½‘å¡å®ç°DHCP Clientå’Œ TFTP Clientï¼Œåœ¨BIOSçš„å¼•å¯¼ä¸‹é€šè¿‡DHCPåè®®è‡ªåŠ¨åˆ†é…IPåœ°å€ï¼Œé€šè¿‡TFTPè·å–æœ€å°å†…æ ¸ï¼Œç„¶ååœ¨æœ€å°å†…æ ¸ç¯å¢ƒä¸‹é€šè¿‡HTTPåè®®æˆ–NFSåè®®è·å–Ubuntuå®‰è£…ç‰ˆæœ¬ã€‚ä¹‹åæœ€å°å†…æ ¸å¼•å¯¼è¿›è¡ŒUbuntu 20.04çš„å®‰è£…ã€‚ä¸‹å›¾æ˜¯è¯¦ç»†çš„å®‰è£…æµç¨‹ã€‚ ä¸Šå›¾æœ‰å‡ ä¸ªå‰æï¼š ç½‘å¡æ”¯æŒPXEï¼Œä»Šå¹´æ–°å‡ºçš„ç½‘å¡åŸºæœ¬éƒ½æ”¯æŒï¼ŒåŒæ—¶BIOSçš„å¯åŠ¨é¡¹ä¹Ÿè¦é…ç½®ï¼Œè¯·å¤§å®¶è‡ªè¡Œç ”ç©¶ã€‚ UEFIå¯åŠ¨æ‰ä¼šè¯·æ±‚bootx64.efiï¼Œå¦‚æœæ˜¯ä¼ ç»Ÿå¯åŠ¨æ¨¡å¼ï¼ˆLegacyï¼‰ï¼Œé‚£ä¹ˆPXE Clientä¼šè¯·æ±‚pxelinux.0ã€‚ å¯ä»¥é‡‡ç”¨nfsbootæ–¹å¼ï¼Œè¿™ä¸ªæµç¨‹é‡‡ç”¨çš„æ˜¯isoé•œåƒä¸‹è½½å†å®‰è£…çš„æ–¹å¼ã€‚ ä»¥ä¸‹å¼•å¯¼æ–¹å¼ä¸ºuefiï¼Œè™šæ‹Ÿæœºå®¢æˆ·ç«¯éœ€è¦å°†biosæ¨¡å¼æ”¹ä¸ºuefiæ¨¡å¼ï¼ŒåŒæ—¶ï¼Œå°†å¼€æœºå¯åŠ¨é¡¹å°†ä»ç½‘å¡å¯åŠ¨è®¾ç½®ä¸ºç¬¬ä¸€å¯åŠ¨é¡¹ã€‚ å®‰è£…å¿…é¡»çš„æœåŠ¡ç«¯è½¯ä»¶ å®‰è£…DHCPã€TFTPæœåŠ¡å™¨ dnsmasqåŒæ—¶å®ç°äº†DHCPã€TFTPã€DNSä¸‰ç§æœåŠ¡å™¨ sudo apt-get install dnsmasq å®‰è£…HTTPæœåŠ¡å™¨ HTTP Serveræœ‰å¾ˆå¤šï¼Œå¤§å®¶å¯ä»¥ä½¿ç”¨è‡ªå·±çš„ç†Ÿæ‚‰çš„æœåŠ¡å™¨å¦‚nginxï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯apache2 sudo apt-get install apache2 å‡†å¤‡å¯åŠ¨æ–‡ä»¶ ä¸‹è½½uefi å¼•å¯¼æ–‡ä»¶ï¼Œshim.signedã€grub-efi-amd64-signed å®‰å…¨å¯åŠ¨é“¾åŠ è½½çš„å¼•å¯¼ç¨‹åº apt-get download shim.signed apt-get download grub-efi-amd64-signed ä¸‹è½½ubuntu 20.04 server iso è¿™ä¸ªç›´æ¥å»å®˜ç½‘ä¸‹è½½ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯ubuntu-20.04.3-live-server-amd64.isoï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åªæœ‰liveç‰ˆæœ¬æ‰èƒ½æ”¯æŒsubiquity https://ubuntu.com/download/server åˆ›å»ºTFTP æ–‡ä»¶å¤¹ TFTP æ–‡ä»¶å¤¹æ˜¯TFTPæœåŠ¡çš„æ ¹ç›®å½•ï¼ŒPXEå¯åŠ¨è¿‡ç¨‹ä¸­ä¸‹è½½çš„æ–‡ä»¶éƒ½å­˜åœ¨åœ¨è¯¥ç›®å½•ä¸­ tftp â”œâ”€â”€ boot â”‚ â””â”€â”€ live-server â”‚ â”œâ”€â”€ initrd â”‚ â””â”€â”€ vmlinuz â”œâ”€â”€ grub â”‚ â”œâ”€â”€ bootx64.efi â”‚ â”œâ”€â”€ font.pf2 â”‚ â””â”€â”€ grub.cfg â””â”€â”€ grubx64.efi è¯´æ˜ bootx64.efiã€grubx64.efi å¼•å¯¼ç¨‹åºï¼Œæ¥è‡ªshim.signed å®‰è£…åŒ… grub.cfg è‡ªå»º å…¶ä»–æ–‡ä»¶æ¥è‡ª ubuntuå®‰è£…åŒ… äº”ä¸ªæ–‡ä»¶æ˜¯éœ€è¦çš„ï¼Œä½†æ˜¯ç›®å½•ç»“æ„æ˜¯æˆ‘è‡ªå»ºçš„ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ä¿®æ”¹ åˆ›å»ºç›®å½• åœ¨ /tftp (å¯æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹)ç›®å½•ä¸‹åˆ›å»º tftpç›®å½• mkdir /tftp mkdir /tftp/grub mkdir /tftp/boot mkdir /tftp/boot/live-server è·å–å¼•å¯¼æ–‡ä»¶ åœ¨å®‰è£…åŒ…ä¸‹è½½ç›®å½•åˆ›å»ºä¸€ä¸ªshimæ–‡ä»¶å¤¹ è§£å‹shimå®‰è£…åŒ…åˆ°shimæ–‡ä»¶å¤¹ dpkg -x \u003c%åˆšæ‰ä¸‹è½½çš„shim.signed å®‰è£…åŒ…åŒ…å%\u003e shim è§£å‹grubå®‰è£…åŒ…åˆ°grubæ–‡ä»¶å¤¹ æ‹·è´å¼•å¯¼æ–‡ä»¶åˆ°tftpç›®å½• cp ./root/grub/usr/lib/grub/x86_64-efi-signed/grubnetx64.efi.signed /tftp/grubx64.efi cp ./root/shim/usr/lib/shim/shimx64.efi.signed /tftp/grub/bootx64.efi è·å–å†…æ ¸é•œåƒæ–‡ä»¶ åœ¨ä¸‹è½½ç›®å½•mount isoæ–‡ä»¶ sudo mount ubuntu-20.04.3-live-server-amd64.iso /media ç³»ç»Ÿä¼šæç¤ºåªè¯»ï¼Œä¸å½±å“ä½¿ç”¨ mount: /media: WARNING: device write-protected, mounted read-only. æ‹·è´å†…æ ¸é•œåƒæ–‡ä»¶ cp /media/casper/initrd /tftp/boot/live-server cp /media/casper/vmlinuz /tftp/boot/live-server æ‹·è´grubæ–‡ä»¶ grub.cfgæ‹·è´è¿‡æ¥åšä¸ªå‚è€ƒï¼Œå†…å®¹ä¼šè¢«å…¨éƒ¨ä¿®æ”¹æ‰ cp /media/grub/font.pf2 /tftp/grub cp /media/grub/grub.cfg /tftp/grub é…ç½®dnsmasqï¼ˆé»˜è®¤ç«¯å£53udpï¼‰ tftpé»˜è®¤ç«¯å£69 å…³é”®é…ç½®æœ‰ä»¥ä¸‹å‡ ä¸ª é…ç½®DHCP åœ°å€æ®µ é…ç½®å¼•å¯¼æ–‡ä»¶ç›®å½• é…ç½®tftp æ ¹ç›®å½• é…ç½®æ—¥å¿—è·¯å¾„ é…ç½®æœåŠ¡ç½‘å¡ï¼Œå¤šç½‘å¡æœºå™¨éœ€å…³æ³¨ # é…ç½®å¤–ç½‘DNSæœåŠ¡å™¨åœ°å€ server=10.4.7.254 # æŒ‡å®šæœåŠ¡çš„ç½‘å¡ interface=ens33,lo # ç»‘å®šç«¯å£ bind-interfaces # è®¾ç½®DHCPåˆ†å‘IPç«¯èŒƒå›´ã€åœ°å€æ©ç ã€IPåœ°å€æœ‰æ•ˆæ—¶é—´ dhcp-range=10.4.7.240,10.4.7.241,255.255.255.0,12h # æŒ‡å®šç½‘å…³åœ°å€ å’Œå®‰è£…æ— å…³ï¼Œåº”è¯¥å¯ä»¥ä¸é…ç½® dhcp-option=3,10.4.7.254 # æŒ‡å®šDNSæœåŠ¡å™¨åœ°å€ å’Œå®‰è£…æ— å…³ï¼Œåº”è¯¥å¯ä»¥ä¸é…ç½® dhcp-option=6,10.4.7.254 # è®¾ç½®å¼•å¯¼ç¨‹åºç›¸å¯¹tftpæ ¹ç›®å½•çš„è·¯å¾„ dhcp-match=set:efi-x86_64,option:client-arch,7 dhcp-boot=tag:efi-x86_64,grub/bootx64.efi # æ‰“å¼€tftpæœåŠ¡ enable-tftp # è®¾ç½®tftpæ ¹è·¯å¾„ tftp-root=/tftp # è®¾ç½®æ—¥å¿—è·¯å¾„ log-facility=/var/log/dnsmasq.log ä¿®æ”¹é…ç½®åï¼Œé‡å¯dnsmasqæœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚ åˆ›å»ºHTTPæ–‡ä»¶å¤¹ apache2çš„é»˜è®¤æœåŠ¡æ ¹ç›®å½•æ˜¯ /var/www/htmlï¼Œä¸ä¿®æ”¹ä»–ï¼Œåœ¨ä»–ä¸‹é¢åˆ›å»ºç›®å½• html/ â”œâ”€â”€ autoinstall â”‚ â”œâ”€â”€ meta-data â”‚ â””â”€â”€ user-data â”œâ”€â”€ index.html â””â”€â”€ iso â””â”€â”€ ubuntu-20.04.2-live-server-amd64.iso è¯´æ˜ autoinstall ç›®å½•å­˜æ”¾å‚æ•°è‡ªåŠ¨é…ç½®æ–‡ä»¶ï¼Œuser-dataã€meta-dataæ˜¯cloud-initè¦æ±‚çš„æ–‡ä»¶å iso ç›®å½•å­˜æ”¾æ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶ åˆ›å»ºç›®å½• mkdir /var/www/html/autoinstall mkdir /var/www/html/iso æ‹·è´isoæ–‡ä»¶ åˆ°ä¸‹è½½ç›®å½•æ‹·è´isoæ–‡ä»¶ cp ubuntu-20.04.3-live-server-amd64.iso /var/www/html/iso åˆ›å»ºå‚æ•°è‡ªåŠ¨é…ç½®æ–‡ä»¶ å…ˆåˆ›å»ºç©ºæ–‡ä»¶ï¼Œmeta-dataæ— éœ€ä¿®æ”¹ï¼Œuser-dataåç»­ç« èŠ‚ä¼šè¯¦ç»†æè¿°é…ç½® touch /var/www/html/autoinstall/user-data touch /var/www/html/autoinstall/meta-data é…ç½®grub.cfg if loadfont /grub/font.pf2 ; then set gfxmode=auto insmod efi_gop insmod efi_uga insmod gfxterm terminal_output gfxterm fi set menu_color_normal=white/black set menu_color_highlight=black/light-gray set timeout=5 menuentry \"Ubuntu server 20.04.3 autoinstall\" { set gfxpayload=keep linux /boot/live-server/vmlinuz root=/dev/ram0 ramdisk_size=1500000 ip=dhcp url='http://10.4.7.150/iso/ubuntu-20.04.3-live-server-amd64.iso' autoinstall ds=nocloud-net\\;s=http://10.4.7.150/autoinstall/ --- initrd /boot/live-server/initrd } menuentry ä¹‹å‰æ˜¯é…ç½®æ ·å¼ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ï¼Œé‡ç‚¹å…³æ³¨menuentry \"Ubuntu server 20.04 autoinstall\" å†…çš„é…ç½®ã€‚ æŒ‡å®šé•œåƒæ–‡ä»¶ç›¸å¯¹äºtftpæ ¹ç›®å½•çš„è·¯å¾„ /boot/live-server/initrd ","date":"2022-01-02","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/:0:3","tags":["ubuntu"],"title":"ubuntuä½¿ç”¨ä¸Šç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"å››ã€Ubuntu ç½‘ç»œé…ç½® è¦å¿«é€Ÿè¯†åˆ«æ‰€æœ‰å¯ç”¨çš„ä»¥å¤ªç½‘æ¥å£ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ ip å‘½ä»¤ã€‚ root@lhp-server:/etc/netplan# ip a 1: lo: \u003cLOOPBACK,UP,LOWER_UP\u003e mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether 00:0c:29:da:c6:09 brd ff:ff:ff:ff:ff:ff inet 10.4.7.142/24 brd 10.4.7.255 scope global ens33 valid_lft forever preferred_lft forever inet6 fe80::20c:29ff:feda:c609/64 scope link valid_lft forever preferred_lft forever å¦ä¸€ä¸ªå¯ä»¥å¸®åŠ©è¯†åˆ«ç³»ç»Ÿå¯ç”¨çš„æ‰€æœ‰ç½‘ç»œæ¥å£çš„åº”ç”¨ç¨‹åºæ˜¯ lshw å‘½ä»¤ã€‚æ­¤å‘½ä»¤æä¾›æœ‰å…³ç‰¹å®šé€‚é…å™¨çš„ç¡¬ä»¶åŠŸèƒ½çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œlshw æ˜¾ç¤ºäº†ä¸€ä¸ªå…·æœ‰eth1é€»è¾‘åç§°çš„ä»¥å¤ªç½‘æ¥å£ä»¥åŠæ€»çº¿ä¿¡æ¯ã€é©±åŠ¨ç¨‹åºè¯¦ç»†ä¿¡æ¯å’Œæ‰€æœ‰æ”¯æŒçš„åŠŸèƒ½ã€‚ root@lhp-server:/etc/netplan# lshw -class network *-network description: Ethernet interface product: 82545EM Gigabit Ethernet Controller (Copper) vendor: Intel Corporation physical id: 1 bus info: pci@0000:02:01.0 logical name: ens33 version: 01 serial: 00:0c:29:da:c6:09 size: 1Gbit/s capacity: 1Gbit/s width: 64 bits clock: 66MHz capabilities: pm pcix bus_master cap_list rom ethernet physical logical tp 10bt 10bt-fd 100bt 100bt-fd 1000bt-fd autonegotiation configuration: autonegotiation=on broadcast=yes driver=e1000 driverversion=7.3.21-k8-NAPI duplex=full ip=10.4.7.142 latency=0 link=yes mingnt=255 multicast=yes port=twisted pair speed=1Gbit/s resources: irq:19 memory:fd5c0000-fd5dffff memory:fdff0000-fdffffff ioport:2000(size=64) memory:fd500000-fd50ffff ethtool æ˜¯ä¸€ä¸ªç¨‹åºï¼Œç”¨äºæ˜¾ç¤ºå’Œæ›´æ”¹ä»¥å¤ªç½‘å¡è®¾ç½®ï¼Œä¾‹å¦‚è‡ªåŠ¨åå•†ã€ç«¯å£é€Ÿåº¦ã€åŒå·¥æ¨¡å¼å’Œ LAN å”¤é†’ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•æŸ¥çœ‹ä»¥å¤ªç½‘æ¥å£æ”¯æŒçš„åŠŸèƒ½å’Œé…ç½®è®¾ç½®çš„ç¤ºä¾‹ã€‚ root@lhp-server:/etc/netplan# ethtool ens33 Settings for ens33: Supported ports: [ TP ] Supported link modes: 10baseT/Half 10baseT/Full 100baseT/Half 100baseT/Full 1000baseT/Full Supported pause frame use: No Supports auto-negotiation: Yes Supported FEC modes: Not reported Advertised link modes: 10baseT/Half 10baseT/Full 100baseT/Half 100baseT/Full 1000baseT/Full Advertised pause frame use: No Advertised auto-negotiation: Yes Advertised FEC modes: Not reported Speed: 1000Mb/s Duplex: Full Port: Twisted Pair PHYAD: 0 Transceiver: internal Auto-negotiation: on MDI-X: off (auto) Supports Wake-on: d Wake-on: d Current message level: 0x00000007 (7) drv probe link Link detected: yes è¦ä¸´æ—¶é…ç½® IP åœ°å€ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ ip å‘½ä»¤ã€‚ä¿®æ”¹ IP åœ°å€å’Œå­ç½‘æ©ç ä»¥ç¬¦åˆæ‚¨çš„ç½‘ç»œè¦æ±‚ã€‚ip å‘½ä»¤å…è®¸æ‚¨é…ç½®ç«‹å³ç”Ÿæ•ˆçš„è®¾ç½®ï¼Œä½†æ˜¯å®ƒä»¬ä¸æ˜¯æŒä¹…çš„å¹¶ä¸”ä¼šåœ¨é‡æ–°å¯åŠ¨åä¸¢å¤±ã€‚ sudo ip addr add 10.102.66.200/24 dev ens33 ç„¶åå¯ä»¥ä½¿ç”¨ ip æ¥è®¾ç½®é“¾æ¥çš„å¼€å¯æˆ–å…³é—­ã€‚ ip link set dev ens33 up ip link set dev ens33 down éªŒè¯enp0s25çš„IPåœ°å€é…ç½®ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ipå‘½ä»¤ã€‚ ip address show dev enp0s25 10: enp0s25: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1500 qdisc noqueue state UP group default qlen 1000 link/ether 00:16:3e:e2:52:42 brd ff:ff:ff:ff:ff:ff link-netnsid 0 inet 10.102.66.200/24 brd 10.102.66.255 scope global dynamic eth0 valid_lft 2857sec preferred_lft 2857sec inet6 fe80::216:3eff:fee2:5242/64 scope link valid_lft forever preferred_lft forever6 è¦é…ç½®é»˜è®¤ç½‘å…³ï¼Œæ‚¨å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ ip å‘½ä»¤ã€‚ä¿®æ”¹é»˜è®¤ç½‘å…³åœ°å€ä»¥ç¬¦åˆæ‚¨çš„ç½‘ç»œè¦æ±‚ã€‚ sudo ip route add default via 10.102.66.1 è¦éªŒè¯æ‚¨çš„é»˜è®¤ç½‘å…³é…ç½®ï¼Œæ‚¨å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ ip å‘½ä»¤ã€‚ ip route show default via 10.102.66.1 dev eth0 proto dhcp src 10.102.66.200 metric 100 10.102.66.0/24 dev eth0 proto kernel scope link src 10.102.66.200 10.102.66.1 dev eth0 proto dhcp scope link src 10.102.66.200 metric 100 å¦‚æœæ‚¨çš„ä¸´æ—¶ç½‘ç»œé…ç½®éœ€è¦ DNSï¼Œæ‚¨å¯ä»¥åœ¨æ–‡ä»¶ä¸­æ·»åŠ  DNS æœåŠ¡å™¨ IP åœ°å€/etc/resolv.confã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ/etc/resolv.confä¸å»ºè®®ç›´æ¥ç¼–è¾‘ï¼Œä½†è¿™æ˜¯ä¸€ç§ä¸´æ—¶ä¸”éæŒä¹…çš„é…ç½®ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•å°†ä¸¤ä¸ª DNS æœåŠ¡å™¨è¾“å…¥åˆ° ä¸­/etc/resolv.confï¼Œåº”å°†å…¶æ›´æ”¹ä¸ºé€‚åˆæ‚¨ç½‘ç»œçš„æœåŠ¡å™¨ã€‚ä»¥ä¸‹éƒ¨åˆ†è¯¦ç»†ä»‹ç»äº†è¿›è¡Œ DNS å®¢æˆ·ç«¯é…ç½®çš„æ­£ç¡®æŒä¹…æ–¹å¼ã€‚ nameserver 8.8.8.8 nameserver 8.8.4.4 å¦‚æœæ‚¨ä¸å†éœ€è¦æ­¤é…ç½®å¹¶å¸Œæœ›ä»æ¥å£ä¸­æ¸…é™¤æ‰€æœ‰ IP é…ç½®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¸¦æœ‰flush é€‰é¡¹çš„ip å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ ip addr flush eth0 ç¬”è®° ä½¿ç”¨ ip å‘½ä»¤åˆ·æ–° IP é…ç½®ä¸ä¼šæ¸…é™¤/etc/resolv.conf. æ‚¨å¿…é¡»æ‰‹åŠ¨åˆ é™¤æˆ–ä¿®æ”¹è¿™äº›æ¡ç›®ï¼Œæˆ–è€…é‡æ–°å¯åŠ¨ï¼Œè¿™ä¹Ÿåº”è¯¥å¯¼è‡´/etc/resolv.confï¼Œå®ƒæ˜¯åˆ° çš„ç¬¦å·é“¾æ¥/run/systemd/resolve/stub-resolv.confï¼Œè¢«é‡å†™ã€‚ åŠ¨æ€ IP åœ°å€åˆ†é…ï¼ˆDHCP å®¢æˆ·ç«¯ï¼‰ è¦å°†æ‚¨çš„æœåŠ¡å™¨é…ç½®ä¸ºä½¿ç”¨ DHCP è¿›è¡ŒåŠ¨æ€åœ°å€åˆ†é…ï¼Œè¯·åœ¨æ–‡ä»¶/etc/netplan/99_config.yaml. ä¸‹é¢çš„ç¤ºä¾‹å‡è®¾æ‚¨æ­£åœ¨é…ç½®æ ‡è¯†ä¸ºenp3s0 çš„ç¬¬ä¸€ä¸ªä»¥å¤ªç½‘æ¥å£ã€‚ network: version: 2 renderer: networkd ethernets: enp3s0: dhcp4: true ç„¶åå¯ä»¥ä½¿ç”¨ netplan å‘½ä»¤åº”ç”¨é…ç½®ã€‚ sudo netplan apply é™æ€ IP åœ°å€åˆ†é… ","date":"2022-01-02","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/:0:4","tags":["ubuntu"],"title":"ubuntuä½¿ç”¨ä¸Šç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"äº”ã€å®‰å…¨ ç”¨æˆ·ç®¡ç† rootç”¨æˆ·é»˜è®¤ç¦æ­¢è®¿é—®ã€‚ é¼“åŠ±ç”¨æˆ·ä½¿ç”¨åä¸ºâ€œsudoâ€çš„å·¥å…·æ¥æ‰§è¡Œç³»ç»Ÿç®¡ç†èŒè´£ã€‚Sudo å…è®¸æˆæƒç”¨æˆ·ä½¿ç”¨ä»–ä»¬è‡ªå·±çš„å¯†ç ä¸´æ—¶æå‡ä»–ä»¬çš„æƒé™ï¼Œè€Œä¸å¿…çŸ¥é“å±äº root å¸æˆ·çš„å¯†ç ã€‚è¿™ç§ç®€å•è€Œæœ‰æ•ˆçš„æ–¹æ³•ä¸ºæ‰€æœ‰ç”¨æˆ·æ“ä½œæä¾›äº†é—®è´£åˆ¶ï¼Œå¹¶ä½¿ç®¡ç†å‘˜å¯ä»¥ç²¾ç»†æ§åˆ¶ç”¨æˆ·å¯ä»¥ä½¿ç”¨æ‰€è¿°æƒé™æ‰§è¡Œå“ªäº›æ“ä½œã€‚ å¯ç”¨rootç”¨æˆ·å¹¶è®¾ç½®æ–°å¯†ç ï¼š sudo passwd Sudo å°†æç¤ºæ‚¨è¾“å…¥å¯†ç ï¼Œç„¶åè¦æ±‚æ‚¨ä¸º root æä¾›ä¸€ä¸ªæ–°å¯†ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š [sudo] password for username: (enter your own password) Enter new UNIX password: (enter a new password for root) Retype new UNIX password: (repeat new password for root) passwd: password updated successfully ç¦ç”¨ root å¸æˆ·å¯†ç  sudo passwd -l root æ›´å¤šsudo man sudo æ·»åŠ å’Œåˆ é™¤ç”¨æˆ· sudo adduser username åˆ é™¤ç”¨æˆ·å¸æˆ·åŠå…¶ä¸»è¦ç»„ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š sudo deluser username åˆ é™¤å¸æˆ·ä¸ä¼šåˆ é™¤å…¶å„è‡ªçš„ä¸»æ–‡ä»¶å¤¹ã€‚æ‚¨æ˜¯å¦å¸Œæœ›æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶å¤¹æˆ–æ ¹æ®æ‰€éœ€çš„ä¿ç•™ç­–ç•¥ä¿ç•™å®ƒå–å†³äºæ‚¨ã€‚ è¯·è®°ä½ï¼Œå¦‚æœæ‚¨æ²¡æœ‰é‡‡å–å¿…è¦çš„é¢„é˜²æªæ–½ï¼Œä»»ä½•åæ¥æ·»åŠ çš„ä¸å‰ä¸€ä¸ªæ‰€æœ‰è€…å…·æœ‰ç›¸åŒ UID/GID çš„ç”¨æˆ·ç°åœ¨éƒ½å¯ä»¥è®¿é—®æ­¤æ–‡ä»¶å¤¹ã€‚ æ‚¨å¯èƒ½å¸Œæœ›å°†è¿™äº› UID/GID å€¼æ›´æ”¹ä¸ºæ›´åˆé€‚çš„å€¼ï¼Œä¾‹å¦‚ root å¸æˆ·ï¼Œç”šè‡³å¯èƒ½é‡æ–°å®šä½æ–‡ä»¶å¤¹ä»¥é¿å…å°†æ¥å‘ç”Ÿå†²çªï¼š sudo chown -R root:root /home/username/ sudo mkdir /home/archived_users/ sudo mv /home/username /home/archived_users/ è¦ä¸´æ—¶é”å®šæˆ–è§£é”ç”¨æˆ·å¯†ç ï¼Œè¯·åˆ†åˆ«ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š sudo passwd -l username sudo passwd -u username è¦æ·»åŠ æˆ–åˆ é™¤ä¸ªæ€§åŒ–ç»„ï¼Œè¯·åˆ†åˆ«ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š sudo addgroup groupname sudo delgroup groupname è¦å°†ç”¨æˆ·æ·»åŠ åˆ°ç»„ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š sudo adduser username groupname ç”¨æˆ·é…ç½®æ–‡ä»¶å®‰å…¨ åˆ›å»ºæ–°ç”¨æˆ·æ—¶ï¼Œ adduser å®ç”¨ç¨‹åºä¼šåˆ›å»ºä¸€ä¸ªåä¸º çš„å…¨æ–°ä¸»ç›®å½•/home/usernameã€‚é»˜è®¤é…ç½®æ–‡ä»¶ä»¥ ç›®å½•ä¸­çš„å†…å®¹ä¸ºæ¨¡å‹/etc/skelï¼Œå…¶ä¸­åŒ…æ‹¬æ‰€æœ‰é…ç½®æ–‡ä»¶åŸºç¡€ã€‚ å¦‚æœæ‚¨çš„æœåŠ¡å™¨å°†æœ‰å¤šä¸ªç”¨æˆ·ä½¿ç”¨ï¼Œåˆ™åº”å¯†åˆ‡æ³¨æ„ç”¨æˆ·ä¸»ç›®å½•çš„æƒé™ä»¥ç¡®ä¿æœºå¯†æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒUbuntu ä¸­çš„ç”¨æˆ·ä¸»ç›®å½•æ˜¯ä½¿ç”¨å…¨å±€è¯»å–/æ‰§è¡Œæƒé™åˆ›å»ºçš„ã€‚è¿™æ„å‘³ç€æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥æµè§ˆå’Œè®¿é—®å…¶ä»–ç”¨æˆ·ä¸»ç›®å½•çš„å†…å®¹ã€‚è¿™å¯èƒ½ä¸é€‚åˆæ‚¨çš„ç¯å¢ƒã€‚ è¦éªŒè¯æ‚¨å½“å‰çš„ç”¨æˆ·ä¸»ç›®å½•æƒé™ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š ls -ld /home/username ä»¥ä¸‹è¾“å‡ºæ˜¾ç¤ºè¯¥ç›®å½•/home/usernameå…·æœ‰å…¨çƒå¯è¯»çš„æƒé™ï¼š drwxr-xr-x 2 username username 4096 2007-10-02 20:03 username æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•åˆ é™¤ä¸–ç•Œå¯è¯»æƒé™ï¼š sudo chmod 0750 /home/username ç¬”è®° æœ‰äº›äººå€¾å‘äºä¸åŠ é€‰æ‹©åœ°ä½¿ç”¨é€’å½’é€‰é¡¹ (-R) æ¥ä¿®æ”¹æ‰€æœ‰å­æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œä½†è¿™ä¸æ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸”å¯èƒ½ä¼šäº§ç”Ÿå…¶ä»–ä¸è‰¯ç»“æœã€‚ä»…çˆ¶ç›®å½•å°±è¶³ä»¥é˜²æ­¢æœªç»æˆæƒè®¿é—®çˆ¶ç›®å½•ä¸‹çš„ä»»ä½•å†…å®¹ã€‚ ä¸€ä¸ªæ›´æœ‰æ•ˆçš„æ–¹æ³•æ˜¯åœ¨åˆ›å»ºç”¨æˆ·ä¸»æ–‡ä»¶å¤¹æ—¶ä¿®æ”¹ adduser å…¨å±€é»˜è®¤æƒé™ã€‚åªéœ€ç¼–è¾‘æ–‡ä»¶/etc/adduser.confå¹¶å°†DIR_MODEå˜é‡ä¿®æ”¹ä¸ºé€‚å½“çš„å†…å®¹ï¼Œä»¥ä¾¿æ‰€æœ‰æ–°çš„ä¸»ç›®å½•éƒ½å°†è·å¾—æ­£ç¡®çš„æƒé™ã€‚ DIR_MODE=0750 ä½¿ç”¨å‰é¢æåˆ°çš„ä»»ä½•æŠ€æœ¯æ›´æ­£ç›®å½•æƒé™åï¼Œä½¿ç”¨ä»¥ä¸‹è¯­æ³•éªŒè¯ç»“æœï¼š ls -ld /home/username ä¸‹é¢çš„ç»“æœè¡¨æ˜ï¼Œä¸–ç•Œå¯è¯»çš„æƒé™å·²è¢«åˆ é™¤ï¼š drwxr-x--- 2 username username 4096 2007-10-02 20:03 username å¯†ç ç­–ç•¥ æœ€å°é•¿åº¦å¯†ç  é»˜è®¤æƒ…å†µä¸‹ï¼ŒUbuntu éœ€è¦æœ€å°‘ 6 ä¸ªå­—ç¬¦çš„å¯†ç é•¿åº¦ï¼Œä»¥åŠä¸€äº›åŸºæœ¬çš„ç†µæ£€æŸ¥ã€‚è¿™äº›å€¼åœ¨æ–‡ä»¶ ä¸­æ§åˆ¶ï¼Œ/etc/pam.d/common-passwordæ¦‚è¿°å¦‚ä¸‹ã€‚ password [success=1 default=ignore] pam_unix.so obscure sha512 å¦‚æœè¦å°†æœ€å°é•¿åº¦è°ƒæ•´ä¸º 8 ä¸ªå­—ç¬¦ï¼Œè¯·å°†é€‚å½“çš„å˜é‡æ›´æ”¹ä¸º min=8ã€‚ä¿®æ”¹æ¦‚è¿°å¦‚ä¸‹ã€‚ password [success=1 default=ignore] pam_unix.so obscure sha512 minlen=8 ç¬”è®° åŸºæœ¬å¯†ç ç†µæ£€æŸ¥å’Œæœ€å°é•¿åº¦è§„åˆ™ä¸é€‚ç”¨äºä½¿ç”¨ sudo çº§åˆ«å‘½ä»¤è®¾ç½®æ–°ç”¨æˆ·çš„ç®¡ç†å‘˜ã€‚ å¯†ç è¿‡æœŸ åˆ›å»ºç”¨æˆ·å¸æˆ·æ—¶ï¼Œæ‚¨åº”è¯¥åˆ¶å®šä¸€é¡¹ç­–ç•¥ï¼Œè®¾ç½®æœ€çŸ­å’Œæœ€é•¿å¯†ç æœŸé™ï¼Œè¿«ä½¿ç”¨æˆ·åœ¨å¯†ç åˆ°æœŸæ—¶æ›´æ”¹å¯†ç ã€‚ è¦è½»æ¾æŸ¥çœ‹ç”¨æˆ·å¸æˆ·çš„å½“å‰çŠ¶æ€ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š sudo chage -l username ä¸‹é¢çš„è¾“å‡ºæ˜¾ç¤ºäº†æœ‰å…³ç”¨æˆ·å¸æˆ·çš„æœ‰è¶£äº‹å®ï¼Œå³æ²¡æœ‰åº”ç”¨ä»»ä½•ç­–ç•¥ï¼š Last password change : Jan 20, 2015 Password expires : never Password inactive : never Account expires : never Minimum number of days between password change : 0 Maximum number of days between password change : 99999 Number of days of warning before password expires : 7 è¦è®¾ç½®è¿™äº›å€¼ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œåªéœ€ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼Œå¹¶æŒ‰ç…§äº¤äº’å¼æç¤ºè¿›è¡Œæ“ä½œï¼š sudo chage username ä¸‹é¢ä¹Ÿæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œè¯´æ˜å¦‚ä½•æ‰‹åŠ¨å°†æ˜¾å¼åˆ°æœŸæ—¥æœŸ (-E) æ›´æ”¹ä¸º 01/31/2015ã€æœ€çŸ­å¯†ç æœŸé™ (-m) ä¸º 5 å¤©ã€æœ€é•¿å¯†ç æœŸé™ (-M) ä¸º 90 å¤©ã€ä¸æ´»åŠ¨å¯†ç åˆ°æœŸå 30 å¤©çš„æ—¶é—´æ®µ (-I)ï¼Œä»¥åŠå¯†ç åˆ°æœŸå‰ 14 å¤©çš„è­¦å‘Šæ—¶é—´æ®µ (-W)ï¼š sudo chage -E 01/31/2015 -m 5 -M 90 -I 30 -W 14 username è¦éªŒè¯æ›´æ”¹ï¼Œè¯·ä½¿ç”¨ä¸å‰é¢æåˆ°çš„ç›¸åŒçš„è¯­æ³•ï¼š sudo chage -l username ä¸‹é¢çš„è¾“å‡ºæ˜¾ç¤ºäº†ä¸ºè´¦æˆ·å»ºç«‹çš„æ–°ç­–ç•¥ï¼š Last password change : Jan 20, 2015 Password expires : Apr 19, 2015 Password inactive : May 19, 2015 Account expires : Jan 31, 2015 Minimum number of days between password change : 5 Maximum number of days between password change : 90 Number of days of warning before password expires : 14 å¯¹äºè¢«ç¦ç”¨çš„ç”¨æˆ·sshçš„è®¿é—® å¦‚æœç”¨æˆ·ä¹‹å‰å·²ç»è®¾ç½®äº† SSH å…¬é’¥èº«ä»½éªŒè¯ï¼Œåˆ™ç®€å•åœ°ç¦ç”¨/é”å®šç”¨æˆ·å¯†ç ä¸ä¼šé˜»æ­¢ç”¨æˆ·è¿œç¨‹ç™»å½•æ‚¨çš„æœåŠ¡å™¨ã€‚ä»–ä»¬ä»ç„¶èƒ½å¤Ÿè·å¾—å¯¹æœåŠ¡å™¨çš„ shell è®¿é—®ï¼Œè€Œæ— éœ€ä»»ä½•å¯†ç ã€‚è¯·è®°ä½æ£€æŸ¥ç”¨æˆ·ä¸»ç›®å½•ä¸­æ˜¯å¦æœ‰å…è®¸æ­¤ç±»ç»è¿‡èº«ä»½éªŒè¯çš„ SSH è®¿é—®çš„æ–‡ä»¶ï¼Œä¾‹å¦‚/home/username/.ssh/authorized_keys. åˆ é™¤æˆ–é‡å‘½å.ssh/ç”¨æˆ·ä¸»æ–‡ä»¶å¤¹ä¸­çš„ç›®å½•ï¼Œä»¥é˜²æ­¢è¿›ä¸€æ­¥çš„ SSH èº«ä»½éªŒè¯åŠŸèƒ½ã€‚ è¯·åŠ¡å¿…æ£€æŸ¥ç¦ç”¨ç”¨æˆ·å»ºç«‹çš„ä»»ä½• SSH è¿æ¥ï¼Œå› ä¸ºä»–ä»¬å¯èƒ½å·²ç»å­˜åœ¨å…¥ç«™æˆ–å‡ºç«™è¿æ¥ã€‚æ€æ­»ä»»ä½•æ‰¾åˆ°çš„äººã€‚ who | grep username (to get the pts/# terminal) sudo pkill -f pts/# å°† SSH è®¿é—®é™åˆ¶ä¸ºåªæœ‰åº”è¯¥æ‹¥æœ‰å®ƒçš„ç”¨æˆ·å¸æˆ·ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸ºâ€œsshloginâ€çš„ç»„ï¼Œå¹¶å°†ç»„åæ·»åŠ ä¸ºä¸AllowGroupsæ–‡ä»¶ä¸­çš„å˜é‡å…³è”çš„å€¼/etc/ssh/sshd_configã€‚ AllowGroups sshlogin ç„¶åå°†æ‚¨å…è®¸çš„ SSH ç”¨æˆ·æ·»åŠ åˆ°â€œsshloginâ€ç»„ä¸­ï¼Œå¹¶é‡æ–°å¯åŠ¨ SSH æœåŠ¡ã€‚ sudo adduser username sshlogin sudo systemctl restart sshd.service æŸ¥çœ‹ç™»å½•æ—¥å¿— tail -f /var/log/auth.log Sep 23 07:32:58 lhp-server sshd[5801]: User test from 10.4.7.1 not allowed because none of user's groups are listed in AllowGroups Sep 23 07:33:01 lhp-server sshd[5801]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=10.4.7.1 user=test Sep 23 07:33:03 lhp-server sshd[5801]: Fa","date":"2022-01-02","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/:0:5","tags":["ubuntu"],"title":"ubuntuä½¿ç”¨ä¸Šç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"å…­ã€é˜²ç«å¢™ ufw Ubuntu çš„é»˜è®¤é˜²ç«å¢™é…ç½®å·¥å…·æ˜¯ ufwã€‚ä¸ºç®€åŒ– iptables é˜²ç«å¢™é…ç½®è€Œå¼€å‘ï¼Œufw æä¾›äº†ä¸€ç§ç”¨æˆ·å‹å¥½çš„æ–¹å¼æ¥åˆ›å»ºåŸºäº IPv4 æˆ– IPv6 çš„åŸºäºä¸»æœºçš„é˜²ç«å¢™ã€‚ å¯ç”¨ sudo ufw enable æ·»åŠ ç«¯å£ï¼ˆæœ¬ä¾‹ä¸­ä¸º SSHï¼‰ sudo ufw allow 22 ä½¿ç”¨ç¼–å·æ ¼å¼æ·»åŠ  sudo ufw insert 1 allow 80 å…³é—­è¦æ‰“å¼€çš„ç«¯å£ sudo ufw deny 22 è¦åˆ é™¤è§„åˆ™ï¼Œè¯·ä½¿ç”¨ delete åè·Ÿè§„åˆ™ sudo ufw delete deny 22 è¿˜å¯ä»¥å…è®¸ä»ç‰¹å®šä¸»æœºæˆ–ç½‘ç»œè®¿é—®æŸä¸ªç«¯å£ã€‚ä»¥ä¸‹ç¤ºä¾‹å…è®¸ä»ä¸»æœº 192.168.0.2 SSH è®¿é—®æ­¤ä¸»æœºä¸Šçš„ä»»ä½• IP åœ°å€ï¼š sudo ufw allow proto tcp from 192.168.0.2 to any port 22 å°† 192.168.0.2 æ›¿æ¢ä¸º 192.168.0.0/24 ä»¥å…è®¸ä»æ•´ä¸ªå­ç½‘è¿›è¡Œ SSH è®¿é—®ã€‚ å‘ufwå‘½ä»¤æ·»åŠ *â€“dry-run*é€‰é¡¹å°†è¾“å‡ºç»“æœè§„åˆ™ï¼Œä½†ä¸ä¼šåº”ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‰“å¼€ HTTP ç«¯å£ï¼Œå°†åº”ç”¨ä»¥ä¸‹å†…å®¹ï¼š sudo ufw --dry-run allow http *filter :ufw-user-input - [0:0] :ufw-user-output - [0:0] :ufw-user-forward - [0:0] :ufw-user-limit - [0:0] :ufw-user-limit-accept - [0:0] ### RULES ### ### tuple ### allow tcp 80 0.0.0.0/0 any 0.0.0.0/0 -A ufw-user-input -p tcp --dport 80 -j ACCEPT ### END RULES ### -A ufw-user-input -j RETURN -A ufw-user-output -j RETURN -A ufw-user-forward -j RETURN -A ufw-user-limit -m limit --limit 3/minute -j LOG --log-prefix \"[UFW LIMIT]: \" -A ufw-user-limit -j REJECT -A ufw-user-limit-accept -j ACCEPT COMMIT Rules updated å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¦ç”¨ ufwï¼š sudo ufw disable è¦æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼Œè¯·è¾“å…¥ï¼š sudo ufw status å¯¹äºæ›´è¯¦ç»†çš„çŠ¶æ€ä¿¡æ¯ï¼Œè¯·ä½¿ç”¨ï¼š sudo ufw status verbose æŸ¥çœ‹ç¼–å·æ ¼å¼ï¼š sudo ufw status numbered ç¬”è®° å¦‚æœè¦æ‰“å¼€æˆ–å…³é—­/etc/servicesçš„ç«¯å£åœ¨ ä¸­å®šä¹‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç«¯å£åç§°è€Œä¸æ˜¯ç¼–å·ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå°†22æ›¿æ¢ä¸ºsshã€‚ æ›´å¤šè¯¦ç»†å‚æ•°è§ï¼šman ufwæ‰‹å†Œ ufw åº”ç”¨é›†æˆ æ‰“å¼€ç«¯å£çš„åº”ç”¨ç¨‹åºå¯ä»¥åŒ…å«ä¸€ä¸ª ufw é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­è¯¦ç»†è¯´æ˜äº†åº”ç”¨ç¨‹åºæ­£å¸¸è¿è¡Œæ‰€éœ€çš„ç«¯å£ã€‚é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ ä¸­/etc/ufw/applications.dï¼Œå¦‚æœé»˜è®¤ç«¯å£å·²æ›´æ”¹ï¼Œåˆ™å¯ä»¥å¯¹å…¶è¿›è¡Œç¼–è¾‘ã€‚ è¦æŸ¥çœ‹å“ªäº›åº”ç”¨ç¨‹åºå®‰è£…äº†é…ç½®æ–‡ä»¶ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š sudo ufw app list ç±»ä¼¼äºå…è®¸æµé‡åˆ°ç«¯å£ï¼Œä½¿ç”¨åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶æ˜¯é€šè¿‡è¾“å…¥ï¼š sudo ufw allow Samba æ‰©å±•è¯­æ³•ä¹Ÿå¯ç”¨ï¼š ufw allow from 192.168.0.0/24 to any app Samba å°†Sambaå’Œ192.168.0.0/24æ›¿æ¢ä¸ºæ‚¨æ­£åœ¨ä½¿ç”¨çš„åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶ä»¥åŠæ‚¨ç½‘ç»œçš„ IP èŒƒå›´ã€‚ ç¬”è®° æ— éœ€ä¸ºåº”ç”¨ç¨‹åºæŒ‡å®šåè®®ï¼Œå› ä¸ºè¯¥ä¿¡æ¯åœ¨é…ç½®æ–‡ä»¶ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚å¦è¯·æ³¨æ„ï¼Œåº”ç”¨ç¨‹åºåç§°æ›¿æ¢äº†ç«¯å£å·ã€‚ è¦æŸ¥çœ‹æœ‰å…³ä¸ºåº”ç”¨ç¨‹åºå®šä¹‰çš„ç«¯å£ã€åè®®ç­‰çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·è¾“å…¥ï¼š sudo ufw app info Samba IPä¼ªè£… IP ä¼ªè£…çš„ç›®çš„æ˜¯å…è®¸ç½‘ç»œä¸Šå…·æœ‰ç§æœ‰ã€ä¸å¯è·¯ç”± IP åœ°å€çš„æœºå™¨é€šè¿‡æ‰§è¡Œä¼ªè£…çš„æœºå™¨è®¿é—® Internetã€‚å¿…é¡»å¯¹æ¥è‡ªæ‚¨çš„ä¸“ç”¨ç½‘ç»œçš„å‘å¾€ Internet çš„æµé‡è¿›è¡Œå¤„ç†ï¼Œä»¥ä¾¿å›å¤å¯è·¯ç”±å›å‘å‡ºè¯·æ±‚çš„æœºå™¨ã€‚ä¸ºæ­¤ï¼Œå†…æ ¸å¿…é¡»ä¿®æ”¹æ¯ä¸ªæ•°æ®åŒ…çš„æºIP åœ°å€ï¼Œä»¥ä¾¿å°†å›å¤è·¯ç”±å›å®ƒï¼Œè€Œä¸æ˜¯å‘é€åˆ°å‘å‡ºè¯·æ±‚çš„ç§æœ‰ IP åœ°å€ï¼Œè¿™åœ¨ Internet ä¸Šæ˜¯ä¸å¯èƒ½çš„ã€‚Linux ä½¿ç”¨è¿æ¥è·Ÿè¸ª(conntrack) è·Ÿè¸ªå“ªäº›è¿æ¥å±äºå“ªäº›æœºå™¨å¹¶ç›¸åº”åœ°é‡æ–°è·¯ç”±æ¯ä¸ªè¿”å›æ•°æ®åŒ…ã€‚å› æ­¤ï¼Œç¦»å¼€æ‚¨çš„ä¸“ç”¨ç½‘ç»œçš„æµé‡è¢«â€œä¼ªè£…â€ä¸ºæºè‡ªæ‚¨çš„ Ubuntu ç½‘å…³æœºå™¨ã€‚æ­¤è¿‡ç¨‹åœ¨ Microsoft æ–‡æ¡£ä¸­ç§°ä¸º Internet è¿æ¥å…±äº«ã€‚ ufw ä¼ªè£… å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ ufw è§„åˆ™æ¥å®ç° IP ä¼ªè£…ã€‚è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸º ufw çš„å½“å‰åç«¯æ˜¯ iptables-restoreï¼Œè§„åˆ™æ–‡ä»¶ä½äº/etc/ufw/*.rules. è¿™äº›æ–‡ä»¶æ˜¯æ·»åŠ ä¸ä½¿ç”¨ ufw ä½¿ç”¨çš„é—ç•™ iptables è§„åˆ™çš„å¥½åœ°æ–¹ï¼Œä»¥åŠä¸ç½‘å…³æˆ–ç½‘æ¡¥ç›¸å…³çš„è§„åˆ™ã€‚ è§„åˆ™åˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶ï¼Œåº”è¯¥åœ¨ufwå‘½ä»¤è¡Œè§„åˆ™ä¹‹å‰æ‰§è¡Œçš„è§„åˆ™ï¼Œä»¥åŠåœ¨ufwå‘½ä»¤è¡Œè§„åˆ™ä¹‹åæ‰§è¡Œçš„è§„åˆ™ã€‚ é¦–å…ˆéœ€è¦åœ¨ufwä¸­å¼€å¯æ•°æ®åŒ…è½¬å‘ã€‚éœ€è¦è°ƒæ•´ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œå°†DEFAULT_FORWARD_POLICY/etc/default/ufwæ›´æ”¹ä¸ºâ€œACCEPTâ€ï¼š DEFAULT_FORWARD_POLICY=\"ACCEPT\" ç„¶åç¼–è¾‘/etc/ufw/sysctl.confå¹¶å–æ¶ˆæ³¨é‡Šï¼š net/ipv4/ip_forward=1 åŒæ ·ï¼Œå¯¹äº IPv6 è½¬å‘å–æ¶ˆæ³¨é‡Šï¼š net/ipv6/conf/default/forwarding=1 ç°åœ¨å°†è§„åˆ™æ·»åŠ åˆ°/etc/ufw/before.rulesæ–‡ä»¶ä¸­ã€‚é»˜è®¤è§„åˆ™åªé…ç½®è¿‡æ»¤è¡¨ï¼Œå¹¶ä¸”å¯ç”¨ä¼ªè£…natè¡¨éœ€è¦é…ç½®ã€‚å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶é¡¶éƒ¨çš„æ ‡é¢˜æ³¨é‡Šä¹‹åï¼š # nat Table rules *nat :POSTROUTING ACCEPT [0:0] # Forward traffic from eth1 through eth0. -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j MASQUERADE # don't delete the 'COMMIT' line or these nat table rules won't be processed COMMIT æ³¨é‡Šä¸æ˜¯ç»å¯¹å¿…è¦çš„ï¼Œä½†è®°å½•æ‚¨çš„é…ç½®è¢«è®¤ä¸ºæ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ã€‚æ­¤å¤–ï¼Œåœ¨ä¿®æ”¹ ä¸­çš„ä»»ä½•è§„åˆ™æ–‡ä»¶æ—¶/etc/ufwï¼Œè¯·ç¡®ä¿è¿™äº›è¡Œæ˜¯æ¯ä¸ªä¿®æ”¹è¡¨çš„æœ€åä¸€è¡Œï¼š # don't delete the 'COMMIT' line or these rules won't be processed COMMIT å¯¹äºæ¯ä¸ªè¡¨ï¼Œéƒ½éœ€è¦ä¸€ä¸ªç›¸åº”çš„COMMITè¯­å¥ã€‚åœ¨è¿™äº›ç¤ºä¾‹ä¸­ï¼Œåªæ˜¾ç¤ºäº†natå’Œfilterè¡¨ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥ä¸ºrawå’Œmangleè¡¨æ·»åŠ è§„åˆ™ã€‚ ç¬”è®° åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå°†eth0ã€eth1å’Œ192.168.0.0/24æ›¿æ¢ä¸ºé€‚åˆæ‚¨ç½‘ç»œçš„æ¥å£å’Œ IP èŒƒå›´ã€‚ æœ€åï¼Œç¦ç”¨å¹¶é‡æ–°å¯ç”¨ ufw ä»¥åº”ç”¨æ›´æ”¹ï¼š sudo ufw disable \u0026\u0026 sudo ufw enable ç°åœ¨åº”è¯¥å¯ç”¨ IP ä¼ªè£…ã€‚æ‚¨è¿˜å¯ä»¥å°†ä»»ä½•å…¶ä»– FORWARD è§„åˆ™æ·»åŠ åˆ°/etc/ufw/before.rules. å»ºè®®å°†è¿™äº›é™„åŠ è§„åˆ™æ·»åŠ åˆ°ufw-before-forwardé“¾ä¸­ã€‚ iptables ä¼ªè£… iptables ä¹Ÿå¯ç”¨äºå¯ç”¨ä¼ªè£…ã€‚ ä¸ ufw ç±»ä¼¼ï¼Œç¬¬ä¸€æ­¥æ˜¯é€šè¿‡ç¼–è¾‘/etc/sysctl.confå¹¶å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œæ¥å¯ç”¨ IPv4 æ•°æ®åŒ…è½¬å‘ï¼š net.ipv4.ip_forward=1 å¦‚æœæ‚¨å¸Œæœ›å¯ç”¨ IPv6 è½¬å‘ä¹Ÿå–æ¶ˆæ³¨é‡Šï¼š net.ipv6.conf.default.forwarding=1 æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œ sysctl å‘½ä»¤ä»¥å¯ç”¨é…ç½®æ–‡ä»¶ä¸­çš„æ–°è®¾ç½®ï¼š sudo sysctl -p ç°åœ¨å¯ä»¥ä½¿ç”¨å•ä¸ª iptables è§„åˆ™å®Œæˆ IP ä¼ªè£…ï¼Œæ ¹æ®æ‚¨çš„ç½‘ç»œé…ç½®ï¼Œè¯¥è§„åˆ™å¯èƒ½ç•¥æœ‰ä¸åŒï¼š sudo iptables -t nat -A POSTROUTING -s 192.168.0.0/16 -o ppp0 -j MASQUERADE ä¸Šè¿°å‘½ä»¤å‡è®¾æ‚¨çš„ç§æœ‰åœ°å€ç©ºé—´æ˜¯ 192.168.0.0/16ï¼Œå¹¶ä¸”æ‚¨çš„é¢å‘ Internet çš„è®¾å¤‡æ˜¯ ppp0ã€‚è¯­æ³•åˆ†è§£å¦‚ä¸‹ï¼š -t nat â€“ è§„åˆ™æ˜¯è¿›å…¥ nat è¡¨ -A POSTROUTING â€“ è§„åˆ™å°†è¢«é™„åŠ  (-A) åˆ° POSTROUTING é“¾ -s 192.168.0.0/16 â€“ è¯¥è§„åˆ™é€‚ç”¨äºæºè‡ªæŒ‡å®šåœ°å€ç©ºé—´çš„æµé‡ -o ppp0 â€“ è¯¥è§„åˆ™é€‚ç”¨äºè®¡åˆ’é€šè¿‡æŒ‡å®šç½‘ç»œè®¾å¤‡è·¯ç”±çš„æµé‡ -j MASQUERADE - ä¸æ­¤è§„åˆ™åŒ¹é…çš„æµé‡å°†â€œè·³è½¬â€ï¼ˆ-jï¼‰åˆ°è¦æ“ä½œçš„ MASQUERADE ç›®æ ‡ï¼Œå¦‚ä¸Šæ‰€è¿° æ­¤å¤–ï¼Œè¿‡æ»¤å™¨è¡¨ä¸­çš„æ¯ä¸ªé“¾ï¼ˆé»˜è®¤è¡¨ï¼Œä»¥åŠå¤§å¤šæ•°æˆ–æ‰€æœ‰æ•°æ®åŒ…è¿‡æ»¤å‘ç”Ÿçš„åœ°æ–¹ï¼‰éƒ½æœ‰ä¸€ä¸ªé»˜è®¤ç­–ç•¥ACCEPTï¼Œä½†å¦‚æœé™¤äº†ç½‘å…³è®¾å¤‡ä¹‹å¤–ï¼Œæ‚¨è¿˜åˆ›å»ºäº†é˜²ç«å¢™ï¼Œæ‚¨å¯èƒ½å·²å°†ç­–ç•¥è®¾ç½®ä¸ºDROP æˆ– REJECTï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨çš„ä¼ªè£…æµé‡éœ€è¦é€šè¿‡ FORWARD é“¾å…è®¸æ‰èƒ½ä½¿ä¸Šè¿°è§„åˆ™èµ·ä½œç”¨ï¼š sudo iptables -A FORWARD -s 192.168.0.0/16 -o ppp0 -j ACCEPT sudo iptables -A FORWARD -d 192.168.0.0/16 -m state \\ --state ESTABLISHED,R","date":"2022-01-02","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/:0:6","tags":["ubuntu"],"title":"ubuntuä½¿ç”¨ä¸Šç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"ä¸ƒã€æ—¥å¿— é˜²ç«å¢™æ—¥å¿—å¯¹äºè¯†åˆ«æ”»å‡»ã€æ’é™¤é˜²ç«å¢™è§„åˆ™æ•…éšœä»¥åŠæ³¨æ„ç½‘ç»œä¸Šçš„å¼‚å¸¸æ´»åŠ¨è‡³å…³é‡è¦ã€‚ä½†æ˜¯ï¼Œæ‚¨å¿…é¡»åœ¨é˜²ç«å¢™ä¸­åŒ…å«æ—¥å¿—è§„åˆ™æ‰èƒ½ç”Ÿæˆå®ƒä»¬ï¼Œå¹¶ä¸”æ—¥å¿—è§„åˆ™å¿…é¡»å‡ºç°åœ¨ä»»ä½•é€‚ç”¨çš„ç»ˆæ­¢è§„åˆ™ï¼ˆå…·æœ‰å†³å®šæ•°æ®åŒ…å‘½è¿çš„ç›®æ ‡çš„è§„åˆ™ï¼Œä¾‹å¦‚ ACCEPTã€DROP æˆ– REJECTï¼‰ä¹‹å‰ã€‚ å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ ufwï¼Œåˆ™å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹æ¥æ‰“å¼€æ—¥å¿—è®°å½•ï¼š sudo ufw logging on è¦åœ¨ ufw ä¸­å…³é—­æ³¨é”€ï¼Œåªéœ€åœ¨ä¸Šè¿°å‘½ä»¤ä¸­å°†onæ›¿æ¢ä¸ºoffã€‚ å¦‚æœä½¿ç”¨ iptables è€Œä¸æ˜¯ ufwï¼Œè¯·è¾“å…¥ï¼š sudo iptables -A INPUT -m state --state NEW -p tcp --dport 80 \\ -j LOG --log-prefix \"NEW_HTTP_CONN: \" ç„¶åï¼Œæ¥è‡ªæœ¬åœ°è®¡ç®—æœºçš„ç«¯å£ 80 ä¸Šçš„è¯·æ±‚å°†åœ¨ dmesg ä¸­ç”Ÿæˆå¦‚ä¸‹æ‰€ç¤ºçš„æ—¥å¿—ï¼ˆå°†å•è¡Œæ‹†åˆ†ä¸º 3 è¡Œä»¥é€‚åˆæ­¤æ–‡æ¡£ï¼‰ï¼š [4304885.870000] NEW_HTTP_CONN: IN=lo OUT= MAC=00:00:00:00:00:00:00:00:00:00:00:00:08:00 SRC=127.0.0.1 DST=127.0.0.1 LEN=60 TOS=0x00 PREC=0x00 TTL=64 ID=58288 DF PROTO=TCP SPT=53981 DPT=80 WINDOW=32767 RES=0x00 SYN URGP=0 ä¸Šé¢çš„æ—¥å¿—ä¹Ÿä¼šå‡ºç°åœ¨/var/log/messagesã€/var/log/syslogã€ å’Œ ä¸­/var/log/kern.logã€‚å¯ä»¥é€šè¿‡/etc/syslog.confé€‚å½“ç¼–è¾‘æˆ–å®‰è£…å’Œé…ç½® ulogd å¹¶ä½¿ç”¨ ULOG ç›®æ ‡è€Œä¸æ˜¯ LOGæ¥ä¿®æ”¹æ­¤è¡Œä¸ºã€‚ulogd å®ˆæŠ¤è¿›ç¨‹æ˜¯ä¸€ä¸ªç”¨æˆ·ç©ºé—´æœåŠ¡å™¨ï¼Œå®ƒä¸“é—¨ä¸ºé˜²ç«å¢™ä¾¦å¬æ¥è‡ªå†…æ ¸çš„æ—¥å¿—è®°å½•æŒ‡ä»¤ï¼Œå¹¶ä¸”å¯ä»¥è®°å½•åˆ°æ‚¨å–œæ¬¢çš„ä»»ä½•æ–‡ä»¶ï¼Œç”šè‡³æ˜¯ PostgreSQL æˆ– MySQL æ•°æ®åº“ã€‚ä½¿ç”¨æ—¥å¿—åˆ†æå·¥å…·ï¼ˆä¾‹å¦‚ logwatchã€fwanalogã€fwlogwatch æˆ– lireï¼‰å¯ä»¥ç®€åŒ–ç†è§£é˜²ç«å¢™æ—¥å¿—çš„è¿‡ç¨‹ã€‚ ","date":"2022-01-02","objectID":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/:0:7","tags":["ubuntu"],"title":"ubuntuä½¿ç”¨ä¸Šç¯‡","uri":"/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/"},{"categories":["å·¥å…·"],"content":"SSHæœåŠ¡ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:1:0","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"SSHæœåŠ¡åè®®è¯´æ˜ SSH æ˜¯ Secure Shell Protocol çš„ç®€å†™ï¼Œç”± IETF ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Group )åˆ¶å®šï¼›åœ¨è¿›è¡Œæ•°æ®ä¼ è¾“ä¹‹å‰ï¼ŒSSHå…ˆå¯¹è”æœºæ•°æ®åŒ…é€šè¿‡åŠ å¯†æŠ€æœ¯è¿›è¡ŒåŠ å¯†å¤„ç†ï¼ŒåŠ å¯†ååœ¨è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚ç¡®ä¿äº†ä¼ é€’çš„æ•°æ®å®‰å…¨ã€‚ SSHæ˜¯ä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›çš„å®‰å…¨æ€§åè®®ã€‚åˆ©ç”¨ SSH åè®®å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢è¿œç¨‹ç®¡ç†è¿‡ç¨‹ä¸­çš„ä¿¡æ¯æ³„éœ²é—®é¢˜ï¼Œåœ¨å½“å‰çš„ç”Ÿäº§ç¯å¢ƒè¿ç»´å·¥ä½œä¸­ï¼Œç»å¤§å¤šæ•°ä¼ä¸šæ™®éé‡‡ç”¨SSHåè®®æœåŠ¡æ¥ä»£æ›¿ä¼ ç»Ÿçš„ä¸å®‰å…¨çš„è¿œç¨‹è”æœºæœåŠ¡è½¯ä»¶ï¼Œå¦‚telnet(23ç«¯å£ï¼ŒéåŠ å¯†çš„)ç­‰ã€‚ åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼ŒSSHæœåŠ¡ä¸»è¦æä¾›ä¸¤ä¸ªæœåŠ¡åŠŸèƒ½ï¼š ä¸€æ˜¯æä¾›ç±»ä¼¼telnetè¿œç¨‹è”æœºæœåŠ¡å™¨çš„æœåŠ¡ï¼Œå³ä¸Šé¢æåˆ°çš„SSHæœåŠ¡ã€‚ å¦ä¸€ä¸ªæ˜¯ç±»ä¼¼FTPæœåŠ¡çš„sftp-server,å€ŸåŠ©SSHåè®®æ¥ä¼ è¾“æ•°æ®çš„.æä¾›æ›´å®‰å…¨çš„SFTPæœåŠ¡(vsftpï¼Œproftp)ã€‚ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:1:1","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"SSHåŠ å¯†æŠ€æœ¯è¯´æ˜ å½“å‰ï¼Œç½‘ç»œä¸Šçš„æ•°æ®åŒ…åŠ å¯†æŠ€æœ¯ä¸€èˆ¬æ˜¯é€šè¿‡æ‰€è°“çš„ä¸€å¯¹å…¬é’¥ä¸ç§é’¥ï¼ˆPublickeyandPivatekey)ç»„åˆæˆçš„å¯†é’¥å¯¹è¿›è¡ŒåŠ å¯†ä¸è§£å¯†æ“ä½œã€‚å¦‚ä¸‹å›¾ï¼ŒA-Serverè¦ç»™B_Clientä¼ æ•°æ®ï¼Œé¦–å…ˆä¼šé€šè¿‡æœ¬åœ°çš„å…¬é’¥åŠ å¯†åå†åˆ°å‘åˆ°ç½‘ç»œä¸Šä¼ è¾“ã€‚è€ŒåŠ å¯†çš„æ•°æ®åˆ°è¾¾B_Clientç«¯åï¼Œå†ç»ç”±B_Clientæœ¬åœ°çš„ç§é’¥å°†åŠ å¯†çš„æ•°æ®è§£å¯†å‡ºæ¥ã€‚sshè®¤è¯è¿æ¥çš„è¿‡ç¨‹å¦‚ä¸‹ sshå®ç°å®‰å…¨é“¾æ¥å»ºç«‹ï¼Œåˆ©ç”¨é’¥åŒ™å’Œé”å¤´ é’¥åŒ™=ç§é’¥ é”å¤´=å…¬é’¥ï¼Œç§é’¥å¯ä»¥è§£å¯†å…¬é’¥ã€‚ å…¬é’¥å¯ä»¥å†ç½‘ç»œä¸­ä¼ è¾“ï¼Œç§é’¥å†æœ¬åœ°ä¸»æœºä¿å­˜ã€‚ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:1:2","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"sshåŠ å¯†ç®—æ³• v1 æ¼æ´å¯†é’¥ä¸æ›´æ¢ã€‚ v2 å®šæœŸæ›´æ¢å¯†é’¥ã€‚ åˆ©ç”¨Diffie-Hellmanæœºåˆ¶å®šæœŸæ›´æ–°å¯†é’¥ã€‚ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:1:3","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"sshçŸ¥è¯†è¦ç‚¹ sshæ˜¯å®‰å…¨çš„åŠ å¯†åè®®ï¼Œç”¨äºè¿œç¨‹é“¾æ¥linuxæœåŠ¡å™¨ ssh é»˜è®¤ç«¯å£æ˜¯22ï¼Œå®‰å…¨åè®®ç‰ˆæœ¬sshv2ï¼Œå‡ºæ¥2ä¹‹å¤–è¿˜æœ‰1ï¼ˆæœ‰æ¼æ´ï¼‰ sshæœåŠ¡ç«¯ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæœåŠ¡åŠŸèƒ½ sshè¿œç¨‹é“¾æ¥å’ŒsftpæœåŠ¡ linux ssh å®¢æˆ·ç«¯åŒ…æ‹¬ssh è¿œç¨‹é“¾æ¥å‘½ä»¤ï¼Œä»¥åŠè¿œç¨‹æ‹·è´scpå‘½ä»¤ç­‰ã€‚ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:1:4","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"SSHæœåŠ¡è½¯ä»¶è¯¦ç»†è¯´æ˜ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:2:0","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"ä»€ä¹ˆæ˜¯sshæœåŠ¡ SSHæœåŠ¡ç«¯æ˜¯ä¸€ä¸ªå®ˆæŠ¤è®²ç¨‹ (daemon).å®ƒåœ¨åå°è¿è¡Œå¹¶å“åº”æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚ SSHæœåŠ¡ç«¯çš„è¿›ç¨‹åä¸ºsshdï¼Œè´Ÿè´£å®æ—¶ç›‘å¬è¿œç¨‹SSHå®¢æˆ·ç«¯çš„è¿œç¨‹è¿æ¥è¯·æ±‚ï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼Œä¸€èˆ¬åŒ…æ‹¬å…¬å…±å¯†é’¥è®¤è¯ã€å¯†é’¥äº¤æ¢ã€å¯¹ç§°å¯†é’¥åŠ å¯†å’Œéå®‰å…¨è¿æ¥ç­‰ã€‚è¿™ä¸ªSSHæœåŠ¡å°±æ˜¯æˆ‘ä»¬å‰é¢åŸºç¡€ç³»ç»Ÿä¼˜åŒ–ä¸­ä¿ç•™å¼€æœºè‡ªå¯åŠ¨çš„æœåŠ¡ä¹‹ã€‚ sshå®¢æˆ·ç«¯åŒ…å«sshä»¥åŠåƒscp(è¿œç¨‹æ‹·è´ï¼‰ slogin(è¿œç¨‹ç™»é™†) sftp(å®‰å…¨FTPæ–‡ä»¶ä¼ è¾“ï¼‰ç­‰åº”ç”¨ç¨‹åºã€‚ sshçš„å·¥ä½œæœºåˆ¶å¤§è‡´æ˜¯æœ¬åœ°çš„sshå®¢æˆ·ç«¯å…ˆå‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚åˆ°è¿œç¨‹çš„sshæœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ£€æŸ¥è¿æ¥çš„å®¢æˆ·ç«¯å‘é€çš„æ•°æ®åŒ…å’ŒIPåœ°å€ï¼Œå¦‚æœç¡®è®¤åˆæ³•ï¼Œå°±ä¼šå‘é€å¯†é’¥ç»™ SSHçš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯æœ¬åœ°å†å°†å¯†é’¥å‘å›ç»™æœåŠ¡ç«¯ï¼Œè‡ªæ­¤è¿æ¥å»ºç«‹ã€‚ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:2:1","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"sshè½¯ä»¶å®‰è£… å®¢æˆ·ç«¯ rpm -qf 'which ssh' openssh-clients-5.3p1-122.el6.x86_64 æœåŠ¡ç«¯è½¯ä»¶ rpm -qf 'which sshd' openssh-server-5.3p1-122.el6.x86_64 ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:2:2","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"openssh-clinets è½¯ä»¶çš„ä¸»è¦å†…å®¹ rpm -ql openssh-clients /etc/ssh/ssh_config ---sshå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ /usr/bin/.ssh.hmac /usr/bin/scp ---è¿œç¨‹å¤åˆ¶å‘½ä»¤ /usr/bin/sftp ---è¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡ /usr/bin/slogin ---è¿œç¨‹ç™»é™†å‘½ä»¤ /usr/bin/ssh ---sshè¿œç¨‹ç™»é™†ç®¡ç†ä¸»æœº /usr/bin/ssh-add /usr/bin/ssh-agent /usr/bin/ssh-copy-id ---sshæœåŠ¡åˆ†å‘å…¬é’¥å‘½ä»¤ /usr/bin/ssh-keyscan ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:2:3","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"openssh-server è½¯ä»¶çš„ä¸»è¦å†…å®¹ rpm -ql openssh-server /etc/rc.d/init.d/sshd #sshæœåŠ¡å¯åŠ¨è„šæœ¬ /etc/ssh/sshd_config #sshæœåŠ¡é…ç½®æ–‡ä»¶ /etc/sysconfig/sshd #sshåˆ›å»ºå¯†é’¥æœ‰å…³ /usr/sbin/.sshd.hmac #sshåŠ å¯†ç®—æ³•æœ‰å…³æ–‡ä»¶ /usr/sbin/sshd #sshæœåŠ¡è¿›ç¨‹å¯åŠ¨å‘½ä»¤ **æ³¨æ„ï¼š**è¦ä½¿ç”¨sshdé‡‡ç”¨ç»å¯¹è·¯å¾„è¿›è¡Œå¯åŠ¨ sshd sshd re-exec requires execution with an absolute path ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:2:4","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"sshæœåŠ¡é…ç½®æ–‡ä»¶è¯´æ˜ é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰æ³¨é‡Šä¿¡æ¯ï¼Œè¡¨ç¤ºé»˜è®¤å‚æ•°é…ç½® é…ç½®æ–‡ä»¶ä¸­#ç©ºæ ¼ åé¢å†…å®¹è¡¨ç¤ºè¯´æ˜ä¿¡æ¯ â€‹ #å‚æ•° è¡¨ç¤ºé…ç½®å‚æ•°ä¿¡æ¯ é…ç½®æ–‡ä»¶å‚æ•°ä¿¡æ¯ä¿®æ”¹åï¼Œä¸€æ—¦å˜ä¸ºæ³¨é‡Šï¼Œå³è¿˜åŸä¸ºé»˜è®¤é…ç½® ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:3:0","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"sshæœåŠ¡çš„é…ç½®æ–‡ä»¶è·¯å¾„ vim /etc/ssh/sshd_config ä¿®æ”¹SSHæœåŠ¡çš„è¿è¡Œå‚æ•°ï¼Œæ˜¯é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶**/etc/ssh/sshd_config**å®ç°çš„ã€‚ ä¸€èˆ¬æ¥è¯´SSHæœåŠ¡ä½¿ç”¨é»˜è®¤çš„é…ç½®å·²ç»èƒ½å¤Ÿå¾ˆå¥½çš„å·¥ä½œäº†ï¼Œå¦‚æœå¯¹å®‰å…¨è¦æ±‚ä¸é«˜ï¼Œä»…ä»…æä¾›SSHæœåŠ¡çš„æƒ…å†µï¼Œå¯ä»¥ä¸éœ€è¦ä¿®æ”¹ä»»ä½•é…ç½®ã€‚ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:3:1","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"é…ç½®æ–‡ä»¶ä¸­å¸¸ç”¨é…ç½®è¯´æ˜ vim /etc/ssh/sshd_config # $OpenBSD: sshd_config,v 1.80 2008/07/02 02:24:18 djm Exp $ # This is the sshd server system-wide configuration file. See # sshd_config(5) for more information. # This sshd was compiled with PATH=/usr/local/bin:/bin:/usr/bin # The strategy used for options in the default sshd_config shipped with # OpenSSH is to specify options with their default value where # possible, but leave them commented. Uncommented options change a # default value. # OpenSSH is to specify options with their default value where # possible, but leave them commented. Uncommented options change a # default value. Port 25113 #ç«¯å£ ListenAddress 10.0.0.41 #ç›‘å¬åœ°å€ï¼ˆæœ¬åœ°ç½‘å¡åœ°å€ï¼‰ï¼ŒæŒ‡å®šæœ¬åœ°ç½‘å¡é‚£ä¸ªç½‘å¡æä¾›æœåŠ¡ PermitRootLogin no #æ˜¯å¦å…è®¸rootç”¨æˆ·ç™»é™† #PermitEmptyPasswords no #ç¦æ­¢ç©ºå¯†ç ç™»é™† #UseDNS no #ä¸ä½¿ç”¨DNS GSSAPIAuthentication no #APIè®¤è¯ # è¿æ¥æ…¢çš„è§£å†³ #AddressFamily any #æŒ‡å®šç›‘å¬ipv4åœ°å€ï¼Œæˆ–æ˜¯ipv6åœ°å€ï¼Œæˆ–è€…æ‰€æœ‰éƒ½ç›‘å¬ é…ç½®æ–‡ä»¶å†…å®¹è¯´æ˜ äº•å·(#)æ³¨é‡Šçš„å‚æ•°ä¿¡æ¯ä¸ºé»˜è®¤é…ç½® äº•å·(#)åé¢æœ‰ç©ºæ ¼çš„ä¸ºæè¿°ä¿¡æ¯ äº•å·(#)åé¢æ²¡æœ‰ç©ºæ ¼çš„ä¸ºå‚æ•°ä¿¡æ¯ **å¦å¤–ï¼š**é…ç½®æ–‡ä»¶å‚æ•°ä¿¡æ¯ä¿®æ”¹åï¼Œä¸€æ—¦å˜ä¸ºæ³¨é‡Šï¼Œå³è¿˜åŸä¸ºé»˜è®¤é…ç½®. è¯­æ³•æ ¼å¼æœ‰é”™è¯¯ â†“ sshd -t /etc/ssh/sshd_config /etc/ssh/sshd_config: line 50: Bad configuration option: uthorizedKeysFile /etc/ssh/sshd_config: terminating, 1 bad configuration options sshæœåŠ¡ç›‘å¬å‚æ•°è¯´æ˜ å¦‚å›¾æ‰€ç¤ºï¼Œsshd_configé…ç½®æ–‡ä»¶ä¸­å®é™…ç›‘å¬æœ¬åœ°çš„ç½‘å¡ï¼Œå¹¶éç½‘ç»œåœ°å€ ç›‘å¬åœ°å€åªèƒ½ç›‘å¬æœ¬åœ°ç½‘å¡ä¸Šé…ç½®çš„åœ°å€ï¼Œç›‘å¬çš„ç½‘å¡å¯ä»¥å¯¹è¯·æ±‚åšå‡ºç›¸åº”ï¼Œä¸ºæœªç›‘å¬çš„ç½‘å¡ä¸å“åº”è¯·æ±‚ã€‚ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:3:2","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"sshè¿æ¥æ…¢è§£å†³æ–¹æ³• vi /etc/ssh/sshd_config ä¿®æ”¹å‡ ä¸ªå‚æ•°ã€‚ UseDNS noGSSAPIAuthentication no ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:4:0","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"ssh å¯†é’¥è®¤è¯æ–¹å¼ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:5:0","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"ubuntu server 20.04 è‡ªåŠ¨ç™»å½•ã€‚ æ•ˆæœ1ï¼š æ•ˆæœ2ï¼š æ•ˆæœ1å®ç°ï¼š ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:6:0","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"é¦–å…ˆæŒ‡å®šè‡ªåŠ¨ç™»å½•ç”¨æˆ· sudo vim /etc/systemd/system/getty.target.wants/getty@tty1.service ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:6:1","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"å†è®¾ç½®å…å¯†ç ç™»å½• sudo vim /etc/passwd å°† rootâŒ0:0:root:/root:/bin/bash ä¸­çš„xå»æ‰ï¼Œå³ï¼šroot::0:0:root:/root:/bin/bashï¼Œå¦‚æœè¦æŒ‡å®šåˆ«çš„ç”¨æˆ·å¯ä»¥æ‰¾åˆ°ç›¸å¯¹åº”çš„è¡Œï¼Œç”¨æˆ·åä½äºç¬¬ä¸€è¡Œã€‚ ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:6:2","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["å·¥å…·"],"content":"å…è®¸sshè¿œç¨‹ç™»å½• sudo vim /etc/ssh/sshd_configï¼Œæ‰¾åˆ°PermitRootLogin without-password ä¿®æ”¹ä¸ºPermitRootLogin yes systemctl restart sshd systemctl restart ssh æ•ˆæœ2ï¼š æ¯å°æœºå™¨è®¾ç½®hosts vi /etc/hosts 10.4.7.70 master 10.4.7.71 worker1 10.4.7.72 worker2 æ§åˆ¶ç«¯master ä¸Šç”Ÿæˆå…¬é’¥å’Œç§é’¥ã€‚ä¸‰æ¬¡å›è½¦ã€‚ cd ~/.ssh ssh-keygen -t rsa ls authorized_keys id_rsa id_rsa.pub known_hosts å°†å…¬é’¥ä¼ ç»™è¢«æ§ç«¯/root/.sshå†… å…¬é’¥ï¼šid_rsa.pub ç§é’¥ï¼šid_rsa å°†ç”Ÿæˆçš„å…¬é’¥å†…å®¹å†™å…¥åˆ°authorized_keysï¼ˆæ§åˆ¶ç«¯å’Œè¢«æ§ç«¯ç«¯éƒ½æ“ä½œï¼‰ cat id_rsa.pub \u003e\u003e authorized_keys éƒ½é‡å¯ssh systemctl restart sshdsystemctl restart ssh æµ‹è¯•ï¼š åœ¨æ§åˆ¶ç«¯è¿è¢«æ§ç«¯çœ‹éœ€ä¸éœ€è¦å¯†ç  ssh worker1 ","date":"2022-01-02","objectID":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/:6:3","tags":["ssh"],"title":"sshç›¸å…³è¯´æ˜","uri":"/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/"},{"categories":["ç½‘ç«™"],"content":"æŠ€æœ¯é€‰å‹ ä½¿ç”¨Hexo+keep+Github Actions+jsdelivrè¿™ä¸€å¥—æŠ€æœ¯å®ç°blogæ­å»ºåŠè‡ªåŠ¨åŒ–éƒ¨ç½² ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:1:0","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"å¼€å§‹æ­å»º å®‰è£…node ä¸‹è½½åœ°å€ï¼šnodeä¸‹è½½ .å®‰è£…LTSç‰ˆæœ¬ã€‚ å®‰è£… Hexo npm install hexo-cli -g æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ°¸è¿œå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Hexoï¼Œä»¥åŠ æ¨èçš„ Node.js ç‰ˆæœ¬ ã€‚ Hexo ç‰ˆæœ¬ æœ€ä½å…¼å®¹ Node.js ç‰ˆæœ¬ 5.0+ 10.13.0 4.1 - 4.2 8.10 4.0 8.6 3.3 - 3.9 6.9 3.2 - 3.3 0.12 3.0 - 3.1 0.10 or iojs 0.0.1 - 2.8 0.10 åˆå§‹åŒ–åšå®¢ç›®å½• hexo init Smithkenny.github.io # è¿™é‡Œçš„Smithkennyæ¢æˆä½ è‡ªå·±çš„è‹±æ–‡å åˆå§‹åŒ–å®Œæˆåï¼Œæˆ‘ä»¬å°±è¿›å…¥æˆ‘ä»¬çš„ç›®å½• cd Smithkenny.github.io å®‰è£… npm install cleanä¸€ä¸‹ï¼Œç„¶åç”Ÿæˆé™æ€é¡µé¢ hexo clean hexo g æŠŠä½ çš„ç½‘ç«™è¿è¡Œèµ·æ¥ hexo s æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè¾“å…¥ localhost:4000 ã€‚ è‡ªæ­¤ï¼Œä½ çš„ä¸ªäººç½‘ç«™å°±è¿™ä¹ˆé€Ÿåº¦çš„æ­å»ºèµ·æ¥äº†ï¼ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:1:1","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"ä¸»é¢˜é€‰æ‹© åˆå§‹åŒ–åšå®¢åï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š . â”œâ”€â”€ _config.yml â”œâ”€â”€ package.json â”œâ”€â”€ scaffolds â”œâ”€â”€ source | â”œâ”€â”€ _drafts | â””â”€â”€ _posts â””â”€â”€ themes _config.yml ç½‘ç«™çš„ é…ç½® ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚ æˆ‘çš„é…ç½®å¦‚ä¸‹ï¼š # Site title: Peng's Blog subtitle: Peng çš„ä¸ªäººåšå®¢ description: '' keywords: author: Haipeng language: zh-CN timezone: Asia/Shanghai # URL ## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project' url: https://www.haipengv.com package.json åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚EJS , Stylus å’Œ Markdown renderer å·²é»˜è®¤å®‰è£…ï¼Œæ‚¨å¯ä»¥è‡ªç”±ç§»é™¤ã€‚ scaffolds æ¨¡ç‰ˆ æ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ã€‚ Hexoçš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„æ–‡ç« æ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¿®æ”¹scaffold/post.mdä¸­çš„Front-matterå†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚ source èµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚ themes ä¸»é¢˜ æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:2:0","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"é€‰æ‹©ä¸€ä¸ªä¸»é¢˜ è¿™é‡Œå¯ä»¥é€‰æ‹©ä½ è¦çš„ä¸»é¢˜ ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ã€keepä¸»é¢˜ï¼Œå› ä¸ºå®ƒå¾ˆç®€æ´ã€‚ ä¸‹è½½ä¸»é¢˜ keepä¸»é¢˜githubåœ°å€ï¼šhttps://github.com/XPoet/hexo-theme-keep keep ä¸»é¢˜å®˜æ–¹æ–‡æ¡£ï¼šhttps://keep-docs.xpoet.cn/ # è¿™é‡Œä½¿ç”¨npmæ–¹å¼å®‰è£…æ–¹ä¾¿åæœŸè¿›è¡Œä»£ç æ‰˜ç®¡ç»´æŠ¤ npm install hexo-theme-keep é…ç½®ä¸»é¢˜ ä¸»é¢˜ä¸‹è½½å®Œä¹‹åï¼Œåœ¨ä½ æ ¹ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹ theme ä¸ºä½ çš„ä¸»é¢˜åå­— theme: keep æˆ‘è¿™é‡Œé€‰æ‹©è‡ªå®šä¹‰hexo-theme-keepä¸»é¢˜ï¼Œå¯ä»¥å‚è€ƒkeepä¸»é¢˜å¹³æ»‘å‡çº§ åœ¨åšå®¢æ ¹ç›®å½•ä¸‹çš„ sourceç›®å½•ä¸­æ–°å»ºæ–‡ä»¶å¤¹_data å°†node_modulesä¸‹çš„hexo-theme-keepç›®å½•ä¸­å¤åˆ¶å‡º_config.ymlæ–‡ä»¶åˆ°source/_data/ä¸­ï¼Œå¹¶é‡å‘½åä¸ºkeep.ymlã€‚ åœ¨keep.ymlå¯æ ¹æ®æ–‡æ¡£é…ç½®å¯¹åº”çš„å±æ€§ã€‚ é‡æ–°ç”Ÿæˆå’Œè¿è¡Œ hexo clean hexo g hexo s keepä¸»é¢˜ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:2:1","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"åšå®¢æ–‡ç« åˆ›å»º æœ‰ä¸¤ç§æ–¹å¼æ¥æ–°å»ºä½ çš„åšæ–‡ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:3:0","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"å‘½ä»¤å½¢å¼ åœ¨ä½ çš„blogç›®å½•ä¸‹ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š hexo new hello # è¿™é‡Œçš„articleå†™ä¸Šä½ çš„æ–‡ç« çš„åç§° ä½ çš„source/_postsä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ª hello.mdæ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹å°±å¯ä»¥å†™ä¸Šä½ çš„åšå®¢å†…å®¹äº†ã€‚ç”¨ Markdown çš„è¯­æ³•å»å†™ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:3:1","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"ç›´æ¥æ–°å»ºæ–¹å¼ ç›´æ¥ç‚¹çš„æ–¹å¼å°±æ˜¯ç›´æ¥åœ¨source/_postsæ–°å»ºä¸€ä¸ª Markdown æ–‡ä»¶ã€‚ æ‰“ä¸Šæ ‡ç­¾ æ‰“æ ‡ç­¾èƒ½è®©ä½ çš„æ–‡ç« æ–¹ä¾¿æ£€ç´¢ã€‚ æ‰“å¼€æ ‡ç­¾åŠŸèƒ½ï¼š hexo new page tags è¿™æ—¶å€™ä½ çš„source/ä¸‹ç”Ÿæˆ tags/index.md æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†å…¶æ‰“å¼€ï¼Œç„¶åæŠŠå®ƒæ”¹æˆï¼š type: \"tags\" comments: false è¿™æ—¶å€™ä½ è¦ä¸ºä½ çš„æ–‡ç« æ‰“ä¸Šæ ‡ç­¾å°±å¯ä»¥åœ¨æ–‡ç« çš„å¤´éƒ¨å†™ä¸Š --- title: Java å®‰è£…ä¸ä½¿ç”¨ date: 2021-12-28 15:36:27 tags: Java tags: \u003c\u003cå…¶ä»–ä½ æƒ³æ‰“çš„æ ‡ç­¾\u003e\u003e --- æ·»åŠ åˆ†ç±» åˆ†ç±»ï¼Œå½’æ¡£ï¼Œæ˜¯ä½ åšå®¢çš„ç‰¹æ€§ä¹‹ä¸€ã€‚ æ‰“å¼€åˆ†ç±»åŠŸèƒ½ï¼š hexo new page categories è¿™è¯´ä½ çš„sourceç›®å½•ä¸‹ç”Ÿæˆ categories/index.md æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†å…¶æ‰“å¼€ï¼ŒæŠŠå®ƒæ”¹æˆï¼š type: \"categories\" comments: false è¿™æ—¶å€™ä½ å°±å¯ä»¥ç»™ä½ çš„æ–‡ç« å½’ç±»å­˜æ¡£äº†ï¼Œä½¿ç”¨æ–¹å¼å°±æ˜¯åœ¨ä½ çš„æ–‡ç« çš„å¤´éƒ¨åŠ ä¸Š --- title: Java å®‰è£…ä¸ä½¿ç”¨ date: 2021-12-28 15:36:27 tags: Java categories: Java categories: \u003c\u003cå…¶ä»–ä½ æƒ³åˆ†çš„ç±»\u003e\u003e --- æ³¨æ„ï¼šæ ‡ç­¾å’Œåˆ†ç±»è¦ç¡®å®šä½ çš„é…ç½®æ–‡ä»¶ _config.yml æ˜¯å¦æœ‰æ‰“å¼€äº† tag_dir: tags å’Œ category_dir: categoriesã€‚å¦å¤–ï¼ŒMarkdown çš„è¯­æ³•æ˜¯å†™ä½œæœ€ä¼˜é›…æœ€ç®€æ´æœ€ç®€å•çš„ï¼Œå¦‚æœä¹‹å‰æ²¡ç”¨è¿‡çš„å»ºè®®å»å­¦ä¸€ä¸‹Markdown è¯­æ³•è¯´æ˜ ï¼Œä¸€èˆ¬ä¸€ä¸ªé’Ÿå·¦å³å°±èƒ½æŒæ¡ã€‚å› ä¸ºå®ƒå’ŒHTMLé‚£æ ·ç®€å•ã€‚ æ·»åŠ è¯„è®ºç³»ç»Ÿ keepä¸»é¢˜æä¾›è¯„è®ºç³»ç»Ÿï¼Œè¯¦æƒ…è§keep comment è¿™é‡Œå…ˆæš‚æ—¶ä¸å¼€å¯è¯„è®ºäº†ã€‚å› ä¸ºå‘ç°åˆ›å»ºå®Œä¹‹åè¿˜æ˜¯æ— æ³•è¯„è®ºã€‚ éƒ¨ç½²åˆ°çº¿ä¸Š å¯ä»¥é€šè¿‡GitHub Pagesæ¥åˆ›å»ºå…è´¹çš„çº¿ä¸Šè®¿é—®åœ°å€ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:3:2","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"å®‰è£… Git Windowsï¼šä¸‹è½½å¹¶å®‰è£… git . Macï¼šä½¿ç”¨ Homebrew , MacPorts æˆ–è€…ä¸‹è½½ å®‰è£…ç¨‹åº ã€‚ Linux (Ubuntu, Debian)ï¼šsudo apt-get install git-core Linux (Fedora, Red Hat, CentOS)ï¼šsudo yum install git-core Mac ç”¨æˆ· å¦‚æœåœ¨ç¼–è¯‘æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ï¼Œè¯·å…ˆåˆ° App Store å®‰è£… Xcodeï¼ŒXcode å®Œæˆåï¼Œå¯åŠ¨å¹¶è¿›å…¥ Preferences -\u003e Download -\u003e Command Line Tools -\u003e Install å®‰è£…å‘½ä»¤è¡Œå·¥å…·ã€‚ Windows ç”¨æˆ· å¯¹äºä¸­å›½å¤§é™†åœ°åŒºç”¨æˆ·ï¼Œå¯ä»¥å‰å¾€ æ·˜å® Git for Windows é•œåƒ ä¸‹è½½ git å®‰è£…åŒ…ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:4:0","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"åˆ›å»ºGithub pages ä»“åº“ åˆ›å»ºä¸€ä¸ªxxx.github.ioçš„ public ä»“åº“ï¼Œè¿™é‡Œçš„xxxå†™ä½ çš„åå­—ï¼Œæ¯”å¦‚æˆ‘å†™çš„æ˜¯ Smithkenny.github.io ,é‚£ä¹ˆåˆ°æ—¶æˆ‘å°±å¯ä»¥é€šè¿‡ Smithkenny.github.io æ¥è®¿é—®æˆ‘çš„ç½‘ç«™äº†ã€‚ åˆ›å»ºå®Œæˆä¹‹åï¼Œé‚£ä¹ˆä½ å°±æœ‰è‡ªå·±çš„ Git åœ°å€äº†ã€‚ å®‰è£…hexo-deployer-git cd Smithkenny.github.io npm install hexo-deployer-git --save ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:0","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"é…ç½®ä½ çš„Git æ‰“å¼€ä½ çš„é…ç½®æ–‡ä»¶_config.ymlï¼š deploy: type: git repo: https://github.com/xxx/xxx.github.io.git // è¾“å…¥ä½ çš„gitåœ°å€ githubåœ°å€æŸ¥çœ‹ï¼š ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:1","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"æ¨é€ä½ çš„ç½‘ç«™åˆ°Githubä¸Š hexo d # d å°±æ˜¯ deployï¼Œéƒ¨ç½²ä¸Šå»çš„æ„æ€ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:2","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"è®¿é—®ä½ çš„ç½‘ç«™ ç›´æ¥åœ¨æµè§ˆå™¨è¾“å…¥ä½ çš„ xxx.github.io å°±å¯ä»¥è®¿é—®äº†ã€‚ ç»‘å®šè‡ªå·±çš„åŸŸå æ·»åŠ  CNAME æ–‡ä»¶ # è¿›å…¥sources cd sources # åˆ›å»ºCNAMEæ–‡ä»¶ï¼Œå†™å…¥è‡ªå·±çš„åŸŸåï¼Œå¦‚ï¼šwww.haipengv.com touch CNAME åœ¨ä½ çš„åŸŸåå•†åå°è¿›è¡Œ DNS è§£ææ·»åŠ ä¸¤æ¡è®°å½• ä¸»æœºè®°å½•ï¼š @ è®°å½•ç±»å‹ï¼šA è®°å½•å€¼ï¼šip1 æˆ–è€… ip2 ä¸»æœºè®°å½•ï¼š www è®°å½•ç±»å‹ï¼š CNAME è®°å½•å€¼ï¼š Smithkenny.github.io (è¿™é‡Œå°±æ˜¯ä½ çš„githubä»“åº“åç§°) ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:3","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"GitHub è®¾ç½®åŸŸå åœ¨ä½ çš„ GitHub è®¾ç½®åŸŸåï¼Œåœ¨ä½ çš„ GitHub åšå®¢é¡¹ç›®ä¸­ç‚¹å‡» Settingsï¼Œåœ¨ GitHub Pages ä¸‹çš„ Custom domain å†™ä¸Šä½ çš„åŸŸåï¼Œç„¶å saveã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:4","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"è‡ªåŠ¨éƒ¨ç½² æ ¹æ®ä¹‹å‰çš„æ­¥éª¤æˆ‘ä»¬ä½¿ç”¨ Hexo + Keep ä¸»é¢˜æ­å»ºäº†ä¸€ä¸ªåœ¨çº¿åšå®¢ï¼Œä¸‹é¢æ•™ä½ å¦‚ä½•ä½¿ç”¨ GitHub Actions å°†åšå®¢è‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pagesã€‚ä»¥ä¸‹å†…å®¹å‚è€ƒäº†keepä¸»é¢˜ä½œè€…çš„åšæ–‡ . GitHub Actions åˆ›å»º GitHub ä»“åº“ åˆ›å»ºä¸€ä¸ªç§æœ‰ä»“åº“ç”¨æ¥å­˜å‚¨ Hexo é¡¹ç›®æºä»£ç ã€‚ï¼ˆä¿è¯ä½ çš„é‡è¦ä¿¡æ¯ä¸æ³„éœ²ï¼‰ myblog-sourceä»“åº“çš„masteråˆ†æ”¯ç”¨æ¥å­˜æ”¾æºä»£ç  æ³¨æ„ç§æœ‰ä»“åº“é»˜è®¤åˆ†æ”¯å·²ç»å˜ä¸ºmainã€‚éœ€è¦æ›´æ”¹åç§°ä¸ºmaster åˆ›å»ºç§æœ‰ä»“åº“ å…¬å…±ä»“åº“ç”¨æ¥å­˜å‚¨ç¼–è¯‘ä¹‹åçš„é™æ€é¡µé¢ã€‚ï¼ˆè¿™é‡Œå°±ä¸ç”¨åœ¨åˆ›å»ºä»“åº“äº†ï¼Œä¹‹å‰æˆ‘ä»¬éƒ¨ç½²è¿‡github pagesåˆ°xxx.github.ioï¼‰ xxx.github.ioè¿™ä¸ªä»“åº“çš„masteråˆ†æ”¯ç”¨æ¥å­˜å‚¨é™æ€æ–‡ä»¶ å½“ç§æœ‰ä»“åº“çš„ master æœ‰å†…å®¹ push è¿›æ¥æ—¶ï¼ˆä¾‹å¦‚ï¼šä¸»é¢˜æ–‡ä»¶ï¼Œæ–‡ç«  md æ–‡ä»¶ã€å›¾ç‰‡ç­‰ï¼‰ï¼Œ ä¼šè§¦å‘ GitHub Actions è‡ªåŠ¨ç¼–è¯‘å¹¶éƒ¨ç½²åˆ°å…¬å…±ä»“åº“çš„ masteråˆ†æ”¯ã€‚ åˆ›å»º GitHub Token åˆ›å»ºä¸€ä¸ªæœ‰ repo å’Œ workflow æƒé™çš„ GitHub Token ã€‚ æ–°ç”Ÿæˆçš„ Token åªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œå¦‚æœ‰é—å¤±ï¼Œé‡æ–°ç”Ÿæˆå³å¯ã€‚ åˆ›å»º repository secret å°†ä¸Šé¢ç”Ÿæˆçš„ Token æ·»åŠ åˆ°ç§æœ‰ä»“åº“çš„ Secrets é‡Œï¼Œå¹¶å°†è¿™ä¸ªæ–°å¢çš„ secret å‘½åä¸º HEXO_DEPLOY ï¼ˆåå­—æ— æ‰€è°“ï¼Œçœ‹ä½ å–œæ¬¢ï¼‰ã€‚ æ­¥éª¤ï¼šç§æœ‰ä»“åº“ -\u003e settings -\u003e Secrets -\u003e New repository secretã€‚ æ–°åˆ›å»ºçš„ secret HEXO_DEPLOY åœ¨ Actions é…ç½®æ–‡ä»¶è¦ç”¨åˆ°ï¼Œéœ€è·Ÿé…ç½®æ–‡ä»¶ä¿æŒä¸€è‡´ï¼ æ·»åŠ  Actions é…ç½®æ–‡ä»¶ åœ¨ä½ çš„ Hexo é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º .github æ–‡ä»¶å¤¹ã€‚ åœ¨ .github æ–‡ä»¶å¤¹ä¸‹åˆ›å»º workflows æ–‡ä»¶å¤¹ã€‚ åœ¨ workflows æ–‡ä»¶å¤¹ä¸‹åˆ›å»º hexo-deploy.yml æ–‡ä»¶ã€‚ hexo-deploy.yml æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š(è¿™é‡Œæ˜¯å…³é”®) name: deploying Hexo project to GitHub pages on: push: branches: - master # master åˆ†æ”¯æœ‰ push è¡Œä¸ºæ—¶å°±è§¦å‘è¿™ä¸ª action jobs: build-and-deploy: runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@master - name: Build and Deploy uses: theme-keep/hexo-deploy-github-pages-action@master # ä½¿ç”¨ä¸“é—¨éƒ¨ç½² Hexo åˆ° GitHub pages çš„ action env: PERSONAL_TOKEN: ${{ secrets.HEXO_DEPLOY }} # secret å PUBLISH_REPOSITORY: Smithkenny/Smithkenny.github.io # å…¬å…±ä»“åº“ï¼Œæ ¼å¼ï¼šGitHub ç”¨æˆ·å/ä»“åº“å BRANCH: master # åˆ†æ”¯ï¼Œæˆ‘è¿™é‡Œæ˜¯æ¨é€åˆ°Smithkenny/Smithkenny.github.ioä»“åº“é‡Œçš„masteråˆ†æ”¯(æ ¹æ®è‡ªå·±çš„ä»“åº“è¿›è¡Œå¡«å†™) PUBLISH_DIR: ./public # éƒ¨ç½² public ç›®å½•ä¸‹çš„æ–‡ä»¶ è‡ªåŠ¨éƒ¨ç½²è§¦å‘æµç¨‹ ä¿®æ”¹ä½ çš„ Hexo åšå®¢æºä»£ç ï¼ˆä¾‹å¦‚ï¼šå¢åŠ æ–‡ç« ã€ä¿®æ”¹æ–‡ç« ã€æ›´æ”¹ä¸»é¢˜ã€ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ç­‰ç­‰ï¼‰ã€‚ æŠŠä½ ä¿®æ”¹è¿‡çš„ Hexo é¡¹ç›®å†…å®¹ï¼ˆåªæäº¤ä¿®æ”¹è¿‡çš„é‚£éƒ¨åˆ†å†…å®¹ï¼‰ push åˆ° GitHub å…¬å…±ä»“åº“ï¼ˆæœ¬ä¾‹ï¼šSmithkenny.github.ioï¼‰çš„ master åˆ†æ”¯ã€‚ GitHub Actions æ£€æµ‹åˆ° master åˆ†æ”¯æœ‰å†…å®¹ push è¿›æ¥ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ action é…ç½®æ–‡ä»¶çš„å‘½ä»¤ï¼Œå°† Hexo é¡¹ç›®ç¼–è¯‘æˆé™æ€é¡µé¢ï¼Œç„¶åéƒ¨ç½²åˆ°ç§æœ‰ä»“åº“çš„ master åˆ†æ”¯ã€‚ åœ¨ç§æœ‰ä»“åº“çš„ Actions å¯ä»¥æŸ¥çœ‹åˆ°ä½ é…ç½®çš„ actionã€‚ è¿™æ ·çš„å¥½å¤„æ˜¯æºç ä¿å­˜åœ¨çº¿ä¸Šç§æœ‰ä»“åº“ä¸­ï¼Œå…·æœ‰å¯ç§»æ¤æ€§ã€‚æ›´æ”¹æºç åä¸ç”¨å†æ‰‹åŠ¨é‡æ–°éƒ¨ç½²ã€ä¸Šä¼ ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:5","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"æºç ä¸Šä¼  ä¸Šä¼ å‰çš„å‡†å¤‡ é…ç½®ssh key win10 ssh key é»˜è®¤åœ¨å½“å‰ç”¨æˆ·çš„.sshæ–‡ä»¶å¤¹å†…ã€‚ ssh-keygen -t rsa -C \"xxx@qq.com\" å¯†é’¥è·¯å¾„ï¼š .ssh\\id_rsa.pub å…¬é’¥ .ssh\\id_rsa ç§é’¥ æ‰“å¼€ä½ çš„githubä¸»é¡µï¼Œè¿›å…¥ä¸ªäººè®¾ç½® -\u003e SSH and GPG keys -\u003e New SSH keyï¼š åå­—ï¼šgit-push å¯†é’¥è¾“å…¥å…¬é’¥å†…å®¹ã€‚ æµ‹è¯•æ—¶æ˜¯å¦æˆåŠŸï¼š ssh -T git@github.com åœ¨ç½‘ç«™æ ¹è·¯å¾„ä¸‹å³é”®Git Bash Here,é€šè¿‡git å‘½ä»¤æ¥ä¸Šä¼ æºç åˆ°ç§æœ‰ä»“åº“ã€‚ è¿˜éœ€è¦é…ç½®ï¼š git config --global user.name \"Smithkenny\"// ä½ çš„githubç”¨æˆ·åï¼Œéæ˜µç§° git config --global user.email \"xxx@qq.com\"// å¡«å†™ä½ çš„githubæ³¨å†Œé‚®ç®± ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:6","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"ä¸Šä¼ æºç  åˆå§‹åŒ–git git init å°†æ”¹åŠ¨æ·»åŠ åˆ°æš‚å­˜åŒº git add . æ·»åŠ è¯´æ˜ git commit -m \"ä»£ç ä¸Šä¼ \" å°†æœ¬åœ°æ›´æ”¹æ¨é€åˆ°è¿œç¨‹masteråˆ†æ”¯ git push origin master æ³¨æ„ å¦‚æœæŠ¥é”™ï¼Œè¯´æ˜æœ¬åœ°ä»“åº“ä»£ç å’Œç§æœ‰ä»“åº“ä»£ç ä¸ä¸€è‡´ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼è§£å†³ã€‚ å…ˆä»ç§æœ‰åº“ï¼ˆmyblog-sourceï¼‰æŠŠä»£ç æ‹‰ä¸‹æ¥ï¼Œä¼šè‡ªåŠ¨åˆå¹¶çš„ï¼ˆä¸ç”¨æ“å¿ƒï¼‰ git pull origin master å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œä»£ç åˆå¹¶ git pull --rebase origin master å†å°†æœ¬åœ°æ›´æ”¹æ¨é€åˆ°è¿œç¨‹masteråˆ†æ”¯ git push origin master æ¯æ¬¡æ–°å¢ã€ä¿®æ”¹æ–‡ç« éƒ½éœ€è¦æ‰§è¡Œä»¥ä¸‹ä»£ç ä¸€æ¬¡ï¼š git add . ï¼ˆå°†æ”¹åŠ¨æ·»åŠ åˆ°æš‚å­˜åŒºï¼‰ git commit -m \"æäº¤è¯´æ˜\" git push origin master å°†æœ¬åœ°æ›´æ”¹æ¨é€åˆ°è¿œç¨‹masteråˆ†æ”¯ã€‚ ç„¶åç§æœ‰ä»“åº“ä¸­çš„actionæ£€æµ‹åˆ°æœ‰ä»£ç æ”¹åŠ¨ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:7","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"æ€»ç»“ï¼š ç¬”è®°æœ¬ç”Ÿæˆid_rsaæ˜¯ç§é’¥ï¼Œid_rsa.pubæ˜¯å…¬é’¥ã€‚å…¬é’¥å¯ä»¥ç”¨è®°äº‹æœ¬æ‰“å¼€ é…ç½®è·¯å¾„ï¼šgithubç½‘ç«™â€“\u003eSettingsâ€“\u003eSSH and GPG keys é…ç½®å…¬é’¥ã€‚ç”¨äºç¬”è®°æœ¬å’Œgithubè¿æ¥ã€‚ github action æ‰§è¡Œæµç¨‹ï¼Œå…¬å…±ä»“å±•ç¤ºé™æ€é¡µé¢ï¼Œç§æœ‰ä»“ä¿å­˜æ–‡ç« ï¼Œæºä»£ç ç­‰ç­‰ã€‚actionæ£€æµ‹åˆ°ç§æœ‰ä»“åº“å†…å˜åŠ¨ï¼Œä¼šè‡ªåŠ¨æ‰“åŒ…éƒ¨ç½²åˆ°å…¬å…±ä»“ã€‚ä¸ç”¨åœ¨ç¬”è®°æœ¬æœ¬åœ°å†éƒ¨ç½²ï¼Œä¸Šä¼ ã€‚ ä¸Šä¼ ä»£ç éœ€è¦ç”¨ç¬”è®°æœ¬åˆ›å»ºçš„ç§é’¥å’Œç§æœ‰ä»“åº“ä¸­secrects ä¸­çš„å…¬é’¥è¿›è¡ŒåŒ¹é…ã€‚ hexo g ä¼šåœ¨ç½‘ç«™çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºpublicç›®å½•å’Œdb.json hexo clean ä¼šåˆ é™¤hexo g æ‰§è¡Œåæ‰€åˆ›å»ºçš„å†…å®¹ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:8","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"é‡åˆ°çš„é—®é¢˜ï¼š æºä»£ç ä¸Šä¼ åï¼Œé¡µé¢ä½¿ç”¨çš„ä¸»é¢˜é…ç½®æ²¡ç”Ÿæ•ˆï¼Œä¿®æ”¹è¿‡çš„é…ç½®éƒ½æ²¡ç”Ÿæ•ˆï¼Œlogoä¹Ÿä¸æ˜¾ç¤ºï¼Œç»‘å®šçš„è‡ªå®šä¹‰åŸŸåä¹Ÿå¤±æ•ˆäº†ã€‚ è§£å†³æ–¹æ³•ï¼š åœ¨ç½‘ç«™æ ¹è·¯å¾„ä¸‹çš„sourceæ–‡ä»¶å¤¹å†…åˆ›å»º_dataæ–‡ä»¶å¤¹ï¼ŒæŠŠkeepä¸»é¢˜é…ç½® _config.ymlå¤åˆ¶ä¸€ä»½å‘½åä¸ºkeep.ymlã€‚ å¦‚æœä»¥åé…ç½®æœ‰æ‰€æ›´æ”¹ï¼Œéœ€è¦_dataæ–‡ä»¶å¤¹å†…çš„keep.ymlå’Œkeepä¸»é¢˜å†…çš„ _config.ymlæ–‡ä»¶ä¿æŒä¸€è‡´ã€‚ sourceæ–‡ä»¶å¤¹å†…æ–°å»ºimages æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾å›¾ç‰‡ã€‚å†åˆ›å»ºCNAME æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å¡«å†™ä¸ªäººåŸŸåã€‚å¦‚ï¼šhaiewebpv.com å†æ¬¡ä¸Šä¼ æºç ã€‚ç­‰å¾…éƒ¨ç½²å®ŒæˆåæŸ¥çœ‹ç½‘ç«™ã€‚ D:\\newblog\\source\\keep.yml æ–‡ä»¶ä¸ºD:\\newblog\\node_modules\\hexo-theme-keep_config.ymlçš„å¤‡ä»½æ–‡ä»¶ã€‚å¹³æ»‘å‡çº§hexoå _config.ymlä¼šé‡ç½®ï¼Œæ‰€ä»¥è¦å¤‡ä»½ã€‚ ç«™ç‚¹æ ¹è·¯å¾„ï¼š D:\\newblog\\ D:\\newblog\\source å†…æ–‡ä»¶å¤¹ï¼š _data _posts about categories images links CNAME # æ–‡ä»¶ keep ä¸»é¢˜é…ç½®æ–‡ä»¶è·¯å¾„ D:\\newblog\\node_modules\\hexo-theme-keep\\_config.yml å¦‚ä½•è®¿é—®ç½‘ç«™ï¼Ÿ https://smithkenny.github.io/ https://haipengcv.com ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:9","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"æ–°ä¸Šä¼ æ–‡ç« æµç¨‹ åœ¨ç½‘ç«™æ ¹ç›®å½•å†…ï¼Œå³é”®git bash here å¹¶åˆ›å»ºæ–‡ç« æ ‡é¢˜ hexo new title \"new-article\" ä¸Šè¿°å‘½ä»¤çš„ç»“æœæ˜¯åœ¨ ./hexo/source/_posts è·¯å¾„ä¸‹æ–°å»ºäº†ä¸€ä¸ª new-article.md` æ–‡ä»¶ã€‚ è¿›å…¥åˆ°/source/_postså†…ç¼–è¾‘æ–‡ç« å†…å®¹ã€‚ cd source/_posts vim new-article.md --- title: new-article date: 2022-01-01 18:11:25 tags: categoriesï¼š --- ä¹Ÿå¯ä»¥ç”¨typoraæ‰“å¼€ï¼Œç›´æ¥ç¼–è¾‘ã€‚ä¹Ÿå¯ä»¥åˆ›å»ºåˆ†ç±»categories ä¾¿äºæœç´¢ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:10","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"åšå®¢ä¸­çš„å›¾ç‰‡å¤„ç† æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¿å­˜å›¾ç‰‡ï¼š å°†å›¾ç‰‡ä¸Šä¼ åˆ°ç½‘ç«™æ ¹è·¯å¾„source/imagesä¸­ï¼Œåœ¨æ–‡ç« ä¸­å¼•ç”¨ç›¸å¯¹è·¯å¾„ã€‚ ä½¿ç”¨ç½‘è·¯è·¯å¾„ï¼Œç„¶ååœ¨æ–‡ç« ä¸­å¼•ç”¨è¯¥è·¯å¾„ã€‚ ä¸‹é¢æ¥è¯´æ˜å¦‚ä½•ä½¿ç”¨ç½‘è·¯è·¯å¾„ï¼š æ­å»ºä¸ªäººå›¾åºŠï¼Œä½¿ç”¨githubå…¬æœ‰ä»“åº“å……å½“äº‘å­˜å‚¨ã€‚æ–°å»ºå…¬æœ‰ä»“åº“ï¼Œèµ·åä¸ºMyimageã€‚ å¹¶åœ¨ä»“åº“å†…åˆ›å»ºä¸€ä¸ªimgæ–‡ä»¶å¤¹å¹¶åŠ ä»¥è¯´æ˜ã€‚ åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œ è·å–è·¯å¾„ Settings â€“\u003e Developer settingsâ€“\u003e Personal access tokens â€“\u003e New personal access token â€“\u003e copy token jsdelivrå……å½“cdnï¼Œä½¿å›¾ç‰‡è®¿é—®æ›´å¿« https://www.jsdelivr.com/?docs=gh è·å–cdnåœ°å€ ä¸¾ä¾‹ï¼š æˆ‘çš„è¿™ä¸ªå›¾åºŠä»“åº“åæ˜¯Smithkenny/Myimage https://github.com/Smithkenny/Myimage cdnåœ°å€ä¸ºï¼š https://fastly.jsdelivr.net/gh/Smithkenny/Myimage/img å›¾ç‰‡åç§°.webp ä½¿ç”¨picGoå……å½“å›¾ç‰‡git push å·¥å…· https://github.com/Molunerfinn/PicGo å®‰è£…åœ°å€ï¼šhttps://github.com/Molunerfinn/PicGo/releases é…ç½®picGo å°†githubå›¾åºŠè®¾ç½®ä¸ºé»˜è®¤å›¾åºŠã€‚ ä¸Šä¼ å›¾ç‰‡å¤„ç† PicGoæ”¯æŒæ‰¹é‡å’Œå•ä¸ªçš„å›¾ç‰‡ä¸Šä¼  æ‰¹é‡ä¸Šä¼ ï¼ŒæŠŠå›¾ç‰‡æ‰¹é‡æ‹–æ‹½åˆ°å¤§çº¢æ¡† å•ä¸ªä¸Šä¼ ï¼Œå¤åˆ¶åï¼Œç‚¹å‡»å°çº¢æ¡† æ–‡ç« ä¸­ä½¿ç”¨å›¾åºŠä¸­çš„å›¾ç‰‡æ ¼å¼ ä¸­æ‹¬å·å°æ‹¬å· ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:11","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"åè®° keepä¸»é¢˜ç›¸å…³è®¾ç½® è®¾ç½®æ ‡é¢˜ã€ä½œè€…ã€urlè‡ªå®šä¹‰logoã€èƒŒæ™¯å›¾ç‰‡ã€‚å¼€å¯ç™¾åˆ†æ¯”æ»šåŠ¨æ¡ã€‚æ·»åŠ ä¸ªäººè”ç³»æ–¹å¼ã€‚å¢åŠ categoriesã€linksã€aboutã€‚å¼€å¯æ–‡ç« é¢„è§ˆã€‚å­—æ•°ç»Ÿè®¡ã€ä½œè€…æ ‡ç­¾ã€‚æ–‡ç« ä¸­ä»£ç å¯å¤åˆ¶ã€å¯ç”¨å·¦ä¾§ç›®å½•ã€‚å¼€å¯æ–‡ç« æœ€ä¸‹æ–¹ç‰ˆæƒæ‰€æœ‰ï¼Œå¼€å¯å…¨å±€æœç´¢åŠŸèƒ½ã€å¼€å¯rssè®¢é˜…ã€cdnã€æ…¢åŠ è½½åŠŸèƒ½ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:12","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"æ›´æ¢ç”µè„‘å¦‚ä½•ä¸Šä¼ æ–‡ç« åˆ°GitHub å‰æœŸå‡†å¤‡ æ–°ç”µè„‘éœ€è¦å®‰è£…gitã€hexoã€‚å¹¶æŠŠæ—§ç”µè„‘ç”¨æˆ·ç›®å½•ä¸‹.sshæ–‡ä»¶å¤¹å†…å…¬é’¥å’Œç§é’¥å¤åˆ¶å‡ºæ¥åˆ°æ–°ç”µè„‘çš„ç”¨æˆ·ç›®å½•çš„.sshæ–‡ä»¶å¤¹å†…ã€‚ å…·ä½“æ­¥éª¤ åˆ›å»ºmyblogæ–‡ä»¶å¤¹ /e/myblog å³é”®git bush hereã€‚åˆå§‹åŒ–gitï¼Œä¼šè‡ªåŠ¨åœ¨/e/myblogç›®å½•å†…åˆ›å»º.gitæ–‡ä»¶å¤¹ git init æµ‹è¯•ç¬”è®°æœ¬åˆ°GitHubç§æœ‰ä»“åº“çš„è¿é€šæ€§ã€‚ ssh -T git@github.com Hi Smithkenny! You've successfully authenticated, but GitHub does not provide shell access. æ·»åŠ ä¿¡æ¯ git config --global user.name \"Smithkenny\"// ä½ çš„githubç”¨æˆ·åï¼Œéæ˜µç§° git config --global user.email \"xxx@qq.com\"// å¡«å†™ä½ çš„githubæ³¨å†Œé‚®ç®± é…ç½®è¿œç«¯ä»“åº“å¹¶è¿œç¨‹æ‹‰å–æºä»£ç åˆ°æœ¬åœ° git remote add origin git@github.com:Smithkenny/myblog-source.git git pull origin master remote: Enumerating objects: 345, done. remote: Counting objects: 100% (345/345), done. remote: Compressing objects: 100% (248/248), done. remote: Total 345 (delta 167), reused 231 (delta 71), pack-reused 0 Receiving objects: 100% (345/345), 1.87 MiB | 105.00 KiB/s, done. Resolving deltas: 100% (167/167), done. From github.com:Smithkenny/myblog-source * branch master -\u003e FETCH_HEAD * [new branch] master -\u003e origin/master ç„¶åå°±å¯ä»¥ä¿®æ”¹æ–‡ç« ï¼Œæœ€åä¸Šä¼ æ–‡ç« äº†ã€‚æ­¥éª¤è§æ–°æ–‡ç« ä¸Šä¼ æµç¨‹ã€‚ æŠ¥é”™ä¿¡æ¯ ä½¿ç”¨æ‹‰å–æºç åˆ°æœ¬åœ°æ—¶ï¼Œå½“æœ¬åœ°çš„ç¯å¢ƒå’Œè¿œç«¯ç¯å¢ƒä¸­æŸäº›æ–‡ä»¶åå­—ç›¸åŒå†…å®¹ä¸åŒæ—¶ï¼Œä¼šå‡ºç°è¿œç«¯éƒ¨åˆ†æ–‡ä»¶æ‹‰å–å¤±è´¥ã€‚æ­¤æ—¶åªè¦åˆ é™¤æç¤ºä¸­æœ¬åœ°çš„æ–‡ä»¶ï¼Œå†æ¬¡æ‰§è¡Œæ‹‰å–å‘½ä»¤å³å¯ã€‚ git pull origin master remote: Enumerating objects: 360, done. remote: Counting objects: 100% (360/360), done. remote: Compressing objects: 100% (256/256), done. remote: Total 360 (delta 178), reused 242 (delta 78), pack-reused 0 Receiving objects: 100% (360/360), 1.87 MiB | 1.33 MiB/s, done. Resolving deltas: 100% (178/178), done. From github.com:Smithkenny/myblog-source * branch master -\u003e FETCH_HEAD * [new branch] master -\u003e origin/master error: The following untracked working tree files would be overwritten by merge: .github/dependabot.yml .gitignore _config.landscape.yml _config.yml package-lock.json package.json scaffolds/draft.md scaffolds/page.md scaffolds/post.md themes/.gitkeep Please move or remove them before you merge. Aborting æ¸…ç©ºgithubä¸Šç§æœ‰ä»“åº“æºä»£ç ï¼Œå°†æœ¬åœ°é‡æ–°åˆ›å»ºå¥½çš„åšå®¢æºç ä¸Šä¼ åˆ°è¿œç«¯ç§æœ‰ä»“åº“ã€‚ github actionsæŠ¥é”™ éœ€è¦é‡æ–°åˆ›å»ºåšå®¢æºç æ–‡ä»¶å¤¹ï¼Œé‡å¤ä»¥ä¸‹æ“ä½œã€‚ 1.åˆå§‹åŒ–åšå®¢æ–‡ä»¶å¤¹,å¦‚æœåˆå§‹åŒ–ç¼“æ…¢éœ€è¦è®¾ç½®ä»£ç†ã€‚ #$ export http_proxy=http://\u003cWindows ä¸»æœºçš„ IP åœ°å€\u003e:\u003cä»£ç†ç«¯å£\u003e #$ export https_proxy=http://\u003cWindows ä¸»æœºçš„ IP åœ°å€\u003e:\u003cä»£ç†ç«¯å£\u003e #ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å–æ¶ˆä»£ç†ï¼š #$ unset http_proxy https_proxy hexo init myblog-source 2.è¿›å…¥åˆ°ç›®å½• cd myblog-source npm install 3.å°†æ—§æ–‡ä»¶å¤¹å†…_config.yamlå¤åˆ¶åˆ°myblog-sourceå†… 4.ä¸‹è½½ä¸»é¢˜ï¼Œä½¿ç”¨keepä¸»é¢˜ npm install hexo-theme-keep 5.é‡æ–°ç”Ÿæˆå’Œè¿è¡Œ hexo clean hexo g hexo s 6.åˆ›å»ºæ ‡é¢˜ã€åˆ†ç±»ã€å½’æ¡£ã€å‹è”ã€å…³äºï¼Œåœ¨Myblog-source\\sourceå†…æ–°å»ºimagesæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ†åˆ«åœ¨æ—§æ–‡ä»¶å¤¹ä¸‹å¯¹åº”ä½ç½®å°†å†…å®¹å¤åˆ¶åˆ°æ–°åšå®¢å†… hexo new page \"categories\" hexo new page \"about\" hexo new page \"links\" 7.å°†æ—§æ–‡ä»¶å¤¹source\\_dataå¤åˆ¶åˆ°\\Myblog-source\\source\\_dataå†… 8.å°†æ—§æ–‡ä»¶å¤¹\\node_modules\\hexo-theme-keepä¸­_config.ymlå¤åˆ¶åˆ°æ–°åšå®¢è·¯å¾„\\Myblog-source\\node_modules\\hexo-theme-keepå†… 9.å°†æ—§æ–‡ä»¶å¤¹æ ¹è·¯å¾„ä¸‹CNAMEæ–‡ä»¶å¤åˆ¶åˆ°æ–°åšå®¢æ ¹è·¯å¾„ä¸‹ 10.åœ¨æ–°åšå®¢æ–‡ä»¶å¤¹å†…åˆå§‹åŒ–gitï¼Œä¼šç”Ÿæˆ.gitæ–‡ä»¶å¤¹ã€‚ git init git add . git commit -m \"ä»£ç ä¸Šä¼ \" git push origin master å¦‚æœæŠ¥ä»¥ä¸‹é”™è¯¯ï¼šGithub \"Updates were rejected because the remote contains work that you do not have locally.\" åˆ™ï¼š æŸ¥çœ‹gitè¿œç¨‹ä»“åº“ git remote -v æ²¡æœ‰åˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ ï¼š git remote add origin [//your github url] æ‹‰å–è¿œç¨‹ä»“åº“é•œåƒ git pull origin master --allow-unrelated-histories 10.ç„¶åå†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¨é€åˆ°ä»“åº“ git add . git commit -m \"ä»£ç ä¸Šä¼ \" git push origin master æŠ¥é”™è§£å†³å‚è€ƒ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/:5:13","tags":["å»ºç«™"],"title":"ä¸ªäººåšå®¢å»ºç«™å…¨è¿‡ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99%E5%85%A8%E8%BF%87%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"ç®€ä»‹ namesiloæ˜¯å›½å¤–çš„åŸŸåæœåŠ¡å•†ï¼Œé¦–æ¬¡è´­ä¹°å’Œç»­è´¹ä»·æ ¼éƒ½å¾ˆå®æƒ ï¼Œä¸ç”¨ç¿»å¢™ä¹Ÿå¯ä»¥æ‰“å¼€ï¼Œæ­¤å¤–è¿˜èµ é€éšç§ä¿æŠ¤ï¼Œæ”¯ä»˜æ–¹å¼æ”¯æŒæ”¯ä»˜å®ã€Paypalã€Visa ç­‰å¤šç§ä»˜æ¬¾æ–¹å¼ã€‚ ä¸‹é¢æ˜¯namesiloè´­ä¹°åŸŸåçš„æ­¥éª¤æµç¨‹ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E8%B4%AD%E4%B9%B0%E6%95%99%E7%A8%8B/:0:1","tags":["åŸŸå"],"title":"ä¸ªäººåŸŸåæ³¨å†Œè´­ä¹°æ•™ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E8%B4%AD%E4%B9%B0%E6%95%99%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"ç™»é™†https://www.namesilo.com/ï¼Œæ³¨å†Œè´¦å· ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E8%B4%AD%E4%B9%B0%E6%95%99%E7%A8%8B/:0:2","tags":["åŸŸå"],"title":"ä¸ªäººåŸŸåæ³¨å†Œè´­ä¹°æ•™ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E8%B4%AD%E4%B9%B0%E6%95%99%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"è¾“å…¥è¦æ³¨å†Œçš„åŸŸåæŸ¥æ‰¾ã€é€‰æ‹©ã€ç»“è´¦ Auto-Renewï¼šè®¾ç½®åŸŸåæ˜¯å¦è‡ªåŠ¨ç»­è´¹ï¼Œè‡ªè¡Œç¡®å®šï¼Œå½±å“ä¸å¤§ã€‚ Privacy Settingï¼šä»£è¡¨åŸŸåéšç§ä¿æŠ¤è®¾ç½®ï¼Œå»ºè®®è®¾ç½®æˆ WHOIS Privacy ï¼Œåæ­£æ˜¯å…è´¹çš„ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E8%B4%AD%E4%B9%B0%E6%95%99%E7%A8%8B/:0:3","tags":["åŸŸå"],"title":"ä¸ªäººåŸŸåæ³¨å†Œè´­ä¹°æ•™ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E8%B4%AD%E4%B9%B0%E6%95%99%E7%A8%8B/"},{"categories":["ç½‘ç«™"],"content":"è§£æåŸŸå ç™»å½•åˆšåˆšæ³¨å†Œçš„è´¦å·é€‰æ‹©my account é€‰æ‹©accounts domains ç®¡ç†åŸŸå åˆ æ‰å¤šä½™çš„è®°å½• æ·»åŠ ä¸€æ¡CNAMEè®°å½•ï¼Œæ·»åŠ ä¸€æ¡Aè®°å½•ã€‚Aè®°å½•å¯ä»¥æ·»åŠ å¤šæ¡ã€‚ CNAME æŒ‡å‘github çš„åŸŸå githubåŸŸåæ ¼å¼ï¼š[ç”¨æˆ·å].github.io Aè®°å½•æŒ‡å‘GIThubåŸŸåæ‰€è§£æå‡ºæ¥çš„IP æ³¨æ„ï¼šæ·»åŠ åä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œæ­¤å¤„æœ‰è¯´æ˜. You can use the form below to manage the DNS settings for the domain(s) listed above. Changes may take up to 15 minutes to completely process. Please keep in mind that correctly modifying the DNS records for this domain is extremely important. Any errors on your part could make your web site, email and other services inoperable. Please only utilize this form if you are comfortable and experienced managing DNS. å·®ä¸å¤šåŠå°æ—¶ï¼ŒåŸŸåå°±èƒ½è§£ææˆåŠŸã€‚å…·ä½“æµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œå¯ä»¥åœ¨æœ¬åœ°cmdçš„dosç•Œé¢ ping åŸŸåï¼ŒæŸ¥çœ‹IPï¼Œæˆ–è€…åœ¨ä¸€äº›åŸŸåæŸ¥æ‰¾å¯¹åº”IPçš„ç½‘ç«™æŸ¥è¯¢ã€‚ ","date":"2022-01-02","objectID":"/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E8%B4%AD%E4%B9%B0%E6%95%99%E7%A8%8B/:0:4","tags":["åŸŸå"],"title":"ä¸ªäººåŸŸåæ³¨å†Œè´­ä¹°æ•™ç¨‹","uri":"/%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E8%B4%AD%E4%B9%B0%E6%95%99%E7%A8%8B/"},{"categories":["æ–°å¹´"],"content":"ä½ å¥½ï¼Œ2022ï¼æ–°å¹´å¿«ä¹ğŸ£ ","date":"2022-01-01","objectID":"/happynewyear/:0:0","tags":[2022],"title":"happynewyear","uri":"/happynewyear/"},{"categories":["ç¼–ç¨‹"],"content":"å¿«é€Ÿå¼€å§‹ ç³»ç»Ÿç¯å¢ƒ:centos7 ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:0:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å®‰è£…ä¹‹å‰å…ˆæŸ¥çœ‹ä¸€ä¸‹æœ‰æ— ç³»ç»Ÿè‡ªå¸¦jdk rpm -qa |grep java rpm -qa |grep jdk rpm -qa |grep gcj ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:1:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"å¦‚æœæœ‰å°±ä½¿ç”¨æ‰¹é‡å¸è½½å‘½ä»¤ rpm -qa | grep java | xargs rpm -e --nodeps ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:1:1","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ä½¿ç”¨yumå®‰è£…1.8.0ç‰ˆæœ¬openjdk yum install java-1.8.0-openjdk* -y ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:2:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"æŸ¥çœ‹ç‰ˆæœ¬ java -version openjdk version \"1.8.0_312\" OpenJDK Runtime Environment (build 1.8.0_312-b07) OpenJDK 64-Bit Server VM (build 25.312-b07, mixed mode) ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:3:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"é»˜è®¤jre jdk å®‰è£…è·¯å¾„æ˜¯/usr/lib/jvm ä¸‹é¢ ll total 0 lrwxrwxrwx 1 root root 26 Dec 25 00:06 java -\u003e /etc/alternatives/java_sdk lrwxrwxrwx 1 root root 32 Dec 25 00:06 java-1.8.0 -\u003e /etc/alternatives/java_sdk_1.8.0 lrwxrwxrwx 1 root root 40 Dec 25 00:06 java-1.8.0-openjdk -\u003e /etc/alternatives/java_sdk_1.8.0_openjdk drwxr-xr-x 9 root root 176 Dec 25 00:06 java-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64 lrwxrwxrwx 1 root root 34 Dec 25 00:06 java-openjdk -\u003e /etc/alternatives/java_sdk_openjdk lrwxrwxrwx 1 root root 21 Dec 25 00:06 jre -\u003e /etc/alternatives/jre lrwxrwxrwx 1 root root 27 Dec 25 00:06 jre-1.8.0 -\u003e /etc/alternatives/jre_1.8.0 lrwxrwxrwx 1 root root 35 Dec 25 00:06 jre-1.8.0-openjdk -\u003e /etc/alternatives/jre_1.8.0_openjdk lrwxrwxrwx 1 root root 51 Dec 25 00:06 jre-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64 -\u003e java-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64/jre lrwxrwxrwx 1 root root 29 Dec 25 00:06 jre-openjdk -\u003e /etc/alternatives/jre_openjdk ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:3:1","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"é…ç½®å…¨å±€ç”Ÿæ•ˆ vim /etc/profile #set java environment export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64 export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar export PATH=$PATH:$JAVA_HOME/bin ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:4:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"åº”ç”¨é…ç½®å¹¶æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ source /etc/profile echo $JAVA_HOME /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64 echo $CLASSPATH .:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64/jre/lib/rt.jar:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64/lib/dt.jar:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64/lib/tools.jar echo $PATH /data/kafka_2.11-2.1.0/bin:/data/kafka_2.11-2.1.0/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-1.el7_9.x86_64/bin ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:5:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"åˆ›å»ºä¸€ä¸ªjavaå°ç¨‹åºæµ‹è¯•ä¸‹ï¼Œåå­—å« HelloWorld.java.è¾“å…¥ä»¥ä¸‹å‘½ä»¤: public class HelloWorld { public static void main(String[] args){ System.out.println(\"Hello World!\"); } } ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:6:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç¼–è¯‘å¹¶æ‰§è¡Œ javac HelloWorld.java java HelloWorld Hello World! ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:7:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"æ€è€ƒï¼šå¦‚ä½•è¿è¡Œ.jarè¿™ç±»javaåº”ç”¨ï¼Ÿ ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:8:0","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"è¯­æ³•å¦‚ä¸‹ java -jar file.jar java -jar /path/to/my/java/app.jar #/path/to/my/java/app.jarè¡¨ç¤ºåº”ç”¨çš„è·¯å¾„ java -jar /path/to/my/java/app.jar arg1 arg2 # arg1è¡¨ç¤ºå‚æ•°1 ï¼Œarg2è¡¨ç¤ºå‚æ•°2 ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:8:1","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"},{"categories":["ç¼–ç¨‹"],"content":"ç»“æŸäº† ","date":"2021-12-28","objectID":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/:8:2","tags":["java"],"title":"Javaå®‰è£…ä¸ä½¿ç”¨","uri":"/java%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"}]