<!doctype html><html lang=en-us><head><meta name=generator content="Hugo 0.115.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>My New Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:title" content="My New Hugo Site"><meta property="og:description" content="This is my cool site"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.haipengv.com/"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="My New Hugo Site"><meta name=twitter:description content="This is my cool site"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.haipengv.com/><link rel=alternate href=/index.xml type=application/rss+xml title="My New Hugo Site"><link rel=feed href=/index.xml type=application/rss+xml title="My New Hugo Site"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/blog.haipengv.com\/","inLanguage":"en-us","description":"This is my cool site","name":"My New Hugo Site"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=home-subtitle><div id=id-1 class=typeit></div></div><div class=links></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%94%B1%E4%BA%8Ekswapd0%E8%BF%9B%E7%A8%8B%E5%AF%BC%E8%87%B4%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8/>记一次由于kswapd0进程导致cpu占满</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-11-16>2022-11-16</time></span></div><div class=content>前言 服务器安装pve后发现cpu占用率过高有点不正常，于是查其原因。
参考这个博主的文章。发现现象一致。
https://blog.csdn.net/jzz601264258/article/details/105850816
top查看cpu占用率
root@www:~# top top - 09:58:10 up 35 min, 2 users, load average: 8.00, 8.00, 7.09 Tasks: 220 total, 1 running, 219 sleeping, 0 stopped, 0 zombie %Cpu(s): 99.2 us, 0.8 sy, 0.0 ni, 0.0 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st MiB Mem : 15651.4 total, 8695.9 free, 6572.6 used, 382.9 buff/cache MiB Swap: 8192.0 total, 8192.0 free, 0.0 used. 8748.4 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 1334 root 20 0 3375880 5092 4 S 800.</div><div class=post-footer><a href=/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%94%B1%E4%BA%8Ekswapd0%E8%BF%9B%E7%A8%8B%E5%AF%BC%E8%87%B4%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/pve%E4%BC%98%E5%8C%96/>pve优化</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-11-11>2022-11-11</time></span></div><div class=content>pve优化 1.Proxmox VE(PVE)系统移除《无有效订阅》弹窗提示通知 Proxmox VE(PVE)系统安装完成后，输入账号密码登录系统后会有提示：无有效订阅，本文主要介绍如何去除此弹窗提示。
提示：无有效订阅 You do not have a valid subscription for this server. Please visit www.proxmox.com to get a list of available options. 形成此问题的主要原因是因为我们使用的是免费版Proxmox VE系统，所以每次登录后都会提示这个《无有效订阅》弹窗。
此教程演示系统环境为：Proxmox Virtual Environment 7.2 ，更新日期为：2022年11月10日，其他版本请参考本教程.
需要修改文件路径为：/usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js 修改之前请做好文件备份，防止误操作造成不可预知的错误。
解决方法
搜索关键词：Ext.Msg.show 将：Ext.Msg.show({修改为：Ext.Msg.noshow({ 文件修改后保存上传，执行 systemctl restart pveproxy 命令重启网页服务 root@pve:~# systemctl restart pveproxy 注销后登陆，使用 CTRL+F5 快捷键强制重新加载网页页面，或清理浏览器缓存（很多修改后没有反应的童学记得清缓存）
再次打开登陆 Proxmox VE系统控制台主界面，就没有弹窗提示了。
注意：此方法可能在升级 pve 后失效，失效后再修改即可。
2.Proxmox VE更换apt源并更新软件包数据库 1、查看当前镜像源配置
cat /etc/apt/sources.list 2、查看当前pve版本
pveversion -v 3、注释默认配置，修改为中科大镜像源
nano /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/debian bullseye main contrib deb https://mirrors.</div><div class=post-footer><a href=/posts/pve%E4%BC%98%E5%8C%96/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/centos7.9%E6%9B%B4%E6%8D%A2%E7%BD%91%E5%8D%A1%E5%90%8D%E7%A7%B0/>centos7.9更换网卡名称</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-11-01>2022-11-01</time></span></div><div class=content>centos7.9恢复旧网卡名称显示及网口乱序解决方法 换回旧版网卡名称 grubby --update-kernel=ALL --args="net.ifnames=0 biosdevname=0" 修改/etc/sysconfig/network-scripts/中的网卡配置文件 [root@QZ network-scripts]# cat ifcfg-lan0 TYPE="Ethernet" BOOTPROTO="static" DEFROUTE="yes" NAME="lan0" DEVICE="lan0" ONBOOT="yes" IPADDR=192.168.242.130 NETWORK=255.255.255.0 GATEWAY=192.168.242.1 [root@QZ network-scripts]# cat ifcfg-lan1 TYPE="Ethernet" BOOTPROTO="static" DEFROUTE="yes" NAME="lan1" DEVICE="lan1" ONBOOT="yes" IPADDR=192.168.35.130 NETWORK=255.255.255.0 GATEWAY=192.168.35.2 DNS1=192.168.35.2 [root@QZ network-scripts]# cat ifcfg-lan2 TYPE="Ethernet" BOOTPROTO="static" DEFROUTE="yes" NAME="lan2" DEVICE="lan2" ONBOOT="yes" IPADDR=192.168.242.131 NETWORK=255.255.255.0 重启设备 reboot 带有光口的物理服务器经常会遇到网口乱序现象。解决方法： vi /etc/systemd/network/10-lan0.link [Match] MACAddress=00:0c:29:36:a6:c7 [Link] Name=lan0 vi /etc/systemd/network/11-lan1.link [Match] MACAddress=00:0c:29:36:a6:b3 [Link] Name=lan1 [Match] MACAddress=00:0c:29:36:a6:bd vi /etc/systemd/network/12-lan2.link [Link] Name=lan2 最后创建对应名称的网卡配置文件，重启设备。</div><div class=post-footer><a href=/posts/centos7.9%E6%9B%B4%E6%8D%A2%E7%BD%91%E5%8D%A1%E5%90%8D%E7%A7%B0/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/centos7%E7%BD%91%E5%8D%A1%E6%94%B9%E5%9B%9Eeth0%E6%98%BE%E7%A4%BA/>centos7网卡改回eth0显示</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-10-26>2022-10-26</time></span></div><div class=content>将centos7网卡改回eth0显示 grubby --update-kernel=ALL --args="net.ifnames=0 biosdevname=0" 实验环境&ndash;>net.ifnames=0
物理环境dell&mdash;>biosdevname=0 net.ifnames=0
云环境&mdash;&mdash;> 默认都是eth0 eth1
修改网卡配置文件的名称 mv /etc/sysconfig/network-scripts/ifcfg-ens32 /etc/sysconfig/network-scripts/ifcfg-eth0 修改网卡配置文件中设备的名字 sed -i 's#ens32#eth0#g' /etc/sysconfig/network-scripts/ifcfg-eth0 重启设备 网卡配置实例 NAME=eth0 DEVICE=eth0 ONBOOT=yes BOOTPROTO=static IPADDR=192.168.1.192 NETMASK=255.255.255.0 GATEWAY=192.168.1.254 DNS1=114.114.114.114 TYPE=Ethernet 查看网卡信息 cat /proc/net/dev</div><div class=post-footer><a href=/posts/centos7%E7%BD%91%E5%8D%A1%E6%94%B9%E5%9B%9Eeth0%E6%98%BE%E7%A4%BA/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/rsyslog%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/>rsyslog日志服务器搭建</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-10-25>2022-10-25</time></span></div><div class=content>rsyslog日志服务器搭建 rsyslog客户端：负责发送日志到远程日志服务器，支持udp,tcp,relp协议。
rsyslog服务端：负责接收客户端发来的日志并存储在本地，支持文件存储和数据库存储方式。
保存日志的路径格式为：源IP地址/设施名（日志类别）/年月.log。
安装rsyslog软件 yum install rsyslog -y 配置rsyslog.conf文件 开放514 tcp 和 udp 监听 # Provides UDP syslog reception $ModLoad imudp $UDPServerRun 514 # Provides TCP syslog reception $ModLoad imtcp $InputTCPServerRun 514 服务端核心配置 #### GLOBAL DIRECTIVES #### # Where to place auxiliary files $WorkDirectory /var/lib/rsyslog # Use default timestamp format $ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat ##这里是服务端添加的配置 begin # 使用 RemoteLogs 模板接收客户端的日志，保存到本地的/var/log/remote目录下，每台客户端的ip_年份_月份_日期的log $template RemoteLogs,"/var/log/remote/%fromhost-ip%/%fromhost-ip%_%$YEAR%-%$MONTH%-%$DAY%.log" # 所有服务所有级别的日志都记录 *.* ?RemoteLogs #服务端本机的日志不记录 :fromhost-ip, !isequal, "127.0.0.1" ?Remote #指示rsyslog在将消息写入文件后停止处理消息，如果不包含"& ~",则消息将被写入本地文件，导致消息被记录2次。 & ~ ## 这里是服务端添加的配置 end 重启rsyslog服务 systemctl restart rsyslog 最后到配置目录下查看是否有日志生成 [root@localhost 127.</div><div class=post-footer><a href=/posts/rsyslog%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E5%B7%A5%E5%85%B7-inxi/>功能强大的硬件信息获取工具-inxi</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-10-21>2022-10-21</time></span></div><div class=content>安装inxi $ sudo apt-get install inxi [On Debian/Ubuntu/Linux Mint] $ sudo yum install inxi [On CentOs/RHEL/Fedora] $ sudo dnf install inxi [On Fedora 22+] 查看 Inxi 所有依赖和推荐的应用，以及各种目录，并显示需要安装哪些包来支持给定的功能。
$ inxi --recommends 输出如下
inxi will now begin checking for the programs it needs to operate. Check inxi --help or the man page (man inxi) to see what options are available. ------------------------------------------------------------------------------ Test: core tools: Perl version: 5.016003 Current shell: Default shell: bash sh links to: /usr/bin/bash Package manager: rpm ------------------------------------------------------------------------------ Test: required system directories: /proc: .</div><div class=post-footer><a href=/posts/%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E5%B7%A5%E5%85%B7-inxi/>Read More</a></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/>1</a></span></li><li class=page-item><span class=page-link><a href=/page/2/>2</a></span></li><li class="page-item active"><span class=page-link><a href=/page/3/>3</a></span></li><li class=page-item><span class=page-link><a href=/page/4/>4</a></span></li><li class=page-item><span class=page-link><a href=/page/5/>5</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=/page/19/>19</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.115.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.5.4/dist/index.umd.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},data:{"id-1":"This is my cool site"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>