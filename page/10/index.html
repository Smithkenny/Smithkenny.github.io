<!doctype html><html lang=en-us><head><meta name=generator content="Hugo 0.115.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>My New Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:title" content="My New Hugo Site"><meta property="og:description" content="This is my cool site"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.haipengv.com/"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="My New Hugo Site"><meta name=twitter:description content="This is my cool site"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.haipengv.com/><link rel=alternate href=/index.xml type=application/rss+xml title="My New Hugo Site"><link rel=feed href=/index.xml type=application/rss+xml title="My New Hugo Site"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/blog.haipengv.com\/","inLanguage":"en-us","description":"This is my cool site","name":"My New Hugo Site"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=home-subtitle><div id=id-1 class=typeit></div></div><div class=links></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/git%E5%85%A5%E9%97%A8/>git入门</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-05-07>2022-05-07</time></span></div><div class=content>git入门 介绍 Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。
windows中安装 各操作系统版本下载 安装后在开始菜单里找到"Git"->&ldquo;Git Bash&rdquo;，会弹出 Git 命令窗口，你可以在该窗口进行 Git 操作。
创建工作目录，比如在D盘根目录下创建blog
mkdir -p blog git初始化 默认会生成.git文件夹
git init 用户信息 配置个人的用户名称和电子邮件地址：
git config --global user.name "smith" git config --global user.email smith@gmail.com 查看配置信息 git config --list 也可以在配置文件中看到
vim ~/.gitconfig [http] postBuffer = 2M [user] name = smith email = smith@gmail.com git 工作流程 git-process.png
创建readme.txt文件 Git is a version control system. Git is free software. 把文件提交到暂存区 git add readme.txt git commit -m "first push" -m:后面输入本次提交的说明，可以输入任何内容。</div><div class=post-footer><a href=/posts/git%E5%85%A5%E9%97%A8/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/>ansible基础教程</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-04-22>2022-04-22</time></span></div><div class=content>ansible的配置文件 全局配置文件 ansible默认的全局配置文件是/etc/ansible/ansible.cfg，可认为是全局配置的入口。
Ansible支持4种方式指定配置文件，它们的解析顺序从上到下
ANSIBLE_CFG 环境变量指定的配置文件 ansible.cfg 当前目录下的ansible.cfg ~/.ansible.cfg 家目录下的.ansible.cfg /etc/ansible/ansible.cfg 默认全局配置文件 修改默认配置文件/etc/ansible/ansible.cfg：
$ cat /etc/ansible/ansible.cfg | grep -vE "^$|^#" [defaults] inventory = /etc/ansible/hosts # inventory文件：ansible管理的主机清单 library = /usr/share/my_modules/ forks = 5 # ansbile的并发连接数 sudo_user = root remote_port = 22 host_key_checking = False timeout = 10 log_path = /var/log/ansible.log 文件中其它的可配置项：
stdout_callback = debug # 可将输出变得人性化；默认输出会挤在一行，配置后会换行输出； inventory主机文件 inventory文件默认路径是/etc/ansible/hosts，在这里配置目标主机，ansible便可以对其进行控制。
在/etc/ansible/hosts文件里配置node主机名或ip：
$ cat hosts [default] # 主机分组 node1 # 172.18.0.101 node2 # 172.18.0.102 可以通过/etc/ansible/ansible.</div><div class=post-footer><a href=/posts/ansible%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/>shell脚本应用（长期更新）</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-04-18>2022-04-18</time></span></div><div class=content>批量免密登录 no_pass.sh:只需要运行脚本，输入目标端服务器用户名和密码即可。ip根据目标端网段修改。
#!/bin/bash read -p 'input user: ' USER echo "$USER" read -s -p 'input pass: ' PASS rm -f /root/.ssh/id_rsa (ssh-keygen -P "" -f /root/.ssh/id_rsa) &>/dev/null for i in {5..7} do IP_host=172.18.0.${i} ping -c 1 -w 1 ${IP_host} &>/dev/null if [ $? -eq 0 ];then (sshpass -p ${PASS} ssh-copy-id -o StrictHostKeyChecking=no ${IP_host}) &>/dev/null echo -e "\e[1;32m ${IP_host} ok \e[0m" fi done 计算内存使用占比 vi memory_info.sh && chmod +x memory_info.sh
#!/bin/bash MEM_TOTAL=`free -h |awk 'NR==2{print $2}'` MEM_USE=`free -h |awk 'NR==2{print $3}'` MEM_USED=`free | grep -i mem |awk '{print $3/$2*100"%"}'` MEM_FREE=`free -h |awk 'NR==2{print $4}'` MEM_FREED=`free | grep -i mem |awk '{print $4/$2*100"%"}'` MEM_BUFF_CACHE=`free -h |awk 'NR==2{print $6}'` MEM_BUFF_CACHED=`free | grep -i mem |awk '{print $6/$2*100 "%"}'` MEM_SHARE=`free -h |awk 'NR==2{print $5}'` MEM_SHARED=`free | grep -i mem |awk '{print $5/$2*100 "%"}'` MEM_ZONE=`head -3 /proc/meminfo | awk 'NR==1{t=$2}NR==2{f=$2;print(t-f)*100/t"%"}'` echo -e "\t\e[1;32m内存总量: $MEM_TOTAL \e[0m" echo -e "\t\e[1;32m内存总量减剩余内存(所有已使用)占比: $MEM_ZONE \e[0m" echo -e "\t\e[1;32m已使用: $MEM_USE 占比: $MEM_USED \e[0m" echo -e "\t\e[1;32m剩 余: $MEM_FREE 占比: $MEM_FREED \e[0m" echo -e "\t\e[1;32m共 享: $MEM_SHARE 占比: $MEM_SHARED \e[0m" echo -e "\t\e[1;32m缓冲区: $MEM_BUFF_CACHE 占比: $MEM_BUFF_CACHED \e[0m" 执行后的结果</div><div class=post-footer><a href=/posts/shell%E8%84%9A%E6%9C%AC%E5%BA%94%E7%94%A8%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/>使用docker搭建openvpn</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-04-17>2022-04-17</time></span></div><div class=content>需求 通过vpn直接访问内网容器ip可以直接登录，不再需要先登入公网IP再跳转到内网容器内部。
访问示意图 互联网（openvpn client）-->（公网ip）服务器（私网ip:172.18.0.10）-->服务器端容器（内网172.18.0.8） openvpn服务端配置 拉取镜像 docker pull kylemanna/openvpn 创建映射目录 mkdir -pv /data/openvpn/conf 生成配置文件 docker run -v /data/openvpn:/etc/openvpn --rm kylemanna/openvpn ovpn_genconfig -u udp://10.10.10.10 生成密钥文件 要求输入私钥密码
docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn ovpn_initpki Enter PEM pass phrase: 098poilkj. # 输入私钥密码 Verifying - Enter PEM pass phrase: 098poilkj. # 重新输入一次密码 Common Name (eg: your user,host,or server name) [Easy-RSA CA]: # 输入一个CA名称。可以不用输入，直接回车 Enter pass phrase for /etc/openvpn/pki/private/ca.key: 123456 # 输入刚才设置的私钥密码，完成后在输入一次 生成客户端证书 test1改成其他名字</div><div class=post-footer><a href=/posts/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/>ansible相关参考资料</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-04-15>2022-04-15</time></span></div><div class=content>ansible模块官方手册 模块 模块筛选 $ ansible-doc -l | grep 'copy' vsphere_copy Copy a file to a VMware datastore win_copy Copies files to remote locations on windows hosts bigip_file_copy Manage files in datastores on a BIG-IP ec2_ami_copy copies AMI between AWS regions, return new image id win_robocopy Synchronizes the contents of two directories using Robocopy copy Copy files to remote locations na_ontap_lun_copy NetApp ONTAP copy LUNs icx_copy Transfer files from or to remote Ruckus ICX 7000 series switches unarchive Unpacks an archive after (optionally) copying it from the local machine postgresql_copy Copy data between a file/program and a PostgreSQL table ec2_snapshot_copy copies an EC2 snapshot and returns the new Snapshot ID nxos_file_copy Copy a file to a remote NXOS device netapp_e_volume_copy NetApp E-Series create volume copy pairs 详细的模块描述手册</div><div class=post-footer><a href=/posts/ansible%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/docker%E5%86%B7%E9%97%A8%E6%8A%80%E5%B7%A7/>docker冷门技巧</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a>
</span>&nbsp;<span class=post-publish>published on <time datetime=2022-04-15>2022-04-15</time></span></div><div class=content>查看docker镜像的dockerfile 将&lt;IMAGE ID>替换为待查看Dockerfile的镜像ID。
docker history &lt;IMAGE ID> --format "{{.CreatedBy}}" --no-trunc |tac | awk '{if($3~/nop/){for(i=1;i&lt;=3;i++){$i=""};print substr($0,4)}else{print "RUN",$0}}' 对比
[root@localhost ~]# docker history f1396d3fa7b5 --format "{{.CreatedBy}}" --no-trunc |tac | awk '{if($3~/nop/){for(i=1;i&lt;=3;i++){$i=""};print substr($0,4)}else{print "RUN",$0}}' ADD file:be998d04a8927e9c4b105995e3b9d6800ea798807389f7c5921c0f4774328e21 in / CMD ["bash"] COPY file:d3994e70cf156a17b1ad3dae5c75ed40c6d5c73a0d1b4c6b94620f1cd76b0943 in /etc/apt/sources.list RUN /bin/sh -c apt update;apt install -y vim net-tools procps openssh-server python3.7 RUN /bin/sh -c sed -i 's/^#PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config;cp /usr/bin/python3.7 /usr/bin/python CMD ["/bin/bash"] 原Dockerfile
FROM debian:10 COPY sources.list /etc/apt/sources.</div><div class=post-footer><a href=/posts/docker%E5%86%B7%E9%97%A8%E6%8A%80%E5%B7%A7/>Read More</a></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/>1</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=/page/8/>8</a></span></li><li class=page-item><span class=page-link><a href=/page/9/>9</a></span></li><li class="page-item active"><span class=page-link><a href=/page/10/>10</a></span></li><li class=page-item><span class=page-link><a href=/page/11/>11</a></span></li><li class=page-item><span class=page-link><a href=/page/12/>12</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=/page/19/>19</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.115.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.5.4/dist/index.umd.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},data:{"id-1":"This is my cool site"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>