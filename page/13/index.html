<!doctype html><html lang=en-us><head><meta name=generator content="Hugo 0.115.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>My New Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:title" content="My New Hugo Site"><meta property="og:description" content="This is my cool site"><meta property="og:type" content="website"><meta property="og:url" content="http://example.org/"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="My New Hugo Site"><meta name=twitter:description content="This is my cool site"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://example.org/><link rel=alternate href=/index.xml type=application/rss+xml title="My New Hugo Site"><link rel=feed href=/index.xml type=application/rss+xml title="My New Hugo Site"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"http:\/\/example.org\/","inLanguage":"en-us","description":"This is my cool site","name":"My New Hugo Site"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=home-subtitle><div id=id-1 class=typeit></div></div><div class=links></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/>python常用模块</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-03-26>2022-03-26</time></span></div><div class=content>日志模块角色 1.Logger:产生日志 2.Filter:几乎不用 3.Handler: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件 4.Formatter：日志格式
日志模块相关说明 可在logging.basicConfig()函数中可通过具体参数来更改logging模块默认行为，可用参数有. filename：用指定的文件名创建FiledHandler，这样日志会被存储在指定的文件中。 filemode：文件打开方式，在指定了filename时使用这个参数，默认值为“a”还可指定为“w”。 format：指定handler使用的日志显示格式。 datefmt：指定日期时间格式。 level：设置rootlogger的日志级别 stream：用指定的stream创建StreamHandler。可以指定输出到sys.stderr,sys.stdout或者文件，默认为sys.stderr。若同时列出了filename和stream两个参数，则stream参数会被忽略。
format参数中可能用到的格式化串 %(name)s Logger的名字 %(levelno)s 数字形式的日志级别 %(levelname)s 文本形式的日志级别 %(pathname)s 调用日志输出函数的模块的完整路径名，可能没有 %(filename)s 调用日志输出函数的模块的文件名 %(module)s 调用日志输出函数的模块名 %(funcName)s 调用日志输出函数的函数名 %(lineno)d 调用日志输出函数的语句所在的代码行 %(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示 %(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数 %(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒 %(thread)d 线程ID。可能没有 %(threadName)s 线程名。可能没有 %(process)d 进程ID。可能没有 %(message)s用户输出的消息 日志打印实现过程 import logging #1.Logger:产生日志 logger1=logging.getLogger('访问日志') #2.Handler: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件 sh=logging.StreamHandler() #打印到终端 fh1=logging.FileHandler('s1.log', encoding='utf-8') #打印到文件 fh2=logging.FileHandler('s2.log', encoding='utf-8') #3.Formatter：日志格式 formatter1=logging.Formatter( fmt='%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s', datefmt='%Y-%m-%d %H:%M:%S %p' ) formatter2=logging.</div><div class=post-footer><a href=/posts/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/>模块与包</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-03-26>2022-03-26</time></span></div><div class=content>什么是模块？ 最常见的场景，一个模块就是包含了一组功能的python文件，例如module.py,模块名是module。可以使用import module。
四个通用类别：
使用python编写的.py文件
已被编译为共享库或DLL的c或c++扩展
把一系列模块组织到一起的文件夹（注意：文件夹下有一个__init__.py文件，该文件夹称之为包）
使用C编写并连接到python解释器的内置模块
为什么要使用模块？ 从文件级别组织程序，更方便管理。
拿来主义，提升开发效率。
如何使用模块？ import 模块名
调用模块里面的函数 模块名.函数名
第一次导入模块，会发生3件事，重复导入只会引用之前加载好的结果。
1.产生一个新的名称空间。
2.运行spam.py源文件代码，产生的名字都存放于1的名称空间中,运行过程中global关键字指向的就是该名称空间。
3.在当前名称空间拿到一个名字spam，该名字指向1的名称空间。引用spam.py中名字的方式：spam.名字
强调：被导入的模块在执行过程中使用自己的独立的名称空间作为全局名称空间。
起别名 import spam as sm
一行导入多个模块 import time,sys,spam
另一种使用模块的方法 from 模块名 import 名字
优点：引用时不用加前缀，简单 缺点：容易与当名称空间的名字冲突
from spam import money as m from spam import money,read1,read2 from spam import * # *包含除了下划线开头以外所有的名字。 python文件的两种用途 1.当作脚本执行
__name__ == '__main__'
2.当作模块被导入使用
__name__ == '模块名'
if __name__ == '__main__': pass 模块搜索路径顺序 内存-》内置模块&ndash;》sys.path(当前执行文件路径)
什么是包 包就是一个包含了__init__.py文件的文件夹（可以往该文件夹下放一堆子模块）</div><div class=post-footer><a href=/posts/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/>k8s网路通信</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-03-25>2022-03-25</time></span></div><div class=content>基于k8s中cni插件calico网络原理使用总结 1.实验环境 name version ip cni master v1.22.2 ens33:10.4.7.60 calico worker1 v1.22.2 ens33:10.4.7.61 calico worker2 v1.22.2 ens33:10.4.7.62 calico 2.实验整体拓扑 3.部署一个deployment 问题1 pod的ip从哪里来？
由kube-controller-manager来分配。
root@master:~# cat /etc/kubernetes/manifests/kube-controller-manager.yaml | grep cidr - --allocate-node-cidrs=true - --cluster-cidr=10.244.0.0/16 问题2 如何确定集群上正在使用的cni网络插件?
在master节点上查看
问题3 在k8s中，docker 使用的是bridge（网桥）模式，并且始终处于Down状态，那么calico使用的也是网桥模式码？
使用ip -d a可以查看网卡模式.
calico使用都是vxlan技术。
root@master:~# ip -d a 1: lo: &lt;LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 promiscuity 0 minmtu 0 maxmtu 0 numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 inet 127.</div><div class=post-footer><a href=/posts/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/>pam模块限制登录</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-03-16>2022-03-16</time></span></div><div class=content>系统环境 [root@43f873a76b81 ~]# uname -a Linux 43f873a76b81 4.18.0-147.5.1.el8_1.x86_64 #1 SMP Wed Feb 5 02:00:39 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux [root@43f873a76b81 ~]# cat /etc/*release* CentOS Linux release 7.9.2009 (Core) Derived from Red Hat Enterprise Linux 7.9 (Source) NAME="CentOS Linux" VERSION="7 (Core)" ID="centos" ID_LIKE="rhel fedora" VERSION_ID="7" PRETTY_NAME="CentOS Linux 7 (Core)" ANSI_COLOR="0;31" CPE_NAME="cpe:/o:centos:centos:7" HOME_URL="https://www.centos.org/" BUG_REPORT_URL="https://bugs.centos.org/" CENTOS_MANTISBT_PROJECT="CentOS-7" CENTOS_MANTISBT_PROJECT_VERSION="7" REDHAT_SUPPORT_PRODUCT="centos" REDHAT_SUPPORT_PRODUCT_VERSION="7" CentOS Linux release 7.9.2009 (Core) CentOS Linux release 7.9.2009 (Core) cpe:/o:centos:centos:7 检查是否有ssh服务,没有则需要安装openssh-server服务 [root@43f873a76b81 ~]# rpm -qa| grep ssh openssh-7.</div><div class=post-footer><a href=/posts/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/linux-%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4/>Linux 信息查询命令</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-02-25>2022-02-25</time></span></div><div class=content>Linux 信息查询命令 硬件查询 查看 CPU 信息
cat /proc/cpuinfo 查看物理 CPU 数量
cat /proc/cpuinfo |grep "physical id"|sort |uniq|wc -l 查看逻辑 CPU 数量
cat /proc/cpuinfo |grep "processor"|wc -l 查看每个 CPU 中 core 的数量 (核心数)
cat /proc/cpuinfo |grep "cores"|uniq 查看 CPU 的主频
cat /proc/cpuinfo |grep MHz|uniq 查看操作系统内核信息
uname -a 查看 CPU 型号
cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c # 8 Intel(R) Core(TM) i7-4770 CPU @ 3.40GHz 前面 8 代表 CPU 数量.</div><div class=post-footer><a href=/posts/linux-%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/centos7-%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/>CentOS7 升级内核</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-02-25>2022-02-25</time></span></div><div class=content>CentOS 7 升级内核 uname -r # 查看内核 yum install -y https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm yum --disablerepo="*" --enablerepo="elrepo-kernel" list available yum --enablerepo=elrepo-kernel install -y kernel-lt awk -F\' '$1=="menuentry " {print i++ " : " $2}' /boot/grub2/grub.cfg yum install -y grub2-pc grub2-set-default 0 vim /etc/default/grub # 修改 GRUB_DEFAULT=0 grub2-mkconfig -o /boot/grub2/grub.cfg reboot # 重启 uname -r # 查看内核 ############################## 以下可选 ############################## yum remove kernel-tools-libs.x86_64 kernel-tools.x86_64 # 删除版本工具包 yum --disablerepo=\* --enablerepo=elrepo-kernel install -y kernel-lt-tools.x86_64 # 安装新版本工具包 rpm -qa | grep kernel # 查看已安装内核</div><div class=post-footer><a href=/posts/centos7-%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/>Read More</a></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/>1</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=/page/11/>11</a></span></li><li class=page-item><span class=page-link><a href=/page/12/>12</a></span></li><li class="page-item active"><span class=page-link><a href=/page/13/>13</a></span></li><li class=page-item><span class=page-link><a href=/page/14/>14</a></span></li><li class=page-item><span class=page-link><a href=/page/15/>15</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=/page/19/>19</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.115.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},data:{"id-1":"This is my cool site"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>