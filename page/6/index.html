<!doctype html><html lang=en-us><head><meta name=generator content="Hugo 0.115.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>My New Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:title" content="My New Hugo Site"><meta property="og:description" content="This is my cool site"><meta property="og:type" content="website"><meta property="og:url" content="http://example.org/"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="My New Hugo Site"><meta name=twitter:description content="This is my cool site"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://example.org/><link rel=alternate href=/index.xml type=application/rss+xml title="My New Hugo Site"><link rel=feed href=/index.xml type=application/rss+xml title="My New Hugo Site"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"http:\/\/example.org\/","inLanguage":"en-us","description":"This is my cool site","name":"My New Hugo Site"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=home-subtitle><div id=id-1 class=typeit></div></div><div class=links></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/>豆瓣电影top250展示页</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-08-07>2022-08-07</time></span></div><div class=content>豆瓣展示页 新建flask项目 使用pycharm新建flask项目，项目名为：douban_flask。
将之前的爬取的movie.db文件放到该项目的根目录下。准备前端页面代码（可以到模板之家下载[http://www.cssmoban.com/cssthemes/9296.shtml]）
前端代码 下载后解压缩放到static目录下.static目录用于存放网页相关代码。
目录结构如下：
douban_flask - static - assets - css - img - js - vendor - templates - test echarts.min.js index.html movie.html score.html team.html temp.html word.html - venv app.py movie.db testCloud.py 新建模板目录templates，在此目录下新建主页文件index.html.可以把temp.html中的内容复制一份到index.html。
flask路由 开始写路由app.py
Tips:使用flask下render_template模块可以找到templates目录内的html页面。
from flask import Flask, render_template import sqlite3 app = Flask(__name__) @app.route('/') def index(): return render_template("index.html") @app.route('/index') def home(): # return render_template("index.html") return index() @app.route('/movie') def movie(): datalist = [] con = sqlite3.</div><div class=post-footer><a href=/posts/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/flask%E5%85%A5%E9%97%A8/>Flask入门</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-07-21>2022-07-21</time></span></div><div class=content>数据可视化 关于Flask Flask作为web框架，它的作用主要是开发web应用程序。
Flask基础的操作 浏览器打印hello world! from flask import Flask # flask类接收一个参数__name__ app = Flask(__name__) # 路由解析，通过用户范文的路径，匹配相应的函数。 @app.route('/') def hello_world(): return 'hello world!' # debug模式开启,更改代码后，浏览器实时显示。 # Flask应用程序实例的run方法启动web服务器 if __name__ == '__main__': app.run() 运行代码
访问网址：http://127.0.0.1:5000屏幕打印hello world!
FLASK_APP = app.py FLASK_ENV = development FLASK_DEBUG = 0 In folder D:/code2022/auto-work/demo D:\pccharmcode\venv\Scripts\python.exe -m flask run * Running on http://127.0.0.1:5000 (Press CTRL+C to quit) * Serving Flask app 'app.py' (lazy loading) * Environment: development * Debug mode: off 访问/index路径 from flask import Flask # flask类接收一个参数__name__ app = Flask(__name__) # 路由解析，通过用户范文的路径，匹配相应的函数。 # 装饰起的作用是将路由映射到视图函数hello @app.</div><div class=post-footer><a href=/posts/flask%E5%85%A5%E9%97%A8/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/sqlite3%E4%BD%BF%E7%94%A8/>sqlite3使用</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-07-20>2022-07-20</time></span></div><div class=content>sqlite3使用 连接数据库 import sqlite3 conn = sqlite3.connect("test.db") # 打开或创建数据库文件 print("Opened database successfully") c = conn.cursor() # 获取游标 sql = "" c.execute(sql) # 执行sql语句 conn.commit() # 提交数据库操作 conn.close() # 关闭数据库连接 print("ok") 创建数据表 import sqlite3 conn = sqlite3.connect("test.db") # 打开或创建数据库文件 print("成功打开数据") c = conn.cursor() # 获取游标 sql = ''' create table company (id int primary key not null, name text not null, age int not null, address char(50), salary real ); ''' c.</div><div class=post-footer><a href=/posts/sqlite3%E4%BD%BF%E7%94%A8/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/>Bs4-正则表达式-Re模块</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-07-17>2022-07-17</time></span></div><div class=content>BeautifulSoup4将复杂的HTML文档转换成一个复杂的树形结构，每个节点都是Python对象，所有对象可以归纳为4种
Tag NavigableString BeautifulSoup Comment 全局代码 from bs4 import BeautifulSoup file = open(r"D:\code2022\auto-work\douban\test\baidu.html","rb") html = file.read().decode('utf-8') bs = BeautifulSoup(html,"html.parser") print(bs.title) # &lt;title>百度一下，你就知道&lt;/title> print(bs.a) print(bs.head) print(type(bs.head)) # &lt;class 'bs4.element.Tag'> Tag 标签及其内容 拿到它所找到的第一个内容
NavigableString 标签里的内容（字符串）
print(bs.title.string) # 百度一下，你就知道 print(type(bs.title.string)) # &lt;class 'bs4.element.NavigableString'> BeautifulSoup 表示整个文档
print(bs.a.attrs) print(type(bs)) # &lt;class 'bs4.BeautifulSoup'> Comment 是一个特殊的NavigableString，输出的内容不包含注释符号。
print(bs.name) # [document] print(bs) print(bs.a.string) print(type(bs.a.string)) 文档的遍历,遍历文档树。
print(bs.head.contents) print(bs.head.contents[1]) # 更多内容，搜索文档。 文档的搜索 find_all() # 字符串过滤：会查找与字符串完全匹配的内容 t_list = bs.find_all("a") import re # 正则表达式搜索：使用search() 方法来匹配内容 t_list = bs.</div><div class=post-footer><a href=/posts/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/>urllib库的基本使用</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-07-17>2022-07-17</time></span></div><div class=content>网页各种测试 http://httpbin.org 获取一个get请求 import urllib.request res = urllib.request.urlopen("http://www.baidu.com") print(res.read().decode('utf-8')) # 对获取到的网页源码进行utf-8解码 获取一个post请求.（模拟用户登录） import urllib.parse # 引入解析库 data = bytes(urllib.parse.urlencode({"hello":"world"}),encoding='utf-8') res1 = urllib.request.urlopen("http://httpbin.org/post",data=data) print(res1.read().decode("utf-8")) 超时处理 try: res1 = urllib.request.urlopen("http://httpbin.org/get",timeout=0.01) print(res1.read().decode('utf-8')) except urllib.error.URLError as e: print("time out!") 获取基本信息 res2 = urllib.request.urlopen("http://baidu.com") print(res2.status) # 获取状态码 print(res2.getheaders()) # 获取头部信息 print(res2.getheader("Server")) # Apache 直接请求豆瓣网址 url = "https://douban.com" req = urllib.request.Request(url=url) response = urllib.request.urlopen(req) print(response.read().decode("utf-8")) 报错信息如下：（说明豆瓣已经识别到是爬虫的请求） raise HTTPError(req.full_url, code, msg, hdrs, fp) urllib.error.HTTPError: HTTP Error 418 如何伪装成浏览器来请求呢？这时候需要在请求头中添加user-agent。user-agent如何获取？浏览器F12-》NETWORK->点击左侧带有get请求的网址，右侧拉到最下边复制user-agent的值。</div><div class=post-footer><a href=/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/>豆瓣电影数据分析</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-07-17>2022-07-17</time></span></div><div class=content>爬虫分析步骤 准备工作 获取数据 解析内容 保存数据 url分析 页面包括250条电影数据，分10页，每页25条。每页的url的不同之处：最后的数值= （页数-1）*25
# 第一页第一条 https://movie.douban.com/top250?start=0 服务器通过headers鉴定客户端信息。
保存到excel表格中，代码如下 注意：如果ip被限制可以带cookie请求，这样服务器会认为是同一个客户端发出的请求。
或者使用代理IP来访问。
代理IP网站
from bs4 import BeautifulSoup # 网页解析，获取数据 import re # 正则表达式，进行文字匹配 import urllib.request, urllib.error # 指定url，获取网页数据 from urllib.error import URLError import xlwt # 进行execl操作 import sqlite3 # 进行sqlite 数据库操作 from fake_useragent import UserAgent # 引入动态随机UserAgent from urllib.request import build_opener, ProxyHandler # 反反爬，使用代理IP，防止被服务器封掉。 def main(): baseurl = "https://movie.douban.com/top250?start=" # 1.爬取网页 datalist = getData(baseurl) savepath = ".\\豆瓣电影top250.xls" # 3.</div><div class=post-footer><a href=/posts/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/>Read More</a></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/>1</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=/page/4/>4</a></span></li><li class=page-item><span class=page-link><a href=/page/5/>5</a></span></li><li class="page-item active"><span class=page-link><a href=/page/6/>6</a></span></li><li class=page-item><span class=page-link><a href=/page/7/>7</a></span></li><li class=page-item><span class=page-link><a href=/page/8/>8</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=/page/19/>19</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.115.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},data:{"id-1":"This is my cool site"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>