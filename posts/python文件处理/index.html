<!doctype html><html lang=zh-CN><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content="Python文件处理 - https://www.haipengv.com/posts/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"><meta name=author content="Smith - https://www.haipengv.com/"><meta name=msvalidate.01 content="B46311949B856F2A7015F366FB3CE878"><title>Python文件处理</title><base target=_blank><link rel=icon type=image/png href=/favicon.ico><link rel=stylesheet href=https://www.haipengv.com/style.min.9a0cea23154ac1941e15c25aa2d31b77285a217d2606ec05b55236428cf1c3e6.css><script>const DARK=!1</script><script type=text/javascript src=/main.js defer></script></head><body class=active-animate><div class=cool-before></div><div id=header><div class=container-header><div class=right><h1 class=title>Python文件处理</h1><div id=toc>📜</div></div></div></div><div id=content><div class="container-main container-page"><div class=rel><div class=curtag-desc><a href=https://www.haipengv.com/tags/python/><img src=/imgs/icons/tag.svg width=16> 相关文章：Python <sup>31</sup></a></div><div class=curtag-post><div class=curtag-post-item><a href=https://www.haipengv.com/posts/jupyter%E6%9B%B4%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/>Jupyter更改登录密码</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/>Python回炉重造 函数</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/>Python回炉重造-元组</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/>Python回炉重造-列表</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/>Python回炉重造-字典</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/>Python回炉重造-字符串</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/>Python回炉重造-集合</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/>Python回炉重造-面向对象编程入门</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B/>Python多线程</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/>Python对象和数据结构基础</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%B0%81%E8%A3%85/>Python封装</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/>Python常用模块</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/>Python数据结构总结</a></div><div class="curtag-post-item curtag-post-item--active"><a href=https://www.haipengv.com/posts/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/>Python文件处理</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E6%96%B9%E6%B3%95%E5%92%8C%E5%87%BD%E6%95%B0/>Python方法和函数</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/>Python自动化办公</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/>Python自动化办公之excel</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E8%AF%AD%E6%B3%95/>Python语法</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/sqlite3%E4%BD%BF%E7%94%A8/>Sqlite3使用</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/>Urllib库的基本使用</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BD%BF%E7%94%A8python%E5%AE%9E%E7%8E%B0unix%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2/>使用python实现unix时间戳转换</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%9F%BA%E4%BA%8Etcp%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/>基于TCP的简单套接字通信</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/>安装任意版本Python</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/>序列化与反序列化</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%BC%82%E5%B8%B8/>异常</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/>模块与包</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/>生成器 可迭代对象 迭代器 迭代</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/>类和对象</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/>豆瓣展示页</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/>豆瓣电影爬虫</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/>集合的相关特性</a></div></div></div><div class=desc><span><svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667l-324.522666 324.48c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334L685.098667 499.2 524.885333 338.986667zM585.258667 278.656l160.170666 160.213333 102.144-102.144a19.712 19.712.0 000-27.861333l-132.48-132.437333a19.456 19.456.0 00-27.605333.0L585.258667 278.613333zM701.312 85.333333c27.946667.0 54.741333 11.136 74.282667 30.848L907.904 248.490667a105.045333 105.045333.0 010 148.565333L424.874667 879.957333C395.050667 914.304 352.768 935.424 304.426667 938.752H85.333333v-42.666667l.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666a104.789333 104.789333.0 0174.24-30.933334z" p-id="7410" fill="#adb5bd"/></svg>2025-03-16&nbsp;&nbsp;&nbsp;<svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859.0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775.0-360.398 149.372-360.398 356.147S305.225 870.23 512 870.23c206.775.0 357.467-151.455 357.467-358.23.0-23.859 23.634-50.706 53.413-50.706 29.78.0 49.92 26.847 49.92 50.706.0 254.493-206.307 460.8-460.8 460.8s-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4.0 226.684 33.296 312.264 117.369.358.351.358-24.052.0-73.209z" p-id="23839" fill="#adb5bd"/></svg>
2025-03-16&nbsp;&nbsp;&nbsp;</span>
<span><svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028c-70.774903.0-128.089859 57.325793-128.089859 128.03206v446.793671c0 70.7171050000001 57.314956 128.154884 128.089859 128.154884h133.353183a63.940169 63.940169.0 0155.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169.0 0155.212517-31.551041h133.54103c70.576219.0 127.732228-57.289669 127.732227-127.800865V192.391272c0-70.536482-57.181295-127.728615-127.786414-127.728615zM895.884854 639.842407A63.85347 63.85347.0 01832.092795 703.703103h-133.54103a127.753903 127.753903.0 00-110.349172 63.09847l-76.222461 129.856342a.274545.274545.0 010-.050574h-.032512s-.021675.061411-.032512.061412l-76.1466-129.85273a127.804477 127.804477.0 00-110.385297-63.11292H192.030028A64.207489 64.207489.0 01127.880338 639.488388V192.694717a64.102729 64.102729.0 0164.14969-64.091891h640.00858a63.799284 63.799284.0 0163.846246 63.788446v447.451135z" fill="#adb5bd" p-id="33867"/><path d="M608.154093 288.092004a31.970084 31.970084.0 00-31.970084 31.970085v160.078006L441.53396 300.861976a31.970084 31.970084.0 00-57.531702 19.200113v255.760676a31.970084 31.970084.0 0063.940169.0V415.863969l134.650048 179.274507a31.970084 31.970084.0 0057.531703-19.200113V320.062089a31.970084 31.970084.0 00-31.970085-31.970085z" fill="#adb5bd" p-id="33868"/></svg>2872 字</span>&nbsp;
<span><svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667zm0 810.666666C307.2 885.333333 138.666667 716.8 138.666667 512S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"/><path d="M695.466667 567.466667 544 497.066667V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666L669.866667 627.2c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8.0 23.466667-6.4 29.866666-19.2 6.4-14.933333.0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"/></svg>6 分钟</span><div class=container-ctgtag><div class=taxonomy><div class=tag><a href=/tags/python>Python</a></div></div></div></div><div class=toc><div class=container-page-operation><div class=page-operation><div><a href=/><img src=/imgs/icons/home-2.svg alt></a></div><div><a href=/nav><img src=/imgs/icons/iov-navigate-1.svg alt></a></div><div><a href=/wiki><img src=/imgs/icons/wiki.svg alt></a></div><div><a href=/tags><img src=/imgs/icons/treetags.svg alt></a></div><div id=light-dark><a><img src=/imgs/icons/moon2.svg alt></a></div><div><a href=#><img src=/imgs/icons/up2.svg alt></a></div></div></div><nav id=TableOfContents><ul><li><a href=#文件处理流程>文件处理流程</a><ul><li><a href=#两种文件操作方式>两种文件操作方式</a></li><li><a href=#python2中文件打开>python2中文件打开</a></li><li><a href=#打开文件的模式>打开文件的模式</a></li><li><a href=#操作文件的方法>操作文件的方法</a></li><li><a href=#文件内光标移动>文件内光标移动</a></li><li><a href=#文件的修改>文件的修改</a></li><li><a href=#文件的逐行读取并打印行号>文件的逐行读取并打印行号</a></li></ul></li></ul></nav></div><div class=content><h2 id=文件处理流程>文件处理流程</h2><p>1.打开文件，得到文件句柄并赋值给一个变量</p><p>2.通过句柄对文件进行操作</p><p>3.关闭文件</p><h3 id=两种文件操作方式>两种文件操作方式</h3><h4 id=直接操作需要手动关闭文件>直接操作（需要手动关闭文件）</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#998;font-style:italic>#1. 打开文件，得到文件句柄并赋值给一个变量</span>
</span></span><span style=display:flex><span>f<span style=color:#000;font-weight:700>=</span><span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;a.txt&#39;</span>,<span style=color:#d14>&#39;r&#39;</span>,encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>) <span style=color:#998;font-style:italic>#默认打开模式就为r</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#2. 通过句柄对文件进行操作</span>
</span></span><span style=display:flex><span>data<span style=color:#000;font-weight:700>=</span>f<span style=color:#000;font-weight:700>.</span>read()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#3. 关闭文件</span>
</span></span><span style=display:flex><span>f<span style=color:#000;font-weight:700>.</span>close()
</span></span></code></pre></td></tr></table></div></div><h4 id=使用with关键字推荐自动关闭文件无需手动操作>使用<code>with</code>关键字（推荐！自动关闭文件无需手动操作）</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#998;font-style:italic>#可用用with同时打开多个文件，用逗号分隔开即可</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;a.txt&#39;</span>,<span style=color:#d14>&#39;r&#39;</span>,encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>) <span style=color:#000;font-weight:700>as</span> read_f,<span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;b.txt&#39;</span>,<span style=color:#d14>&#39;w&#39;</span>,encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>) <span style=color:#000;font-weight:700>as</span> write_f:
</span></span><span style=display:flex><span>    data<span style=color:#000;font-weight:700>=</span>read_f<span style=color:#000;font-weight:700>.</span>read()
</span></span><span style=display:flex><span>    write_f<span style=color:#000;font-weight:700>.</span>write(data)
</span></span></code></pre></td></tr></table></div></div><p>注意：若要保证不乱码，文件以什么方式存的，就要以什么方式打开。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>f<span style=color:#000;font-weight:700>=</span><span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;a.txt&#39;</span>,<span style=color:#d14>&#39;r&#39;</span>,encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span>linux默认编码<span style=color:#d14>&#39;utf-8&#39;</span>
</span></span><span style=display:flex><span>windows默认编码 <span style=color:#d14>&#39;gbk&#39;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=python2中文件打开>python2中文件打开</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#998;font-style:italic>#首先在python3中操作文件只有一种选择，那就是open()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#而在python2中则有两种方式：file()与open()</span>
</span></span><span style=display:flex><span>两者都能够打开文件<span style=color:#a61717;background-color:#e3d2d2>，</span>对文件进行操作<span style=color:#a61717;background-color:#e3d2d2>，</span>也具有相似的用法和参数<span style=color:#a61717;background-color:#e3d2d2>，</span>但是<span style=color:#a61717;background-color:#e3d2d2>，</span>这两种文件打开方式有本质的区别<span style=color:#a61717;background-color:#e3d2d2>，</span>file为文件类<span style=color:#a61717;background-color:#e3d2d2>，</span>用file()来打开文件<span style=color:#a61717;background-color:#e3d2d2>，</span>相当于这是在构造文件类<span style=color:#a61717;background-color:#e3d2d2>，</span>而用open()打开文件<span style=color:#a61717;background-color:#e3d2d2>，</span>是用python的内建函数来操作<span style=color:#a61717;background-color:#e3d2d2>，</span>我们一般使用open()打开文件进行操作<span style=color:#a61717;background-color:#e3d2d2>，</span>而用file当做一个类型<span style=color:#a61717;background-color:#e3d2d2>，</span>比如type(f) <span style=color:#000;font-weight:700>is</span> file<span style=color:#a61717;background-color:#e3d2d2>。</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=打开文件的模式>打开文件的模式</h3><h4 id=基础>基础</h4><p>打开文件的模式有(默认为文本模式)</p><pre tabindex=0><code>r，只读模式【默认模式，文件必须存在，文件存在文件内指针直接跳到文件开头,不存在则抛出异常】
w，只写模式【不可读；不存在则创建；存在则清空内容,文件指针跑到文件开头.】
a，之追加写模式【不可读；不存在则创建；存在则只追加内容，文件存在会将文件指针直接移动到文件末尾】
</code></pre><h4 id=强调>强调</h4><p>在文件不关闭的情况下,连续的写入，后写的内容一定跟在前写内容的后面。</p><p>如果重新以w模式打开文件，则会清空文件内容。</p><h4 id=a与w相同与异同><code>a</code>与<code>w</code>相同与异同</h4><p>相同点：在打开的文件不关闭的情况下，连续的写入，新写的内容总会跟在前写的内容之后</p><p>不同点：以 a 模式重新打开文件，不会清空原文件内容，会将文件指针直接移动到文件末尾，新写的内容永远写在最后。</p><p>对于非文本文件，我们只能使用b模式，&ldquo;b"表示以字节的方式操作（而所有文件也都是以字节的形式存储的，使用这种模式无需考虑文本文件的字符编码、图片文件的<code>jgp格式</code>、视频文件的<code>avi格式</code>）</p><pre tabindex=0><code>rb 
wb
ab
注：以b方式打开时，读取到的内容是字节类型，写入时也需要提供字节类型，不能指定编码
</code></pre><p>在平时工作中，我们只单纯使用<code>r/w/a</code>，要么只读，要么只写，一般不用可读可写的模式。
大前提: <code>tb模式</code>均不能单独使用,必须与<code>r/w/a</code>之一结合使用。</p><pre tabindex=0><code>t（默认的）：文本模式
    1. 读写文件都是以字符串为单位的
    2. 只能针对文本文件
    3. 必须指定encoding参数
b：二进制模式:
   1.读写文件都是以bytes/二进制为单位的
   2. 可以针对所有文件
   3. 一定不能指定encoding参数
</code></pre><p>强调：<code>b模式对比t模式</code>
1、在操作纯文本文件方面t模式帮我们省去了编码与解码的环节，b模式则需要手动编码与解码，所以此时t模式更为方便。
2、针对非文本文件（如图片、视频、音频等）只能使用b模式。</p><h4 id=拓展>拓展</h4><pre tabindex=0><code>&#34;+&#34; 表示可以同时读写某个文件
r+， 读写【可读，可写】
w+，写读【可读，可写】
a+， 写读【可读，可写】
x， 只写模式【不可读；不存在则创建，存在则报错】
x+ ，写读【可读，可写】
</code></pre><p>回车与换行</p><pre tabindex=0><code>\n 换行
\r 回车
</code></pre><h3 id=操作文件的方法>操作文件的方法</h3><h4 id=基础-1>基础</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>f<span style=color:#000;font-weight:700>.</span>read() <span style=color:#998;font-style:italic>#读取所有内容,光标移动到文件末尾。</span>
</span></span><span style=display:flex><span>f<span style=color:#000;font-weight:700>.</span>readline() <span style=color:#998;font-style:italic>#读取一行内容,光标移动到第二行首部。</span>
</span></span><span style=display:flex><span>f<span style=color:#000;font-weight:700>.</span>readlines() <span style=color:#998;font-style:italic>#读取每一行内容,存放于列表中。</span>
</span></span><span style=display:flex><span>f<span style=color:#000;font-weight:700>.</span>write(<span style=color:#d14>&#39;11111</span><span style=color:#d14>\n</span><span style=color:#d14>222</span><span style=color:#d14>\n</span><span style=color:#d14>&#39;</span>) <span style=color:#998;font-style:italic>#针对文本模式的写,需要自己写换行符。</span>
</span></span><span style=display:flex><span>f<span style=color:#000;font-weight:700>.</span>writelines(<span style=color:#d14>&#39;11111</span><span style=color:#d14>\n</span><span style=color:#d14>222</span><span style=color:#d14>\n</span><span style=color:#d14>&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>)) <span style=color:#998;font-style:italic>#针对b模式的写,需要自己写换行符。</span>
</span></span><span style=display:flex><span>f<span style=color:#000;font-weight:700>.</span>writelines([<span style=color:#d14>&#39;333</span><span style=color:#d14>\n</span><span style=color:#d14>&#39;</span>,<span style=color:#d14>&#39;444</span><span style=color:#d14>\n</span><span style=color:#d14>&#39;</span>]) <span style=color:#998;font-style:italic>#文件模式</span>
</span></span><span style=display:flex><span>f<span style=color:#000;font-weight:700>.</span>writelines([<span style=color:#0086b3>bytes</span>(<span style=color:#d14>&#39;333</span><span style=color:#d14>\n</span><span style=color:#d14>&#39;</span>,encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>),<span style=color:#d14>&#39;444</span><span style=color:#d14>\n</span><span style=color:#d14>&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>)]) <span style=color:#998;font-style:italic>#b模式</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=拓展-1>拓展</h4><pre tabindex=0><code>f.readable() #文件是否可读
f.writeable() #文件是否可写
f.closed #文件是否关闭
f.encoding() #如果文件打开模式为b,则没有该属性。
f.flush() #立刻将文件内容从内存刷到硬盘
f.name #显示文件名
f.tell() #显示当前光标位置
f.seek(0) #重置光标位置,光标会跳到第一行行首。
</code></pre><h3 id=文件内光标移动>文件内光标移动</h3><p><code>read(3)</code></p><pre tabindex=0><code>文件打开方式为文本模式时，代表读取3个字符。
文件打开方式为b模式时，代表读取3个字节。
</code></pre><p>其余的文件内光标移动都是以字节为单位如<code>seek，tell，truncate</code>。</p><p>注意</p><p><code>seek</code>有三种移动方式<code>0，1，2</code>，其中1和2必须在<code>b模式</code>下进行，但无论哪种模式，都是以<code>bytes</code>为单位移动的.</p><p><code>truncate</code>是截断文件，所以文件的打开方式必须可写，但是不能用<code>w</code>或<code>w+</code>等方式打开，因为那样直接清空文件了，所以<code>truncate</code>要在<code>r+或a或a+</code>等模式下测试效果。</p><p>之前文件内指针的移动都是由读/写操作而被动触发的，若想读取文件某一特定位置的数据，则需要用<code>f.seek方法</code>主动控制文件内指针的移动，详细用法如下：
<code>f.seek</code>(指针移动的字节数,模式控制):
模式控制:
0: 默认的模式,该模式代表指针移动的字节数是以文件开头为参照的
1: 该模式代表指针移动的字节数是以当前所在的位置为参照的
2: 该模式代表指针移动的字节数是以文件末尾的位置为参照的
强调:其中0模式可以在t或者b模式使用,而1跟2模式只能在b模式下用</p><p><code>0模式</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#998;font-style:italic># a.txt用utf-8编码，内容如下（abc各占1个字节，中文“你好”各占3个字节）</span>
</span></span><span style=display:flex><span>abc你好
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 0模式的使用</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;a.txt&#39;</span>,mode<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;rt&#39;</span>,encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>) <span style=color:#000;font-weight:700>as</span> f:
</span></span><span style=display:flex><span>    f<span style=color:#000;font-weight:700>.</span>seek(<span style=color:#099>3</span>,<span style=color:#099>0</span>)     <span style=color:#998;font-style:italic># 参照文件开头移动了3个字节</span>
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(f<span style=color:#000;font-weight:700>.</span>tell()) <span style=color:#998;font-style:italic># 查看当前文件指针距离文件开头的位置，输出结果为3</span>
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(f<span style=color:#000;font-weight:700>.</span>read()) <span style=color:#998;font-style:italic># 从第3个字节的位置读到文件末尾，输出结果为：你好</span>
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic># 注意：由于在t模式下，会将读取的内容自动解码，所以必须保证读取的内容是一个完整中文数据，否则解码失败</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;a.txt&#39;</span>,mode<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;rb&#39;</span>) <span style=color:#000;font-weight:700>as</span> f:
</span></span><span style=display:flex><span>    f<span style=color:#000;font-weight:700>.</span>seek(<span style=color:#099>6</span>,<span style=color:#099>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(f<span style=color:#000;font-weight:700>.</span>read()<span style=color:#000;font-weight:700>.</span>decode(<span style=color:#d14>&#39;utf-8&#39;</span>)) <span style=color:#998;font-style:italic>#输出结果为: 好</span>
</span></span></code></pre></td></tr></table></div></div><p><code>1模式</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#099>1</span>模式
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;a.txt&#39;</span>,mode<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;rb&#39;</span>) <span style=color:#000;font-weight:700>as</span> f:
</span></span><span style=display:flex><span>    f<span style=color:#000;font-weight:700>.</span>seek(<span style=color:#099>3</span>,<span style=color:#099>1</span>) <span style=color:#998;font-style:italic># 从当前位置往后移动3个字节，而此时的当前位置就是文件开头</span>
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(f<span style=color:#000;font-weight:700>.</span>tell()) <span style=color:#998;font-style:italic># 输出结果为：3</span>
</span></span><span style=display:flex><span>    f<span style=color:#000;font-weight:700>.</span>seek(<span style=color:#099>4</span>,<span style=color:#099>1</span>)     <span style=color:#998;font-style:italic># 从当前位置往后移动4个字节，而此时的当前位置为3</span>
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(f<span style=color:#000;font-weight:700>.</span>tell()) <span style=color:#998;font-style:italic># 输出结果为：7</span>
</span></span></code></pre></td></tr></table></div></div><p>练习：使用<code>seek()</code>实现<code>shell中tail -f （文件日志追加功能）</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>time</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;access.log&#39;</span>,<span style=color:#d14>&#39;rb&#39;</span>) <span style=color:#000;font-weight:700>as</span> f:
</span></span><span style=display:flex><span>    f<span style=color:#000;font-weight:700>.</span>seek(<span style=color:#099>0</span>, <span style=color:#099>2</span>)
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>while</span> <span style=color:#000;font-weight:700>True</span>:
</span></span><span style=display:flex><span>        line <span style=color:#000;font-weight:700>=</span> f<span style=color:#000;font-weight:700>.</span>readline()
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>if</span> line:
</span></span><span style=display:flex><span>            <span style=color:#0086b3>print</span>(line<span style=color:#000;font-weight:700>.</span>decode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>else</span>:
</span></span><span style=display:flex><span>            time<span style=color:#000;font-weight:700>.</span>sleep(<span style=color:#099>0.2</span>)
</span></span></code></pre></td></tr></table></div></div><p>练习编写文件<code>copy</code>工具</p><p>方法1</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>src_file<span style=color:#000;font-weight:700>=</span><span style=color:#0086b3>input</span>(<span style=color:#d14>&#39;源文件路径: &#39;</span>)<span style=color:#000;font-weight:700>.</span>strip()
</span></span><span style=display:flex><span>dst_file<span style=color:#000;font-weight:700>=</span><span style=color:#0086b3>input</span>(<span style=color:#d14>&#39;目标文件路径: &#39;</span>)<span style=color:#000;font-weight:700>.</span>strip()
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>r</span><span style=color:#d14>&#39;</span><span style=color:#d14>%s</span><span style=color:#d14>&#39;</span> <span style=color:#000;font-weight:700>%</span>src_file,mode<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;rb&#39;</span>) <span style=color:#000;font-weight:700>as</span> read_f,<span style=color:#0086b3>open</span>(<span style=color:#d14>r</span><span style=color:#d14>&#39;</span><span style=color:#d14>%s</span><span style=color:#d14>&#39;</span> <span style=color:#000;font-weight:700>%</span>dst_file,mode<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;wb&#39;</span>) <span style=color:#000;font-weight:700>as</span> write_f:
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>for</span> line <span style=color:#000;font-weight:700>in</span> read_f:
</span></span><span style=display:flex><span>        <span style=color:#998;font-style:italic># print(line)</span>
</span></span><span style=display:flex><span>        write_f<span style=color:#000;font-weight:700>.</span>write(line)
</span></span></code></pre></td></tr></table></div></div><p>方法2</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#998;font-style:italic>#任意文件拷贝</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>sys</span> <span style=color:#998;font-style:italic>#引入sys模块</span>
</span></span><span style=display:flex><span>_, src_file, dst_file <span style=color:#000;font-weight:700>=</span> sys<span style=color:#000;font-weight:700>.</span>argv <span style=color:#998;font-style:italic>#传参，_表示占位符。</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(src_file, <span style=color:#d14>&#39;rb&#39;</span>) <span style=color:#000;font-weight:700>as</span> read_f,\
</span></span><span style=display:flex><span>        <span style=color:#0086b3>open</span>(dst_file, <span style=color:#d14>&#39;wb&#39;</span>) <span style=color:#000;font-weight:700>as</span> write_f:
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>for</span> line <span style=color:#000;font-weight:700>in</span> read_f:
</span></span><span style=display:flex><span>        write_f<span style=color:#000;font-weight:700>.</span>write(line)
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#print(sys.argv)</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#使用方式 python D:\pccharmcode\begin.py 源文件路径 目的文件路径</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=文件的修改>文件的修改</h3><p>文件的数据是存放于硬盘上的，因而只存在覆盖、不存在修改这么一说，我们平时看到的修改文件，都是模拟出来的效果，具体的说有两种实现方式：</p><p>方式一：将硬盘存放的该文件的内容全部加载到内存，在内存中是可以修改的，修改完毕后，再由内存覆盖到硬盘（word，vim，nodpad++等编辑器）</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>os</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;a.txt&#39;</span>) <span style=color:#000;font-weight:700>as</span> read_f,<span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;.a.txt.swap&#39;</span>,<span style=color:#d14>&#39;w&#39;</span>) <span style=color:#000;font-weight:700>as</span> write_f:
</span></span><span style=display:flex><span>    data<span style=color:#000;font-weight:700>=</span>read_f<span style=color:#000;font-weight:700>.</span>read() <span style=color:#998;font-style:italic>#全部读入内存,如果文件很大,会很卡</span>
</span></span><span style=display:flex><span>    data<span style=color:#000;font-weight:700>=</span>data<span style=color:#000;font-weight:700>.</span>replace(<span style=color:#d14>&#39;alex&#39;</span>,<span style=color:#d14>&#39;SB&#39;</span>) <span style=color:#998;font-style:italic>#在内存中完成修改</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    write_f<span style=color:#000;font-weight:700>.</span>write(data) <span style=color:#998;font-style:italic>#一次性写入新文件</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>remove(<span style=color:#d14>&#39;a.txt&#39;</span>)
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>rename(<span style=color:#d14>&#39;.a.txt.swap&#39;</span>,<span style=color:#d14>&#39;a.txt&#39;</span>) 
</span></span></code></pre></td></tr></table></div></div><p>方式二：将硬盘存放的该文件的内容一行一行地读入内存，修改完毕就写入新文件，最后用新文件覆盖源文件</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>os</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>with</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;a.txt&#39;</span>) <span style=color:#000;font-weight:700>as</span> read_f,<span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;.a.txt.swap&#39;</span>,<span style=color:#d14>&#39;w&#39;</span>) <span style=color:#000;font-weight:700>as</span> write_f:
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>for</span> line <span style=color:#000;font-weight:700>in</span> read_f: <span style=color:#998;font-style:italic>#读</span>
</span></span><span style=display:flex><span>        line<span style=color:#000;font-weight:700>=</span>line<span style=color:#000;font-weight:700>.</span>replace(<span style=color:#d14>&#39;alex&#39;</span>,<span style=color:#d14>&#39;SB&#39;</span>) <span style=color:#998;font-style:italic>#替换</span>
</span></span><span style=display:flex><span>        write_f<span style=color:#000;font-weight:700>.</span>write(line)	<span style=color:#998;font-style:italic>#写入</span>
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>remove(<span style=color:#d14>&#39;a.txt&#39;</span>)
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>rename(<span style=color:#d14>&#39;.a.txt.swap&#39;</span>,<span style=color:#d14>&#39;a.txt&#39;</span>) 
</span></span></code></pre></td></tr></table></div></div><h3 id=文件的逐行读取并打印行号>文件的逐行读取并打印行号</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>f <span style=color:#000;font-weight:700>=</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>&#34;test.txt&#34;</span>,<span style=color:#d14>&#34;r&#34;</span>)
</span></span><span style=display:flex><span>content <span style=color:#000;font-weight:700>=</span> f<span style=color:#000;font-weight:700>.</span>readlines()
</span></span><span style=display:flex><span>i <span style=color:#000;font-weight:700>=</span> <span style=color:#099>1</span> 
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> temp <span style=color:#000;font-weight:700>in</span> content:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(<span style=color:#d14>&#34;</span><span style=color:#d14>%d</span><span style=color:#d14>:</span><span style=color:#d14>%s</span><span style=color:#d14>&#34;</span><span style=color:#000;font-weight:700>%</span>(i,temp))
</span></span><span style=display:flex><span>    i <span style=color:#000;font-weight:700>+=</span> <span style=color:#099>1</span>
</span></span></code></pre></td></tr></table></div></div><p>输出</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#099>1</span>:hello world<span style=color:#a61717;background-color:#e3d2d2>!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#099>2</span>:hello world<span style=color:#a61717;background-color:#e3d2d2>!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#099>3</span>:hello world<span style=color:#a61717;background-color:#e3d2d2>!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#099>4</span>:hello world<span style=color:#a61717;background-color:#e3d2d2>!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#099>5</span>:hello world<span style=color:#a61717;background-color:#e3d2d2>!</span>
</span></span></code></pre></td></tr></table></div></div></div></div></div><div id=footer><div class=container-footer><div class=beian><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="></a><a href target=_blank><span class=some>icp...<span></a></div><div class=info><a href=https://github.com/loveminimal/hugo-theme-virgo>🕊️</a> 2021 - <span id=info-date></span></div></div></div><div class=cool-after></div></body></html>