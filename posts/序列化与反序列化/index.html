<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>序列化与反序列化 - My New Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:title" content="序列化与反序列化"><meta property="og:description" content="什么是序列化？ 我们把对象（变量）从内存中变成可存储或传输的过程称之为序列化。在Python中叫pickling，在其他语言中也被称之为serialization，marshalling，flattening等等，都是一个意思。
为什么要序列化？ 持久保存状态
内存是无法永久保存数据的，当程序运行了一段时间，我们断电或者重启程序，内存中关于这个程序的之前一段时间的数据（有结构）都被清空了。在断电或重启程序之前将程序当前内存中所有的数据都保存下来（保存到文件中），以便于下次程序执行能够从文件中载入之前的数据，然后继续执行，这就是序列化。
跨平台数据交互
序列化之后，不仅可以把序列化后的内容写入磁盘，还可以通过网络传输到别的机器上，如果收发的双方约定好实用一种序列化的格式，那么便打破了平台/语言差异化带来的限制，实现了跨平台数据交互。 反过来，把变量内容从序列化的对象重新读到内存里称之为反序列化，即unpickling。
如何序列化之json和pickle json反序列化
如果我们要在不同的编程语言之间传递对象，就必须把对象序列化为标准格式，比如XML，但更好的方法是序列化为JSON，因为JSON表示出来就是一个字符串，可以被所有语言读取，也可以方便地存储到磁盘或者通过网络传输。JSON不仅是标准格式，并且比XML更快，而且可以直接在Web页面中读取，非常方便。 JSON表示的对象就是标准的JavaScript语言的对象，JSON和Python内置的数据类型对应如下：
json类型 python类型 {} dic [] list &ldquo;string&rdquo; str 1234.56 int或float true/false True/False null None 内存中结构化的数据->格式json->字符串->保存到文件中或基于网络传输
序列化
python->json
json.dumps() json.dump() 反序列化
json->python
json.loads() json.load() 练习 需求1
把user = {'name': 'jack', 'age': 20, 'sex': 'male'}序列化。保存为user_new.json
序列化
#1.使用dumps import json user = {'name': 'jack', 'age': 20, 'sex': 'male'} with open('user_new.json', 'w', encoding='utf-8') as f: f.write(json.dumps(user)) #结果 {&#34;name&#34;: &#34;jack&#34;, &#34;age&#34;: 20, &#34;sex&#34;: &#34;male&#34;} #2."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-26T13:44:37+00:00"><meta property="article:modified_time" content="2022-03-26T13:44:37+00:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="序列化与反序列化"><meta name=twitter:description content="什么是序列化？ 我们把对象（变量）从内存中变成可存储或传输的过程称之为序列化。在Python中叫pickling，在其他语言中也被称之为serialization，marshalling，flattening等等，都是一个意思。
为什么要序列化？ 持久保存状态
内存是无法永久保存数据的，当程序运行了一段时间，我们断电或者重启程序，内存中关于这个程序的之前一段时间的数据（有结构）都被清空了。在断电或重启程序之前将程序当前内存中所有的数据都保存下来（保存到文件中），以便于下次程序执行能够从文件中载入之前的数据，然后继续执行，这就是序列化。
跨平台数据交互
序列化之后，不仅可以把序列化后的内容写入磁盘，还可以通过网络传输到别的机器上，如果收发的双方约定好实用一种序列化的格式，那么便打破了平台/语言差异化带来的限制，实现了跨平台数据交互。 反过来，把变量内容从序列化的对象重新读到内存里称之为反序列化，即unpickling。
如何序列化之json和pickle json反序列化
如果我们要在不同的编程语言之间传递对象，就必须把对象序列化为标准格式，比如XML，但更好的方法是序列化为JSON，因为JSON表示出来就是一个字符串，可以被所有语言读取，也可以方便地存储到磁盘或者通过网络传输。JSON不仅是标准格式，并且比XML更快，而且可以直接在Web页面中读取，非常方便。 JSON表示的对象就是标准的JavaScript语言的对象，JSON和Python内置的数据类型对应如下：
json类型 python类型 {} dic [] list &ldquo;string&rdquo; str 1234.56 int或float true/false True/False null None 内存中结构化的数据->格式json->字符串->保存到文件中或基于网络传输
序列化
python->json
json.dumps() json.dump() 反序列化
json->python
json.loads() json.load() 练习 需求1
把user = {'name': 'jack', 'age': 20, 'sex': 'male'}序列化。保存为user_new.json
序列化
#1.使用dumps import json user = {'name': 'jack', 'age': 20, 'sex': 'male'} with open('user_new.json', 'w', encoding='utf-8') as f: f.write(json.dumps(user)) #结果 {&#34;name&#34;: &#34;jack&#34;, &#34;age&#34;: 20, &#34;sex&#34;: &#34;male&#34;} #2."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://example.org/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/><link rel=prev href=http://example.org/posts/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/><link rel=next href=http://example.org/posts/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"序列化与反序列化","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/example.org\/posts\/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96\/"},"genre":"posts","wordcount":200,"url":"http:\/\/example.org\/posts\/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96\/","datePublished":"2022-03-26T13:44:37+00:00","dateModified":"2022-03-26T13:44:37+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Author"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">序列化与反序列化</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-03-26>2022-03-26</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;200 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;One minute&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#什么是序列化>什么是序列化？</a></li><li><a href=#为什么要序列化>为什么要序列化？</a></li><li><a href=#如何序列化之json和pickle>如何序列化之<code>json</code>和<code>pickle</code></a><ul><li><a href=#练习>练习</a></li></ul></li><li><a href=#pickle反序列化>pickle反序列化</a></li><li><a href=#shelve模块>shelve模块</a></li></ul></nav></div></div><div class=content id=content><h2 id=什么是序列化>什么是序列化？</h2><p>我们把对象（变量）从内存中变成可存储或传输的过程称之为序列化。在<code>Python</code>中叫<code>pickling</code>，在其他语言中也被称之为<code>serialization</code>，<code>marshalling</code>，<code>flattening</code>等等，都是一个意思。</p><h2 id=为什么要序列化>为什么要序列化？</h2><p>持久保存状态</p><p>内存是无法永久保存数据的，当程序运行了一段时间，我们断电或者重启程序，内存中关于这个程序的之前一段时间的数据（有结构）都被清空了。在断电或重启程序之前将程序当前内存中所有的数据都保存下来（保存到文件中），以便于下次程序执行能够从文件中载入之前的数据，然后继续执行，这就是序列化。</p><p>跨平台数据交互</p><p>序列化之后，不仅可以把序列化后的内容写入磁盘，还可以通过网络传输到别的机器上，如果收发的双方约定好实用一种序列化的格式，那么便打破了平台/语言差异化带来的限制，实现了跨平台数据交互。
反过来，把变量内容从序列化的对象重新读到内存里称之为反序列化，即<code>unpickling</code>。</p><h2 id=如何序列化之json和pickle>如何序列化之<code>json</code>和<code>pickle</code></h2><p><code>json反序列化</code></p><p>如果我们要在不同的编程语言之间传递对象，就必须把对象序列化为标准格式，比如<code>XML</code>，但更好的方法是序列化为<code>JSON</code>，因为<code>JSON</code>表示出来就是一个字符串，可以被所有语言读取，也可以方便地存储到磁盘或者通过网络传输。<code>JSON</code>不仅是标准格式，并且比<code>XML</code>更快，而且可以直接在<code>Web页面</code>中读取，非常方便。
<code>JSON</code>表示的对象就是标准的<code>JavaScript语言</code>的对象，<code>JSON和Python</code>内置的数据类型对应如下：</p><table><thead><tr><th style=text-align:center>json类型</th><th style=text-align:center>python类型</th></tr></thead><tbody><tr><td style=text-align:center>{}</td><td style=text-align:center>dic</td></tr><tr><td style=text-align:center>[]</td><td style=text-align:center>list</td></tr><tr><td style=text-align:center>&ldquo;string&rdquo;</td><td style=text-align:center>str</td></tr><tr><td style=text-align:center>1234.56</td><td style=text-align:center>int或float</td></tr><tr><td style=text-align:center>true/false</td><td style=text-align:center>True/False</td></tr><tr><td style=text-align:center>null</td><td style=text-align:center>None</td></tr></tbody></table><p>内存中结构化的数据-><code>格式json</code>->字符串->保存到文件中或基于网络传输</p><p>序列化</p><p><code>python->json</code></p><pre tabindex=0><code>json.dumps()
json.dump()
</code></pre><p>反序列化</p><p><code>json->python</code></p><pre tabindex=0><code>json.loads()
json.load()
</code></pre><h3 id=练习>练习</h3><p>需求1</p><p>把<code>user = {'name': 'jack', 'age': 20, 'sex': 'male'}</code>序列化。保存为<code>user_new.json</code></p><p>序列化</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#1.使用dumps</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;jack&#39;</span>, <span style=color:#e6db74>&#39;age&#39;</span>: <span style=color:#ae81ff>20</span>, <span style=color:#e6db74>&#39;sex&#39;</span>: <span style=color:#e6db74>&#39;male&#39;</span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#39;user_new.json&#39;</span>, <span style=color:#e6db74>&#39;w&#39;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;utf-8&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>    f<span style=color:#f92672>.</span>write(json<span style=color:#f92672>.</span>dumps(user))
</span></span><span style=display:flex><span><span style=color:#75715e>#结果</span>
</span></span><span style=display:flex><span>{<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;jack&#34;</span>, <span style=color:#e6db74>&#34;age&#34;</span>: <span style=color:#ae81ff>20</span>, <span style=color:#e6db74>&#34;sex&#34;</span>: <span style=color:#e6db74>&#34;male&#34;</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#2.使用dump</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;jack&#39;</span>, <span style=color:#e6db74>&#39;age&#39;</span>: <span style=color:#ae81ff>20</span>, <span style=color:#e6db74>&#39;sex&#39;</span>: <span style=color:#e6db74>&#39;male&#39;</span>}
</span></span><span style=display:flex><span>json<span style=color:#f92672>.</span>dump(user, open(<span style=color:#e6db74>&#39;user_new.json&#39;</span>, <span style=color:#e6db74>&#39;w&#39;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>使用dumps和使用dump效果一样<span style=color:#960050;background-color:#1e0010>。</span>
</span></span></code></pre></div><p>需求2：
把刚刚序列化后的文件<code>user_new.json</code>反序列化，并查询key所对应的值。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#使用loads反序列化</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#39;user_new.json&#39;</span>, <span style=color:#e6db74>&#39;r&#39;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;utf-8&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>     user<span style=color:#f92672>=</span>json<span style=color:#f92672>.</span>loads(f<span style=color:#f92672>.</span>read())
</span></span><span style=display:flex><span>     print(user[<span style=color:#e6db74>&#39;name&#39;</span>])
</span></span><span style=display:flex><span><span style=color:#75715e>#结果：jack</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#使用load反序列化</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span>user<span style=color:#f92672>=</span>json<span style=color:#f92672>.</span>load(open(<span style=color:#e6db74>&#39;user_new.json&#39;</span>, <span style=color:#e6db74>&#39;r&#39;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>print(user[<span style=color:#e6db74>&#39;name&#39;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#结果：jack</span>
</span></span></code></pre></div><p>以上都是序列化和反序列化文件，自定义的字符串能不能进行序列化和反序列化？</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>s <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;{&#34;Name&#34;: &#34;jack&#34;, &#34;Hobby&#34;: &#34;play&#34;, &#34;age&#34;: 20}&#39;</span>
</span></span><span style=display:flex><span>print(json<span style=color:#f92672>.</span>loads(s))
</span></span><span style=display:flex><span><span style=color:#75715e>#结果 {&#39;Name&#39;: &#39;jack&#39;, &#39;Hobby&#39;: &#39;play&#39;, &#39;age&#39;: 20} </span>
</span></span></code></pre></div><p>注意</p><pre tabindex=0><code>import json
dct=&#34;{&#39;1&#39;:111}&#34;#json 不认单引号
dct=str({&#34;1&#34;:111})#报错,因为生成的数据还是单引号:{&#39;one&#39;: 1}
</code></pre><pre tabindex=0><code>dct=&#39;{&#34;1&#34;:&#34;111&#34;}&#39;
print(json.loads(dct))
</code></pre><p>总结</p><p>无论数据是怎样创建的，只要满足<code>json</code>格式，就可以<code>json.loads</code>出来,不一定非要<code>dumps</code>的数据才能<code>loads</code></p><h2 id=pickle反序列化>pickle反序列化</h2><p><code>json</code>并不是所有类型的数据都能序列化。比如集合类型，这时候需要使用<code>pickle模块</code>了。
<code>pickle</code>会把所有类型转换成<code>bytes类型</code>。
<code>Pickle</code>的问题和所有其他编程语言特有的序列化问题一样，就是它只能用于<code>Python</code>，并且可能不同版本的<code>Python</code>彼此都不兼容，因此，只能用<code>Pickle</code>保存那些不重要的数据，不能成功地反序列化也没关系。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>s<span style=color:#f92672>=</span>{<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>}
</span></span><span style=display:flex><span>print(pickle<span style=color:#f92672>.</span>dumps(s))
</span></span><span style=display:flex><span><span style=color:#75715e>#结果</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>b</span><span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\x80\x04\x95\x0f\x00\x00\x00\x00\x00\x00\x00\x8f\x94</span><span style=color:#e6db74>(K</span><span style=color:#ae81ff>\x01</span><span style=color:#e6db74>K</span><span style=color:#ae81ff>\x02</span><span style=color:#e6db74>K</span><span style=color:#ae81ff>\x03</span><span style=color:#e6db74>K</span><span style=color:#ae81ff>\x04</span><span style=color:#e6db74>K</span><span style=color:#ae81ff>\x05\x90</span><span style=color:#e6db74>.&#39;</span>
</span></span></code></pre></div><p>将集合存入文件再序列化</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pickle
</span></span><span style=display:flex><span>s <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>}
</span></span><span style=display:flex><span><span style=color:#75715e>#方式1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#39;s.plk&#39;</span>, <span style=color:#e6db74>&#39;wb&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>     f<span style=color:#f92672>.</span>write(pickle<span style=color:#f92672>.</span>dumps(s))
</span></span><span style=display:flex><span><span style=color:#75715e>#方式2</span>
</span></span><span style=display:flex><span>pickle<span style=color:#f92672>.</span>dump(s, open(<span style=color:#e6db74>&#39;s.plk&#39;</span>, <span style=color:#e6db74>&#39;wb&#39;</span>))
</span></span></code></pre></div><p>反序列化文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pickle
</span></span><span style=display:flex><span><span style=color:#75715e>#方式1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#39;s.plk&#39;</span>, <span style=color:#e6db74>&#39;rb&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>    s <span style=color:#f92672>=</span> pickle<span style=color:#f92672>.</span>loads(f<span style=color:#f92672>.</span>read())
</span></span><span style=display:flex><span>    print(s)
</span></span><span style=display:flex><span><span style=color:#75715e>#方式2</span>
</span></span><span style=display:flex><span>s <span style=color:#f92672>=</span> pickle<span style=color:#f92672>.</span>load(open(<span style=color:#e6db74>&#39;s.plk&#39;</span>, <span style=color:#e6db74>&#39;rb&#39;</span>))
</span></span><span style=display:flex><span>print(s)
</span></span></code></pre></div><h2 id=shelve模块>shelve模块</h2><p>shelve模块比pickle模块简单，只有一个open函数，返回类似字典的对象，可读可写;key必须为字符串，而值可以是python所支持的数据类型
打开一个文件的同时会创建3个同名文件。<code>.bak .dat .dir</code>结尾。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#创建</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> shelve
</span></span><span style=display:flex><span>f <span style=color:#f92672>=</span> shelve<span style=color:#f92672>.</span>open(<span style=color:#e6db74>&#39;db.sh1&#39;</span>)
</span></span><span style=display:flex><span>f[<span style=color:#e6db74>&#39;stu1&#39;</span>]<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#39;name&#39;</span>:<span style=color:#e6db74>&#39;jack&#39;</span>,<span style=color:#e6db74>&#39;age&#39;</span>:<span style=color:#ae81ff>20</span>}
</span></span><span style=display:flex><span>f<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#查询</span>
</span></span><span style=display:flex><span>print(f[<span style=color:#e6db74>&#39;stu1&#39;</span>][<span style=color:#e6db74>&#39;name&#39;</span>])
</span></span></code></pre></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-03-26</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=http://example.org/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/ data-title=序列化与反序列化><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=http://example.org/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=http://example.org/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/ data-title=序列化与反序列化><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=http://example.org/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/ data-title=序列化与反序列化><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=http://example.org/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/ data-title=序列化与反序列化><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/ class=prev rel=prev title=python常用模块><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>python常用模块</a>
<a href=/posts/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/ class=next rel=next title=类和对象>类和对象<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.115.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>