<!doctype html><html lang=zh-CN><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content="传统运维技术篇03 - https://www.haipengv.com/posts/%E4%BC%A0%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF%E7%AF%8703/"><meta name=author content="Smith - https://www.haipengv.com/"><meta name=msvalidate.01 content="B46311949B856F2A7015F366FB3CE878"><title>传统运维技术篇03</title><base target=_self><link rel=icon type=image/png href=/favicon.ico><link rel=stylesheet href=https://www.haipengv.com/style.min.9a0cea23154ac1941e15c25aa2d31b77285a217d2606ec05b55236428cf1c3e6.css><script>const DARK=!1</script><script type=text/javascript src=/main.js defer></script></head><body class=active-animate><div class=cool-before></div><div id=header><div class=container-header><div class=right><h1 class=title>传统运维技术篇03</h1><div id=toc>📜</div></div></div></div><div id=content><div class="container-main container-page"><div class=rel><div class=curtag-desc><a href=https://www.haipengv.com/tags/issue/><img src=/imgs/icons/tag.svg width=16> 相关文章：Issue <sup>18</sup></a></div><div class=curtag-post><div class=curtag-post-item><a href=https://www.haipengv.com/posts/crontab%E6%89%A7%E8%A1%8Cshell%E8%84%9A%E6%9C%AC%E6%8A%A5%E9%94%99/>Crontab执行shell脚本报错</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/dmesg%E6%97%B6%E9%97%B4%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/>Dmesg时间显示问题</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/idea2023%E6%9B%B4%E6%94%B9maven%E9%BB%98%E8%AE%A4%E4%BB%93%E5%BA%93%E6%BA%90/>Idea2023更改maven默认仓库源</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/idea%E5%A6%82%E4%BD%95%E5%9B%9E%E9%80%80%E5%88%B0%E4%B9%8B%E5%89%8D%E7%9A%84%E5%B7%A5%E7%A8%8B/>Idea如何回退到之前的工程</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/windows%E4%B8%8Bmysql%E5%92%8Cpython3%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/>Windows下mysql和python3安装过程</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/>Windows结束进程</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BC%A0%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF%E7%AF%8701/>传统运维技术篇01</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BC%A0%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF%E7%AF%8702/>传统运维技术篇02</a></div><div class="curtag-post-item curtag-post-item--active"><a href=https://www.haipengv.com/posts/%E4%BC%A0%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF%E7%AF%8703/>传统运维技术篇03</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BC%A0%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF%E7%AF%8704/>传统运维技术篇04</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BC%A0%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF%E7%AF%8705/>传统运维技术篇05</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BC%A0%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF%E7%AF%8706/>传统运维技术篇06</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BC%A0%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF%E7%AF%8707/>传统运维技术篇07</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/>常见问题总结</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%BF%AB%E9%80%9F%E5%88%A0%E9%99%A4%E5%A4%A7%E9%87%8F%E5%B0%8F%E6%96%87%E4%BB%B6-%E5%A4%9A%E7%A7%8D%E6%96%B9%E5%BC%8F%E9%80%9F%E5%BA%A6%E5%AF%B9%E6%AF%94/>快速删除大量小文件多种方式速度对比</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%94%B1%E4%BA%8Ekswapd0%E8%BF%9B%E7%A8%8B%E5%AF%BC%E8%87%B4%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8/>记一次由于kswapd0进程导致系统异常</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/>面试题整理</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E9%BB%91%E7%BE%A4%E6%99%96%E5%A4%96%E9%83%A8%E8%AE%BF%E9%97%AEfrp%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/>黑群晖外部访问frp搭建过程</a></div></div></div><div class=desc><span><svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667l-324.522666 324.48c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334L685.098667 499.2 524.885333 338.986667zM585.258667 278.656l160.170666 160.213333 102.144-102.144a19.712 19.712.0 000-27.861333l-132.48-132.437333a19.456 19.456.0 00-27.605333.0L585.258667 278.613333zM701.312 85.333333c27.946667.0 54.741333 11.136 74.282667 30.848L907.904 248.490667a105.045333 105.045333.0 010 148.565333L424.874667 879.957333C395.050667 914.304 352.768 935.424 304.426667 938.752H85.333333v-42.666667l.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666a104.789333 104.789333.0 0174.24-30.933334z" p-id="7410" fill="#adb5bd"/></svg>2025-03-19&nbsp;&nbsp;&nbsp;<svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859.0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775.0-360.398 149.372-360.398 356.147S305.225 870.23 512 870.23c206.775.0 357.467-151.455 357.467-358.23.0-23.859 23.634-50.706 53.413-50.706 29.78.0 49.92 26.847 49.92 50.706.0 254.493-206.307 460.8-460.8 460.8s-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4.0 226.684 33.296 312.264 117.369.358.351.358-24.052.0-73.209z" p-id="23839" fill="#adb5bd"/></svg>
2025-03-19&nbsp;&nbsp;&nbsp;</span>
<span><svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028c-70.774903.0-128.089859 57.325793-128.089859 128.03206v446.793671c0 70.7171050000001 57.314956 128.154884 128.089859 128.154884h133.353183a63.940169 63.940169.0 0155.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169.0 0155.212517-31.551041h133.54103c70.576219.0 127.732228-57.289669 127.732227-127.800865V192.391272c0-70.536482-57.181295-127.728615-127.786414-127.728615zM895.884854 639.842407A63.85347 63.85347.0 01832.092795 703.703103h-133.54103a127.753903 127.753903.0 00-110.349172 63.09847l-76.222461 129.856342a.274545.274545.0 010-.050574h-.032512s-.021675.061411-.032512.061412l-76.1466-129.85273a127.804477 127.804477.0 00-110.385297-63.11292H192.030028A64.207489 64.207489.0 01127.880338 639.488388V192.694717a64.102729 64.102729.0 0164.14969-64.091891h640.00858a63.799284 63.799284.0 0163.846246 63.788446v447.451135z" fill="#adb5bd" p-id="33867"/><path d="M608.154093 288.092004a31.970084 31.970084.0 00-31.970084 31.970085v160.078006L441.53396 300.861976a31.970084 31.970084.0 00-57.531702 19.200113v255.760676a31.970084 31.970084.0 0063.940169.0V415.863969l134.650048 179.274507a31.970084 31.970084.0 0057.531703-19.200113V320.062089a31.970084 31.970084.0 00-31.970085-31.970085z" fill="#adb5bd" p-id="33868"/></svg>3396 字</span>&nbsp;
<span><svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667zm0 810.666666C307.2 885.333333 138.666667 716.8 138.666667 512S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"/><path d="M695.466667 567.466667 544 497.066667V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666L669.866667 627.2c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8.0 23.466667-6.4 29.866666-19.2 6.4-14.933333.0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"/></svg>7 分钟</span><div class=container-ctgtag><div class=taxonomy><div class=tag><a href=/tags/issue>Issue</a></div></div></div></div><div class=toc><div class=container-page-operation><div class=page-operation><div><a href=/><img src=/imgs/icons/home-2.svg alt></a></div><div><a href=/nav><img src=/imgs/icons/iov-navigate-1.svg alt></a></div><div><a href=/wiki><img src=/imgs/icons/wiki.svg alt></a></div><div><a href=/tags><img src=/imgs/icons/treetags.svg alt></a></div><div id=light-dark><a><img src=/imgs/icons/moon2.svg alt></a></div><div><a href=#><img src=/imgs/icons/up2.svg alt></a></div></div></div><nav id=TableOfContents><ul><li><a href=#数据库篇>数据库篇</a></li><li><a href=#一数据库基本知识>一、数据库基本知识</a><ul><li><a href=#1-班级表>1. <strong>班级表</strong></a></li><li><a href=#2-学生表>2. <strong>学生表</strong></a></li><li><a href=#3-成绩表>3. <strong>成绩表</strong></a></li><li><a href=#4-科目表>4. <strong>科目表</strong></a></li><li><a href=#5-考试表>5. <strong>考试表</strong></a></li></ul></li><li><a href=#二数据库操作>二、数据库操作</a></li><li><a href=#三奇怪问题>三、奇怪问题</a></li></ul></nav></div><div class=content><h2 id=数据库篇>数据库篇</h2><h2 id=一数据库基本知识>一、数据库基本知识</h2><p>实体：客观存在的真实事物，人、物品都是。</p><p>属性：实体的某个特征，比如一个人的年龄是18</p><p>关系：实体与实体之间的联系，分为一对一、一对多、多对多</p><p>记录：表格中的一行</p><p>字段：表格中的一列</p><p>主键：能唯一标识表中的一行的列</p><p>外键：表中存放了其他表的主键</p><p>举例：</p><p><img src=/postimages/mariadb01-min.webp alt=mariadb01-min.webp></p><p>分析表中主键和外键。</p><h3 id=1-班级表>1. <strong>班级表</strong></h3><ul><li><p><strong>主键</strong>：<code>班级号</code>（每个班级号是唯一的，可以作为主键）</p></li><li><p><strong>外键</strong>：无外键，班级表独立。</p></li></ul><h3 id=2-学生表>2. <strong>学生表</strong></h3><ul><li><p><strong>主键</strong>：<code>学号</code>（每个学号是唯一的，适合用作主键）</p></li><li><p><strong>外键</strong>：<code>班级号</code>（外键，引用班级表中的<code>班级号</code>）</p></li></ul><h3 id=3-成绩表>3. <strong>成绩表</strong></h3><ul><li><p><strong>主键</strong>：可以是组合主键，包括<code>成绩号</code>（唯一标识成绩记录）或者由<code>学号</code>和<code>考试号</code>组成的组合主键。</p></li><li><p><strong>外键</strong>：</p><ul><li><p><code>学号</code>（外键，引用学生表中的<code>学号</code>）</p></li><li><p><code>考试号</code>（外键，引用考试表中的<code>考试号</code>）</p></li><li><p><code>科目号</code>（外键，引用科目表中的<code>科目号</code>）</p></li></ul></li></ul><h3 id=4-科目表>4. <strong>科目表</strong></h3><ul><li><p><strong>主键</strong>：<code>科目号</code>（每个科目号是唯一的，适合用作主键）</p></li><li><p><strong>外键</strong>：无外键，科目表独立。</p></li></ul><h3 id=5-考试表>5. <strong>考试表</strong></h3><ul><li><p><strong>主键</strong>：<code>考试号</code>（每个考试号是唯一的，适合用作主键）</p></li><li><p><strong>外键</strong>：无外键，考试表独立。</p></li></ul><p>总结：</p><ul><li><p><strong>班级表</strong>：有主键<code>班级号</code>，无外键。</p></li><li><p><strong>学生表</strong>：有主键<code>学号</code>，外键<code>班级号</code>。</p></li><li><p><strong>成绩表</strong>：主键<code>成绩号</code>（或组合主键），外键<code>学号</code>、<code>考试号</code>、<code>科目号</code>。</p></li><li><p><strong>科目表</strong>：有主键<code>科目号</code>，无外键。</p></li><li><p><strong>考试表</strong>：有主键<code>考试号</code>，无外键。</p></li></ul><p>事务：保证两个数据操作同时成功。</p><p><img src=/postimages/mariadb02-min.webp alt=mariadb02-min.webp></p><p>访问锁：</p><p><img src=/postimages/mariadb03-min.webp alt=mariadb03-min.webp></p><p>数据库原理：</p><p><img src=/postimages/mariadb04-min.webp alt=mariadb04-min.webp></p><p>数据类型：</p><p>存储引擎中myisam不支持事务，innoDB支持事务。开启事务会消耗大量资源，和钱相关的项目会开启，其他不用开启。</p><p><img src=/postimages/mariadb05-min.webp alt=mariadb05-min.webp></p><h2 id=二数据库操作>二、数据库操作</h2><p>基本命令如下：</p><p><img src=/postimages/mariadb07-min.webp alt=mariadb07-min.webp></p><p>按照上图创建数据库jxcdm，并设计表，表中插入数据。并且使用联合查询方式使结果按下图方式显示。</p><p><img src=/postimages/mariadb06-min.webp alt=mariadb06-min.webp></p><p>安装数据库：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yum install -y mariadb-server
</span></span><span style=display:flex><span>systemctl restart mariadb 
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#更改mysql密码</span>
</span></span><span style=display:flex><span>mysqladmin -uroot password <span style=color:#099>123456</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#进入数据库</span>
</span></span><span style=display:flex><span>mysql -uroot -p123456
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#创建库</span>
</span></span><span style=display:flex><span>MariaDB <span style=color:#000;font-weight:700>[(</span>none<span style=color:#000;font-weight:700>)]</span>&gt; create database jxcms;
</span></span><span style=display:flex><span>Query OK, <span style=color:#099>1</span> row affected <span style=color:#000;font-weight:700>(</span>0.000 sec<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># ctrl + d 退出数据库</span>
</span></span></code></pre></td></tr></table></div></div><p>构建sql语句：</p><p>vim jx_class.sql</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">79
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#998;font-style:italic>-- 注释
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic>-- 创建班级表
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>DROP</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>IF</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>EXISTS</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_class<span style=color:#000;font-weight:700>`</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_class<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span>(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span>AUTO_INCREMENT,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 班级号（自增长）
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>name<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>VARCHAR</span>(<span style=color:#099>20</span>)<span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>      </span><span style=color:#998;font-style:italic>-- 班级名
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>PRIMARY</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>KEY</span>(<span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span>)<span style=color:#bbb>		  </span><span style=color:#998;font-style:italic>-- id字段为主键
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span>)ENGINE<span style=color:#000;font-weight:700>=</span>InnoDB<span style=color:#bbb> </span><span style=color:#000;font-weight:700>DEFAULT</span><span style=color:#bbb> </span>CHARSET<span style=color:#000;font-weight:700>=</span>utf8<span style=color:#bbb> </span><span style=color:#000;font-weight:700>COLLATE</span><span style=color:#000;font-weight:700>=</span>utf8_unicode_ci;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 写入班级表数据
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_class<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;2211&#39;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_class<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;2210&#39;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 创建学生表
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>DROP</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>IF</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>EXISTS</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_stu<span style=color:#000;font-weight:700>`</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_stu<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span>(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span>AUTO_INCREMENT,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 学生号（自增长）
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>classId<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 班级号（自增长）
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>name<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>VARCHAR</span>(<span style=color:#099>20</span>)<span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>       </span><span style=color:#998;font-style:italic>-- 学生名
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>age<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 年龄
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>PRIMARY</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>KEY</span>(<span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span>)<span style=color:#bbb>                </span><span style=color:#998;font-style:italic>-- id字段为主键
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span>)ENGINE<span style=color:#000;font-weight:700>=</span>InnoDB<span style=color:#bbb> </span><span style=color:#000;font-weight:700>DEFAULT</span><span style=color:#bbb> </span>CHARSET<span style=color:#000;font-weight:700>=</span>utf8<span style=color:#bbb> </span><span style=color:#000;font-weight:700>COLLATE</span><span style=color:#000;font-weight:700>=</span>utf8_unicode_ci;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 写入学生表数据
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_stu<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;张三&#39;</span>,<span style=color:#bbb> </span><span style=color:#099>18</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_stu<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;李四&#39;</span>,<span style=color:#bbb> </span><span style=color:#099>19</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_stu<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>3</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;王五&#39;</span>,<span style=color:#bbb> </span><span style=color:#099>20</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_stu<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>4</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;马六&#39;</span>,<span style=color:#bbb> </span><span style=color:#099>21</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 创建考试表
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>DROP</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>IF</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>EXISTS</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_test<span style=color:#000;font-weight:700>`</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_test<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span>(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span>AUTO_INCREMENT,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 考试号（自增长）
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>name<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>VARCHAR</span>(<span style=color:#099>20</span>)<span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>      </span><span style=color:#998;font-style:italic>-- 考试名
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>PRIMARY</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>KEY</span>(<span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span>)<span style=color:#bbb>                </span><span style=color:#998;font-style:italic>-- id字段为主键
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span>)ENGINE<span style=color:#000;font-weight:700>=</span>InnoDB<span style=color:#bbb> </span><span style=color:#000;font-weight:700>DEFAULT</span><span style=color:#bbb> </span>CHARSET<span style=color:#000;font-weight:700>=</span>utf8<span style=color:#bbb> </span><span style=color:#000;font-weight:700>COLLATE</span><span style=color:#000;font-weight:700>=</span>utf8_unicode_ci;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 写入考试表数据
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_test<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;期中考试&#39;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_test<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;期末考试&#39;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 创建科目表
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>DROP</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>IF</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>EXISTS</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_subject<span style=color:#000;font-weight:700>`</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_subject<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span>(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span>AUTO_INCREMENT,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 科目号（自增长）
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>name<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>VARCHAR</span>(<span style=color:#099>20</span>)<span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>      </span><span style=color:#998;font-style:italic>-- 科目名
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>PRIMARY</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>KEY</span>(<span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span>)<span style=color:#bbb>                </span><span style=color:#998;font-style:italic>-- id字段为主键
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span>)ENGINE<span style=color:#000;font-weight:700>=</span>InnoDB<span style=color:#bbb> </span><span style=color:#000;font-weight:700>DEFAULT</span><span style=color:#bbb> </span>CHARSET<span style=color:#000;font-weight:700>=</span>utf8<span style=color:#bbb> </span><span style=color:#000;font-weight:700>COLLATE</span><span style=color:#000;font-weight:700>=</span>utf8_unicode_ci;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 写入科目表数据
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_subject<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;网工&#39;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_subject<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb> </span><span style=color:#d14>&#39;运维&#39;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 创建成绩表
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>DROP</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>IF</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>EXISTS</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>TABLE</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span>(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span>AUTO_INCREMENT,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 成绩号（自增长）
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>stuId<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 学生号
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>testId<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 考试号
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>subjectId<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>INT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 科目号
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#0086b3>FLOAT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>NULL</span>,<span style=color:#bbb>          </span><span style=color:#998;font-style:italic>-- 分数
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>PRIMARY</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>KEY</span>(<span style=color:#000;font-weight:700>`</span>id<span style=color:#000;font-weight:700>`</span>)<span style=color:#bbb>                </span><span style=color:#998;font-style:italic>-- id字段为主键
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span>)ENGINE<span style=color:#000;font-weight:700>=</span>InnoDB<span style=color:#bbb> </span><span style=color:#000;font-weight:700>DEFAULT</span><span style=color:#bbb> </span>CHARSET<span style=color:#000;font-weight:700>=</span>utf8<span style=color:#bbb> </span><span style=color:#000;font-weight:700>COLLATE</span><span style=color:#000;font-weight:700>=</span>utf8_unicode_ci;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#998;font-style:italic>-- 写入成绩表数据
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>90</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>80</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>3</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>85</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>4</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>84</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>5</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>78</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>6</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>88</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>7</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>89</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>8</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>94</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>9</span>,<span style=color:#bbb> </span><span style=color:#099>3</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>68</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>10</span>,<span style=color:#bbb> </span><span style=color:#099>3</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>78</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>11</span>,<span style=color:#bbb> </span><span style=color:#099>3</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>69</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>12</span>,<span style=color:#bbb> </span><span style=color:#099>3</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>64</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>13</span>,<span style=color:#bbb> </span><span style=color:#099>4</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>81</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>14</span>,<span style=color:#bbb> </span><span style=color:#099>4</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>77</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>15</span>,<span style=color:#bbb> </span><span style=color:#099>4</span>,<span style=color:#bbb> </span><span style=color:#099>1</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>59</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#000;font-weight:700>INSERT</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>INTO</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>`</span>jx_score<span style=color:#000;font-weight:700>`</span><span style=color:#bbb> </span><span style=color:#000;font-weight:700>VALUES</span>(<span style=color:#099>16</span>,<span style=color:#bbb> </span><span style=color:#099>4</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>2</span>,<span style=color:#bbb> </span><span style=color:#099>48</span>);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>将sql导入数据库，如果出现以下报错说明jx_class已存在。所以在创建表之前先判断表是否存在，如果存在则丢弃，再创建表(DROP TABLE IF EXISTS `jx_class`;)。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-ops-81 jx1206<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># mysql -uroot -p123456 jxcms &lt; jx_class.sql </span>
</span></span><span style=display:flex><span>ERROR <span style=color:#099>1050</span> <span style=color:#000;font-weight:700>(</span>42S01<span style=color:#000;font-weight:700>)</span> at line 3: Table <span style=color:#d14>&#39;jx_class&#39;</span> already exists
</span></span></code></pre></td></tr></table></div></div><p>然后导入表，所有数据都准备好了。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-ops-81 jx1206<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># mysql -uroot -p123456 jxcms &lt; jx_class.sql</span>
</span></span></code></pre></td></tr></table></div></div><p>进入到数据库中使用联合查询语句来将结果和图上匹配。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>MariaDB <span style=color:#000;font-weight:700>[(</span>none<span style=color:#000;font-weight:700>)]</span>&gt; use jxcms;
</span></span><span style=display:flex><span>Reading table information <span style=color:#000;font-weight:700>for</span> completion of table and column names
</span></span><span style=display:flex><span>You can turn off this feature to get a quicker startup with -A
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Database changed
</span></span><span style=display:flex><span>MariaDB <span style=color:#000;font-weight:700>[</span>jxcms<span style=color:#000;font-weight:700>]</span>&gt; <span style=color:#000;font-weight:700>select</span> jx_score.id, jx_class.name, jx_stu.name, jx_subject.name, jx_test.name, jx_score.score  from jx_score  join jx_stu on jx_score.stuId<span style=color:#000;font-weight:700>=</span>jx_stu.id  join jx_subject on jx_score.subjectID<span style=color:#000;font-weight:700>=</span>jx_subject.id  join jx_test on jx_score.testId<span style=color:#000;font-weight:700>=</span>jx_test.id join jx_class on jx_stu.classId<span style=color:#000;font-weight:700>=</span>jx_class.id;
</span></span><span style=display:flex><span>+----+------+--------+--------+--------------+-------+
</span></span><span style=display:flex><span>| id | name | name   | name   | name         | score |
</span></span><span style=display:flex><span>+----+------+--------+--------+--------------+-------+
</span></span><span style=display:flex><span>|  <span style=color:#099>1</span> | <span style=color:#099>2211</span> | 张三   | 网工   | 期中考试     |    <span style=color:#099>90</span> |
</span></span><span style=display:flex><span>|  <span style=color:#099>2</span> | <span style=color:#099>2211</span> | 张三   | 网工   | 期末考试     |    <span style=color:#099>80</span> |
</span></span><span style=display:flex><span>|  <span style=color:#099>3</span> | <span style=color:#099>2211</span> | 张三   | 运维   | 期中考试     |    <span style=color:#099>85</span> |
</span></span><span style=display:flex><span>|  <span style=color:#099>4</span> | <span style=color:#099>2211</span> | 张三   | 运维   | 期末考试     |    <span style=color:#099>84</span> |
</span></span><span style=display:flex><span>|  <span style=color:#099>5</span> | <span style=color:#099>2211</span> | 李四   | 网工   | 期中考试     |    <span style=color:#099>78</span> |
</span></span><span style=display:flex><span>|  <span style=color:#099>6</span> | <span style=color:#099>2211</span> | 李四   | 网工   | 期末考试     |    <span style=color:#099>88</span> |
</span></span><span style=display:flex><span>|  <span style=color:#099>7</span> | <span style=color:#099>2211</span> | 李四   | 运维   | 期中考试     |    <span style=color:#099>89</span> |
</span></span><span style=display:flex><span>|  <span style=color:#099>8</span> | <span style=color:#099>2211</span> | 李四   | 运维   | 期末考试     |    <span style=color:#099>94</span> |
</span></span><span style=display:flex><span>|  <span style=color:#099>9</span> | <span style=color:#099>2210</span> | 王五   | 网工   | 期中考试     |    <span style=color:#099>68</span> |
</span></span><span style=display:flex><span>| <span style=color:#099>10</span> | <span style=color:#099>2210</span> | 王五   | 网工   | 期末考试     |    <span style=color:#099>78</span> |
</span></span><span style=display:flex><span>| <span style=color:#099>11</span> | <span style=color:#099>2210</span> | 王五   | 运维   | 期中考试     |    <span style=color:#099>69</span> |
</span></span><span style=display:flex><span>| <span style=color:#099>12</span> | <span style=color:#099>2210</span> | 王五   | 运维   | 期末考试     |    <span style=color:#099>64</span> |
</span></span><span style=display:flex><span>| <span style=color:#099>13</span> | <span style=color:#099>2210</span> | 马六   | 网工   | 期中考试     |    <span style=color:#099>81</span> |
</span></span><span style=display:flex><span>| <span style=color:#099>14</span> | <span style=color:#099>2210</span> | 马六   | 网工   | 期末考试     |    <span style=color:#099>77</span> |
</span></span><span style=display:flex><span>| <span style=color:#099>15</span> | <span style=color:#099>2210</span> | 马六   | 运维   | 期中考试     |    <span style=color:#099>59</span> |
</span></span><span style=display:flex><span>| <span style=color:#099>16</span> | <span style=color:#099>2210</span> | 马六   | 运维   | 期末考试     |    <span style=color:#099>48</span> |
</span></span><span style=display:flex><span>+----+------+--------+--------+--------------+-------+
</span></span><span style=display:flex><span><span style=color:#099>16</span> rows in <span style=color:#0086b3>set</span> <span style=color:#000;font-weight:700>(</span>0.001 sec<span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=三奇怪问题>三、奇怪问题</h2><p>我们还使用jx1206项目内的war包作为应用。现在将代码上传到远程仓库（gitee上），然后在开发服务器上拉取仓库中最新代码，更改源码中a.sh文件，添加数据库查询相关命令。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># 开发服务器</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>cd</span> jx1206
</span></span><span style=display:flex><span>git pull --all
</span></span><span style=display:flex><span>vi /opt/jx1206/src/main/webapp/WEB-INF/cgi/a.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 网站脚本前面必须这样写</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;Content-Type:text/html&#34;</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#echo &#34;aaaaaaaaaaaaaaa&#34;</span>
</span></span><span style=display:flex><span>mysql -h10.10.10.81 -ujxadmin -p123456 jxcms -e <span style=color:#d14>&#34;select * from jx_stu&#34;</span> | grep -v id
</span></span></code></pre></td></tr></table></div></div><p>运维服务器数据库需要创建一个用户具有管理员功能，否则在开发服务器上访问时会报错：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grant all on *.* to <span style=color:#d14>&#34;jxadmin&#34;</span>@<span style=color:#d14>&#34;%&#34;</span> identified by <span style=color:#d14>&#34;123456&#34;</span>;
</span></span></code></pre></td></tr></table></div></div><p>进入到开发服务器上将源代码打包成war包上传到tomat的webapps中，重启java。先在开发服务器上测试：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-dev-71 cgi<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># curl 127.0.0.1/cgi-bin/a.sh</span>
</span></span><span style=display:flex><span>aaaaaaaaaaaaaaaaaaaaa
</span></span><span style=display:flex><span>1	1	??	<span style=color:#099>18</span>
</span></span><span style=display:flex><span>2	1	??	<span style=color:#099>19</span>
</span></span><span style=display:flex><span>3	2	??	<span style=color:#099>20</span>
</span></span><span style=display:flex><span>4	2	??	<span style=color:#099>21</span>
</span></span></code></pre></td></tr></table></div></div><p>发现中文字符是问号。</p><p>去运维服务器上测试也是问号。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-ops-81 cgi<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># curl 127.0.0.1/cgi-bin/a.sh</span>
</span></span><span style=display:flex><span>aaaaaaaaaaaaaaa
</span></span><span style=display:flex><span>1	1	??	<span style=color:#099>18</span>
</span></span><span style=display:flex><span>2	1	??	<span style=color:#099>19</span>
</span></span><span style=display:flex><span>3	2	??	<span style=color:#099>20</span>
</span></span><span style=display:flex><span>4	2	??	<span style=color:#099>21</span>
</span></span></code></pre></td></tr></table></div></div><p>单独执行sql语句显示正常。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-ops-81 cgi<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># mysql -h10.10.10.81 -ujxadmin -p123456 jxcms -e &#34;select * from jx_stu&#34; | grep -v id</span>
</span></span><span style=display:flex><span>1	1	张三	<span style=color:#099>18</span>
</span></span><span style=display:flex><span>2	1	李四	<span style=color:#099>19</span>
</span></span><span style=display:flex><span>3	2	王五	<span style=color:#099>20</span>
</span></span><span style=display:flex><span>4	2	马六	<span style=color:#099>21</span>
</span></span></code></pre></td></tr></table></div></div><p>在shell脚本里显示问号，在终端里显示正常。查看终端字符编码环境：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-ops-81 cgi<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># echo $LANG</span>
</span></span><span style=display:flex><span>en_US.UTF-8
</span></span></code></pre></td></tr></table></div></div><p>脚本中并没用使用编码环境，修改a.sh，添加编码环境。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-weight:700;font-style:italic>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 网站脚本前面必须这样写</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;Content-Type:text/html&#34;</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>export</span> <span style=color:teal>LANG</span><span style=color:#000;font-weight:700>=</span>en_US.UTF-8
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#echo &#34;aaaaaaaaaaaaaaa&#34;</span>
</span></span><span style=display:flex><span>mysql -h10.10.10.81 -ujxadmin -p123456 jxcms -e <span style=color:#d14>&#34;select * from jx_stu&#34;</span> | grep -v id
</span></span></code></pre></td></tr></table></div></div><p>现在在开发机上测试，显示正常。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-dev-71 cgi<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># curl 127.0.0.1/cgi-bin/a.sh</span>
</span></span><span style=display:flex><span>aaaaaaaaaaaaaaaaaaaaa
</span></span><span style=display:flex><span>1	1	张三	<span style=color:#099>18</span>
</span></span><span style=display:flex><span>2	1	李四	<span style=color:#099>19</span>
</span></span><span style=display:flex><span>3	2	王五	<span style=color:#099>20</span>
</span></span><span style=display:flex><span>4	2	马六	<span style=color:#099>21</span>
</span></span></code></pre></td></tr></table></div></div><p>应用需要从外部浏览器访问，我们之前做过映射，从笔记本访问127.0.0.1的7180端口流量会转到开发机的80端口。</p><p>我们从浏览器访问，又出现新问题，之前的问号变成了乱码。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>http://127.0.0.1:7180/cgi-bin/a.sh
</span></span><span style=display:flex><span>aaaaaaaaaaaaaaaaaaaaa <span style=color:#099>1</span> <span style=color:#099>1</span> 寮犱笁 <span style=color:#099>18</span> <span style=color:#099>2</span> <span style=color:#099>1</span> 鏉庡洓 <span style=color:#099>19</span> <span style=color:#099>3</span> <span style=color:#099>2</span> 鐜嬩簲 <span style=color:#099>20</span> <span style=color:#099>4</span> <span style=color:#099>2</span> 椹叚 <span style=color:#099>21</span>
</span></span></code></pre></td></tr></table></div></div><p>我们想一下整个业务访问过程。从浏览器访问127.0.0.1:7180/cgi-bin/a.sh首先需要经过虚拟机网关服务器nat网卡映射，然后到网关服务器的nat规则，然后走内核转发，最后到开发机的80业务口上。</p><p>最开始shell中没有添加export LANG=en_US.UTF-8 时，在开发服务器上抓到的包如下：</p><p><img src=/postimages/mysqlcapture01.webp alt=mysql抓包01-min.webp></p><p>分段排查，这里在开发服务器上抓业务口的3306。分析MySQL包的响应包。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># tcpdump -i enp0s3 -p port 3306   -vv -nn -w mysql.pcap</span>
</span></span></code></pre></td></tr></table></div></div><p>抓到之后我们分析一下：</p><p><img src=/postimages/mysqlcapture02.webp alt=mysql抓包02-min.webp></p><p>乱码那里对应的16进制编码转换成utf8后正确显示了中文。证明了运维服务器上mysql服务器发送给开发机mysql客户端的数据是正确的。</p><p>然后我们在排查下一段：开发服务器上返回给浏览器的包是否正确？</p><p>在开发服务器上抓80端口，由于是tcp协议，可以追踪TCP流，使用16进制显示，找到中文那里对应16进制编码，将该编码转换成utf8，结果确定是我们想要的中文。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tcpdump -i enp0s3 -p port <span style=color:#099>80</span>   -vv -nn -w mysql04.pcap
</span></span></code></pre></td></tr></table></div></div><p><img src=/postimages/mysqlcapture03.webp alt=mysql抓包03-min.webp></p><p>现在看来开发服务器上返回给浏览器的包也是正确的。那么问题到底出现在哪里了呢？我们在仔细查看shell脚本中的代码发现：我们只告诉了浏览器我们传送的是文本或者html，并没有说是中文。导致浏览器访问时都按照文本或者html方式处理所以中文显示乱码。</p><p>下面我们修改shell脚本，添加中文编码格式，使用浏览器再次访问测试，终于显示正常了。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;Content-Type:text/html;charset=utf8&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>http://127.0.0.1:7180/cgi-bin/a.sh
</span></span><span style=display:flex><span>aaaaaaaaaaaaaaaaaaaaa <span style=color:#099>1</span> <span style=color:#099>1</span> 张三 <span style=color:#099>18</span> <span style=color:#099>2</span> <span style=color:#099>1</span> 李四 <span style=color:#099>19</span> <span style=color:#099>3</span> <span style=color:#099>2</span> 王五 <span style=color:#099>20</span> <span style=color:#099>4</span> <span style=color:#099>2</span> 马六 <span style=color:#099>21</span>
</span></span></code></pre></td></tr></table></div></div><p>最终完整脚本如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#999;font-weight:700;font-style:italic>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 网站脚本前面必须这样写</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;Content-Type:text/html;charset=utf8&#34;</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>export</span> <span style=color:teal>LANG</span><span style=color:#000;font-weight:700>=</span>en_US.UTF-8
</span></span><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;aaaaaaaaaaaaaaaaaaaaa&#34;</span>
</span></span><span style=display:flex><span>mysql -h10.10.10.81 -ujxadmin -p123456 jxcms -e <span style=color:#d14>&#34;select * from jx_stu&#34;</span> | grep -v id
</span></span></code></pre></td></tr></table></div></div><p>mysql数据库可以使用一条命令将16进制编码转换成汉字，先登录mysql，然后输入以下命令：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>MariaDB <span style=color:#000;font-weight:700>[(</span>none<span style=color:#000;font-weight:700>)]</span>&gt; SELECT CONVERT<span style=color:#000;font-weight:700>(</span>UNHEX<span style=color:#000;font-weight:700>(</span><span style=color:#d14>&#39;e5bca0e4b889&#39;</span><span style=color:#000;font-weight:700>)</span> USING utf8<span style=color:#000;font-weight:700>)</span>;
</span></span><span style=display:flex><span>+-------------------------------------------+
</span></span><span style=display:flex><span>| CONVERT<span style=color:#000;font-weight:700>(</span>UNHEX<span style=color:#000;font-weight:700>(</span><span style=color:#d14>&#39;e5bca0e4b889&#39;</span><span style=color:#000;font-weight:700>)</span> USING utf8<span style=color:#000;font-weight:700>)</span> |
</span></span><span style=display:flex><span>+-------------------------------------------+
</span></span><span style=display:flex><span>| 张三                                      |
</span></span><span style=display:flex><span>+-------------------------------------------+
</span></span><span style=display:flex><span><span style=color:#099>1</span> row in <span style=color:#0086b3>set</span> <span style=color:#000;font-weight:700>(</span>0.001 sec<span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></td></tr></table></div></div><p>这里将`e5bca0e4b889`更改成你想要查询的16进制编码。</p></div></div></div><div id=footer><div class=container-footer><div class=beian><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="></a><a href target=_blank><span class=some>icp...<span></a></div><div class=info><a href=https://github.com/loveminimal/hugo-theme-virgo>🕊️</a> 2021 - <span id=info-date></span></div></div></div><div class=cool-after></div></body></html>