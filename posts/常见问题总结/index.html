<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>常见问题总结 - My New Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:title" content="常见问题总结"><meta property="og:description" content="描述Linux下软链接和硬链接的区别 实践：当前所在路径/root
准备工作
echo 123 > /tmpdisk/a.txt echo 123 > /tmpdisk/b.txt mkdir -p /tmpdisk/ylink mkdir -p /tmpdisk/rlink 分别创建软链接和硬链接
ln -s /tmpdisk/a.txt ra.txt ln /tmpdisk/b.txt yb.txt ln /tmpdisk/ylink ylink #创建失败，硬链接不允许文件夹创建。ln: '/tmpdisk/ylink': hard link not allowed for directory ln -s /tmpdisk/rlink rlink 查看inode节点
[root@43f873a76b81 ~]# ls -li total 8 84271555 -rw------- 1 root root 3302 May 31 2018 anaconda-ks.cfg 87108116 lrwxrwxrwx 1 root root 14 Mar 28 06:18 ra.txt -> /tmpdisk/a.txt 87108117 lrwxrwxrwx 1 root root 14 Mar 28 06:18 rlink -> /tmpdisk/rlink 1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 yb."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/posts/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-28T13:00:01+00:00"><meta property="article:modified_time" content="2022-03-28T13:00:01+00:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="常见问题总结"><meta name=twitter:description content="描述Linux下软链接和硬链接的区别 实践：当前所在路径/root
准备工作
echo 123 > /tmpdisk/a.txt echo 123 > /tmpdisk/b.txt mkdir -p /tmpdisk/ylink mkdir -p /tmpdisk/rlink 分别创建软链接和硬链接
ln -s /tmpdisk/a.txt ra.txt ln /tmpdisk/b.txt yb.txt ln /tmpdisk/ylink ylink #创建失败，硬链接不允许文件夹创建。ln: '/tmpdisk/ylink': hard link not allowed for directory ln -s /tmpdisk/rlink rlink 查看inode节点
[root@43f873a76b81 ~]# ls -li total 8 84271555 -rw------- 1 root root 3302 May 31 2018 anaconda-ks.cfg 87108116 lrwxrwxrwx 1 root root 14 Mar 28 06:18 ra.txt -> /tmpdisk/a.txt 87108117 lrwxrwxrwx 1 root root 14 Mar 28 06:18 rlink -> /tmpdisk/rlink 1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 yb."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://example.org/posts/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/><link rel=prev href=http://example.org/posts/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/><link rel=next href=http://example.org/posts/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"常见问题总结","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/example.org\/posts\/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93\/"},"genre":"posts","wordcount":600,"url":"http:\/\/example.org\/posts\/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93\/","datePublished":"2022-03-28T13:00:01+00:00","dateModified":"2022-03-28T13:00:01+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Author"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">常见问题总结</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-03-28>2022-03-28</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;600 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;3 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#描述linux下软链接和硬链接的区别>描述Linux下软链接和硬链接的区别</a></li><li><a href=#linux-如何查找具有相同-inode-号的文件>Linux 如何查找具有相同 <code>inode</code> 号的文件?</a><ul><li><a href=#通过-inode号查找>通过 <code>inode</code>号查找</a></li><li><a href=#通过文件名查找>通过文件名查找</a></li></ul></li><li><a href=#linux常见的系统日志文件都有哪些各自的用途>linux常见的系统日志文件都有哪些，各自的用途？</a></li><li><a href=#常见linux开机设置文件>常见Linux开机设置文件</a></li><li><a href=#请描述linux系统优化的12个步骤>请描述Linux系统优化的12个步骤</a></li><li><a href=#请给出查看当前哪些在线用户的linux命令>请给出查看当前哪些在线用户的Linux命令</a></li><li><a href=#输出重定向相关>输出重定向相关</a></li><li><a href=#sed常见用法><code>sed</code>常见用法</a></li><li><a href=#0dirname和basename有什么作用具体举个例子><code>$0</code>、<code>dirname</code>和、<code>basename</code>有什么作用？具体举个例子。</a></li><li><a href=#zsh文件><code>z.sh</code>文件</a></li><li><a href=#用nohup把一个脚本放后台运行>用<code>nohup</code>把一个脚本放后台运行</a></li><li><a href=#有1-9的数字echo输出1-9的数字时屏蔽0-5数字再输出>有<code>1-9</code>的数字，<code>echo</code>输出<code>1-9</code>的数字时，屏蔽<code>0-5</code>数字再输出</a></li><li><a href=#如何用wget和curl监控web是否正常>如何用<code>wget</code>和<code>curl</code>监控web是否正常</a></li></ul></nav></div></div><div class=content id=content><h2 id=描述linux下软链接和硬链接的区别>描述Linux下软链接和硬链接的区别</h2><p>实践：当前所在路径<code>/root</code></p><p>准备工作</p><pre tabindex=0><code>echo 123 &gt; /tmpdisk/a.txt
echo 123 &gt; /tmpdisk/b.txt
mkdir -p /tmpdisk/ylink
mkdir -p /tmpdisk/rlink
</code></pre><p>分别创建软链接和硬链接</p><pre tabindex=0><code>ln -s  /tmpdisk/a.txt ra.txt
ln   /tmpdisk/b.txt yb.txt
ln  /tmpdisk/ylink   ylink 
#创建失败，硬链接不允许文件夹创建。ln: &#39;/tmpdisk/ylink&#39;: hard link not allowed for directory
ln -s  /tmpdisk/rlink  rlink
</code></pre><p>查看inode节点</p><pre tabindex=0><code>[root@43f873a76b81 ~]# ls -li 
total 8
84271555 -rw------- 1 root root 3302 May 31  2018 anaconda-ks.cfg
87108116 lrwxrwxrwx 1 root root   14 Mar 28 06:18 ra.txt -&gt; /tmpdisk/a.txt
87108117 lrwxrwxrwx 1 root root   14 Mar 28 06:18 rlink -&gt; /tmpdisk/rlink
 1588983 -rw-r--r-- 2 root root    4 Mar 28 05:27 yb.txt
[root@43f873a76b81 ~]# ls -li /tmpdisk/
total 8
1588982 -rw-r--r-- 1 root root 4 Mar 28 05:26 a.txt
1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 b.txt
1588941 drwxr-xr-x 2 root root 6 Mar 28 06:13 rlink
1588940 drwxr-xr-x 2 root root 6 Mar 28 06:13 ylink
</code></pre><p>发现硬链接的原文件和链接文件<code>inode</code>一致。都为1588983。</p><p>软链接相当于<code>快捷方式</code></p><pre tabindex=0><code>ln -s 源文件路径 链接文件路径
链接文件路径--------&gt;源文件路径
</code></pre><p>总结：</p><p>默认不带参数的情况下，<code>ln</code>创建的是硬链接，带<code>-s</code>参数的<code>ln</code>命令创建的是软链接。</p><p>硬链接文件与源文件的<code>inode</code>节点号相同，软链接文件的<code>inode</code>节点号，与源文件不同。</p><p><code>ln</code>命令不能对目录创建硬链接，但可以创建软链接。对目录的软链接会经常使用到</p><p>删除软链接文件，对源文件和硬链接文件无 任何影响。</p><p>删除文件的硬链接文件，对源文件及软链接文件无任何影响。</p><p>删除链接文件的源文件，对硬链接文件无影响，会导致其软链接失效（红底白字闪烁）。</p><p>同时删除源文件及其硬链接文件，整个文件才会被真正的删除。</p><p>很多硬件设备的快照功能，使用的就是列斯硬链接的原理</p><p>软链接可以跨文件系统，硬链接不可以跨文件系统。</p><h2 id=linux-如何查找具有相同-inode-号的文件>Linux 如何查找具有相同 <code>inode</code> 号的文件?</h2><h3 id=通过-inode号查找>通过 <code>inode</code>号查找</h3><pre tabindex=0><code>find / -xdev -inum &lt;inode_num&gt; 2&gt;/dev/null
find -L / -xdev -inum &lt;inode_num&gt; 2&gt;/dev/null
</code></pre><h3 id=通过文件名查找>通过文件名查找</h3><pre tabindex=0><code>find / -xdev -samefile &lt;file_name&gt; 2&gt;/dev/null
find -L / -xdev -samefile &lt;file_name&gt; 2&gt;/dev/null
</code></pre><p>其中</p><pre tabindex=0><code>-xdev 表示不跨越文件系统查找
-L 表示考虑符号链接(软链接)
</code></pre><p>实例</p><p>查找源文件为<code>/tmpdisk/a.txt</code>的链接文件</p><pre tabindex=0><code>[root@43f873a76b81 ~]# find / -xdev -samefile /tmpdisk/b.txt 
/root/yb.txt
/tmpdisk/b.txt
[root@43f873a76b81 ~]# ll -i /root/yb.txt /tmpdisk/b.txt 
1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 /root/yb.txt
1588983 -rw-r--r-- 2 root root 4 Mar 28 05:27 /tmpdisk/b.txt
</code></pre><h2 id=linux常见的系统日志文件都有哪些各自的用途>linux常见的系统日志文件都有哪些，各自的用途？</h2><pre tabindex=0><code>/var/log/messages 内核及公共消息日志
/var/log/cron	计划任务日志
/var/log/dmesg	系统引导日志
/var/log/maillog	邮件系统日志
/var/log/secure	记录与访问限制相关日志
/var/log/yum.log 使用yum安装软件的日志
</code></pre><h2 id=常见linux开机设置文件>常见Linux开机设置文件</h2><pre tabindex=0><code>/etc/fstab 实现开机自动挂载
/etc/initab	定义开机进入默认级别的配置文件
/etc/rc.local 定义开机自定义任务的配置文件
</code></pre><h2 id=请描述linux系统优化的12个步骤>请描述Linux系统优化的12个步骤</h2><p>1.不用<code>root</code>直接登陆系统改用普通用户登录。</p><p>2.禁止ssh远程，可以更改默认远程连接ssh服务及禁止<code>root</code>远程连接。</p><pre tabindex=0><code>vi /etc/ssh/sshd_config
PermitRootLogin no
Port 22 #改为其他端口
重启sshd服务
systemctl restart sshd.service
</code></pre><p>3.时间同步：定时更新服务器时间</p><p>每天12点同步一次。</p><p><code>crontab -e</code></p><pre tabindex=0><code>0 12 * * * * /usr/sbin/ntpdate 192.168.0.1
</code></pre><pre tabindex=0><code>设置ntp开机启动并启动ntp
systemctl enable ntpd
systemctl start ntpd
</code></pre><p>定时任务验证</p><pre tabindex=0><code>https://crontab.guru/
</code></pre><p>4.关闭<code>selinux</code>及<code>iptables</code>(<code>iptables</code>工作场景如有wan ip,一般要打开，高并发除外)</p><p><code>iptables</code>是<code>firewalld</code>的子模块。</p><pre tabindex=0><code>systemctl stop firewalld.service 关闭服务
systemctl status firewalld.service 查看服务状态
systemctl disable firewalld.service 设置开机默认关闭防火墙
</code></pre><pre tabindex=0><code>永久关闭selinux
/etc/selinux/config
将SELINUX=enforcing 改为SELINUX=disabled
临时关闭
getenforce 获取状态
setenforce 0 关闭 #0关闭，1开启
</code></pre><p>5.配置<code>yum</code>更新源，从国内更新下载安装rpm包。</p><p>备份</p><pre tabindex=0><code>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
</code></pre><p>下载新的 <code>CentOS-Base.repo 到 /etc/yum.repos.d/</code></p><pre tabindex=0><code>wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
或者
curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
</code></pre><p>运行<code>yum makecache</code>生成缓存</p><pre tabindex=0><code>yum makecache
</code></pre><p>6.调整文件描述符的数量，进程及文件的打开都会消耗文件描述符。</p><p>内核（kernel）利用文件描述符（file descriptor）来访问文件。文件描述符是非负整数。打开现存文件或新建文件时，内核会返回一个文件描述符。读写文件也需要使用文件描述符来指定待读写的文件。通俗来讲，因为linux一切皆文件，所以占用文件描述符超过了系统或者用户要求的最大值，就无法再打开了，文件描述符主要是系统级和用户级。查看方式如下</p><pre tabindex=0><code>sysctl -a|grep fs.file-max 查看系统级文件描述符数量
ulimit -n 查看用户级文件描述符数量
</code></pre><p>用户级限制：<code>ulimit</code>命令看到的是用户级的最大文件描述符限制，也就是说每一个用户登录后执行的程序占用文件描述符的总数不能超过这个限制
系统级限制：<code>sysctl</code>命令与<code>proc</code>文件系统中查看到的数值是一样的，这属于系统级限制，它是限制所有用户打开文件描述符的总数.</p><p>修改用户级文件描述符(需要root权限或root用户)</p><pre tabindex=0><code>vi /etc/security/limits.conf。修改文件描述符，应该注意字段下是否存在nofile字段，如果存在直接修改，不存在在末尾添加保存即可。
* hard nofile 4096
* soft nofile 2048
</code></pre><p>修改系统级文件描述符(需要root权限或root用户)：</p><pre tabindex=0><code>vi /etc/sysctl.conf
</code></pre><p>找到<code>fs.file-max</code>，将<code>fs.file-max</code>值修改，保存即可。</p><pre tabindex=0><code>sysctl -p #加载内核参数使修改生效
</code></pre><p>7.定时自动清理<code>/var/spool/clientmquene/</code>目录垃圾文件，防止节点被占满（c6.4默认没有Sendmail，因此可以不配。）</p><p>8.精简开机启动服务(crond、sshd、network、rsyslog)</p><p>9.Linux内核参数优化<code>/etc/sysctl.conf</code>，执行<code>sysctl -P</code>生效。</p><p>10.更改字符集，支持中文，但是还是建议使用英文，防止乱码问题出现。linux默认编码为<code>utf-8</code></p><p>11.锁定关键系统文件</p><pre tabindex=0><code>chattr +i /etc/passwd /etc/shadow /etc/group /etc/gshadow /etc/inittab
</code></pre><p>处理以上内容后，把<code>chattr</code>改名，就更安全了。</p><p>12.清空<code>/etc/issue</code>去除系统及内核版本登录前的屏幕显示。</p><h2 id=请给出查看当前哪些在线用户的linux命令>请给出查看当前哪些在线用户的Linux命令</h2><pre tabindex=0><code>w #显示目前系统登录用户
who #显示目前已登陆用户信息
last #列出当前与过去登录系统的用户相关信息
lastlog #检查某特定用户上次登录时间
whoami #打印与当前生效的用户ID关联的用户名
finger #用户信息查找程序
id #显示指定用户或当前用户的用户信息与组信息
</code></pre><h2 id=输出重定向相关>输出重定向相关</h2><p><code>/dev/null</code>是特殊的字符设备文件，表示黑洞设备或空设备</p><pre tabindex=0><code>&gt;或者1&gt; #输出重定向：把前面输出的东西输入到后面的文件中，会删除文件原有内容。
&gt;&gt;或者1&gt;&gt; #追加重定向：把前面输出的东西追加到后边的文件中，不会删除文件原有内容。
&lt;或者&lt;0 #输入重定向：输入重定向用于改变命令的输入，指定输入内容那个，后跟文件名。
&lt;&lt;或者&lt;&lt;0 #输入重定向：后跟字符串，用来表示“输入结束”，也可以用ctrl+d来结束输入。
2&gt; #错误重定向：把错误信息输入到后边的文件中，会删除文件原有内容。
2&gt;&gt; #错误追加重定向：把错误信息追加到后边的文件中，不会删除文件原有内容。
</code></pre><pre tabindex=0><code>标准输入（stdin）: 0 使用 &lt;或者&lt;&lt;
标准输出（stdout）: 1 使用 &gt;或者&gt;&gt;。正常的输出
标准错误输出（stderr）:2 使用2&gt; 或者2&gt;&gt;
特殊：
2&gt;&amp;1 就是把标准错误重定向到标准输出（&gt;&amp;）
&gt;/dev/null 2&gt;&amp;1 等价于1&gt;/dev/null 2&gt;/dev/null
</code></pre><p>例如：找到文件，忽略错误输出结果。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>find / -name python3.6 2&gt;/dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/usr/bin/python3.6
</span></span><span style=display:flex><span>/usr/lib/python3.6
</span></span><span style=display:flex><span>/usr/lib64/python3.6
</span></span><span style=display:flex><span>/usr/local/lib/python3.6
</span></span><span style=display:flex><span>/usr/local/lib64/python3.6
</span></span></code></pre></div><h2 id=sed常见用法><code>sed</code>常见用法</h2><p>删除文件<code>ra.txt</code>的第2行内容。</p><pre tabindex=0><code>sed -i &#39;2d&#39; ra.txt
</code></pre><p>将文件<code>yb.txt</code>中的<code>5555</code>改为<code>8080</code></p><pre tabindex=0><code>sed -i &#39;s/5555/8080/g&#39; yb.txt
</code></pre><p>使用<code>-e</code>同时更改多个文件。</p><pre tabindex=0><code>sed -i -e &#39;s/6666/9999/g&#39; a.txt b.txt
</code></pre><h2 id=0dirname和basename有什么作用具体举个例子><code>$0</code>、<code>dirname</code>和、<code>basename</code>有什么作用？具体举个例子。</h2><h2 id=zsh文件><code>z.sh</code>文件</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>echo <span style=color:#e6db74>&#34;#############&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;# this is &#39;</span>$0<span style=color:#e6db74>&#39; test#&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;#############&#34;</span>
</span></span><span style=display:flex><span>echo $0
</span></span><span style=display:flex><span>echo 
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;###############&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;# this is &#39;dirname&#39; test#&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;############@@#&#34;</span>
</span></span><span style=display:flex><span>cd <span style=color:#e6db74>`</span>dirname $0<span style=color:#e6db74>`</span> <span style=color:#f92672>&amp;&amp;</span> pwd
</span></span><span style=display:flex><span>echo 
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;###############&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;# this is &#39;basename&#39; test#&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;####################&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>`</span>basename $0<span style=color:#e6db74>`</span>
</span></span></code></pre></div><p>执行结果</p><pre tabindex=0><code>#############
# this is &#39;z.sh&#39; test#
#############
z.sh

###############
# this is &#39;dirname&#39; test#
############@@#
/tmpdisk

###############
# this is &#39;basename&#39; test#
####################
z.sh
</code></pre><p>总结：</p><p><code>dirname</code>获取脚本路径名</p><p><code>basename</code>获取脚本名</p><p><code>$0</code>获取脚本名和脚本路径名</p><h2 id=用nohup把一个脚本放后台运行>用<code>nohup</code>把一个脚本放后台运行</h2><pre tabindex=0><code>nohup sh test.sh &gt; filename 2&gt;&amp;1 &amp;
</code></pre><h2 id=有1-9的数字echo输出1-9的数字时屏蔽0-5数字再输出>有<code>1-9</code>的数字，<code>echo</code>输出<code>1-9</code>的数字时，屏蔽<code>0-5</code>数字再输出</h2><pre tabindex=0><code>echo &#39;1234567890&#39; | sed &#39;s/[0-5]//g&#39;
</code></pre><h2 id=如何用wget和curl监控web是否正常>如何用<code>wget</code>和<code>curl</code>监控web是否正常</h2><p><code>wget</code> 常用命令参数</p><pre tabindex=0><code>--spider                             模拟爬虫的行为去访问网站，但不会下载网页
-q --quite                           安静的访问，禁止输出，类似-o /dev/null
-o --output-file=FILE                记录到输出文件
-T --timeout=SECONDS             	 访问网站的超时时间
-t -tries=NUMBER                     重试次数
</code></pre><p><code>curl </code>常用命令参数</p><pre tabindex=0><code>-I/--header　　　　　　　　　　          显示响应头信息
-m/--max-time&lt;seconds&gt;               访问超时时间
-o/--output&lt;file&gt;                    记录访问信息到文件
-s/--silent                          静默模式访问，不输出信息
-w/--write-output&lt;format&gt;            以固定格式输出，例如%{http_code},输出状态码
</code></pre><p><code>wget</code></p><pre tabindex=0><code>[root@43f873a76b81 tmpdisk]# wget -T 5 -q -t 2 --spider www.qq.com 
[root@43f873a76b81 tmpdisk]# echo $?
0
</code></pre><p><code>curl</code></p><pre tabindex=0><code>[root@43f873a76b81 tmpdisk]# curl -o /dev/null -s -w %{http_code} https://www.baidu.com
200
</code></pre></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-03-28</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=http://example.org/posts/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/ data-title=常见问题总结><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=http://example.org/posts/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=http://example.org/posts/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/ data-title=常见问题总结><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=http://example.org/posts/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/ data-title=常见问题总结><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=http://example.org/posts/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/ data-title=常见问题总结><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/ class=prev rel=prev title=类和对象><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>类和对象</a>
<a href=/posts/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/ class=next rel=next title=python文件处理>python文件处理<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.115.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>