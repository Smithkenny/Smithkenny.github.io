<!doctype html><html lang=zh-CN><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content="Python常用模块 - https://www.haipengv.com/posts/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"><meta name=author content="Smith - https://www.haipengv.com/"><meta name=msvalidate.01 content="B46311949B856F2A7015F366FB3CE878"><title>Python常用模块</title><base target=_self><link rel=icon type=image/png href=/favicon.ico><link rel=stylesheet href=https://www.haipengv.com/style.min.9a0cea23154ac1941e15c25aa2d31b77285a217d2606ec05b55236428cf1c3e6.css><script>const DARK=!1</script><script type=text/javascript src=/main.js defer></script></head><body class=active-animate><div class=cool-before></div><div id=header><div class=container-header><div class=right><h1 class=title>Python常用模块</h1><div id=toc>📜</div></div></div></div><div id=content><div class="container-main container-page"><div class=rel><div class=curtag-desc><a href=https://www.haipengv.com/tags/python/><img src=/imgs/icons/tag.svg width=16> 相关文章：Python <sup>31</sup></a></div><div class=curtag-post><div class=curtag-post-item><a href=https://www.haipengv.com/posts/jupyter%E6%9B%B4%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/>Jupyter更改登录密码</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/>Python回炉重造 函数</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/>Python回炉重造-元组</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/>Python回炉重造-列表</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E5%85%B8/>Python回炉重造-字典</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2/>Python回炉重造-字符串</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9B%86%E5%90%88/>Python回炉重造-集合</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/>Python回炉重造-面向对象编程入门</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%A4%9A%E7%BA%BF%E7%A8%8B/>Python多线程</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/>Python对象和数据结构基础</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E5%B0%81%E8%A3%85/>Python封装</a></div><div class="curtag-post-item curtag-post-item--active"><a href=https://www.haipengv.com/posts/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/>Python常用模块</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/>Python数据结构总结</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/>Python文件处理</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E6%96%B9%E6%B3%95%E5%92%8C%E5%87%BD%E6%95%B0/>Python方法和函数</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/>Python自动化办公</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC%E4%B9%8Bexcel/>Python自动化办公之excel</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/python%E8%AF%AD%E6%B3%95/>Python语法</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/sqlite3%E4%BD%BF%E7%94%A8/>Sqlite3使用</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/>Urllib库的基本使用</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BD%BF%E7%94%A8python%E5%AE%9E%E7%8E%B0unix%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2/>使用python实现unix时间戳转换</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%9F%BA%E4%BA%8Etcp%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E6%8E%A5%E5%AD%97%E9%80%9A%E4%BF%A1/>基于TCP的简单套接字通信</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%AE%89%E8%A3%85%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACpython/>安装任意版本Python</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/>序列化与反序列化</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%BC%82%E5%B8%B8/>异常</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/>模块与包</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E7%94%9F%E6%88%90%E5%99%A8-%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1-%E8%BF%AD%E4%BB%A3%E5%99%A8-%E8%BF%AD%E4%BB%A3/>生成器 可迭代对象 迭代器 迭代</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/>类和对象</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E8%B1%86%E7%93%A3%E5%B1%95%E7%A4%BA%E9%A1%B5/>豆瓣展示页</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/>豆瓣电影爬虫</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7/>集合的相关特性</a></div></div></div><div class=desc><span><svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667l-324.522666 324.48c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334L685.098667 499.2 524.885333 338.986667zM585.258667 278.656l160.170666 160.213333 102.144-102.144a19.712 19.712.0 000-27.861333l-132.48-132.437333a19.456 19.456.0 00-27.605333.0L585.258667 278.613333zM701.312 85.333333c27.946667.0 54.741333 11.136 74.282667 30.848L907.904 248.490667a105.045333 105.045333.0 010 148.565333L424.874667 879.957333C395.050667 914.304 352.768 935.424 304.426667 938.752H85.333333v-42.666667l.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666a104.789333 104.789333.0 0174.24-30.933334z" p-id="7410" fill="#adb5bd"/></svg>2025-03-16&nbsp;&nbsp;&nbsp;<svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859.0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775.0-360.398 149.372-360.398 356.147S305.225 870.23 512 870.23c206.775.0 357.467-151.455 357.467-358.23.0-23.859 23.634-50.706 53.413-50.706 29.78.0 49.92 26.847 49.92 50.706.0 254.493-206.307 460.8-460.8 460.8s-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4.0 226.684 33.296 312.264 117.369.358.351.358-24.052.0-73.209z" p-id="23839" fill="#adb5bd"/></svg>
2025-03-16&nbsp;&nbsp;&nbsp;</span>
<span><svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028c-70.774903.0-128.089859 57.325793-128.089859 128.03206v446.793671c0 70.7171050000001 57.314956 128.154884 128.089859 128.154884h133.353183a63.940169 63.940169.0 0155.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169.0 0155.212517-31.551041h133.54103c70.576219.0 127.732228-57.289669 127.732227-127.800865V192.391272c0-70.536482-57.181295-127.728615-127.786414-127.728615zM895.884854 639.842407A63.85347 63.85347.0 01832.092795 703.703103h-133.54103a127.753903 127.753903.0 00-110.349172 63.09847l-76.222461 129.856342a.274545.274545.0 010-.050574h-.032512s-.021675.061411-.032512.061412l-76.1466-129.85273a127.804477 127.804477.0 00-110.385297-63.11292H192.030028A64.207489 64.207489.0 01127.880338 639.488388V192.694717a64.102729 64.102729.0 0164.14969-64.091891h640.00858a63.799284 63.799284.0 0163.846246 63.788446v447.451135z" fill="#adb5bd" p-id="33867"/><path d="M608.154093 288.092004a31.970084 31.970084.0 00-31.970084 31.970085v160.078006L441.53396 300.861976a31.970084 31.970084.0 00-57.531702 19.200113v255.760676a31.970084 31.970084.0 0063.940169.0V415.863969l134.650048 179.274507a31.970084 31.970084.0 0057.531703-19.200113V320.062089a31.970084 31.970084.0 00-31.970085-31.970085z" fill="#adb5bd" p-id="33868"/></svg>11382 字</span>&nbsp;
<span><svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667zm0 810.666666C307.2 885.333333 138.666667 716.8 138.666667 512S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"/><path d="M695.466667 567.466667 544 497.066667V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666L669.866667 627.2c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8.0 23.466667-6.4 29.866666-19.2 6.4-14.933333.0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"/></svg>23 分钟</span><div class=container-ctgtag><div class=taxonomy><div class=tag><a href=/tags/python>Python</a></div></div></div></div><div class=toc><div class=container-page-operation><div class=page-operation><div><a href=/><img src=/imgs/icons/home-2.svg alt></a></div><div><a href=/nav><img src=/imgs/icons/iov-navigate-1.svg alt></a></div><div><a href=/wiki><img src=/imgs/icons/wiki.svg alt></a></div><div><a href=/tags><img src=/imgs/icons/treetags.svg alt></a></div><div id=light-dark><a><img src=/imgs/icons/moon2.svg alt></a></div><div><a href=#><img src=/imgs/icons/up2.svg alt></a></div></div></div><nav id=TableOfContents><ul><li><a href=#日志模块角色>日志模块角色</a></li><li><a href=#日志模块相关说明>日志模块相关说明</a><ul><li><a href=#format参数中可能用到的格式化串>format参数中可能用到的格式化串</a></li></ul></li><li><a href=#日志打印实现过程>日志打印实现过程</a></li><li><a href=#日志的继承关系了解>日志的继承关系（了解）</a></li><li><a href=#日志模块应用>日志模块应用</a><ul><li><a href=#整体项目结构>整体项目结构</a></li><li><a href=#每个目录简单介绍>每个目录简单介绍</a></li><li><a href=#相关源码>相关源码</a></li></ul></li><li><a href=#re模块-正则表达式>re模块-正则表达式</a><ul><li><a href=#什么是正则>什么是正则？</a></li><li><a href=#常用匹配模式元字符>常用匹配模式(元字符)</a></li><li><a href=#re模块的其他用法>re模块的其他用法</a></li></ul></li><li><a href=#时间模块>时间模块</a></li><li><a href=#random模块>random模块</a></li><li><a href=#os模块>os模块</a></li><li><a href=#sys模块>sys模块</a></li><li><a href=#shutil模块>shutil模块</a></li><li><a href=#xml模块>xml模块</a><ul><li><a href=#遍历文档>遍历文档</a></li><li><a href=#修改>修改</a></li><li><a href=#删除>删除</a></li></ul></li><li><a href=#configerparser模块>configerparser模块</a></li><li><a href=#hashlib模块>hashlib模块</a><ul><li><a href=#什么叫hash>什么叫hash?</a></li><li><a href=#hash值的特点>hash值的特点</a></li></ul></li><li><a href=#subprocess模块>subprocess模块</a><ul><li><a href=#全局代码>全局代码</a></li><li><a href=#tag-标签及其内容>Tag 标签及其内容</a></li><li><a href=#文档的搜索>文档的搜索</a></li></ul></li><li><a href=#正则表达式与re库>正则表达式与Re库</a><ul><li><a href=#正则表达式常用操作符1>正则表达式常用操作符（1）</a></li><li><a href=#正则表达式常用操作符2>正则表达式常用操作符（2）</a></li><li><a href=#re库主要功能函数>Re库主要功能函数</a></li></ul></li></ul></nav></div><div class=content><h2 id=日志模块角色>日志模块角色</h2><p>1.<code>Logger</code>:产生日志
2.<code>Filter</code>:几乎不用
3.<code>Handler</code>: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件
4.<code>Formatter</code>：日志格式</p><h2 id=日志模块相关说明>日志模块相关说明</h2><p>可在<code>logging.basicConfig()</code>函数中可通过具体参数来更改<code>logging</code>模块默认行为，可用参数有.
<code>filename</code>：用指定的文件名创建<code>FiledHandler</code>，这样日志会被存储在指定的文件中。
<code>filemode</code>：文件打开方式，在指定了<code>filename</code>时使用这个参数，默认值为“a”还可指定为“w”。
<code>format</code>：指定<code>handler</code>使用的日志显示格式。
<code>datefmt</code>：指定日期时间格式。
<code>level</code>：设置<code>rootlogger</code>的日志级别
<code>stream</code>：用指定的<code>stream</code>创建<code>StreamHandler</code>。可以指定输出到<code>sys.stderr,sys.stdout</code>或者文件，默认为<code>sys.stderr</code>。若同时列出了<code>filename</code>和<code>stream</code>两个参数，则<code>stream</code>参数会被忽略。</p><h3 id=format参数中可能用到的格式化串>format参数中可能用到的格式化串</h3><pre tabindex=0><code>%(name)s Logger的名字
%(levelno)s 数字形式的日志级别
%(levelname)s 文本形式的日志级别
%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有
%(filename)s 调用日志输出函数的模块的文件名
%(module)s 调用日志输出函数的模块名
%(funcName)s 调用日志输出函数的函数名
%(lineno)d 调用日志输出函数的语句所在的代码行
%(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示
%(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数
%(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒
%(thread)d 线程ID。可能没有
%(threadName)s 线程名。可能没有
%(process)d 进程ID。可能没有
%(message)s用户输出的消息
</code></pre><h2 id=日志打印实现过程>日志打印实现过程</h2><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>logging</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#1.Logger:产生日志</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>getLogger(<span style=color:#d14>&#39;访问日志&#39;</span>) 
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#2.Handler: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件</span>
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>StreamHandler() <span style=color:#998;font-style:italic>#打印到终端</span>
</span></span><span style=display:flex><span>fh1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>FileHandler(<span style=color:#d14>&#39;s1.log&#39;</span>, encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>) <span style=color:#998;font-style:italic>#打印到文件</span>
</span></span><span style=display:flex><span>fh2<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>FileHandler(<span style=color:#d14>&#39;s2.log&#39;</span>, encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#3.Formatter：日志格式</span>
</span></span><span style=display:flex><span>formatter1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>Formatter(
</span></span><span style=display:flex><span>    fmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14> - </span><span style=color:#d14>%(name)s</span><span style=color:#d14> - </span><span style=color:#d14>%(levelname)s</span><span style=color:#d14> - </span><span style=color:#d14>%(module)s</span><span style=color:#d14>: </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>,
</span></span><span style=display:flex><span>    datefmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S %p&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>formatter2<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>Formatter(
</span></span><span style=display:flex><span>    fmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14> : </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>,
</span></span><span style=display:flex><span>    datefmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S %p&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>formatter3<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>Formatter(
</span></span><span style=display:flex><span>    fmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14> : </span><span style=color:#d14>%(module)s</span><span style=color:#d14> : </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>,
</span></span><span style=display:flex><span>    datefmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S %p&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#4.为Handler绑定日志格式</span>
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>.</span>setFormatter(formatter1)
</span></span><span style=display:flex><span>fh1<span style=color:#000;font-weight:700>.</span>setFormatter(formatter2)
</span></span><span style=display:flex><span>fh2<span style=color:#000;font-weight:700>.</span>setFormatter(formatter3)
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#5.为logger 绑定handler</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>addHandler(sh)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>addHandler(fh1)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>addHandler(fh2)
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#6.设置日志级别:logger 对象的日志级别应该&lt;=handler的日志级别</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#logger1.setLevel(30)</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>fh1<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>fh2<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#7.测试</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>debug(<span style=color:#d14>&#39;测试者玩&#39;</span>)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>info(<span style=color:#d14>&#39;运行还算正常&#39;</span>)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>warning(<span style=color:#d14>&#39;可能要有bug了&#39;</span>)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>error(<span style=color:#d14>&#39;不好了，真出bug了&#39;</span>)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>critical(<span style=color:#d14>&#39;推到重写&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>去注释版</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>logging</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>getLogger(<span style=color:#d14>&#39;访问日志&#39;</span>) 
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>StreamHandler()
</span></span><span style=display:flex><span>fh1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>FileHandler(<span style=color:#d14>&#39;s1.log&#39;</span>, encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>) 
</span></span><span style=display:flex><span>fh2<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>FileHandler(<span style=color:#d14>&#39;s2.log&#39;</span>, encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span>formatter1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>Formatter(
</span></span><span style=display:flex><span>    fmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14> - </span><span style=color:#d14>%(name)s</span><span style=color:#d14> - </span><span style=color:#d14>%(levelname)s</span><span style=color:#d14> - </span><span style=color:#d14>%(module)s</span><span style=color:#d14>: </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>,
</span></span><span style=display:flex><span>    datefmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S %p&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>formatter2<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>Formatter(
</span></span><span style=display:flex><span>    fmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14> : </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>,
</span></span><span style=display:flex><span>    datefmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S %p&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>formatter3<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>Formatter(
</span></span><span style=display:flex><span>    fmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14> : </span><span style=color:#d14>%(module)s</span><span style=color:#d14> : </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>,
</span></span><span style=display:flex><span>    datefmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S %p&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>.</span>setFormatter(formatter1)
</span></span><span style=display:flex><span>fh1<span style=color:#000;font-weight:700>.</span>setFormatter(formatter2)
</span></span><span style=display:flex><span>fh2<span style=color:#000;font-weight:700>.</span>setFormatter(formatter3)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>addHandler(sh)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>addHandler(fh1)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>addHandler(fh2)
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#logger1.setLevel(30)</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>fh1<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>fh2<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span></code></pre></td></tr></table></div></div><p>测试</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>debug(<span style=color:#d14>&#39;测试者玩&#39;</span>)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>info(<span style=color:#d14>&#39;运行还算正常&#39;</span>)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>warning(<span style=color:#d14>&#39;可能要有bug了&#39;</span>)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>error(<span style=color:#d14>&#39;不好了，真出bug了&#39;</span>)
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>critical(<span style=color:#d14>&#39;推到重写&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>结果：</p><p><code>s1.log</code></p><pre tabindex=0><code>2022-03-22 20:26:58 PM : 测试者玩
2022-03-22 20:26:58 PM : 运行还算正常
2022-03-22 20:26:58 PM : 可能要有bug了
2022-03-22 20:26:58 PM : 不好了，真出bug了
2022-03-22 20:26:58 PM : 推到重写
</code></pre><p><code>s2.log</code></p><pre tabindex=0><code>2022-03-22 20:26:58 PM : my_logging : 测试者玩
2022-03-22 20:26:58 PM : my_logging : 运行还算正常
2022-03-22 20:26:58 PM : my_logging : 可能要有bug了
2022-03-22 20:26:58 PM : my_logging : 不好了，真出bug了
2022-03-22 20:26:58 PM : my_logging : 推到重写
</code></pre><p>终端</p><pre tabindex=0><code>2022-03-26 11:32:48 AM - 访问日志 - INFO - my_logging: 运行还算正常
2022-03-26 11:32:48 AM - 访问日志 - WARNING - my_logging: 可能要有bug了
2022-03-26 11:32:48 AM - 访问日志 - ERROR - my_logging: 不好了，真出bug了
2022-03-26 11:32:48 AM - 访问日志 - CRITICAL - my_logging: 推到重写
</code></pre><h2 id=日志的继承关系了解>日志的继承关系（了解）</h2><p>练习</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>logging</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#1.Logger:产生日志</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>getLogger(<span style=color:#d14>&#39;root&#39;</span>)
</span></span><span style=display:flex><span>logger2<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>getLogger(<span style=color:#d14>&#39;root.child1&#39;</span>)
</span></span><span style=display:flex><span>logger3<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>getLogger(<span style=color:#d14>&#39;root.child1.child2&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#2.Handler: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件</span>
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>StreamHandler() <span style=color:#998;font-style:italic>#打印到终端</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#3.Formatter：日志格式</span>
</span></span><span style=display:flex><span>formatter1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>Formatter(
</span></span><span style=display:flex><span>    fmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14> - </span><span style=color:#d14>%(name)s</span><span style=color:#d14> - </span><span style=color:#d14>%(levelname)s</span><span style=color:#d14> - </span><span style=color:#d14>%(module)s</span><span style=color:#d14>: </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>,
</span></span><span style=display:flex><span>    datefmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S %p&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#4.为Handler绑定日志格式</span>
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>.</span>setFormatter(formatter1)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#5.为logger 绑定handler</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>addHandler(sh)
</span></span><span style=display:flex><span>logger2<span style=color:#000;font-weight:700>.</span>addHandler(sh)
</span></span><span style=display:flex><span>logger3<span style=color:#000;font-weight:700>.</span>addHandler(sh)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#6.设置日志级别:logger 对象的日志级别应该&lt;=handler的日志级别</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#logger1.setLevel(30)</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>logger2<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>logger3<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#7.测试</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>debug(<span style=color:#d14>&#39;爷爷&#39;</span>)
</span></span><span style=display:flex><span>logger2<span style=color:#000;font-weight:700>.</span>debug(<span style=color:#d14>&#39;爸爸&#39;</span>)
</span></span><span style=display:flex><span>logger3<span style=color:#000;font-weight:700>.</span>debug(<span style=color:#d14>&#39;孙子&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>结果</p><pre tabindex=0><code>2022-03-22 21:00:30 PM - root - DEBUG - my_logging_child: 爷爷
2022-03-22 21:00:30 PM - root.child1 - DEBUG - my_logging_child: 爸爸
2022-03-22 21:00:30 PM - root.child1 - DEBUG - my_logging_child: 爸爸
2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: 孙子
2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: 孙子
2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: 孙子
</code></pre><p>去注释版</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>logging</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>getLogger(<span style=color:#d14>&#39;root&#39;</span>)
</span></span><span style=display:flex><span>logger2<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>getLogger(<span style=color:#d14>&#39;root.child1&#39;</span>)
</span></span><span style=display:flex><span>logger3<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>getLogger(<span style=color:#d14>&#39;root.child1.child2&#39;</span>)
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>StreamHandler()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>formatter1<span style=color:#000;font-weight:700>=</span>logging<span style=color:#000;font-weight:700>.</span>Formatter(
</span></span><span style=display:flex><span>    fmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14> - </span><span style=color:#d14>%(name)s</span><span style=color:#d14> - </span><span style=color:#d14>%(levelname)s</span><span style=color:#d14> - </span><span style=color:#d14>%(module)s</span><span style=color:#d14>: </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>,
</span></span><span style=display:flex><span>    datefmt<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S %p&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>.</span>setFormatter(formatter1)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>addHandler(sh)
</span></span><span style=display:flex><span>logger2<span style=color:#000;font-weight:700>.</span>addHandler(sh)
</span></span><span style=display:flex><span>logger3<span style=color:#000;font-weight:700>.</span>addHandler(sh)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#logger1.setLevel(30)</span>
</span></span><span style=display:flex><span>logger1<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>logger2<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>logger3<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span><span style=display:flex><span>sh<span style=color:#000;font-weight:700>.</span>setLevel(<span style=color:#099>10</span>)
</span></span></code></pre></td></tr></table></div></div><p>测试</p><pre tabindex=0><code>logger1.debug(&#39;爷爷&#39;)
logger2.debug(&#39;爸爸&#39;)
logger3.debug(&#39;孙子&#39;)
</code></pre><h2 id=日志模块应用>日志模块应用</h2><p>模拟购物小程序，选择转账时记录日志。</p><h3 id=整体项目结构>整体项目结构</h3><p><img src=/postimages/shopping-arch.webp alt=购物小程序整体结构></p><h3 id=每个目录简单介绍>每个目录简单介绍</h3><p><code>bin</code>目录：存放用户交互程序</p><p><code>conf</code>目录：设置相关</p><p><code>core</code>：核心功能</p><p><code>db</code>:用户认证相关</p><p><code>lib</code>:常用功能</p><p><code>log</code>：日志文件</p><p><code>README</code>:项目介绍</p><h3 id=相关源码>相关源码</h3><p><code>start.py</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>sys</span><span style=color:#000;font-weight:700>,</span> <span style=color:#555>os</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#print(os.path.abspath(__file__))</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#print(os.path.dirname(os.path.abspath(__file__)))</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#print(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>BASE_DIR <span style=color:#000;font-weight:700>=</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>dirname(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>dirname(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>abspath(__file__)))
</span></span><span style=display:flex><span>sys<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>append(BASE_DIR)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>from</span> <span style=color:#555>core</span> <span style=color:#000;font-weight:700>import</span> src
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>if</span> __name__ <span style=color:#000;font-weight:700>==</span> <span style=color:#d14>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    src<span style=color:#000;font-weight:700>.</span>run()
</span></span></code></pre></td></tr></table></div></div><p><code>settings.py</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">70
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>os</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>logging.config</span>
</span></span><span style=display:flex><span>BASE_DIR <span style=color:#000;font-weight:700>=</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>dirname(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>dirname(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>abspath(__file__)))
</span></span><span style=display:flex><span>LOG_PATH <span style=color:#000;font-weight:700>=</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>join(BASE_DIR, <span style=color:#d14>&#39;log&#39;</span>, <span style=color:#d14>&#39;access.log&#39;</span>)
</span></span><span style=display:flex><span>DB_PATH <span style=color:#000;font-weight:700>=</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>join(BASE_DIR, <span style=color:#d14>&#39;db&#39;</span>, <span style=color:#d14>&#39;user&#39;</span>)
</span></span><span style=display:flex><span>COLLECT_PATH <span style=color:#000;font-weight:700>=</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>join(BASE_DIR, <span style=color:#d14>&#39;log&#39;</span>, <span style=color:#d14>&#39;collect.log&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(LOG_PATH)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(DB_PATH)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 定义三种日志输出格式 开始</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>standard_format <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#39;[</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14>][</span><span style=color:#d14>%(threadName)s</span><span style=color:#d14>:</span><span style=color:#d14>%(thread)d</span><span style=color:#d14>][task_id:</span><span style=color:#d14>%(name)s</span><span style=color:#d14>][</span><span style=color:#d14>%(filename)s</span><span style=color:#d14>:</span><span style=color:#d14>%(lineno)d</span><span style=color:#d14>]&#39;</span> \
</span></span><span style=display:flex><span>                  <span style=color:#d14>&#39;[</span><span style=color:#d14>%(levelname)s</span><span style=color:#d14>][</span><span style=color:#d14>%(message)s</span><span style=color:#d14>]&#39;</span> <span style=color:#998;font-style:italic>#其中name为getlogger指定的名字</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>simple_format <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#39;[</span><span style=color:#d14>%(levelname)s</span><span style=color:#d14>][</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14>][</span><span style=color:#d14>%(filename)s</span><span style=color:#d14>:</span><span style=color:#d14>%(lineno)d</span><span style=color:#d14>]</span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>id_simple_format <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#39;[</span><span style=color:#d14>%(levelname)s</span><span style=color:#d14>][</span><span style=color:#d14>%(asctime)s</span><span style=color:#d14>] </span><span style=color:#d14>%(message)s</span><span style=color:#d14>&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># log配置字典</span>
</span></span><span style=display:flex><span>LOGGING_DIC <span style=color:#000;font-weight:700>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;version&#39;</span>: <span style=color:#099>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;disable_existing_loggers&#39;</span>: <span style=color:#000;font-weight:700>False</span>,
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;formatters&#39;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#d14>&#39;standard&#39;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;format&#39;</span>: standard_format
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#d14>&#39;simple&#39;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;format&#39;</span>: simple_format
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#d14>&#39;id_simple&#39;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;format&#39;</span>: id_simple_format
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;filters&#39;</span>: {},
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;handlers&#39;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#998;font-style:italic>#打印到终端的日志</span>
</span></span><span style=display:flex><span>        <span style=color:#d14>&#39;console&#39;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;level&#39;</span>: <span style=color:#d14>&#39;DEBUG&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;class&#39;</span>: <span style=color:#d14>&#39;logging.StreamHandler&#39;</span>,  <span style=color:#998;font-style:italic># 打印到屏幕</span>
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;formatter&#39;</span>: <span style=color:#d14>&#39;simple&#39;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#998;font-style:italic>#打印到文件的日志,收集info及以上的日志</span>
</span></span><span style=display:flex><span>        <span style=color:#d14>&#39;default&#39;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;level&#39;</span>: <span style=color:#d14>&#39;DEBUG&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;class&#39;</span>: <span style=color:#d14>&#39;logging.handlers.RotatingFileHandler&#39;</span>,  <span style=color:#998;font-style:italic># 保存到文件</span>
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;formatter&#39;</span>: <span style=color:#d14>&#39;standard&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;filename&#39;</span>: LOG_PATH,  <span style=color:#998;font-style:italic># 日志文件</span>
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;maxBytes&#39;</span>: <span style=color:#099>1024</span><span style=color:#000;font-weight:700>*</span><span style=color:#099>1024</span><span style=color:#000;font-weight:700>*</span><span style=color:#099>5</span>,  <span style=color:#998;font-style:italic># 日志大小 5M</span>
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;backupCount&#39;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;encoding&#39;</span>: <span style=color:#d14>&#39;utf-8&#39;</span>,  <span style=color:#998;font-style:italic># 日志文件的编码，再也不用担心中文log乱码了</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#d14>&#39;collect&#39;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;level&#39;</span>: <span style=color:#d14>&#39;DEBUG&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;class&#39;</span>: <span style=color:#d14>&#39;logging.handlers.RotatingFileHandler&#39;</span>,  <span style=color:#998;font-style:italic># 保存到文件</span>
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;formatter&#39;</span>: <span style=color:#d14>&#39;simple&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;filename&#39;</span>: COLLECT_PATH,  <span style=color:#998;font-style:italic># 日志文件</span>
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;maxBytes&#39;</span>: <span style=color:#099>1024</span><span style=color:#000;font-weight:700>*</span><span style=color:#099>1024</span><span style=color:#000;font-weight:700>*</span><span style=color:#099>5</span>,  <span style=color:#998;font-style:italic># 日志大小 5M</span>
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;backupCount&#39;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;encoding&#39;</span>: <span style=color:#d14>&#39;utf-8&#39;</span>,  <span style=color:#998;font-style:italic># 日志文件的编码，再也不用担心中文log乱码了</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;loggers&#39;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#d14>&#39;&#39;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;handlers&#39;</span>: [<span style=color:#d14>&#39;default&#39;</span>, <span style=color:#d14>&#39;console&#39;</span>, <span style=color:#d14>&#39;collect&#39;</span>],  <span style=color:#998;font-style:italic># 这里把上面定义的两个handler都加上，即log数据既写入文件又打印到屏幕</span>
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;level&#39;</span>: <span style=color:#d14>&#39;DEBUG&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#d14>&#39;propagate&#39;</span>: <span style=color:#000;font-weight:700>False</span>,  <span style=color:#998;font-style:italic># 向上（更高level的logger）传递</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p><code>src.py</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>from</span> <span style=color:#555>lib</span> <span style=color:#000;font-weight:700>import</span> common
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>from</span> <span style=color:#555>lib</span> <span style=color:#000;font-weight:700>import</span> sql
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>shop</span>():
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(<span style=color:#d14>&#39;购物&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>check_balance</span>():
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(<span style=color:#d14>&#39;查看余额....&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic>#res = sql.execute(&#39;select balance from user where id=3&#39;)</span>
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic>#print(res)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>transfer_account</span>():
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(<span style=color:#d14>&#39;转账....&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic>#记录日志</span>
</span></span><span style=display:flex><span>    log_msg <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#39;jack give smith ten yuan&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic>#调用日志功能</span>
</span></span><span style=display:flex><span>    loggers <span style=color:#000;font-weight:700>=</span> common<span style=color:#000;font-weight:700>.</span>logger_handle(<span style=color:#d14>&#39;transfer_account&#39;</span>)
</span></span><span style=display:flex><span>    loggers<span style=color:#000;font-weight:700>.</span>debug(log_msg)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>run</span>():
</span></span><span style=display:flex><span>    msg <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#d14>    1.购物
</span></span></span><span style=display:flex><span><span style=color:#d14>    2.查看余额
</span></span></span><span style=display:flex><span><span style=color:#d14>    3.转账
</span></span></span><span style=display:flex><span><span style=color:#d14>    &#39;&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>while</span> <span style=color:#000;font-weight:700>True</span>:
</span></span><span style=display:flex><span>        <span style=color:#0086b3>print</span>(msg)
</span></span><span style=display:flex><span>        choice <span style=color:#000;font-weight:700>=</span> <span style=color:#0086b3>input</span>(<span style=color:#d14>&#39;&gt;&gt;: &#39;</span>)<span style=color:#000;font-weight:700>.</span>strip()
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>if</span> <span style=color:#000;font-weight:700>not</span> choice:<span style=color:#000;font-weight:700>continue</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>if</span> choice <span style=color:#000;font-weight:700>==</span> <span style=color:#d14>&#39;1&#39;</span>:
</span></span><span style=display:flex><span>            shop()
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>elif</span> choice <span style=color:#000;font-weight:700>==</span> <span style=color:#d14>&#39;2&#39;</span>:
</span></span><span style=display:flex><span>            check_balance()
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>elif</span> choice <span style=color:#000;font-weight:700>==</span> <span style=color:#d14>&#39;3&#39;</span>:
</span></span><span style=display:flex><span>            transfer_account()
</span></span></code></pre></td></tr></table></div></div><p><code>user</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>alex,<span style=color:#099>18</span>,male,<span style=color:#099>10000</span>
</span></span><span style=display:flex><span>egon,<span style=color:#099>18</span>,male,<span style=color:#099>1000000</span>
</span></span></code></pre></td></tr></table></div></div><p><code>common.py</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>from</span> <span style=color:#555>conf</span> <span style=color:#000;font-weight:700>import</span> settings
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>logging.config</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># def logger(msg):</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     with open(settings.LOG_PATH, &#39;a&#39;, encoding=&#39;utf-8&#39;) as f:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#         f.write(&#39;%s\n&#39; %msg)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>logger_handle</span>(log_name):
</span></span><span style=display:flex><span>    logging<span style=color:#000;font-weight:700>.</span>config<span style=color:#000;font-weight:700>.</span>dictConfig(settings<span style=color:#000;font-weight:700>.</span>LOGGING_DIC)  <span style=color:#998;font-style:italic># 导入上面定义的logging配置</span>
</span></span><span style=display:flex><span>    logger <span style=color:#000;font-weight:700>=</span> logging<span style=color:#000;font-weight:700>.</span>getLogger(log_name)  <span style=color:#998;font-style:italic># 生成一个log实例</span>
</span></span><span style=display:flex><span>    logger<span style=color:#000;font-weight:700>.</span>info(<span style=color:#d14>&#39;It works!&#39;</span>)  <span style=color:#998;font-style:italic># 记录该文件的运行状态</span>
</span></span></code></pre></td></tr></table></div></div><p><code>sql.py</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>execute</span>(sql):
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(<span style=color:#d14>&#39;解析&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(<span style=color:#d14>&#39;执行sql&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p><code>access.log</code></p><pre tabindex=0><code>jack给smith转账了10元
[2022-03-22 22:01:20,767][MainThread:2600][task_id:转账][common.py:10][INFO][It works!]
[2022-03-22 22:04:08,963][MainThread:14184][task_id:转账][common.py:10][INFO][It works!]
[2022-03-22 22:06:59,656][MainThread:15740][task_id:transfer_account][common.py:10][INFO][It works!]
[2022-03-26 11:41:33,154][MainThread:12820][task_id:transfer_account][common.py:10][INFO][It works!]
</code></pre><p><code>collect.log</code></p><pre tabindex=0><code>[INFO][2022-03-22 22:01:20,767][common.py:10]It works!
[INFO][2022-03-22 22:04:08,963][common.py:10]It works!
[INFO][2022-03-22 22:06:59,656][common.py:10]It works!
[INFO][2022-03-26 11:41:33,154][common.py:10]It works!
</code></pre><h2 id=re模块-正则表达式>re模块-正则表达式</h2><h3 id=什么是正则>什么是正则？</h3><p>正则就是用一些具有特殊含义的符号组合到一起（称为正则表达式）来描述字符或者字符串的方法。或者说：正则就是用来描述一类事物的规则。（在Python中）它内嵌在Python中，并通过 re 模块实现。正则表达式模式被编译成一系列的字节码，然后由用 C 编写的匹配引擎执行。</p><h3 id=常用匹配模式元字符>常用匹配模式(元字符)</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>re</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;\w&#39;</span>, <span style=color:#d14>&#39;jack 123 + _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;\W&#39;</span>, <span style=color:#d14>&#39;jack 123 + _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;\s&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;\S&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;\d&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;\D&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;</span><span style=color:#d14>\n</span><span style=color:#d14>&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;</span><span style=color:#d14>\t</span><span style=color:#d14>&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;j&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + hello _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;^j&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + hello _ - *&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;o$&#39;</span>, <span style=color:#d14>&#39;jack</span><span style=color:#d14>\t</span><span style=color:#d14>n 12</span><span style=color:#d14>\n</span><span style=color:#d14>3 + _ * hello&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>重复<code>./?/*/+/{m,n}/.*/.*?</code></p><h4 id=点>点</h4><p><code>.</code>能匹配换行符(<code>\n)</code>以外的任意一个字符 (以<code>a</code>开头的都没匹配上，直到遇到<code>aab</code>符合<code>a.b</code>匹配规则，所以结果是<code>aab</code>)</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a.b&#39;</span>, <span style=color:#d14>&#39;a1b a b a-b aaaaaaaab&#39;</span>)) <span style=color:#998;font-style:italic># [&#39;a1b&#39; ,&#39;a b&#39; , &#39;a-b&#39;, &#39;aab&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a.b&#39;</span>, <span style=color:#d14>&#39;a1b a b a</span><span style=color:#d14>\n</span><span style=color:#d14>b aaaaaaaab&#39;</span>)) <span style=color:#998;font-style:italic># [&#39;a1b&#39;,&#39;a b&#39;, &#39;aab&#39;]</span>
</span></span><span style=display:flex><span>                        <span style=color:#998;font-style:italic>#a.b</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a.b&#39;</span>, <span style=color:#d14>&#39;a1b a b a</span><span style=color:#d14>\n</span><span style=color:#d14>b aaaaaaaab&#39;</span>, re<span style=color:#000;font-weight:700>.</span>DOTALL)) <span style=color:#998;font-style:italic>#[&#39;a1b&#39;,&#39;a b&#39;, &#39;a\nb&#39;,&#39;aab&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=问号>问号</h4><p><code>?</code>代表<code>?</code>左边的字符出现0次或者1次</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;ab?&#39;</span>, <span style=color:#d14>&#39;a ab abb abbbb a1b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;a&#39; ,&#39;ab&#39; ,&#39;ab&#39;,&#39;ab&#39;,&#39;a&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><p>分析过程:</p><p>要匹配<code>ab?</code>。<code>b</code>可以出现1个也可以不出现。即<code>'a'</code>或者<code>'ab'.字母a开头</code>的只要能匹配就取出来。</p><h4 id=星>星</h4><p><code>*</code>代表<code>*</code>左边的字符出现0次或者无穷次</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;ab*&#39;</span>, <span style=color:#d14>&#39;a ab abb abbbb a1b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;a&#39;, &#39;ab&#39;, &#39;abb&#39;,&#39;abbbb&#39;,&#39;a&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=加号>加号</h4><p><code>+</code>代表<code>+</code>号左边的字符出现1次或者无穷次</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;ab+&#39;</span>, <span style=color:#d14>&#39;a ab abb abbbbb a1b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;ab&#39;,&#39;abb&#39;,&#39;abbbbb&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><p>分析过程:</p><p>要匹配<code>ab+</code>,<code>b</code>可以出现1个或者无穷次但不能不出现。即<code>'ab'或者'a无穷个b'</code>.需要以字母<code>ab</code>开头的才能匹配，注意和问号、星号做对比。</p><h4 id=大括号>大括号</h4><p><code>{m,n}</code>：代表左边的字符出现<code>m</code>次到<code>n</code>次</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;ab{0,1}&#39;</span>, <span style=color:#d14>&#39;a ab abb abbbb a1b&#39;</span>)) <span style=color:#998;font-style:italic>#等同于?效果。0次到1次</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;ab{0,}&#39;</span>, <span style=color:#d14>&#39;a ab abb abbbb a1b&#39;</span>)) <span style=color:#998;font-style:italic>#等同于*效果。0次到无穷次</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;ab{1,}&#39;</span>, <span style=color:#d14>&#39;a ab abb abbbb a1b&#39;</span>)) <span style=color:#998;font-style:italic>#等同于+效果。1次到无穷次</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;ab{2,4}&#39;</span>, <span style=color:#d14>&#39;a ab abb abbbb abbbbbbbbbbbb  a1b&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#2次到4次，即匹配abb,abbb,abbbb ,如果出现4个以上的b只取到4个。结果为[&#39;abb&#39;,&#39;abbbb&#39;,&#39;abbbb&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=点星>点星</h4><p><code>.*</code>代表要么不出现，要么出现无穷次。（贪婪匹配）通常匹配的不够精准。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a.*b&#39;</span>, <span style=color:#d14>&#39;xxxxy123a123b456b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;a123b456b&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=点星问号>点星问号</h4><p><code>.*?</code>非贪婪匹配和.*对应。（爬虫经常用！！！）</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a.*?b&#39;</span>, <span style=color:#d14>&#39;xxxxy123a123b456b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;a123b&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><p>分析:有多个<code>b</code>时，匹配最近的一个<code>b</code></p><h4 id=斜杠>斜杠</h4><p><code>/</code>或者</p><h4 id=小括号>小括号</h4><p><code>()</code>分组，<code>findall()</code>只取分组里面的字符。<code>(?:)</code>代表分组外面的字符也保留。是固定写法！</p><p>需求:找出所有<code>compan</code>开头的英文字母</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;compan(y|ies)&#39;</span>, <span style=color:#d14>&#39;Too many companies have gone bankrupt, and the next one is my company&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#结果：[&#39;ies&#39;,&#39;y&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;compan(?:y|ies)&#39;</span>, <span style=color:#d14>&#39;Too many companies have gone bankrupt, and the next one is my company&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#结果：[&#39;companies&#39;,&#39;company&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><p>应用取出网页中的链接</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;href=&#34;(.*?)&#34;&#39;</span>, <span style=color:#d14>&#39;&lt;a href=&#34;http://www.baidu.com&#34;&gt;点击我&lt;/a&gt;&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>结果:</p><p><code>['http://www.baidu.com']</code></p><p><code>rawstring</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>r</span><span style=color:#d14>&#39;a</span><span style=color:#d14>\\</span><span style=color:#d14>c&#39;</span>, <span style=color:#d14>&#39;a</span><span style=color:#d14>\\</span><span style=color:#d14>c a1c aBc&#39;</span>)) <span style=color:#998;font-style:italic>#a\\c -&gt;a\c [&#39;a\\c&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=中括号>中括号</h4><p><code>[]</code>取中括号内任意一个</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a[a-z]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a-b a+b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;axb&#39;,&#39;azb&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a[A-Z]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a-b a+b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;aAb&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a[a-zA-Z]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a-b a+b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;axb&#39;, &#39;azb&#39;, &#39;aAb&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a[0-9]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a1b a-b a+b a9b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;a1b&#39;, &#39;a9b&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a[-+*/]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a1b a-b a+b a9b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;a-b&#39;, &#39;a+b&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a[^-+*/]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a1b a-b a+b a9b&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;axb&#39;, &#39;azb&#39;, &#39;aAb&#39;, &#39;a1b&#39;, &#39;a9b&#39;]</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=re模块的其他用法>re模块的其他用法</h3><p><code>re.search</code>匹配成功一次就返回,取不到就返回<code>None</code>,加<code>.group()</code>返回结果。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>search(<span style=color:#d14>&#39;a[*]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a1b a-b a+b aaab&#39;</span>)) <span style=color:#998;font-style:italic>#None</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>search(<span style=color:#d14>&#39;a[a-z]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a1b a-b a+b aaab&#39;</span>)<span style=color:#000;font-weight:700>.</span>group()) <span style=color:#998;font-style:italic># axb</span>
</span></span></code></pre></td></tr></table></div></div><p><code>re.match</code>：从开头取,开头没有就为<code>None</code>,只取一次。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span><span style=color:#000;font-weight:700>match</span>(<span style=color:#d14>&#39;a[0-9]b&#39;</span>, <span style=color:#d14>&#39;axb azb aAb a1b a-b a2b a+b&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span><span style=color:#000;font-weight:700>match</span>(<span style=color:#d14>&#39;a[0-9]b&#39;</span>, <span style=color:#d14>&#39;a9b a8b  axb azb aAb a1b a-b a2b a+b&#39;</span>)<span style=color:#000;font-weight:700>.</span>group())
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>search(<span style=color:#d14>&#39;^a[0-9]b&#39;</span>, <span style=color:#d14>&#39;a9b a8b  axb azb aAb a1b a-b a2b a+b&#39;</span>)<span style=color:#000;font-weight:700>.</span>group())
</span></span></code></pre></td></tr></table></div></div><p><code>re.split</code>:分割</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>split(<span style=color:#d14>&#39;:&#39;</span>, <span style=color:#d14>&#39;root:x:0:0::/root:/bin/bash&#39;</span>,maxsplit<span style=color:#000;font-weight:700>=</span><span style=color:#099>1</span>))
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#结果为：[&#39;root&#39;,&#39;x:0:0::/root:/bin/bash&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#&#39;root:x:0:0::/root:/bin/bash&#39;.split(&#39;:&#39;)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>re.sub:替换</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>sub(<span style=color:#d14>&#39;root&#39;</span>, <span style=color:#d14>&#39;admin&#39;</span>, <span style=color:#d14>&#39;root:x:0:0::/root:/bin/bash&#39;</span>)) <span style=color:#998;font-style:italic>#都替换</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>sub(<span style=color:#d14>&#39;root&#39;</span>, <span style=color:#d14>&#39;admin&#39;</span>, <span style=color:#d14>&#39;root:x:0:0::/root:/bin/bash&#39;</span>, <span style=color:#099>1</span>)) <span style=color:#998;font-style:italic>#只换一次</span>
</span></span></code></pre></td></tr></table></div></div><p>需求：文本前后倒转</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>sub(<span style=color:#d14>&#39;^([a-z]+)([^a-z]+)(.*?)([^a-z]+)([a-z]+)$&#39;</span>, <span style=color:#d14>r</span><span style=color:#d14>&#39;\5\2\3\4\1&#39;</span>, <span style=color:#d14>&#39;root:x:0:0::/root:/bin/bash&#39;</span>)) 
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#只换一次</span>
</span></span></code></pre></td></tr></table></div></div><p>解析：</p><p><code>^</code>以&mldr;开头</p><p><code>$</code>以&mldr;结尾</p><p><code>([a-z]+)</code> 分组匹配单词</p><p><code>([^a-z]+)</code>分组匹配非单词</p><p><code>(.*?)</code>分组匹配任意字符</p><p>正则整体表示：以单词开头，并且以单词结尾。<code>r</code>表示显示字符原本含义不进行转义，<code>\5</code>表示第五个分组。<code>r'\5\2\3\4\1'</code> 整体表示第<code>5</code>个分组和第一个分组的内容调换
并且斜杠使用原本含义不做转义。</p><p><code>re.compile</code> :它将正则表达式转化为对象</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>obj <span style=color:#000;font-weight:700>=</span> re<span style=color:#000;font-weight:700>.</span>compile(<span style=color:#d14>&#39;a\d</span><span style=color:#d14>{2}</span><span style=color:#d14>b&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(obj<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;a12b a123b a12345b abbb&#39;</span>)) <span style=color:#998;font-style:italic>#[&#39;a12b&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(obj<span style=color:#000;font-weight:700>.</span>search(<span style=color:#d14>&#39;a12b a123b a12345b abbb&#39;</span>)<span style=color:#000;font-weight:700>.</span>group()) <span style=color:#998;font-style:italic>#a12b</span>
</span></span></code></pre></td></tr></table></div></div><p>常用正则表</p><p><img src=https://images-1316789231.cos.ap-shanghai.myqcloud.com/%E7%BC%96%E7%A8%8B/%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8.png alt=常用正则表></p><h2 id=时间模块>时间模块</h2><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>time</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>time()) <span style=color:#998;font-style:italic>#时间戳格式：1648026287.9298368</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>localtime()<span style=color:#000;font-weight:700>.</span>tm_mday) <span style=color:#998;font-style:italic>#23</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>localtime()) <span style=color:#998;font-style:italic>#结构化时间</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>gmtime()) <span style=color:#998;font-style:italic>#结构化时间</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#结果</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#time.struct_time(tm_year=2022, tm_mon=3, tm_mday=23, tm_hour=17, tm_min=5, tm_sec=26, tm_wday=2, tm_yday=82, tm_isdst=0)</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#time.struct_time(tm_year=2022, tm_mon=3, tm_mday=23, tm_hour=9, tm_min=5, tm_sec=26, tm_wday=2, tm_yday=82, tm_isdst=0)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>strftime(<span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> %H:%M:%S&#39;</span>)) <span style=color:#998;font-style:italic>#2022-03-23 17:07:47</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>strftime(<span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14> </span><span style=color:#d14>%X</span><span style=color:#d14>&#39;</span>)) <span style=color:#998;font-style:italic>#2022-03-23 17:07:47</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#了解</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>localtime(<span style=color:#099>1111111111</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>localtime(time<span style=color:#000;font-weight:700>.</span>time()))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>gmtime(time<span style=color:#000;font-weight:700>.</span>time()))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>mktime(time<span style=color:#000;font-weight:700>.</span>localtime()))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>strftime(<span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14>&#39;</span>, time<span style=color:#000;font-weight:700>.</span>localtime()))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>strptime(<span style=color:#d14>&#39;2020-03-01&#39;</span>, <span style=color:#d14>&#39;%Y-%m-</span><span style=color:#d14>%d</span><span style=color:#d14>&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>asctime()) <span style=color:#998;font-style:italic>#Wed Mar 23 17:15:40 2022</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>ctime()) <span style=color:#998;font-style:italic>#Wed Mar 23 17:15:40 2022</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>asctime(time<span style=color:#000;font-weight:700>.</span>localtime())) <span style=color:#998;font-style:italic>#Wed Mar 23 17:16:32 2022</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>ctime(<span style=color:#099>111111111</span>)) <span style=color:#998;font-style:italic>#Tue Jul 10 08:11:51 1973</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>ctime(<span style=color:#099>1648027065.7651727</span>)) <span style=color:#998;font-style:italic>#Wed Mar 23 17:17:45 2022</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(time<span style=color:#000;font-weight:700>.</span>time()) <span style=color:#998;font-style:italic>#时间戳格式：1648026287.9298368</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#datetime</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>datetime</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(datetime<span style=color:#000;font-weight:700>.</span>datetime<span style=color:#000;font-weight:700>.</span>now()) <span style=color:#998;font-style:italic>#当前时间：2022-03-23 17:20:11.964584</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(datetime<span style=color:#000;font-weight:700>.</span>datetime<span style=color:#000;font-weight:700>.</span>fromtimestamp(<span style=color:#099>111111111</span>)) <span style=color:#998;font-style:italic>#1973-07-10 08:11:51</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(datetime<span style=color:#000;font-weight:700>.</span>datetime<span style=color:#000;font-weight:700>.</span>now()<span style=color:#000;font-weight:700>+</span>datetime<span style=color:#000;font-weight:700>.</span>timedelta(days<span style=color:#000;font-weight:700>=</span><span style=color:#099>3</span>)) <span style=color:#998;font-style:italic>#当前时间开始的三天后。2022-03-26 17:22:35.581422</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(datetime<span style=color:#000;font-weight:700>.</span>datetime<span style=color:#000;font-weight:700>.</span>now()<span style=color:#000;font-weight:700>+</span>datetime<span style=color:#000;font-weight:700>.</span>timedelta(days<span style=color:#000;font-weight:700>=-</span><span style=color:#099>3</span>)) <span style=color:#998;font-style:italic>#当前时间开始的三天前。2022-03-20 17:22:35.581422</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(datetime<span style=color:#000;font-weight:700>.</span>datetime<span style=color:#000;font-weight:700>.</span>now()<span style=color:#000;font-weight:700>+</span>datetime<span style=color:#000;font-weight:700>.</span>timedelta(minutes<span style=color:#000;font-weight:700>=</span><span style=color:#099>3</span>)) <span style=color:#998;font-style:italic>#当前时间开始的三分钟后。2022-03-23 17:25:35.581422</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(datetime<span style=color:#000;font-weight:700>.</span>datetime<span style=color:#000;font-weight:700>.</span>now()<span style=color:#000;font-weight:700>+</span>datetime<span style=color:#000;font-weight:700>.</span>timedelta(seconds<span style=color:#000;font-weight:700>=</span><span style=color:#099>3</span>)) <span style=color:#998;font-style:italic>#当前时间开始的三秒后。2022-03-23 17:22:38.581422</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(datetime<span style=color:#000;font-weight:700>.</span>datetime<span style=color:#000;font-weight:700>.</span>now()<span style=color:#000;font-weight:700>.</span>replace(year<span style=color:#000;font-weight:700>=</span><span style=color:#099>2000</span>)) <span style=color:#998;font-style:italic>#将当前时间中年替换成2000. 2000-03-23 17:25:04.696554</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=random模块>random模块</h2><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>random</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(random<span style=color:#000;font-weight:700>.</span>random()) <span style=color:#998;font-style:italic>#(0,1) --float 大于0且小于1之间的小数 0.8266764258093519</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(random<span style=color:#000;font-weight:700>.</span>randint(<span style=color:#099>1</span>, <span style=color:#099>3</span>)) <span style=color:#998;font-style:italic>#[1,3] 大于等于1且小于等于3之间的整数</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(random<span style=color:#000;font-weight:700>.</span>randrange(<span style=color:#099>1</span>, <span style=color:#099>3</span>)) <span style=color:#998;font-style:italic>#[1,3) 大于等于1且小于3之间的整数</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(random<span style=color:#000;font-weight:700>.</span>choice([<span style=color:#099>1</span>, <span style=color:#d14>&#39;23&#39;</span>, [<span style=color:#099>4</span>,<span style=color:#099>5</span>]])) <span style=color:#998;font-style:italic>#1或者23或者[4,5]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(random<span style=color:#000;font-weight:700>.</span>sample([<span style=color:#099>1</span>,<span style=color:#d14>&#39;23&#39;</span>,[<span style=color:#099>4</span>,<span style=color:#099>5</span>]],<span style=color:#099>2</span>)) <span style=color:#998;font-style:italic>#列表元素任意2个组合 [[4, 5], &#39;23&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(random<span style=color:#000;font-weight:700>.</span>uniform(<span style=color:#099>1</span>,<span style=color:#099>3</span>)) <span style=color:#998;font-style:italic>#大于1小于3的小数 2.3344194593026546</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>l<span style=color:#000;font-weight:700>=</span>[<span style=color:#099>1</span>,<span style=color:#099>3</span>,<span style=color:#099>4</span>,<span style=color:#099>2</span>,<span style=color:#099>5</span>]
</span></span><span style=display:flex><span>random<span style=color:#000;font-weight:700>.</span>shuffle(l) <span style=color:#998;font-style:italic>#列表中元素随机打乱顺序。[5, 1, 3, 4, 2]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(l)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#随机验证码。数字+字母</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>make_code</span>(n):
</span></span><span style=display:flex><span>    res<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>for</span> i <span style=color:#000;font-weight:700>in</span> <span style=color:#0086b3>range</span>(n):
</span></span><span style=display:flex><span>        s1<span style=color:#000;font-weight:700>=</span><span style=color:#0086b3>str</span>(random<span style=color:#000;font-weight:700>.</span>randint(<span style=color:#099>0</span>,<span style=color:#099>9</span>))
</span></span><span style=display:flex><span>        s2<span style=color:#000;font-weight:700>=</span><span style=color:#0086b3>chr</span>(random<span style=color:#000;font-weight:700>.</span>randint(<span style=color:#099>65</span>,<span style=color:#099>90</span>))
</span></span><span style=display:flex><span>        res<span style=color:#000;font-weight:700>+=</span>random<span style=color:#000;font-weight:700>.</span>choice([s1,s2])
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>return</span> res
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(make_code(<span style=color:#099>6</span>))
</span></span></code></pre></td></tr></table></div></div><h2 id=os模块>os模块</h2><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>getcwd() 获取当前工作目录<span style=color:#a61717;background-color:#e3d2d2>，</span>即当前python脚本工作的目录路径
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>chdir(<span style=color:#d14>&#34;dirname&#34;</span>)  改变当前脚本工作目录<span style=color:#a61717;background-color:#e3d2d2>；</span>相当于shell下cd
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>curdir  返回当前目录: (<span style=color:#d14>&#39;.&#39;</span>)
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>pardir  获取当前目录的父目录字符串名<span style=color:#a61717;background-color:#e3d2d2>：</span>(<span style=color:#d14>&#39;..&#39;</span>)
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>makedirs(<span style=color:#d14>&#39;dirname1/dirname2&#39;</span>)    可生成多层递归目录
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>removedirs(<span style=color:#d14>&#39;dirname1&#39;</span>)    若目录为空<span style=color:#a61717;background-color:#e3d2d2>，</span>则删除<span style=color:#a61717;background-color:#e3d2d2>，</span>并递归到上一级目录<span style=color:#a61717;background-color:#e3d2d2>，</span>如若也为空<span style=color:#a61717;background-color:#e3d2d2>，</span>则删除<span style=color:#a61717;background-color:#e3d2d2>，</span>依此类推
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>mkdir(<span style=color:#d14>&#39;dirname&#39;</span>)    生成单级目录<span style=color:#a61717;background-color:#e3d2d2>；</span>相当于shell中mkdir dirname
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>rmdir(<span style=color:#d14>&#39;dirname&#39;</span>)    删除单级空目录<span style=color:#a61717;background-color:#e3d2d2>，</span>若目录不为空则无法删除<span style=color:#a61717;background-color:#e3d2d2>，</span>报错<span style=color:#a61717;background-color:#e3d2d2>；</span>相当于shell中rmdir dirname
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>listdir(<span style=color:#d14>&#39;dirname&#39;</span>)    列出指定目录下的所有文件和子目录<span style=color:#a61717;background-color:#e3d2d2>，</span>包括隐藏文件<span style=color:#a61717;background-color:#e3d2d2>，</span>并以列表方式打印
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>remove()  删除一个文件
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>rename(<span style=color:#d14>&#34;oldname&#34;</span>,<span style=color:#d14>&#34;newname&#34;</span>)  重命名文件<span style=color:#000;font-weight:700>/</span>目录
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>stat(<span style=color:#d14>&#39;path/filename&#39;</span>)  获取文件<span style=color:#000;font-weight:700>/</span>目录信息
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>sep    输出操作系统特定的路径分隔符<span style=color:#a61717;background-color:#e3d2d2>，</span>win下为<span style=color:#d14>&#34;</span><span style=color:#d14>\\</span><span style=color:#d14>&#34;</span>,Linux下为<span style=color:#d14>&#34;/&#34;</span>
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>linesep    输出当前平台使用的行终止符<span style=color:#a61717;background-color:#e3d2d2>，</span>win下为<span style=color:#d14>&#34;</span><span style=color:#d14>\t\n</span><span style=color:#d14>&#34;</span>,Linux下为<span style=color:#d14>&#34;</span><span style=color:#d14>\n</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>pathsep    输出用于分割文件路径的字符串 win下为;,Linux下为:
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>name    输出字符串指示当前使用平台<span style=color:#a61717;background-color:#e3d2d2>。</span>win<span style=color:#000;font-weight:700>-&gt;</span><span style=color:#d14>&#39;nt&#39;</span>; Linux<span style=color:#000;font-weight:700>-&gt;</span><span style=color:#d14>&#39;posix&#39;</span>
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>system(<span style=color:#d14>&#34;bash command&#34;</span>)  运行shell命令<span style=color:#a61717;background-color:#e3d2d2>，</span>直接显示
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>environ  获取系统环境变量
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>abspath(path)  返回path规范化的绝对路径
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>split(path)  将path分割成目录和文件名二元组返回
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>dirname(path)  返回path的目录<span style=color:#a61717;background-color:#e3d2d2>。</span>其实就是os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>split(path)的第一个元素
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>basename(path)  返回path最后的文件名<span style=color:#a61717;background-color:#e3d2d2>。</span>如何path以<span style=color:#a61717;background-color:#e3d2d2>／</span>或\结尾<span style=color:#a61717;background-color:#e3d2d2>，</span>那么就会返回空值<span style=color:#a61717;background-color:#e3d2d2>。</span>即os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>split(path)的第二个元素
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>exists(path)  如果path存在<span style=color:#a61717;background-color:#e3d2d2>，</span>返回True<span style=color:#a61717;background-color:#e3d2d2>；</span>如果path不存在<span style=color:#a61717;background-color:#e3d2d2>，</span>返回False
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>isabs(path)  如果path是绝对路径<span style=color:#a61717;background-color:#e3d2d2>，</span>返回True
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>isfile(path)  如果path是一个存在的文件<span style=color:#a61717;background-color:#e3d2d2>，</span>返回True<span style=color:#a61717;background-color:#e3d2d2>。</span>否则返回False
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>isdir(path)  如果path是一个存在的目录<span style=color:#a61717;background-color:#e3d2d2>，</span>则返回True<span style=color:#a61717;background-color:#e3d2d2>。</span>否则返回False
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>join(path1[, path2[, <span style=color:#000;font-weight:700>...</span>]])  将多个路径组合后返回<span style=color:#a61717;background-color:#e3d2d2>，</span>第一个绝对路径之前的参数将被忽略
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>getatime(path)  返回path所指向的文件或者目录的最后存取时间
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>getmtime(path)  返回path所指向的文件或者目录的最后修改时间
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>getsize(path) 返回path的大小
</span></span><span style=display:flex><span>在Linux和Mac平台上<span style=color:#a61717;background-color:#e3d2d2>，</span>该函数会原样返回path<span style=color:#a61717;background-color:#e3d2d2>，</span>在windows平台上会将路径中所有字符转换为小写<span style=color:#a61717;background-color:#e3d2d2>，</span>并将所有斜杠转换为反斜杠<span style=color:#a61717;background-color:#e3d2d2>。</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&gt;&gt;&gt;</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>normcase(<span style=color:#d14>&#39;c:/windows</span><span style=color:#d14>\\</span><span style=color:#d14>system32</span><span style=color:#d14>\\</span><span style=color:#d14>&#39;</span>)   
</span></span><span style=display:flex><span><span style=color:#d14>&#39;c:</span><span style=color:#d14>\\</span><span style=color:#d14>windows</span><span style=color:#d14>\\</span><span style=color:#d14>system32</span><span style=color:#d14>\\</span><span style=color:#d14>&#39;</span>  
</span></span><span style=display:flex><span>规范化路径<span style=color:#a61717;background-color:#e3d2d2>，</span>如<span style=color:#000;font-weight:700>..</span>和<span style=color:#000;font-weight:700>/</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&gt;&gt;&gt;</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>normpath(<span style=color:#d14>&#39;c://windows</span><span style=color:#d14>\\</span><span style=color:#d14>System32</span><span style=color:#d14>\\</span><span style=color:#d14>../Temp/&#39;</span>)   
</span></span><span style=display:flex><span><span style=color:#d14>&#39;c:</span><span style=color:#d14>\\</span><span style=color:#d14>windows</span><span style=color:#d14>\\</span><span style=color:#d14>Temp&#39;</span>   
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&gt;&gt;&gt;</span> a<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;/Users/jieli/test1/</span><span style=color:#d14>\\\a</span><span style=color:#d14>1/</span><span style=color:#d14>\\\\</span><span style=color:#d14>aa.py/../..&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>normpath(a))
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>/</span>Users<span style=color:#000;font-weight:700>/</span>jieli<span style=color:#000;font-weight:700>/</span>test1
</span></span></code></pre></td></tr></table></div></div><p>举例</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>getcwd())
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>stat(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\oracle.py&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>stat(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\oracle.py&#39;</span>)<span style=color:#000;font-weight:700>.</span>st_size)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>getsize(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\oracle.py&#39;</span>))
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>system(<span style=color:#d14>&#39;tasklist&#39;</span>) <span style=color:#998;font-style:italic>#看系统进程,有编码问题。</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>split(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\oracle.py&#39;</span>)) <span style=color:#998;font-style:italic>#(&#39;D:\\pccharmcode&#39;, &#39;oracle.py&#39;)</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>dirname(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\oracle.py&#39;</span>)) <span style=color:#998;font-style:italic>#D:\pccharmcode</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>basename(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\oracle.py&#39;</span>)) <span style=color:#998;font-style:italic>#oracle.py</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>isabs(<span style=color:#d14>r</span><span style=color:#d14>&#39;C:</span><span style=color:#d14>\\</span><span style=color:#d14>a123123123&#39;</span>)) <span style=color:#998;font-style:italic>#True</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>isabs(<span style=color:#d14>r</span><span style=color:#d14>&#39;/root/123.txt&#39;</span>)) <span style=color:#998;font-style:italic>#True</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>join(<span style=color:#d14>&#39;C:&#39;</span>, <span style=color:#d14>&#39;D:</span><span style=color:#d14>\\</span><span style=color:#d14>&#39;</span>, <span style=color:#d14>&#39;dir1&#39;</span>, <span style=color:#d14>&#39;dir2&#39;</span>, <span style=color:#d14>&#39;dir3&#39;</span>)) <span style=color:#998;font-style:italic>#D:dir1\dir2\dir3</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>normcase(<span style=color:#d14>&#39;c:/windows</span><span style=color:#d14>\\</span><span style=color:#d14>SYstem32</span><span style=color:#d14>\\</span><span style=color:#d14>&#39;</span>)) <span style=color:#998;font-style:italic>#c:\windows\system32\</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>normpath(<span style=color:#d14>&#39;c://windows</span><span style=color:#d14>\\</span><span style=color:#d14>System32</span><span style=color:#d14>\\</span><span style=color:#d14>../Temp/&#39;</span>)) <span style=color:#998;font-style:italic>#c:\windows\Temp</span>
</span></span></code></pre></td></tr></table></div></div><p>路径：<code>D:\pccharmcode\api_key\__init__.py</code>
要求获取到根开始的第一级路径。</p><p>方法1：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>dirname(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>dirname(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\api_key\__init__.py&#39;</span>)))
</span></span></code></pre></td></tr></table></div></div><p>方法2：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>res <span style=color:#000;font-weight:700>=</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>normpath(os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>join(
</span></span><span style=display:flex><span>    os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>abspath(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\api_key\__init__.py&#39;</span>),
</span></span><span style=display:flex><span>    os<span style=color:#000;font-weight:700>.</span>pardir,
</span></span><span style=display:flex><span>    os<span style=color:#000;font-weight:700>.</span>pardir
</span></span><span style=display:flex><span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(res)
</span></span></code></pre></td></tr></table></div></div><p>方法3：</p><p>先将原路径拼接成一个新路径(用<code>os.path.join()</code>)。 <code>D:\pccharmcode\api_key\__init__.py\..\..</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>BASE_DIR <span style=color:#000;font-weight:700>=</span> os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>normpath(
</span></span><span style=display:flex><span>os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>join(
</span></span><span style=display:flex><span>    os<span style=color:#000;font-weight:700>.</span>path<span style=color:#000;font-weight:700>.</span>abspath(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\api_key\__init__.py&#39;</span>),
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;..&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;..&#39;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(BASE_DIR)
</span></span></code></pre></td></tr></table></div></div><h2 id=sys模块>sys模块</h2><p>主要掌握</p><pre tabindex=0><code>sys.argv
sys.exit(0)
sys.path
</code></pre><p>其他</p><pre tabindex=0><code>sys.argv           命令行参数List，第一个元素是程序本身路径
sys.exit(n)        退出程序，正常退出时exit(0)
sys.version        获取Python解释程序的版本信息
sys.maxint         最大的Int值
sys.path           返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值
sys.platform       返回操作系统平台名称
</code></pre><p>模拟下载进度条</p><pre tabindex=0><code>print((&#39;[%%-%ds]&#39; %50) %(&#39;#&#39;*1))
print((&#39;[%%-%ds]&#39; %50) %(&#39;#&#39;*2))
print((&#39;[%%-%ds]&#39; %50) %(&#39;#&#39;*3))
print((&#39;[%%-%ds]&#39; %50) %(&#39;#&#39;*4))
print((&#39;[%%-%ds]&#39; %50) %(&#39;#&#39;*5))
print((&#39;[%%-%ds]&#39; %50) %(&#39;#&#39;*6))
print((&#39;[%%-%ds]&#39; %50) %(&#39;#&#39;*7))
</code></pre><p>效果：</p><pre tabindex=0><code>[#                                                 ]
[##                                                ]
[###                                               ]
[####                                              ]
[#####                                             ]
[######                                            ]
[#######                                           ]
</code></pre><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>time</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>sys</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>progress</span>(percent,width<span style=color:#000;font-weight:700>=</span><span style=color:#099>50</span>):
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>if</span> percent <span style=color:#000;font-weight:700>&gt;=</span> <span style=color:#099>1</span>:
</span></span><span style=display:flex><span>        percent<span style=color:#000;font-weight:700>=</span><span style=color:#099>1</span>
</span></span><span style=display:flex><span>    show_str <span style=color:#000;font-weight:700>=</span> (<span style=color:#d14>&#39;[</span><span style=color:#d14>%%</span><span style=color:#d14>-</span><span style=color:#d14>%d</span><span style=color:#d14>s]&#39;</span> <span style=color:#000;font-weight:700>%</span> width) <span style=color:#000;font-weight:700>%</span> (<span style=color:#d14>&#39;#&#39;</span> <span style=color:#000;font-weight:700>*</span> <span style=color:#0086b3>int</span>(width<span style=color:#000;font-weight:700>*</span>percent))
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(<span style=color:#d14>&#39;</span><span style=color:#d14>\r</span><span style=color:#d14>%s</span><span style=color:#d14> </span><span style=color:#d14>%d%%</span><span style=color:#d14>&#39;</span> <span style=color:#000;font-weight:700>%</span>(show_str,<span style=color:#0086b3>int</span>(<span style=color:#099>100</span><span style=color:#000;font-weight:700>*</span>percent)),end<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;&#39;</span>)
</span></span><span style=display:flex><span>recv_size<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>
</span></span><span style=display:flex><span>total_size<span style=color:#000;font-weight:700>=</span><span style=color:#099>10241</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>while</span> recv_size <span style=color:#000;font-weight:700>&lt;</span> total_size:
</span></span><span style=display:flex><span>    time<span style=color:#000;font-weight:700>.</span>sleep(<span style=color:#099>0.1</span>) <span style=color:#998;font-style:italic>#模拟数据的传输延迟</span>
</span></span><span style=display:flex><span>    recv_size<span style=color:#000;font-weight:700>+=</span><span style=color:#099>1024</span> <span style=color:#998;font-style:italic>#每次收1024</span>
</span></span><span style=display:flex><span>    progress(recv_size<span style=color:#000;font-weight:700>/</span>total_size)
</span></span></code></pre></td></tr></table></div></div><h2 id=shutil模块>shutil模块</h2><p>高级的文件、文件夹、压缩包 处理模块。</p><p>格式：</p><p><code>shutil.copyfileobj(fsrc, fdst[, length])</code></p><p>将文件内容拷贝到另一个文件中</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>copyfileobj(<span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;old.xml&#39;</span>,<span style=color:#d14>&#39;r&#39;</span>), <span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;new.xml&#39;</span>, <span style=color:#d14>&#39;w&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>格式：</p><p><code>shutil.copyfile(src, dst)</code></p><p>拷贝文件</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>copyfile(<span style=color:#d14>&#39;f1.log&#39;</span>, <span style=color:#d14>&#39;f2.log&#39;</span>) <span style=color:#998;font-style:italic>#目标文件无需存在</span>
</span></span></code></pre></td></tr></table></div></div><p>格式：</p><p><code>shutil.copymode(src, dst)</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>仅拷贝权限<span style=color:#a61717;background-color:#e3d2d2>。</span>内容<span style=color:#a61717;background-color:#e3d2d2>、</span>组<span style=color:#a61717;background-color:#e3d2d2>、</span>用户均不变
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>copymode(<span style=color:#d14>&#39;f1.log&#39;</span>, <span style=color:#d14>&#39;f2.log&#39;</span>) <span style=color:#998;font-style:italic>#目标文件必须存在</span>
</span></span></code></pre></td></tr></table></div></div><p>格式：</p><p><code>shutil.copystat(src, dst)</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>仅拷贝状态的信息<span style=color:#a61717;background-color:#e3d2d2>，</span>包括<span style=color:#a61717;background-color:#e3d2d2>：</span>mode bits, atime, mtime, flags
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>copystat(<span style=color:#d14>&#39;f1.log&#39;</span>, <span style=color:#d14>&#39;f2.log&#39;</span>) <span style=color:#998;font-style:italic>#目标文件必须存在</span>
</span></span></code></pre></td></tr></table></div></div><p>格式：</p><p><code>shutil.copy(src, dst)</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>拷贝文件和权限
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>copy(<span style=color:#d14>&#39;f1.log&#39;</span>, <span style=color:#d14>&#39;f2.log&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>格式：</p><p><code>shutil.copy2(src, dst)</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>拷贝文件和状态信息
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>copy2(<span style=color:#d14>&#39;f1.log&#39;</span>, <span style=color:#d14>&#39;f2.log&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>格式：</p><p><code>shutil.ignore_patterns(*patterns) shutil.copytree(src, dst, symlinks=False, ignore=None)</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>递归的去拷贝文件夹
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>copytree(<span style=color:#d14>&#39;folder1&#39;</span>, <span style=color:#d14>&#39;folder2&#39;</span>, ignore<span style=color:#000;font-weight:700>=</span>shutil<span style=color:#000;font-weight:700>.</span>ignore_patterns(<span style=color:#d14>&#39;*.pyc&#39;</span>, <span style=color:#d14>&#39;tmp*&#39;</span>)) <span style=color:#998;font-style:italic>#目标目录不能存在，注意对folder2目录父级目录要有可写权限，ignore的意思是排除 </span>
</span></span></code></pre></td></tr></table></div></div><p>拷贝软连接:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>copytree(<span style=color:#d14>&#39;f1&#39;</span>, <span style=color:#d14>&#39;f2&#39;</span>, symlinks<span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>True</span>, ignore<span style=color:#000;font-weight:700>=</span>shutil<span style=color:#000;font-weight:700>.</span>ignore_patterns(<span style=color:#d14>&#39;*.pyc&#39;</span>, <span style=color:#d14>&#39;tmp*&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>通常的拷贝都把软连接拷贝成硬链接，即对待软连接来说，创建新的文件.</p><p>格式：</p><p><code>shutil.rmtree(path[, ignore_errors[, onerror]])</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>递归的去删除文件
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>rmtree(<span style=color:#d14>&#39;folder1&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>格式：</p><p><code>shutil.move(src, dst)</code></p><pre tabindex=0><code>递归的去移动文件，它类似mv命令，其实就是重命名。
shutil.move(&#39;folder1&#39;, &#39;folder3&#39;)
</code></pre><p>压缩与解压缩</p><p>格式：</p><p><code>shutil.make_archive(base_name, format,...)</code></p><p>创建压缩包并返回文件路径，例如：zip、tar.</p><pre tabindex=0><code>base_name： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目录，否则保存至指定路径，
如 data_bak                       =&gt;保存至当前路径
如：/tmp/data_bak =&gt;保存至/tmp/
format： 压缩包种类，“zip”, “tar”, “bztar”，“gztar”
root_dir： 要压缩的文件夹路径（默认当前目录）
owner： 用户，默认当前用户
group： 组，默认当前组
logger： 用于记录日志，通常是logging.Logger对象
</code></pre><p>将 <code>/data</code> 下的文件打包放置当前程序目录</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span>ret <span style=color:#000;font-weight:700>=</span> shutil<span style=color:#000;font-weight:700>.</span>make_archive(<span style=color:#d14>&#34;data_bak&#34;</span>, <span style=color:#d14>&#39;gztar&#39;</span>, root_dir<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;/data&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>将 <code>/data</code>下的文件打包放置 <code>/tmp/</code>目录</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span>ret <span style=color:#000;font-weight:700>=</span> shutil<span style=color:#000;font-weight:700>.</span>make_archive(<span style=color:#d14>&#34;/tmp/data_bak&#34;</span>, <span style=color:#d14>&#39;gztar&#39;</span>, root_dir<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;/data&#39;</span>) 
</span></span></code></pre></td></tr></table></div></div><p><code>shutil </code>对压缩包的处理是调用 <code>ZipFile</code> 和 <code>TarFile</code> 两个模块来进行的.</p><p>详细：</p><p>压缩</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>z <span style=color:#000;font-weight:700>=</span> zipfile<span style=color:#000;font-weight:700>.</span>ZipFile(<span style=color:#d14>&#39;laxi.zip&#39;</span>, <span style=color:#d14>&#39;w&#39;</span>)
</span></span><span style=display:flex><span>z<span style=color:#000;font-weight:700>.</span>write(<span style=color:#d14>&#39;a.log&#39;</span>)
</span></span><span style=display:flex><span>z<span style=color:#000;font-weight:700>.</span>write(<span style=color:#d14>&#39;data.data&#39;</span>)
</span></span><span style=display:flex><span>z<span style=color:#000;font-weight:700>.</span>close()
</span></span></code></pre></td></tr></table></div></div><p>解压</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>z <span style=color:#000;font-weight:700>=</span> zipfile<span style=color:#000;font-weight:700>.</span>ZipFile(<span style=color:#d14>&#39;laxi.zip&#39;</span>, <span style=color:#d14>&#39;r&#39;</span>)
</span></span><span style=display:flex><span>z<span style=color:#000;font-weight:700>.</span>extractall(path<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;.&#39;</span>)
</span></span><span style=display:flex><span>z<span style=color:#000;font-weight:700>.</span>close()
</span></span></code></pre></td></tr></table></div></div><p>使用<code>tarfile</code>压缩与解压缩</p><pre tabindex=0><code>import tarfile
</code></pre><p>压缩</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t<span style=color:#000;font-weight:700>=</span>tarfile<span style=color:#000;font-weight:700>.</span>open(<span style=color:#d14>&#39;/tmp/egon.tar&#39;</span>,<span style=color:#d14>&#39;w&#39;</span>)
</span></span><span style=display:flex><span>t<span style=color:#000;font-weight:700>.</span>add(<span style=color:#d14>&#39;/test1/a.py&#39;</span>,arcname<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;a.bak&#39;</span>)
</span></span><span style=display:flex><span>t<span style=color:#000;font-weight:700>.</span>add(<span style=color:#d14>&#39;/test1/b.py&#39;</span>,arcname<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;b.bak&#39;</span>)
</span></span><span style=display:flex><span>t<span style=color:#000;font-weight:700>.</span>close()
</span></span></code></pre></td></tr></table></div></div><p>解压缩</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t<span style=color:#000;font-weight:700>=</span>tarfile<span style=color:#000;font-weight:700>.</span>open(<span style=color:#d14>&#39;/tmp/egon.tar&#39;</span>,<span style=color:#d14>&#39;r&#39;</span>)
</span></span><span style=display:flex><span>t<span style=color:#000;font-weight:700>.</span>extractall(<span style=color:#d14>&#39;/egon&#39;</span>)
</span></span><span style=display:flex><span>t<span style=color:#000;font-weight:700>.</span>close()
</span></span></code></pre></td></tr></table></div></div><p>练习：</p><p>将<code>ATM</code>文件夹以<code>tar.gz</code>方式压缩，然后解压到<code>aaa</code>文件夹内。最后删除<code>aaa</code>文件夹。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>shutil</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>tarfile</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#压缩</span>
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>make_archive(<span style=color:#d14>&#34;backup&#34;</span>, <span style=color:#d14>&#39;gztar&#39;</span>, root_dir<span style=color:#000;font-weight:700>=</span><span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\ATM&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#解压</span>
</span></span><span style=display:flex><span>o <span style=color:#000;font-weight:700>=</span> tarfile<span style=color:#000;font-weight:700>.</span>open(<span style=color:#d14>&#39;backup.tar.gz&#39;</span>, <span style=color:#d14>&#39;r&#39;</span>)
</span></span><span style=display:flex><span>o<span style=color:#000;font-weight:700>.</span>extractall(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\aaa&#39;</span>)
</span></span><span style=display:flex><span>o<span style=color:#000;font-weight:700>.</span>close()
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#删除aaa文件夹</span>
</span></span><span style=display:flex><span>shutil<span style=color:#000;font-weight:700>.</span>rmtree(<span style=color:#d14>r</span><span style=color:#d14>&#39;D:\pccharmcode\aaa&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><h2 id=xml模块>xml模块</h2><pre tabindex=0><code>from xml.etree import ElementTree
tree = ElementTree.parse(&#39;a.xml&#39;)
root = tree.getroot()
# print(root.tag)
# print(root.attrib)
# print(root.text)
</code></pre><p>三种查找方式</p><p>从子节点中查找</p><p>显示一种</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(root<span style=color:#000;font-weight:700>.</span>find(<span style=color:#d14>&#39;country&#39;</span>)) <span style=color:#998;font-style:italic>#&lt;Element &#39;country&#39; at 0x000001E26EDCC130&gt;</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#加.tag .attrib .text就可以显示内容</span>
</span></span></code></pre></td></tr></table></div></div><p>显示所有。以列表的形式显示。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(root<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;country&#39;</span>)) 
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#[&lt;Element &#39;country&#39; at 0x0000027D6F00C0E0&gt;, &lt;Element &#39;country&#39; at 0x0000027D6F00C2C0&gt;, &lt;Element &#39;country&#39; at 0x0000027D6F00C450&gt;]</span>
</span></span></code></pre></td></tr></table></div></div><p>注意：如果找不到就会显示<code> None</code></p><p>从树形结构中查找</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>root<span style=color:#000;font-weight:700>.</span>iter()
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(<span style=color:#0086b3>list</span>(root<span style=color:#000;font-weight:700>.</span>iter(<span style=color:#d14>&#39;country&#39;</span>)))
</span></span></code></pre></td></tr></table></div></div><h3 id=遍历文档>遍历文档</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>from</span> <span style=color:#555>xml.etree</span> <span style=color:#000;font-weight:700>import</span> ElementTree
</span></span><span style=display:flex><span>tree <span style=color:#000;font-weight:700>=</span> ElementTree<span style=color:#000;font-weight:700>.</span>parse(<span style=color:#d14>&#39;a.xml&#39;</span>)
</span></span><span style=display:flex><span>root <span style=color:#000;font-weight:700>=</span> tree<span style=color:#000;font-weight:700>.</span>getroot()
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> country <span style=color:#000;font-weight:700>in</span> root:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(<span style=color:#d14>&#39;==========&gt;&#39;</span>, country<span style=color:#000;font-weight:700>.</span>tag, country<span style=color:#000;font-weight:700>.</span>attrib, country<span style=color:#000;font-weight:700>.</span>attrib[<span style=color:#d14>&#39;name&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>for</span> rank <span style=color:#000;font-weight:700>in</span> country:
</span></span><span style=display:flex><span>        <span style=color:#0086b3>print</span>(rank<span style=color:#000;font-weight:700>.</span>tag, rank<span style=color:#000;font-weight:700>.</span>attrib, rank<span style=color:#000;font-weight:700>.</span>text)
</span></span></code></pre></td></tr></table></div></div><p>结果</p><pre tabindex=0><code>==========&gt; country {&#39;name&#39;: &#39;Liechtenstein&#39;} Liechtenstein
rank {&#39;updated&#39;: &#39;yes&#39;} 2
year {} 2008
gdppc {} 141100
neighbor {&#39;name&#39;: &#39;Austria&#39;, &#39;direction&#39;: &#39;E&#39;} None
neighbor {&#39;name&#39;: &#39;Switzerland&#39;, &#39;direction&#39;: &#39;W&#39;} None
==========&gt; country {&#39;name&#39;: &#39;Singapore&#39;} Singapore
rank {&#39;updated&#39;: &#39;yes&#39;} 5
year {} 2011
gdppc {} 59900
neighbor {&#39;name&#39;: &#39;Malaysia&#39;, &#39;direction&#39;: &#39;N&#39;} None
==========&gt; country {&#39;name&#39;: &#39;Panama&#39;} Panama
rank {&#39;updated&#39;: &#39;yes&#39;} 69
year {} 2011
gdppc {} 13600
neighbor {&#39;name&#39;: &#39;Costa Rica&#39;, &#39;direction&#39;: &#39;W&#39;} None
neighbor {&#39;name&#39;: &#39;Colombia&#39;, &#39;direction&#39;: &#39;E&#39;} None
</code></pre><h4 id=只遍历year节点>只遍历year节点</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> year <span style=color:#000;font-weight:700>in</span> root<span style=color:#000;font-weight:700>.</span>iter(<span style=color:#d14>&#39;year&#39;</span>):
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(year<span style=color:#000;font-weight:700>.</span>tag, year<span style=color:#000;font-weight:700>.</span>text)
</span></span></code></pre></td></tr></table></div></div><p>结果</p><pre tabindex=0><code>year 2008
year 2011
year 2011
</code></pre><h3 id=修改>修改</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> c <span style=color:#000;font-weight:700>in</span> root<span style=color:#000;font-weight:700>.</span>iter(<span style=color:#d14>&#39;year&#39;</span>):
</span></span><span style=display:flex><span>    new_year <span style=color:#000;font-weight:700>=</span> <span style=color:#0086b3>int</span>(c<span style=color:#000;font-weight:700>.</span>text)<span style=color:#000;font-weight:700>+</span><span style=color:#099>1</span>
</span></span><span style=display:flex><span>    c<span style=color:#000;font-weight:700>.</span>text <span style=color:#000;font-weight:700>=</span> <span style=color:#0086b3>str</span>(new_year)
</span></span><span style=display:flex><span>    c<span style=color:#000;font-weight:700>.</span>set(<span style=color:#d14>&#39;update&#39;</span>, <span style=color:#d14>&#39;yes&#39;</span>)
</span></span><span style=display:flex><span>    c<span style=color:#000;font-weight:700>.</span>set(<span style=color:#d14>&#39;version&#39;</span>, <span style=color:#d14>&#39;1.0&#39;</span>)
</span></span><span style=display:flex><span>tree<span style=color:#000;font-weight:700>.</span>write(<span style=color:#d14>&#39;b.xml&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><h3 id=删除>删除</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> country <span style=color:#000;font-weight:700>in</span> root<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;country&#39;</span>):
</span></span><span style=display:flex><span>    rank <span style=color:#000;font-weight:700>=</span> <span style=color:#0086b3>int</span>(country<span style=color:#000;font-weight:700>.</span>find(<span style=color:#d14>&#39;rank&#39;</span>)<span style=color:#000;font-weight:700>.</span>text)
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>if</span> rank <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#099>50</span>:
</span></span><span style=display:flex><span>        root<span style=color:#000;font-weight:700>.</span>remove(country)
</span></span><span style=display:flex><span>tree<span style=color:#000;font-weight:700>.</span>write(<span style=color:#d14>&#39;output.xml&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><p>在<code>country</code>内添加<code>（append）</code>节点<code>year2</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> country <span style=color:#000;font-weight:700>in</span> root<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;country&#39;</span>):
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>for</span> year <span style=color:#000;font-weight:700>in</span> country<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#39;year&#39;</span>):
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>if</span> <span style=color:#0086b3>int</span>(year<span style=color:#000;font-weight:700>.</span>text) <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#099>2000</span>:
</span></span><span style=display:flex><span>            year2 <span style=color:#000;font-weight:700>=</span> ElementTree<span style=color:#000;font-weight:700>.</span>Element(<span style=color:#d14>&#39;year2&#39;</span>)
</span></span><span style=display:flex><span>            year2<span style=color:#000;font-weight:700>.</span>text <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#39;happy-new-year&#39;</span>
</span></span><span style=display:flex><span>            year2<span style=color:#000;font-weight:700>.</span>attrib <span style=color:#000;font-weight:700>=</span> {<span style=color:#d14>&#39;update&#39;</span>:<span style=color:#d14>&#39;yes&#39;</span>}
</span></span><span style=display:flex><span>            country<span style=color:#000;font-weight:700>.</span>append(year2) <span style=color:#998;font-style:italic>#往country节点下添加子节点</span>
</span></span><span style=display:flex><span>tree<span style=color:#000;font-weight:700>.</span>write(<span style=color:#d14>&#39;a.xml.swap&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><h2 id=configerparser模块>configerparser模块</h2><p><code>[mysqld]</code>叫做<code>section</code></p><p><code>port</code>、<code>basedir</code>等等叫做<code>option</code></p><p>练习配置文件<code>my.ini</code></p><pre tabindex=0><code>[mysqld]
port = 3306
basedir = D:\\softnew\\MYSQL\\mysql-5.7.20-winx64
max_connections = 200
character-set-server = utf8
default-storage-engine = INNODB
skip-grant-table = True

[client]
user = root
password = 123
</code></pre><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>configparser</span>
</span></span><span style=display:flex><span>config <span style=color:#000;font-weight:700>=</span> configparser<span style=color:#000;font-weight:700>.</span>ConfigParser()
</span></span><span style=display:flex><span>config<span style=color:#000;font-weight:700>.</span>read(<span style=color:#d14>&#39;my.ini&#39;</span>)
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(config<span style=color:#000;font-weight:700>.</span>sections()) <span style=color:#998;font-style:italic>#查看所有的标题</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(config<span style=color:#000;font-weight:700>.</span>options(<span style=color:#d14>&#39;mysqld&#39;</span>)) <span style=color:#998;font-style:italic>#查看标题mysqld下所有key=value的key</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(config<span style=color:#000;font-weight:700>.</span>get(<span style=color:#d14>&#39;mysqld&#39;</span>, <span style=color:#d14>&#39;port&#39;</span>)) <span style=color:#998;font-style:italic>#查看标题mysqld下port的值=&gt;字符串格式</span>
</span></span></code></pre></td></tr></table></div></div><p>判断有没有名字为<code>aaa</code>的<code>option</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>if</span> config<span style=color:#000;font-weight:700>.</span>has_option(<span style=color:#d14>&#39;mysqld&#39;</span>, <span style=color:#d14>&#39;aaa&#39;</span>):
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(config<span style=color:#000;font-weight:700>.</span>get(<span style=color:#d14>&#39;mysqld&#39;</span>, <span style=color:#d14>&#39;aaaa&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>查看值的类型</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(<span style=color:#0086b3>type</span>(config<span style=color:#000;font-weight:700>.</span>get(<span style=color:#d14>&#39;mysqld&#39;</span>, <span style=color:#d14>&#39;skip-grant-table&#39;</span>))) <span style=color:#998;font-style:italic>#&lt;class &#39;str&#39;&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>转换成布尔类型</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(config<span style=color:#000;font-weight:700>.</span>getboolean(<span style=color:#d14>&#39;mysqld&#39;</span>, <span style=color:#d14>&#39;skip-grant-table&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(config<span style=color:#000;font-weight:700>.</span>getint(<span style=color:#d14>&#39;mysqld&#39;</span>, <span style=color:#d14>&#39;port&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(config<span style=color:#000;font-weight:700>.</span>getfloat(<span style=color:#d14>&#39;mysqld&#39;</span>, <span style=color:#d14>&#39;port&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>向文件中添加section和option</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>config<span style=color:#000;font-weight:700>.</span>add_section(<span style=color:#d14>&#39;client1&#39;</span>)
</span></span><span style=display:flex><span>config<span style=color:#000;font-weight:700>.</span>set(<span style=color:#d14>&#39;client1&#39;</span>, <span style=color:#d14>&#39;name&#39;</span>, <span style=color:#d14>&#39;jack&#39;</span>)
</span></span><span style=display:flex><span>config<span style=color:#000;font-weight:700>.</span>set(<span style=color:#d14>&#39;client1&#39;</span>, <span style=color:#d14>&#39;port&#39;</span>, <span style=color:#d14>&#39;2000&#39;</span>)
</span></span><span style=display:flex><span>config<span style=color:#000;font-weight:700>.</span>write(<span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;my.ini&#39;</span>, <span style=color:#d14>&#39;w&#39;</span>, encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p><code>my.ini</code>文件</p><p><img src=/postimages/image-20220326204239624.webp alt=image-20220326204239624></p><p>将<code>section（client1）</code>中<code>option(port)</code>对应的值<code>2000</code>改为<code>3000</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>config<span style=color:#000;font-weight:700>.</span>set(<span style=color:#d14>&#39;client1&#39;</span>, <span style=color:#d14>&#39;port&#39;</span>, <span style=color:#d14>&#39;3000&#39;</span>)
</span></span><span style=display:flex><span>config<span style=color:#000;font-weight:700>.</span>write(<span style=color:#0086b3>open</span>(<span style=color:#d14>&#39;my.ini&#39;</span>, <span style=color:#d14>&#39;w&#39;</span>, encoding<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>查看<code>my.ini</code>文件，<code>port</code>对应的值已经改变。</p><h2 id=hashlib模块>hashlib模块</h2><h3 id=什么叫hash>什么叫hash?</h3><p>hash是一种算法（<code>3.x</code>里代替了<code>md5模块</code>和<code>sha模块</code>，主要提供 <code>SHA1, SHA224, SHA256, SHA384, SHA512 ，MD5 算法</code>），该算法接受传入的内容，经过运算得到一串hash值。</p><h3 id=hash值的特点>hash值的特点</h3><p>只要传入的内容一样，得到的hash值必然一样=====>要用明文传输密码文件完整性校验。</p><p>不能由hash值返解成内容=======》把密码做成hash值，不应该在网络传输明文密码。</p><p>只要使用的hash算法不变，无论校验的内容有多大，得到的hash值长度是固定的。</p><p>hash算法就像一座工厂，工厂接收你送来的原材料（可以用<code>m.update()</code>为工厂运送原材料），经过加工返回的产品就是<code>hash值</code>。</p><p><img src=/postimages/image-20220326213810288.webp alt=image-20220326213810288></p><p>练习</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>hashlib</span>
</span></span><span style=display:flex><span>m <span style=color:#000;font-weight:700>=</span> hashlib<span style=color:#000;font-weight:700>.</span>md5() <span style=color:#998;font-style:italic># m=hashlib.sha256()</span>
</span></span><span style=display:flex><span>m<span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;jack&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(m<span style=color:#000;font-weight:700>.</span>hexdigest()) <span style=color:#998;font-style:italic>#4ff9fc6e4e5d5f590c4f2134a8cc96d1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m<span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;j&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(m<span style=color:#000;font-weight:700>.</span>hexdigest()) <span style=color:#998;font-style:italic>#636a4e0a176a6cbb43dd00aec17e64ab</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m2 <span style=color:#000;font-weight:700>=</span> hashlib<span style=color:#000;font-weight:700>.</span>sha3_256()
</span></span><span style=display:flex><span>m2<span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;jack123&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(m2<span style=color:#000;font-weight:700>.</span>hexdigest()) <span style=color:#998;font-style:italic>#1183ac670862872ae3315c178a68dddd6166a004b0086bfa23f70e780fe7545c</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m2<span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;j&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(m2<span style=color:#000;font-weight:700>.</span>hexdigest()) <span style=color:#998;font-style:italic>#fe50db7bfb8a1e79934413625d2024114de0afd62bd17c3e9d97aee74f8553c6</span>
</span></span></code></pre></td></tr></table></div></div><p>注意：把一段很长的数据<code>update多次</code>，与一次<code>update</code>这段长数据，得到的结果一样。但是<code>update</code>多次为校验大文件提供了可能。</p><p>以上加密算法虽然依然非常厉害，但时候存在缺陷，即：通过撞库可以反解。所以，有必要对加密算法中添加自定义key再来做加密。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>hashlib</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>hash</span> <span style=color:#000;font-weight:700>=</span> hashlib<span style=color:#000;font-weight:700>.</span>sha256(<span style=color:#d14>&#39;898oaFs09f&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>hash</span><span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;alvin&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(<span style=color:#0086b3>hash</span><span style=color:#000;font-weight:700>.</span>hexdigest()) <span style=color:#998;font-style:italic>#e79e68f070cdedcfe63eaf1a2e92c83b4cfb1b5c6bc452d214c1b7e77cdfd1c7</span>
</span></span></code></pre></td></tr></table></div></div><p>模拟用户登录并把密码哈希</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>name <span style=color:#000;font-weight:700>=</span> <span style=color:#0086b3>input</span>(<span style=color:#d14>&#39;user&gt;&gt;: &#39;</span>)
</span></span><span style=display:flex><span>pwd <span style=color:#000;font-weight:700>=</span> <span style=color:#0086b3>input</span>(<span style=color:#d14>&#39;password&gt;&gt;: &#39;</span>)
</span></span><span style=display:flex><span>m <span style=color:#000;font-weight:700>=</span> hashlib<span style=color:#000;font-weight:700>.</span>md5()
</span></span><span style=display:flex><span>m<span style=color:#000;font-weight:700>.</span>update(pwd<span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>pwd <span style=color:#000;font-weight:700>=</span> m<span style=color:#000;font-weight:700>.</span>hexdigest()
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(name, pwd) <span style=color:#998;font-style:italic># jack 1d6c1e168e362bc0092f247399003a88(jack123)</span>
</span></span></code></pre></td></tr></table></div></div><p>模拟撞库，先生成字典。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>cryt_pwd <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#39;1d6c1e168e362bc0092f247399003a88&#39;</span>
</span></span><span style=display:flex><span>pwds<span style=color:#000;font-weight:700>=</span>[
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;jack1234&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;jack&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;jack456&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#d14>&#39;jack123&#39;</span>
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>mack_dic</span>(pwds):
</span></span><span style=display:flex><span>    dic <span style=color:#000;font-weight:700>=</span> {}
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>for</span> pwd <span style=color:#000;font-weight:700>in</span> pwds:
</span></span><span style=display:flex><span>        m <span style=color:#000;font-weight:700>=</span> hashlib<span style=color:#000;font-weight:700>.</span>md5(pwd<span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>        dic[pwd] <span style=color:#000;font-weight:700>=</span> m<span style=color:#000;font-weight:700>.</span>hexdigest()
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>return</span> dic
</span></span><span style=display:flex><span>dic <span style=color:#000;font-weight:700>=</span> mack_dic(pwds)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> pwd <span style=color:#000;font-weight:700>in</span> dic:
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>if</span> dic[pwd] <span style=color:#000;font-weight:700>==</span> cryt_pwd:
</span></span><span style=display:flex><span>        <span style=color:#0086b3>print</span>(pwd)
</span></span></code></pre></td></tr></table></div></div><p><code>结果：jack123</code></p><p>python 还有一个 <code>hmac 模块</code>，它内部对我们创建 <code>key</code> 和 内容 进行进一步的处理然后再加密</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>hmac</span>
</span></span><span style=display:flex><span>h1<span style=color:#000;font-weight:700>=</span>hmac<span style=color:#000;font-weight:700>.</span>new(<span style=color:#d14>&#39;hello&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>),digestmod<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;md5&#39;</span>)
</span></span><span style=display:flex><span>h1<span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;world&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(h1<span style=color:#000;font-weight:700>.</span>hexdigest())
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>hmac</span>
</span></span><span style=display:flex><span>m <span style=color:#000;font-weight:700>=</span> hmac<span style=color:#000;font-weight:700>.</span>new(key<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;加盐&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>), msg<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;jack123&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>), digestmod<span style=color:#000;font-weight:700>=</span>hashlib<span style=color:#000;font-weight:700>.</span>sha1)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(m<span style=color:#000;font-weight:700>.</span>hexdigest())
</span></span></code></pre></td></tr></table></div></div><p>要想保证<code>hmac</code>最终结果一致，必须保证：
<code>hmac.new</code>括号内指定的初始key一样
无论<code>update</code>多少次，校验的内容累加到一起是一样的内容</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#998;font-style:italic># 操作一</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>hmac</span>
</span></span><span style=display:flex><span>h1<span style=color:#000;font-weight:700>=</span>hmac<span style=color:#000;font-weight:700>.</span>new(<span style=color:#d14>&#39;hello&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>),digestmod<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;md5&#39;</span>)
</span></span><span style=display:flex><span>h1<span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;world&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(h1<span style=color:#000;font-weight:700>.</span>hexdigest()) <span style=color:#998;font-style:italic># 0e2564b7e100f034341ea477c23f283b</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 操作二</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>hmac</span>
</span></span><span style=display:flex><span>h2<span style=color:#000;font-weight:700>=</span>hmac<span style=color:#000;font-weight:700>.</span>new(<span style=color:#d14>&#39;hello&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>),digestmod<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;md5&#39;</span>)
</span></span><span style=display:flex><span>h2<span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;w&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>h2<span style=color:#000;font-weight:700>.</span>update(<span style=color:#d14>&#39;orld&#39;</span><span style=color:#000;font-weight:700>.</span>encode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(h1<span style=color:#000;font-weight:700>.</span>hexdigest()) <span style=color:#998;font-style:italic># 0e2564b7e100f034341ea477c23f283b</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=subprocess模块>subprocess模块</h2><p>在<code>linux</code>中使用<code>subporcess</code>模块可以实现shell命令效果。</p><p>在<code>windows</code>中使用可以实现<code>windows平台</code>下的命令。</p><p>举例：在<code>Linux</code>下查找<code>/root路径</code>下所有以<code>.txt</code>结尾的文件。</p><p>shell 实现</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ls /root | grep txt$
</span></span></code></pre></td></tr></table></div></div><p><code>subprocess模块</code>实现</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>subprocess</span>
</span></span><span style=display:flex><span>res1<span style=color:#000;font-weight:700>=</span>subprocess<span style=color:#000;font-weight:700>.</span>Popen(<span style=color:#d14>&#39;ls /root&#39;</span>, shell<span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>True</span>,stdout<span style=color:#000;font-weight:700>=</span>subprocess<span style=color:#000;font-weight:700>.</span>PIPE)
</span></span><span style=display:flex><span>res<span style=color:#000;font-weight:700>=</span>subprocess<span style=color:#000;font-weight:700>.</span>Popen(<span style=color:#d14>&#39;grep txt$&#39;</span>, shell<span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>True</span>, stdin<span style=color:#000;font-weight:700>=</span>res1<span style=color:#000;font-weight:700>.</span>stdout, stdout<span style=color:#000;font-weight:700>=</span>subprocess<span style=color:#000;font-weight:700>.</span>PIPE)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(res<span style=color:#000;font-weight:700>.</span>stdout<span style=color:#000;font-weight:700>.</span>read()<span style=color:#000;font-weight:700>.</span>decode(<span style=color:#d14>&#39;utf-8&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>解析：</p><p><code>subprocess.Popen()</code>执行命令<code>ls /root</code>并传入管道（<code>subprocess.PIPE</code>）并赋值给<code>res1</code></p><p><code>shell=True</code>指定用<code>shell</code>来执行。</p><p><code>subprocess.Popen()</code>执行命令<code>grep txt$</code>先把<code>res1</code>传进来，然后再把整个命令作为输出，最后赋值给res。</p><p>读输出的内容，<code>linux平台</code>默认编码为<code>utf-8</code>。</p><p>结果：</p><pre tabindex=0><code>a.txt
output.txt
url.txt
</code></pre><p>windows平台</p><p>查看当前系统所有任务</p><p><code>shell</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>tasklist
</span></span></code></pre></td></tr></table></div></div><p>使用<code>subprocess</code>实现</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>subprocess</span>
</span></span><span style=display:flex><span>res<span style=color:#000;font-weight:700>=</span>subprocess<span style=color:#000;font-weight:700>.</span>Popen(<span style=color:#d14>&#39;tasklist&#39;</span>, shell<span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>True</span>, stdout<span style=color:#000;font-weight:700>=</span>subprocess<span style=color:#000;font-weight:700>.</span>PIPE)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(res<span style=color:#000;font-weight:700>.</span>stdout<span style=color:#000;font-weight:700>.</span>read()<span style=color:#000;font-weight:700>.</span>decode(<span style=color:#d14>&#39;gbk&#39;</span>))
</span></span></code></pre></td></tr></table></div></div><p>注意：windows下默认编码为<code>gbk</code>。使用其他编码会出现乱码情况。</p><p>结果</p><pre tabindex=0><code>映像名称                       PID 会话名              会话#       内存使用 
========================= ======== ================ =========== ============
System Idle Process              0 Services                   0          8 K
System                           4 Services                   0        148 K
Secure System                   88 Services                   0     73,304 K
Registry                       156 Services                   0    108,364 K
smss.exe                       532 Services                   0      1,232 K
csrss.exe                      868 Services                   0      5,128 K
Everything.exe               14296 Console                    1    110,268 K
LogiOptions.exe               2244 Console                    1     15,932 K
conhost.exe                   6812 Console                    1     11,480 K
python.exe                    9740 Console                    1     10,116 K
cmd.exe                       3740 Console                    1      4,852 K
tasklist.exe                 15428 Console                    1      9,824 K
</code></pre><p>官方文档<a href="https://docs.python.org/2/library/subprocess.html?highlight=subprocess#frequently-used-arguments">参考</a></p><p><strong><code>BeautifulSoup4</code>将复杂的<code>HTML</code>文档转换成一个复杂的树形结构，每个节点都是Python对象，所有对象可以归纳为4种</strong></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>Tag
</span></span><span style=display:flex><span>NavigableString
</span></span><span style=display:flex><span>BeautifulSoup
</span></span><span style=display:flex><span>Comment
</span></span></code></pre></td></tr></table></div></div><h3 id=全局代码>全局代码</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>from</span> <span style=color:#555>bs4</span> <span style=color:#000;font-weight:700>import</span> BeautifulSoup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>file <span style=color:#000;font-weight:700>=</span> <span style=color:#0086b3>open</span>(<span style=color:#d14>r</span><span style=color:#d14>&#34;D:\code2022\auto-work\douban\test\baidu.html&#34;</span>,<span style=color:#d14>&#34;rb&#34;</span>)
</span></span><span style=display:flex><span>html <span style=color:#000;font-weight:700>=</span> file<span style=color:#000;font-weight:700>.</span>read()<span style=color:#000;font-weight:700>.</span>decode(<span style=color:#d14>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span>bs <span style=color:#000;font-weight:700>=</span> BeautifulSoup(html,<span style=color:#d14>&#34;html.parser&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>title) <span style=color:#998;font-style:italic># &lt;title&gt;百度一下，你就知道&lt;/title&gt;</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>a)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>head)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(<span style=color:#0086b3>type</span>(bs<span style=color:#000;font-weight:700>.</span>head)) <span style=color:#998;font-style:italic># &lt;class &#39;bs4.element.Tag&#39;&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=tag-标签及其内容>Tag 标签及其内容</h3><p>拿到它所找到的第一个内容</p><p><code>NavigableString</code> 标签里的内容（字符串）</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>title<span style=color:#000;font-weight:700>.</span>string) <span style=color:#998;font-style:italic># 百度一下，你就知道</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(<span style=color:#0086b3>type</span>(bs<span style=color:#000;font-weight:700>.</span>title<span style=color:#000;font-weight:700>.</span>string)) <span style=color:#998;font-style:italic># &lt;class &#39;bs4.element.NavigableString&#39;&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><code>BeautifulSoup</code> 表示整个文档</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>a<span style=color:#000;font-weight:700>.</span>attrs)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(<span style=color:#0086b3>type</span>(bs)) <span style=color:#998;font-style:italic># &lt;class &#39;bs4.BeautifulSoup&#39;&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Comment</code> 是一个特殊的<code>NavigableString</code>，输出的内容不包含注释符号。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>name) <span style=color:#998;font-style:italic># [document]</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(bs)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>a<span style=color:#000;font-weight:700>.</span>string)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(<span style=color:#0086b3>type</span>(bs<span style=color:#000;font-weight:700>.</span>a<span style=color:#000;font-weight:700>.</span>string))
</span></span></code></pre></td></tr></table></div></div><p>文档的遍历,遍历文档树。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>head<span style=color:#000;font-weight:700>.</span>contents)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(bs<span style=color:#000;font-weight:700>.</span>head<span style=color:#000;font-weight:700>.</span>contents[<span style=color:#099>1</span>])
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 更多内容，搜索文档。</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=文档的搜索>文档的搜索</h3><h4 id=find_all><code>find_all()</code></h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#998;font-style:italic># 字符串过滤：会查找与字符串完全匹配的内容</span>
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(<span style=color:#d14>&#34;a&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>re</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 正则表达式搜索：使用search() 方法来匹配内容</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(re<span style=color:#000;font-weight:700>.</span>compile(<span style=color:#d14>&#34;a&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 方法： 传入一个函数（方法），根据函数的要求来搜索(了解)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>name_is_exits</span>(tag):
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>return</span> tag<span style=color:#000;font-weight:700>.</span>has_attr(<span style=color:#d14>&#34;name&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(name_is_exits)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> item <span style=color:#000;font-weight:700>in</span> t_list:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(item)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(t_list)
</span></span></code></pre></td></tr></table></div></div><h4 id=kwargs-参数><code>kwargs 参数</code></h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(<span style=color:#0086b3>id</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;head&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(href<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;http://news.baidu.com&#34;</span>)
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(class_<span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> item <span style=color:#000;font-weight:700>in</span> t_list:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(item)
</span></span></code></pre></td></tr></table></div></div><h4 id=text参数><code>text参数</code></h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(text<span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;hao123&#34;</span>) 
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(text<span style=color:#000;font-weight:700>=</span>[<span style=color:#d14>&#34;hao123&#34;</span>,<span style=color:#d14>&#34;地图&#34;</span>,<span style=color:#d14>&#34;贴吧&#34;</span>]) 
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(text<span style=color:#000;font-weight:700>=</span>re<span style=color:#000;font-weight:700>.</span>compile(<span style=color:#d14>&#34;\d&#34;</span>))  <span style=color:#998;font-style:italic># 应用正则表达式来查找包含特定文本的内容（标签里的字符串）</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=limit-参数><code>limit 参数</code></h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>find_all(<span style=color:#d14>&#34;a&#34;</span>,limit<span style=color:#000;font-weight:700>=</span><span style=color:#099>3</span>)
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> item <span style=color:#000;font-weight:700>in</span> t_list:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(item)
</span></span></code></pre></td></tr></table></div></div><h4 id=css-选择器><code>css 选择器</code></h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>select(<span style=color:#d14>&#39;title&#39;</span>) <span style=color:#998;font-style:italic># 通过标签来查找</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> item <span style=color:#000;font-weight:700>in</span> t_list:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(item)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>select(<span style=color:#d14>&#34;.mnav&#34;</span>) <span style=color:#998;font-style:italic># 通过类名查找</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> item <span style=color:#000;font-weight:700>in</span> t_list:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(item)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>select(<span style=color:#d14>&#34;#u1&#34;</span>)   <span style=color:#998;font-style:italic># 通过id查找</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> item <span style=color:#000;font-weight:700>in</span> t_list:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(item)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>select(<span style=color:#d14>&#34;a[class=&#39;guide-info&#39;]&#34;</span>) <span style=color:#998;font-style:italic># 通过属性来查找</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> item <span style=color:#000;font-weight:700>in</span> t_list:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(item)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>select(<span style=color:#d14>&#34;head &gt; title&#34;</span>) <span style=color:#998;font-style:italic># 通过子标签来查找</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> item <span style=color:#000;font-weight:700>in</span> t_list:
</span></span><span style=display:flex><span>    <span style=color:#0086b3>print</span>(item)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t_list <span style=color:#000;font-weight:700>=</span> bs<span style=color:#000;font-weight:700>.</span>select(<span style=color:#d14>&#34;.mnav ~ .bri&#34;</span>) <span style=color:#998;font-style:italic># 查找mnav下的bri标签</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(t_list[<span style=color:#099>0</span>]<span style=color:#000;font-weight:700>.</span>get_text())
</span></span></code></pre></td></tr></table></div></div><h2 id=正则表达式与re库>正则表达式与Re库</h2><h3 id=正则表达式常用操作符1>正则表达式常用操作符（1）</h3><table><thead><tr><th>操作符</th><th>说明</th><th>实例</th></tr></thead><tbody><tr><td>.</td><td>表示任何单个字符</td><td></td></tr><tr><td>[ ]</td><td>字符集，对单个字符给出取值范围</td><td>[<code>abc</code>]表示<code>a、b、c</code>,[<code>a-z</code>]表示a到z单个字符</td></tr><tr><td>[^ ]</td><td>非字符集，对单个字符给出排除范围</td><td>[<code>^abc</code>]表示非a或b或c的单个字符</td></tr><tr><td>*</td><td>前一个字符0次或无限次扩展</td><td><code>abc*</code> 表示 <code>ab</code>、<code>abc</code>、<code>abcc</code>、<code>abccc</code>等</td></tr><tr><td>+</td><td>前一个字符1次或无限次扩展</td><td><code>abc+</code> 表示 <code>abc</code>、<code>abcc</code>、<code>abccc</code>等</td></tr><tr><td>？</td><td>前一个字符0次或1次扩展</td><td><code>abc?</code> 表示 <code>ab</code>、<code>abc</code></td></tr><tr><td>|</td><td>左右表达式任意一个</td><td>abc | def 表示 abc、 def</td></tr></tbody></table><h3 id=正则表达式常用操作符2>正则表达式常用操作符（2）</h3><table><thead><tr><th>操作符</th><th>说明</th><th>实例</th></tr></thead><tbody><tr><td><code>{m}</code></td><td>扩展前一个字符<code>m</code>次</td><td><code>ab{2}c</code>表示<code>abbc</code></td></tr><tr><td><code>{m,n}</code></td><td>扩展前一个字符<code>m至n</code>次（含<code>n</code>）</td><td><code>ab{1,2}c</code>表示<code>abc</code>、<code>abbc</code></td></tr><tr><td><code>^</code></td><td>匹配字符串开头</td><td><code>^abc</code> 表示<code>abc</code>且在一个字符串的开头</td></tr><tr><td><code>$</code></td><td>匹配字符串结尾</td><td><code>abc$</code>表示<code>abc</code>且在一个字符串末尾</td></tr><tr><td><code>()</code></td><td>分组标记，内部只能使用 | 操作符</td><td>(abc)表示abc，(abc|def)表示abc、def</td></tr><tr><td><code>\d</code></td><td>数字，等价于<code>[0-9]</code></td><td></td></tr><tr><td><code>\w</code></td><td>单词字符，等价于<code>[A-Za-z0-9_]</code></td><td></td></tr></tbody></table><h3 id=re库主要功能函数>Re库主要功能函数</h3><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td><code>re.search()</code></td><td>在一个字符串中搜索匹配正则表达式的第一个位置，返回<code>match</code>对象</td></tr><tr><td><code>re.match()</code></td><td>从一个字符串的开始位置起匹配正则表达式，返回<code>match</code>对象</td></tr><tr><td><code>re.findall()</code></td><td>搜索字符串，以列表类型返回全部能匹配的子串</td></tr><tr><td><code>re.split()</code></td><td>将一个字符串按照正则表达式匹配结果进行分割，返回列表类型</td></tr><tr><td><code>re.finditer()</code></td><td>搜索字符串，返回一个匹配结果的迭代类型，每个迭代元素是match对象</td></tr><tr><td><code>re.sub()</code></td><td>在一个字符串中替换所有匹配正则表达式的字串，返回替换后的字符串。</td></tr></tbody></table><p>正则表达式可以包含一些可选标志修饰符来控制匹配的模式。修饰符被指定为一个可选的标志。多个标志可以通过按位<code>OR(|)</code>它们来指定。如<code>re.l|re.M</code>被设置成<code>|</code>和<code>M</code>标志。</p><table><thead><tr><th>修饰符</th><th>描述</th></tr></thead><tbody><tr><td><code>re.l</code></td><td>使匹配对大小写不敏感</td></tr><tr><td><code>re.L</code></td><td>做本地化识别（local-aware）</td></tr><tr><td><code>re.M</code></td><td>多行匹配，影响<code>^</code>和<code>$</code></td></tr><tr><td><code>re.S</code></td><td>使<code>.</code>匹配包括换行在内的所有字符</td></tr><tr><td><code>re.U</code></td><td>根据<code>Unicode</code>字符集解析字符。这个标志影响<code>\w</code> ，<code>\W</code>， <code>\b</code>， <code>\B</code></td></tr><tr><td><code>re.X</code></td><td>该标志通过给与你更灵活的格式以便你将正则表达式写的更易于理解。</td></tr></tbody></table><p><strong>正则表达式：字符串模式（判断字符串是否符合一定的标准）</strong></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000;font-weight:700>import</span> <span style=color:#555>re</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 创建模式对象</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pat <span style=color:#000;font-weight:700>=</span> re<span style=color:#000;font-weight:700>.</span>compile(<span style=color:#d14>&#34;AA&#34;</span>) <span style=color:#998;font-style:italic># 此处的AA 是正则表达式，用来去验证其他字符串</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m <span style=color:#000;font-weight:700>=</span> pat<span style=color:#000;font-weight:700>.</span>search(<span style=color:#d14>&#34;CBA&#34;</span>) <span style=color:#998;font-style:italic># search 字符串被校验的内容</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m <span style=color:#000;font-weight:700>=</span> pat<span style=color:#000;font-weight:700>.</span>search(<span style=color:#d14>&#34;ABCAA&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(m) <span style=color:#998;font-style:italic># &lt;re.Match object; span=(3, 5), match=&#39;AA&#39;&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m <span style=color:#000;font-weight:700>=</span> pat<span style=color:#000;font-weight:700>.</span>search(<span style=color:#d14>&#34;ABCAADDCCAAA&#34;</span>) <span style=color:#998;font-style:italic># search 方法进行比对查找</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(m) <span style=color:#998;font-style:italic># &lt;re.Match object; span=(3, 5), match=&#39;AA&#39;&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 没有模式对象</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m <span style=color:#000;font-weight:700>=</span> re<span style=color:#000;font-weight:700>.</span>search(<span style=color:#d14>&#34;asd&#34;</span>,<span style=color:#d14>&#34;Aasd&#34;</span>) <span style=color:#998;font-style:italic># 前面的字符串是规则（模板），后面的字符串是被校验的对象。</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(m) <span style=color:#998;font-style:italic># &lt;re.Match object; span=(1, 4), match=&#39;asd&#39;&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#34;a&#34;</span>,<span style=color:#d14>&#34;ASDaDFGAa&#34;</span>))    <span style=color:#998;font-style:italic># [&#39;a&#39;, &#39;a&#39;]  前面字符串是规则（正则表达式），后面字符串是被校验的字符串</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#34;[A-Z]&#34;</span>,<span style=color:#d14>&#34;ASDaDFGAa&#34;</span>))  <span style=color:#998;font-style:italic># [&#39;A&#39;, &#39;S&#39;, &#39;D&#39;, &#39;D&#39;, &#39;F&#39;, &#39;G&#39;, &#39;A&#39;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>findall(<span style=color:#d14>&#34;[A-Z]+&#34;</span>,<span style=color:#d14>&#34;ASDaDFGAa&#34;</span>)) <span style=color:#998;font-style:italic># [&#39;ASD&#39;, &#39;DFGA&#39;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># sub </span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(re<span style=color:#000;font-weight:700>.</span>sub(<span style=color:#d14>&#34;a&#34;</span>,<span style=color:#d14>&#34;A&#34;</span>,<span style=color:#d14>&#34;abcdcasd&#34;</span>))       <span style=color:#998;font-style:italic># 找到a用A替换，在第三个字符串种查找</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 建议用正则表达式中，被比较的字符串前面加上r，不用担心转义字符的问题。</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>a <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>r</span><span style=color:#d14>&#34;\aabd-\&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>print</span>(a) <span style=color:#998;font-style:italic># \aabd-\&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div></div></div><div id=footer><div class=container-footer><div class=beian><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="></a><a href target=_blank><span class=some>icp...<span></a></div><div class=info><a href=https://github.com/loveminimal/hugo-theme-virgo>🕊️</a> 2021 - <span id=info-date></span></div></div></div><div class=cool-after></div></body></html>