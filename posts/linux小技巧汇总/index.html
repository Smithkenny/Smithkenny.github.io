<!doctype html><html lang=zh-CN><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content="Linux小技巧汇总 - https://www.haipengv.com/posts/linux%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB/"><meta name=author content="Smith - https://www.haipengv.com/"><meta name=msvalidate.01 content="B46311949B856F2A7015F366FB3CE878"><title>Linux小技巧汇总</title><base target=_self><link rel=icon type=image/png href=/favicon.ico><link rel=stylesheet href=https://www.haipengv.com/style.min.9a0cea23154ac1941e15c25aa2d31b77285a217d2606ec05b55236428cf1c3e6.css><script>const DARK=!1</script><script type=text/javascript src=/main.js defer></script></head><body class=active-animate><div class=cool-before></div><div id=header><div class=container-header><div class=right><h1 class=title>Linux小技巧汇总</h1><div id=toc>📜</div></div></div></div><div id=content><div class="container-main container-page"><div class=rel><div class=curtag-desc><a href=https://www.haipengv.com/tags/linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/><img src=/imgs/icons/tag.svg width=16> 相关文章：Linux基础知识 <sup>44</sup></a></div><div class=curtag-post><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos7-%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/>CentOS7 升级内核</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos7.9%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE%E7%BB%BC%E5%90%88%E6%8C%87%E5%8D%97/>CentOS7.9系统管理与服务配置综合指南</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos7%E4%BD%BF%E7%94%A8systemd%E7%AE%A1%E7%90%86%E7%A8%8B%E5%BA%8F/>Centos7使用systemd管理程序</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos7-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4/>CentOS7常规命令</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos7%E6%9C%AC%E5%9C%B0%E6%BA%90%E5%8F%8A%E5%85%B1%E4%BA%AB%E6%BA%90%E6%90%AD%E5%BB%BA02/>Centos7本地源及共享源搭建02</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos7%E6%9C%AC%E5%9C%B0%E6%BA%90%E5%92%8C%E7%BD%91%E7%BB%9C%E6%BA%90%E5%88%9B%E5%BB%BA/>Centos7本地源和网络源创建</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos7%E7%BD%91%E5%8D%A1%E6%94%B9%E5%9B%9Eeth0%E6%98%BE%E7%A4%BA/>Centos7网卡改回eth0显示</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos8%E9%85%8D%E7%BD%AEyum%E6%BA%90/>CentOS8配置yum源</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos%E6%90%AD%E5%BB%BA%E5%86%85%E7%BD%91%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/>Centos搭建内网邮件服务器</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/crontab%E8%B8%A9%E5%9D%91%E8%AE%B0/>Crontab踩坑记</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/git%E5%85%A5%E9%97%A8/>Git入门</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/http%E5%92%8Chttps%E5%90%84%E7%A7%8D%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95/>Http和Https各种方法测试</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/>Iptables常用总结</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux-oom%E4%BB%8B%E7%BB%8D/>Linux OOM介绍</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E4%B8%8B%E6%B7%B7%E6%9D%82%E6%A8%A1%E5%BC%8F%E5%88%A4%E6%96%AD/>Linux下混杂模式判断</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E4%B8%AD%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/>Linux中环境变量</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E4%B8%AD%E7%9A%84%E9%9A%94%E7%A6%BB/>Linux中的隔离</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4/>Linux信息查询命令</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E5%9E%83%E5%9C%BE%E6%A1%B6/>Linux垃圾桶</a></div><div class="curtag-post-item curtag-post-item--active"><a href=https://www.haipengv.com/posts/linux%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB/>Linux小技巧汇总</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E6%97%A5%E5%BF%97%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2/>Linux日志大文件切割</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E6%9F%A5%E7%9C%8B%E7%A8%8B%E5%BA%8F%E8%BF%9B%E7%A8%8B%E5%90%AF%E5%8A%A8%E6%97%B6%E9%97%B4/>Linux查看程序进程启动时间</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E6%A0%B9%E5%88%86%E5%8C%BA%E6%BB%A1%E4%BA%86%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/>Linux根分区满了处理方法</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/linux%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9%E5%92%8C%E7%BC%A9%E5%AE%B9/>Linux硬盘扩容和缩容</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/>Pam模块限制登录</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/postman%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/>Postman简单使用</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/redhat6.3yum%E6%BA%90%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3/>Redhat6.3yum源失效解决</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/rsyslog%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/>Rsyslog日志服务器搭建</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/ssh%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E/>SSH相关说明</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%AF%87/>Ubuntu使用上篇</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%8B%E7%AF%87/>Ubuntu使用下篇</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/vsftpd%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/>Vsftpd相关配置</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/vsftp%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E6%8B%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90/>Vsftp不同用户拥有不同权限</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BD%BF%E7%94%A8logrotate%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/>使用logrotate进行日志切割</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BD%BF%E7%94%A8sed%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E7%BD%91%E5%9D%80/>使用sed批量修改网址</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/>使用浏览器登录linux服务器</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%86%85%E7%BD%91%E9%9A%A7%E9%81%93ssh%E6%90%AD%E5%BB%BA%E6%96%B9%E6%B3%95/>内网隧道ssh搭建方法</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E5%B7%A5%E5%85%B7-inxi/>功能强大的硬件信息获取工具-Inxi</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B/>压缩与解压</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E5%A6%82%E4%BD%95%E7%AD%9B%E9%80%89%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5%E5%86%85%E7%9A%84%E6%97%A5%E5%BF%97/>如何筛选指定时间段内的日志</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E6%90%AD%E5%BB%BArss%E8%AE%A2%E9%98%85%E5%99%A8/>搭建rss订阅器</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E6%96%B0%E7%89%A9%E7%90%86%E7%A3%81%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD%E8%BF%87%E7%A8%8B/>新物理磁盘格式化、分区、挂载过程</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%97%B6%E9%97%B4/>查看系统安装时间</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E6%A8%A1%E6%8B%9Fssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/>模拟ssh执行远程命令</a></div></div></div><div class=desc><span><svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667l-324.522666 324.48c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334L685.098667 499.2 524.885333 338.986667zM585.258667 278.656l160.170666 160.213333 102.144-102.144a19.712 19.712.0 000-27.861333l-132.48-132.437333a19.456 19.456.0 00-27.605333.0L585.258667 278.613333zM701.312 85.333333c27.946667.0 54.741333 11.136 74.282667 30.848L907.904 248.490667a105.045333 105.045333.0 010 148.565333L424.874667 879.957333C395.050667 914.304 352.768 935.424 304.426667 938.752H85.333333v-42.666667l.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666a104.789333 104.789333.0 0174.24-30.933334z" p-id="7410" fill="#adb5bd"/></svg>2025-03-16&nbsp;&nbsp;&nbsp;<svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859.0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775.0-360.398 149.372-360.398 356.147S305.225 870.23 512 870.23c206.775.0 357.467-151.455 357.467-358.23.0-23.859 23.634-50.706 53.413-50.706 29.78.0 49.92 26.847 49.92 50.706.0 254.493-206.307 460.8-460.8 460.8s-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4.0 226.684 33.296 312.264 117.369.358.351.358-24.052.0-73.209z" p-id="23839" fill="#adb5bd"/></svg>
2025-03-16&nbsp;&nbsp;&nbsp;</span>
<span><svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028c-70.774903.0-128.089859 57.325793-128.089859 128.03206v446.793671c0 70.7171050000001 57.314956 128.154884 128.089859 128.154884h133.353183a63.940169 63.940169.0 0155.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169.0 0155.212517-31.551041h133.54103c70.576219.0 127.732228-57.289669 127.732227-127.800865V192.391272c0-70.536482-57.181295-127.728615-127.786414-127.728615zM895.884854 639.842407A63.85347 63.85347.0 01832.092795 703.703103h-133.54103a127.753903 127.753903.0 00-110.349172 63.09847l-76.222461 129.856342a.274545.274545.0 010-.050574h-.032512s-.021675.061411-.032512.061412l-76.1466-129.85273a127.804477 127.804477.0 00-110.385297-63.11292H192.030028A64.207489 64.207489.0 01127.880338 639.488388V192.694717a64.102729 64.102729.0 0164.14969-64.091891h640.00858a63.799284 63.799284.0 0163.846246 63.788446v447.451135z" fill="#adb5bd" p-id="33867"/><path d="M608.154093 288.092004a31.970084 31.970084.0 00-31.970084 31.970085v160.078006L441.53396 300.861976a31.970084 31.970084.0 00-57.531702 19.200113v255.760676a31.970084 31.970084.0 0063.940169.0V415.863969l134.650048 179.274507a31.970084 31.970084.0 0057.531703-19.200113V320.062089a31.970084 31.970084.0 00-31.970085-31.970085z" fill="#adb5bd" p-id="33868"/></svg>3691 字</span>&nbsp;
<span><svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667zm0 810.666666C307.2 885.333333 138.666667 716.8 138.666667 512S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"/><path d="M695.466667 567.466667 544 497.066667V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666L669.866667 627.2c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8.0 23.466667-6.4 29.866666-19.2 6.4-14.933333.0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"/></svg>8 分钟</span><div class=container-ctgtag><div class=taxonomy><div class=tag><a href=/tags/linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86>Linux基础知识</a></div></div></div></div><div class=toc><div class=container-page-operation><div class=page-operation><div><a href=/><img src=/imgs/icons/home-2.svg alt></a></div><div><a href=/nav><img src=/imgs/icons/iov-navigate-1.svg alt></a></div><div><a href=/wiki><img src=/imgs/icons/wiki.svg alt></a></div><div><a href=/tags><img src=/imgs/icons/treetags.svg alt></a></div><div id=light-dark><a><img src=/imgs/icons/moon2.svg alt></a></div><div><a href=#><img src=/imgs/icons/up2.svg alt></a></div></div></div><nav id=TableOfContents><ul><li><ul><li><a href=#linux小技巧汇总>Linux小技巧汇总</a></li><li><a href=#1超时不操作自动退出登录tmout>1.超时不操作自动退出登录TMOUT</a></li><li><a href=#2mnap端口扫描>2.MNAP端口扫描</a></li><li><a href=#3网络瓶颈测试工具>3.网络瓶颈测试工具</a></li><li><a href=#4linux下不能连接ppalaunchpadnet的问题中科大软件源>4.Linux下不能连接ppa.launchpad.net的问题（中科大软件源）</a></li><li><a href=#5查找指定文件中指定内容>5.查找指定文件中指定内容</a></li><li><a href=#6避免执行类似于-curl--sh-的命令>6.避免执行类似于 curl | sh 的命令</a></li><li><a href=#7流行的-linux-发行版包管理器命令以及命令操作内容的对应关系>7.流行的 Linux 发行版包管理器命令以及命令操作内容的对应关系</a></li><li><a href=#8tldr-软件>8.tldr 软件</a></li><li><a href=#9非对称加密>9.非对称加密</a></li><li><a href=#10进程>10.进程</a></li><li><a href=#11定时任务>11.定时任务</a></li><li><a href=#12日志>12.日志</a></li><li><a href=#13下载工具>13.下载工具</a></li><li><a href=#14文本处理>14.文本处理</a></li><li><a href=#15在linux下编译windows程序>15.在linux下编译windows程序</a></li><li><a href=#16history中不记录用户操作>16.history中不记录用户操作</a></li><li><a href=#17vim下快速删除列>17.vim下快速删除列</a></li><li><a href=#18ssh免密登录交换密钥方式>18.ssh免密登录（交换密钥方式）</a></li><li><a href=#19iptables保存规则并导入定义好的规则>19.iptables保存规则并导入定义好的规则</a></li><li><a href=#20递归当前文件夹内文件从大到小排序>20.递归当前文件夹内文件从大到小排序</a></li><li><a href=#21yum安装软件包时保存rpm包到本地>21.yum安装软件包时，保存rpm包到本地。</a></li><li><a href=#22同一台机器启动多个tomcat>22.同一台机器启动多个tomcat</a></li></ul></li></ul></nav></div><div class=content><h3 id=linux小技巧汇总>Linux小技巧汇总</h3><h3 id=1超时不操作自动退出登录tmout>1.超时不操作自动退出登录TMOUT</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>vi /etc/profile 
</span></span><span style=display:flex><span>最后一行加上
</span></span><span style=display:flex><span><span style=color:teal>TMOUT</span><span style=color:#000;font-weight:700>=</span><span style=color:#099>90</span>
</span></span><span style=display:flex><span>退出当前用户使配置生效
</span></span><span style=display:flex><span><span style=color:#0086b3>exit</span>
</span></span><span style=display:flex><span>重新登录
</span></span></code></pre></td></tr></table></div></div><p>查看是否生效</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#0086b3>set</span> | grep -i tmout
</span></span><span style=display:flex><span><span style=color:teal>TMOUT</span><span style=color:#000;font-weight:700>=</span><span style=color:#099>90</span>
</span></span></code></pre></td></tr></table></div></div><p>生效了！！！不操作等待90s会自动退出当前用户！！</p><p>如何取消呢？</p><p>只要将<code>/etc/profile</code>文件中<code>TMOUT=90</code>删除，然后退出使之生效。再次测试即可。</p><h3 id=2mnap端口扫描>2.MNAP端口扫描</h3><p>扫描系统版本：</p><p>nmap -O 目标主机</p><p>nmap -sV &ndash;script=banner 目标主机</p><p>快速扫描端口是否开放</p><p>nmap -p 端口号 -T4 目标主机</p><p>扫描默认1000个常见端口</p><p>nmap 目标主机</p><h3 id=3网络瓶颈测试工具>3.网络瓶颈测试工具</h3><p>客户端</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>
</span></span><span style=display:flex><span>iperf -c ip地址 -p 服务端端口 -u（udp协议） 
</span></span></code></pre></td></tr></table></div></div><p>服务端</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>iperf -s -p 监听端口
</span></span></code></pre></td></tr></table></div></div><p>电子书集合：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>https://github.com/Kensuke-Hinata/statistic/tree/master
</span></span></code></pre></td></tr></table></div></div><h3 id=4linux下不能连接ppalaunchpadnet的问题中科大软件源>4.Linux下不能连接ppa.launchpad.net的问题（中科大软件源）</h3><p>每个ppa都会在/etc/apt/sources.list.d/目录下创建一个list文件，修改:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vi /etc/apt/sources.list.d/ubuntu-toolchain-r-ubuntu-test-xenial.list
</span></span></code></pre></td></tr></table></div></div><p>将文件中http://ppa.launchpad.net替换为https://launchpad.proxy.ustclug.org，如下所示:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>deb https://launchpad.proxy.ustclug.org/ubuntu-toolchain-r/test/ubuntu xenial main
</span></span></code></pre></td></tr></table></div></div><p>更新源</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get update
</span></span></code></pre></td></tr></table></div></div><h3 id=5查找指定文件中指定内容>5.查找指定文件中指定内容</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>find /etc/ -exec grep -Hr 内容 <span style=color:#000;font-weight:700>{}</span> <span style=color:#d14>\;</span>
</span></span></code></pre></td></tr></table></div></div><p>使用这条命令查询，结果返回时间很短。</p><h3 id=6避免执行类似于-curl--sh-的命令>6.避免执行类似于 curl | sh 的命令</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ curl -fsSL https://101.lug.ustc.edu.cn/Ch02/wordpress.sh | sudo bash
</span></span></code></pre></td></tr></table></div></div><p>它的功能是从对应的 URL 获取脚本内容后，直接用 <code>sudo bash</code> 去执行。但是从安全性的角度这是不恰当的，因为网络上的脚本有可能包含恶意内容，直接执行可能会对系统带来安全风险。因此相关命令修改为了首先下载脚本到文件中（<code>wordpress.sh</code> 文件），然后再执行。如果对脚本内容有疑虑，则可以阅读脚本内容，检查其是否和你的预期相一致。</p><p>所以可以将以下命令更改为：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ curl -fsSL https://101.lug.ustc.edu.cn/Ch02/wordpress.sh &gt; wordpress.sh
</span></span></code></pre></td></tr></table></div></div><p>然后执行</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash  wordpress.sh
</span></span></code></pre></td></tr></table></div></div><h3 id=7流行的-linux-发行版包管理器命令以及命令操作内容的对应关系>7.流行的 Linux 发行版包管理器命令以及命令操作内容的对应关系</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>https://wiki.archlinuxcn.org/wiki/Pacman/Rosetta
</span></span></code></pre></td></tr></table></div></div><h3 id=8tldr-软件>8.tldr 软件</h3><p>通常，软件手册中的内容十分繁多，如果只是希望能够快速了解软件的常用用法，可以使用 <code>tldr</code> 软件。</p><p><code>tldr</code> 软件中包含有一个由<a href=https://github.com/tldr-pages/tldr>社区</a>维护的精简版文档，通过几个简单的例子让用户可以快速地一窥软件的使用方法。</p><p>安装</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo apt install tldr
</span></span><span style=display:flex><span>$ <span style=color:#998;font-style:italic># 更新 tldr pages</span>
</span></span><span style=display:flex><span>$ tldr --update
</span></span></code></pre></td></tr></table></div></div><p>使用</p><p>输入 <code>tldr tar</code> 的样例：</p><pre tabindex=0><code>root@peng-VirtualBox:~# tldr tar 
tar

归档实用程序。
通常与压缩方法结合使用，例如 gzip 或 bzip2.
更多信息：https://www.gnu.org/software/tar.

 - 创建存档并将其写入文件：
   tar cf 目标文件.tar 路径/到/文件1 路径/到/文件2 ...

 - 创建一个 gzip 压缩文件并将其写入文件：
   tar czf 目标文件.tar.gz 路径/到/文件1 路径/到/文件2 ...

 - 使用相对路径从目录创建一个 gzip 压缩文件：
   tar czf 目标文件.tar.gz --directory=路径/到/目录 .

 - 详细地将（压缩的）存档文件提取到当前目录中：
   tar xvf 源文件.tar[.gz|.bz2|.xz]

 - 将（压缩的）存档文件解压缩到目标目录中：
   tar xf 源文件.tar[.gz|.bz2|.xz] --directory=目标目录

 - 创建压缩存档并将其写入文件，使用文件扩展名自动确定压缩程序：
   tar caf 目标文件.tar.xz 路径/到/文件1 路径/到/文件2 ...

 - 详细列出 tar 文件的内容：
   tar tvf 源文件.tar

 - 从存档文件中提取与模式匹配的文件：
   tar xf 源文件.tar --wildcards &#34;*.html&#34;
</code></pre><h3 id=9非对称加密>9.非对称加密</h3><p>GPG 签名是非对称密码体系的一个例子。这里，软件包发布者有两把密钥：公钥（供用户公开下载）和私钥（必须妥善保存，不能让别人知道）。发布者使用<strong>私钥</strong>对软件包签名后，用户可以用<strong>公钥</strong>验证软件包确实为该发布者发布，且未被篡改。</p><h3 id=10进程>10.进程</h3><p>优先级：</p><p>nice(NI)</p><p>范围：[-20,19]</p><p>默认值：0</p><p>数值越大，优先级越低。</p><p>priority(PRI)</p><p>计算公式：PRI = NI + 20</p><p>nice值调整：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ nice -n <span style=color:#099>10</span> vim <span style=color:#998;font-style:italic># 以 10 为 nice 值运行 vim</span>
</span></span><span style=display:flex><span>$ renice -n <span style=color:#099>10</span> -p <span style=color:#099>12345</span> <span style=color:#998;font-style:italic># 设置 PID 为 12345 的进程的 nice 值为 10</span>
</span></span></code></pre></td></tr></table></div></div><p>在正常运行的 Linux 系统中，我们可能会发现有些进程的 PRI 值是 RT，或者是负数。这表明对应的进程有更高的实时性要求（例如内核进程、音频相关进程等），采用了与普通进程不同的调度策略，优先级也相应更高。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>     <span style=color:#099>11</span> root      rt   <span style=color:#099>0</span>       <span style=color:#099>0</span>      <span style=color:#099>0</span>      <span style=color:#099>0</span> S   0.0   0.0   2:07.06 migration/0                                                           
</span></span></code></pre></td></tr></table></div></div><p>进程状态表：</p><table><col><col><col><tbody><tr><th colspan=1 rowspan=1 colwidth=232><p><span><strong>状态</strong></span></p></th><th colspan=1 rowspan=1 colwidth=206><p><span><strong>缩写表示</strong></span></p></th><th colspan=1 rowspan=1 colwidth=406><p><span><strong>说明</strong></span></p></th></tr><tr><td colspan=1 rowspan=1 colwidth=232><p>Running</p></td><td colspan=1 rowspan=1 colwidth=206><p>R</p></td><td colspan=1 rowspan=1 colwidth=406><p>正在运行/可以立刻运行</p></td></tr><tr><td colspan=1 rowspan=1 colwidth=232><p>Sleeping</p></td><td colspan=1 rowspan=1 colwidth=206><p>S</p></td><td colspan=1 rowspan=1 colwidth=406><p>可以被中断的睡眠</p></td></tr><tr><td colspan=1 rowspan=1 colwidth=232><p>Disk Sleep</p></td><td colspan=1 rowspan=1 colwidth=206><p>D</p></td><td colspan=1 rowspan=1 colwidth=406><p>不可被中断的睡眠</p></td></tr><tr><td colspan=1 rowspan=1 colwidth=232><p>Traced / Stopped</p></td><td colspan=1 rowspan=1 colwidth=206><p>T</p></td><td colspan=1 rowspan=1 colwidth=406><p>被跟踪/被挂起的进程</p></td></tr><tr><td colspan=1 rowspan=1 colwidth=232><p>Zombie</p></td><td colspan=1 rowspan=1 colwidth=206><p>Z</p></td><td colspan=1 rowspan=1 colwidth=406><p>僵尸进程</p></td></tr></tbody></table><p>后台运行进程不受signup影响</p><p>nohup</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ nohup ping 101.lug.ustc.edu.cn &amp;
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>1<span style=color:#000;font-weight:700>]</span> <span style=color:#099>19258</span>
</span></span><span style=display:flex><span>nohup: ignoring input and appending output to <span style=color:#d14>&#39;/home/ustc/nohup.out&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>在需要屏蔽 SIGHUP 的程序前添加 nohup，则运行时的输出将被<a href=https://101.lug.ustc.edu.cn/Ch06/#redirection>重定向</a>到 nohup.out，也可以通过重定向手段自定义输出的文件。</p><p>孤儿进程：父进程先于子进程退出，此时子进程为孤儿进程(orphan)。</p><p>僵尸进程：子进程先退出，父进程未作出回应（wait），此时子进程为僵尸进程（zombie）。</p><p>孤儿进程（即留下的子进程）由操作系统回收，交给 init「领养」。</p><p>僵尸进程的进程资源大部分已释放，但占用一个 PID，并保存返回值。系统中大量僵尸进程的存在将导致无法创建进程。</p><h3 id=11定时任务>11.定时任务</h3><p>crontab配置教程：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>https://crontab.guru/
</span></span></code></pre></td></tr></table></div></div><h3 id=12日志>12.日志</h3><p>使用 <code>journalctl</code> 查看日志。</p><ol><li><p>某个服务的日志</p><p><code>journalctl</code> 的 <code>-u</code> 参数可以指定 unit，例子如下：</p><pre tabindex=0><code>$ sudo journalctl -u ssh  # 查看 ssh 服务的日志
</code></pre></li><li><p>某个<strong>正在运行</strong>的服务<strong>正在</strong>输出的日志</p><p>在第一条的基础上，可以指定 <code>-f</code> 参数，以获取正在输出的日志：</p><pre tabindex=0><code>$ sudo journalctl -u ssh -f
</code></pre><p>按下 Ctrl + C 退出输出即可。</p></li><li><p>系统<strong>正在</strong>输出的日志</p><pre tabindex=0><code>$ sudo journalctl -f
</code></pre><p>系统日志对于调试系统状态来说是非常有用的信息。</p></li><li><p>上一次启动到关机的所有日志</p><pre tabindex=0><code>$ sudo journalctl -b -1
</code></pre><p><code>-b</code> 参数表示 boot（启动），<code>-1</code> 表示上一次启动。如果不添加 <code>-1</code> 参数，则默认为当前启动的日志。</p></li></ol><h3 id=13下载工具>13.下载工具</h3><p>wget</p><p>批量下载 filelist.txt 中给出的链接：</p><pre tabindex=0><code>$ wget -i filelist.txt
</code></pre><p>安装 oh-my-zsh：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sh -c <span style=color:#d14>&#34;</span><span style=color:#000;font-weight:700>$(</span>wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -<span style=color:#000;font-weight:700>)</span><span style=color:#d14>&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>curl</p><p>输出必应主页的代码：</p><pre tabindex=0><code>$ curl &#34;http://cn.bing.com&#34;
</code></pre><p>使用重定向把必应页面保存至 <code>bing.html</code> 本地：</p><pre tabindex=0><code>$ curl &#34;http://cn.bing.com&#34; &gt; bing.html
</code></pre><p>也可以使用 <code>-o</code> 选项指定输出文件：</p><pre tabindex=0><code>$ curl -o bing.html &#34;http://cn.bing.com&#34;
</code></pre><p>下载 USTCLUG 的 logo：</p><pre tabindex=0><code>$ curl -O &#34;https://ftp.lug.ustc.edu.cn/misc/logo-whiteback-circle.png&#34;
</code></pre><p>只展示 HTTP 响应头内容：</p><pre tabindex=0><code>$ curl -I &#34;http://cn.bing.com&#34;
</code></pre><h3 id=14文本处理>14.文本处理</h3><p>sed</p><p>对于大多数用户来说，最常用 <code>sed</code> 的场合是替换软件源的时候。在阅读了上面的示例之后，以下例子就很简单了。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo sed -i <span style=color:#d14>&#39;s/cn.archive.ubuntu.com/mirrors.ustc.edu.cn/g&#39;</span> /etc/apt/sources.list
</span></span><span style=display:flex><span>$ sudo sed -i <span style=color:#d14>&#39;s/archive.ubuntu.com/mirrors.ustc.edu.cn/g&#39;</span> /etc/apt/sources.list
</span></span><span style=display:flex><span>$ sudo sed -i <span style=color:#d14>&#39;s/security.ubuntu.com/mirrors.ustc.edu.cn/g&#39;</span> /etc/apt/sources.list
</span></span></code></pre></td></tr></table></div></div><h3 id=15在linux下编译windows程序>15.在linux下编译windows程序</h3><p>hello.c</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic>#include &lt;stdio.h&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>int main<span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    puts<span style=color:#000;font-weight:700>(</span><span style=color:#d14>&#34;Hello, world!&#34;</span><span style=color:#000;font-weight:700>)</span>;
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>return</span> 0;
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></td></tr></table></div></div><p>这里使用 mingw 来进行交叉编译。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo apt install gcc-mingw-w64  <span style=color:#998;font-style:italic># 安装 mingw 交叉编译器</span>
</span></span><span style=display:flex><span>$ sudo apt install wine  <span style=color:#998;font-style:italic># 安装 wine Windows 兼容层（默认仅安装 64 位架构支持）</span>
</span></span><span style=display:flex><span>$ x86_64-w64-mingw32-gcc -o hello.exe hello.c  <span style=color:#998;font-style:italic># 编译为 64 位的 Windows 程序</span>
</span></span><span style=display:flex><span>$ file hello.exe  <span style=color:#998;font-style:italic># 确认为 Windows 程序</span>
</span></span><span style=display:flex><span>hello.exe: PE32+ executable <span style=color:#000;font-weight:700>(</span>console<span style=color:#000;font-weight:700>)</span> x86-64, <span style=color:#000;font-weight:700>for</span> MS Windows
</span></span><span style=display:flex><span>$ wine hello.exe  <span style=color:#998;font-style:italic># 使用 wine 运行</span>
</span></span><span style=display:flex><span>it looks like wine32 is missing, you should install it.
</span></span><span style=display:flex><span>as root, please execute <span style=color:#d14>&#34;apt-get install wine32&#34;</span>
</span></span><span style=display:flex><span>wine: created the configuration directory <span style=color:#d14>&#39;/home/ubuntu/.wine&#39;</span>
</span></span><span style=display:flex><span>（忽略首次配置的输出）
</span></span><span style=display:flex><span>wine: configuration in L<span style=color:#d14>&#34;/home/ubuntu/.wine&#34;</span> has been updated.
</span></span><span style=display:flex><span>Hello, world!
</span></span></code></pre></td></tr></table></div></div><h3 id=16history中不记录用户操作>16.history中不记录用户操作</h3><p>需求：</p><p>使用下面命令更改test用户密码时，history中默认会存储明文密码，这样不安全。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;qwepoi..&#34;</span> | sudo passwd <span style=color:#0086b3>test</span> --stdin
</span></span></code></pre></td></tr></table></div></div><p>解决方式：</p><p>在修改密码时，先设置：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>set</span> +o <span style=color:#0086b3>history</span>
</span></span></code></pre></td></tr></table></div></div><p>然后再修改密码，这样就不会再看到密码了。</p><p>修改密码后想恢复记录操作输入以下命令就可以了。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>set</span> -o <span style=color:#0086b3>history</span> 
</span></span></code></pre></td></tr></table></div></div><p><strong>注意：set 设置的效果只对当前窗口有效，对于别人打开的窗口是无效的。</strong></p><p>完整操作如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>peng@peng-VirtualBox:~$ <span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;qpwoasd..&#34;</span> | sudo passwd --stdin <span style=color:#0086b3>test</span> 
</span></span><span style=display:flex><span>peng@peng-VirtualBox:~$ <span style=color:#0086b3>history</span> | grep <span style=color:#0086b3>test</span> 
</span></span><span style=display:flex><span>   <span style=color:#099>66</span>  <span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;qpwoasd..&#34;</span> | sudo passwd --stdin <span style=color:#0086b3>test</span> 
</span></span><span style=display:flex><span>   <span style=color:#099>67</span>  <span style=color:#0086b3>history</span> | grep <span style=color:#0086b3>test</span> 
</span></span><span style=display:flex><span>peng@peng-VirtualBox:~$ <span style=color:#0086b3>set</span> +o <span style=color:#0086b3>history</span> 
</span></span><span style=display:flex><span>peng@peng-VirtualBox:~$ <span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;qpwoasd..&#34;</span> | sudo passwd --stdin <span style=color:#0086b3>test</span> 
</span></span><span style=display:flex><span>peng@peng-VirtualBox:~$ <span style=color:#0086b3>history</span> | grep <span style=color:#0086b3>echo</span> 
</span></span></code></pre></td></tr></table></div></div><h3 id=17vim下快速删除列>17.vim下快速删除列</h3><p><strong>删除特定列的快捷方法（逐行删除）</strong></p><p>如果你知道你需要删除哪一列的内容，并且该列的内容每行都是相同长度的，可以通过以下方法快速删除：</p><ul><li><p>移动到第一行，按 <code>Ctrl + v</code> 进入可视块模式。</p></li><li><p>使用方向键选中你想删除的列。</p></li><li><p>按 <code>d</code> 删除。</p></li></ul><p><strong>vim模式下快速选中数据，替换文字。</strong></p><p>ctrl + v 进入VISUAL 模式，方向键选中文字。按英文冒号“:” s/原文字/替换后的文字。然后按enter。替换完成。</p><p><strong>vim 显示下一个搜索结果</strong></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>在 Vim 中，使用 /80 进行搜索后，想要跳转到下一个匹配的结果，可以使用以下快捷键：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>按 n：跳转到下一个匹配项。
</span></span><span style=display:flex><span>按 N：跳转到上一个匹配项（与 n 相反）。
</span></span><span style=display:flex><span>所以，在搜索 /80 后，按 n 就可以找到下一个 <span style=color:#099>80</span> 的匹配结果。
</span></span></code></pre></td></tr></table></div></div><h3 id=18ssh免密登录交换密钥方式>18.ssh免密登录（交换密钥方式）</h3><p>服务端：</p><p>私钥 id_rsa</p><p>公钥： id_rsa.pub</p><p>生成公私钥</p><p>ssh-keygen</p><p>将公钥拷贝给客户端。</p><p>ssh-copy-id <a href=mailto:root@10.10.10.36>root@10.10.10.36</a></p><p>客户端：</p><p>公钥： id_rsa.pub</p><p>客户端收到公钥默认在用户目录的.ssh中</p><h3 id=19iptables保存规则并导入定义好的规则>19.iptables保存规则并导入定义好的规则</h3><p>使用如下命令保存当前规则：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>iptables-save &gt; /etc/iptables/rule.v4
</span></span></code></pre></td></tr></table></div></div><p>下次开机可以导入规则：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>iptables-restore &lt; /etc/iptables/rule.v4
</span></span></code></pre></td></tr></table></div></div><h3 id=20递归当前文件夹内文件从大到小排序>20.递归当前文件夹内文件从大到小排序</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-gateway-254 opt<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># du -h --max-depth=1 | sort -hr</span>
</span></span><span style=display:flex><span>236M	.
</span></span><span style=display:flex><span>14M	./kylin-sm-package
</span></span><span style=display:flex><span>80K	./scirpt
</span></span><span style=display:flex><span>0	./kyanos
</span></span></code></pre></td></tr></table></div></div><h3 id=21yum安装软件包时保存rpm包到本地>21.yum安装软件包时，保存rpm包到本地。</h3><p>我们使用yum install 命令安装软件包后，默认不会保留安装的rpm包。如果需要保留我们需要开启`keepcache=1`参数</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/yum.conf
</span></span><span style=display:flex><span><span style=color:teal>keepcache</span><span style=color:#000;font-weight:700>=</span><span style=color:#099>1</span>
</span></span></code></pre></td></tr></table></div></div><p>然后保存的rpm文件路径</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>cd</span> /var/cache/yum/x86_64/7
</span></span><span style=display:flex><span>find . -name *.rpm 
</span></span></code></pre></td></tr></table></div></div><p>将找到的rpm包拷贝到/tmp目录下</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>f
</span></span></code></pre></td></tr></table></div></div><h3 id=22同一台机器启动多个tomcat>22.同一台机器启动多个tomcat</h3><p>tomcat启动后会监听5个端口，分别是8000、80、8005、8999、8009。</p><p>端口分析过程</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-ops-81 bin<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># netstat -anop | grep java </span>
</span></span><span style=display:flex><span>tcp        <span style=color:#099>0</span>      <span style=color:#099>0</span> 0.0.0.0:8000            0.0.0.0:*               LISTEN      5303/java            off <span style=color:#000;font-weight:700>(</span>0.00/0/0<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>tcp6       <span style=color:#099>0</span>      <span style=color:#099>0</span> 127.0.0.1:8005          :::*                    LISTEN      5303/java            off <span style=color:#000;font-weight:700>(</span>0.00/0/0<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>tcp6       <span style=color:#099>0</span>      <span style=color:#099>0</span> :::41253                :::*                    LISTEN      5303/java            off <span style=color:#000;font-weight:700>(</span>0.00/0/0<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>tcp6       <span style=color:#099>0</span>      <span style=color:#099>0</span> :::8999                 :::*                    LISTEN      5303/java            off <span style=color:#000;font-weight:700>(</span>0.00/0/0<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>tcp6       <span style=color:#099>0</span>      <span style=color:#099>0</span> :::8009                 :::*                    LISTEN      5303/java            off <span style=color:#000;font-weight:700>(</span>0.00/0/0<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>tcp6       <span style=color:#099>0</span>      <span style=color:#099>0</span> :::80                   :::*                    LISTEN      5303/java            off <span style=color:#000;font-weight:700>(</span>0.00/0/0<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>tcp6       <span style=color:#099>0</span>      <span style=color:#099>0</span> :::39635                :::*                    LISTEN      5303/java            off <span style=color:#000;font-weight:700>(</span>0.00/0/0<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>unix  <span style=color:#099>2</span>      <span style=color:#000;font-weight:700>[</span> <span style=color:#000;font-weight:700>]</span>         STREAM     CONNECTED     <span style=color:#099>74179</span>    5303/java            
</span></span><span style=display:flex><span>unix  <span style=color:#099>2</span>      <span style=color:#000;font-weight:700>[</span> <span style=color:#000;font-weight:700>]</span>         STREAM     CONNECTED     <span style=color:#099>74182</span>    5303/java            
</span></span></code></pre></td></tr></table></div></div><p>使用命令筛选端口分别在哪个配置文件中，改掉就可以启动了。如果有端口冲突会抱以下错误：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-ops-81 tomcat8<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># cd /mnt/tomcat8</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>root@jx-ops-81 tomcat8<span style=color:#000;font-weight:700>]</span><span style=color:#998;font-style:italic># grep 8999  -rwn</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ERROR: transport error 202: <span style=color:#0086b3>bind</span> failed: Address already in use
</span></span></code></pre></td></tr></table></div></div><p>可以发现80、8005、8009在同一个文件。在conf/server.xml内。</p><p>8000和8999在bin/catalina.sh。都改成和上一个tomcat不同端口后就可以启动成功了。</p></div></div></div><div id=footer><div class=container-footer><div class=beian><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="></a><a href target=_blank><span class=some>icp...<span></a></div><div class=info><a href=https://github.com/loveminimal/hugo-theme-virgo>🕊️</a> 2021 - <span id=info-date></span></div></div></div><div class=cool-after></div></body></html>