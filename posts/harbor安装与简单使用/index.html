<!doctype html><html lang=zh-CN><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content="Harborå®‰è£…ä¸ç®€å•ä½¿ç”¨ - https://www.haipengv.com/posts/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"><meta name=author content="Smith - https://www.haipengv.com/"><meta name=msvalidate.01 content="B46311949B856F2A7015F366FB3CE878"><title>Harborå®‰è£…ä¸ç®€å•ä½¿ç”¨</title><base target=_self><link rel=icon type=image/png href=/favicon.ico><link rel=stylesheet href=https://www.haipengv.com/style.min.9a0cea23154ac1941e15c25aa2d31b77285a217d2606ec05b55236428cf1c3e6.css><script>const DARK=!1</script><script type=text/javascript src=/main.js defer></script></head><body class=active-animate><div class=cool-before></div><div id=header><div class=container-header><div class=right><h1 class=title>Harborå®‰è£…ä¸ç®€å•ä½¿ç”¨</h1><div id=toc>ğŸ“œ</div></div></div></div><div id=content><div class="container-main container-page"><div class=rel><div class=curtag-desc><a href=https://www.haipengv.com/tags/docker/><img src=/imgs/icons/tag.svg width=16> ç›¸å…³æ–‡ç« ï¼šDocker <sup>28</sup></a></div><div class=curtag-post><div class=curtag-post-item><a href=https://www.haipengv.com/posts/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/>Centos7.3ç¦»çº¿å®‰è£…docker</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/dockerfile%E6%8C%87%E4%BB%A4%E8%AF%A6%E8%A7%A3/>DockerfileæŒ‡ä»¤è¯¦è§£</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E4%B8%AD%E7%89%B9%E6%AE%8A%E7%9A%84%E9%95%9C%E5%83%8F/>Dockerä¸­ç‰¹æ®Šçš„é•œåƒ</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%86%B7%E9%97%A8%E6%8A%80%E5%B7%A7/>Dockerå†·é—¨æŠ€å·§</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/>Dockeråˆ›å»ºä¸“æœ‰ç½‘å¡</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8rm%E5%8F%82%E6%95%B0%E4%BD%BF%E7%94%A8/>Dockeråˆ›å»ºå®¹å™¨rmå‚æ•°ä½¿ç”¨</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%88%A0%E9%99%A4%E9%80%80%E5%87%BA%E7%9A%84%E5%AE%B9%E5%99%A8/>Dockeråˆ é™¤é€€å‡ºçš„å®¹å™¨</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%9F%BA%E7%A1%80/>DockeråŸºç¡€</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%AE%89%E8%A3%85jupyter/>Dockerå®‰è£…jupyter</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%9101/>Dockeråº”ç”¨å¼€å‘01</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%9102/>Dockeråº”ç”¨å¼€å‘02</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%9103/>Dockeråº”ç”¨å¼€å‘03</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%88%9B%E5%BB%BA%E4%B8%8E%E5%85%B1%E4%BA%AB/>Dockeræ•°æ®å·åˆ›å»ºä¸å…±äº«</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E6%98%A0%E5%B0%84%E7%AB%AF%E5%8F%A3%E6%96%B9%E5%BC%8F/>Dockeræ˜ å°„ç«¯å£æ–¹å¼</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/>Dockeré…ç½®tabè¡¥å…¨å‘½ä»¤</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E9%87%8A%E6%94%BE%E7%A9%BA%E6%A0%87%E7%AD%BE%E9%95%9C%E5%83%8F/>Dockeré‡Šæ”¾ç©ºæ ‡ç­¾é•œåƒ</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E9%95%9C%E5%83%8F%E4%BB%A5%E7%89%B9%E6%AE%8A%E6%A0%BC%E5%BC%8F%E6%98%BE%E7%A4%BA/>Dockeré•œåƒä»¥ç‰¹æ®Šæ ¼å¼æ˜¾ç¤º</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F/>Dockeré•œåƒåŠ é€Ÿ</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/docker%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E4%B8%8A%E4%B8%8B%E6%96%87/>Dockeré•œåƒæ„å»ºä¸Šä¸‹æ–‡</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/ghcr%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E6%96%B9%E5%BC%8F/>GHCRé•œåƒåŠ é€Ÿæ–¹å¼</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/harbor%E4%BD%BF%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0https%E7%99%BB%E5%BD%95/>Harborä½¿ç”¨è‡ªç­¾åè¯ä¹¦å®ç°httpsç™»å½•</a></div><div class="curtag-post-item curtag-post-item--active"><a href=https://www.haipengv.com/posts/harbor%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/>Harborå®‰è£…ä¸ç®€å•ä½¿ç”¨</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/ubuntu20.04%E5%AE%89%E8%A3%85docker/>Ubuntu20.04å®‰è£…docker</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%B8%8D%E5%90%8C%E6%9E%B6%E6%9E%84%E5%B9%B3%E5%8F%B0%E4%B8%8Bdocker%E5%AE%98%E6%96%B9%E9%95%9C%E5%83%8F%E5%8C%85%E6%9F%A5%E6%89%BE%E8%AF%B4%E6%98%8E/>ä¸åŒæ¶æ„å¹³å°ä¸‹Dockerå®˜æ–¹é•œåƒåŒ…æŸ¥æ‰¾è¯´æ˜</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BD%BF%E7%94%A8dockerfile%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F/>ä½¿ç”¨Dockerfileåˆ›å»ºé•œåƒ</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAopenvpn/>ä½¿ç”¨dockeræ­å»ºopenvpn</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E8%87%AA%E5%BB%BA%E4%BB%93%E5%BA%93registry%E4%BD%BF%E7%94%A8%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81%E6%96%B9%E6%B3%95/>è‡ªå»ºä»“åº“registryä½¿ç”¨è¯ä¹¦è®¤è¯æ–¹æ³•</a></div><div class=curtag-post-item><a href=https://www.haipengv.com/posts/%E8%87%AA%E5%BB%BA%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93-registry/>è‡ªå»ºæœ¬åœ°é•œåƒä»“åº“Registry</a></div></div></div><div class=desc><span><svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667l-324.522666 324.48c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334L685.098667 499.2 524.885333 338.986667zM585.258667 278.656l160.170666 160.213333 102.144-102.144a19.712 19.712.0 000-27.861333l-132.48-132.437333a19.456 19.456.0 00-27.605333.0L585.258667 278.613333zM701.312 85.333333c27.946667.0 54.741333 11.136 74.282667 30.848L907.904 248.490667a105.045333 105.045333.0 010 148.565333L424.874667 879.957333C395.050667 914.304 352.768 935.424 304.426667 938.752H85.333333v-42.666667l.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666a104.789333 104.789333.0 0174.24-30.933334z" p-id="7410" fill="#adb5bd"/></svg>2025-03-16&nbsp;&nbsp;&nbsp;<svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859.0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775.0-360.398 149.372-360.398 356.147S305.225 870.23 512 870.23c206.775.0 357.467-151.455 357.467-358.23.0-23.859 23.634-50.706 53.413-50.706 29.78.0 49.92 26.847 49.92 50.706.0 254.493-206.307 460.8-460.8 460.8s-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4.0 226.684 33.296 312.264 117.369.358.351.358-24.052.0-73.209z" p-id="23839" fill="#adb5bd"/></svg>
2025-03-16&nbsp;&nbsp;&nbsp;</span>
<span><svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028c-70.774903.0-128.089859 57.325793-128.089859 128.03206v446.793671c0 70.7171050000001 57.314956 128.154884 128.089859 128.154884h133.353183a63.940169 63.940169.0 0155.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169.0 0155.212517-31.551041h133.54103c70.576219.0 127.732228-57.289669 127.732227-127.800865V192.391272c0-70.536482-57.181295-127.728615-127.786414-127.728615zM895.884854 639.842407A63.85347 63.85347.0 01832.092795 703.703103h-133.54103a127.753903 127.753903.0 00-110.349172 63.09847l-76.222461 129.856342a.274545.274545.0 010-.050574h-.032512s-.021675.061411-.032512.061412l-76.1466-129.85273a127.804477 127.804477.0 00-110.385297-63.11292H192.030028A64.207489 64.207489.0 01127.880338 639.488388V192.694717a64.102729 64.102729.0 0164.14969-64.091891h640.00858a63.799284 63.799284.0 0163.846246 63.788446v447.451135z" fill="#adb5bd" p-id="33867"/><path d="M608.154093 288.092004a31.970084 31.970084.0 00-31.970084 31.970085v160.078006L441.53396 300.861976a31.970084 31.970084.0 00-57.531702 19.200113v255.760676a31.970084 31.970084.0 0063.940169.0V415.863969l134.650048 179.274507a31.970084 31.970084.0 0057.531703-19.200113V320.062089a31.970084 31.970084.0 00-31.970085-31.970085z" fill="#adb5bd" p-id="33868"/></svg>3290 å­—</span>&nbsp;
<span><svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667zm0 810.666666C307.2 885.333333 138.666667 716.8 138.666667 512S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"/><path d="M695.466667 567.466667 544 497.066667V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666L669.866667 627.2c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8.0 23.466667-6.4 29.866666-19.2 6.4-14.933333.0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"/></svg>7 åˆ†é’Ÿ</span><div class=container-ctgtag><div class=taxonomy><div class=tag><a href=/tags/docker>Docker</a></div></div></div></div><div class=toc><div class=container-page-operation><div class=page-operation><div><a href=/><img src=/imgs/icons/home-2.svg alt></a></div><div><a href=/nav><img src=/imgs/icons/iov-navigate-1.svg alt></a></div><div><a href=/wiki><img src=/imgs/icons/wiki.svg alt></a></div><div><a href=/tags><img src=/imgs/icons/treetags.svg alt></a></div><div id=light-dark><a><img src=/imgs/icons/moon2.svg alt></a></div><div><a href=#><img src=/imgs/icons/up2.svg alt></a></div></div></div><nav id=TableOfContents><ul><li><a href=#å‰è¨€>å‰è¨€</a></li><li><a href=#harboræ¶æ„>harboræ¶æ„</a></li><li><a href=#ç¯å¢ƒå‡†å¤‡>ç¯å¢ƒå‡†å¤‡</a></li><li><a href=#å®‰è£…docker>å®‰è£…docker</a><ul><li></li></ul></li><li><a href=#å®‰è£…-harbor>å®‰è£… harbor</a><ul><li><a href=#ä¸‹è½½å®‰è£…åŒ…>ä¸‹è½½å®‰è£…åŒ…ã€‚</a></li><li><a href=#æ›´æ”¹é…ç½®>æ›´æ”¹é…ç½®</a></li><li><a href=#æ·»åŠ æ˜ å°„å…³ç³»>æ·»åŠ æ˜ å°„å…³ç³»</a></li><li><a href=#windowsä¹Ÿéœ€è¦æ·»åŠ æ˜ å°„å…³ç³»>windowsä¹Ÿéœ€è¦æ·»åŠ æ˜ å°„å…³ç³»</a></li><li><a href=#ä¿®æ”¹ååˆ·æ–°>ä¿®æ”¹ååˆ·æ–°</a></li><li><a href=#é‡å¯docker>é‡å¯docker</a></li><li><a href=#æ‰§è¡Œinstallshè„šæœ¬å®‰è£…>æ‰§è¡Œinstall.shè„šæœ¬å®‰è£…</a></li><li><a href=#æµ‹è¯•è®¿é—®harbor>æµ‹è¯•è®¿é—®harbor</a></li><li><a href=#dockerç™»å½•harbor>dockerç™»å½•harbor</a></li><li><a href=#harboråˆ›å»ºé¡¹ç›®>harboråˆ›å»ºé¡¹ç›®</a></li><li><a href=#æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½åˆ°harbor>æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½åˆ°harbor</a></li></ul></li><li><a href=#ç™»å½•portainerå¹¶æ–°å¢ä»“åº“>ç™»å½•portainerå¹¶æ–°å¢ä»“åº“</a><ul><li><a href=#æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½>æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½ã€‚</a></li></ul></li><li><a href=#harborç™»å½•æ—¶é‡åˆ°çš„å‘>harborç™»å½•æ—¶é‡åˆ°çš„å‘</a></li><li><a href=#å…¶ä»–åŠŸèƒ½-harboré•œåƒæ¼æ´æ‰«æ>å…¶ä»–åŠŸèƒ½-Harboré•œåƒæ¼æ´æ‰«æ</a><ul><li></li></ul></li></ul></nav></div><div class=content><h2 id=å‰è¨€>å‰è¨€</h2><p>Harbor æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨é•œåƒä»“åº“ï¼Œå®ƒæä¾›ç”¨æˆ·æƒé™ç®¡ç†ã€é•œåƒå¤åˆ¶ç­‰åŠŸèƒ½ï¼Œæé«˜ä½¿ç”¨çš„registryçš„æ•ˆç‡ã€‚ç¡®ä¿é•œåƒè¢«æ‰«æå¹¶ä¸”æ²¡æœ‰æ¼æ´ï¼Œå¹¶å°†é•œåƒæ ‡è®°ä¸ºå¯ä¿¡ã€‚</p><h2 id=harboræ¶æ„>harboræ¶æ„</h2><p><img src=/postimages/harbor%E6%9E%B6%E6%9E%84%E5%9B%BE.webp alt=harboræ¶æ„å›¾></p><p>ä¸»è¦ç»„ä»¶åŒ…æ‹¬proxyï¼Œä»–æ˜¯ä¸€ä¸ªnginxå‰ç«¯ä»£ç†ï¼Œä¸»è¦æ˜¯åˆ†å‘å‰ç«¯é¡µé¢uiè®¿é—®å’Œé•œåƒä¸Šä¼ å’Œä¸‹è½½æµé‡ï¼Œä¸Šå›¾ä¸­é€šè¿‡æ·±è“è‰²å…ˆæ ‡è¯†ï¼›
uiæä¾›äº†ä¸€ä¸ªwebç®¡ç†é¡µé¢ï¼Œå½“ç„¶è¿˜åŒ…æ‹¬äº†ä¸€ä¸ªå‰ç«¯é¡µé¢å’Œåç«¯APIï¼Œåº•å±‚ä½¿ç”¨mysqlæ•°æ®åº“ã€‚
registryæ˜¯é•œåƒä»“åº“ï¼Œè´Ÿè´£å­˜å‚¨é•œåƒæ–‡ä»¶ï¼Œå½“é•œåƒä¸Šä¼ å®Œæ¯•åé€šè¿‡hooké€šçŸ¥uiåˆ›å»ºrepositoryï¼Œä¸Šå›¾é€šè¿‡çº¢è‰²çº¿æ ‡è¯†ï¼Œå½“ç„¶registryçš„tokenè®¤è¯ä¹Ÿæ˜¯é€šè¿‡uiç»„ä»¶å®Œæˆã€‚
adminserveræ˜¯ç³»ç»Ÿçš„é…ç½®ç®¡ç†ä¸­å¿ƒé™„å¸¦æ£€æŸ¥å­˜å‚¨ç”¨é‡ï¼Œuiå’Œjobserverå¯åŠ¨æ—¶å€™å›éœ€è¦åŠ è½½adminserverçš„é…ç½®ï¼Œé€šè¿‡ç°è‰²çº¿æ ‡è¯†ã€‚jobseviceæ˜¯è´Ÿè´£é•œåƒå¤åˆ¶å·¥ä½œçš„ï¼Œä»–å’Œregistryé€šä¿¡ï¼Œä»ä¸€ä¸ªregistry pullé•œåƒç„¶åpushåˆ°å¦ä¸€ä¸ªregistryï¼Œå¹¶è®°å½•job_logï¼Œä¸Šå›¾é€šè¿‡ç´«è‰²çº¿æ ‡è¯†ã€‚
logæ˜¯æ—¥å¿—æ±‡æ€»ç»„ä»¶ï¼Œé€šè¿‡dockerçš„log-driveræŠŠæ—¥å¿—æ±‡æ€»åˆ°ä¸€èµ·ï¼Œé€šè¿‡æµ…è“è‰²çº¿æ¡æ ‡è¯†ã€‚</p><h2 id=ç¯å¢ƒå‡†å¤‡>ç¯å¢ƒå‡†å¤‡</h2><p>è¿è¡Œç¯å¢ƒ</p><ul><li>Ubuntu 20.04 LTS</li><li>docker-ceï¼š20.10.12</li><li>docker-composeï¼šv2.2.3</li><li>harbor-offlineï¼šv1.10.10</li></ul><h2 id=å®‰è£…docker>å®‰è£…docker</h2><p>å®˜æ–¹å®‰è£…<a href=https://docs.docker.com/engine/install/ubuntu/>å‚è€ƒ</a></p><p>æˆ‘æ˜¯åœ¨wsl2ä¸­ä½¿ç”¨ubuntu 20.04ç³»ç»Ÿå®‰è£…dockerçš„ã€‚</p><h4 id=åˆ é™¤æ—§ç‰ˆdocker>åˆ é™¤æ—§ç‰ˆdocker</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get remove docker docker-engine docker.io containerd runc
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¹‹å‰å®‰è£…è¿‡docker,é‚£ä¹ˆæ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½åœ¨<code>/var/lib/docker/</code>ä¸­,åŒ…æ‹¬images, containers, volumes, and networksã€‚</p><p>ä¸ç”¨å¯ä»¥åˆ é™¤ã€‚</p><h4 id=å¼€å§‹å®‰è£…è®¾ç½®repoæº>å¼€å§‹å®‰è£…è®¾ç½®repoæº</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo apt-get install <span style=color:#d14>\
</span></span></span><span style=display:flex><span><span style=color:#d14></span>    ca-certificates <span style=color:#d14>\
</span></span></span><span style=display:flex><span><span style=color:#d14></span>    curl <span style=color:#d14>\
</span></span></span><span style=display:flex><span><span style=color:#d14></span>    gnupg <span style=color:#d14>\
</span></span></span><span style=display:flex><span><span style=color:#d14></span>    lsb-release
</span></span></code></pre></td></tr></table></div></div><h4 id=æ·»åŠ dockerçš„å®˜æ–¹gpg-key>æ·»åŠ Dockerçš„å®˜æ–¹GPG key</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</span></span></code></pre></td></tr></table></div></div><h4 id=è®¾ç½®ç¨³å®šç‰ˆrepoæº>è®¾ç½®ç¨³å®šç‰ˆrepoæº</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>\
</span></span></span><span style=display:flex><span><span style=color:#d14></span>  <span style=color:#d14>&#34;deb [arch=</span><span style=color:#000;font-weight:700>$(</span>dpkg --print-architecture<span style=color:#000;font-weight:700>)</span><span style=color:#d14> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
</span></span></span><span style=display:flex><span><span style=color:#d14>  </span><span style=color:#000;font-weight:700>$(</span>lsb_release -cs<span style=color:#000;font-weight:700>)</span><span style=color:#d14> stable&#34;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span></code></pre></td></tr></table></div></div><h4 id=å®‰è£…docker-ce>å®‰è£…docker-ce</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install docker-ce docker-ce-cli containerd.io
</span></span></code></pre></td></tr></table></div></div><h4 id=æµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸ>æµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸ</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run hello-world
</span></span></code></pre></td></tr></table></div></div><h4 id=å®‰è£…docker-compose>å®‰è£…docker-compose</h4><p>harboréœ€è¦ç”¨docker-composeæ¥ç®¡ç†ã€‚</p><p>æºç åœ°å€ï¼šhttps://github.com/docker/compose/releases</p><p>ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ã€‚</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -L https://github.com/docker/compose/releases/download/v2.2.3/docker-compose-<span style=color:#d14>`</span>uname -s<span style=color:#d14>`</span>-<span style=color:#d14>`</span>uname -m<span style=color:#d14>`</span> -o /usr/local/bin/docker-compose
</span></span></code></pre></td></tr></table></div></div><p>æ·»åŠ æ‰§è¡Œæƒé™ã€‚</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod +x /usr/local/bin/docker-compose
</span></span></code></pre></td></tr></table></div></div><p>éªŒè¯ä¸€ä¸‹ã€‚</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:teal>$docker</span>-compose --version
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>è¾“å‡ºï¼š
</span></span><span style=display:flex><span>Docker Compose version v2.2.3
</span></span></code></pre></td></tr></table></div></div><h2 id=å®‰è£…-harbor>å®‰è£… harbor</h2><p>æºç åœ°å€ï¼šhttps://github.com/goharbor/harbor/releases</p><p>é¡¹ç›®åˆ†æœ‰åœ¨çº¿ç‰ˆï¼Œä»¥åŠç¦»çº¿ç‰ˆï¼Œè¿™é‡Œä½¿ç”¨ç¦»çº¿ç‰ˆçš„å®‰è£…ã€‚</p><h3 id=ä¸‹è½½å®‰è£…åŒ…>ä¸‹è½½å®‰è£…åŒ…ã€‚</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://github.com/goharbor/harbor/releases/download/v1.10.10/harbor-offline-installer-v1.10.10.tgz
</span></span></code></pre></td></tr></table></div></div><p>æˆ–è®¸ç”¨è¿…é›·ä¸‹è½½ï¼Œé€Ÿåº¦æ›´ä½³ã€‚</p><p>è§£å‹å®‰è£…åŒ…ã€‚</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p softwere
</span></span><span style=display:flex><span><span style=color:#0086b3>cd</span> /root/softwere
</span></span><span style=display:flex><span>mv harbor-offline-installer-v1.10.10.tgz /root/softwere
</span></span><span style=display:flex><span>tar xvf harbor-offline-installer-v1.10.10.tgz
</span></span><span style=display:flex><span>ls harbor
</span></span><span style=display:flex><span>LICENSE  common  common.sh  docker-compose.yml  harbor.v1.10.10.tar.gz  harbor.yml  install.sh  prepare
</span></span></code></pre></td></tr></table></div></div><h3 id=æ›´æ”¹é…ç½®>æ›´æ”¹é…ç½®</h3><p>è¿™é‡Œä½¿ç”¨åŸŸå+5000ç«¯å£æ¥è®¿é—®ï¼Œå…³é—­httpsã€‚å®Œæ•´é…ç½®å¦‚ä¸‹ï¼š</p><p>vim harbor.yml</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">166
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># Configuration file of Harbor</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># The IP address or hostname to access admin UI and registry service.</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.</span>
</span></span><span style=display:flex><span>hostname: harbor.lhp.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># http related config</span>
</span></span><span style=display:flex><span>http:
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># port for http, default is 80. If https enabled, this port will redirect to https port</span>
</span></span><span style=display:flex><span>  port: <span style=color:#099>5000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># https related config</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># https:</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># https port for harbor, default is 443</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># port: 443</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># The path of cert and key files for nginx</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># certificate: /your/certificate/path</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># private_key: /your/private/key/path</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Uncomment external_url if you want to enable external proxy</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># And when it enabled the hostname will no longer used</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># external_url: https://reg.mydomain.com:8433</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># The initial password of Harbor admin</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># It only works in first time to install harbor</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Remember Change the admin password from UI after launching Harbor.</span>
</span></span><span style=display:flex><span>harbor_admin_password: Toor12345
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Harbor DB configuration</span>
</span></span><span style=display:flex><span>database:
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># The password for the root user of Harbor DB. Change this before any production use.</span>
</span></span><span style=display:flex><span>  password: root123
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># The maximum number of connections in the idle connection pool. If it &lt;=0, no idle connections are retained.</span>
</span></span><span style=display:flex><span>  max_idle_conns: <span style=color:#099>50</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># The maximum number of open connections to the database. If it &lt;= 0, then there is no limit on the number of open connections.</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># Note: the default number of connections is 100 for postgres.</span>
</span></span><span style=display:flex><span>  max_open_conns: <span style=color:#099>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># The default data volume</span>
</span></span><span style=display:flex><span>data_volume: /data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Harbor Storage settings by default is using /data dir on local filesystem</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Uncomment storage_service setting If you want to using external storage</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># storage_service:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   # ca_bundle is the path to the custom root ca certificate, which will be injected into the truststore</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   # of registry&#39;s and chart repository&#39;s containers.  This is usually needed when the user hosts a internal storage with self signed certificate.</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   ca_bundle:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   # storage backend, default is filesystem, options include filesystem, azure, gcs, s3, swift and oss</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   # for more info about this configuration please refer https://docs.docker.com/registry/configuration/</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   filesystem:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     maxthreads: 100</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   # set disable to true when you want to disable registry redirect</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   redirect:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     disabled: false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Clair configuration</span>
</span></span><span style=display:flex><span>clair:
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># The interval of clair updaters, the unit is hour, set to 0 to disable the updaters.</span>
</span></span><span style=display:flex><span>  updaters_interval: <span style=color:#099>12</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jobservice:
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># Maximum number of job workers in job service</span>
</span></span><span style=display:flex><span>  max_job_workers: <span style=color:#099>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>notification:
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># Maximum retry count for webhook job</span>
</span></span><span style=display:flex><span>  webhook_job_max_retry: <span style=color:#099>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chart:
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># Change the value of absolute_url to enabled can enable absolute url in chart</span>
</span></span><span style=display:flex><span>  absolute_url: disabled
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Log configurations</span>
</span></span><span style=display:flex><span>log:
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># options are debug, info, warning, error, fatal</span>
</span></span><span style=display:flex><span>  level: info
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># configs for logs in local storage</span>
</span></span><span style=display:flex><span>  local:
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic># Log files are rotated log_rotate_count times before being removed. If count is 0, old versions are removed rather than rotated.</span>
</span></span><span style=display:flex><span>    rotate_count: <span style=color:#099>50</span>
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic># Log files are rotated only if they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be in</span>
</span></span><span style=display:flex><span>kilobytes.
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic># If the M is used, the size is in megabytes, and if G is used, the size is in gigabytes. So size 100, size 100k, size 100M and size 100G</span>
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic># are all valid.</span>
</span></span><span style=display:flex><span>    rotate_size: 200M
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic># The directory on your host that store log</span>
</span></span><span style=display:flex><span>    location: /var/log/harbor
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># Uncomment following lines to enable external syslog endpoint.</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># external_endpoint:</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>#   # protocol used to transmit log to external endpoint, options is tcp or udp</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>#   protocol: tcp</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>#   # The host of external endpoint</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>#   host: localhost</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>#   # Port of external endpoint</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>#   port: 5140</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#This attribute is for migrator to detect the version of the .cfg file, DO NOT MODIFY!</span>
</span></span><span style=display:flex><span>_version: 1.10.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Uncomment external_database if using external database.</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># external_database:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   harbor:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     host: harbor_db_host</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     port: harbor_db_port</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     db_name: harbor_db_name</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     username: harbor_db_username</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     password: harbor_db_password</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     ssl_mode: disable</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     max_idle_conns: 2</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     max_open_conns: 0</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   clair:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     host: clair_db_host</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     port: clair_db_port</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     db_name: clair_db_name</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     username: clair_db_username</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     password: clair_db_password</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     ssl_mode: disable</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   notary_signer:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     host: notary_signer_db_host</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     port: notary_signer_db_port</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     db_name: notary_signer_db_name</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     username: notary_signer_db_username</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     password: notary_signer_db_password</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     ssl_mode: disable</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   notary_server:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     host: notary_server_db_host</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     port: notary_server_db_port</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     db_name: notary_server_db_name</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     username: notary_server_db_username</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     password: notary_server_db_password</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#     ssl_mode: disable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Uncomment external_redis if using external Redis server</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># external_redis:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   host: redis</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   port: 6379</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   password:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   # db_index 0 is for core, it&#39;s unchangeable</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   registry_db_index: 1</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   jobservice_db_index: 2</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   chartmuseum_db_index: 3</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   clair_db_index: 4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Uncomment uaa for trusting the certificate of uaa instance that is hosted via self-signed cert.</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># uaa:</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#   ca_file: /path/to/ca</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Global proxy</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Config http proxy for components, e.g. http://my.proxy.com:3128</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Components doesn&#39;t need to connect to each others via http proxy.</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Remove component from `components` array if want disable proxy</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># for it. If you want use proxy for replication, MUST enable proxy</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># for core and jobservice, and set `http_proxy` and `https_proxy`.</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Add domain to the `no_proxy` field, when you want disable proxy</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># for some special registry.</span>
</span></span><span style=display:flex><span>proxy:
</span></span><span style=display:flex><span>  http_proxy:
</span></span><span style=display:flex><span>  https_proxy:
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic># no_proxy endpoints will appended to 127.0.0.1,localhost,.local,.internal,log,db,redis,nginx,core,portal,postgresql,jobservice,registry,registryctl,clair,chartmuseum,notary-server</span>
</span></span><span style=display:flex><span>  no_proxy:
</span></span><span style=display:flex><span>  components:
</span></span><span style=display:flex><span>    - core
</span></span><span style=display:flex><span>    - jobservice
</span></span><span style=display:flex><span>    - clair
</span></span></code></pre></td></tr></table></div></div><h3 id=æ·»åŠ æ˜ å°„å…³ç³»>æ·»åŠ æ˜ å°„å…³ç³»</h3><p>vi /etc/hosts</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>172.28.238.43   harbor.lhp.com
</span></span></code></pre></td></tr></table></div></div><h3 id=windowsä¹Ÿéœ€è¦æ·»åŠ æ˜ å°„å…³ç³»>windowsä¹Ÿéœ€è¦æ·»åŠ æ˜ å°„å…³ç³»</h3><p>ç”¨ç®¡ç†å‘˜ç”¨æˆ·ç¼–è¾‘<code>C:\Windows\System32\drivers\etc\hosts</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic>#åŒæ ·æ·»åŠ ä¸‹é¢å†…å®¹</span>
</span></span><span style=display:flex><span>172.28.238.43   harbor.lhp.com
</span></span></code></pre></td></tr></table></div></div><h3 id=ä¿®æ”¹ååˆ·æ–°>ä¿®æ”¹ååˆ·æ–°</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ipconfig /flushdns
</span></span></code></pre></td></tr></table></div></div><p>é…ç½®daemon.jsonï¼Œdockerç™»å½•harboræ—¶éœ€è¦ã€‚</p><p>vi /etc/docker/daemon.json</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#d14>&#34;registry-mirrors&#34;</span>: <span style=color:#000;font-weight:700>[</span><span style=color:#d14>&#34;https://jliunkl7.mirror.aliyuncs.com&#34;</span><span style=color:#000;font-weight:700>]</span>,
</span></span><span style=display:flex><span>  <span style=color:#d14>&#34;insecure-registries&#34;</span>: <span style=color:#000;font-weight:700>[</span><span style=color:#d14>&#34;harbor.lhp.com:5000&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é‡å¯docker>é‡å¯docker</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>service docker stop
</span></span><span style=display:flex><span>service docker start
</span></span></code></pre></td></tr></table></div></div><h3 id=æ‰§è¡Œinstallshè„šæœ¬å®‰è£…>æ‰§è¡Œinstall.shè„šæœ¬å®‰è£…</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./install.sh
</span></span></code></pre></td></tr></table></div></div><h3 id=æµ‹è¯•è®¿é—®harbor>æµ‹è¯•è®¿é—®harbor</h3><p><a href=http://harbor.lhp.com:5000>http://harbor.lhp.com:5000</a></p><p>ç”¨æˆ·åï¼šadmin</p><p>å¯†ç ï¼šToor12345</p><p><img src=/postimages/harbor%E7%99%BB%E5%BD%95.webp alt=harborç™»å½•></p><h3 id=dockerç™»å½•harbor>dockerç™»å½•harbor</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker login -u admin http://harbor.lhp.com:5000
</span></span></code></pre></td></tr></table></div></div><h3 id=harboråˆ›å»ºé¡¹ç›®>harboråˆ›å»ºé¡¹ç›®</h3><p><img src=/postimages/harbor%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.webp alt=harboræ–°å»ºé¡¹ç›®></p><h3 id=æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½åˆ°harbor>æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½åˆ°harbor</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic>#push</span>
</span></span><span style=display:flex><span>docker tag alpine:latest harbor.lhp.com:5000/images/alpine:latest
</span></span><span style=display:flex><span>docker push harbor.lhp.com:5000/images/alpine:latest
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#pull</span>
</span></span><span style=display:flex><span>docker pull harbor.lhp.com:5000/images/alpine:latest
</span></span></code></pre></td></tr></table></div></div><p>portainerä¸­æ·»åŠ harborä»“åº“ã€‚ä»¥åå°±å¯ä»¥åœ¨portainerä¸­å¯è§†åŒ–ä¸Šä¼ å’Œä¸‹è½½é•œåƒå•¦ï¼</p><h2 id=ç™»å½•portainerå¹¶æ–°å¢ä»“åº“>ç™»å½•portainerå¹¶æ–°å¢ä»“åº“</h2><p><img src=/postimages/portainer%E6%B7%BB%E5%8A%A0harbor%E4%BB%93%E5%BA%931.webp alt=portaineræ·»åŠ harborä»“åº“1></p><p><img src=/postimages/portainer%E6%B7%BB%E5%8A%A0harbor%E4%BB%93%E5%BA%932.webp alt=portaineræ·»åŠ harborä»“åº“2></p><h3 id=æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½>æµ‹è¯•ä¸Šä¼ å’Œä¸‹è½½ã€‚</h3><p>é•œåƒæ‰“tagæ—¶æ³¨æ„è¦åœ¨é•œåƒå‰åŠ harboré¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ–‡ä¸­çš„ä¸ºimagesã€‚</p><p>å°†busybox:latestä¸Šä¼ åˆ°harborçš„imagesä¸­ã€‚</p><p><img src=/postimages/portainer%E4%B8%8A%E4%BC%A0%E5%88%B0harbor1.webp alt=portainerä¸Šä¼ åˆ°harbor1></p><p>è¿›å…¥busyboxé•œåƒå¹¶æ‰“tagï¼Œæ³¨æ„æ ¼å¼ã€‚</p><p><img src=/postimages/portainer%E4%B8%8A%E4%BC%A0%E5%88%B0harbor2.webp alt=portainerä¸Šä¼ åˆ°harbor2></p><p>ä¸Šä¼ é•œåƒåˆ°harborä»“åº“</p><p><img src=/postimages/portainer%E4%B8%8A%E4%BC%A0%E5%88%B0harbor3.webp alt=portainerä¸Šä¼ åˆ°harbor3></p><p>harborä¸­æŸ¥çœ‹</p><p><img src=/postimages/portainer%E4%B8%8A%E4%BC%A0%E5%88%B0harbor5.webp alt=portainerä¸Šä¼ åˆ°harbor5></p><p>harborä¸Šæ‹‰å–é•œåƒæ“ä½œ</p><p>é€‰æ‹©è¦æ‹‰å–çš„é•œåƒå¹¶æ‹‰å–ã€‚</p><p><img src=/postimages/harbor%E4%BB%93%E5%BA%93%E9%95%9C%E5%83%8F%E6%8B%89%E5%8F%961.webp alt=harborä»“åº“é•œåƒæ‹‰å–1></p><h2 id=harborç™»å½•æ—¶é‡åˆ°çš„å‘>harborç™»å½•æ—¶é‡åˆ°çš„å‘</h2><p>å¦‚æœæ˜¾ç¤ºharborç™»å½•å¤±è´¥ï¼Œè€Œå¯†ç åˆæ˜¯harbor.ymlä¸­è®¾ç½®çš„å¯†ç ã€‚æ­¤æ—¶éœ€è¦åœæ­¢harboræ‰€æœ‰ç›¸å…³é•œåƒã€‚è¿›å…¥åˆ°harborå®‰è£…ç›®å½•ã€‚</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>cd</span> /root/softwere/harbor
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#åœæ­¢harboræ‰€æœ‰ç›¸å…³é•œåƒ</span>
</span></span><span style=display:flex><span>docker-compose down -v
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#å¼€å¯harboræ‰€æœ‰ç›¸å…³é•œåƒ</span>
</span></span><span style=display:flex><span>docker-compose up -d
</span></span></code></pre></td></tr></table></div></div><p>åœæ­¢dockeræœåŠ¡ï¼Œåˆ é™¤harborçš„æ•°æ®å·,æ¸…é™¤æ—¥å¿—ï¼Œè·¯å¾„åœ¨<code>harbor.yml</code>ä¸­ã€‚</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rm -rf /data
</span></span><span style=display:flex><span>rm -rf /var/log/harbor
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#path</span>
</span></span><span style=display:flex><span>data_volume: /data
</span></span><span style=display:flex><span>location: /var/log/harbor
</span></span></code></pre></td></tr></table></div></div><p>æœ€ååˆ é™¤harboræ–‡ä»¶å¤¹ï¼Œé‡æ–°è§£å‹å®‰è£…å³å¯ã€‚</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rm -rf /root/softwere/harbor
</span></span><span style=display:flex><span><span style=color:#0086b3>cd</span> /root/softwere/
</span></span><span style=display:flex><span>tar -xf harbor.v1.10.10.tar.gz
</span></span></code></pre></td></tr></table></div></div><h2 id=å…¶ä»–åŠŸèƒ½-harboré•œåƒæ¼æ´æ‰«æ>å…¶ä»–åŠŸèƒ½-Harboré•œåƒæ¼æ´æ‰«æ</h2><p>å®‰è£…harborè‡ªå¸¦çš„æ¼æ´æ‰«æ</p><h4 id=æ·»åŠ æ‰«ææ¨¡å—>æ·»åŠ æ‰«ææ¨¡å—</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic>#è¿›å…¥åˆ°harborç›®å½•ä¸­æ“ä½œ</span>
</span></span><span style=display:flex><span>./prepare --with-clair
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>prepare base dir is <span style=color:#0086b3>set</span> to /root/softwere/harbor
</span></span><span style=display:flex><span>/usr/src/app/utils/configs.py:100: YAMLLoadWarning: calling yaml.load<span style=color:#000;font-weight:700>()</span> without <span style=color:teal>Loader</span><span style=color:#000;font-weight:700>=</span>... is deprecated, as the default Loader is unsafe. Please <span style=color:#0086b3>read</span> https://msg.pyyaml.org/load <span style=color:#000;font-weight:700>for</span> full details.
</span></span><span style=display:flex><span>  <span style=color:teal>configs</span> <span style=color:#000;font-weight:700>=</span> yaml.load<span style=color:#000;font-weight:700>(</span>f<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>WARNING:root:WARNING: HTTP protocol is insecure. Harbor will deprecate http protocol in the future. Please make sure to upgrade to httpsClearing the configuration file: /config/db/env
</span></span><span style=display:flex><span>Clearing the configuration file: /config/jobservice/env
</span></span><span style=display:flex><span>Clearing the configuration file: /config/jobservice/config.yml
</span></span><span style=display:flex><span>Clearing the configuration file: /config/nginx/nginx.conf
</span></span><span style=display:flex><span>Clearing the configuration file: /config/registryctl/env
</span></span><span style=display:flex><span>Clearing the configuration file: /config/registryctl/config.yml
</span></span><span style=display:flex><span>Clearing the configuration file: /config/registry/root.crt
</span></span><span style=display:flex><span>Clearing the configuration file: /config/registry/config.yml
</span></span><span style=display:flex><span>Clearing the configuration file: /config/core/env
</span></span><span style=display:flex><span>Clearing the configuration file: /config/core/app.conf
</span></span><span style=display:flex><span>Clearing the configuration file: /config/log/rsyslog_docker.conf
</span></span><span style=display:flex><span>Clearing the configuration file: /config/log/logrotate.conf
</span></span><span style=display:flex><span>Generated configuration file: /config/log/logrotate.conf
</span></span><span style=display:flex><span>Generated configuration file: /config/log/rsyslog_docker.conf
</span></span><span style=display:flex><span>Generated configuration file: /config/nginx/nginx.conf
</span></span><span style=display:flex><span>Generated configuration file: /config/core/env
</span></span><span style=display:flex><span>Generated configuration file: /config/core/app.conf
</span></span><span style=display:flex><span>Generated configuration file: /config/registry/config.yml
</span></span><span style=display:flex><span>Generated configuration file: /config/registryctl/env
</span></span><span style=display:flex><span>Generated configuration file: /config/db/env
</span></span><span style=display:flex><span>Generated configuration file: /config/jobservice/env
</span></span><span style=display:flex><span>Generated configuration file: /config/jobservice/config.yml
</span></span><span style=display:flex><span>loaded secret from file: /secret/keys/secretkey
</span></span><span style=display:flex><span>Generated configuration file: /config/clair/postgres_env
</span></span><span style=display:flex><span>Generated configuration file: /config/clair/config.yaml
</span></span><span style=display:flex><span>Generated configuration file: /config/clair/clair_env
</span></span><span style=display:flex><span>Generated configuration file: /config/clair-adapter/env
</span></span><span style=display:flex><span>Generated configuration file: /compose_location/docker-compose.yml
</span></span><span style=display:flex><span>/usr/src/app/utils/configs.py:90: YAMLLoadWarning: calling yaml.load<span style=color:#000;font-weight:700>()</span> without <span style=color:teal>Loader</span><span style=color:#000;font-weight:700>=</span>... is deprecated, as the default Loader is unsafe. Please <span style=color:#0086b3>read</span> https://msg.pyyaml.org/load <span style=color:#000;font-weight:700>for</span> full details.
</span></span><span style=display:flex><span>  <span style=color:teal>versions</span> <span style=color:#000;font-weight:700>=</span> yaml.load<span style=color:#000;font-weight:700>(</span>f<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>Clean up the input dir
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>#ä¼šè‡ªåŠ¨ç”Ÿæˆdocker-compose.ymlæ–‡ä»¶</span>
</span></span><span style=display:flex><span>âœ  harbor ls
</span></span><span style=display:flex><span>LICENSE  common  common.sh  docker-compose.yml  harbor.v1.10.10.tar.gz  harbor.yml  install.sh  prepare
</span></span></code></pre></td></tr></table></div></div><h4 id=é‡å¯å¯åŠ¨harboræœåŠ¡æ³¨æ„è¿™é‡Œè¦æŒ‡å®šdocker-composeyamlæ–‡ä»¶>é‡å¯å¯åŠ¨harboræœåŠ¡ï¼ˆæ³¨æ„è¿™é‡Œè¦æŒ‡å®šdocker-compose.yamlæ–‡ä»¶ï¼‰</h4><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose -f docker-compose.yml up -d
</span></span></code></pre></td></tr></table></div></div><h4 id=æµ‹è¯•æ‰«æ>æµ‹è¯•æ‰«æ</h4><p>å¯ä»¥çœ‹åˆ°åœ¨é¡¹ç›®é‡Œé¢å·²ç»æ˜¾ç¤ºå®‰è£…å¥½äº†æ‰«æå™¨æ’ä»¶ï¼Œä¸å®‰è£…è¿™é‡Œæ˜¯æ²¡æœ‰çš„ã€‚</p><p><img src=/postimages/harbor%E6%89%AB%E6%8F%8F%E5%99%A81.webp alt=harboræ‰«æå™¨1></p><p>é€‰æ‹©é•œåƒæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œæ‰«æäº†ã€‚</p><p>é•œåƒæœªæ‰«æå‰</p><p><img src=/postimages/harbor%E6%89%AB%E6%8F%8F%E5%99%A82.webp alt=harboræ‰«æå™¨2></p><p>é•œåƒæ‰«æå</p><p><img src=/postimages/harbor%E6%89%AB%E6%8F%8F%E5%99%A83.webp alt=harboræ‰«æå™¨3></p></div></div></div><div id=footer><div class=container-footer><div class=beian><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="></a><a href target=_blank><span class=some>icp...<span></a></div><div class=info><a href=https://github.com/loveminimal/hugo-theme-virgo>ğŸ•Šï¸</a> 2021 - <span id=info-date></span></div></div></div><div class=cool-after></div></body></html>