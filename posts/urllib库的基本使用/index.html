<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>urllib库的基本使用 - My New Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:title" content="urllib库的基本使用"><meta property="og:description" content="网页各种测试 http://httpbin.org 获取一个get请求 import urllib.request res = urllib.request.urlopen(&#34;http://www.baidu.com&#34;) print(res.read().decode('utf-8')) # 对获取到的网页源码进行utf-8解码 获取一个post请求.（模拟用户登录） import urllib.parse # 引入解析库 data = bytes(urllib.parse.urlencode({&#34;hello&#34;:&#34;world&#34;}),encoding='utf-8') res1 = urllib.request.urlopen(&#34;http://httpbin.org/post&#34;,data=data) print(res1.read().decode(&#34;utf-8&#34;)) 超时处理 try: res1 = urllib.request.urlopen(&#34;http://httpbin.org/get&#34;,timeout=0.01) print(res1.read().decode('utf-8')) except urllib.error.URLError as e: print(&#34;time out!&#34;) 获取基本信息 res2 = urllib.request.urlopen(&#34;http://baidu.com&#34;) print(res2.status) # 获取状态码 print(res2.getheaders()) # 获取头部信息 print(res2.getheader(&#34;Server&#34;)) # Apache 直接请求豆瓣网址 url = &#34;https://douban.com&#34; req = urllib.request.Request(url=url) response = urllib.request.urlopen(req) print(response.read().decode(&#34;utf-8&#34;)) 报错信息如下：（说明豆瓣已经识别到是爬虫的请求） raise HTTPError(req.full_url, code, msg, hdrs, fp) urllib.error.HTTPError: HTTP Error 418 如何伪装成浏览器来请求呢？这时候需要在请求头中添加user-agent。user-agent如何获取？浏览器F12-》NETWORK->点击左侧带有get请求的网址，右侧拉到最下边复制user-agent的值。"><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-17T22:02:12+00:00"><meta property="article:modified_time" content="2022-07-17T22:02:12+00:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="urllib库的基本使用"><meta name=twitter:description content="网页各种测试 http://httpbin.org 获取一个get请求 import urllib.request res = urllib.request.urlopen(&#34;http://www.baidu.com&#34;) print(res.read().decode('utf-8')) # 对获取到的网页源码进行utf-8解码 获取一个post请求.（模拟用户登录） import urllib.parse # 引入解析库 data = bytes(urllib.parse.urlencode({&#34;hello&#34;:&#34;world&#34;}),encoding='utf-8') res1 = urllib.request.urlopen(&#34;http://httpbin.org/post&#34;,data=data) print(res1.read().decode(&#34;utf-8&#34;)) 超时处理 try: res1 = urllib.request.urlopen(&#34;http://httpbin.org/get&#34;,timeout=0.01) print(res1.read().decode('utf-8')) except urllib.error.URLError as e: print(&#34;time out!&#34;) 获取基本信息 res2 = urllib.request.urlopen(&#34;http://baidu.com&#34;) print(res2.status) # 获取状态码 print(res2.getheaders()) # 获取头部信息 print(res2.getheader(&#34;Server&#34;)) # Apache 直接请求豆瓣网址 url = &#34;https://douban.com&#34; req = urllib.request.Request(url=url) response = urllib.request.urlopen(req) print(response.read().decode(&#34;utf-8&#34;)) 报错信息如下：（说明豆瓣已经识别到是爬虫的请求） raise HTTPError(req.full_url, code, msg, hdrs, fp) urllib.error.HTTPError: HTTP Error 418 如何伪装成浏览器来请求呢？这时候需要在请求头中添加user-agent。user-agent如何获取？浏览器F12-》NETWORK->点击左侧带有get请求的网址，右侧拉到最下边复制user-agent的值。"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://example.org/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/><link rel=prev href=http://example.org/posts/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/><link rel=next href=http://example.org/posts/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"urllib库的基本使用","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/example.org\/posts\/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8\/"},"genre":"posts","wordcount":1096,"url":"http:\/\/example.org\/posts\/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8\/","datePublished":"2022-07-17T22:02:12+00:00","dateModified":"2022-07-17T22:02:12+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Author"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">urllib库的基本使用</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-07-17>2022-07-17</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1096 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#网页各种测试>网页各种测试</a></li></ul></li><li><a href=#ua伪装>UA伪装</a><ul><li></li></ul></li><li><a href=#使用代理>使用代理</a><ul><li><a href=#常用的handler对象>常用的handler对象</a></li><li><a href=#代码演示>代码演示</a></li></ul></li></ul></nav></div></div><div class=content id=content><h3 id=网页各种测试>网页各种测试</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>http:<span style=color:#f92672>//</span>httpbin<span style=color:#f92672>.</span>org
</span></span></code></pre></div><h4 id=获取一个get请求>获取一个get请求</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> urllib.request
</span></span><span style=display:flex><span>res <span style=color:#f92672>=</span> urllib<span style=color:#f92672>.</span>request<span style=color:#f92672>.</span>urlopen(<span style=color:#e6db74>&#34;http://www.baidu.com&#34;</span>)
</span></span><span style=display:flex><span>print(res<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>)) <span style=color:#75715e># 对获取到的网页源码进行utf-8解码</span>
</span></span></code></pre></div><h4 id=获取一个post请求模拟用户登录>获取一个post请求.（模拟用户登录）</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> urllib.parse <span style=color:#75715e># 引入解析库</span>
</span></span><span style=display:flex><span>data  <span style=color:#f92672>=</span> bytes(urllib<span style=color:#f92672>.</span>parse<span style=color:#f92672>.</span>urlencode({<span style=color:#e6db74>&#34;hello&#34;</span>:<span style=color:#e6db74>&#34;world&#34;</span>}),encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span>res1 <span style=color:#f92672>=</span> urllib<span style=color:#f92672>.</span>request<span style=color:#f92672>.</span>urlopen(<span style=color:#e6db74>&#34;http://httpbin.org/post&#34;</span>,data<span style=color:#f92672>=</span>data)
</span></span><span style=display:flex><span>print(res1<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#34;utf-8&#34;</span>))
</span></span></code></pre></div><h4 id=超时处理>超时处理</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>    res1 <span style=color:#f92672>=</span> urllib<span style=color:#f92672>.</span>request<span style=color:#f92672>.</span>urlopen(<span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>,timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>0.01</span>)
</span></span><span style=display:flex><span>    print(res1<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#66d9ef>except</span> urllib<span style=color:#f92672>.</span>error<span style=color:#f92672>.</span>URLError <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;time out!&#34;</span>)
</span></span></code></pre></div><h4 id=获取基本信息>获取基本信息</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>res2 <span style=color:#f92672>=</span> urllib<span style=color:#f92672>.</span>request<span style=color:#f92672>.</span>urlopen(<span style=color:#e6db74>&#34;http://baidu.com&#34;</span>)
</span></span><span style=display:flex><span>print(res2<span style=color:#f92672>.</span>status) <span style=color:#75715e># 获取状态码</span>
</span></span><span style=display:flex><span>print(res2<span style=color:#f92672>.</span>getheaders()) <span style=color:#75715e># 获取头部信息</span>
</span></span><span style=display:flex><span>print(res2<span style=color:#f92672>.</span>getheader(<span style=color:#e6db74>&#34;Server&#34;</span>)) <span style=color:#75715e># Apache</span>
</span></span></code></pre></div><h4 id=直接请求豆瓣网址>直接请求豆瓣网址</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://douban.com&#34;</span>
</span></span><span style=display:flex><span>req <span style=color:#f92672>=</span> urllib<span style=color:#f92672>.</span>request<span style=color:#f92672>.</span>Request(url<span style=color:#f92672>=</span>url)
</span></span><span style=display:flex><span>response <span style=color:#f92672>=</span> urllib<span style=color:#f92672>.</span>request<span style=color:#f92672>.</span>urlopen(req)
</span></span><span style=display:flex><span>print(response<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#34;utf-8&#34;</span>))
</span></span></code></pre></div><h4 id=报错信息如下说明豆瓣已经识别到是爬虫的请求>报错信息如下：（说明豆瓣已经识别到是爬虫的请求）</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>raise</span> HTTPError(req<span style=color:#f92672>.</span>full_url, code, msg, hdrs, fp)
</span></span><span style=display:flex><span>urllib<span style=color:#f92672>.</span>error<span style=color:#f92672>.</span>HTTPError: HTTP Error <span style=color:#ae81ff>418</span>
</span></span></code></pre></div><p>如何伪装成浏览器来请求呢？这时候需要在请求头中添加<code>user-agent</code>。<code>user-agent</code>如何获取？浏览器<code>F12</code>-》<code>NETWORK</code>->点击左侧带有<code>get</code>请求的网址，右侧拉到最下边复制<code>user-agent</code>的值。</p><h4 id=构建代码后再次请求收到返回的数据了>构建代码后再次请求，收到返回的数据了。</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://douban.com&#34;</span>
</span></span><span style=display:flex><span>headers <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;User-Agent&#34;</span>: <span style=color:#e6db74>&#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&#34;</span>
</span></span><span style=display:flex><span>} 
</span></span><span style=display:flex><span>req <span style=color:#f92672>=</span> urllib<span style=color:#f92672>.</span>request<span style=color:#f92672>.</span>Request(url<span style=color:#f92672>=</span>url,headers<span style=color:#f92672>=</span>headers)
</span></span><span style=display:flex><span>response <span style=color:#f92672>=</span> urllib<span style=color:#f92672>.</span>request<span style=color:#f92672>.</span>urlopen(req)
</span></span><span style=display:flex><span>print(response<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#34;utf-8&#34;</span>))
</span></span></code></pre></div><h2 id=ua伪装>UA伪装</h2><h4 id=方式一>方式一</h4><p>将常见的UserAgent用列表保存起来</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>ua_list <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; en) Presto/2.8.131 Version/11.11&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Opera/9.80 (Windows NT 6.1; U; en) Presto/2.8.131 Version/11.11&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_0) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Maxthon 2.0)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; TencentTraveler 4.0)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; The World)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SE 2.X MetaSr 1.0; SE 2.X MetaSr 1.0; .NET CLR 2.0.50727; SE 2.X MetaSr 1.0)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; 360SE)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Avant Browser)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (iPod; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (iPad; U; CPU OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Linux; U; Android 2.3.7; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22; CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Opera/9.80 (Android 2.3.4; Linux; Opera Mobi/build-1107180945; U; en-GB) Presto/2.8.149 Version/11.10&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; en) AppleWebKit/534.1+ (KHTML, like Gecko) Version/6.0.0.337 Mobile Safari/534.1+&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (hp-tablet; Linux; hpwOS/3.0.0; U; en-US) AppleWebKit/534.6 (KHTML, like Gecko) wOSBrowser/233.70 Safari/534.6 TouchPad/1.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (SymbianOS/9.4; Series60/5.0 NokiaN97-1/20.0.019; Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebKit/525 (KHTML, like Gecko) BrowserNG/7.1.18124&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0; HTC; Titan)&#34;</span>
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>代码演示</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> random
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> urllib.request <span style=color:#f92672>import</span> urlopen, Request
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ua_list <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; en) Presto/2.8.131 Version/11.11&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Opera/9.80 (Windows NT 6.1; U; en) Presto/2.8.131 Version/11.11&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_0) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Maxthon 2.0)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; TencentTraveler 4.0)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; The World)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SE 2.X MetaSr 1.0; SE 2.X MetaSr 1.0; .NET CLR 2.0.50727; SE 2.X MetaSr 1.0)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; 360SE)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Avant Browser)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (iPod; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (iPad; U; CPU OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Linux; U; Android 2.3.7; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22; CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Opera/9.80 (Android 2.3.4; Linux; Opera Mobi/build-1107180945; U; en-GB) Presto/2.8.149 Version/11.10&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; en) AppleWebKit/534.1+ (KHTML, like Gecko) Version/6.0.0.337 Mobile Safari/534.1+&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (hp-tablet; Linux; hpwOS/3.0.0; U; en-US) AppleWebKit/534.6 (KHTML, like Gecko) wOSBrowser/233.70 Safari/534.6 TouchPad/1.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (SymbianOS/9.4; Series60/5.0 NokiaN97-1/20.0.019; Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebKit/525 (KHTML, like Gecko) BrowserNG/7.1.18124&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0; HTC; Titan)&#34;</span>
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># random.choice():随机从列表里取一个</span>
</span></span><span style=display:flex><span>headers <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;User-Agent&#34;</span>: random<span style=color:#f92672>.</span>choice(ua_list)}
</span></span><span style=display:flex><span><span style=color:#75715e># 构造请求</span>
</span></span><span style=display:flex><span>req <span style=color:#f92672>=</span> Request(url, headers<span style=color:#f92672>=</span>headers)
</span></span><span style=display:flex><span><span style=color:#75715e># 发送请求</span>
</span></span><span style=display:flex><span>resp <span style=color:#f92672>=</span> urlopen(req)
</span></span><span style=display:flex><span><span style=color:#75715e># 相应内容</span>
</span></span><span style=display:flex><span>print(resp<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>))
</span></span></code></pre></div><p>内容输出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;args&#34;</span>: {}, 
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Accept-Encoding&#34;</span>: <span style=color:#e6db74>&#34;identity&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Host&#34;</span>: <span style=color:#e6db74>&#34;httpbin.org&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;User-Agent&#34;</span>: <span style=color:#e6db74>&#34;Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; en) AppleWebKit/534.1+ (KHTML, like Gecko) Version/6.0.0.337 Mobile Safari/534.1+&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;X-Amzn-Trace-Id&#34;</span>: <span style=color:#e6db74>&#34;Root=1-62d7a54c-0a7c5b071d6f91e0471656ef&#34;</span>
</span></span><span style=display:flex><span>  }, 
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;origin&#34;</span>: <span style=color:#e6db74>&#34;ip&#34;</span>, 
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;url&#34;</span>: <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;args&#34;</span>: {},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Accept-Encoding&#34;</span>: <span style=color:#e6db74>&#34;identity&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Host&#34;</span>: <span style=color:#e6db74>&#34;httpbin.org&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;User-Agent&#34;</span>: <span style=color:#e6db74>&#34;Mozilla/5.0 (iPod; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;X-Amzn-Trace-Id&#34;</span>: <span style=color:#e6db74>&#34;Root=1-62d7a552-6c77190d0bef3bd93ddca46d&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;origin&#34;</span>: <span style=color:#e6db74>&#34;ip&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;url&#34;</span>: <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=方式二><strong>方式二</strong></h4><p>准备工作：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>pip install fake_useragent
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># -*- coding:utf-8 -*-</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> fake_useragent <span style=color:#f92672>import</span> UserAgent
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> urllib.request <span style=color:#f92672>import</span> urlopen, Request
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>headers <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;User-Agent&#34;</span>: UserAgent()<span style=color:#f92672>.</span>random <span style=color:#75715e># 随机选取代理。</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 构造请求</span>
</span></span><span style=display:flex><span>req <span style=color:#f92672>=</span> Request(url, headers<span style=color:#f92672>=</span>headers)
</span></span><span style=display:flex><span><span style=color:#75715e># 发送请求</span>
</span></span><span style=display:flex><span>resp <span style=color:#f92672>=</span> urlopen(req)
</span></span><span style=display:flex><span><span style=color:#75715e># 相应内容</span>
</span></span><span style=display:flex><span>print(resp<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>))
</span></span></code></pre></div><h2 id=使用代理>使用代理</h2><h3 id=常用的handler对象>常用的handler对象</h3><ul><li><strong>HTTPHandler</strong>: 普通的HTTP处理器</li><li><strong>ProxyHandler</strong>: 代理IP处理器</li><li><strong>HTTPCookieProcessor</strong>: cookie处理器</li></ul><h3 id=代码演示>代码演示</h3><h4 id=httphandler>HTTPHandler</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># -*- coding:utf-8 -*-</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> fake_useragent <span style=color:#f92672>import</span> UserAgent
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> urllib.request <span style=color:#f92672>import</span> Request, urlopen, build_opener, HTTPHandler
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>download</span>(url):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    headers <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;User-Agent&#34;</span>: UserAgent()<span style=color:#f92672>.</span>random
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    req <span style=color:#f92672>=</span> Request(url, headers<span style=color:#f92672>=</span>headers)
</span></span><span style=display:flex><span>    <span style=color:#75715e># 创建http处理器对象,debuglevel打开调试</span>
</span></span><span style=display:flex><span>    handler <span style=color:#f92672>=</span> HTTPHandler(debuglevel<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    opener <span style=color:#f92672>=</span> build_opener(handler)
</span></span><span style=display:flex><span>    resp <span style=color:#f92672>=</span> opener<span style=color:#f92672>.</span>open(req)
</span></span><span style=display:flex><span>    print(resp<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>
</span></span><span style=display:flex><span>    download(url)
</span></span></code></pre></div><p>输出如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>send: <span style=color:#e6db74>b</span><span style=color:#e6db74>&#39;GET /get HTTP/1.1</span><span style=color:#ae81ff>\r\n</span><span style=color:#e6db74>Accept-Encoding: identity</span><span style=color:#ae81ff>\r\n</span><span style=color:#e6db74>Host: httpbin.org</span><span style=color:#ae81ff>\r\n</span><span style=color:#e6db74>User-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1985.67 Safari/537.36</span><span style=color:#ae81ff>\r\n</span><span style=color:#e6db74>Connection: close</span><span style=color:#ae81ff>\r\n\r\n</span><span style=color:#e6db74>&#39;</span>
</span></span><span style=display:flex><span>reply: <span style=color:#e6db74>&#39;HTTP/1.1 200 OK</span><span style=color:#ae81ff>\r\n</span><span style=color:#e6db74>&#39;</span>
</span></span><span style=display:flex><span>header: Date: Wed, <span style=color:#ae81ff>20</span> Jul <span style=color:#ae81ff>2022</span> <span style=color:#ae81ff>08</span>:<span style=color:#ae81ff>06</span>:<span style=color:#ae81ff>06</span> GMT
</span></span><span style=display:flex><span>header: Content<span style=color:#f92672>-</span>Type: application<span style=color:#f92672>/</span>json
</span></span><span style=display:flex><span>header: Content<span style=color:#f92672>-</span>Length: <span style=color:#ae81ff>359</span>
</span></span><span style=display:flex><span>header: Connection: close
</span></span><span style=display:flex><span>header: Server: gunicorn<span style=color:#f92672>/</span><span style=color:#ae81ff>19.9.0</span>
</span></span><span style=display:flex><span>header: Access<span style=color:#f92672>-</span>Control<span style=color:#f92672>-</span>Allow<span style=color:#f92672>-</span>Origin: <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>header: Access<span style=color:#f92672>-</span>Control<span style=color:#f92672>-</span>Allow<span style=color:#f92672>-</span>Credentials: true
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;args&#34;</span>: {}, 
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Accept-Encoding&#34;</span>: <span style=color:#e6db74>&#34;identity&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Host&#34;</span>: <span style=color:#e6db74>&#34;httpbin.org&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;User-Agent&#34;</span>: <span style=color:#e6db74>&#34;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1985.67 Safari/537.36&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;X-Amzn-Trace-Id&#34;</span>: <span style=color:#e6db74>&#34;Root=1-62d7b76e-4c99f8712c1292a55b601fa4&#34;</span>
</span></span><span style=display:flex><span>  }, 
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;origin&#34;</span>: <span style=color:#e6db74>&#34;访问的ip&#34;</span>, 
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;url&#34;</span>: <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=proxyhandler>ProxyHandler</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># -*- coding:utf-8 -*-</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> fake_useragent <span style=color:#f92672>import</span> UserAgent
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> urllib.request <span style=color:#f92672>import</span> Request, build_opener, ProxyHandler
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>proxy_handler</span>(url):
</span></span><span style=display:flex><span>    headers <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;User-Agent&#34;</span>: UserAgent()<span style=color:#f92672>.</span>random
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    req <span style=color:#f92672>=</span> Request(url, headers<span style=color:#f92672>=</span>headers)
</span></span><span style=display:flex><span>    <span style=color:#75715e># ProxyHandler({&#34;http&#34;: &#34;ip:port&#34;})</span>
</span></span><span style=display:flex><span>    handler <span style=color:#f92672>=</span> ProxyHandler({<span style=color:#e6db74>&#34;http&#34;</span>: <span style=color:#e6db74>&#34;58.20.235.180:9091&#34;</span>})
</span></span><span style=display:flex><span>    opener <span style=color:#f92672>=</span> build_opener(handler)
</span></span><span style=display:flex><span>    resp <span style=color:#f92672>=</span> opener<span style=color:#f92672>.</span>open(req)
</span></span><span style=display:flex><span>    <span style=color:#75715e># print(resp.info())</span>
</span></span><span style=display:flex><span>    print(resp<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>decode())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>
</span></span><span style=display:flex><span>    proxy_handler(url)
</span></span></code></pre></div><p>输出如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;args&#34;</span>: {}, 
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Host&#34;</span>: <span style=color:#e6db74>&#34;httpbin.org&#34;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;User-Agent&#34;</span>: <span style=color:#e6db74>&#34;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.93 Safari/537.36&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;X-Amzn-Trace-Id&#34;</span>: <span style=color:#e6db74>&#34;Root=1-62d7b7ea-05098b4c34bab12d7cc0dfe7&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;origin&#34;</span>: <span style=color:#e6db74>&#34;58.20.235.180&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;url&#34;</span>: <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>发现使用了代理IP请求的网页。</p><p>登录cookie处理<a href="https://www.jianshu.com/p/98b0334a6951?u_atoken=cf050b03-4426-4ae8-ae76-ec76a49811bb&amp;u_asession=01F8tG1j1-6mUqPBfizMyXtOLgj1_YdpWLy6tLQTrMJKkPO4B8VGQufulZrcnb3kYsX0KNBwm7Lovlpxjd_P_q4JsKWYrT3W_NKPr8w6oU7K8-AbenNtsISwUd_aPGR9dhPpcarp92QKzyJKyYjREPlmBkFo3NEHBv0PZUm6pbxQU&amp;u_asig=05Y_GO1vKbHGrEmwMy-8Bd_sFNaHiYK3j6noCMVAA70lD05yk2CFL3YOsWSQgXdUg3GG7jeXvY63IgguMHqMXco8jlTjdjUZ2-AEjBbKB3fRHgP8bB5H8JlYanu-2gJ6IT3At8RY4894XQDDjc4CC6hg10-lAg9OWVEp3GNxFS9sf9JS7q8ZD7Xtz2Ly-b0kmuyAKRFSVJkkdwVUnyHAIJzQRCyRu4UuJTb01FQsw4RUa7a4S_mrYVXff1xSzt_uoNWPRPQyB_SKrj-61LB_f61u3h9VXwMyh6PgyDIVSG1W-bbgCpyxFT_zAiQqv6S6quGVjuvW8Mbnw36tryIj0GRovjjV_Udp6mp6xfOvuIWAyvNX7IvsygEZUv24qXCsuLmWspDxyAEEo4kbsryBKb9Q&amp;u_aref=k8mWOuZuai%2F2wl2ZQb1rFJPv6AU%3D" target=_blank rel="noopener noreffer">见</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-07-17</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=http://example.org/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/ data-title=urllib库的基本使用><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=http://example.org/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=http://example.org/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/ data-title=urllib库的基本使用><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=http://example.org/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/ data-title=urllib库的基本使用><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=http://example.org/posts/urllib%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/ data-title=urllib库的基本使用><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/ class=prev rel=prev title=豆瓣电影数据分析><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>豆瓣电影数据分析</a>
<a href=/posts/bs4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre%E6%A8%A1%E5%9D%97/ class=next rel=next title=Bs4-正则表达式-Re模块>Bs4-正则表达式-Re模块<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.115.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>