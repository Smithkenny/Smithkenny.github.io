<!doctype html><html lang=zh-CN><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content="WSl2搭建过程 - https://t.haipengv.com/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"><meta name=author content="Smith - https://t.haipengv.com/"><meta name=msvalidate.01 content="B46311949B856F2A7015F366FB3CE878"><title>WSl2搭建过程</title><base target=_blank><link rel=icon type=image/png href=/favicon.ico><link rel=stylesheet href=https://t.haipengv.com/style.min.9a0cea23154ac1941e15c25aa2d31b77285a217d2606ec05b55236428cf1c3e6.css><script>const DARK=!1</script><script type=text/javascript src=/main.js defer></script></head><body class=active-animate><div class=cool-before></div><div id=header><div class=container-header><div class=right><h1 class=title>WSl2搭建过程</h1><div id=toc>📜</div></div></div></div><div id=content><div class="container-main container-page"><div class=rel><div class=curtag-desc><a href=https://t.haipengv.com/tags/wsl/><img src=/imgs/icons/tag.svg width=16> 相关文章：WSL <sup>4</sup></a></div><div class=curtag-post><div class=curtag-post-item><a href=https://t.haipengv.com/posts/wsl2%E4%B8%ADportainer%E5%AE%B9%E5%99%A8%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/>WSL2中Portainer容器可视化管理工具的安装与使用</a></div><div class="curtag-post-item curtag-post-item--active"><a href=https://t.haipengv.com/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/>WSl2搭建过程</a></div><div class=curtag-post-item><a href=https://t.haipengv.com/posts/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96%E6%9C%AC%E6%9C%BAip%E5%B9%B6%E5%A4%8D%E5%88%B6%E5%88%B0registry%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD/>使用脚本获取本机IP并复制到registry配置文件中</a></div><div class=curtag-post-item><a href=https://t.haipengv.com/posts/%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%AD%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%9C%AC%E6%9C%BAwsl2%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1/>局域网中其他主机访问本机wsl2中的服务</a></div></div></div><div class=desc><span><svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667l-324.522666 324.48c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334L685.098667 499.2 524.885333 338.986667zM585.258667 278.656l160.170666 160.213333 102.144-102.144a19.712 19.712.0 000-27.861333l-132.48-132.437333a19.456 19.456.0 00-27.605333.0L585.258667 278.613333zM701.312 85.333333c27.946667.0 54.741333 11.136 74.282667 30.848L907.904 248.490667a105.045333 105.045333.0 010 148.565333L424.874667 879.957333C395.050667 914.304 352.768 935.424 304.426667 938.752H85.333333v-42.666667l.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666a104.789333 104.789333.0 0174.24-30.933334z" p-id="7410" fill="#adb5bd"/></svg>2025-03-16&nbsp;&nbsp;&nbsp;<svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859.0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775.0-360.398 149.372-360.398 356.147S305.225 870.23 512 870.23c206.775.0 357.467-151.455 357.467-358.23.0-23.859 23.634-50.706 53.413-50.706 29.78.0 49.92 26.847 49.92 50.706.0 254.493-206.307 460.8-460.8 460.8s-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4.0 226.684 33.296 312.264 117.369.358.351.358-24.052.0-73.209z" p-id="23839" fill="#adb5bd"/></svg>
2025-03-16&nbsp;&nbsp;&nbsp;</span>
<span><svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028c-70.774903.0-128.089859 57.325793-128.089859 128.03206v446.793671c0 70.7171050000001 57.314956 128.154884 128.089859 128.154884h133.353183a63.940169 63.940169.0 0155.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169.0 0155.212517-31.551041h133.54103c70.576219.0 127.732228-57.289669 127.732227-127.800865V192.391272c0-70.536482-57.181295-127.728615-127.786414-127.728615zM895.884854 639.842407A63.85347 63.85347.0 01832.092795 703.703103h-133.54103a127.753903 127.753903.0 00-110.349172 63.09847l-76.222461 129.856342a.274545.274545.0 010-.050574h-.032512s-.021675.061411-.032512.061412l-76.1466-129.85273a127.804477 127.804477.0 00-110.385297-63.11292H192.030028A64.207489 64.207489.0 01127.880338 639.488388V192.694717a64.102729 64.102729.0 0164.14969-64.091891h640.00858a63.799284 63.799284.0 0163.846246 63.788446v447.451135z" fill="#adb5bd" p-id="33867"/><path d="M608.154093 288.092004a31.970084 31.970084.0 00-31.970084 31.970085v160.078006L441.53396 300.861976a31.970084 31.970084.0 00-57.531702 19.200113v255.760676a31.970084 31.970084.0 0063.940169.0V415.863969l134.650048 179.274507a31.970084 31.970084.0 0057.531703-19.200113V320.062089a31.970084 31.970084.0 00-31.970085-31.970085z" fill="#adb5bd" p-id="33868"/></svg>5385 字</span>&nbsp;
<span><svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667zm0 810.666666C307.2 885.333333 138.666667 716.8 138.666667 512S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"/><path d="M695.466667 567.466667 544 497.066667V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666L669.866667 627.2c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8.0 23.466667-6.4 29.866666-19.2 6.4-14.933333.0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"/></svg>11 分钟</span><div class=container-ctgtag><div class=taxonomy><div class=tag><a href=/tags/wsl>WSL</a></div></div></div></div><div class=toc><div class=container-page-operation><div class=page-operation><div><a href=/><img src=/imgs/icons/home-2.svg alt></a></div><div><a href=/nav><img src=/imgs/icons/iov-navigate-1.svg alt></a></div><div><a href=/wiki><img src=/imgs/icons/wiki.svg alt></a></div><div><a href=/tags><img src=/imgs/icons/treetags.svg alt></a></div><div id=light-dark><a><img src=/imgs/icons/moon2.svg alt></a></div><div><a href=#><img src=/imgs/icons/up2.svg alt></a></div></div></div><nav id=TableOfContents><ul><li><a href=#什么是-wsl>什么是 WSL</a></li><li><a href=#用-wsl-可以做什么>用 WSL 可以做什么？</a></li><li><a href=#wsl-2-中采用的新措施>WSL 2 中采用的新措施</a></li><li><a href=#安装>安装</a><ul><li><a href=#开启适用于-linux-的-windows-子系统的附加功能>开启「适用于 Linux 的 Windows 子系统」的附加功能</a></li><li><a href=#官方版本-wsl>官方版本 WSL</a></li><li><a href=#社区支持的-wsl>社区支持的 WSL</a></li></ul></li><li><a href=#wsl-2-的安装>WSL 2 的安装</a><ul><li><a href=#开启支持-wsl-2-的可选组件>开启支持 WSL 2 的可选组件</a></li><li><a href=#使用命令行设置需要由-wsl-2-支持的发行版>使用命令行设置需要由 WSL 2 支持的发行版</a></li></ul></li><li><a href=#安装fluent-terminal>安装Fluent Terminal</a><ul><li><a href=#自定义路径安装scoop>自定义路径安装Scoop</a></li></ul></li><li><a href=#shell-环境>Shell 环境</a><ul><li><a href=#zsh>zsh</a></li><li><a href=#安装配置>安装、配置</a></li><li><a href=#插件主题模板推荐>插件、主题模板推荐</a></li></ul></li><li><a href=#安装git进行版本控制>安装git进行版本控制</a><ul><li><a href=#使用脚本自动执行代理配置>使用脚本自动执行代理配置</a></li><li><a href=#使用方式>使用方式</a></li></ul></li><li><a href=#安装-python>安装 Python</a></li><li><a href=#安装代码优化工具>安装代码优化工具</a></li><li><a href=#用-poetry-管理-python-项目>用 Poetry 管理 Python 项目</a><ul><li><a href=#安装-poetry>安装 Poetry</a></li><li><a href=#基本使用>基本使用</a></li></ul></li><li><a href=#nodejs>Node.js</a></li><li><a href=#安装-nodejs>安装 Node.js</a></li><li><a href=#配置-nodejs-包管理工具>配置 Node.js 包管理工具</a></li></ul></nav></div><div class=content><h2 id=什么是-wsl>什么是 WSL</h2><p>WSL 的全称叫做：Windows Subsystem for Linux，即「适用于 Linux 的 Windows 子系统」。WSL 的诞生让 Windows 用户（开发人员）按原样运行 GNU/Linux 环境 —— 包括大多数命令行工具、实用工具和应用程序 —— 且不会产生虚拟机开销。</p><h2 id=用-wsl-可以做什么>用 WSL 可以做什么？</h2><p>好的，在 Windows 上用 WSL 我们到底能干什么呢？</p><ul><li>你可以在 Windows 上「安装」你喜欢的 GNU/Linux 发行版</li><li>你可以直接在 Windows 上运行 <code>grep</code>、<code>awk</code>、<code>sed</code> 等 Linux 原生可执行文件</li><li>你可以在 Windows 上直接使用 Vim、Emacs 等工具，直接使用 Linux 版本的 Javascript/Node.js、Ruby、Python、C/C++、Rust、Go 等语言进行开发，直接运行 MySQL、Apache 等 Linux 原生应用和服务等</li></ul><p>最为重要的是，利用 WSL 我们可以直接在 <strong>不抛弃 Windows 全部优秀工具的前提下</strong>，<strong>在没有因为虚拟机开销而牺牲太多性能的情况下</strong>，直接运行使用完整的 Linux 系统。</p><h2 id=wsl-2-中采用的新措施>WSL 2 中采用的新措施</h2><ul><li>在 Windows 上实现完整的 Linux 原生系统调用（Full System Call Compatibility）</li><li>用 WSL 执行曾经 1.0 版本无法运行的 Linux 原生程序，比如依赖虚拟化技术的 Docker 容器。</li><li>极大的突破了 WSL 1.0 中出现的 I/O 性能瓶颈：WSL 2 中，<code>git clone</code>、<code>npm install</code>、<code>apt update</code>、<code>apt upgrade</code> 等依赖文件系统性能的操作和命令的速度都有显著提高。</li><li>如果你在 WSL 2 中运行 Web 服务器，你会发现映射到 Windows 中的端口并不一样。不过这一不同并无大碍。</li><li>你会发现 WSL 2 中在 Windows 侧和 Linux 侧之间相互移动文件的速度会比 WSL 的 1.0 版本慢。因此，为了尽可能保证我们 WSL 文件系统的存储速度，<strong>我们应该将在 Linux 中使用的文件全部放在 Linux 文件系统下</strong>。</li><li>WSL 2 目前对硬件的支持有限，因此你可能无法直接通过 WSL 2 访问外设。不过，WSL 2 目前已经支持了 GPU 的连接,同时，我们也可以通过一些 hacky 的手段让 WSL 2 能够访问 USB 接口.</li><li>WSL 2 对 VMware 等虚拟机软件也有一些要求，也就是：你无法在运行 WSL 2 的情况下直接运行 VMware 或旧版本的 Virtual Box。这是因为 WSL 2 中的虚拟化技术依赖于 Hyper-V，而 VMware 和 6.0 版本之前的 Virtual Box 都和 Hyper-V 不兼容.</li></ul><h2 id=安装>安装</h2><p>只有 Windows 10 才能安装使用 WSL。Windows 7、8 或之前的任何版本都无法使用，请及时将系统版本更新至最新。</p><p>只有 Windows 10 版本 16215 或以后的版本才能够正常运行 WSL。你可以在「Windows 设置 > 系统 > 关于」处找到你的 Windows 10 操作系统版本。</p><p><strong>只有 Windows 10 版本 18362 或 18363 以及以后的版本，或小版本号为 1049 的版本，才能够正常运行 WSL 2</strong>。需要明确，WSL 2 目前只能在 Windows 10 版本 1903、1909 和 2004 中使用（其中 1903 和 1909 仅支持 <strong>x64 系统</strong>），因此你需要将自己的 Windows 系统进行升级至合适的版本，才能使用正确的 Windows 10 版本安装 WSL 2。</p><h3 id=开启适用于-linux-的-windows-子系统的附加功能>开启「适用于 Linux 的 Windows 子系统」的附加功能</h3><p>无论使用 WSL 1 还是 WSL 2，我们都需要开启「适用于 Linux 的 Windows 子系统」的附加功能：</p><ul><li>以管理员身份打开 PowerShell 终端</li><li>运行下面的命令：</li></ul><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#0086b3>Enable-WindowsOptionalFeature</span> -Online -FeatureName <span style=color:#0086b3>Microsoft-Windows</span>-Subsystem-Linux
</span></span></code></pre></td></tr></table></div></div><ul><li>按照提示重启电脑</li></ul><h3 id=官方版本-wsl>官方版本 WSL</h3><p>微软官方支持的 WSL Linux 发行版可以直接从微软商店下载。</p><p>官方支持的 Linux 发行版有：</p><ul><li>Ubuntu: <a href=https://www.microsoft.com/store/productId/9NBLGGH4MSV6>最新版</a>，<a href=https://www.microsoft.com/store/productId/9PJN388HP8C9>16.04 LTS</a>，<a href=https://www.microsoft.com/store/productId/9N9TNGVNDL3Q>18.04 LTS</a>，和 <a href=https://www.microsoft.com/p/ubuntu-2004-lts/9n6svws3rx71>20.04 LTS</a></li><li>OpenSUSE Leap: <a href=https://www.microsoft.com/store/productId/9NJVJTS82TJX>42</a>, <a href=https://www.microsoft.com/store/productId/9N1TB6FPVJ8C>15.0</a></li><li>SUSE Linux Enterprise Server: <a href=https://www.microsoft.com/store/productId/9P32MWBH6CNS>12</a>, <a href=https://www.microsoft.com/store/productId/9PMW35D7FNLX>15</a></li><li><a href=https://www.microsoft.com/store/productId/9MSVKQC78PK6>Debian GNU/Linux</a></li><li><a href=https://www.microsoft.com/store/productId/9PKR34TNCV07>Kali Linux</a></li><li><a href=https://www.microsoft.com/store/productId/9NV1GV1PXZ6P>Pengwin</a> - <a href=https://github.com/WhitewaterFoundry/Pengwin>GitHub | WhitewaterFoundry/Pengwin</a>付费</li><li><a href=https://www.microsoft.com/store/productId/9P804CRF0395>Alpine WSL</a> - <a href=https://github.com/agowa338/WSL-DistroLauncher-Alpine>GitHub | agowa338/WSL-DistroLauncher-Alpine</a></li><li><a href=https://www.microsoft.com/en-us/p/fedora-remix-for-wsl/9n6gdm4k2hnc>Fedora Remix for WSL</a> - <a href=https://github.com/WhitewaterFoundry/Fedora-Remix-for-WSL>GitHub | WhitewaterFoundry/Fedora-Remix-for-WSL</a> 付费</li></ul><h3 id=社区支持的-wsl>社区支持的 WSL</h3><p>另外也有社区支持的 WSL Linux 发行版，社区支持的第三方 WSL 发行版：</p><ul><li><a href=https://github.com/yuk7/ArchWSL>Arch Linux</a></li><li><a href=https://github.com/yuk7/AlpineWSL>Alpine Linux</a></li></ul><p>第三方支持的发行版需要按照其官方使用说明进行安装。</p><p>下载成功后，我们需要对刚刚这一发行版进行初始化。在开始菜单中，没有意外的话，你应该看到刚刚下载完成的 Ubuntu 快捷方式，我们点击打开 Ubuntu，等待初始化完成即可。（初始化过程会将下载好的 Linux 发行版的文件解压缩，并存储在电脑上供你使用，往往会需要 1 分钟甚至更多。）</p><p>初始化完成之后，Linux 会提示你输入一个 UNIX 用户名并为之设置一个 UNIX 密码。这一用户名和密码与你的 Windows 登录账号密码完全无关，你可以任意设置。完成之后，你的 Ubuntu 发行版就安装成功了。</p><h2 id=wsl-2-的安装>WSL 2 的安装</h2><p>WSL 2 需要在 WSL 已经安装完毕的基础之上才能进行安装。</p><h3 id=开启支持-wsl-2-的可选组件>开启支持 WSL 2 的可选组件</h3><p>如果你希望安装 WSL 2，你需要确保你已安装「适用于 Linux 的 Windows 子系统」和「虚拟机平台」这两个可选组件。[<a href=https://dowww.spencerwoo.com/1-preparations/1-1-installation.html#fn1>1]</a>同样：</p><ul><li>以管理员身份打开 PowerShell 终端</li><li>运行下面的命令：</li></ul><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>dism.exe /online /<span style=color:#0086b3>enable-feature</span> /featurename<span style=color:#a61717;background-color:#e3d2d2>:</span><span style=color:#0086b3>Microsoft-Windows</span>-Subsystem-Linux /all /norestart
</span></span><span style=display:flex><span>dism.exe /online /<span style=color:#0086b3>enable-feature</span> /featurename<span style=color:#a61717;background-color:#e3d2d2>:</span>VirtualMachinePlatform /all /norestart
</span></span></code></pre></td></tr></table></div></div><ul><li>根据提示重启电脑</li></ul><h3 id=使用命令行设置需要由-wsl-2-支持的发行版>使用命令行设置需要由 WSL 2 支持的发行版</h3><p>同样，用管理员身份打开 PowerShell 终端：</p><ul><li><p>执行下面命令找到你当前安装的 Linux 发行版及其名字：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>wsl --list
</span></span></code></pre></td></tr></table></div></div></li><li><p>之后，执行下面的命令将你需要的发行版设置为由 WSL 2 支持，将其中的 <code>&lt;Distro></code> 修改为 Linux 发行版名称：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>wsl --set-version &lt;Distro&gt; <span style=color:#099>2</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>另外，你也可以通过下面的命令将之后新安装的发行版均设置为默认由 WSL 2 支持：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>wsl --set-default-version <span style=color:#099>2</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>执行下面的命令，如果发现最后一列的 <code>VERSION</code> 数为 2，说明你的配置是成功的：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>wsl --list --verbose
</span></span></code></pre></td></tr></table></div></div></li></ul><p>如果查询到的版本还是1，并且提示当前windows需要升级内核。则使用wsl_update_x64.rar工具升级并重启电脑。再次尝试，直到版本为2.</p><h2 id=安装fluent-terminal>安装Fluent Terminal</h2><p>Fluent Terminal 是目前相对稳定的非 Electron 构建的终端。得益于 UWP 技术，Fluent Terminal 能够同样拥有美丽的亚克力半透明背景，同时也支持 iTerm2 色彩主题。</p><p>安装Fluent Terminal之前先安装Scoop.</p><h3 id=自定义路径安装scoop>自定义路径安装Scoop</h3><p>用管理员运行powershell,创建scoop环境变量.</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>env:SCOOP<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;D:\Applications\Scoop&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>Environment<span style=color:#000;font-weight:700>]</span>::SetEnvironmentVariable<span style=color:#000;font-weight:700>(</span><span style=color:#d14>&#39;SCOOP&#39;</span>,<span style=color:teal>$env</span>:SCOOP,<span style=color:#d14>&#39;User&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>env:SCOOP_GLOBAL<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;D:\GlobalScoopApps&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>Environment<span style=color:#000;font-weight:700>]</span>::SetEnvironmentVariable<span style=color:#000;font-weight:700>(</span><span style=color:#d14>&#39;SCOOP_GLOBAL&#39;</span>,<span style=color:teal>$env</span>:SCOOP_GLOBAL,<span style=color:#d14>&#39;User&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></td></tr></table></div></div><p>windows环境变量查看方式：</p><p>设置-系统设置-高级系统设置-环境变量</p><p><img src=/postimages/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.webp alt=环境变量></p><h4 id=安装scoop包管理工具>安装Scoop(包管理工具)</h4><p><a href=https://scoop.sh/>Scoop官网</a></p><p><a href=https://sspai.com/post/52496>参考</a></p><p>需要设置代理才能安装：</p><p>暂时先用以下方法设置代理</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>使用下面的命令将当前 session（会话）的代理进行配置：
</span></span><span style=display:flex><span><span style=color:#0086b3>export</span> <span style=color:teal>http_proxy</span><span style=color:#000;font-weight:700>=</span>http://&lt;Windows 主机的 IP 地址&gt;:&lt;代理端口&gt;
</span></span><span style=display:flex><span><span style=color:#0086b3>export</span> <span style=color:teal>https_proxy</span><span style=color:#000;font-weight:700>=</span>http://&lt;Windows 主机的 IP 地址&gt;:&lt;代理端口&gt;
</span></span><span style=display:flex><span>使用下面的命令取消代理：
</span></span><span style=display:flex><span><span style=color:#0086b3>unset</span> http_proxy https_proxy
</span></span><span style=display:flex><span>我们可以使用下面的命令检测自己的对外端口：
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 一个接口</span>
</span></span><span style=display:flex><span>curl ipinfo.io
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 另一个接口</span>
</span></span><span style=display:flex><span>curl cip.cc
</span></span></code></pre></td></tr></table></div></div><p>安装命令：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>iex <span style=color:#000;font-weight:700>(</span>new-object net.webclient<span style=color:#000;font-weight:700>)</span>.downloadstring<span style=color:#000;font-weight:700>(</span><span style=color:#d14>&#39;https://get.scoop.sh&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>## 或者</span>
</span></span><span style=display:flex><span>iwr-useb get.scoop.sh|iex
</span></span></code></pre></td></tr></table></div></div><p>卸载命令：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>scoop uninstall scoop
</span></span><span style=display:flex><span>这个卸载，会删除你配置的scoop下面的所有软件，非常危险。
</span></span></code></pre></td></tr></table></div></div><p>安装 Scoop 之后，我们在 PowerShell 中执行下面的命令，即可安装 Fluent Terminal：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>scoop bucket add nonportable
</span></span><span style=display:flex><span>scoop install fluent-terminal-np
</span></span></code></pre></td></tr></table></div></div><h2 id=shell-环境>Shell 环境</h2><p>为了加速 Ubuntu 软件包在中国大陆的下载速度，我们将包管理工具 <code>apt</code> 源更换至清华 TUNA 软件源镜像。Ubuntu 的软件源配置文件是 <code>/etc/apt/sources.list</code>。将系统自带的该文件做个备份，将该文件替换为下面内容，即可使用 TUNA 的软件源镜像。</p><ul><li><p>备份原文件：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bac
</span></span></code></pre></td></tr></table></div></div></li><li><p>在配置文件 <code>/etc/apt/sources.list</code> 最前面添加下面的内容（下面内容为默认 Ubuntu 20.04 LTS 版本的内容）：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
</span></span><span style=display:flex><span>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span>
</span></span><span style=display:flex><span>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span>
</span></span><span style=display:flex><span>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span>
</span></span><span style=display:flex><span>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 预发布软件源，不建议启用</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>更新缓存：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#000;font-weight:700>&amp;&amp;</span> sudo apt upgrade
</span></span></code></pre></td></tr></table></div></div></li></ul><p>更多内容请参考：<a href=https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/>Ubuntu 镜像使用帮助 - 清华大学开源软件镜像站</a></p><h3 id=zsh>zsh</h3><h3 id=安装配置>安装、配置</h3><p>安装 <code>zsh</code> 并将之设置为默认 Shell：</p><ul><li><p>利用 apt 安装 <code>zsh</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install zsh
</span></span></code></pre></td></tr></table></div></div></li></ul><p>下载安装 <a href=https://ohmyz.sh/>oh-my-zsh</a>，可能是市面上最好的 <code>zsh</code> 配置管理工具：</p><ul><li><p>运行命令下载安装</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sh -c <span style=color:#d14>&#34;</span><span style=color:#000;font-weight:700>$(</span>curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style=color:#000;font-weight:700>)</span><span style=color:#d14>&#34;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>将 <code>zsh</code> 作为默认的 Shell 环境（如果刚刚安装脚本没有这样做的话）：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chsh -s <span style=color:#000;font-weight:700>$(</span>which zsh<span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p>安装zsh时如果报以下错误：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>chsh always asking a password , and get <span style=color:#d14>`</span>PAM: Authentication failure<span style=color:#d14>`</span>
</span></span></code></pre></td></tr></table></div></div><p>解决方法</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>将/etc/pam.d/chsh中
</span></span><span style=display:flex><span>auth       required   pam_shells.so 
</span></span><span style=display:flex><span>改成
</span></span><span style=display:flex><span>auth       sufficient   pam_shells.so 
</span></span></code></pre></td></tr></table></div></div><p>重新进入当前用户并重新安装zsh。</p><h3 id=插件主题模板推荐>插件、主题模板推荐</h3><p><code>zsh</code> 拥有相当丰富的主题、插件等拓展内容，这里我仅列举一些我常用的配置插件和主题模板：</p><h4 id=插件>插件</h4><p>在.zshrc中设置</p><p><img src=/postimages/zsh%E6%8F%92%E4%BB%B6.webp alt=zsh插件></p><ul><li><a href=https://github.com/zsh-users/zsh-autosuggestions>zsh-autosuggestions</a>：为 <code>zsh</code> 提供基于输入历史的自动命令提示</li><li><a href=https://github.com/wting/autojump>autojump</a>：快速跳转不同的目录、路径、文件夹</li><li><a href=https://github.com/zsh-users/zsh-syntax-highlighting>zsh-syntax-highlighting</a>：为 <code>zsh</code> 命令提供色彩高亮</li></ul><p>退出当前登录用户并重新进，如果发现提示插件需要重新安装。则用以下命令安装。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions
</span></span><span style=display:flex><span>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting
</span></span><span style=display:flex><span>git clone https://github.com/wting/autojump ~/.oh-my-zsh/custom/plugins/autojump
</span></span></code></pre></td></tr></table></div></div><p>autojump代码仓库克隆后需要进入到autojump 手动安装</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>安装
</span></span><span style=display:flex><span><span style=color:#0086b3>cd</span> autojump
</span></span><span style=display:flex><span>./install.py 
</span></span><span style=display:flex><span>卸载
</span></span><span style=display:flex><span>./uninstall.py
</span></span></code></pre></td></tr></table></div></div><h2 id=安装git进行版本控制>安装git进行版本控制</h2><p><a href=https://dowww.spencerwoo.com/2-cli/2-3-cli-tools.html#%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6>参考</a></p><h3 id=使用脚本自动执行代理配置>使用脚本自动执行代理配置</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:teal>WINDOWS_IP</span><span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>$(</span>ip route | grep default | awk <span style=color:#d14>&#39;{print $3}&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:teal>PROXY_HTTP</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;http://</span><span style=color:#d14>${</span><span style=color:teal>WINDOWS_IP</span><span style=color:#d14>}</span><span style=color:#d14>:7890&#34;</span>
</span></span><span style=display:flex><span><span style=color:teal>PROXY_SOCKS5</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;</span><span style=color:#d14>${</span><span style=color:teal>WINDOWS_IP</span><span style=color:#d14>}</span><span style=color:#d14>:7890&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Set proxy</span>
</span></span><span style=display:flex><span>set_proxy <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#0086b3>export</span> <span style=color:teal>http_proxy</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;</span><span style=color:#d14>${</span><span style=color:teal>PROXY_HTTP</span><span style=color:#d14>}</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#0086b3>export</span> <span style=color:teal>https_proxy</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;</span><span style=color:#d14>${</span><span style=color:teal>PROXY_HTTP</span><span style=color:#d14>}</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>  proxy_git
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Unset proxy</span>
</span></span><span style=display:flex><span>unset_proxy <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#0086b3>unset</span> http_proxy
</span></span><span style=display:flex><span>  <span style=color:#0086b3>unset</span> https_proxy
</span></span><span style=display:flex><span>  git config --global --unset http.https://github.com.proxy
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Set alias</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>alias</span> <span style=color:teal>proxy</span><span style=color:#000;font-weight:700>=</span>set_proxy
</span></span><span style=display:flex><span><span style=color:#0086b3>alias</span> <span style=color:teal>deproxy</span><span style=color:#000;font-weight:700>=</span>unset_proxy
</span></span></code></pre></td></tr></table></div></div><p>实际上是先获取到网关IP，自动设置代理。</p><h3 id=使用方式>使用方式</h3><p>开启代理：proxy</p><p>关闭代理：deproxy</p><p>IP检测：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>我们可以使用下面的命令检测自己的对外端口：
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 一个接口</span>
</span></span><span style=display:flex><span>curl ipinfo.io
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 另一个接口</span>
</span></span><span style=display:flex><span>curl cip.cc
</span></span></code></pre></td></tr></table></div></div><h2 id=安装-python>安装 Python</h2><p>在 WSL 环境中安装 Python：</p><ul><li><p>使用 APT 安装最新版本的 Python 3：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># 安装最新版本的 Python 3</span>
</span></span><span style=display:flex><span>sudo apt install python-is-python3
</span></span></code></pre></td></tr></table></div></div></li><li><p>安装 Python 包管理 <code>pip</code> 工具：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install python3-pip
</span></span></code></pre></td></tr></table></div></div></li><li><p>更新 <code>pip</code> 包管理源为清华大学 TUNA 镜像源：[<a href=https://dowww.spencerwoo.com/3-vscode/3-3-python.html#fn1>1]</a></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># 使用 TUNA 镜像源更新 pip</span>
</span></span><span style=display:flex><span>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pip -U
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 将 pip 源设置为 TUNA</span>
</span></span><span style=display:flex><span>pip config <span style=color:#0086b3>set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
</span></span></code></pre></td></tr></table></div></div></li></ul><h2 id=安装代码优化工具>安装代码优化工具</h2><p>在上面安装完成 VS Code 的 Python 插件之后，如果顺利，那么 VS Code 应该提示你缺少 Python 代码检查工具（Python linter），如果你尝试格式化文档，那么 VS Code 还会提示你缺少 Python 代码格式化工具（Python code formatter）。我们需要手动安装这些组件。</p><ul><li><p>安装 Python 代码检查工具，VS Code 支持 Pylint（默认）、Flake8、mypy 等多个 Python linter，我更推荐大家使用 <a href=https://flake8.pycqa.org/en/latest/>Flake8</a>：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install flake8
</span></span></code></pre></td></tr></table></div></div></li><li><p>安装 Python 格式化代码工具，VS Code 支持 autopep8（默认）、yapf 和 black，我更推荐大家使用 <a href=https://black.readthedocs.io/en/stable/>black</a> 来格式化代码：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install black
</span></span></code></pre></td></tr></table></div></div></li></ul><h2 id=用-poetry-管理-python-项目>用 Poetry 管理 Python 项目</h2><blockquote><p>Poetry &ndash; Python packaging and dependency management made easy.[<a href=https://dowww.spencerwoo.com/3-vscode/3-3-python.html#fn2>2]</a></p></blockquote><p>熟悉 Python 项目开发的同学可能知道，Python 需要利用虚拟环境工具 <code>virtualenv</code> 来创建虚拟环境运行 Python 项目，也需要 <code>pip</code> 包管理工具来安装 Python 依赖。使用两个单独的工具管理一个项目可能会出现诸多问题，同时 <code>requirements.txt</code> 的管理也相当不优雅。因此我们用 Poetry 作为统一管理 Python 环境和依赖的工具。Poetry 之于 Python 就如 yarn / npm 之于 Node.js、cargo 之于 Rust、composer 之于 PHP……</p><h3 id=安装-poetry>安装 Poetry</h3><p>在 WSL 中安装 Poetry：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python
</span></span></code></pre></td></tr></table></div></div><p>将 Tab 补全加入我们所使用的 Shell 环境，比如 zsh 中：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>poetry completions zsh &gt; ~/.zfunc/_poetry
</span></span></code></pre></td></tr></table></div></div><h3 id=基本使用>基本使用</h3><p>我们可以用 Poetry 直接新建一个模板 Python 项目，比如叫做 <code>poetry-demo</code>：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>poetry new poetry-demo
</span></span></code></pre></td></tr></table></div></div><p>这一命令会在 <code>poetry-demo</code> 目录下生成如下的文件内容：</p><pre tabindex=0><code>poetry-demo
├── pyproject.toml
├── README.rst
├── poetry_demo
│   └── __init__.py
└── tests
    ├── __init__.py
    └── test_poetry_demo.py
</code></pre><p>其中的 <code>pyproject.toml</code> 文件就是定义我们当前 Python 项目所使用依赖库的文件。</p><p>我们可以用下面的命令安装一个新的 Python 依赖：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># 安装一个依赖</span>
</span></span><span style=display:flex><span>poetry add requests
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 安装一个仅在开发中使用的依赖（比如格式化工具 black）</span>
</span></span><span style=display:flex><span>poetry add black --dev <span style=color:#998;font-style:italic># 或 -D</span>
</span></span></code></pre></td></tr></table></div></div><p>对于一个已定义 <code>pyproject.toml</code> 的项目，我们可以用下面的命令安装所有依赖：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># 安装所有依赖</span>
</span></span><span style=display:flex><span>poetry install
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 安装除了仅限开发使用的依赖外的所有依赖库</span>
</span></span><span style=display:flex><span>poetry install --no-dev
</span></span></code></pre></td></tr></table></div></div><p>使用 remove 关键词来移除某个依赖：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>poetry remove requests
</span></span></code></pre></td></tr></table></div></div><blockquote><p>更多 Poetry 命令行工具的使用，推荐大家参考 Poetry 官方文档：<a href=https://python-poetry.org/docs/cli/>Poetry - Commands</a>.</p></blockquote><h2 id=nodejs>Node.js</h2><p>版本更新</p><p>在开始之前，我先来介绍几个 Node.js 相关的概念：</p><ul><li>Node.js - A JavaScript runtime built on Chrome&rsquo;s V8 JavaScript engine 是一个不依赖浏览器的 JavaScript 运行环境，大部分前端项目比如 Vue、React 和后端项目比如 Express、Koa 均依赖于 Node.js 生态系统；</li><li><code>n</code> - Interactively Manage Your Node.js Versions：是一个 Node.js 版本管理工具，我们可以使用 <code>n</code> 来安装不同版本的 Node.js 环境；</li><li>npm 和 yarn，分别是 Node.js 的包管理工具，其中我更推荐大家使用后者（yarn）来管理安装 Node.js 依赖；</li></ul><p>接下来，我们将在 WSL 中使用 <code>n</code> 来安装 Node.js 环境，并配置包管理工具 yarn 来管理 Node.js 环境中的依赖。</p><h2 id=安装-nodejs>安装 Node.js</h2><p>建议大家使用 <a href=https://github.com/tj/n><code>n</code></a> 来管理与安装 Node.js，便于切换版本和快捷安装。首先，我们使用 <a href=https://github.com/mklement0/n-install>n-install</a> 安装 <code>n</code>：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -L https://git.io/n-install | bash
</span></span></code></pre></td></tr></table></div></div><p>n-install（也就是上面的命令）默认会自动帮我们将 <code>n</code> 的重要环境变量 <code>PREFIX</code> 和 <code>N_PREFIX</code> 设置到 <code>$HOME/n</code>，并将 <code>n</code> 安装到 <code>$HOME/n/bin</code>。同时，n-install 会帮助我们更新当前我们所使用的 Shell（比如 zsh），在相应的配置文件中将 <code>$HOME/n/bin</code> 添加到 <code>PATH</code> 中。最后，n-install 会帮我们安装最新的 LTS 版本的 Node.js 环境。</p><blockquote><p>更多关于 n-install 的使用，请参考 <a href=https://github.com/mklement0/n-install>n-install 的 README 文档</a>。</p></blockquote><p>使用 n-install 安装好 <code>n</code> 以及 Node.js 之后，我们可以通过下面的命令进行验证：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># 验证 n 的安装情况</span>
</span></span><span style=display:flex><span>n --version
</span></span><span style=display:flex><span>6.7.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 验证 Node.js 的安装情况</span>
</span></span><span style=display:flex><span>node --version
</span></span><span style=display:flex><span>v12.18.3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 验证 npm 的安装情况</span>
</span></span><span style=display:flex><span>npm --version
</span></span><span style=display:flex><span>6.14.6
</span></span></code></pre></td></tr></table></div></div><p>另外，我们也可以用 <code>n</code> 下载其他版本的 Node.js：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># 下载最新的 LTS 版本 Node.js</span>
</span></span><span style=display:flex><span>n lts
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># 下载特定版本的 Node.js</span>
</span></span><span style=display:flex><span>n 10.16.0
</span></span></code></pre></td></tr></table></div></div><p>直接运行命令 <code>n</code> 也可以进入 interactive 界面，让我们选择使用某个版本的 Node.js。</p><blockquote><p>有关使用 <code>n</code> 下载安装与使用 Node.js 的命令和方法，请参考 <a href=https://github.com/tj/n>n 的官方 README 文档</a>。</p></blockquote><h2 id=配置-nodejs-包管理工具>配置 Node.js 包管理工具</h2><p>接下来，我们安装 <a href=https://yarnpkg.com/>yarn</a>，推荐大家安装使用 yarn：这个更加现代、科学的 Node.js 包管理工具。刚刚下载的 Node.js 中包含有 npm，因此我们可以直接用 npm 来安装 yarn：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install -g yarn
</span></span></code></pre></td></tr></table></div></div><p>此时我们安装的 yarn 实际上是 1.22.0：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn --version
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1.22.4
</span></span></code></pre></td></tr></table></div></div><p>此时我们安装的是 yarn 1.0 版本，也就是比较传统的管理安装 Node.js 依赖的工具，跟 npm 比较类似。yarn 在 2.0+ 版本中经历了重大的变化，因此如果我们需要对某个项目开启 yarn 的 2.0 版本，需要使用下面的命令手动开启：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn <span style=color:#0086b3>set</span> version berry
</span></span></code></pre></td></tr></table></div></div><p>其中，yarn 2.0 所支持的 Plug and play - Plug&rsquo;n&rsquo;Play 功能是 yarn 2.0 的重磅功能，也是我们使用 yarn 2.0 的主要原因，Plug&rsquo;n&rsquo;Play 重点解决了 Node.js 的 <code>node_modules</code> 存在于每个项目中的问题，更多内容请见：<a href=https://yarnpkg.com/features/pnp>yarn - Plug&rsquo;n&rsquo;Play</a>。需要注意的是，并非不是所有的 Node.js 库均支持 yarn 2.0，因此推荐预先查看你所使用的库是否支持 yarn 2.0：<a href=https://yarnpkg.com/features/pnp#compatibility-table>Compatibility Table</a>。</p><blockquote><p>如果你之前使用 yarn 1.0 版本，推荐查看 yarn 官方的 1.0 至 2.0 版本迁移指南：<a href=https://yarnpkg.com/advanced/migration>Migrating from Yarn 1</a>。</p></blockquote><p>有关在 VS Code 中开发 Node.js 项目的方法，更多请参考：<a href=https://code.visualstudio.com/docs/nodejs/working-with-javascript>Node.js tutorial in Visual Studio Code - Visual Studio Code Docs</a></p></div></div></div><div id=footer><div class=container-footer><div class=beian><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="></a><a href target=_blank><span class=some>icp...<span></a></div><div class=info><a href=https://github.com/loveminimal/hugo-theme-virgo>🕊️</a> 2021 - <span id=info-date></span></div></div></div><div class=cool-after></div></body></html>