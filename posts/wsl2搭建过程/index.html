<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>wsl2搭建全过程 - My New Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:title" content="wsl2搭建全过程"><meta property="og:description" content="什么是 WSL WSL 的全称叫做：Windows Subsystem for Linux，即「适用于 Linux 的 Windows 子系统」。WSL 的诞生让 Windows 用户（开发人员）按原样运行 GNU/Linux 环境 —— 包括大多数命令行工具、实用工具和应用程序 —— 且不会产生虚拟机开销。
用 WSL 可以做什么？ 好的，在 Windows 上用 WSL 我们到底能干什么呢？
你可以在 Windows 上「安装」你喜欢的 GNU/Linux 发行版 你可以直接在 Windows 上运行 grep、awk、sed 等 Linux 原生可执行文件 你可以在 Windows 上直接使用 Vim、Emacs 等工具，直接使用 Linux 版本的 Javascript/Node.js、Ruby、Python、C/C++、Rust、Go 等语言进行开发，直接运行 MySQL、Apache 等 Linux 原生应用和服务等 最为重要的是，利用 WSL 我们可以直接在 不抛弃 Windows 全部优秀工具的前提下，在没有因为虚拟机开销而牺牲太多性能的情况下，直接运行使用完整的 Linux 系统。
WSL 2 中采用的新措施 在 Windows 上实现完整的 Linux 原生系统调用（Full System Call Compatibility） 用 WSL 执行曾经 1."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-05T22:10:00+00:00"><meta property="article:modified_time" content="2022-02-05T22:10:00+00:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="wsl2搭建全过程"><meta name=twitter:description content="什么是 WSL WSL 的全称叫做：Windows Subsystem for Linux，即「适用于 Linux 的 Windows 子系统」。WSL 的诞生让 Windows 用户（开发人员）按原样运行 GNU/Linux 环境 —— 包括大多数命令行工具、实用工具和应用程序 —— 且不会产生虚拟机开销。
用 WSL 可以做什么？ 好的，在 Windows 上用 WSL 我们到底能干什么呢？
你可以在 Windows 上「安装」你喜欢的 GNU/Linux 发行版 你可以直接在 Windows 上运行 grep、awk、sed 等 Linux 原生可执行文件 你可以在 Windows 上直接使用 Vim、Emacs 等工具，直接使用 Linux 版本的 Javascript/Node.js、Ruby、Python、C/C++、Rust、Go 等语言进行开发，直接运行 MySQL、Apache 等 Linux 原生应用和服务等 最为重要的是，利用 WSL 我们可以直接在 不抛弃 Windows 全部优秀工具的前提下，在没有因为虚拟机开销而牺牲太多性能的情况下，直接运行使用完整的 Linux 系统。
WSL 2 中采用的新措施 在 Windows 上实现完整的 Linux 原生系统调用（Full System Call Compatibility） 用 WSL 执行曾经 1."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://example.org/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/><link rel=prev href=http://example.org/posts/2022happynewyear/><link rel=next href=http://example.org/posts/hexo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%92%8C%E5%88%A0%E9%99%A4/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"wsl2搭建全过程","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/example.org\/posts\/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B\/"},"genre":"posts","wordcount":1254,"url":"http:\/\/example.org\/posts\/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B\/","datePublished":"2022-02-05T22:10:00+00:00","dateModified":"2022-02-05T22:10:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Author"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="My New Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">wsl2搭建全过程</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-02-05>2022-02-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1254 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#什么是-wsl>什么是 WSL</a></li><li><a href=#用-wsl-可以做什么>用 WSL 可以做什么？</a></li><li><a href=#wsl-2-中采用的新措施>WSL 2 中采用的新措施</a></li><li><a href=#安装>安装</a><ul><li><a href=#开启适用于-linux-的-windows-子系统的附加功能>开启「适用于 Linux 的 Windows 子系统」的附加功能</a></li><li><a href=#官方版本-wsl>官方版本 WSL</a></li><li><a href=#社区支持的-wsl>社区支持的 WSL</a></li></ul></li><li><a href=#wsl-2-的安装>WSL 2 的安装</a><ul><li><a href=#开启支持-wsl-2-的可选组件>开启支持 WSL 2 的可选组件</a></li><li><a href=#使用命令行设置需要由-wsl-2-支持的发行版>使用命令行设置需要由 WSL 2 支持的发行版</a></li></ul></li><li><a href=#安装fluent-terminal>安装Fluent Terminal</a><ul><li><a href=#自定义路径安装scoop>自定义路径安装Scoop</a></li></ul></li><li><a href=#shell-环境>Shell 环境</a><ul><li><a href=#zsh>zsh</a></li><li><a href=#安装配置>安装、配置</a></li><li><a href=#插件主题模板推荐>插件、主题模板推荐</a></li></ul></li><li><a href=#安装git进行版本控制>安装git进行版本控制</a><ul><li><a href=#使用脚本自动执行代理配置>使用脚本自动执行代理配置</a></li><li><a href=#使用方式>使用方式</a></li></ul></li><li><a href=#安装-python>安装 Python</a></li><li><a href=#安装代码优化工具>安装代码优化工具</a></li><li><a href=#用-poetry-管理-python-项目>用 Poetry 管理 Python 项目</a><ul><li><a href=#安装-poetry>安装 Poetry</a></li><li><a href=#基本使用>基本使用</a></li></ul></li><li><a href=#nodejs>Node.js</a></li><li><a href=#安装-nodejs>安装 Node.js</a></li><li><a href=#配置-nodejs-包管理工具>配置 Node.js 包管理工具</a></li></ul></nav></div></div><div class=content id=content><h2 id=什么是-wsl>什么是 WSL</h2><p>WSL 的全称叫做：Windows Subsystem for Linux，即「适用于 Linux 的 Windows 子系统」。WSL 的诞生让 Windows 用户（开发人员）按原样运行 GNU/Linux 环境 —— 包括大多数命令行工具、实用工具和应用程序 —— 且不会产生虚拟机开销。</p><h2 id=用-wsl-可以做什么>用 WSL 可以做什么？</h2><p>好的，在 Windows 上用 WSL 我们到底能干什么呢？</p><ul><li>你可以在 Windows 上「安装」你喜欢的 GNU/Linux 发行版</li><li>你可以直接在 Windows 上运行 <code>grep</code>、<code>awk</code>、<code>sed</code> 等 Linux 原生可执行文件</li><li>你可以在 Windows 上直接使用 Vim、Emacs 等工具，直接使用 Linux 版本的 Javascript/Node.js、Ruby、Python、C/C++、Rust、Go 等语言进行开发，直接运行 MySQL、Apache 等 Linux 原生应用和服务等</li></ul><p>最为重要的是，利用 WSL 我们可以直接在 <strong>不抛弃 Windows 全部优秀工具的前提下</strong>，<strong>在没有因为虚拟机开销而牺牲太多性能的情况下</strong>，直接运行使用完整的 Linux 系统。</p><h2 id=wsl-2-中采用的新措施>WSL 2 中采用的新措施</h2><ul><li>在 Windows 上实现完整的 Linux 原生系统调用（Full System Call Compatibility）</li><li>用 WSL 执行曾经 1.0 版本无法运行的 Linux 原生程序，比如依赖虚拟化技术的 Docker 容器。</li><li>极大的突破了 WSL 1.0 中出现的 I/O 性能瓶颈：WSL 2 中，<code>git clone</code>、<code>npm install</code>、<code>apt update</code>、<code>apt upgrade</code> 等依赖文件系统性能的操作和命令的速度都有显著提高。</li><li>如果你在 WSL 2 中运行 Web 服务器，你会发现映射到 Windows 中的端口并不一样。不过这一不同并无大碍。</li><li>你会发现 WSL 2 中在 Windows 侧和 Linux 侧之间相互移动文件的速度会比 WSL 的 1.0 版本慢。因此，为了尽可能保证我们 WSL 文件系统的存储速度，<strong>我们应该将在 Linux 中使用的文件全部放在 Linux 文件系统下</strong>。</li><li>WSL 2 目前对硬件的支持有限，因此你可能无法直接通过 WSL 2 访问外设。不过，WSL 2 目前已经支持了 GPU 的连接,同时，我们也可以通过一些 hacky 的手段让 WSL 2 能够访问 USB 接口.</li><li>WSL 2 对 VMware 等虚拟机软件也有一些要求，也就是：你无法在运行 WSL 2 的情况下直接运行 VMware 或旧版本的 Virtual Box。这是因为 WSL 2 中的虚拟化技术依赖于 Hyper-V，而 VMware 和 6.0 版本之前的 Virtual Box 都和 Hyper-V 不兼容.</li></ul><h2 id=安装>安装</h2><p>只有 Windows 10 才能安装使用 WSL。Windows 7、8 或之前的任何版本都无法使用，请及时将系统版本更新至最新。</p><p>只有 Windows 10 版本 16215 或以后的版本才能够正常运行 WSL。你可以在「Windows 设置 > 系统 > 关于」处找到你的 Windows 10 操作系统版本。</p><p><strong>只有 Windows 10 版本 18362 或 18363 以及以后的版本，或小版本号为 1049 的版本，才能够正常运行 WSL 2</strong>。需要明确，WSL 2 目前只能在 Windows 10 版本 1903、1909 和 2004 中使用（其中 1903 和 1909 仅支持 <strong>x64 系统</strong>），因此你需要将自己的 Windows 系统进行升级至合适的版本，才能使用正确的 Windows 10 版本安装 WSL 2。</p><h3 id=开启适用于-linux-的-windows-子系统的附加功能>开启「适用于 Linux 的 Windows 子系统」的附加功能</h3><p>无论使用 WSL 1 还是 WSL 2，我们都需要开启「适用于 Linux 的 Windows 子系统」的附加功能：</p><ul><li>以管理员身份打开 PowerShell 终端</li><li>运行下面的命令：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
</span></span></code></pre></div><ul><li>按照提示重启电脑</li></ul><h3 id=官方版本-wsl>官方版本 WSL</h3><p>微软官方支持的 WSL Linux 发行版可以直接从微软商店下载。</p><p>官方支持的 Linux 发行版有：</p><ul><li>Ubuntu: <a href=https://www.microsoft.com/store/productId/9NBLGGH4MSV6 target=_blank rel="noopener noreffer">最新版</a>，<a href=https://www.microsoft.com/store/productId/9PJN388HP8C9 target=_blank rel="noopener noreffer">16.04 LTS</a>，<a href=https://www.microsoft.com/store/productId/9N9TNGVNDL3Q target=_blank rel="noopener noreffer">18.04 LTS</a>，和 <a href=https://www.microsoft.com/p/ubuntu-2004-lts/9n6svws3rx71 target=_blank rel="noopener noreffer">20.04 LTS</a></li><li>OpenSUSE Leap: <a href=https://www.microsoft.com/store/productId/9NJVJTS82TJX target=_blank rel="noopener noreffer">42</a>, <a href=https://www.microsoft.com/store/productId/9N1TB6FPVJ8C target=_blank rel="noopener noreffer">15.0</a></li><li>SUSE Linux Enterprise Server: <a href=https://www.microsoft.com/store/productId/9P32MWBH6CNS target=_blank rel="noopener noreffer">12</a>, <a href=https://www.microsoft.com/store/productId/9PMW35D7FNLX target=_blank rel="noopener noreffer">15</a></li><li><a href=https://www.microsoft.com/store/productId/9MSVKQC78PK6 target=_blank rel="noopener noreffer">Debian GNU/Linux</a></li><li><a href=https://www.microsoft.com/store/productId/9PKR34TNCV07 target=_blank rel="noopener noreffer">Kali Linux</a></li><li><a href=https://www.microsoft.com/store/productId/9NV1GV1PXZ6P target=_blank rel="noopener noreffer">Pengwin</a> - <a href=https://github.com/WhitewaterFoundry/Pengwin target=_blank rel="noopener noreffer">GitHub | WhitewaterFoundry/Pengwin</a>付费</li><li><a href=https://www.microsoft.com/store/productId/9P804CRF0395 target=_blank rel="noopener noreffer">Alpine WSL</a> - <a href=https://github.com/agowa338/WSL-DistroLauncher-Alpine target=_blank rel="noopener noreffer">GitHub | agowa338/WSL-DistroLauncher-Alpine</a></li><li><a href=https://www.microsoft.com/en-us/p/fedora-remix-for-wsl/9n6gdm4k2hnc target=_blank rel="noopener noreffer">Fedora Remix for WSL</a> - <a href=https://github.com/WhitewaterFoundry/Fedora-Remix-for-WSL target=_blank rel="noopener noreffer">GitHub | WhitewaterFoundry/Fedora-Remix-for-WSL</a> 付费</li></ul><h3 id=社区支持的-wsl>社区支持的 WSL</h3><p>另外也有社区支持的 WSL Linux 发行版，社区支持的第三方 WSL 发行版：</p><ul><li><a href=https://github.com/yuk7/ArchWSL target=_blank rel="noopener noreffer">Arch Linux</a></li><li><a href=https://github.com/yuk7/AlpineWSL target=_blank rel="noopener noreffer">Alpine Linux</a></li></ul><p>第三方支持的发行版需要按照其官方使用说明进行安装。</p><p>下载成功后，我们需要对刚刚这一发行版进行初始化。在开始菜单中，没有意外的话，你应该看到刚刚下载完成的 Ubuntu 快捷方式，我们点击打开 Ubuntu，等待初始化完成即可。（初始化过程会将下载好的 Linux 发行版的文件解压缩，并存储在电脑上供你使用，往往会需要 1 分钟甚至更多。）</p><p>初始化完成之后，Linux 会提示你输入一个 UNIX 用户名并为之设置一个 UNIX 密码。这一用户名和密码与你的 Windows 登录账号密码完全无关，你可以任意设置。完成之后，你的 Ubuntu 发行版就安装成功了。</p><h2 id=wsl-2-的安装>WSL 2 的安装</h2><p>WSL 2 需要在 WSL 已经安装完毕的基础之上才能进行安装。</p><h3 id=开启支持-wsl-2-的可选组件>开启支持 WSL 2 的可选组件</h3><p>如果你希望安装 WSL 2，你需要确保你已安装「适用于 Linux 的 Windows 子系统」和「虚拟机平台」这两个可选组件。[<a href=https://dowww.spencerwoo.com/1-preparations/1-1-installation.html#fn1 target=_blank rel="noopener noreffer">1]</a>同样：</p><ul><li>以管理员身份打开 PowerShell 终端</li><li>运行下面的命令：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>dism.exe /online /enable-feature /featurename<span style=color:#960050;background-color:#1e0010>:</span>Microsoft-Windows-Subsystem-Linux /all /norestart
</span></span><span style=display:flex><span>dism.exe /online /enable-feature /featurename<span style=color:#960050;background-color:#1e0010>:</span>VirtualMachinePlatform /all /norestart
</span></span></code></pre></div><ul><li>根据提示重启电脑</li></ul><h3 id=使用命令行设置需要由-wsl-2-支持的发行版>使用命令行设置需要由 WSL 2 支持的发行版</h3><p>同样，用管理员身份打开 PowerShell 终端：</p><ul><li><p>执行下面命令找到你当前安装的 Linux 发行版及其名字：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>wsl --list
</span></span></code></pre></div></li><li><p>之后，执行下面的命令将你需要的发行版设置为由 WSL 2 支持，将其中的 <code>&lt;Distro></code> 修改为 Linux 发行版名称：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>wsl --set-version &lt;Distro&gt; <span style=color:#ae81ff>2</span>
</span></span></code></pre></div></li><li><p>另外，你也可以通过下面的命令将之后新安装的发行版均设置为默认由 WSL 2 支持：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>wsl --set-default-version <span style=color:#ae81ff>2</span>
</span></span></code></pre></div></li><li><p>执行下面的命令，如果发现最后一列的 <code>VERSION</code> 数为 2，说明你的配置是成功的：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>wsl --list --verbose
</span></span></code></pre></div></li></ul><p>如果查询到的版本还是1，并且提示当前windows需要升级内核。则使用wsl_update_x64.rar工具升级并重启电脑。再次尝试，直到版本为2.</p><h2 id=安装fluent-terminal>安装Fluent Terminal</h2><p>Fluent Terminal 是目前相对稳定的非 Electron 构建的终端。得益于 UWP 技术，Fluent Terminal 能够同样拥有美丽的亚克力半透明背景，同时也支持 iTerm2 色彩主题。</p><p>安装Fluent Terminal之前先安装Scoop.</p><h3 id=自定义路径安装scoop>自定义路径安装Scoop</h3><p>用管理员运行powershell,创建scoop环境变量.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>env:SCOOP<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;D:\Applications\Scoop&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Environment<span style=color:#f92672>]</span>::SetEnvironmentVariable<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;SCOOP&#39;</span>,$env:SCOOP,<span style=color:#e6db74>&#39;User&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>env:SCOOP_GLOBAL<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;D:\GlobalScoopApps&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Environment<span style=color:#f92672>]</span>::SetEnvironmentVariable<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;SCOOP_GLOBAL&#39;</span>,$env:SCOOP_GLOBAL,<span style=color:#e6db74>&#39;User&#39;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><p>windows环境变量查看方式：</p><p>设置-系统设置-高级系统设置-环境变量</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/img/postimages/%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f.webp data-srcset="/img/postimages/%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f.webp, /img/postimages/%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f.webp 1.5x, /img/postimages/%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f.webp 2x" data-sizes=auto alt=/img/postimages/环境变量.webp title=环境变量></p><h4 id=安装scoop包管理工具>安装Scoop(包管理工具)</h4><p><a href=https://scoop.sh/ target=_blank rel="noopener noreffer">Scoop官网</a></p><p><a href=https://sspai.com/post/52496 target=_blank rel="noopener noreffer">参考</a></p><p>需要设置代理才能安装：</p><p>暂时先用以下方法设置代理</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>使用下面的命令将当前 session（会话）的代理进行配置：
</span></span><span style=display:flex><span>export http_proxy<span style=color:#f92672>=</span>http://&lt;Windows 主机的 IP 地址&gt;:&lt;代理端口&gt;
</span></span><span style=display:flex><span>export https_proxy<span style=color:#f92672>=</span>http://&lt;Windows 主机的 IP 地址&gt;:&lt;代理端口&gt;
</span></span><span style=display:flex><span>使用下面的命令取消代理：
</span></span><span style=display:flex><span>unset http_proxy https_proxy
</span></span><span style=display:flex><span>我们可以使用下面的命令检测自己的对外端口：
</span></span><span style=display:flex><span><span style=color:#75715e># 一个接口</span>
</span></span><span style=display:flex><span>curl ipinfo.io
</span></span><span style=display:flex><span><span style=color:#75715e># 另一个接口</span>
</span></span><span style=display:flex><span>curl cip.cc
</span></span></code></pre></div><p>安装命令：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>iex <span style=color:#f92672>(</span>new-object net.webclient<span style=color:#f92672>)</span>.downloadstring<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;https://get.scoop.sh&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>## 或者</span>
</span></span><span style=display:flex><span>iwr-useb get.scoop.sh|iex
</span></span></code></pre></div><p>卸载命令：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>scoop uninstall scoop
</span></span><span style=display:flex><span>这个卸载，会删除你配置的scoop下面的所有软件，非常危险。
</span></span></code></pre></div><p>安装 Scoop 之后，我们在 PowerShell 中执行下面的命令，即可安装 Fluent Terminal：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>scoop bucket add nonportable
</span></span><span style=display:flex><span>scoop install fluent-terminal-np
</span></span></code></pre></div><h2 id=shell-环境>Shell 环境</h2><p>为了加速 Ubuntu 软件包在中国大陆的下载速度，我们将包管理工具 <code>apt</code> 源更换至清华 TUNA 软件源镜像。Ubuntu 的软件源配置文件是 <code>/etc/apt/sources.list</code>。将系统自带的该文件做个备份，将该文件替换为下面内容，即可使用 TUNA 的软件源镜像。</p><ul><li><p>备份原文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bac
</span></span></code></pre></div></li><li><p>在配置文件 <code>/etc/apt/sources.list</code> 最前面添加下面的内容（下面内容为默认 Ubuntu 20.04 LTS 版本的内容）：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
</span></span><span style=display:flex><span>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
</span></span><span style=display:flex><span><span style=color:#75715e># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span>
</span></span><span style=display:flex><span>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
</span></span><span style=display:flex><span><span style=color:#75715e># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span>
</span></span><span style=display:flex><span>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
</span></span><span style=display:flex><span><span style=color:#75715e># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span>
</span></span><span style=display:flex><span>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse
</span></span><span style=display:flex><span><span style=color:#75715e># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 预发布软件源，不建议启用</span>
</span></span><span style=display:flex><span><span style=color:#75715e># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span>
</span></span><span style=display:flex><span><span style=color:#75715e># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span>
</span></span></code></pre></div></li><li><p>更新缓存：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt upgrade
</span></span></code></pre></div></li></ul><p>更多内容请参考：<a href=https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/ target=_blank rel="noopener noreffer">Ubuntu 镜像使用帮助 - 清华大学开源软件镜像站</a></p><h3 id=zsh>zsh</h3><h3 id=安装配置>安装、配置</h3><p>安装 <code>zsh</code> 并将之设置为默认 Shell：</p><ul><li><p>利用 apt 安装 <code>zsh</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install zsh
</span></span></code></pre></div></li></ul><p>下载安装 <a href=https://ohmyz.sh/ target=_blank rel="noopener noreffer">oh-my-zsh</a>，可能是市面上最好的 <code>zsh</code> 配置管理工具：</p><ul><li><p>运行命令下载安装</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sh -c <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div></li><li><p>将 <code>zsh</code> 作为默认的 Shell 环境（如果刚刚安装脚本没有这样做的话）：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chsh -s <span style=color:#66d9ef>$(</span>which zsh<span style=color:#66d9ef>)</span>
</span></span></code></pre></div></li></ul><p>安装zsh时如果报以下错误：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>chsh always asking a password , and get <span style=color:#e6db74>`</span>PAM: Authentication failure<span style=color:#e6db74>`</span>
</span></span></code></pre></div><p>解决方法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>将/etc/pam.d/chsh中
</span></span><span style=display:flex><span>auth       required   pam_shells.so 
</span></span><span style=display:flex><span>改成
</span></span><span style=display:flex><span>auth       sufficient   pam_shells.so 
</span></span></code></pre></div><p>重新进入当前用户并重新安装zsh。</p><h3 id=插件主题模板推荐>插件、主题模板推荐</h3><p><code>zsh</code> 拥有相当丰富的主题、插件等拓展内容，这里我仅列举一些我常用的配置插件和主题模板：</p><h4 id=插件>插件</h4><p>在.zshrc中设置</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/img/postimages/zsh%e6%8f%92%e4%bb%b6.webp data-srcset="/img/postimages/zsh%e6%8f%92%e4%bb%b6.webp, /img/postimages/zsh%e6%8f%92%e4%bb%b6.webp 1.5x, /img/postimages/zsh%e6%8f%92%e4%bb%b6.webp 2x" data-sizes=auto alt=/img/postimages/zsh插件.webp title=zsh插件></p><ul><li><a href=https://github.com/zsh-users/zsh-autosuggestions target=_blank rel="noopener noreffer">zsh-autosuggestions</a>：为 <code>zsh</code> 提供基于输入历史的自动命令提示</li><li><a href=https://github.com/wting/autojump target=_blank rel="noopener noreffer">autojump</a>：快速跳转不同的目录、路径、文件夹</li><li><a href=https://github.com/zsh-users/zsh-syntax-highlighting target=_blank rel="noopener noreffer">zsh-syntax-highlighting</a>：为 <code>zsh</code> 命令提供色彩高亮</li></ul><p>退出当前登录用户并重新进，如果发现提示插件需要重新安装。则用以下命令安装。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions
</span></span><span style=display:flex><span>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting
</span></span><span style=display:flex><span>git clone https://github.com/wting/autojump ~/.oh-my-zsh/custom/plugins/autojump
</span></span></code></pre></div><p>autojump代码仓库克隆后需要进入到autojump 手动安装</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>安装
</span></span><span style=display:flex><span>cd autojump
</span></span><span style=display:flex><span>./install.py 
</span></span><span style=display:flex><span>卸载
</span></span><span style=display:flex><span>./uninstall.py
</span></span></code></pre></div><h2 id=安装git进行版本控制>安装git进行版本控制</h2><p><a href=https://dowww.spencerwoo.com/2-cli/2-3-cli-tools.html#%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6 target=_blank rel="noopener noreffer">参考</a></p><h3 id=使用脚本自动执行代理配置>使用脚本自动执行代理配置</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>WINDOWS_IP<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>ip route | grep default | awk <span style=color:#e6db74>&#39;{print $3}&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>PROXY_HTTP<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://</span><span style=color:#e6db74>${</span>WINDOWS_IP<span style=color:#e6db74>}</span><span style=color:#e6db74>:7890&#34;</span>
</span></span><span style=display:flex><span>PROXY_SOCKS5<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>WINDOWS_IP<span style=color:#e6db74>}</span><span style=color:#e6db74>:7890&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set proxy</span>
</span></span><span style=display:flex><span>set_proxy <span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  export http_proxy<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PROXY_HTTP<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  export https_proxy<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>PROXY_HTTP<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  proxy_git
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Unset proxy</span>
</span></span><span style=display:flex><span>unset_proxy <span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  unset http_proxy
</span></span><span style=display:flex><span>  unset https_proxy
</span></span><span style=display:flex><span>  git config --global --unset http.https://github.com.proxy
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set alias</span>
</span></span><span style=display:flex><span>alias proxy<span style=color:#f92672>=</span>set_proxy
</span></span><span style=display:flex><span>alias deproxy<span style=color:#f92672>=</span>unset_proxy
</span></span></code></pre></div><p>实际上是先获取到网关IP，自动设置代理。</p><h3 id=使用方式>使用方式</h3><p>开启代理：proxy</p><p>关闭代理：deproxy</p><p>IP检测：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>我们可以使用下面的命令检测自己的对外端口：
</span></span><span style=display:flex><span><span style=color:#75715e># 一个接口</span>
</span></span><span style=display:flex><span>curl ipinfo.io
</span></span><span style=display:flex><span><span style=color:#75715e># 另一个接口</span>
</span></span><span style=display:flex><span>curl cip.cc
</span></span></code></pre></div><h2 id=安装-python>安装 Python</h2><p>在 WSL 环境中安装 Python：</p><ul><li><p>使用 APT 安装最新版本的 Python 3：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 安装最新版本的 Python 3</span>
</span></span><span style=display:flex><span>sudo apt install python-is-python3
</span></span></code></pre></div></li><li><p>安装 Python 包管理 <code>pip</code> 工具：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install python3-pip
</span></span></code></pre></div></li><li><p>更新 <code>pip</code> 包管理源为清华大学 TUNA 镜像源：[<a href=https://dowww.spencerwoo.com/3-vscode/3-3-python.html#fn1 target=_blank rel="noopener noreffer">1]</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 使用 TUNA 镜像源更新 pip</span>
</span></span><span style=display:flex><span>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pip -U
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 将 pip 源设置为 TUNA</span>
</span></span><span style=display:flex><span>pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
</span></span></code></pre></div></li></ul><h2 id=安装代码优化工具>安装代码优化工具</h2><p>在上面安装完成 VS Code 的 Python 插件之后，如果顺利，那么 VS Code 应该提示你缺少 Python 代码检查工具（Python linter），如果你尝试格式化文档，那么 VS Code 还会提示你缺少 Python 代码格式化工具（Python code formatter）。我们需要手动安装这些组件。</p><ul><li><p>安装 Python 代码检查工具，VS Code 支持 Pylint（默认）、Flake8、mypy 等多个 Python linter，我更推荐大家使用 <a href=https://flake8.pycqa.org/en/latest/ target=_blank rel="noopener noreffer">Flake8</a>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install flake8
</span></span></code></pre></div></li><li><p>安装 Python 格式化代码工具，VS Code 支持 autopep8（默认）、yapf 和 black，我更推荐大家使用 <a href=https://black.readthedocs.io/en/stable/ target=_blank rel="noopener noreffer">black</a> 来格式化代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install black
</span></span></code></pre></div></li></ul><h2 id=用-poetry-管理-python-项目>用 Poetry 管理 Python 项目</h2><blockquote><p>Poetry &ndash; Python packaging and dependency management made easy.[<a href=https://dowww.spencerwoo.com/3-vscode/3-3-python.html#fn2 target=_blank rel="noopener noreffer">2]</a></p></blockquote><p>熟悉 Python 项目开发的同学可能知道，Python 需要利用虚拟环境工具 <code>virtualenv</code> 来创建虚拟环境运行 Python 项目，也需要 <code>pip</code> 包管理工具来安装 Python 依赖。使用两个单独的工具管理一个项目可能会出现诸多问题，同时 <code>requirements.txt</code> 的管理也相当不优雅。因此我们用 Poetry 作为统一管理 Python 环境和依赖的工具。Poetry 之于 Python 就如 yarn / npm 之于 Node.js、cargo 之于 Rust、composer 之于 PHP……</p><h3 id=安装-poetry>安装 Poetry</h3><p>在 WSL 中安装 Poetry：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python
</span></span></code></pre></div><p>将 Tab 补全加入我们所使用的 Shell 环境，比如 zsh 中：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>poetry completions zsh &gt; ~/.zfunc/_poetry
</span></span></code></pre></div><h3 id=基本使用>基本使用</h3><p>我们可以用 Poetry 直接新建一个模板 Python 项目，比如叫做 <code>poetry-demo</code>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>poetry new poetry-demo
</span></span></code></pre></div><p>这一命令会在 <code>poetry-demo</code> 目录下生成如下的文件内容：</p><pre tabindex=0><code>poetry-demo
├── pyproject.toml
├── README.rst
├── poetry_demo
│   └── __init__.py
└── tests
    ├── __init__.py
    └── test_poetry_demo.py
</code></pre><p>其中的 <code>pyproject.toml</code> 文件就是定义我们当前 Python 项目所使用依赖库的文件。</p><p>我们可以用下面的命令安装一个新的 Python 依赖：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 安装一个依赖</span>
</span></span><span style=display:flex><span>poetry add requests
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装一个仅在开发中使用的依赖（比如格式化工具 black）</span>
</span></span><span style=display:flex><span>poetry add black --dev <span style=color:#75715e># 或 -D</span>
</span></span></code></pre></div><p>对于一个已定义 <code>pyproject.toml</code> 的项目，我们可以用下面的命令安装所有依赖：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 安装所有依赖</span>
</span></span><span style=display:flex><span>poetry install
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装除了仅限开发使用的依赖外的所有依赖库</span>
</span></span><span style=display:flex><span>poetry install --no-dev
</span></span></code></pre></div><p>使用 remove 关键词来移除某个依赖：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>poetry remove requests
</span></span></code></pre></div><blockquote><p>更多 Poetry 命令行工具的使用，推荐大家参考 Poetry 官方文档：<a href=https://python-poetry.org/docs/cli/ target=_blank rel="noopener noreffer">Poetry - Commands</a>.</p></blockquote><h2 id=nodejs>Node.js</h2><p>版本更新</p><p>在开始之前，我先来介绍几个 Node.js 相关的概念：</p><ul><li>Node.js - A JavaScript runtime built on Chrome&rsquo;s V8 JavaScript engine 是一个不依赖浏览器的 JavaScript 运行环境，大部分前端项目比如 Vue、React 和后端项目比如 Express、Koa 均依赖于 Node.js 生态系统；</li><li><code>n</code> - Interactively Manage Your Node.js Versions：是一个 Node.js 版本管理工具，我们可以使用 <code>n</code> 来安装不同版本的 Node.js 环境；</li><li>npm 和 yarn，分别是 Node.js 的包管理工具，其中我更推荐大家使用后者（yarn）来管理安装 Node.js 依赖；</li></ul><p>接下来，我们将在 WSL 中使用 <code>n</code> 来安装 Node.js 环境，并配置包管理工具 yarn 来管理 Node.js 环境中的依赖。</p><h2 id=安装-nodejs>安装 Node.js</h2><p>建议大家使用 <a href=https://github.com/tj/n target=_blank rel="noopener noreffer"><code>n</code></a> 来管理与安装 Node.js，便于切换版本和快捷安装。首先，我们使用 <a href=https://github.com/mklement0/n-install target=_blank rel="noopener noreffer">n-install</a> 安装 <code>n</code>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -L https://git.io/n-install | bash
</span></span></code></pre></div><p>n-install（也就是上面的命令）默认会自动帮我们将 <code>n</code> 的重要环境变量 <code>PREFIX</code> 和 <code>N_PREFIX</code> 设置到 <code>$HOME/n</code>，并将 <code>n</code> 安装到 <code>$HOME/n/bin</code>。同时，n-install 会帮助我们更新当前我们所使用的 Shell（比如 zsh），在相应的配置文件中将 <code>$HOME/n/bin</code> 添加到 <code>PATH</code> 中。最后，n-install 会帮我们安装最新的 LTS 版本的 Node.js 环境。</p><blockquote><p>更多关于 n-install 的使用，请参考 <a href=https://github.com/mklement0/n-install target=_blank rel="noopener noreffer">n-install 的 README 文档</a>。</p></blockquote><p>使用 n-install 安装好 <code>n</code> 以及 Node.js 之后，我们可以通过下面的命令进行验证：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 验证 n 的安装情况</span>
</span></span><span style=display:flex><span>n --version
</span></span><span style=display:flex><span>6.7.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 验证 Node.js 的安装情况</span>
</span></span><span style=display:flex><span>node --version
</span></span><span style=display:flex><span>v12.18.3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 验证 npm 的安装情况</span>
</span></span><span style=display:flex><span>npm --version
</span></span><span style=display:flex><span>6.14.6
</span></span></code></pre></div><p>另外，我们也可以用 <code>n</code> 下载其他版本的 Node.js：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 下载最新的 LTS 版本 Node.js</span>
</span></span><span style=display:flex><span>n lts
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 下载特定版本的 Node.js</span>
</span></span><span style=display:flex><span>n 10.16.0
</span></span></code></pre></div><p>直接运行命令 <code>n</code> 也可以进入 interactive 界面，让我们选择使用某个版本的 Node.js。</p><blockquote><p>有关使用 <code>n</code> 下载安装与使用 Node.js 的命令和方法，请参考 <a href=https://github.com/tj/n target=_blank rel="noopener noreffer">n 的官方 README 文档</a>。</p></blockquote><h2 id=配置-nodejs-包管理工具>配置 Node.js 包管理工具</h2><p>接下来，我们安装 <a href=https://yarnpkg.com/ target=_blank rel="noopener noreffer">yarn</a>，推荐大家安装使用 yarn：这个更加现代、科学的 Node.js 包管理工具。刚刚下载的 Node.js 中包含有 npm，因此我们可以直接用 npm 来安装 yarn：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install -g yarn
</span></span></code></pre></div><p>此时我们安装的 yarn 实际上是 1.22.0：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn --version
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1.22.4
</span></span></code></pre></div><p>此时我们安装的是 yarn 1.0 版本，也就是比较传统的管理安装 Node.js 依赖的工具，跟 npm 比较类似。yarn 在 2.0+ 版本中经历了重大的变化，因此如果我们需要对某个项目开启 yarn 的 2.0 版本，需要使用下面的命令手动开启：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn set version berry
</span></span></code></pre></div><p>其中，yarn 2.0 所支持的 Plug and play - Plug&rsquo;n&rsquo;Play 功能是 yarn 2.0 的重磅功能，也是我们使用 yarn 2.0 的主要原因，Plug&rsquo;n&rsquo;Play 重点解决了 Node.js 的 <code>node_modules</code> 存在于每个项目中的问题，更多内容请见：<a href=https://yarnpkg.com/features/pnp target=_blank rel="noopener noreffer">yarn - Plug&rsquo;n&rsquo;Play</a>。需要注意的是，并非不是所有的 Node.js 库均支持 yarn 2.0，因此推荐预先查看你所使用的库是否支持 yarn 2.0：<a href=https://yarnpkg.com/features/pnp#compatibility-table target=_blank rel="noopener noreffer">Compatibility Table</a>。</p><blockquote><p>如果你之前使用 yarn 1.0 版本，推荐查看 yarn 官方的 1.0 至 2.0 版本迁移指南：<a href=https://yarnpkg.com/advanced/migration target=_blank rel="noopener noreffer">Migrating from Yarn 1</a>。</p></blockquote><p>有关在 VS Code 中开发 Node.js 项目的方法，更多请参考：<a href=https://code.visualstudio.com/docs/nodejs/working-with-javascript target=_blank rel="noopener noreffer">Node.js tutorial in Visual Studio Code - Visual Studio Code Docs</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-02-05</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=http://example.org/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/ data-title=wsl2搭建全过程><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=http://example.org/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=http://example.org/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/ data-title=wsl2搭建全过程><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=http://example.org/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/ data-title=wsl2搭建全过程><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=http://example.org/posts/wsl2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/ data-title=wsl2搭建全过程><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2022happynewyear/ class=prev rel=prev title=2022><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>2022</a>
<a href=/posts/hexo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%92%8C%E5%88%A0%E9%99%A4/ class=next rel=next title=hexo文章发布和删除>hexo文章发布和删除<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.115.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>