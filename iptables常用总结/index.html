<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>iptables常用总结 - Peng</title><meta name=Description content="One World,One Dream!"><meta property="og:title" content="iptables常用总结"><meta property="og:description" content="iptables常用总结 安装 查询当前防火墙状态 1 2 3 4 systemctl status iptables # 检查 iptables 是否安装 systemctl status firewalld # 检查 firewall 是否安装 停止并禁用firewalld 1 2 3 4 systemctl stop firewalld"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.haipengv.com/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/"><meta property="og:image" content="https://blog.haipengv.com/logo.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-25T14:55:31+00:00"><meta property="article:modified_time" content="2022-02-25T14:55:31+00:00"><meta property="og:site_name" content="我的网站"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.haipengv.com/logo.webp"><meta name=twitter:title content="iptables常用总结"><meta name=twitter:description content="iptables常用总结 安装 查询当前防火墙状态 1 2 3 4 systemctl status iptables # 检查 iptables 是否安装 systemctl status firewalld # 检查 firewall 是否安装 停止并禁用firewalld 1 2 3 4 systemctl stop firewalld"><meta name=application-name content="我的网站"><meta name=apple-mobile-web-app-title content="我的网站"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.haipengv.com/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/><link rel=prev href=https://blog.haipengv.com/jupyter%E6%9B%B4%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/><link rel=next href=https://blog.haipengv.com/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"iptables常用总结","inLanguage":"zh-cn","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.haipengv.com\/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93\/"},"genre":"posts","keywords":"iptables","wordcount":4570,"url":"https:\/\/blog.haipengv.com\/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93\/","datePublished":"2022-02-25T14:55:31+00:00","dateModified":"2022-02-25T14:55:31+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Peng"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Peng>Peng</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/friends/><i class='fas fa-fw fa-fan fa-spin'></i> 友链 </a><a class=menu-item href=/about/>关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Peng>Peng</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/friends/ title><i class='fas fa-fw fa-fan fa-spin'></i>友链</a><a class=menu-item href=/about/ title>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">iptables常用总结</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Peng</a>
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/linux/><i class="far fa-folder fa-fw" aria-hidden=true></i>linux</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-02-25>2022-02-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 4570 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 10 分钟&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#iptables常用总结>iptables常用总结</a><ul><li><a href=#安装>安装</a></li><li><a href=#查询当前防火墙状态>查询当前防火墙状态</a></li><li><a href=#停止并禁用firewalld>停止并禁用firewalld</a></li><li><a href=#安装iptables>安装iptables</a></li><li><a href=#启动命令>启动命令</a></li><li><a href=#默认开放规则>默认开放规则</a></li><li><a href=#保存配置>保存配置</a></li><li><a href=#机制>机制</a><ul><li><a href=#命令>命令</a></li></ul></li><li><a href=#工作机制>工作机制</a><ul><li><a href=#防火墙策略>防火墙策略</a></li></ul></li><li><a href=#选项>选项</a></li><li><a href=#参数>参数</a></li><li><a href=#实例>实例</a></li><li><a href=#清空当前所有规则和计数>清空当前所有规则和计数</a></li><li><a href=#配置允许ssh端口连接>配置允许ssh端口连接</a></li><li><a href=#允许本地回环地址可以正常使用>允许本地回环地址可以正常使用</a></li><li><a href=#设置默认规则>设置默认规则</a></li><li><a href=#配置白名单>配置白名单</a></li></ul></li><li><a href=#开启相应的服务端口>开启相应的服务端口</a><ul><li><a href=#配置多端口>配置多端口</a></li><li><a href=#保存规则到配置文件中>保存规则到配置文件中</a></li><li><a href=#列出已设置的规则>列出已设置的规则</a></li><li><a href=#清除已有规则>清除已有规则</a></li><li><a href=#删除已添加的规则>删除已添加的规则</a></li><li><a href=#开放指定的端口>开放指定的端口</a></li><li><a href=#屏蔽端口>屏蔽端口</a></li><li><a href=#屏蔽域名>屏蔽域名</a></li><li><a href=#屏蔽ip>屏蔽IP</a></li><li><a href=#指定数据包出去的网络接口>指定数据包出去的网络接口</a></li><li><a href=#查看已添加的规则>查看已添加的规则</a></li><li><a href=#启动网络转发规则>启动网络转发规则</a></li><li><a href=#端口映射>端口映射</a></li><li><a href=#字符串匹配>字符串匹配</a></li><li><a href=#阻止windows蠕虫的攻击>阻止Windows蠕虫的攻击</a></li><li><a href=#防止syn洪水攻击>防止SYN洪水攻击</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=iptables常用总结>iptables常用总结</h2><h3 id=安装>安装</h3><h3 id=查询当前防火墙状态>查询当前防火墙状态</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>systemctl status iptables
</span></span><span class=line><span class=cl><span class=c1># 检查 iptables 是否安装</span>
</span></span><span class=line><span class=cl>systemctl status firewalld
</span></span><span class=line><span class=cl><span class=c1># 检查 firewall 是否安装</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=停止并禁用firewalld>停止并禁用firewalld</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>systemctl stop firewalld
</span></span><span class=line><span class=cl><span class=c1># 停止 firewalld 服务</span>
</span></span><span class=line><span class=cl>systemctl disable firewalld
</span></span><span class=line><span class=cl><span class=c1># 禁用 firewalld 服务</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=安装iptables>安装iptables</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>yum install -y iptables
</span></span><span class=line><span class=cl><span class=c1># 安装 iptables</span>
</span></span><span class=line><span class=cl>yum install -y iptables-services
</span></span><span class=line><span class=cl><span class=c1># 安装 iptables-services</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=启动命令>启动命令</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>systemctl start iptables
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> iptables
</span></span><span class=line><span class=cl>systemctl stop iptables
</span></span><span class=line><span class=cl>systemctl restart iptables
</span></span><span class=line><span class=cl>systemctl reload iptables
</span></span></code></pre></td></tr></table></div></div><h3 id=默认开放规则>默认开放规则</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -P INPUT ACCEPT
</span></span><span class=line><span class=cl>iptables -P OUTPUT ACCEPT
</span></span><span class=line><span class=cl>iptables -P FORWARD ACCEPT
</span></span><span class=line><span class=cl><span class=c1>#清空规则</span>
</span></span><span class=line><span class=cl>iptables -F 
</span></span></code></pre></td></tr></table></div></div><h3 id=保存配置>保存配置</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>service iptables save
</span></span><span class=line><span class=cl><span class=c1># 手动修改</span>
</span></span><span class=line><span class=cl>vi /etc/sysconfig/iptables
</span></span></code></pre></td></tr></table></div></div><h3 id=机制>机制</h3><h4 id=命令>命令</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -t 表名 &lt;-A/I/D/R&gt; 规则链名 <span class=o>[</span>规则号<span class=o>]</span> &lt;-i/o 网卡名&gt;  &lt;-s 源IP/源子网&gt; --sport 源端口 -p 协议名 &lt;-d 目标IP/目标子网&gt; --dport 目标端口 -j 动作
</span></span></code></pre></td></tr></table></div></div><h3 id=工作机制>工作机制</h3><p>规则链名包括「也被称为五个钩子函数(hook functions)」：</p><ul><li><strong>INPUT链</strong> ：处理输入数据包。</li><li><strong>OUTPUT链</strong> ：处理输出数据包。</li><li><strong>FORWARD链</strong> ：处理转发数据包。</li><li><strong>PREROUTING链</strong> ：用于目标地址转换（DNAT）。</li><li><strong>POSTOUTING链</strong> ：用于源地址转换（SNAT）。</li></ul><h4 id=防火墙策略>防火墙策略</h4><p>防火墙策略一般分为两种，一种叫通策略，一种叫堵策略，通策略，默认门是关着的，必须要定义谁能进。堵策略则是，大门是洞开的，但是你必须有身份认证，否则不能进。所以我们要定义，让进来的进来，让出去的出去，所以通，是要全通，而堵，则是要选择。当我们定义的策略的时候，要分别定义多条功能，其中：定义数据包中允许或者不允许的策略，filter过滤的功能，而定义地址转换的功能的则是nat选项。为了让这些功能交替工作，我们制定出了“表”这个定义，来定义、区分各种不同的工作功能和处理方式。</p><p><strong>我们现在用的比较多个功能有3个：</strong></p><ol><li>filter 定义允许或者不允许的，只能做在3个链上：INPUT ，FORWARD ，OUTPUT</li><li>nat 定义地址转换的，也只能做在3个链上：PREROUTING ，OUTPUT ，POSTROUTING</li><li>mangle功能:修改报文原数据，是5个链都可以做：PREROUTING，INPUT，FORWARD，OUTPUT，POSTROUTING</li></ol><p>我们修改报文原数据就是来修改TTL的。能够实现将数据包的元数据拆开，在里面做标记/修改内容的。而防火墙标记，其实就是靠mangle来实现的。</p><p><strong>小扩展:</strong></p><ul><li>对于filter来讲一般只能做在3个链上：INPUT ，FORWARD ，OUTPUT</li><li>对于nat来讲一般也只能做在3个链上：PREROUTING ，OUTPUT ，POSTROUTING</li><li>而mangle则是5个链都可以做：PREROUTING，INPUT，FORWARD，OUTPUT，POSTROUTING</li></ul><p>iptables/netfilter（这款软件）是工作在用户空间的，它可以让规则进行生效的，本身不是一种服务，而且规则是立即生效的。而我们iptables现在被做成了一个服务，可以进行启动，停止的。启动，则将规则直接生效，停止，则将规则撤销。</p><p>iptables还支持自己定义链。但是自己定义的链，必须是跟某种特定的链关联起来的。在一个关卡设定，指定当有数据的时候专门去找某个特定的链来处理，当那个链处理完之后，再返回。接着在特定的链中继续检查。</p><p><strong>注意：规则的次序非常关键，谁的规则越严格，应该放的越靠前，而检查规则的时候，是按照从上往下的方式进行检查的。</strong></p><p>表名包括：</p><ul><li><strong>raw</strong> ：高级功能，如：网址过滤。</li><li><strong>mangle</strong> ：数据包修改（QOS），用于实现服务质量。</li><li><strong>nat</strong> ：地址转换，用于网关路由器。</li><li><strong>filter</strong> ：包过滤，用于防火墙规则。</li></ul><p>动作包括：</p><ul><li><strong>ACCEPT</strong> ：接收数据包。</li><li><strong>DROP</strong> ：丢弃数据包。</li><li><strong>REDIRECT</strong> ：重定向、映射、透明代理。</li><li><strong>SNAT</strong> ：源地址转换。</li><li><strong>DNAT</strong> ：目标地址转换。</li><li><strong>MASQUERADE</strong> ：IP伪装（NAT），用于ADSL。</li><li><strong>LOG</strong> ：日志记录。</li></ul><h3 id=选项>选项</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>-t, --table table 对指定的表 table 进行操作， table 必须是 raw， nat，filter，mangle 中的一个。如果不指定此选项，默认的是 filter 表。
</span></span><span class=line><span class=cl># 通用匹配：源地址目标地址的匹配
</span></span><span class=line><span class=cl>-p：指定要匹配的数据包协议类型；
</span></span><span class=line><span class=cl>-s, --source [!] address[/mask] ：把指定的一个／一组地址作为源地址，按此规则进行过滤。当后面没有 mask 时，address 是一个地址，比如：192.168.1.1；当 mask 指定时，可以表示一组范围内的地址，比如：192.168.1.0/255.255.255.0。
</span></span><span class=line><span class=cl>-d, --destination [!] address[/mask] ：地址格式同上，但这里是指定地址为目的地址，按此进行过滤。
</span></span><span class=line><span class=cl>-i, --in-interface [!] &lt;网络接口name&gt; ：指定数据包的来自来自网络接口，比如最常见的 eth0 。注意：它只对 INPUT，FORWARD，PREROUTING 这三个链起作用。如果没有指定此选项， 说明可以来自任何一个网络接口。同前面类似，&#34;!&#34; 表示取反。
</span></span><span class=line><span class=cl>-o, --out-interface [!] &lt;网络接口name&gt; ：指定数据包出去的网络接口。只对 OUTPUT，FORWARD，POSTROUTING 三个链起作用。
</span></span><span class=line><span class=cl># 查看管理命令
</span></span><span class=line><span class=cl>-L, --list [chain] 列出链 chain 上面的所有规则，如果没有指定链，列出表上所有链的所有规则。
</span></span><span class=line><span class=cl># 规则管理命令
</span></span><span class=line><span class=cl>-A, --append chain rule-specification 在指定链 chain 的末尾插入指定的规则，也就是说，这条规则会被放到最后，最后才会被执行。规则是由后面的匹配来指定。
</span></span><span class=line><span class=cl>-I, --insert chain [rulenum] rule-specification 在链 chain 中的指定位置插入一条或多条规则。如果指定的规则号是1，则在链的头部插入。这也是默认的情况，如果没有指定规则号。
</span></span><span class=line><span class=cl>-D, --delete chain rule-specification -D, --delete chain rulenum 在指定的链 chain 中删除一个或多个指定规则。
</span></span><span class=line><span class=cl>-R num：Replays替换/修改第几条规则
</span></span><span class=line><span class=cl># 链管理命令（这都是立即生效的）
</span></span><span class=line><span class=cl>-P, --policy chain target ：为指定的链 chain 设置策略 target。注意，只有内置的链才允许有策略，用户自定义的是不允许的。
</span></span><span class=line><span class=cl>-F, --flush [chain] 清空指定链 chain 上面的所有规则。如果没有指定链，清空该表上所有链的所有规则。
</span></span><span class=line><span class=cl>-N, --new-chain chain 用指定的名字创建一个新的链。
</span></span><span class=line><span class=cl>-X, --delete-chain [chain] ：删除指定的链，这个链必须没有被其它任何规则引用，而且这条上必须没有任何规则。如果没有指定链名，则会删除该表中所有非内置的链。
</span></span><span class=line><span class=cl>-E, --rename-chain old-chain new-chain ：用指定的新名字去重命名指定的链。这并不会对链内部造成任何影响。
</span></span><span class=line><span class=cl>-Z, --zero [chain] ：把指定链，或者表中的所有链上的所有计数器清零。
</span></span><span class=line><span class=cl>-j, --jump target &lt;指定目标&gt; ：即满足某条件时该执行什么样的动作。target 可以是内置的目标，比如 ACCEPT，也可以是用户自定义的链。
</span></span><span class=line><span class=cl>-h：显示帮助信息；
</span></span></code></pre></td></tr></table></div></div><h3 id=参数>参数</h3><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>-P</td><td>设置默认策略:iptables -P INPUT (DROP)</td></tr><tr><td>-F</td><td>清空规则链</td></tr><tr><td>-L</td><td>查看规则链</td></tr><tr><td>-A</td><td>在规则链的末尾加入新规则</td></tr><tr><td>-I</td><td>num 在规则链的头部加入新规则</td></tr><tr><td>-D</td><td>num 删除某一条规则</td></tr><tr><td>-s</td><td>匹配来源地址IP/MASK，加叹号"!&ldquo;表示除这个IP外。</td></tr><tr><td>-d</td><td>匹配目标地址</td></tr><tr><td>-i</td><td>网卡名称 匹配从这块网卡流入的数据</td></tr><tr><td>-o</td><td>网卡名称 匹配从这块网卡流出的数据</td></tr><tr><td>-p</td><td>匹配协议,如tcp,udp,icmp</td></tr><tr><td>&ndash;dport num</td><td>匹配目标端口号</td></tr><tr><td>&ndash;sport num</td><td>匹配来源端口号</td></tr></tbody></table><h3 id=实例>实例</h3><h3 id=清空当前所有规则和计数>清空当前所有规则和计数</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -F  <span class=c1># 清空所有的防火墙规则</span>
</span></span><span class=line><span class=cl>iptables -X  <span class=c1># 删除用户自定义的空链</span>
</span></span><span class=line><span class=cl>iptables -Z  <span class=c1># 清空计数</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=配置允许ssh端口连接>配置允许ssh端口连接</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport <span class=m>22</span> -j ACCEPT
</span></span><span class=line><span class=cl><span class=c1># 22为你的ssh端口， -s 192.168.1.0/24表示允许这个网段的机器来连接，其它网段的ip地址是登陆不了你的机器的。 -j ACCEPT表示接受这样的请求</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=允许本地回环地址可以正常使用>允许本地回环地址可以正常使用</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -i lo -j ACCEPT
</span></span><span class=line><span class=cl><span class=c1># 本地回环地址就是127.0.0.1，是本机上使用的,它进与出都设置为允许</span>
</span></span><span class=line><span class=cl>iptables -A OUTPUT -o lo -j ACCEPT
</span></span></code></pre></td></tr></table></div></div><h3 id=设置默认规则>设置默认规则</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -P INPUT DROP <span class=c1># 配置默认的不让进</span>
</span></span><span class=line><span class=cl>iptables -P FORWARD DROP <span class=c1># 默认的不允许转发</span>
</span></span><span class=line><span class=cl>iptables -P OUTPUT ACCEPT <span class=c1># 默认的可以出去</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=配置白名单>配置白名单</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -p all -s 192.168.1.0/24 -j ACCEPT <span class=c1># 允许机房内网机器可以访问</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -p all -s 192.168.140.0/24 -j ACCEPT  <span class=c1># 允许机房内网机器可以访问</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -p tcp -s 183.121.3.7 --dport <span class=m>3380</span> -j ACCEPT <span class=c1># 允许183.121.3.7访问本机的3380端口</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=开启相应的服务端口>开启相应的服务端口</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -p tcp --dport <span class=m>80</span> -j ACCEPT <span class=c1># 开启80端口，因为web对外都是这个端口</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -p icmp --icmp-type <span class=m>8</span> -j ACCEPT <span class=c1># 允许被ping</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT <span class=c1># 已经建立的连接得让它进来</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=配置多端口>配置多端口</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#同一目的IP多个不连续端口</span>
</span></span><span class=line><span class=cl>iptables -t nat -A PREROUTING -i eth0 -s 0.0.0.0/0 -d 192.168.255.1 -p tcp -m multiport --dport 8082,8083,10728 -j DNAT --to 172.29.110.107
</span></span><span class=line><span class=cl>iptables -t nat -A POSTROUTING -o bond0 -d 172.29.110.107 -p tcp -m multiport --dport 8082,8083,10728 -j SNAT --to 172.13.202.100
</span></span><span class=line><span class=cl><span class=c1>#同一目的ip多个连续端口</span>
</span></span><span class=line><span class=cl>iptables -t nat -A PREROUTING -i eth0 -s 0.0.0.0/0 -d 192.168.255.1 -p tcp --dport 47110:47122 -j DNAT --to 172.12.43.70
</span></span><span class=line><span class=cl>iptables -t nat -A POSTROUTING -o bond0 -d 172.12.43.70 -p tcp --dport 47110:47122 -j SNAT --to 172.13.202.101
</span></span></code></pre></td></tr></table></div></div><h3 id=保存规则到配置文件中>保存规则到配置文件中</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cp /etc/sysconfig/iptables /etc/sysconfig/iptables.bak <span class=c1># 任何改动之前先备份，请保持这一优秀的习惯</span>
</span></span><span class=line><span class=cl>iptables-save &gt; /etc/sysconfig/iptables
</span></span><span class=line><span class=cl>cat /etc/sysconfig/iptables
</span></span></code></pre></td></tr></table></div></div><h3 id=列出已设置的规则>列出已设置的规则</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -L <span class=o>[</span>-t 表名<span class=o>]</span> <span class=o>[</span>链名<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>四个表名 raw，nat，filter，mangle</li><li>五个规则链名 INPUT、OUTPUT、FORWARD、PREROUTING、POSTROUTING</li><li>filter表包含INPUT、OUTPUT、FORWARD三个规则链</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -L -t nat                  <span class=c1># 列出 nat 上面的所有规则</span>
</span></span><span class=line><span class=cl><span class=c1>#            ^ -t 参数指定，必须是 raw， nat，filter，mangle 中的一个</span>
</span></span><span class=line><span class=cl>iptables -L -t nat  --line-numbers  <span class=c1># 规则带编号</span>
</span></span><span class=line><span class=cl>iptables -L INPUT
</span></span><span class=line><span class=cl>iptables -L -nv  <span class=c1># 查看，这个列表看起来更详细</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=清除已有规则>清除已有规则</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -F INPUT  <span class=c1># 清空指定链 INPUT 上面的所有规则</span>
</span></span><span class=line><span class=cl>iptables -X INPUT  <span class=c1># 删除指定的链，这个链必须没有被其它任何规则引用，而且这条上必须没有任何规则。</span>
</span></span><span class=line><span class=cl>                   <span class=c1># 如果没有指定链名，则会删除该表中所有非内置的链。</span>
</span></span><span class=line><span class=cl>iptables -Z INPUT  <span class=c1># 把指定链，或者表中的所有链上的所有计数器清零。</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=删除已添加的规则>删除已添加的规则</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -s 192.168.1.5 -j DROP
</span></span><span class=line><span class=cl><span class=c1># 添加一条规则</span>
</span></span></code></pre></td></tr></table></div></div><p>将所有iptables以序号标记显示，执行：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -L -n --line-numbers
</span></span></code></pre></td></tr></table></div></div><p>比如要删除INPUT里序号为8的规则，执行：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -D INPUT <span class=m>8</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=开放指定的端口>开放指定的端口</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT               <span class=c1>#允许本地回环接口(即运行本机访问本机)</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT    <span class=c1>#允许已建立的或相关连的通行</span>
</span></span><span class=line><span class=cl>iptables -A OUTPUT -j ACCEPT      <span class=c1># 允许所有本机向外的访问</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -p tcp --dport <span class=m>22</span> -j ACCEPT    <span class=c1># 允许访问22端口</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -p tcp --dport <span class=m>80</span> -j ACCEPT    <span class=c1># 允许访问80端口</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -p tcp --dport <span class=m>21</span> -j ACCEPT    <span class=c1># 允许ftp服务的21端口</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -p tcp --dport <span class=m>20</span> -j ACCEPT    <span class=c1># 允许FTP服务的20端口</span>
</span></span><span class=line><span class=cl>iptables -A INPUT -j REJECT       <span class=c1># 禁止其他未允许的规则访问</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -j REJECT     <span class=c1># 禁止其他未允许的规则访问</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=屏蔽端口>屏蔽端口</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -p tcp --dport <span class=m>12345</span> -j DROP
</span></span><span class=line><span class=cl><span class=c1># 屏蔽访问 12345 端口</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=屏蔽域名>屏蔽域名</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A OUTPUT -m string --string <span class=s2>&#34;ysp8.cc&#34;</span> --algo bm --to <span class=m>65535</span> -j DROP
</span></span><span class=line><span class=cl><span class=c1># 屏蔽服务器内域名访问</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=屏蔽ip>屏蔽IP</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -p tcp -m tcp -s 192.168.0.8 -j DROP  <span class=c1># 屏蔽恶意主机（比如，192.168.0.8</span>
</span></span><span class=line><span class=cl>iptables -I INPUT -s 123.45.6.7 -j DROP       <span class=c1># 屏蔽单个IP的命令</span>
</span></span><span class=line><span class=cl>iptables -I INPUT -s 123.0.0.0/8 -j DROP      <span class=c1># 封整个段即从123.0.0.1到123.255.255.254的命令</span>
</span></span><span class=line><span class=cl>iptables -I INPUT -s 124.45.0.0/16 -j DROP    <span class=c1># 封IP段即从123.45.0.1到123.45.255.254的命令</span>
</span></span><span class=line><span class=cl>iptables -I INPUT -s 123.45.6.0/24 -j DROP    <span class=c1># 封IP段即从123.45.6.1到123.45.6.254的命令是</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=指定数据包出去的网络接口>指定数据包出去的网络接口</h3><p>只对 OUTPUT，FORWARD，POSTROUTING 三个链起作用。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A FORWARD -o eth0
</span></span></code></pre></td></tr></table></div></div><h3 id=查看已添加的规则>查看已添加的规则</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -L -n -v
</span></span><span class=line><span class=cl>Chain INPUT <span class=o>(</span>policy DROP <span class=m>48106</span> packets, 2690K bytes<span class=o>)</span>
</span></span><span class=line><span class=cl> pkts bytes target     prot opt in     out     <span class=nb>source</span>               destination
</span></span><span class=line><span class=cl> <span class=m>5075</span>  589K ACCEPT     all  --  lo     *       0.0.0.0/0            0.0.0.0/0
</span></span><span class=line><span class=cl> 191K   90M ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp dpt:22
</span></span><span class=line><span class=cl>1499K  133M ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp dpt:80
</span></span><span class=line><span class=cl>4364K 6351M ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED
</span></span><span class=line><span class=cl> <span class=m>6256</span>  327K ACCEPT     icmp --  *      *       0.0.0.0/0            0.0.0.0/0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Chain FORWARD <span class=o>(</span>policy ACCEPT <span class=m>0</span> packets, <span class=m>0</span> bytes<span class=o>)</span>
</span></span><span class=line><span class=cl> pkts bytes target     prot opt in     out     <span class=nb>source</span>               destination
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Chain OUTPUT <span class=o>(</span>policy ACCEPT 3382K packets, 1819M bytes<span class=o>)</span>
</span></span><span class=line><span class=cl> pkts bytes target     prot opt in     out     <span class=nb>source</span>               destination
</span></span><span class=line><span class=cl> <span class=m>5075</span>  589K ACCEPT     all  --  *      lo      0.0.0.0/0            0.0.0.0/0
</span></span></code></pre></td></tr></table></div></div><h3 id=启动网络转发规则>启动网络转发规则</h3><p>公网210.14.67.7让内网192.168.188.0/24上网</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -t nat -A POSTROUTING -s 192.168.188.0/24 -j SNAT --to-source 210.14.67.127
</span></span></code></pre></td></tr></table></div></div><h3 id=端口映射>端口映射</h3><p>本机的 2222 端口映射到内网 虚拟机的22 端口</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -t nat -A PREROUTING -d 210.14.67.127 -p tcp --dport <span class=m>2222</span>  -j DNAT --to-dest 192.168.188.115:22
</span></span></code></pre></td></tr></table></div></div><h3 id=字符串匹配>字符串匹配</h3><p>比如，我们要过滤所有TCP连接中的字符串test，一旦出现它我们就终止这个连接，我们可以这么做：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -p tcp -m string --algo kmp --string <span class=s2>&#34;test&#34;</span> -j REJECT --reject-with tcp-reset
</span></span><span class=line><span class=cl>iptables -L
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Chain INPUT (policy ACCEPT)</span>
</span></span><span class=line><span class=cl><span class=c1># target     prot opt source               destination</span>
</span></span><span class=line><span class=cl><span class=c1># REJECT     tcp  --  anywhere             anywhere            STRING match &#34;test&#34; ALGO name kmp TO 65535 reject-with tcp-reset</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Chain FORWARD (policy ACCEPT)</span>
</span></span><span class=line><span class=cl><span class=c1># target     prot opt source               destination</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Chain OUTPUT (policy ACCEPT)</span>
</span></span><span class=line><span class=cl><span class=c1># target     prot opt source               destination</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=阻止windows蠕虫的攻击>阻止Windows蠕虫的攻击</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -I INPUT -j DROP -p tcp -s 0.0.0.0/0 -m string --algo kmp --string <span class=s2>&#34;cmd.exe&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=防止syn洪水攻击>防止SYN洪水攻击</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -A INPUT -p tcp --syn -m limit --limit 5/second -j ACCEPT
</span></span></code></pre></td></tr></table></div></div><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fwwarning"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>本文最后更新于 <span class=timeago datetime=2022-02-25T14:55:31 title="February 25, 2022">February 25, 2022</span>，文中内容可能已过时，请谨慎使用。</div></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-02-25</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/iptables%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/iptables/>iptables</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/jupyter%E6%9B%B4%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/ class=prev rel=prev title=jupyter更改登录密码><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>jupyter更改登录密码</a>
<a href=/shell%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%8F%82%E8%80%83/ class=next rel=next title=shell脚本常用参考>shell脚本常用参考<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2021 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Peng</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/algoliasearch/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:0},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"6P2DFXYAL4",algoliaIndex:"myblog",algoliaSearchKey:"97d66d369583b3cd4c58a5890d58ea96",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=/js/custom.js></script>
<script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script></body></html>