<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>k8s网路通信 - Peng</title><meta name=Description content="One World,One Dream!"><meta property="og:title" content="k8s网路通信"><meta property="og:description" content="基于k8s中cni插件calico网络原理使用总结 1.实验环境 name version ip cni master v1.22.2 ens33:10.4.7.60 calico worker1 v1.22.2 ens33:10.4.7.61 calico worker2 v1.22.2 ens33:10.4.7.62 calico 2.实验整体拓扑 3.部署一个deploymen"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.haipengv.com/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"><meta property="og:image" content="https://blog.haipengv.com/logo.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-25T22:44:37+00:00"><meta property="article:modified_time" content="2022-03-25T22:44:37+00:00"><meta property="og:site_name" content="我的网站"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.haipengv.com/logo.webp"><meta name=twitter:title content="k8s网路通信"><meta name=twitter:description content="基于k8s中cni插件calico网络原理使用总结 1.实验环境 name version ip cni master v1.22.2 ens33:10.4.7.60 calico worker1 v1.22.2 ens33:10.4.7.61 calico worker2 v1.22.2 ens33:10.4.7.62 calico 2.实验整体拓扑 3.部署一个deploymen"><meta name=application-name content="我的网站"><meta name=apple-mobile-web-app-title content="我的网站"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.haipengv.com/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/><link rel=prev href=https://blog.haipengv.com/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/><link rel=next href=https://blog.haipengv.com/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"k8s网路通信","inLanguage":"zh-cn","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.haipengv.com\/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1\/"},"genre":"posts","keywords":"k8s","wordcount":2051,"url":"https:\/\/blog.haipengv.com\/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1\/","datePublished":"2022-03-25T22:44:37+00:00","dateModified":"2022-03-25T22:44:37+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Peng"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Peng>Peng</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/friends/><i class='fas fa-fw fa-fan fa-spin'></i> 友链 </a><a class=menu-item href=/about/>关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Peng>Peng</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/friends/ title><i class='fas fa-fw fa-fan fa-spin'></i>友链</a><a class=menu-item href=/about/ title>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">k8s网路通信</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Peng</a>
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/%E7%BC%96%E7%A8%8B/><i class="far fa-folder fa-fw" aria-hidden=true></i>编程</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-03-25>2022-03-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 2051 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 5 分钟&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#基于k8s中cni插件calico网络原理使用总结>基于k8s中cni插件calico网络原理使用总结</a><ul><li><a href=#1实验环境>1.实验环境</a></li><li><a href=#2实验整体拓扑>2.实验整体拓扑</a></li><li><a href=#3部署一个deployment>3.部署一个deployment</a><ul><li><a href=#问题1>问题1</a></li><li><a href=#问题2>问题2</a></li><li><a href=#问题3>问题3</a></li><li><a href=#问题4>问题4</a></li><li><a href=#问题5>问题5</a></li><li><a href=#问题6>问题6</a></li><li><a href=#问题7>问题7</a></li><li><a href=#问题8>问题8</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=基于k8s中cni插件calico网络原理使用总结>基于k8s中cni插件calico网络原理使用总结</h2><h3 id=1实验环境>1.实验环境</h3><table><thead><tr><th style=text-align:center>name</th><th style=text-align:center>version</th><th style=text-align:center>ip</th><th style=text-align:center>cni</th></tr></thead><tbody><tr><td style=text-align:center>master</td><td style=text-align:center>v1.22.2</td><td style=text-align:center>ens33:10.4.7.60</td><td style=text-align:center>calico</td></tr><tr><td style=text-align:center>worker1</td><td style=text-align:center>v1.22.2</td><td style=text-align:center>ens33:10.4.7.61</td><td style=text-align:center>calico</td></tr><tr><td style=text-align:center>worker2</td><td style=text-align:center>v1.22.2</td><td style=text-align:center>ens33:10.4.7.62</td><td style=text-align:center>calico</td></tr></tbody></table><h3 id=2实验整体拓扑>2.实验整体拓扑</h3><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e6%95%b4%e4%bd%93%e6%8b%93%e6%89%91.webp data-srcset="/postimages/%e6%95%b4%e4%bd%93%e6%8b%93%e6%89%91.webp, /postimages/%e6%95%b4%e4%bd%93%e6%8b%93%e6%89%91.webp 1.5x, /postimages/%e6%95%b4%e4%bd%93%e6%8b%93%e6%89%91.webp 2x" data-sizes=auto alt=/postimages/整体拓扑.webp title=整体拓扑></p><h3 id=3部署一个deployment>3.部署一个deployment</h3><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/deploy1.webp data-srcset="/postimages/deploy1.webp, /postimages/deploy1.webp 1.5x, /postimages/deploy1.webp 2x" data-sizes=auto alt=/postimages/deploy1.webp title=deploy1></p><h4 id=问题1>问题1</h4><p>pod的ip从哪里来？</p><p>由<code>kube-controller-manager</code>来分配。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>root@master:~# cat /etc/kubernetes/manifests/kube-controller-manager.yaml | grep cidr
</span></span><span class=line><span class=cl>    - --allocate-node-cidrs=true
</span></span><span class=line><span class=cl>    - --cluster-cidr=10.244.0.0/16
</span></span></code></pre></td></tr></table></div></div><h4 id=问题2>问题2</h4><p>如何确定集群上正在使用的cni网络插件?</p><p>在master节点上查看</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/calico.webp data-srcset="/postimages/calico.webp, /postimages/calico.webp 1.5x, /postimages/calico.webp 2x" data-sizes=auto alt=/postimages/calico.webp title=calico></p><h4 id=问题3>问题3</h4><p>在k8s中，docker 使用的是bridge（网桥）模式，并且始终处于Down状态，那么calico使用的也是网桥模式码？</p><p>使用<code>ip -d a</code>可以查看网卡模式.</p><p>calico使用都是vxlan技术。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>root@master:~# ip -d a  
</span></span><span class=line><span class=cl>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class=m>65536</span> qdisc noqueue state UNKNOWN group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 promiscuity <span class=m>0</span> minmtu <span class=m>0</span> maxmtu <span class=m>0</span> numtxqueues <span class=m>1</span> numrxqueues <span class=m>1</span> gso_max_size <span class=m>65536</span> gso_max_segs <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    inet 127.0.0.1/8 scope host lo
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>    inet6 ::1/128 scope host 
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1500</span> qdisc fq_codel state UP group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/ether 00:0c:29:30:56:5c brd ff:ff:ff:ff:ff:ff promiscuity <span class=m>0</span> minmtu <span class=m>46</span> maxmtu <span class=m>16110</span> numtxqueues <span class=m>1</span> numrxqueues <span class=m>1</span> gso_max_size <span class=m>65536</span> gso_max_segs <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    inet 10.4.7.60/24 brd 10.4.7.255 scope global ens33
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>    inet6 fe80::20c:29ff:fe30:565c/64 scope link 
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu <span class=m>1500</span> qdisc noqueue state DOWN group default 
</span></span><span class=line><span class=cl>    link/ether 02:42:97:3a:db:c3 brd ff:ff:ff:ff:ff:ff promiscuity <span class=m>0</span> minmtu <span class=m>68</span> maxmtu <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    bridge forward_delay <span class=m>1500</span> hello_time <span class=m>200</span> max_age <span class=m>2000</span> ageing_time <span class=m>30000</span> stp_state <span class=m>0</span> priority <span class=m>32768</span> vlan_filtering <span class=m>0</span> vlan_protocol 802.1Q bridge_id 8000.2:42:97:3a:db:c3 designated_root 8000.2:42:97:3a:db:c3 root_port <span class=m>0</span> root_path_cost <span class=m>0</span> topology_change <span class=m>0</span> topology_change_detected <span class=m>0</span> hello_timer    0.00 tcn_timer    0.00 topology_change_timer    0.00 gc_timer  102.44 vlan_default_pvid <span class=m>1</span> vlan_stats_enabled <span class=m>0</span> vlan_stats_per_port <span class=m>0</span> group_fwd_mask <span class=m>0</span> group_address 01:80:c2:00:00:00 mcast_snooping <span class=m>1</span> mcast_router <span class=m>1</span> mcast_query_use_ifaddr <span class=m>0</span> mcast_querier <span class=m>0</span> mcast_hash_elasticity <span class=m>16</span> mcast_hash_max <span class=m>4096</span> mcast_last_member_count <span class=m>2</span> mcast_startup_query_count <span class=m>2</span> mcast_last_member_interval <span class=m>100</span> mcast_membership_interval <span class=m>26000</span> mcast_querier_interval <span class=m>25500</span> mcast_query_interval <span class=m>12500</span> mcast_query_response_interval <span class=m>1000</span> mcast_startup_query_interval <span class=m>3124</span> mcast_stats_enabled <span class=m>0</span> mcast_igmp_version <span class=m>2</span> mcast_mld_version <span class=m>1</span> nf_call_iptables <span class=m>0</span> nf_call_ip6tables <span class=m>0</span> nf_call_arptables <span class=m>0</span> numtxqueues <span class=m>1</span> numrxqueues <span class=m>1</span> gso_max_size <span class=m>65536</span> gso_max_segs <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>4: cali64bc2599f1b@if3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1450</span> qdisc noqueue state UP group default 
</span></span><span class=line><span class=cl>    link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid <span class=m>0</span> promiscuity <span class=m>0</span> minmtu <span class=m>68</span> maxmtu <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    veth numtxqueues <span class=m>1</span> numrxqueues <span class=m>1</span> gso_max_size <span class=m>65536</span> gso_max_segs <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    inet6 fe80::ecee:eeff:feee:eeee/64 scope link 
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>5: cali186813c9403@if3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1450</span> qdisc noqueue state UP group default 
</span></span><span class=line><span class=cl>    link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid <span class=m>1</span> promiscuity <span class=m>0</span> minmtu <span class=m>68</span> maxmtu <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    veth numtxqueues <span class=m>1</span> numrxqueues <span class=m>1</span> gso_max_size <span class=m>65536</span> gso_max_segs <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    inet6 fe80::ecee:eeff:feee:eeee/64 scope link 
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>6: calia0e2fa62436@if3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1450</span> qdisc noqueue state UP group default 
</span></span><span class=line><span class=cl>    link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid <span class=m>2</span> promiscuity <span class=m>0</span> minmtu <span class=m>68</span> maxmtu <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    veth numtxqueues <span class=m>1</span> numrxqueues <span class=m>1</span> gso_max_size <span class=m>65536</span> gso_max_segs <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    inet6 fe80::ecee:eeff:feee:eeee/64 scope link 
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>7: calia67de3f32d9@if3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1450</span> qdisc noqueue state UP group default 
</span></span><span class=line><span class=cl>    link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid <span class=m>3</span> promiscuity <span class=m>0</span> minmtu <span class=m>68</span> maxmtu <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    veth numtxqueues <span class=m>1</span> numrxqueues <span class=m>1</span> gso_max_size <span class=m>65536</span> gso_max_segs <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    inet6 fe80::ecee:eeff:feee:eeee/64 scope link 
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>10: vxlan.calico: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1450</span> qdisc noqueue state UNKNOWN group default 
</span></span><span class=line><span class=cl>    link/ether 66:4f:26:ae:af:db brd ff:ff:ff:ff:ff:ff promiscuity <span class=m>0</span> minmtu <span class=m>68</span> maxmtu <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    vxlan id <span class=m>4096</span> <span class=nb>local</span> 10.4.7.60 dev ens33 srcport <span class=m>0</span> <span class=m>0</span> dstport <span class=m>4789</span> nolearning ttl auto ageing <span class=m>300</span> udpcsum noudp6zerocsumtx noudp6zerocsumrx numtxqueues <span class=m>1</span> numrxqueues <span class=m>1</span> gso_max_size <span class=m>65536</span> gso_max_segs <span class=m>65535</span> 
</span></span><span class=line><span class=cl>    inet 10.244.219.64/32 scope global vxlan.calico
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>    inet6 fe80::644f:26ff:feae:afdb/64 scope link 
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span></code></pre></td></tr></table></div></div><h4 id=问题4>问题4</h4><p>pod通信网口和woker网口之间有什么关系？</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod%e7%bd%91%e7%bb%9c.webp data-srcset="/postimages/pod%e7%bd%91%e7%bb%9c.webp, /postimages/pod%e7%bd%91%e7%bb%9c.webp 1.5x, /postimages/pod%e7%bd%91%e7%bb%9c.webp 2x" data-sizes=auto alt=/postimages/pod网络.webp title=pod网络></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>worker1:
</span></span><span class=line><span class=cl>my-dep-5b7868d854-4rlld   eth0@if14 10.244.235.135/32  --&gt;对应worker1 上 14: cali6ff8e3ade03@if3  网卡
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb1.webp data-srcset="/postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb1.webp, /postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb1.webp 1.5x, /postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb1.webp 2x" data-sizes=auto alt=/postimages/pod与worker联系1.webp title=pod与worker联系1></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb2.webp data-srcset="/postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb2.webp, /postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb2.webp 1.5x, /postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb2.webp 2x" data-sizes=auto alt=/postimages/pod与worker联系2.webp title=pod与worker联系2></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb3.webp data-srcset="/postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb3.webp, /postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb3.webp 1.5x, /postimages/pod%e4%b8%8eworker%e8%81%94%e7%b3%bb3.webp 2x" data-sizes=auto alt=/postimages/pod与worker联系3.webp title=pod与worker联系3></p><h4 id=问题5>问题5</h4><p>pod上为什么会有169.254.1.1 的默认路由？地址可达吗？</p><p>地址不可达。calico使用了proxy arp 技术，地址不是真实存在的。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e9%97%ae%e9%a2%985-1.webp data-srcset="/postimages/%e9%97%ae%e9%a2%985-1.webp, /postimages/%e9%97%ae%e9%a2%985-1.webp 1.5x, /postimages/%e9%97%ae%e9%a2%985-1.webp 2x" data-sizes=auto alt=/postimages/问题5-1.webp title=问题5-1></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e9%97%ae%e9%a2%985-2.webp data-srcset="/postimages/%e9%97%ae%e9%a2%985-2.webp, /postimages/%e9%97%ae%e9%a2%985-2.webp 1.5x, /postimages/%e9%97%ae%e9%a2%985-2.webp 2x" data-sizes=auto alt=/postimages/问题5-2.webp title=问题5-2></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e9%97%ae%e9%a2%985-3.webp data-srcset="/postimages/%e9%97%ae%e9%a2%985-3.webp, /postimages/%e9%97%ae%e9%a2%985-3.webp 1.5x, /postimages/%e9%97%ae%e9%a2%985-3.webp 2x" data-sizes=auto alt=/postimages/问题5-3.webp title=问题5-3></p><h4 id=问题6>问题6</h4><p>相同worker之间的pod是如何通信的？</p><table><thead><tr><th style=text-align:center>pod</th><th style=text-align:center>ip</th><th style=text-align:center>pod interface</th><th style=text-align:center>node interface</th><th style=text-align:center>node</th></tr></thead><tbody><tr><td style=text-align:center>my-dep-5b7868d854-4rlld</td><td style=text-align:center>10.244.235.135</td><td style=text-align:center>3: eth0@if14</td><td style=text-align:center>14: cali6ff8e3ade03@if3</td><td style=text-align:center>worker1</td></tr><tr><td style=text-align:center>my-dep-5b7868d854-mzp9z</td><td style=text-align:center>10.244.235.140</td><td style=text-align:center>3: eth0@if15</td><td style=text-align:center>15: cali1292bd788a2@if3</td><td style=text-align:center>worker1</td></tr></tbody></table><p>从10.244.235.135ping 10.244.235.140。</p><p>分别在②、③、④上抓包查看网络接口数据包发送接收状态。</p><p>网络路径：</p><p><code>4rlld(10.244.235.135)->14: cali6ff8e3ade03@if3->15: cali1292bd788a2@if3->mzp9z(10.244.235.140)</code></p><p>​ ① ② ③ ④</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a11.webp data-srcset="/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a11.webp, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a11.webp 1.5x, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a11.webp 2x" data-sizes=auto alt=/postimages/相同worker的pod之间通信1.webp title=相同worker的pod之间通信1></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1135.webp data-srcset="/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1135.webp, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1135.webp 1.5x, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1135.webp 2x" data-sizes=auto alt=/postimages/相同worker的pod之间通信135.webp title=相同worker的pod之间通信135></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1worker14.webp data-srcset="/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1worker14.webp, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1worker14.webp 1.5x, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1worker14.webp 2x" data-sizes=auto alt=/postimages/相同worker的pod之间通信worker14.webp title=相同worker的pod之间通信worker14></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1worker15.webp data-srcset="/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1worker15.webp, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1worker15.webp 1.5x, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1worker15.webp 2x" data-sizes=auto alt=/postimages/相同worker的pod之间通信worker15.webp title=相同worker的pod之间通信worker15></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1140.webp data-srcset="/postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1140.webp, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1140.webp 1.5x, /postimages/%e7%9b%b8%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1140.webp 2x" data-sizes=auto alt=/postimages/相同worker的pod之间通信140.webp title=相同worker的pod之间通信140></p><h4 id=问题7>问题7</h4><p>不同worker之间的pod是如何通信的？</p><p>worker1 的pod1和worker2的pod3通信过程。跨子网使用vxlan进行通信。</p><table><thead><tr><th style=text-align:center>pod</th><th style=text-align:center>ip</th><th style=text-align:center>pod interface</th><th style=text-align:center>node interface</th><th style=text-align:center>node</th></tr></thead><tbody><tr><td style=text-align:center>my-dep-5b7868d854-4rlld</td><td style=text-align:center>10.244.235.135/32</td><td style=text-align:center>3:eth0@if14</td><td style=text-align:center>14: cali6ff8e3ade03@if3</td><td style=text-align:center>worker1</td></tr><tr><td style=text-align:center>my-dep-5b7868d854-4dj4p</td><td style=text-align:center>10.244.189.91/32</td><td style=text-align:center>3:eth0@if15</td><td style=text-align:center>15: calic18ddbeaf18@if3</td><td style=text-align:center>worker2</td></tr></tbody></table><p>从10.244.235.135ping 10.244.189.91。</p><p>网络路径：</p><p><code>4rlld(10.244.235.135)->vxlan.calico(10.244.235.128)->14: cali6ff8e3ade03@if3->vxlan.calico(10.244.189.64)->15: calic18ddbeaf18@if3->4dj4p(10.244.189.91)</code></p><p><code>4rlld</code>上的路由信息</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/%e4%b8%8d%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1135.webp data-srcset="/postimages/%e4%b8%8d%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1135.webp, /postimages/%e4%b8%8d%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1135.webp 1.5x, /postimages/%e4%b8%8d%e5%90%8cworker%e7%9a%84pod%e4%b9%8b%e9%97%b4%e9%80%9a%e4%bf%a1135.webp 2x" data-sizes=auto alt=/postimages/不同worker的pod之间通信135.webp title=不同worker的pod之间通信135></p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://images-1316789231.cos.ap-shanghai.myqcloud.com/%E4%BA%91%E8%AE%A1%E7%AE%97/pod1%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF.webp data-srcset="https://images-1316789231.cos.ap-shanghai.myqcloud.com/%E4%BA%91%E8%AE%A1%E7%AE%97/pod1%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF.webp, https://images-1316789231.cos.ap-shanghai.myqcloud.com/%E4%BA%91%E8%AE%A1%E7%AE%97/pod1%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF.webp 1.5x, https://images-1316789231.cos.ap-shanghai.myqcloud.com/%E4%BA%91%E8%AE%A1%E7%AE%97/pod1%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF.webp 2x" data-sizes=auto alt=https://images-1316789231.cos.ap-shanghai.myqcloud.com/%E4%BA%91%E8%AE%A1%E7%AE%97/pod1%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF.webp title=pod1路由信息></p><p>根据路由信息，ping 10.244.189.91，会匹配到第一条。第一条路由的意思是：去往任何网段的数据包都发往网管169.254.1.1，然后从eth0网卡发送出去。</p><p>路由表中Flags标志的含义：</p><p>U up表示当前为启动状态</p><p>H host表示该路由为一个主机，多为达到数据包的路由</p><p>G Gateway 表示该路由是一个网关，如果没有说明目的地是直连的</p><p>D Dynamicaly 表示该路由是重定向报文修改</p><p>M 表示该路由已被重定向报文修改</p><p>worker1上路由信息</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/worker1%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp data-srcset="/postimages/worker1%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp, /postimages/worker1%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp 1.5x, /postimages/worker1%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp 2x" data-sizes=auto alt=/postimages/worker1路由信息.webp title=worker1路由信息></p><p>当ping包来到worker1节点上，会匹配到路由eth3。该路由的意思是：去往10.244.189.64/26的网段的数据包都发往网关10.4.7.62。因为pod1在7.61，pod3在7.62。所以数据包就通过设备eth3发往到worker2节点上。</p><p>worker2上路由信息</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/worker2%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp data-srcset="/postimages/worker2%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp, /postimages/worker2%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp 1.5x, /postimages/worker2%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp 2x" data-sizes=auto alt=/postimages/worker2路由信息.webp title=worker2路由信息></p><p>当worker2节点网卡收到数据包之后，发现发往的目的ip为10.244.189.91，于是匹配到红线的路由。该路由的意思是：10.244.189.91是本机直连设备，去往设备的数据包发往calic18ddbeaf18。</p><p>绿色框是回程路由。</p><p>那么该设备是什么呢？这个设备就是veth pair的一端。在创建pod3时calico会给pod3创建一个veth pair设备。一端是pod3的网卡，另一端就是我们看到的calic18ddbeaf18。下面我们验证一下。在pod3中安装ethtool工具，然后使用ethtool -S eth0,查看veth pair另一端的设备号。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod3%e4%b8%8a%e5%af%b9%e7%ab%afveth.webp data-srcset="/postimages/pod3%e4%b8%8a%e5%af%b9%e7%ab%afveth.webp, /postimages/pod3%e4%b8%8a%e5%af%b9%e7%ab%afveth.webp 1.5x, /postimages/pod3%e4%b8%8a%e5%af%b9%e7%ab%afveth.webp 2x" data-sizes=auto alt=/postimages/pod3上对端veth.webp title=pod3上对端veth></p><p>pod3 网卡另一端的设备好号是15，在worker2上查看编号为15的网络设备，可以发现该网络设备就是calic18ddbeaf18。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/worker2%e4%b8%8aveth.webp data-srcset="/postimages/worker2%e4%b8%8aveth.webp, /postimages/worker2%e4%b8%8aveth.webp 1.5x, /postimages/worker2%e4%b8%8aveth.webp 2x" data-sizes=auto alt=/postimages/worker2上veth.webp title=worker2上veth></p><p>所以，worker2上的路由，发送calic18ddbeaf18的数据其实就是发送到pod3的网卡中。ping包的旅行到这里就到了目的地。</p><p>查看一下pod3中的路由信息，发现该路由信息和pod1中是一样的。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod3%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp data-srcset="/postimages/pod3%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp, /postimages/pod3%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp 1.5x, /postimages/pod3%e8%b7%af%e7%94%b1%e4%bf%a1%e6%81%af.webp 2x" data-sizes=auto alt=/postimages/pod3路由信息.webp title=pod3路由信息></p><h4 id=问题8>问题8</h4><p>pod是如何访问互联网的？</p><p>演示：worker1中pod1访问baidu.com</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%951.webp data-srcset="/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%951.webp, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%951.webp 1.5x, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%951.webp 2x" data-sizes=auto alt=/postimages/pod1外网测试1.webp title=pod1外网测试1></p><p>查看coredns</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%952.webp data-srcset="/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%952.webp, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%952.webp 1.5x, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%952.webp 2x" data-sizes=auto alt=/postimages/pod1外网测试2.webp title=pod1外网测试2></p><p>cluster dns由kubelet分配。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%953.webp data-srcset="/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%953.webp, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%953.webp 1.5x, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%953.webp 2x" data-sizes=auto alt=/postimages/pod1外网测试3.webp title=pod1外网测试3></p><p>worker1节点收到pod1的ping请求后数据包从eth3网卡发往baidu.com</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%954.webp data-srcset="/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%954.webp, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%954.webp 1.5x, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%954.webp 2x" data-sizes=auto alt=/postimages/pod1外网测试4.webp title=pod1外网测试4></p><p>查看iptable转发规则</p><p><code>iptables -nvL -t nat</code></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%955.webp data-srcset="/postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%955.webp, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%955.webp 1.5x, /postimages/pod1%e5%a4%96%e7%bd%91%e6%b5%8b%e8%af%955.webp 2x" data-sizes=auto alt=/postimages/pod1外网测试5.webp title=pod1外网测试5></p><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fwwarning"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>本文最后更新于 <span class=timeago datetime=2022-03-25T22:44:37 title="March 25, 2022">March 25, 2022</span>，文中内容可能已过时，请谨慎使用。</div></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-03-25</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/k8s%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/k8s/>k8s</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/pam%E6%A8%A1%E5%9D%97%E9%99%90%E5%88%B6%E7%99%BB%E5%BD%95/ class=prev rel=prev title=pam模块限制登录><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>pam模块限制登录</a>
<a href=/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/ class=next rel=next title=模块与包>模块与包<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2021 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Peng</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:0},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=/js/custom.js></script>
<script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script></body></html>