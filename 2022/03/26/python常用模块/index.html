<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>python常用模块 | Peng's Blog</title><meta name="author" content="Haipeng"><meta name="copyright" content="Haipeng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="日志模块角色1.Logger:产生日志2.Filter:几乎不用3.Handler: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件4.Formatter：日志格式 日志模块相关说明可在logging.basicConfig()函数中可通过具体参数来更改logging模块默认行为，可用参数有.filename：用指定的文件名创建FiledHandler，这样日志会被">
<meta property="og:type" content="article">
<meta property="og:title" content="python常用模块">
<meta property="og:url" content="https://blog.haipengv.com/2022/03/26/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/index.html">
<meta property="og:site_name" content="Peng&#39;s Blog">
<meta property="og:description" content="日志模块角色1.Logger:产生日志2.Filter:几乎不用3.Handler: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件4.Formatter：日志格式 日志模块相关说明可在logging.basicConfig()函数中可通过具体参数来更改logging模块默认行为，可用参数有.filename：用指定的文件名创建FiledHandler，这样日志会被">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.haipengv.com/img/postimages/article9.webp">
<meta property="article:published_time" content="2022-03-26T04:44:37.000Z">
<meta property="article:modified_time" content="2023-07-18T02:25:05.206Z">
<meta property="article:author" content="Haipeng">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.haipengv.com/img/postimages/article9.webp"><link rel="shortcut icon" href="/img/favicon.webp"><link rel="canonical" href="https://blog.haipengv.com/2022/03/26/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'python常用模块',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-18 10:25:05'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/logo.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">109</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">31</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/Analytics/"><i class="fa-fw fas fa-video"></i><span> 统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/postimages/article9.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="Peng's Blog"><span class="site-name">Peng's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/Analytics/"><i class="fa-fw fas fa-video"></i><span> 统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">python常用模块</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-26T04:44:37.000Z" title="发表于 2022-03-26 12:44:37">2022-03-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-07-18T02:25:05.206Z" title="更新于 2023-07-18 10:25:05">2023-07-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>41分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="python常用模块"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="日志模块角色"><a href="#日志模块角色" class="headerlink" title="日志模块角色"></a>日志模块角色</h2><p>1.<code>Logger</code>:产生日志<br>2.<code>Filter</code>:几乎不用<br>3.<code>Handler</code>: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件<br>4.<code>Formatter</code>：日志格式</p>
<h2 id="日志模块相关说明"><a href="#日志模块相关说明" class="headerlink" title="日志模块相关说明"></a>日志模块相关说明</h2><p>可在<code>logging.basicConfig()</code>函数中可通过具体参数来更改<code>logging</code>模块默认行为，可用参数有.<br><code>filename</code>：用指定的文件名创建<code>FiledHandler</code>，这样日志会被存储在指定的文件中。<br><code>filemode</code>：文件打开方式，在指定了<code>filename</code>时使用这个参数，默认值为“a”还可指定为“w”。<br><code>format</code>：指定<code>handler</code>使用的日志显示格式。<br><code>datefmt</code>：指定日期时间格式。<br><code>level</code>：设置<code>rootlogger</code>的日志级别<br><code>stream</code>：用指定的<code>stream</code>创建<code>StreamHandler</code>。可以指定输出到<code>sys.stderr,sys.stdout</code>或者文件，默认为<code>sys.stderr</code>。若同时列出了<code>filename</code>和<code>stream</code>两个参数，则<code>stream</code>参数会被忽略。</p>
<h3 id="format参数中可能用到的格式化串"><a href="#format参数中可能用到的格式化串" class="headerlink" title="format参数中可能用到的格式化串"></a>format参数中可能用到的格式化串</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">%(name)s Logger的名字</span><br><span class="line">%(levelno)s 数字形式的日志级别</span><br><span class="line">%(levelname)s 文本形式的日志级别</span><br><span class="line">%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</span><br><span class="line">%(filename)s 调用日志输出函数的模块的文件名</span><br><span class="line">%(module)s 调用日志输出函数的模块名</span><br><span class="line">%(funcName)s 调用日志输出函数的函数名</span><br><span class="line">%(lineno)d 调用日志输出函数的语句所在的代码行</span><br><span class="line">%(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示</span><br><span class="line">%(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数</span><br><span class="line">%(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</span><br><span class="line">%(thread)d 线程ID。可能没有</span><br><span class="line">%(threadName)s 线程名。可能没有</span><br><span class="line">%(process)d 进程ID。可能没有</span><br><span class="line">%(message)s用户输出的消息</span><br></pre></td></tr></table></figure>

<h2 id="日志打印实现过程"><a href="#日志打印实现过程" class="headerlink" title="日志打印实现过程"></a>日志打印实现过程</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="comment">#1.Logger:产生日志</span></span><br><span class="line">logger1=logging.getLogger(<span class="string">&#x27;访问日志&#x27;</span>) </span><br><span class="line"><span class="comment">#2.Handler: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件</span></span><br><span class="line">sh=logging.StreamHandler() <span class="comment">#打印到终端</span></span><br><span class="line">fh1=logging.FileHandler(<span class="string">&#x27;s1.log&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment">#打印到文件</span></span><br><span class="line">fh2=logging.FileHandler(<span class="string">&#x27;s2.log&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="comment">#3.Formatter：日志格式</span></span><br><span class="line">formatter1=logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span></span><br><span class="line">)</span><br><span class="line">formatter2=logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(asctime)s : %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span></span><br><span class="line">)</span><br><span class="line">formatter3=logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(asctime)s : %(module)s : %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.为Handler绑定日志格式</span></span><br><span class="line">sh.setFormatter(formatter1)</span><br><span class="line">fh1.setFormatter(formatter2)</span><br><span class="line">fh2.setFormatter(formatter3)</span><br><span class="line"><span class="comment">#5.为logger 绑定handler</span></span><br><span class="line">logger1.addHandler(sh)</span><br><span class="line">logger1.addHandler(fh1)</span><br><span class="line">logger1.addHandler(fh2)</span><br><span class="line"><span class="comment">#6.设置日志级别:logger 对象的日志级别应该&lt;=handler的日志级别</span></span><br><span class="line"><span class="comment">#logger1.setLevel(30)</span></span><br><span class="line">logger1.setLevel(<span class="number">10</span>)</span><br><span class="line">sh.setLevel(<span class="number">10</span>)</span><br><span class="line">fh1.setLevel(<span class="number">10</span>)</span><br><span class="line">fh2.setLevel(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#7.测试</span></span><br><span class="line">logger1.debug(<span class="string">&#x27;测试者玩&#x27;</span>)</span><br><span class="line">logger1.info(<span class="string">&#x27;运行还算正常&#x27;</span>)</span><br><span class="line">logger1.warning(<span class="string">&#x27;可能要有bug了&#x27;</span>)</span><br><span class="line">logger1.error(<span class="string">&#x27;不好了，真出bug了&#x27;</span>)</span><br><span class="line">logger1.critical(<span class="string">&#x27;推到重写&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>去注释版</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logger1=logging.getLogger(<span class="string">&#x27;访问日志&#x27;</span>) </span><br><span class="line">sh=logging.StreamHandler()</span><br><span class="line">fh1=logging.FileHandler(<span class="string">&#x27;s1.log&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) </span><br><span class="line">fh2=logging.FileHandler(<span class="string">&#x27;s2.log&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">formatter1=logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span></span><br><span class="line">)</span><br><span class="line">formatter2=logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(asctime)s : %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span></span><br><span class="line">)</span><br><span class="line">formatter3=logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(asctime)s : %(module)s : %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span></span><br><span class="line">)</span><br><span class="line">sh.setFormatter(formatter1)</span><br><span class="line">fh1.setFormatter(formatter2)</span><br><span class="line">fh2.setFormatter(formatter3)</span><br><span class="line">logger1.addHandler(sh)</span><br><span class="line">logger1.addHandler(fh1)</span><br><span class="line">logger1.addHandler(fh2)</span><br><span class="line"><span class="comment">#logger1.setLevel(30)</span></span><br><span class="line">logger1.setLevel(<span class="number">10</span>)</span><br><span class="line">sh.setLevel(<span class="number">10</span>)</span><br><span class="line">fh1.setLevel(<span class="number">10</span>)</span><br><span class="line">fh2.setLevel(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">logger1.debug(<span class="string">&#x27;测试者玩&#x27;</span>)</span><br><span class="line">logger1.info(<span class="string">&#x27;运行还算正常&#x27;</span>)</span><br><span class="line">logger1.warning(<span class="string">&#x27;可能要有bug了&#x27;</span>)</span><br><span class="line">logger1.error(<span class="string">&#x27;不好了，真出bug了&#x27;</span>)</span><br><span class="line">logger1.critical(<span class="string">&#x27;推到重写&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><code>s1.log</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2022-03-22 20:26:58 PM : 测试者玩</span><br><span class="line">2022-03-22 20:26:58 PM : 运行还算正常</span><br><span class="line">2022-03-22 20:26:58 PM : 可能要有bug了</span><br><span class="line">2022-03-22 20:26:58 PM : 不好了，真出bug了</span><br><span class="line">2022-03-22 20:26:58 PM : 推到重写</span><br></pre></td></tr></table></figure>

<p><code>s2.log</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2022-03-22 20:26:58 PM : my_logging : 测试者玩</span><br><span class="line">2022-03-22 20:26:58 PM : my_logging : 运行还算正常</span><br><span class="line">2022-03-22 20:26:58 PM : my_logging : 可能要有bug了</span><br><span class="line">2022-03-22 20:26:58 PM : my_logging : 不好了，真出bug了</span><br><span class="line">2022-03-22 20:26:58 PM : my_logging : 推到重写</span><br></pre></td></tr></table></figure>

<p>终端</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2022-03-26 11:32:48 AM - 访问日志 - INFO - my_logging: 运行还算正常</span><br><span class="line">2022-03-26 11:32:48 AM - 访问日志 - WARNING - my_logging: 可能要有bug了</span><br><span class="line">2022-03-26 11:32:48 AM - 访问日志 - ERROR - my_logging: 不好了，真出bug了</span><br><span class="line">2022-03-26 11:32:48 AM - 访问日志 - CRITICAL - my_logging: 推到重写</span><br></pre></td></tr></table></figure>

<h2 id="日志的继承关系（了解）"><a href="#日志的继承关系（了解）" class="headerlink" title="日志的继承关系（了解）"></a>日志的继承关系（了解）</h2><p>练习</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="comment">#1.Logger:产生日志</span></span><br><span class="line">logger1=logging.getLogger(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">logger2=logging.getLogger(<span class="string">&#x27;root.child1&#x27;</span>)</span><br><span class="line">logger3=logging.getLogger(<span class="string">&#x27;root.child1.child2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.Handler: 接收Logger传过来的日志，进行日志格式化，可以打印到终端，也可以打印到文件</span></span><br><span class="line">sh=logging.StreamHandler() <span class="comment">#打印到终端</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3.Formatter：日志格式</span></span><br><span class="line">formatter1=logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.为Handler绑定日志格式</span></span><br><span class="line">sh.setFormatter(formatter1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.为logger 绑定handler</span></span><br><span class="line">logger1.addHandler(sh)</span><br><span class="line">logger2.addHandler(sh)</span><br><span class="line">logger3.addHandler(sh)</span><br><span class="line"></span><br><span class="line"><span class="comment">#6.设置日志级别:logger 对象的日志级别应该&lt;=handler的日志级别</span></span><br><span class="line"><span class="comment">#logger1.setLevel(30)</span></span><br><span class="line">logger1.setLevel(<span class="number">10</span>)</span><br><span class="line">logger2.setLevel(<span class="number">10</span>)</span><br><span class="line">logger3.setLevel(<span class="number">10</span>)</span><br><span class="line">sh.setLevel(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#7.测试</span></span><br><span class="line">logger1.debug(<span class="string">&#x27;爷爷&#x27;</span>)</span><br><span class="line">logger2.debug(<span class="string">&#x27;爸爸&#x27;</span>)</span><br><span class="line">logger3.debug(<span class="string">&#x27;孙子&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2022-03-22 21:00:30 PM - root - DEBUG - my_logging_child: 爷爷</span><br><span class="line">2022-03-22 21:00:30 PM - root.child1 - DEBUG - my_logging_child: 爸爸</span><br><span class="line">2022-03-22 21:00:30 PM - root.child1 - DEBUG - my_logging_child: 爸爸</span><br><span class="line">2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: 孙子</span><br><span class="line">2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: 孙子</span><br><span class="line">2022-03-22 21:00:30 PM - root.child1.child2 - DEBUG - my_logging_child: 孙子</span><br></pre></td></tr></table></figure>

<p>去注释版</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logger1=logging.getLogger(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">logger2=logging.getLogger(<span class="string">&#x27;root.child1&#x27;</span>)</span><br><span class="line">logger3=logging.getLogger(<span class="string">&#x27;root.child1.child2&#x27;</span>)</span><br><span class="line">sh=logging.StreamHandler()</span><br><span class="line"></span><br><span class="line">formatter1=logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">sh.setFormatter(formatter1)</span><br><span class="line"></span><br><span class="line">logger1.addHandler(sh)</span><br><span class="line">logger2.addHandler(sh)</span><br><span class="line">logger3.addHandler(sh)</span><br><span class="line"></span><br><span class="line"><span class="comment">#logger1.setLevel(30)</span></span><br><span class="line">logger1.setLevel(<span class="number">10</span>)</span><br><span class="line">logger2.setLevel(<span class="number">10</span>)</span><br><span class="line">logger3.setLevel(<span class="number">10</span>)</span><br><span class="line">sh.setLevel(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logger1.debug(&#x27;爷爷&#x27;)</span><br><span class="line">logger2.debug(&#x27;爸爸&#x27;)</span><br><span class="line">logger3.debug(&#x27;孙子&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="日志模块应用"><a href="#日志模块应用" class="headerlink" title="日志模块应用"></a>日志模块应用</h2><p>模拟购物小程序，选择转账时记录日志。</p>
<h3 id="整体项目结构"><a href="#整体项目结构" class="headerlink" title="整体项目结构"></a>整体项目结构</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/%E8%B4%AD%E7%89%A9%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84.webp" alt="购物小程序整体结构"></p>
<h3 id="每个目录简单介绍"><a href="#每个目录简单介绍" class="headerlink" title="每个目录简单介绍"></a>每个目录简单介绍</h3><p><code>bin</code>目录：存放用户交互程序</p>
<p><code>conf</code>目录：设置相关</p>
<p><code>core</code>：核心功能</p>
<p><code>db</code>:用户认证相关</p>
<p><code>lib</code>:常用功能</p>
<p><code>log</code>：日志文件</p>
<p><code>README</code>:项目介绍</p>
<h3 id="相关源码"><a href="#相关源码" class="headerlink" title="相关源码"></a>相关源码</h3><p><code>start.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys, os</span><br><span class="line"><span class="comment">#print(os.path.abspath(__file__))</span></span><br><span class="line"><span class="comment">#print(os.path.dirname(os.path.abspath(__file__)))</span></span><br><span class="line"><span class="comment">#print(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))</span></span><br><span class="line"></span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">sys.path.append(BASE_DIR)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> core <span class="keyword">import</span> src</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src.run()</span><br></pre></td></tr></table></figure>

<p><code>settings.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> logging.config</span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">LOG_PATH = os.path.join(BASE_DIR, <span class="string">&#x27;log&#x27;</span>, <span class="string">&#x27;access.log&#x27;</span>)</span><br><span class="line">DB_PATH = os.path.join(BASE_DIR, <span class="string">&#x27;db&#x27;</span>, <span class="string">&#x27;user&#x27;</span>)</span><br><span class="line">COLLECT_PATH = os.path.join(BASE_DIR, <span class="string">&#x27;log&#x27;</span>, <span class="string">&#x27;collect.log&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(LOG_PATH)</span><br><span class="line"><span class="built_in">print</span>(DB_PATH)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义三种日志输出格式 开始</span></span><br><span class="line"></span><br><span class="line">standard_format = <span class="string">&#x27;[%(asctime)s][%(threadName)s:%(thread)d][task_id:%(name)s][%(filename)s:%(lineno)d]&#x27;</span> \</span><br><span class="line">                  <span class="string">&#x27;[%(levelname)s][%(message)s]&#x27;</span> <span class="comment">#其中name为getlogger指定的名字</span></span><br><span class="line"></span><br><span class="line">simple_format = <span class="string">&#x27;[%(levelname)s][%(asctime)s][%(filename)s:%(lineno)d]%(message)s&#x27;</span></span><br><span class="line"></span><br><span class="line">id_simple_format = <span class="string">&#x27;[%(levelname)s][%(asctime)s] %(message)s&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># log配置字典</span></span><br><span class="line">LOGGING_DIC = &#123;</span><br><span class="line">    <span class="string">&#x27;version&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;disable_existing_loggers&#x27;</span>: <span class="literal">False</span>,</span><br><span class="line">    <span class="string">&#x27;formatters&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;standard&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;format&#x27;</span>: standard_format</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;simple&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;format&#x27;</span>: simple_format</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;id_simple&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;format&#x27;</span>: id_simple_format</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;filters&#x27;</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">&#x27;handlers&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">#打印到终端的日志</span></span><br><span class="line">        <span class="string">&#x27;console&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.StreamHandler&#x27;</span>,  <span class="comment"># 打印到屏幕</span></span><br><span class="line">            <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;simple&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">#打印到文件的日志,收集info及以上的日志</span></span><br><span class="line">        <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.handlers.RotatingFileHandler&#x27;</span>,  <span class="comment"># 保存到文件</span></span><br><span class="line">            <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;standard&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;filename&#x27;</span>: LOG_PATH,  <span class="comment"># 日志文件</span></span><br><span class="line">            <span class="string">&#x27;maxBytes&#x27;</span>: <span class="number">1024</span>*<span class="number">1024</span>*<span class="number">5</span>,  <span class="comment"># 日志大小 5M</span></span><br><span class="line">            <span class="string">&#x27;backupCount&#x27;</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">&#x27;encoding&#x27;</span>: <span class="string">&#x27;utf-8&#x27;</span>,  <span class="comment"># 日志文件的编码，再也不用担心中文log乱码了</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;collect&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.handlers.RotatingFileHandler&#x27;</span>,  <span class="comment"># 保存到文件</span></span><br><span class="line">            <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;simple&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;filename&#x27;</span>: COLLECT_PATH,  <span class="comment"># 日志文件</span></span><br><span class="line">            <span class="string">&#x27;maxBytes&#x27;</span>: <span class="number">1024</span>*<span class="number">1024</span>*<span class="number">5</span>,  <span class="comment"># 日志大小 5M</span></span><br><span class="line">            <span class="string">&#x27;backupCount&#x27;</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">&#x27;encoding&#x27;</span>: <span class="string">&#x27;utf-8&#x27;</span>,  <span class="comment"># 日志文件的编码，再也不用担心中文log乱码了</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;loggers&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;handlers&#x27;</span>: [<span class="string">&#x27;default&#x27;</span>, <span class="string">&#x27;console&#x27;</span>, <span class="string">&#x27;collect&#x27;</span>],  <span class="comment"># 这里把上面定义的两个handler都加上，即log数据既写入文件又打印到屏幕</span></span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;propagate&#x27;</span>: <span class="literal">False</span>,  <span class="comment"># 向上（更高level的logger）传递</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>src.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lib <span class="keyword">import</span> common</span><br><span class="line"><span class="keyword">from</span> lib <span class="keyword">import</span> sql</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">shop</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;购物&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_balance</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;查看余额....&#x27;</span>)</span><br><span class="line">    <span class="comment">#res = sql.execute(&#x27;select balance from user where id=3&#x27;)</span></span><br><span class="line">    <span class="comment">#print(res)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">transfer_account</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;转账....&#x27;</span>)</span><br><span class="line">    <span class="comment">#记录日志</span></span><br><span class="line">    log_msg = <span class="string">&#x27;jack give smith ten yuan&#x27;</span></span><br><span class="line">    <span class="comment">#调用日志功能</span></span><br><span class="line">    loggers = common.logger_handle(<span class="string">&#x27;transfer_account&#x27;</span>)</span><br><span class="line">    loggers.debug(log_msg)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    msg = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    1.购物</span></span><br><span class="line"><span class="string">    2.查看余额</span></span><br><span class="line"><span class="string">    3.转账</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(msg)</span><br><span class="line">        choice = <span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> choice:<span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            shop()</span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">            check_balance()</span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">            transfer_account()</span><br></pre></td></tr></table></figure>

<p><code>user</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alex,<span class="number">18</span>,male,<span class="number">10000</span></span><br><span class="line">egon,<span class="number">18</span>,male,<span class="number">1000000</span></span><br></pre></td></tr></table></figure>

<p><code>common.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">import</span> logging.config</span><br><span class="line"><span class="comment"># def logger(msg):</span></span><br><span class="line"><span class="comment">#     with open(settings.LOG_PATH, &#x27;a&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span></span><br><span class="line"><span class="comment">#         f.write(&#x27;%s\n&#x27; %msg)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logger_handle</span>(<span class="params">log_name</span>):</span><br><span class="line">    logging.config.dictConfig(settings.LOGGING_DIC)  <span class="comment"># 导入上面定义的logging配置</span></span><br><span class="line">    logger = logging.getLogger(log_name)  <span class="comment"># 生成一个log实例</span></span><br><span class="line">    logger.info(<span class="string">&#x27;It works!&#x27;</span>)  <span class="comment"># 记录该文件的运行状态</span></span><br></pre></td></tr></table></figure>

<p><code>sql.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">execute</span>(<span class="params">sql</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;解析&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;执行sql&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><code>access.log</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jack给smith转账了10元</span><br><span class="line">[2022-03-22 22:01:20,767][MainThread:2600][task_id:转账][common.py:10][INFO][It works!]</span><br><span class="line">[2022-03-22 22:04:08,963][MainThread:14184][task_id:转账][common.py:10][INFO][It works!]</span><br><span class="line">[2022-03-22 22:06:59,656][MainThread:15740][task_id:transfer_account][common.py:10][INFO][It works!]</span><br><span class="line">[2022-03-26 11:41:33,154][MainThread:12820][task_id:transfer_account][common.py:10][INFO][It works!]</span><br></pre></td></tr></table></figure>

<p><code>collect.log</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[INFO][2022-03-22 22:01:20,767][common.py:10]It works!</span><br><span class="line">[INFO][2022-03-22 22:04:08,963][common.py:10]It works!</span><br><span class="line">[INFO][2022-03-22 22:06:59,656][common.py:10]It works!</span><br><span class="line">[INFO][2022-03-26 11:41:33,154][common.py:10]It works!</span><br></pre></td></tr></table></figure>

<h2 id="re模块-正则表达式"><a href="#re模块-正则表达式" class="headerlink" title="re模块-正则表达式"></a>re模块-正则表达式</h2><h3 id="什么是正则？"><a href="#什么是正则？" class="headerlink" title="什么是正则？"></a>什么是正则？</h3><p>正则就是用一些具有特殊含义的符号组合到一起（称为正则表达式）来描述字符或者字符串的方法。或者说：正则就是用来描述一类事物的规则。（在Python中）它内嵌在Python中，并通过 re 模块实现。正则表达式模式被编译成一系列的字节码，然后由用 C 编写的匹配引擎执行。</p>
<h3 id="常用匹配模式-元字符"><a href="#常用匹配模式-元字符" class="headerlink" title="常用匹配模式(元字符)"></a>常用匹配模式(元字符)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\w&#x27;</span>, <span class="string">&#x27;jack 123 + _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\W&#x27;</span>, <span class="string">&#x27;jack 123 + _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\s&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\S&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\d&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\D&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\t&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + hello _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;^j&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + hello _ - *&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;o$&#x27;</span>, <span class="string">&#x27;jack\tn 12\n3 + _ * hello&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>重复<code>./?/*/+/&#123;m,n&#125;/.*/.*?</code></p>
<h4 id="点"><a href="#点" class="headerlink" title="点"></a>点</h4><p><code>.</code>能匹配换行符(<code>\n)</code>以外的任意一个字符 (以<code>a</code>开头的都没匹配上，直到遇到<code>aab</code>符合<code>a.b</code>匹配规则，所以结果是<code>aab</code>)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.b&#x27;</span>, <span class="string">&#x27;a1b a b a-b aaaaaaaab&#x27;</span>)) <span class="comment"># [&#x27;a1b&#x27; ,&#x27;a b&#x27; , &#x27;a-b&#x27;, &#x27;aab&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.b&#x27;</span>, <span class="string">&#x27;a1b a b a\nb aaaaaaaab&#x27;</span>)) <span class="comment"># [&#x27;a1b&#x27;,&#x27;a b&#x27;, &#x27;aab&#x27;]</span></span><br><span class="line">                        <span class="comment">#a.b</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.b&#x27;</span>, <span class="string">&#x27;a1b a b a\nb aaaaaaaab&#x27;</span>, re.DOTALL)) <span class="comment">#[&#x27;a1b&#x27;,&#x27;a b&#x27;, &#x27;a\nb&#x27;,&#x27;aab&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="问号"><a href="#问号" class="headerlink" title="问号"></a>问号</h4><p><code>?</code>代表<code>?</code>左边的字符出现0次或者1次</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;ab?&#x27;</span>, <span class="string">&#x27;a ab abb abbbb a1b&#x27;</span>)) <span class="comment">#[&#x27;a&#x27; ,&#x27;ab&#x27; ,&#x27;ab&#x27;,&#x27;ab&#x27;,&#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>分析过程:</p>
<p>要匹配<code>ab?</code>。<code>b</code>可以出现1个也可以不出现。即<code>&#39;a&#39;</code>或者<code>&#39;ab&#39;.字母a开头</code>的只要能匹配就取出来。</p>
<h4 id="星"><a href="#星" class="headerlink" title="星"></a>星</h4><p><code>*</code>代表<code>*</code>左边的字符出现0次或者无穷次</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;ab*&#x27;</span>, <span class="string">&#x27;a ab abb abbbb a1b&#x27;</span>)) <span class="comment">#[&#x27;a&#x27;, &#x27;ab&#x27;, &#x27;abb&#x27;,&#x27;abbbb&#x27;,&#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="加号"><a href="#加号" class="headerlink" title="加号"></a>加号</h4><p><code>+</code>代表<code>+</code>号左边的字符出现1次或者无穷次</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;ab+&#x27;</span>, <span class="string">&#x27;a ab abb abbbbb a1b&#x27;</span>)) <span class="comment">#[&#x27;ab&#x27;,&#x27;abb&#x27;,&#x27;abbbbb&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>分析过程:</p>
<p>要匹配<code>ab+</code>,<code>b</code>可以出现1个或者无穷次但不能不出现。即<code>&#39;ab&#39;或者&#39;a无穷个b&#39;</code>.需要以字母<code>ab</code>开头的才能匹配，注意和问号、星号做对比。</p>
<h4 id="大括号"><a href="#大括号" class="headerlink" title="大括号"></a>大括号</h4><p><code>&#123;m,n&#125;</code>：代表左边的字符出现<code>m</code>次到<code>n</code>次</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;ab&#123;0,1&#125;&#x27;</span>, <span class="string">&#x27;a ab abb abbbb a1b&#x27;</span>)) <span class="comment">#等同于?效果。0次到1次</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;ab&#123;0,&#125;&#x27;</span>, <span class="string">&#x27;a ab abb abbbb a1b&#x27;</span>)) <span class="comment">#等同于*效果。0次到无穷次</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;ab&#123;1,&#125;&#x27;</span>, <span class="string">&#x27;a ab abb abbbb a1b&#x27;</span>)) <span class="comment">#等同于+效果。1次到无穷次</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;ab&#123;2,4&#125;&#x27;</span>, <span class="string">&#x27;a ab abb abbbb abbbbbbbbbbbb  a1b&#x27;</span>))</span><br><span class="line"><span class="comment">#2次到4次，即匹配abb,abbb,abbbb ,如果出现4个以上的b只取到4个。结果为[&#x27;abb&#x27;,&#x27;abbbb&#x27;,&#x27;abbbb&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="点星"><a href="#点星" class="headerlink" title="点星"></a>点星</h4><p><code>.*</code>代表要么不出现，要么出现无穷次。（贪婪匹配）通常匹配的不够精准。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.*b&#x27;</span>, <span class="string">&#x27;xxxxy123a123b456b&#x27;</span>)) <span class="comment">#[&#x27;a123b456b&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="点星问号"><a href="#点星问号" class="headerlink" title="点星问号"></a>点星问号</h4><p><code>.*?</code>非贪婪匹配和.*对应。（爬虫经常用！！！）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.*?b&#x27;</span>, <span class="string">&#x27;xxxxy123a123b456b&#x27;</span>)) <span class="comment">#[&#x27;a123b&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>分析:有多个<code>b</code>时，匹配最近的一个<code>b</code></p>
<h4 id="斜杠"><a href="#斜杠" class="headerlink" title="斜杠"></a>斜杠</h4><p><code>/</code>或者</p>
<h4 id="小括号"><a href="#小括号" class="headerlink" title="小括号"></a>小括号</h4><p><code>()</code>分组，<code>findall()</code>只取分组里面的字符。<code>(?:)</code>代表分组外面的字符也保留。是固定写法！</p>
<p>需求:找出所有<code>compan</code>开头的英文字母</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;compan(y|ies)&#x27;</span>, <span class="string">&#x27;Too many companies have gone bankrupt, and the next one is my company&#x27;</span>))</span><br><span class="line"><span class="comment">#结果：[&#x27;ies&#x27;,&#x27;y&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;compan(?:y|ies)&#x27;</span>, <span class="string">&#x27;Too many companies have gone bankrupt, and the next one is my company&#x27;</span>))</span><br><span class="line"><span class="comment">#结果：[&#x27;companies&#x27;,&#x27;company&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>应用取出网页中的链接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;href=&quot;(.*?)&quot;&#x27;</span>, <span class="string">&#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;点击我&lt;/a&gt;&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>结果:</p>
<p><code>[&#39;http://www.baidu.com&#39;]</code></p>
<p><code>rawstring</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">r&#x27;a\\c&#x27;</span>, <span class="string">&#x27;a\\c a1c aBc&#x27;</span>)) <span class="comment">#a\\c -&gt;a\c [&#x27;a\\c&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="中括号"><a href="#中括号" class="headerlink" title="中括号"></a>中括号</h4><p><code>[]</code>取中括号内任意一个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[a-z]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a-b a+b&#x27;</span>)) <span class="comment">#[&#x27;axb&#x27;,&#x27;azb&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[A-Z]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a-b a+b&#x27;</span>)) <span class="comment">#[&#x27;aAb&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[a-zA-Z]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a-b a+b&#x27;</span>)) <span class="comment">#[&#x27;axb&#x27;, &#x27;azb&#x27;, &#x27;aAb&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[0-9]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a1b a-b a+b a9b&#x27;</span>)) <span class="comment">#[&#x27;a1b&#x27;, &#x27;a9b&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[-+*/]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a1b a-b a+b a9b&#x27;</span>)) <span class="comment">#[&#x27;a-b&#x27;, &#x27;a+b&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[^-+*/]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a1b a-b a+b a9b&#x27;</span>)) <span class="comment">#[&#x27;axb&#x27;, &#x27;azb&#x27;, &#x27;aAb&#x27;, &#x27;a1b&#x27;, &#x27;a9b&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="re模块的其他用法"><a href="#re模块的其他用法" class="headerlink" title="re模块的其他用法"></a>re模块的其他用法</h3><p><code>re.search</code>匹配成功一次就返回,取不到就返回<code>None</code>,加<code>.group()</code>返回结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&#x27;a[*]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a1b a-b a+b aaab&#x27;</span>)) <span class="comment">#None</span></span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&#x27;a[a-z]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a1b a-b a+b aaab&#x27;</span>).group()) <span class="comment"># axb</span></span><br></pre></td></tr></table></figure>

<p><code>re.match</code>：从开头取,开头没有就为<code>None</code>,只取一次。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.match(<span class="string">&#x27;a[0-9]b&#x27;</span>, <span class="string">&#x27;axb azb aAb a1b a-b a2b a+b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">&#x27;a[0-9]b&#x27;</span>, <span class="string">&#x27;a9b a8b  axb azb aAb a1b a-b a2b a+b&#x27;</span>).group())</span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&#x27;^a[0-9]b&#x27;</span>, <span class="string">&#x27;a9b a8b  axb azb aAb a1b a-b a2b a+b&#x27;</span>).group())</span><br></pre></td></tr></table></figure>

<p><code>re.split</code>:分割</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.split(<span class="string">&#x27;:&#x27;</span>, <span class="string">&#x27;root:x:0:0::/root:/bin/bash&#x27;</span>,maxsplit=<span class="number">1</span>))</span><br><span class="line"><span class="comment">#结果为：[&#x27;root&#x27;,&#x27;x:0:0::/root:/bin/bash&#x27;]</span></span><br><span class="line"><span class="comment">#&#x27;root:x:0:0::/root:/bin/bash&#x27;.split(&#x27;:&#x27;)</span></span><br></pre></td></tr></table></figure>

<p><code>re.sub:替换</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;root:x:0:0::/root:/bin/bash&#x27;</span>)) <span class="comment">#都替换</span></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;root:x:0:0::/root:/bin/bash&#x27;</span>, <span class="number">1</span>)) <span class="comment">#只换一次</span></span><br></pre></td></tr></table></figure>

<p>需求：文本前后倒转</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&#x27;^([a-z]+)([^a-z]+)(.*?)([^a-z]+)([a-z]+)$&#x27;</span>, <span class="string">r&#x27;\5\2\3\4\1&#x27;</span>, <span class="string">&#x27;root:x:0:0::/root:/bin/bash&#x27;</span>)) </span><br><span class="line"><span class="comment">#只换一次</span></span><br></pre></td></tr></table></figure>

<p>解析：</p>
<p><code>^</code>以…开头 </p>
<p><code>$</code>以…结尾 </p>
<p><code>([a-z]+)</code> 分组匹配单词</p>
<p> <code>([^a-z]+)</code>分组匹配非单词</p>
<p><code>(.*?)</code>分组匹配任意字符</p>
<p>正则整体表示：以单词开头，并且以单词结尾。<code>r</code>表示显示字符原本含义不进行转义，<code>\5</code>表示第五个分组。<code>r&#39;\5\2\3\4\1&#39;</code> 整体表示第<code>5</code>个分组和第一个分组的内容调换<br>并且斜杠使用原本含义不做转义。</p>
<p><code>re.compile</code> :它将正则表达式转化为对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">obj = re.<span class="built_in">compile</span>(<span class="string">&#x27;a\d&#123;2&#125;b&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.findall(<span class="string">&#x27;a12b a123b a12345b abbb&#x27;</span>)) <span class="comment">#[&#x27;a12b&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(obj.search(<span class="string">&#x27;a12b a123b a12345b abbb&#x27;</span>).group()) <span class="comment">#a12b</span></span><br></pre></td></tr></table></figure>

<p>常用正则表</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://images-1316789231.cos.ap-shanghai.myqcloud.com/%E7%BC%96%E7%A8%8B/%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8.png" alt="常用正则表"></p>
<h2 id="时间模块"><a href="#时间模块" class="headerlink" title="时间模块"></a>时间模块</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="built_in">print</span>(time.time()) <span class="comment">#时间戳格式：1648026287.9298368</span></span><br><span class="line"><span class="built_in">print</span>(time.localtime().tm_mday) <span class="comment">#23</span></span><br><span class="line"><span class="built_in">print</span>(time.localtime()) <span class="comment">#结构化时间</span></span><br><span class="line"><span class="built_in">print</span>(time.gmtime()) <span class="comment">#结构化时间</span></span><br><span class="line"><span class="comment">#结果</span></span><br><span class="line"><span class="comment">#time.struct_time(tm_year=2022, tm_mon=3, tm_mday=23, tm_hour=17, tm_min=5, tm_sec=26, tm_wday=2, tm_yday=82, tm_isdst=0)</span></span><br><span class="line"><span class="comment">#time.struct_time(tm_year=2022, tm_mon=3, tm_mday=23, tm_hour=9, tm_min=5, tm_sec=26, tm_wday=2, tm_yday=82, tm_isdst=0)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)) <span class="comment">#2022-03-23 17:07:47</span></span><br><span class="line"><span class="built_in">print</span>(time.strftime(<span class="string">&#x27;%Y-%m-%d %X&#x27;</span>)) <span class="comment">#2022-03-23 17:07:47</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#了解</span></span><br><span class="line"><span class="built_in">print</span>(time.localtime(<span class="number">1111111111</span>))</span><br><span class="line"><span class="built_in">print</span>(time.localtime(time.time()))</span><br><span class="line"><span class="built_in">print</span>(time.gmtime(time.time()))</span><br><span class="line"><span class="built_in">print</span>(time.mktime(time.localtime()))</span><br><span class="line"><span class="built_in">print</span>(time.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>, time.localtime()))</span><br><span class="line"><span class="built_in">print</span>(time.strptime(<span class="string">&#x27;2020-03-01&#x27;</span>, <span class="string">&#x27;%Y-%m-%d&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(time.asctime()) <span class="comment">#Wed Mar 23 17:15:40 2022</span></span><br><span class="line"><span class="built_in">print</span>(time.ctime()) <span class="comment">#Wed Mar 23 17:15:40 2022</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(time.asctime(time.localtime())) <span class="comment">#Wed Mar 23 17:16:32 2022</span></span><br><span class="line"><span class="built_in">print</span>(time.ctime(<span class="number">111111111</span>)) <span class="comment">#Tue Jul 10 08:11:51 1973</span></span><br><span class="line"><span class="built_in">print</span>(time.ctime(<span class="number">1648027065.7651727</span>)) <span class="comment">#Wed Mar 23 17:17:45 2022</span></span><br><span class="line"><span class="built_in">print</span>(time.time()) <span class="comment">#时间戳格式：1648026287.9298368</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#datetime</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="built_in">print</span>(datetime.datetime.now()) <span class="comment">#当前时间：2022-03-23 17:20:11.964584</span></span><br><span class="line"><span class="built_in">print</span>(datetime.datetime.fromtimestamp(<span class="number">111111111</span>)) <span class="comment">#1973-07-10 08:11:51</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(datetime.datetime.now()+datetime.timedelta(days=<span class="number">3</span>)) <span class="comment">#当前时间开始的三天后。2022-03-26 17:22:35.581422</span></span><br><span class="line"><span class="built_in">print</span>(datetime.datetime.now()+datetime.timedelta(days=-<span class="number">3</span>)) <span class="comment">#当前时间开始的三天前。2022-03-20 17:22:35.581422</span></span><br><span class="line"><span class="built_in">print</span>(datetime.datetime.now()+datetime.timedelta(minutes=<span class="number">3</span>)) <span class="comment">#当前时间开始的三分钟后。2022-03-23 17:25:35.581422</span></span><br><span class="line"><span class="built_in">print</span>(datetime.datetime.now()+datetime.timedelta(seconds=<span class="number">3</span>)) <span class="comment">#当前时间开始的三秒后。2022-03-23 17:22:38.581422</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(datetime.datetime.now().replace(year=<span class="number">2000</span>)) <span class="comment">#将当前时间中年替换成2000. 2000-03-23 17:25:04.696554</span></span><br></pre></td></tr></table></figure>

<h2 id="random模块"><a href="#random模块" class="headerlink" title="random模块"></a>random模块</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="built_in">print</span>(random.random()) <span class="comment">#(0,1) --float 大于0且小于1之间的小数 0.8266764258093519</span></span><br><span class="line"><span class="built_in">print</span>(random.randint(<span class="number">1</span>, <span class="number">3</span>)) <span class="comment">#[1,3] 大于等于1且小于等于3之间的整数</span></span><br><span class="line"><span class="built_in">print</span>(random.randrange(<span class="number">1</span>, <span class="number">3</span>)) <span class="comment">#[1,3) 大于等于1且小于3之间的整数</span></span><br><span class="line"><span class="built_in">print</span>(random.choice([<span class="number">1</span>, <span class="string">&#x27;23&#x27;</span>, [<span class="number">4</span>,<span class="number">5</span>]])) <span class="comment">#1或者23或者[4,5]</span></span><br><span class="line"><span class="built_in">print</span>(random.sample([<span class="number">1</span>,<span class="string">&#x27;23&#x27;</span>,[<span class="number">4</span>,<span class="number">5</span>]],<span class="number">2</span>)) <span class="comment">#列表元素任意2个组合 [[4, 5], &#x27;23&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(random.uniform(<span class="number">1</span>,<span class="number">3</span>)) <span class="comment">#大于1小于3的小数 2.3344194593026546</span></span><br><span class="line"></span><br><span class="line">l=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>]</span><br><span class="line">random.shuffle(l) <span class="comment">#列表中元素随机打乱顺序。[5, 1, 3, 4, 2]</span></span><br><span class="line"><span class="built_in">print</span>(l)</span><br><span class="line"></span><br><span class="line"><span class="comment">#随机验证码。数字+字母</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_code</span>(<span class="params">n</span>):</span><br><span class="line">    res=<span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        s1=<span class="built_in">str</span>(random.randint(<span class="number">0</span>,<span class="number">9</span>))</span><br><span class="line">        s2=<span class="built_in">chr</span>(random.randint(<span class="number">65</span>,<span class="number">90</span>))</span><br><span class="line">        res+=random.choice([s1,s2])</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"><span class="built_in">print</span>(make_code(<span class="number">6</span>))</span><br></pre></td></tr></table></figure>

<h2 id="os模块"><a href="#os模块" class="headerlink" title="os模块"></a>os模块</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd() 获取当前工作目录，即当前python脚本工作的目录路径</span><br><span class="line">os.chdir(<span class="string">&quot;dirname&quot;</span>)  改变当前脚本工作目录；相当于shell下cd</span><br><span class="line">os.curdir  返回当前目录: (<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">os.pardir  获取当前目录的父目录字符串名：(<span class="string">&#x27;..&#x27;</span>)</span><br><span class="line">os.makedirs(<span class="string">&#x27;dirname1/dirname2&#x27;</span>)    可生成多层递归目录</span><br><span class="line">os.removedirs(<span class="string">&#x27;dirname1&#x27;</span>)    若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</span><br><span class="line">os.mkdir(<span class="string">&#x27;dirname&#x27;</span>)    生成单级目录；相当于shell中mkdir dirname</span><br><span class="line">os.rmdir(<span class="string">&#x27;dirname&#x27;</span>)    删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname</span><br><span class="line">os.listdir(<span class="string">&#x27;dirname&#x27;</span>)    列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</span><br><span class="line">os.remove()  删除一个文件</span><br><span class="line">os.rename(<span class="string">&quot;oldname&quot;</span>,<span class="string">&quot;newname&quot;</span>)  重命名文件/目录</span><br><span class="line">os.stat(<span class="string">&#x27;path/filename&#x27;</span>)  获取文件/目录信息</span><br><span class="line">os.sep    输出操作系统特定的路径分隔符，win下为<span class="string">&quot;\\&quot;</span>,Linux下为<span class="string">&quot;/&quot;</span></span><br><span class="line">os.linesep    输出当前平台使用的行终止符，win下为<span class="string">&quot;\t\n&quot;</span>,Linux下为<span class="string">&quot;\n&quot;</span></span><br><span class="line">os.pathsep    输出用于分割文件路径的字符串 win下为;,Linux下为:</span><br><span class="line">os.name    输出字符串指示当前使用平台。win-&gt;<span class="string">&#x27;nt&#x27;</span>; Linux-&gt;<span class="string">&#x27;posix&#x27;</span></span><br><span class="line">os.system(<span class="string">&quot;bash command&quot;</span>)  运行shell命令，直接显示</span><br><span class="line">os.environ  获取系统环境变量</span><br><span class="line">os.path.abspath(path)  返回path规范化的绝对路径</span><br><span class="line">os.path.split(path)  将path分割成目录和文件名二元组返回</span><br><span class="line">os.path.dirname(path)  返回path的目录。其实就是os.path.split(path)的第一个元素</span><br><span class="line">os.path.basename(path)  返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素</span><br><span class="line">os.path.exists(path)  如果path存在，返回<span class="literal">True</span>；如果path不存在，返回<span class="literal">False</span></span><br><span class="line">os.path.isabs(path)  如果path是绝对路径，返回<span class="literal">True</span></span><br><span class="line">os.path.isfile(path)  如果path是一个存在的文件，返回<span class="literal">True</span>。否则返回<span class="literal">False</span></span><br><span class="line">os.path.isdir(path)  如果path是一个存在的目录，则返回<span class="literal">True</span>。否则返回<span class="literal">False</span></span><br><span class="line">os.path.join(path1[, path2[, ...]])  将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</span><br><span class="line">os.path.getatime(path)  返回path所指向的文件或者目录的最后存取时间</span><br><span class="line">os.path.getmtime(path)  返回path所指向的文件或者目录的最后修改时间</span><br><span class="line">os.path.getsize(path) 返回path的大小</span><br><span class="line">在Linux和Mac平台上，该函数会原样返回path，在windows平台上会将路径中所有字符转换为小写，并将所有斜杠转换为反斜杠。</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.normcase(<span class="string">&#x27;c:/windows\\system32\\&#x27;</span>)   </span><br><span class="line"><span class="string">&#x27;c:\\windows\\system32\\&#x27;</span>  </span><br><span class="line">规范化路径，如..和/</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.normpath(<span class="string">&#x27;c://windows\\System32\\../Temp/&#x27;</span>)   </span><br><span class="line"><span class="string">&#x27;c:\\windows\\Temp&#x27;</span>   </span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=<span class="string">&#x27;/Users/jieli/test1/\\\a1/\\\\aa.py/../..&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(os.path.normpath(a))</span><br><span class="line">/Users/jieli/test1</span><br></pre></td></tr></table></figure>

<p>举例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(os.getcwd())</span><br><span class="line"><span class="built_in">print</span>(os.stat(<span class="string">r&#x27;D:\pccharmcode\oracle.py&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(os.stat(<span class="string">r&#x27;D:\pccharmcode\oracle.py&#x27;</span>).st_size)</span><br><span class="line"><span class="built_in">print</span>(os.path.getsize(<span class="string">r&#x27;D:\pccharmcode\oracle.py&#x27;</span>))</span><br><span class="line">os.system(<span class="string">&#x27;tasklist&#x27;</span>) <span class="comment">#看系统进程,有编码问题。</span></span><br><span class="line"><span class="built_in">print</span>(os.path.split(<span class="string">r&#x27;D:\pccharmcode\oracle.py&#x27;</span>)) <span class="comment">#(&#x27;D:\\pccharmcode&#x27;, &#x27;oracle.py&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(os.path.dirname(<span class="string">r&#x27;D:\pccharmcode\oracle.py&#x27;</span>)) <span class="comment">#D:\pccharmcode</span></span><br><span class="line"><span class="built_in">print</span>(os.path.basename(<span class="string">r&#x27;D:\pccharmcode\oracle.py&#x27;</span>)) <span class="comment">#oracle.py</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(os.path.isabs(<span class="string">r&#x27;C:\\a123123123&#x27;</span>)) <span class="comment">#True</span></span><br><span class="line"><span class="built_in">print</span>(os.path.isabs(<span class="string">r&#x27;/root/123.txt&#x27;</span>)) <span class="comment">#True</span></span><br><span class="line"><span class="built_in">print</span>(os.path.join(<span class="string">&#x27;C:&#x27;</span>, <span class="string">&#x27;D:\\&#x27;</span>, <span class="string">&#x27;dir1&#x27;</span>, <span class="string">&#x27;dir2&#x27;</span>, <span class="string">&#x27;dir3&#x27;</span>)) <span class="comment">#D:dir1\dir2\dir3</span></span><br><span class="line"><span class="built_in">print</span>(os.path.normcase(<span class="string">&#x27;c:/windows\\SYstem32\\&#x27;</span>)) <span class="comment">#c:\windows\system32\</span></span><br><span class="line"><span class="built_in">print</span>(os.path.normpath(<span class="string">&#x27;c://windows\\System32\\../Temp/&#x27;</span>)) <span class="comment">#c:\windows\Temp</span></span><br></pre></td></tr></table></figure>

<p>路径：<code>D:\pccharmcode\api_key\__init__.py</code><br>要求获取到根开始的第一级路径。</p>
<p>方法1：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(os.path.dirname(os.path.dirname(<span class="string">r&#x27;D:\pccharmcode\api_key\__init__.py&#x27;</span>)))</span><br></pre></td></tr></table></figure>

<p>方法2：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">res = os.path.normpath(os.path.join(</span><br><span class="line">    os.path.abspath(<span class="string">r&#x27;D:\pccharmcode\api_key\__init__.py&#x27;</span>),</span><br><span class="line">    os.pardir,</span><br><span class="line">    os.pardir</span><br><span class="line">))</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>

<p>方法3：</p>
<p>先将原路径拼接成一个新路径(用<code>os.path.join()</code>)。 <code>D:\pccharmcode\api_key\__init__.py\..\..</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BASE_DIR = os.path.normpath(</span><br><span class="line">os.path.join(</span><br><span class="line">    os.path.abspath(<span class="string">r&#x27;D:\pccharmcode\api_key\__init__.py&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;..&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;..&#x27;</span></span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(BASE_DIR)</span><br></pre></td></tr></table></figure>

<h2 id="sys模块"><a href="#sys模块" class="headerlink" title="sys模块"></a>sys模块</h2><p>主要掌握</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sys.argv</span><br><span class="line">sys.exit(0)</span><br><span class="line">sys.path</span><br></pre></td></tr></table></figure>

<p>其他</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sys.argv           命令行参数List，第一个元素是程序本身路径</span><br><span class="line">sys.exit(n)        退出程序，正常退出时exit(0)</span><br><span class="line">sys.version        获取Python解释程序的版本信息</span><br><span class="line">sys.maxint         最大的Int值</span><br><span class="line">sys.path           返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</span><br><span class="line">sys.platform       返回操作系统平台名称</span><br></pre></td></tr></table></figure>

<p>模拟下载进度条</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print((&#x27;[%%-%ds]&#x27; %50) %(&#x27;#&#x27;*1))</span><br><span class="line">print((&#x27;[%%-%ds]&#x27; %50) %(&#x27;#&#x27;*2))</span><br><span class="line">print((&#x27;[%%-%ds]&#x27; %50) %(&#x27;#&#x27;*3))</span><br><span class="line">print((&#x27;[%%-%ds]&#x27; %50) %(&#x27;#&#x27;*4))</span><br><span class="line">print((&#x27;[%%-%ds]&#x27; %50) %(&#x27;#&#x27;*5))</span><br><span class="line">print((&#x27;[%%-%ds]&#x27; %50) %(&#x27;#&#x27;*6))</span><br><span class="line">print((&#x27;[%%-%ds]&#x27; %50) %(&#x27;#&#x27;*7))</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[#                                                 ]</span><br><span class="line">[##                                                ]</span><br><span class="line">[###                                               ]</span><br><span class="line">[####                                              ]</span><br><span class="line">[#####                                             ]</span><br><span class="line">[######                                            ]</span><br><span class="line">[#######                                           ]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">progress</span>(<span class="params">percent,width=<span class="number">50</span></span>):</span><br><span class="line">    <span class="keyword">if</span> percent &gt;= <span class="number">1</span>:</span><br><span class="line">        percent=<span class="number">1</span></span><br><span class="line">    show_str = (<span class="string">&#x27;[%%-%ds]&#x27;</span> % width) % (<span class="string">&#x27;#&#x27;</span> * <span class="built_in">int</span>(width*percent))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\r%s %d%%&#x27;</span> %(show_str,<span class="built_in">int</span>(<span class="number">100</span>*percent)),end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">recv_size=<span class="number">0</span></span><br><span class="line">total_size=<span class="number">10241</span></span><br><span class="line"><span class="keyword">while</span> recv_size &lt; total_size:</span><br><span class="line">    time.sleep(<span class="number">0.1</span>) <span class="comment">#模拟数据的传输延迟</span></span><br><span class="line">    recv_size+=<span class="number">1024</span> <span class="comment">#每次收1024</span></span><br><span class="line">    progress(recv_size/total_size)</span><br></pre></td></tr></table></figure>

<h2 id="shutil模块"><a href="#shutil模块" class="headerlink" title="shutil模块"></a>shutil模块</h2><p>高级的文件、文件夹、压缩包 处理模块。</p>
<p>格式：</p>
<p><code>shutil.copyfileobj(fsrc, fdst[, length])</code></p>
<p>将文件内容拷贝到另一个文件中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.copyfileobj(<span class="built_in">open</span>(<span class="string">&#x27;old.xml&#x27;</span>,<span class="string">&#x27;r&#x27;</span>), <span class="built_in">open</span>(<span class="string">&#x27;new.xml&#x27;</span>, <span class="string">&#x27;w&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>格式：</p>
<p><code>shutil.copyfile(src, dst)</code></p>
<p>拷贝文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copyfile(<span class="string">&#x27;f1.log&#x27;</span>, <span class="string">&#x27;f2.log&#x27;</span>) <span class="comment">#目标文件无需存在</span></span><br></pre></td></tr></table></figure>

<p>格式：</p>
<p><code>shutil.copymode(src, dst)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">仅拷贝权限。内容、组、用户均不变</span><br><span class="line">shutil.copymode(<span class="string">&#x27;f1.log&#x27;</span>, <span class="string">&#x27;f2.log&#x27;</span>) <span class="comment">#目标文件必须存在</span></span><br></pre></td></tr></table></figure>

<p>格式：</p>
<p><code>shutil.copystat(src, dst)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">仅拷贝状态的信息，包括：mode bits, atime, mtime, flags</span><br><span class="line">shutil.copystat(<span class="string">&#x27;f1.log&#x27;</span>, <span class="string">&#x27;f2.log&#x27;</span>) <span class="comment">#目标文件必须存在</span></span><br></pre></td></tr></table></figure>

<p>格式：</p>
<p><code>shutil.copy(src, dst)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">拷贝文件和权限</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.copy(<span class="string">&#x27;f1.log&#x27;</span>, <span class="string">&#x27;f2.log&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>格式：</p>
<p><code>shutil.copy2(src, dst)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">拷贝文件和状态信息</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.copy2(<span class="string">&#x27;f1.log&#x27;</span>, <span class="string">&#x27;f2.log&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>格式：</p>
<p><code>shutil.ignore_patterns(*patterns) shutil.copytree(src, dst, symlinks=False, ignore=None)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">递归的去拷贝文件夹</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.copytree(<span class="string">&#x27;folder1&#x27;</span>, <span class="string">&#x27;folder2&#x27;</span>, ignore=shutil.ignore_patterns(<span class="string">&#x27;*.pyc&#x27;</span>, <span class="string">&#x27;tmp*&#x27;</span>)) <span class="comment">#目标目录不能存在，注意对folder2目录父级目录要有可写权限，ignore的意思是排除 </span></span><br></pre></td></tr></table></figure>

<p>拷贝软连接:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.copytree(<span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;f2&#x27;</span>, symlinks=<span class="literal">True</span>, ignore=shutil.ignore_patterns(<span class="string">&#x27;*.pyc&#x27;</span>, <span class="string">&#x27;tmp*&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>通常的拷贝都把软连接拷贝成硬链接，即对待软连接来说，创建新的文件.</p>
<p>格式：</p>
<p><code>shutil.rmtree(path[, ignore_errors[, onerror]])</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">递归的去删除文件</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.rmtree(<span class="string">&#x27;folder1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>格式：</p>
<p><code>shutil.move(src, dst)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">递归的去移动文件，它类似mv命令，其实就是重命名。</span><br><span class="line">shutil.move(&#x27;folder1&#x27;, &#x27;folder3&#x27;)</span><br></pre></td></tr></table></figure>

<p>压缩与解压缩</p>
<p>格式：</p>
<p><code>shutil.make_archive(base_name, format,...)</code></p>
<p>创建压缩包并返回文件路径，例如：zip、tar.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">base_name： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目录，否则保存至指定路径，</span><br><span class="line">如 data_bak                       =&gt;保存至当前路径</span><br><span class="line">如：/tmp/data_bak =&gt;保存至/tmp/</span><br><span class="line">format： 压缩包种类，“zip”, “tar”, “bztar”，“gztar”</span><br><span class="line">root_dir： 要压缩的文件夹路径（默认当前目录）</span><br><span class="line">owner： 用户，默认当前用户</span><br><span class="line">group： 组，默认当前组</span><br><span class="line">logger： 用于记录日志，通常是logging.Logger对象</span><br></pre></td></tr></table></figure>

<p>将 <code>/data</code> 下的文件打包放置当前程序目录</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">ret = shutil.make_archive(<span class="string">&quot;data_bak&quot;</span>, <span class="string">&#x27;gztar&#x27;</span>, root_dir=<span class="string">&#x27;/data&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>将 <code>/data</code>下的文件打包放置 <code>/tmp/</code>目录</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">ret = shutil.make_archive(<span class="string">&quot;/tmp/data_bak&quot;</span>, <span class="string">&#x27;gztar&#x27;</span>, root_dir=<span class="string">&#x27;/data&#x27;</span>) </span><br></pre></td></tr></table></figure>

<p><code>shutil </code>对压缩包的处理是调用 <code>ZipFile</code> 和 <code>TarFile</code> 两个模块来进行的.</p>
<p>详细：</p>
<p>压缩</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">z = zipfile.ZipFile(<span class="string">&#x27;laxi.zip&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">z.write(<span class="string">&#x27;a.log&#x27;</span>)</span><br><span class="line">z.write(<span class="string">&#x27;data.data&#x27;</span>)</span><br><span class="line">z.close()</span><br></pre></td></tr></table></figure>

<p>解压</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">z = zipfile.ZipFile(<span class="string">&#x27;laxi.zip&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">z.extractall(path=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">z.close()</span><br></pre></td></tr></table></figure>

<p>使用<code>tarfile</code>压缩与解压缩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import tarfile</span><br></pre></td></tr></table></figure>

<p>压缩</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t=tarfile.<span class="built_in">open</span>(<span class="string">&#x27;/tmp/egon.tar&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">t.add(<span class="string">&#x27;/test1/a.py&#x27;</span>,arcname=<span class="string">&#x27;a.bak&#x27;</span>)</span><br><span class="line">t.add(<span class="string">&#x27;/test1/b.py&#x27;</span>,arcname=<span class="string">&#x27;b.bak&#x27;</span>)</span><br><span class="line">t.close()</span><br></pre></td></tr></table></figure>

<p>解压缩</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t=tarfile.<span class="built_in">open</span>(<span class="string">&#x27;/tmp/egon.tar&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">t.extractall(<span class="string">&#x27;/egon&#x27;</span>)</span><br><span class="line">t.close()</span><br></pre></td></tr></table></figure>

<p>练习：</p>
<p>将<code>ATM</code>文件夹以<code>tar.gz</code>方式压缩，然后解压到<code>aaa</code>文件夹内。最后删除<code>aaa</code>文件夹。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"><span class="comment">#压缩</span></span><br><span class="line">shutil.make_archive(<span class="string">&quot;backup&quot;</span>, <span class="string">&#x27;gztar&#x27;</span>, root_dir=<span class="string">r&#x27;D:\pccharmcode\ATM&#x27;</span>)</span><br><span class="line"><span class="comment">#解压</span></span><br><span class="line">o = tarfile.<span class="built_in">open</span>(<span class="string">&#x27;backup.tar.gz&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">o.extractall(<span class="string">r&#x27;D:\pccharmcode\aaa&#x27;</span>)</span><br><span class="line">o.close()</span><br><span class="line"><span class="comment">#删除aaa文件夹</span></span><br><span class="line">shutil.rmtree(<span class="string">r&#x27;D:\pccharmcode\aaa&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="xml模块"><a href="#xml模块" class="headerlink" title="xml模块"></a>xml模块</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from xml.etree import ElementTree</span><br><span class="line">tree = ElementTree.parse(&#x27;a.xml&#x27;)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"># print(root.tag)</span><br><span class="line"># print(root.attrib)</span><br><span class="line"># print(root.text)</span><br></pre></td></tr></table></figure>

<p>三种查找方式</p>
<p>从子节点中查找</p>
<p>显示一种</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(root.find(<span class="string">&#x27;country&#x27;</span>)) <span class="comment">#&lt;Element &#x27;country&#x27; at 0x000001E26EDCC130&gt;</span></span><br><span class="line"><span class="comment">#加.tag .attrib .text就可以显示内容</span></span><br></pre></td></tr></table></figure>

<p>显示所有。以列表的形式显示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(root.findall(<span class="string">&#x27;country&#x27;</span>)) </span><br><span class="line"><span class="comment">#[&lt;Element &#x27;country&#x27; at 0x0000027D6F00C0E0&gt;, &lt;Element &#x27;country&#x27; at 0x0000027D6F00C2C0&gt;, &lt;Element &#x27;country&#x27; at 0x0000027D6F00C450&gt;]</span></span><br></pre></td></tr></table></figure>

<p>注意：如果找不到就会显示<code> None</code></p>
<p>从树形结构中查找</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root.<span class="built_in">iter</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(root.<span class="built_in">iter</span>(<span class="string">&#x27;country&#x27;</span>)))</span><br></pre></td></tr></table></figure>

<h3 id="遍历文档"><a href="#遍历文档" class="headerlink" title="遍历文档"></a>遍历文档</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree</span><br><span class="line">tree = ElementTree.parse(<span class="string">&#x27;a.xml&#x27;</span>)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;==========&gt;&#x27;</span>, country.tag, country.attrib, country.attrib[<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line">    <span class="keyword">for</span> rank <span class="keyword">in</span> country:</span><br><span class="line">        <span class="built_in">print</span>(rank.tag, rank.attrib, rank.text)</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">==========&gt; country &#123;&#x27;name&#x27;: &#x27;Liechtenstein&#x27;&#125; Liechtenstein</span><br><span class="line">rank &#123;&#x27;updated&#x27;: &#x27;yes&#x27;&#125; 2</span><br><span class="line">year &#123;&#125; 2008</span><br><span class="line">gdppc &#123;&#125; 141100</span><br><span class="line">neighbor &#123;&#x27;name&#x27;: &#x27;Austria&#x27;, &#x27;direction&#x27;: &#x27;E&#x27;&#125; None</span><br><span class="line">neighbor &#123;&#x27;name&#x27;: &#x27;Switzerland&#x27;, &#x27;direction&#x27;: &#x27;W&#x27;&#125; None</span><br><span class="line">==========&gt; country &#123;&#x27;name&#x27;: &#x27;Singapore&#x27;&#125; Singapore</span><br><span class="line">rank &#123;&#x27;updated&#x27;: &#x27;yes&#x27;&#125; 5</span><br><span class="line">year &#123;&#125; 2011</span><br><span class="line">gdppc &#123;&#125; 59900</span><br><span class="line">neighbor &#123;&#x27;name&#x27;: &#x27;Malaysia&#x27;, &#x27;direction&#x27;: &#x27;N&#x27;&#125; None</span><br><span class="line">==========&gt; country &#123;&#x27;name&#x27;: &#x27;Panama&#x27;&#125; Panama</span><br><span class="line">rank &#123;&#x27;updated&#x27;: &#x27;yes&#x27;&#125; 69</span><br><span class="line">year &#123;&#125; 2011</span><br><span class="line">gdppc &#123;&#125; 13600</span><br><span class="line">neighbor &#123;&#x27;name&#x27;: &#x27;Costa Rica&#x27;, &#x27;direction&#x27;: &#x27;W&#x27;&#125; None</span><br><span class="line">neighbor &#123;&#x27;name&#x27;: &#x27;Colombia&#x27;, &#x27;direction&#x27;: &#x27;E&#x27;&#125; None</span><br></pre></td></tr></table></figure>

<h4 id="只遍历year节点"><a href="#只遍历year节点" class="headerlink" title="只遍历year节点"></a>只遍历year节点</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> year <span class="keyword">in</span> root.<span class="built_in">iter</span>(<span class="string">&#x27;year&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(year.tag, year.text)</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">year 2008</span><br><span class="line">year 2011</span><br><span class="line">year 2011</span><br></pre></td></tr></table></figure>

<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> root.<span class="built_in">iter</span>(<span class="string">&#x27;year&#x27;</span>):</span><br><span class="line">    new_year = <span class="built_in">int</span>(c.text)+<span class="number">1</span></span><br><span class="line">    c.text = <span class="built_in">str</span>(new_year)</span><br><span class="line">    c.<span class="built_in">set</span>(<span class="string">&#x27;update&#x27;</span>, <span class="string">&#x27;yes&#x27;</span>)</span><br><span class="line">    c.<span class="built_in">set</span>(<span class="string">&#x27;version&#x27;</span>, <span class="string">&#x27;1.0&#x27;</span>)</span><br><span class="line">tree.write(<span class="string">&#x27;b.xml&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">&#x27;country&#x27;</span>):</span><br><span class="line">    rank = <span class="built_in">int</span>(country.find(<span class="string">&#x27;rank&#x27;</span>).text)</span><br><span class="line">    <span class="keyword">if</span> rank &gt; <span class="number">50</span>:</span><br><span class="line">        root.remove(country)</span><br><span class="line">tree.write(<span class="string">&#x27;output.xml&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在<code>country</code>内添加<code>（append）</code>节点<code>year2</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">&#x27;country&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> year <span class="keyword">in</span> country.findall(<span class="string">&#x27;year&#x27;</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(year.text) &gt; <span class="number">2000</span>:</span><br><span class="line">            year2 = ElementTree.Element(<span class="string">&#x27;year2&#x27;</span>)</span><br><span class="line">            year2.text = <span class="string">&#x27;happy-new-year&#x27;</span></span><br><span class="line">            year2.attrib = &#123;<span class="string">&#x27;update&#x27;</span>:<span class="string">&#x27;yes&#x27;</span>&#125;</span><br><span class="line">            country.append(year2) <span class="comment">#往country节点下添加子节点</span></span><br><span class="line">tree.write(<span class="string">&#x27;a.xml.swap&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="configerparser模块"><a href="#configerparser模块" class="headerlink" title="configerparser模块"></a>configerparser模块</h2><p><code>[mysqld]</code>叫做<code>section</code></p>
<p><code>port</code>、<code>basedir</code>等等叫做<code>option</code></p>
<p>练习配置文件<code>my.ini</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">port = 3306</span><br><span class="line">basedir = D:\\softnew\\MYSQL\\mysql-5.7.20-winx64</span><br><span class="line">max_connections = 200</span><br><span class="line">character-set-server = utf8</span><br><span class="line">default-storage-engine = INNODB</span><br><span class="line">skip-grant-table = True</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">user = root</span><br><span class="line">password = 123</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">&#x27;my.ini&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(config.sections()) <span class="comment">#查看所有的标题</span></span><br><span class="line"><span class="built_in">print</span>(config.options(<span class="string">&#x27;mysqld&#x27;</span>)) <span class="comment">#查看标题mysqld下所有key=value的key</span></span><br><span class="line"><span class="built_in">print</span>(config.get(<span class="string">&#x27;mysqld&#x27;</span>, <span class="string">&#x27;port&#x27;</span>)) <span class="comment">#查看标题mysqld下port的值=&gt;字符串格式</span></span><br></pre></td></tr></table></figure>

<p>判断有没有名字为<code>aaa</code>的<code>option</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> config.has_option(<span class="string">&#x27;mysqld&#x27;</span>, <span class="string">&#x27;aaa&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(config.get(<span class="string">&#x27;mysqld&#x27;</span>, <span class="string">&#x27;aaaa&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>查看值的类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(config.get(<span class="string">&#x27;mysqld&#x27;</span>, <span class="string">&#x27;skip-grant-table&#x27;</span>))) <span class="comment">#&lt;class &#x27;str&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<p>转换成布尔类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(config.getboolean(<span class="string">&#x27;mysqld&#x27;</span>, <span class="string">&#x27;skip-grant-table&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(config.getint(<span class="string">&#x27;mysqld&#x27;</span>, <span class="string">&#x27;port&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(config.getfloat(<span class="string">&#x27;mysqld&#x27;</span>, <span class="string">&#x27;port&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>向文件中添加section和option</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">config.add_section(<span class="string">&#x27;client1&#x27;</span>)</span><br><span class="line">config.<span class="built_in">set</span>(<span class="string">&#x27;client1&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;jack&#x27;</span>)</span><br><span class="line">config.<span class="built_in">set</span>(<span class="string">&#x27;client1&#x27;</span>, <span class="string">&#x27;port&#x27;</span>, <span class="string">&#x27;2000&#x27;</span>)</span><br><span class="line">config.write(<span class="built_in">open</span>(<span class="string">&#x27;my.ini&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p><code>my.ini</code>文件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/image-20220326204239624.webp" alt="image-20220326204239624"></p>
<p>将<code>section（client1）</code>中<code>option(port)</code>对应的值<code>2000</code>改为<code>3000</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">config.<span class="built_in">set</span>(<span class="string">&#x27;client1&#x27;</span>, <span class="string">&#x27;port&#x27;</span>, <span class="string">&#x27;3000&#x27;</span>)</span><br><span class="line">config.write(<span class="built_in">open</span>(<span class="string">&#x27;my.ini&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>查看<code>my.ini</code>文件，<code>port</code>对应的值已经改变。</p>
<h2 id="hashlib模块"><a href="#hashlib模块" class="headerlink" title="hashlib模块"></a>hashlib模块</h2><h3 id="什么叫hash"><a href="#什么叫hash" class="headerlink" title="什么叫hash?"></a>什么叫hash?</h3><p>hash是一种算法（<code>3.x</code>里代替了<code>md5模块</code>和<code>sha模块</code>，主要提供 <code>SHA1, SHA224, SHA256, SHA384, SHA512 ，MD5 算法</code>），该算法接受传入的内容，经过运算得到一串hash值。</p>
<h3 id="hash值的特点"><a href="#hash值的特点" class="headerlink" title="hash值的特点"></a>hash值的特点</h3><p>只要传入的内容一样，得到的hash值必然一样&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;要用明文传输密码文件完整性校验。</p>
<p>不能由hash值返解成内容&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;》把密码做成hash值，不应该在网络传输明文密码。</p>
<p>只要使用的hash算法不变，无论校验的内容有多大，得到的hash值长度是固定的。</p>
<p>hash算法就像一座工厂，工厂接收你送来的原材料（可以用<code>m.update()</code>为工厂运送原材料），经过加工返回的产品就是<code>hash值</code>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/image-20220326213810288.webp" alt="image-20220326213810288"></p>
<p>练习</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line">m = hashlib.md5() <span class="comment"># m=hashlib.sha256()</span></span><br><span class="line">m.update(<span class="string">&#x27;jack&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(m.hexdigest()) <span class="comment">#4ff9fc6e4e5d5f590c4f2134a8cc96d1</span></span><br><span class="line"></span><br><span class="line">m.update(<span class="string">&#x27;j&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(m.hexdigest()) <span class="comment">#636a4e0a176a6cbb43dd00aec17e64ab</span></span><br><span class="line"></span><br><span class="line">m2 = hashlib.sha3_256()</span><br><span class="line">m2.update(<span class="string">&#x27;jack123&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(m2.hexdigest()) <span class="comment">#1183ac670862872ae3315c178a68dddd6166a004b0086bfa23f70e780fe7545c</span></span><br><span class="line"></span><br><span class="line">m2.update(<span class="string">&#x27;j&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(m2.hexdigest()) <span class="comment">#fe50db7bfb8a1e79934413625d2024114de0afd62bd17c3e9d97aee74f8553c6</span></span><br></pre></td></tr></table></figure>

<p>注意：把一段很长的数据<code>update多次</code>，与一次<code>update</code>这段长数据，得到的结果一样。但是<code>update</code>多次为校验大文件提供了可能。</p>
<p>以上加密算法虽然依然非常厉害，但时候存在缺陷，即：通过撞库可以反解。所以，有必要对加密算法中添加自定义key再来做加密。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="built_in">hash</span> = hashlib.sha256(<span class="string">&#x27;898oaFs09f&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">hash</span>.update(<span class="string">&#x27;alvin&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hash</span>.hexdigest()) <span class="comment">#e79e68f070cdedcfe63eaf1a2e92c83b4cfb1b5c6bc452d214c1b7e77cdfd1c7</span></span><br></pre></td></tr></table></figure>

<p>模拟用户登录并把密码哈希</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&#x27;user&gt;&gt;: &#x27;</span>)</span><br><span class="line">pwd = <span class="built_in">input</span>(<span class="string">&#x27;password&gt;&gt;: &#x27;</span>)</span><br><span class="line">m = hashlib.md5()</span><br><span class="line">m.update(pwd.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">pwd = m.hexdigest()</span><br><span class="line"><span class="built_in">print</span>(name, pwd) <span class="comment"># jack 1d6c1e168e362bc0092f247399003a88(jack123)</span></span><br></pre></td></tr></table></figure>

<p>模拟撞库，先生成字典。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cryt_pwd = <span class="string">&#x27;1d6c1e168e362bc0092f247399003a88&#x27;</span></span><br><span class="line">pwds=[</span><br><span class="line">    <span class="string">&#x27;jack1234&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;jack&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;jack456&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;jack123&#x27;</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mack_dic</span>(<span class="params">pwds</span>):</span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> pwd <span class="keyword">in</span> pwds:</span><br><span class="line">        m = hashlib.md5(pwd.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        dic[pwd] = m.hexdigest()</span><br><span class="line">    <span class="keyword">return</span> dic</span><br><span class="line">dic = mack_dic(pwds)</span><br><span class="line"><span class="keyword">for</span> pwd <span class="keyword">in</span> dic:</span><br><span class="line">    <span class="keyword">if</span> dic[pwd] == cryt_pwd:</span><br><span class="line">        <span class="built_in">print</span>(pwd)</span><br></pre></td></tr></table></figure>

<p><code>结果：jack123</code></p>
<p>python 还有一个 <code>hmac 模块</code>，它内部对我们创建 <code>key</code> 和 内容 进行进一步的处理然后再加密</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line">h1=hmac.new(<span class="string">&#x27;hello&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>),digestmod=<span class="string">&#x27;md5&#x27;</span>)</span><br><span class="line">h1.update(<span class="string">&#x27;world&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(h1.hexdigest())</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line">m = hmac.new(key=<span class="string">&#x27;加盐&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>), msg=<span class="string">&#x27;jack123&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>), digestmod=hashlib.sha1)</span><br><span class="line"><span class="built_in">print</span>(m.hexdigest())</span><br></pre></td></tr></table></figure>

<p>要想保证<code>hmac</code>最终结果一致，必须保证：<br><code>hmac.new</code>括号内指定的初始key一样<br>无论<code>update</code>多少次，校验的内容累加到一起是一样的内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 操作一</span></span><br><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line">h1=hmac.new(<span class="string">&#x27;hello&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>),digestmod=<span class="string">&#x27;md5&#x27;</span>)</span><br><span class="line">h1.update(<span class="string">&#x27;world&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(h1.hexdigest()) <span class="comment"># 0e2564b7e100f034341ea477c23f283b</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 操作二</span></span><br><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line">h2=hmac.new(<span class="string">&#x27;hello&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>),digestmod=<span class="string">&#x27;md5&#x27;</span>)</span><br><span class="line">h2.update(<span class="string">&#x27;w&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">h2.update(<span class="string">&#x27;orld&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(h1.hexdigest()) <span class="comment"># 0e2564b7e100f034341ea477c23f283b</span></span><br></pre></td></tr></table></figure>

<h2 id="subprocess模块"><a href="#subprocess模块" class="headerlink" title="subprocess模块"></a>subprocess模块</h2><p>在<code>linux</code>中使用<code>subporcess</code>模块可以实现shell命令效果。</p>
<p>在<code>windows</code>中使用可以实现<code>windows平台</code>下的命令。</p>
<p>举例：在<code>Linux</code>下查找<code>/root路径</code>下所有以<code>.txt</code>结尾的文件。</p>
<p>shell 实现</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /root | grep txt$</span><br></pre></td></tr></table></figure>

<p><code>subprocess模块</code>实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">res1=subprocess.Popen(<span class="string">&#x27;ls /root&#x27;</span>, shell=<span class="literal">True</span>,stdout=subprocess.PIPE)</span><br><span class="line">res=subprocess.Popen(<span class="string">&#x27;grep txt$&#x27;</span>, shell=<span class="literal">True</span>, stdin=res1.stdout, stdout=subprocess.PIPE)</span><br><span class="line"><span class="built_in">print</span>(res.stdout.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>解析：</p>
<p><code>subprocess.Popen()</code>执行命令<code>ls /root</code>并传入管道（<code>subprocess.PIPE</code>）并赋值给<code>res1</code></p>
<p><code>shell=True</code>指定用<code>shell</code>来执行。</p>
<p><code>subprocess.Popen()</code>执行命令<code>grep txt$</code>先把<code>res1</code>传进来，然后再把整个命令作为输出，最后赋值给res。</p>
<p>读输出的内容，<code>linux平台</code>默认编码为<code>utf-8</code>。</p>
<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a.txt</span><br><span class="line">output.txt</span><br><span class="line">url.txt</span><br></pre></td></tr></table></figure>

<p>windows平台</p>
<p>查看当前系统所有任务</p>
<p><code>shell</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist</span><br></pre></td></tr></table></figure>

<p>使用<code>subprocess</code>实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">res=subprocess.Popen(<span class="string">&#x27;tasklist&#x27;</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE)</span><br><span class="line"><span class="built_in">print</span>(res.stdout.read().decode(<span class="string">&#x27;gbk&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>注意：windows下默认编码为<code>gbk</code>。使用其他编码会出现乱码情况。</p>
<p>结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">映像名称                       PID 会话名              会话#       内存使用 </span><br><span class="line">========================= ======== ================ =========== ============</span><br><span class="line">System Idle Process              0 Services                   0          8 K</span><br><span class="line">System                           4 Services                   0        148 K</span><br><span class="line">Secure System                   88 Services                   0     73,304 K</span><br><span class="line">Registry                       156 Services                   0    108,364 K</span><br><span class="line">smss.exe                       532 Services                   0      1,232 K</span><br><span class="line">csrss.exe                      868 Services                   0      5,128 K</span><br><span class="line">Everything.exe               14296 Console                    1    110,268 K</span><br><span class="line">LogiOptions.exe               2244 Console                    1     15,932 K</span><br><span class="line">conhost.exe                   6812 Console                    1     11,480 K</span><br><span class="line">python.exe                    9740 Console                    1     10,116 K</span><br><span class="line">cmd.exe                       3740 Console                    1      4,852 K</span><br><span class="line">tasklist.exe                 15428 Console                    1      9,824 K</span><br></pre></td></tr></table></figure>

<p>官方文档<a target="_blank" rel="noopener" href="https://docs.python.org/2/library/subprocess.html?highlight=subprocess#frequently-used-arguments">参考</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://blog.haipengv.com">Haipeng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.haipengv.com/2022/03/26/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/">https://blog.haipengv.com/2022/03/26/python常用模块/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.haipengv.com" target="_blank">Peng's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python/">python</a></div><div class="post_share"><div class="social-share" data-image="/img/postimages/article9.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/26/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="序列化与反序列化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article6.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">序列化与反序列化</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/26/%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/" title="模块与包"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article6.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">模块与包</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/07/17/Bs4%E3%80%81%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E3%80%81Re%E6%A8%A1%E5%9D%97/" title="Bs4-正则表达式-Re模块"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article8.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-17</div><div class="title">Bs4-正则表达式-Re模块</div></div></a></div><div><a href="/2022/06/13/Python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/" title="Python数据结构总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article9.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-13</div><div class="title">Python数据结构总结</div></div></a></div><div><a href="/2022/07/21/flask%E5%85%A5%E9%97%A8/" title="Flask入门"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/animal.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-21</div><div class="title">Flask入门</div></div></a></div><div><a href="/2022/07/03/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%85%83%E7%BB%84/" title="python回炉重造-元组"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article10.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-03</div><div class="title">python回炉重造-元组</div></div></a></div><div><a href="/2022/07/03/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%87%BD%E6%95%B0/" title="python回炉重造-函数"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article10.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-03</div><div class="title">python回炉重造-函数</div></div></a></div><div><a href="/2022/07/03/python%E5%9B%9E%E7%82%89%E9%87%8D%E9%80%A0-%E5%88%97%E8%A1%A8/" title="python回炉重造-列表"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article6.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-03</div><div class="title">python回炉重造-列表</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/logo.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Haipeng</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">109</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">31</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Smithkenny"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Smithkenny" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97%E8%A7%92%E8%89%B2"><span class="toc-number">1.</span> <span class="toc-text">日志模块角色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E"><span class="toc-number">2.</span> <span class="toc-text">日志模块相关说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#format%E5%8F%82%E6%95%B0%E4%B8%AD%E5%8F%AF%E8%83%BD%E7%94%A8%E5%88%B0%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%B2"><span class="toc-number">2.1.</span> <span class="toc-text">format参数中可能用到的格式化串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">日志打印实现过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">日志的继承关系（了解）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97%E5%BA%94%E7%94%A8"><span class="toc-number">5.</span> <span class="toc-text">日志模块应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.</span> <span class="toc-text">整体项目结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%8F%E4%B8%AA%E7%9B%AE%E5%BD%95%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">5.2.</span> <span class="toc-text">每个目录简单介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%BA%90%E7%A0%81"><span class="toc-number">5.3.</span> <span class="toc-text">相关源码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#re%E6%A8%A1%E5%9D%97-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text">re模块-正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%A3%E5%88%99%EF%BC%9F"><span class="toc-number">6.1.</span> <span class="toc-text">什么是正则？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F-%E5%85%83%E5%AD%97%E7%AC%A6"><span class="toc-number">6.2.</span> <span class="toc-text">常用匹配模式(元字符)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%82%B9"><span class="toc-number">6.2.1.</span> <span class="toc-text">点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E5%8F%B7"><span class="toc-number">6.2.2.</span> <span class="toc-text">问号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%9F"><span class="toc-number">6.2.3.</span> <span class="toc-text">星</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E5%8F%B7"><span class="toc-number">6.2.4.</span> <span class="toc-text">加号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%A7%E6%8B%AC%E5%8F%B7"><span class="toc-number">6.2.5.</span> <span class="toc-text">大括号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%82%B9%E6%98%9F"><span class="toc-number">6.2.6.</span> <span class="toc-text">点星</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%82%B9%E6%98%9F%E9%97%AE%E5%8F%B7"><span class="toc-number">6.2.7.</span> <span class="toc-text">点星问号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%9C%E6%9D%A0"><span class="toc-number">6.2.8.</span> <span class="toc-text">斜杠</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E6%8B%AC%E5%8F%B7"><span class="toc-number">6.2.9.</span> <span class="toc-text">小括号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E6%8B%AC%E5%8F%B7"><span class="toc-number">6.2.10.</span> <span class="toc-text">中括号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#re%E6%A8%A1%E5%9D%97%E7%9A%84%E5%85%B6%E4%BB%96%E7%94%A8%E6%B3%95"><span class="toc-number">6.3.</span> <span class="toc-text">re模块的其他用法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%A8%A1%E5%9D%97"><span class="toc-number">7.</span> <span class="toc-text">时间模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#random%E6%A8%A1%E5%9D%97"><span class="toc-number">8.</span> <span class="toc-text">random模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#os%E6%A8%A1%E5%9D%97"><span class="toc-number">9.</span> <span class="toc-text">os模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sys%E6%A8%A1%E5%9D%97"><span class="toc-number">10.</span> <span class="toc-text">sys模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shutil%E6%A8%A1%E5%9D%97"><span class="toc-number">11.</span> <span class="toc-text">shutil模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xml%E6%A8%A1%E5%9D%97"><span class="toc-number">12.</span> <span class="toc-text">xml模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%96%87%E6%A1%A3"><span class="toc-number">12.1.</span> <span class="toc-text">遍历文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AA%E9%81%8D%E5%8E%86year%E8%8A%82%E7%82%B9"><span class="toc-number">12.1.1.</span> <span class="toc-text">只遍历year节点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9"><span class="toc-number">12.2.</span> <span class="toc-text">修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">12.3.</span> <span class="toc-text">删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#configerparser%E6%A8%A1%E5%9D%97"><span class="toc-number">13.</span> <span class="toc-text">configerparser模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hashlib%E6%A8%A1%E5%9D%97"><span class="toc-number">14.</span> <span class="toc-text">hashlib模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E5%8F%ABhash"><span class="toc-number">14.1.</span> <span class="toc-text">什么叫hash?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hash%E5%80%BC%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">14.2.</span> <span class="toc-text">hash值的特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#subprocess%E6%A8%A1%E5%9D%97"><span class="toc-number">15.</span> <span class="toc-text">subprocess模块</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/11/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/" title="前端框架"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/lighthouse.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端框架"/></a><div class="content"><a class="title" href="/2023/05/11/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/" title="前端框架">前端框架</a><time datetime="2023-05-11T07:15:44.000Z" title="发表于 2023-05-11 15:15:44">2023-05-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/22/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/" title="docker创建专有网卡"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/cat.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="docker创建专有网卡"/></a><div class="content"><a class="title" href="/2023/02/22/docker%E5%88%9B%E5%BB%BA%E4%B8%93%E6%9C%89%E7%BD%91%E5%8D%A1/" title="docker创建专有网卡">docker创建专有网卡</a><time datetime="2023-02-22T01:18:44.000Z" title="发表于 2023-02-22 09:18:44">2023-02-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/21/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/" title="docker使用tab自动补全命令"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article4.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="docker使用tab自动补全命令"/></a><div class="content"><a class="title" href="/2023/02/21/docker%E9%85%8D%E7%BD%AEtab%E8%A1%A5%E5%85%A8%E5%91%BD%E4%BB%A4/" title="docker使用tab自动补全命令">docker使用tab自动补全命令</a><time datetime="2023-02-21T02:38:44.000Z" title="发表于 2023-02-21 10:38:44">2023-02-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/20/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="使用浏览器登录linux服务器"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/article5.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用浏览器登录linux服务器"/></a><div class="content"><a class="title" href="/2023/02/20/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="使用浏览器登录linux服务器">使用浏览器登录linux服务器</a><time datetime="2023-02-20T01:38:44.000Z" title="发表于 2023-02-20 09:38:44">2023-02-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/17/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/" title="centos7.3离线安装docker"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postimages/blue.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="centos7.3离线安装docker"/></a><div class="content"><a class="title" href="/2023/02/17/centos7.3%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker/" title="centos7.3离线安装docker">centos7.3离线安装docker</a><time datetime="2023-02-17T05:38:44.000Z" title="发表于 2023-02-17 13:38:44">2023-02-17</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/postimages/article9.webp')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By Haipeng</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">生命在于折腾!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>